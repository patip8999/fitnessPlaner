import{A as Ht,a as L,b as oe,c as rD,d as Ug,e as N,f as iD,g as Gl,h as oD,i as sD,j as aD,k as Bg,l as uD,m as Iu,n as $g,o as Wl,p as cD,q as lD,r as zg,s as Qe,t as uo,u as or,v as Kl,w as Du,x as dD,y as hD,z as gi}from"./chunk-DA3O343V.js";function fD(n,e){return Object.is(n,e)}var mt=null,Ql=!1,Yl=1,Vr=Symbol("SIGNAL");function ve(n){let e=mt;return mt=n,e}function pD(){return mt}var bu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gg(n){if(Ql)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(n);let e=mt.nextProducerIndex++;if(ed(mt),e<mt.producerNode.length&&mt.producerNode[e]!==n&&Cu(mt)){let t=mt.producerNode[e];Xl(t,mt.producerIndexOfThis[e])}mt.producerNode[e]!==n&&(mt.producerNode[e]=n,mt.producerIndexOfThis[e]=Cu(mt)?vD(n,mt,e):0),mt.producerLastReadVersion[e]=n.version}function h1(){Yl++}function gD(n){if(!(Cu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Yl)){if(!n.producerMustRecompute(n)&&!Kg(n)){n.dirty=!1,n.lastCleanEpoch=Yl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Yl}}function mD(n){if(n.liveConsumerNode===void 0)return;let e=Ql;Ql=!0;try{for(let t of n.liveConsumerNode)t.dirty||f1(t)}finally{Ql=e}}function yD(){return mt?.consumerAllowSignalWrites!==!1}function f1(n){n.dirty=!0,mD(n),n.consumerMarkedDirty?.(n)}function Jl(n){return n&&(n.nextProducerIndex=0),ve(n)}function Wg(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Kg(n){ed(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(gD(t),r!==t.version))return!0}return!1}function Qg(n){if(ed(n),Cu(n))for(let e=0;e<n.producerNode.length;e++)Xl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function vD(n,e,t){if(_D(n),n.liveConsumerNode.length===0&&wD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=vD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Xl(n,e){if(_D(n),n.liveConsumerNode.length===1&&wD(n))for(let r=0;r<n.producerNode.length;r++)Xl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ed(i),i.producerIndexOfThis[r]=e}}function Cu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ed(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function _D(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function wD(n){return n.producerNode!==void 0}function ED(n){let e=Object.create(p1);e.computation=n;let t=()=>{if(gD(e),Gg(e),e.value===Zl)throw e.error;return e.value};return t[Vr]=e,t}var qg=Symbol("UNSET"),Hg=Symbol("COMPUTING"),Zl=Symbol("ERRORED"),p1=oe(L({},bu),{value:qg,dirty:!0,error:null,equal:fD,producerMustRecompute(n){return n.value===qg||n.value===Hg},producerRecomputeValue(n){if(n.value===Hg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Hg;let t=Jl(n),r;try{r=n.computation()}catch(i){r=Zl,n.error=i}finally{Wg(n,t)}if(e!==qg&&e!==Zl&&r!==Zl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function g1(){throw new Error}var ID=g1;function DD(){ID()}function CD(n){ID=n}var m1=null;function bD(n){let e=Object.create(SD);e.value=n;let t=()=>(Gg(e),e.value);return t[Vr]=e,t}function Yg(n,e){yD()||DD(),n.equal(n.value,e)||(n.value=e,y1(n))}function TD(n,e){yD()||DD(),Yg(n,e(n.value))}var SD=oe(L({},bu),{equal:fD,value:void 0});function y1(n){n.version++,h1(),mD(n),m1?.()}function ae(n){return typeof n=="function"}function hs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var td=hs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function co(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof td?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AD(o)}catch(s){e=e??[],s instanceof td?e=[...e,...s.errors]:e.push(s)}}if(e)throw new td(e)}}add(e){var t;if(e&&e!==this)if(this.closed)AD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&co(t,e)}remove(e){let{_finalizers:t}=this;t&&co(t,e),e instanceof n&&e._removeParent(this)}};tt.EMPTY=(()=>{let n=new tt;return n.closed=!0,n})();var Zg=tt.EMPTY;function nd(n){return n instanceof tt||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function AD(n){ae(n)?n():n.unsubscribe()}var jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fs={setTimeout(n,e,...t){let{delegate:r}=fs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rd(n){fs.setTimeout(()=>{let{onUnhandledError:e}=jn;if(e)e(n);else throw n})}function Tu(){}var MD=Jg("C",void 0,void 0);function xD(n){return Jg("E",void 0,n)}function RD(n){return Jg("N",n,void 0)}function Jg(n,e,t){return{kind:n,value:e,error:t}}var lo=null;function ps(n){if(jn.useDeprecatedSynchronousErrorHandling){let e=!lo;if(e&&(lo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=lo;if(lo=null,t)throw r}}else n()}function ND(n){jn.useDeprecatedSynchronousErrorHandling&&lo&&(lo.errorThrown=!0,lo.error=n)}var ho=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nd(e)&&e.add(this)):this.destination=w1}static create(e,t,r){return new Lr(e,t,r)}next(e){this.isStopped?em(RD(e),this):this._next(e)}error(e){this.isStopped?em(xD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?em(MD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},v1=Function.prototype.bind;function Xg(n,e){return v1.call(n,e)}var tm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){id(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){id(r)}else id(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){id(t)}}},Lr=class extends ho{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&jn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xg(e.next,o),error:e.error&&Xg(e.error,o),complete:e.complete&&Xg(e.complete,o)}):i=e}this.destination=new tm(i)}};function id(n){jn.useDeprecatedSynchronousErrorHandling?ND(n):rd(n)}function _1(n){throw n}function em(n,e){let{onStoppedNotification:t}=jn;t&&fs.setTimeout(()=>t(n,e))}var w1={closed:!0,next:Tu,error:_1,complete:Tu};var gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(n){return n}function nm(...n){return rm(n)}function rm(n){return n.length===0?Gt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=I1(t)?t:new Lr(t,r,i);return ps(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=PD(r),new r((i,o)=>{let s=new Lr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[gs](){return this}pipe(...t){return rm(t)(this)}toPromise(t){return t=PD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function PD(n){var e;return(e=n??jn.Promise)!==null&&e!==void 0?e:Promise}function E1(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function I1(n){return n&&n instanceof ho||E1(n)&&nd(n)}function im(n){return ae(n?.lift)}function pe(n){return e=>{if(im(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(n,e,t,r,i){return new om(n,e,t,r,i)}var om=class extends ho{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ms(){return pe((n,e)=>{let t=null;n._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ys=class extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,im(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tt;let t=this.getSubject();e.add(this.source.subscribe(ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tt.EMPTY)}return e}refCount(){return ms()(this)}};var OD=hs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new OD}next(t){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zg:(this.currentObservers=null,o.push(t),new tt(()=>{this.currentObservers=null,co(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new od(e,t),n})(),od=class extends Ge{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Zg}};var yt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Su={now(){return(Su.delegate||Date).now()},delegate:void 0};var sd=class extends Ge{constructor(e=1/0,t=1/0,r=Su){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var ad=class extends tt{constructor(e,t){super()}schedule(e,t=0){return this}};var Au={setInterval(n,e,...t){let{delegate:r}=Au;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Au;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var vs=class extends ad{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Au.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Au.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,co(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _s=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_s.now=Su.now;var ws=class extends _s{constructor(e,t=_s.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Mu=new ws(vs);var ud=class extends vs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var cd=class extends ws{};var sm=new cd(ud);var Wt=new ue(n=>n.complete());function kD(n){return n&&ae(n.schedule)}function am(n){return n[n.length-1]}function ld(n){return ae(am(n))?n.pop():void 0}function sr(n){return kD(am(n))?n.pop():void 0}function FD(n,e){return typeof am(n)=="number"?n.pop():e}var dd=n=>n&&typeof n.length=="number"&&typeof n!="function";function hd(n){return ae(n?.then)}function fd(n){return ae(n[gs])}function pd(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function gd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function D1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var md=D1();function yd(n){return ae(n?.[md])}function vd(n){return oD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Gl(t.read());if(i)return yield Gl(void 0);yield yield Gl(r)}}finally{t.releaseLock()}})}function _d(n){return ae(n?.getReader)}function qe(n){if(n instanceof ue)return n;if(n!=null){if(fd(n))return C1(n);if(dd(n))return b1(n);if(hd(n))return T1(n);if(pd(n))return VD(n);if(yd(n))return S1(n);if(_d(n))return A1(n)}throw gd(n)}function C1(n){return new ue(e=>{let t=n[gs]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function b1(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function T1(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rd)})}function S1(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function VD(n){return new ue(e=>{M1(n,e).catch(t=>e.error(t))})}function A1(n){return VD(vd(n))}function M1(n,e){var t,r,i,o;return iD(this,void 0,void 0,function*(){try{for(t=sD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Sn(n,e=0){return pe((t,r)=>{t.subscribe(ge(r,i=>sn(r,n,()=>r.next(i),e),()=>sn(r,n,()=>r.complete(),e),i=>sn(r,n,()=>r.error(i),e)))})}function Un(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LD(n,e){return qe(n).pipe(Un(e),Sn(e))}function jD(n,e){return qe(n).pipe(Un(e),Sn(e))}function UD(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function BD(n,e){return new ue(t=>{let r;return sn(t,e,()=>{r=n[md](),sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function wd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{sn(t,e,()=>{let r=n[Symbol.asyncIterator]();sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $D(n,e){return wd(vd(n),e)}function zD(n,e){if(n!=null){if(fd(n))return LD(n,e);if(dd(n))return UD(n,e);if(hd(n))return jD(n,e);if(pd(n))return wd(n,e);if(yd(n))return BD(n,e);if(_d(n))return $D(n,e)}throw gd(n)}function Ie(n,e){return e?zD(n,e):qe(n)}function te(...n){let e=sr(n);return Ie(n,e)}function Es(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function um(n){return!!n&&(n instanceof ue||ae(n.lift)&&ae(n.subscribe))}var jr=hs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function re(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:x1}=Array;function R1(n,e){return x1(e)?n(...e):n(e)}function Ed(n){return re(e=>R1(n,e))}var{isArray:N1}=Array,{getPrototypeOf:P1,prototype:O1,keys:k1}=Object;function Id(n){if(n.length===1){let e=n[0];if(N1(e))return{args:e,keys:null};if(F1(e)){let t=k1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function F1(n){return n&&typeof n=="object"&&P1(n)===O1}function Dd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xu(...n){let e=sr(n),t=ld(n),{args:r,keys:i}=Id(n);if(r.length===0)return Ie([],e);let o=new ue(V1(r,e,i?s=>Dd(i,s):Gt));return t?o.pipe(Ed(t)):o}function V1(n,e,t=Gt){return r=>{qD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)qD(e,()=>{let l=Ie(n[u],e),d=!1;l.subscribe(ge(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qD(n,e,t){n?sn(t,n,e):e()}function HD(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?E(S):u.push(S),E=S=>{o&&e.next(S),l++;let A=!1;qe(t(S,d++)).subscribe(ge(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let F=u.shift();s?sn(e,s,()=>E(F)):E(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(ge(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ct(n,e,t=1/0){return ae(e)?ct((r,i)=>re((o,s)=>e(r,o,i,s))(qe(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>HD(r,i,n,t)))}function mi(n=1/0){return ct(Gt,n)}function GD(){return mi(1)}function Is(...n){return GD()(Ie(n,sr(n)))}function Cd(n){return new ue(e=>{qe(n()).subscribe(e)})}function cm(...n){let e=ld(n),{args:t,keys:r}=Id(n),i=new ue(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;qe(t[d]).subscribe(ge(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Dd(r,a):a),o.complete())}))}});return e?i.pipe(Ed(e)):i}function lm(...n){let e=sr(n),t=FD(n,1/0),r=n;return r.length?r.length===1?qe(r[0]):mi(t)(Ie(r,e)):Wt}function Et(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,o=>n.call(e,o,i++)&&r.next(o)))})}function yi(n){return pe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ge(t,void 0,void 0,s=>{o=qe(n(s,yi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function WD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ge(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function vi(n,e){return ae(e)?ct(n,e,1):ct(n,1)}function _i(n){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ur(n){return n<=0?()=>Wt:pe((e,t)=>{let r=0;e.subscribe(ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dm(n){return re(()=>n)}function hm(n,e=Gt){return n=n??L1,pe((t,r)=>{let i,o=!0;t.subscribe(ge(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function L1(n,e){return n===e}function bd(n=j1){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function j1(){return new jr}function Ds(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Gt,Ur(1),t?_i(e):bd(()=>new jr))}function Cs(n){return n<=0?()=>Wt:pe((e,t)=>{let r=[];e.subscribe(ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Gt,Cs(1),t?_i(e):bd(()=>new jr))}function Ru(){return pe((n,e)=>{let t,r=!1;n.subscribe(ge(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function fo(n,e){return pe(WD(n,e,arguments.length>=2,!0))}function KD(n={}){let{connector:e=()=>new Ge,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},E=()=>{let S=s;y(),S?.unsubscribe()};return pe((S,A)=>{l++,!f&&!d&&g();let F=u=u??e();A.add(()=>{l--,l===0&&!f&&!d&&(a=pm(E,i))}),F.subscribe(A),!s&&l>0&&(s=new Lr({next:$=>F.next($),error:$=>{f=!0,g(),a=pm(y,t,$),F.error($)},complete:()=>{d=!0,g(),a=pm(y,r),F.complete()}}),qe(S).subscribe(s))})(o)}}function pm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Lr({next:()=>{r.unsubscribe(),n()}});return qe(e(...t)).subscribe(r)}function Td(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,KD({connector:()=>new sd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function po(...n){let e=sr(n);return pe((t,r)=>{(e?Is(n,t,e):Is(n,t)).subscribe(r)})}function Ye(n,e){return pe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,d=o++;qe(n(u,d)).subscribe(i=ge(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sd(n,e){return ae(e)?Ye(()=>n,e):Ye(()=>n)}function gm(n){return pe((e,t)=>{qe(n).subscribe(ge(t,()=>t.complete(),Tu)),!t.closed&&e.subscribe(t)})}function rt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Gt}var PC="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(ph(e,t)),this.code=e}};function ph(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Hu(n){return{toString:n}.toString()}var Ad="__parameters__";function U1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function OC(n,e,t){return Hu(()=>{let r=U1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(Ad)?u[Ad]:Object.defineProperty(u,Ad,{value:[]})[Ad];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var mo=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function B1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function un(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(un).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function QD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var $1=Ve({__forward_ref__:Ve});function Ti(n){return n.__forward_ref__=Ti,n.toString=function(){return un(this())},n}function Kt(n){return kC(n)?n():n}function kC(n){return typeof n=="function"&&n.hasOwnProperty($1)&&n.__forward_ref__===Ti}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function cn(n){return{providers:n.providers||[],imports:n.imports||[]}}function gh(n){return YD(n,VC)||YD(n,LC)}function FC(n){return gh(n)!==null}function YD(n,e){return n.hasOwnProperty(e)?n[e]:null}function z1(n){let e=n&&(n[VC]||n[LC]);return e||null}function ZD(n){return n&&(n.hasOwnProperty(JD)||n.hasOwnProperty(q1))?n[JD]:null}var VC=Ve({\u0275prov:Ve}),JD=Ve({\u0275inj:Ve}),LC=Ve({ngInjectableDef:Ve}),q1=Ve({ngInjectorDef:Ve}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jC(n){return n&&!!n.\u0275providers}var H1=Ve({\u0275cmp:Ve}),G1=Ve({\u0275dir:Ve}),W1=Ve({\u0275pipe:Ve}),K1=Ve({\u0275mod:Ve}),Ud=Ve({\u0275fac:Ve}),Ou=Ve({__NG_ELEMENT_ID__:Ve}),XD=Ve({__NG_ENV_ID__:Ve});function Br(n){return typeof n=="string"?n:n==null?"":String(n)}function Q1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Br(n)}function Y1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Ty(n,e){throw new X(-201,!1)}var me=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(me||{}),Pm;function UC(){return Pm}function an(n){let e=Pm;return Pm=n,e}function BC(n,e,t){let r=gh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&me.Optional)return null;if(e!==void 0)return e;Ty(n,"Injector")}var Z1={},ku=Z1,Om="__NG_DI_FLAG__",Bd="ngTempTokenPath",J1="ngTokenPath",X1=/\n/gm,eO="\u0275",eC="__source",Ms;function tO(){return Ms}function wi(n){let e=Ms;return Ms=n,e}function nO(n,e=me.Default){if(Ms===void 0)throw new X(-203,!1);return Ms===null?BC(n,void 0,e):Ms.get(n,e&me.Optional?null:void 0,e)}function z(n,e=me.Default){return(UC()||nO)(Kt(n),e)}function P(n,e=me.Default){return z(n,mh(e))}function mh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function km(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=me.Default;for(let s=0;s<r.length;s++){let a=r[s],u=rO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function $C(n,e){return n[Om]=e,n.prototype[Om]=e,n}function rO(n){return n[Om]}function iO(n,e,t,r){let i=n[Bd];throw e[eC]&&i.unshift(e[eC]),n.message=oO(`
`+n.message,i,t,r),n[J1]=i,n[Bd]=null,n}function oO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==eO?n.slice(2):n;let i=un(e);if(Array.isArray(e))i=e.map(un).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):un(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(X1,`
  `)}`}var Gu=$C(OC("Optional"),8);var zC=$C(OC("SkipSelf"),4);function vo(n,e){let t=n.hasOwnProperty(Ud);return t?n[Ud]:null}function Sy(n,e){n.forEach(t=>Array.isArray(t)?Sy(t,e):e(t))}function qC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $d(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function aO(n,e,t){let r=Wu(n,e);return r>=0?n[r|1]=t:(r=~r,sO(n,r,e,t)),r}function mm(n,e){let t=Wu(n,e);if(t>=0)return n[t|1]}function Wu(n,e){return uO(n,e,1)}function uO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Rs={},mn=[],_o=new G(""),HC=new G("",-1),GC=new G(""),zd=class{get(e,t=ku){if(t===ku){let r=new Error(`NullInjectorError: No provider for ${un(e)}!`);throw r.name="NullInjectorError",r}return t}},WC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(WC||{}),cr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(cr||{}),Ii=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ii||{});function cO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Fm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];lO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function KC(n){return n===3||n===4||n===6}function lO(n){return n.charCodeAt(0)===64}function Fu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?tC(n,t,i,null,e[++r]):tC(n,t,i,null,null))}}return n}function tC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var QC="ng-template";function dO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ay(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ay(n){return n.type===4&&n.value!==QC}function hO(n,e,t){let r=n.type===4&&!t?QC:n.value;return e===r}function fO(n,e,t){let r=4,i=n.attrs,o=i!==null?mO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Bn(r)&&!Bn(u))return!1;if(s&&Bn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!hO(n,u,t)||u===""&&e.length===1){if(Bn(r))return!1;s=!0}}else if(r&8){if(i===null||!dO(n,i,u,t)){if(Bn(r))return!1;s=!0}}else{let l=e[++a],d=pO(u,i,Ay(n),t);if(d===-1){if(Bn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Bn(r))return!1;s=!0}}}}return Bn(r)||s}function Bn(n){return(n&1)===0}function pO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yO(e,n)}function gO(n,e,t=!1){for(let r=0;r<e.length;r++)if(fO(n,e[r],t))return!0;return!1}function mO(n){for(let e=0;e<n.length;e++){let t=n[e];if(KC(t))return e}return n.length}function yO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function nC(n,e){return n?":not("+e.trim()+")":e}function vO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bn(s)&&(e+=nC(o,i),i=""),r=s,o=o||!Bn(r);t++}return i!==""&&(e+=nC(o,i)),e}function _O(n){return n.map(vO).join(",")}function wO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Bn(i))break;i=o}r++}return{attrs:e,classes:t}}function Se(n){return Hu(()=>{let e=eb(n),t=oe(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===WC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||cr.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});tb(t);let r=n.dependencies;return t.directiveDefs=iC(r,!1),t.pipeDefs=iC(r,!0),t.id=DO(t),t})}function EO(n){return Di(n)||YC(n)}function IO(n){return n!==null}function ln(n){return Hu(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function rC(n,e){if(n==null)return Rs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Ii.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Ii.None?[r,a]:r,e[o]=s):t[o]=r}return t}function kt(n){return Hu(()=>{let e=eb(n);return tb(e),e})}function Ku(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Di(n){return n[H1]||null}function YC(n){return n[G1]||null}function ZC(n){return n[W1]||null}function JC(n){let e=Di(n)||YC(n)||ZC(n);return e!==null?e.standalone:!1}function XC(n,e){let t=n[K1]||null;if(!t&&e===!0)throw new Error(`Type ${un(n)} does not have '\u0275mod' property.`);return t}function eb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Rs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rC(n.inputs,e),outputs:rC(n.outputs),debugInfo:null}}function tb(n){n.features?.forEach(e=>e(n))}function iC(n,e){if(!n)return null;let t=e?ZC:EO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IO)}function DO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qs(n){return{\u0275providers:n}}function My(...n){return{\u0275providers:nb(!0,n),\u0275fromNgModule:!0}}function nb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Sy(e,s=>{let a=s;Vm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rb(i,o),t}function rb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xy(i,o=>{e(o,r)})}}function Vm(n,e,t,r){if(n=Kt(n),!n)return!1;let i=null,o=ZD(n),s=!o&&Di(n);if(!o&&!s){let u=n.ngModule;if(o=ZD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vm(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Sy(o.imports,d=>{Vm(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&rb(l,e)}if(!a){let l=vo(i)||(()=>new i);e({provide:i,useFactory:l,deps:mn},i),e({provide:GC,useValue:i,multi:!0},i),e({provide:_o,useValue:()=>z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;xy(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function xy(n,e){for(let t of n)jC(t)&&(t=t.\u0275providers),Array.isArray(t)?xy(t,e):e(t)}var CO=Ve({provide:String,useValue:Ve});function ib(n){return n!==null&&typeof n=="object"&&CO in n}function bO(n){return!!(n&&n.useExisting)}function TO(n){return!!(n&&n.useFactory)}function Ns(n){return typeof n=="function"}function SO(n){return!!n.useClass}var yh=new G(""),kd={},AO={},ym;function Ry(){return ym===void 0&&(ym=new zd),ym}var yn=class{},Vu=class extends yn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jm(e,s=>this.processProvider(s)),this.records.set(HC,bs(void 0,this)),i.has("environment")&&this.records.set(yn,bs(void 0,this));let o=this.records.get(yh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(GC,mn,me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wi(this),r=an(void 0),i;try{return e()}finally{wi(t),an(r)}}get(e,t=ku,r=me.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(XD))return e[XD](this);r=mh(r);let i,o=wi(this),s=an(void 0);try{if(!(r&me.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=PO(e)&&gh(e);l&&this.injectableDefInScope(l)?u=bs(Lm(e),kd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&me.Self?Ry():this.parent;return t=r&me.Optional&&t===ku?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Bd]=a[Bd]||[]).unshift(un(e)),o)throw a;return iO(a,e,"R3InjectorError",this.source)}else throw a}finally{an(s),wi(o)}}resolveInjectorInitializers(){let e=ve(null),t=wi(this),r=an(void 0),i;try{let o=this.get(_o,mn,me.Self);for(let s of o)s()}finally{wi(t),an(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(un(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Kt(e);let t=Ns(e)?e:Kt(e&&e.provide),r=xO(e);if(!Ns(e)&&e.multi===!0){let i=this.records.get(t);i||(i=bs(void 0,kd,!0),i.factory=()=>km(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===kd&&(t.value=AO,t.value=t.factory()),typeof t.value=="object"&&t.value&&NO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Lm(n){let e=gh(n),t=e!==null?e.factory:vo(n);if(t!==null)return t;if(n instanceof G)throw new X(204,!1);if(n instanceof Function)return MO(n);throw new X(204,!1)}function MO(n){if(n.length>0)throw new X(204,!1);let t=z1(n);return t!==null?()=>t.factory(n):()=>new n}function xO(n){if(ib(n))return bs(void 0,n.useValue);{let e=ob(n);return bs(e,kd)}}function ob(n,e,t){let r;if(Ns(n)){let i=Kt(n);return vo(i)||Lm(i)}else if(ib(n))r=()=>Kt(n.useValue);else if(TO(n))r=()=>n.useFactory(...km(n.deps||[]));else if(bO(n))r=()=>z(Kt(n.useExisting));else{let i=Kt(n&&(n.useClass||n.provide));if(RO(n))r=()=>new i(...km(n.deps));else return vo(i)||Lm(i)}return r}function bs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function RO(n){return!!n.deps}function NO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PO(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function jm(n,e){for(let t of n)Array.isArray(t)?jm(t,e):t&&jC(t)?jm(t.\u0275providers,e):e(t)}function Wn(n,e){n instanceof Vu&&n.assertNotDestroyed();let t,r=wi(n),i=an(void 0);try{return e()}finally{wi(r),an(i)}}function sb(){return UC()!==void 0||tO()!=null}function OO(n){if(!sb())throw new X(-203,!1)}function kO(n){return typeof n=="function"}var vn=0,de=1,ce=2,Ot=3,$n=4,Kn=5,qn=6,qd=7,Nt=8,Ps=9,lr=10,We=11,Lu=12,oC=13,Hs=14,_n=15,Os=16,Ts=17,ks=18,vh=19,ab=20,Ei=21,vm=22,An=23,lt=25,ub=1,ju=6,$r=7,Hd=8,Gd=9,Pt=10,Wd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Wd||{});function zn(n){return Array.isArray(n)&&typeof n[ub]=="object"}function dr(n){return Array.isArray(n)&&n[ub]===!0}function cb(n){return(n.flags&4)!==0}function Qu(n){return n.componentOffset>-1}function Ny(n){return(n.flags&1)===1}function Ci(n){return!!n.template}function Kd(n){return(n[ce]&512)!==0}var Um=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function xn(){return db}function db(n){return n.type.prototype.ngOnChanges&&(n.setInput=VO),FO}xn.ngInherit=!0;function FO(){let n=fb(this),e=n?.current;if(e){let t=n.previous;if(t===Rs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VO(n,e,t,r,i){let o=this.declaredInputs[r],s=fb(n)||LO(n,{previous:Rs,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Um(l&&l.currentValue,t,u===Rs),lb(n,e,i,t)}var hb="__ngSimpleChanges__";function fb(n){return n[hb]||null}function LO(n,e){return n[hb]=e}var sC=null;var ar=function(n,e,t){sC?.(n,e,t)},jO="svg",UO="math";function Hn(n){for(;Array.isArray(n);)n=n[vn];return n}function pb(n,e){return Hn(e[n])}function wn(n,e){return Hn(e[n.index])}function Py(n,e){return n.data[e]}function gb(n,e){return n[e]}function Si(n,e){let t=e[n];return zn(t)?t:t[vn]}function Oy(n){return(n[ce]&128)===128}function BO(n){return dr(n[Ot])}function Fs(n,e){return e==null?null:n[e]}function mb(n){n[Ts]=0}function yb(n){n[ce]&1024||(n[ce]|=1024,Oy(n)&&wh(n))}function $O(n,e){for(;n>0;)e=e[Hs],n--;return e}function _h(n){return!!(n[ce]&9216||n[An]?.dirty)}function Bm(n){n[lr].changeDetectionScheduler?.notify(8),n[ce]&64&&(n[ce]|=1024),_h(n)&&wh(n)}function wh(n){n[lr].changeDetectionScheduler?.notify(0);let e=wo(n);for(;e!==null&&!(e[ce]&8192||(e[ce]|=8192,!Oy(e)));)e=wo(e)}function vb(n,e){if((n[ce]&256)===256)throw new X(911,!1);n[Ei]===null&&(n[Ei]=[]),n[Ei].push(e)}function zO(n,e){if(n[Ei]===null)return;let t=n[Ei].indexOf(e);t!==-1&&n[Ei].splice(t,1)}function wo(n){let e=n[Ot];return dr(e)?e[Ot]:e}var ye={lFrame:Ab(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _b=!1;function qO(){return ye.lFrame.elementDepthCount}function HO(){ye.lFrame.elementDepthCount++}function GO(){ye.lFrame.elementDepthCount--}function wb(){return ye.bindingsEnabled}function Yu(){return ye.skipHydrationRootTNode!==null}function WO(n){return ye.skipHydrationRootTNode===n}function KO(n){ye.skipHydrationRootTNode=n}function QO(){ye.skipHydrationRootTNode=null}function Ee(){return ye.lFrame.lView}function Qt(){return ye.lFrame.tView}function Ft(n){return ye.lFrame.contextLView=n,n[Nt]}function Vt(n){return ye.lFrame.contextLView=null,n}function dn(){let n=Eb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Eb(){return ye.lFrame.currentTNode}function YO(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zu(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function Ib(){return ye.lFrame.isParent}function ZO(){ye.lFrame.isParent=!1}function Db(){return _b}function aC(n){_b=n}function Eh(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Cb(){return ye.lFrame.bindingIndex}function JO(n){return ye.lFrame.bindingIndex=n}function Gs(){return ye.lFrame.bindingIndex++}function ky(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XO(){return ye.lFrame.inI18n}function ek(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,$m(e)}function tk(){return ye.lFrame.currentDirectiveIndex}function $m(n){ye.lFrame.currentDirectiveIndex=n}function nk(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bb(n){ye.lFrame.currentQueryIndex=n}function rk(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[Kn]:null}function Tb(n,e,t){if(t&me.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&me.Host);)if(i=rk(o),i===null||(o=o[Hs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=Sb();return r.currentTNode=e,r.lView=n,!0}function Fy(n){let e=Sb(),t=n[de];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sb(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?Ab(n):e}function Ab(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Mb(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var xb=Mb;function Vy(){let n=Mb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ik(n){return(ye.lFrame.contextLView=$O(n,ye.lFrame.contextLView))[Nt]}function Gr(){return ye.lFrame.selectedIndex}function Eo(n){ye.lFrame.selectedIndex=n}function Ly(){let n=ye.lFrame;return Py(n.tView,n.selectedIndex)}function Rb(){return ye.lFrame.currentNamespace}var Nb=!0;function jy(){return Nb}function Ai(n){Nb=n}function ok(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=db(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Uy(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Fd(n,e,t){Pb(n,e,3,t)}function Vd(n,e,t,r){(n[ce]&3)===t&&Pb(n,e,t,r)}function _m(n,e){let t=n[ce];(t&3)===e&&(t&=16383,t+=1,n[ce]=t)}function Pb(n,e,t,r){let i=r!==void 0?n[Ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ts]+=65536),(a<o||o==-1)&&(sk(n,t,e,u),n[Ts]=(n[Ts]&4294901760)+u+2),u++}function uC(n,e){ar(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),ar(5,n,e)}}function sk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ce]>>14<n[Ts]>>16&&(n[ce]&3)===e&&(n[ce]+=16384,uC(a,o)):uC(a,o)}var xs=-1,Io=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function ak(n){return n instanceof Io}function uk(n){return(n.flags&8)!==0}function ck(n){return(n.flags&16)!==0}var wm={},zm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=mh(r);let i=this.injector.get(e,wm,r);return i!==wm||t===wm?i:this.parentInjector.get(e,t,r)}};function Ob(n){return n!==xs}function Qd(n){return n&32767}function lk(n){return n>>16}function Yd(n,e){let t=lk(n),r=e;for(;t>0;)r=r[Hs],t--;return r}var qm=!0;function Zd(n){let e=qm;return qm=n,e}var dk=256,kb=dk-1,Fb=5,hk=0,ur={};function fk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ou)&&(r=t[Ou]),r==null&&(r=t[Ou]=hk++);let i=r&kb,o=1<<i;e.data[n+(i>>Fb)]|=o}function Jd(n,e){let t=Vb(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Em(r.data,n),Em(e,null),Em(r.blueprint,null));let i=By(n,e),o=n.injectorIndex;if(Ob(i)){let s=Qd(i),a=Yd(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Em(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Vb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function By(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$b(i),r===null)return xs;if(t++,i=i[Hs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xs}function Hm(n,e,t){fk(n,e,t)}function pk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(KC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Lb(n,e,t){if(t&me.Optional||n!==void 0)return n;Ty(e,"NodeInjector")}function jb(n,e,t,r){if(t&me.Optional&&r===void 0&&(r=null),!(t&(me.Self|me.Host))){let i=n[Ps],o=an(void 0);try{return i?i.get(e,r,t&me.Optional):BC(e,r,t&me.Optional)}finally{an(o)}}return Lb(r,e,t)}function Ub(n,e,t,r=me.Default,i){if(n!==null){if(e[ce]&2048&&!(r&me.Self)){let s=_k(n,e,t,r,ur);if(s!==ur)return s}let o=Bb(n,e,t,r,ur);if(o!==ur)return o}return jb(e,t,r,i)}function Bb(n,e,t,r,i){let o=yk(t);if(typeof o=="function"){if(!Tb(e,n,r))return r&me.Host?Lb(i,t,r):jb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&me.Optional))Ty(t);else return s}finally{xb()}}else if(typeof o=="number"){let s=null,a=Vb(n,e),u=xs,l=r&me.Host?e[_n][Kn]:null;for((a===-1||r&me.SkipSelf)&&(u=a===-1?By(n,e):e[a+8],u===xs||!lC(r,!1)?a=-1:(s=e[de],a=Qd(u),e=Yd(u,e)));a!==-1;){let d=e[de];if(cC(o,a,d.data)){let f=gk(a,e,t,s,r,l);if(f!==ur)return f}u=e[a+8],u!==xs&&lC(r,e[de].data[a+8]===l)&&cC(o,a,e)?(s=d,a=Qd(u),e=Yd(u,e)):a=-1}}return i}function gk(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?Qu(a)&&qm:r!=s&&(a.type&3)!==0,l=i&me.Host&&o===a,d=mk(a,s,t,u,l);return d!==null?Vs(e,s,d,a):ur}function mk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let E=s[y];if(y<u&&t===E||y>=u&&E.type===t)return y}if(i){let y=s[u];if(y&&Ci(y)&&y.type===t)return u}return null}function Vs(n,e,t,r){let i=n[t],o=e.data;if(ak(i)){let s=i;s.resolving&&Y1(Q1(o[t]));let a=Zd(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?an(s.injectImpl):null,d=Tb(n,r,me.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&ok(t,o[t],e)}finally{l!==null&&an(l),Zd(a),s.resolving=!1,xb()}}return i}function yk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ou)?n[Ou]:void 0;return typeof e=="number"?e>=0?e&kb:vk:e}function cC(n,e,t){let r=1<<n;return!!(t[e+(n>>Fb)]&r)}function lC(n,e){return!(n&me.Self)&&!(n&me.Host&&e)}var yo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ub(this._tNode,this._lView,e,mh(r),t)}};function vk(){return new yo(dn(),Ee())}function bo(n){return Hu(()=>{let e=n.prototype.constructor,t=e[Ud]||Gm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ud]||Gm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gm(n){return kC(n)?()=>{let e=Gm(Kt(n));return e&&e()}:vo(n)}function _k(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ce]&2048&&!(s[ce]&512);){let a=Bb(o,s,t,r|me.Self,ur);if(a!==ur)return a;let u=o.parent;if(!u){let l=s[ab];if(l){let d=l.get(t,ur,r);if(d!==ur)return d}u=$b(s),s=s[Hs]}o=u}return i}function $b(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[Kn]:null}function $y(n){return pk(dn(),n)}function dC(n,e=null,t=null,r){let i=zb(n,e,t,r);return i.resolveInjectorInitializers(),i}function zb(n,e=null,t=null,r,i=new Set){let o=[t||mn,My(n)];return r=r||(typeof n=="object"?void 0:un(n)),new Vu(o,e||Ry(),r||null,i)}var Mn=class n{static{this.THROW_IF_NOT_FOUND=ku}static{this.NULL=new zd}static create(e,t){if(Array.isArray(e))return dC({name:""},t,e,"");{let r=e.name??"";return dC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=J({token:n,providedIn:"any",factory:()=>z(HC)})}static{this.__NG_ELEMENT_ID__=-1}};var wk=new G("");wk.__NG_ELEMENT_ID__=n=>{let e=dn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&me.Optional)return null;throw new X(204,!1)};var Ek="ngOriginalError";function Im(n){return n[Ek]}var qb=!0,zy=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ik}static{this.__NG_ENV_ID__=t=>t}}return n})(),Wm=class extends zy{constructor(e){super(),this._lView=e}onDestroy(e){return vb(this._lView,e),()=>zO(this._lView,e)}};function Ik(){return new Wm(Ee())}var To=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Km=class extends Ge{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,sb()&&(this.destroyRef=P(zy,{optional:!0})??void 0,this.pendingTasks=P(To,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof tt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},_e=Km;function Xd(...n){}function Hb(n){let e,t;function r(){n=Xd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hC(n){return queueMicrotask(()=>n()),()=>{n=Xd}}var qy="isAngularZone",eh=qy+"_ID",Dk=0,Ne=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _e(!1),this.onMicrotaskEmpty=new _e(!1),this.onStable=new _e(!1),this.onError=new _e(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qb}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Tk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ck,Xd,Xd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ck={};function Hy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Hb(()=>{n.callbackScheduled=!1,Qm(n),n.isCheckStableRunning=!0,Hy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Qm(n)}function Tk(n){let e=()=>{bk(n)},t=Dk++;n._inner=n._inner.fork({name:"angular",properties:{[qy]:!0,[eh]:t,[eh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Sk(u))return r.invokeTask(o,s,a,u);try{return fC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return fC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Ak(u)&&e(),pC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Qm(n),Hy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Qm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pC(n){n._nesting--,Hy(n)}var Ym=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _e,this.onMicrotaskEmpty=new _e,this.onStable=new _e,this.onError=new _e}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Sk(n){return Gb(n,"__ignore_ng_zone__")}function Ak(n){return Gb(n,"__scheduler_tick__")}function Gb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Im(e);for(;t&&Im(t);)t=Im(t);return t||null}},Mk=new G("",{providedIn:"root",factory:()=>{let n=P(Ne),e=P(zr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function xk(){return Gy(dn(),Ee())}function Gy(n,e){return new Mi(wn(n,e))}var Mi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=xk}}return n})();var Rk="ngSkipHydration",Nk="ngskiphydration";function Wb(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Nk)return!0}return!1}function Kb(n){return n.hasAttribute(Rk)}function th(n){return(n.flags&128)===128}function Pk(n){if(th(n))return!0;let e=n.parent;for(;e;){if(th(n)||Wb(e))return!0;e=e.parent}return!1}var Qb=new Map,Ok=0;function kk(){return Ok++}function Fk(n){Qb.set(n[vh],n)}function Zm(n){Qb.delete(n[vh])}var gC="__ngContext__";function Do(n,e){zn(e)?(n[gC]=e[vh],Fk(e)):n[gC]=e}function Yb(n){return Jb(n[Lu])}function Zb(n){return Jb(n[$n])}function Jb(n){for(;n!==null&&!dr(n);)n=n[$n];return n}var Jm;function Xb(n){Jm=n}function Ih(){if(Jm!==void 0)return Jm;if(typeof document<"u")return document;throw new X(210,!1)}var Dh=new G("",{providedIn:"root",factory:()=>Vk}),Vk="ng",Wy=new G(""),bt=new G("",{providedIn:"platform",factory:()=>"unknown"});var Ky=new G("",{providedIn:"root",factory:()=>Ih().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Lk(){let n=new Ws;return P(bt)==="browser"&&(n.store=jk(Ih(),P(Dh))),n}var Ws=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=J({token:n,providedIn:"root",factory:Lk})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function jk(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var eT="h",tT="b",Xm=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Xm||{}),Uk="e",Bk="t",Qy="c",nT="x",nh="r",$k="i",zk="n",rT="d";var qk="__nghData__",iT=qk,Dm="ngh",Hk="nghm",oT=()=>null;function Gk(n,e,t=!1){let r=n.getAttribute(Dm);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let d=e.get(Ws,null,{optional:!0});d!==null&&(u=d.get(iT,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Ch(l,0,n.nextSibling)),a?n.setAttribute(Dm,a):n.removeAttribute(Dm),l}function Wk(){oT=Gk}function Yy(n,e,t=!1){return oT(n,e,t)}function Kk(n){let e=n._lView;return e[de].type===2?null:(Kd(e)&&(e=e[lt]),e)}function Qk(n){return n.textContent?.replace(/\s/gm,"")}function Yk(n){let e=Ih(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Qk(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Ch(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function ey(n,e){return n.segmentHeads?.[e]??null}function Zk(n,e){let t=n.data,r=t[Uk]?.[e]??null;return r===null&&t[Qy]?.[e]&&(r=Zy(n,e)),r}function sT(n,e){return n.data[Qy]?.[e]??null}function Zy(n,e){let t=sT(n,e)??[],r=0;for(let i of t)r+=i[nh]*(i[nT]??1);return r}function Jk(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[rT];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ju(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[rT];n.disconnectedNodes=t?new Set(t):null}return!!Jk(n)?.has(e)}var Md=new G(""),aT=!1,uT=new G("",{providedIn:"root",factory:()=>aT});var xd;function Xk(){if(xd===void 0&&(xd=null,mo.trustedTypes))try{xd=mo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xd}function mC(n){return Xk()?.createScriptURL(n)||n}var rh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PC})`}};function Xu(n){return n instanceof rh?n.changingThisBreaksApplicationSecurity:n}function Jy(n,e){let t=eF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${PC})`)}return t===e}function eF(n){return n instanceof rh&&n.getTypeName()||null}var tF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cT(n){return n=String(n),n.match(tF)?n:"unsafe:"+n}var bh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bh||{});function nF(n){let e=dT();return e?e.sanitize(bh.URL,n)||"":Jy(n,"URL")?Xu(n):cT(Br(n))}function rF(n){let e=dT();if(e)return mC(e.sanitize(bh.RESOURCE_URL,n)||"");if(Jy(n,"ResourceURL"))return mC(Xu(n));throw new X(904,!1)}function iF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?rF:nF}function lT(n,e,t){return iF(e,t)(n)}function dT(){let n=Ee();return n&&n[lr].sanitizer}var oF=/^>|^->|<!--|-->|--!>|<!-$/g,sF=/(<|>)/g,aF="\u200B$1\u200B";function uF(n){return n.replace(oF,e=>e.replace(sF,aF))}function cF(n){return n.ownerDocument.body}function hT(n){return n instanceof Function?n():n}function Nu(n){return(n??P(Mn)).get(bt)==="browser"}var qr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(qr||{}),lF;function Xy(n,e){return lF(n,e)}function Ss(n,e,t,r,i){if(r!=null){let o,s=!1;dr(r)?o=r:zn(r)&&(s=!0,r=r[vn]);let a=Hn(r);n===0&&t!==null?i==null?yT(e,t,a):ih(e,t,a,i||null,!0):n===1&&t!==null?ih(e,t,a,i||null,!0):n===2?rv(e,a,s):n===3&&e.destroyNode(a),o!=null&&bF(e,n,o,t,i)}}function fT(n,e){return n.createText(e)}function dF(n,e,t){n.setValue(e,t)}function pT(n,e){return n.createComment(uF(e))}function ev(n,e,t){return n.createElement(e,t)}function hF(n,e){gT(n,e),e[vn]=null,e[Kn]=null}function fF(n,e,t,r,i,o){r[vn]=i,r[Kn]=e,Sh(n,r,t,1,i,o)}function gT(n,e){e[lr].changeDetectionScheduler?.notify(9),Sh(n,e,e[We],2,null,null)}function pF(n){let e=n[Lu];if(!e)return Cm(n[de],n);for(;e;){let t=null;if(zn(e))t=e[Lu];else{let r=e[Pt];r&&(t=r)}if(!t){for(;e&&!e[$n]&&e!==n;)zn(e)&&Cm(e[de],e),e=e[Ot];e===null&&(e=n),zn(e)&&Cm(e[de],e),t=e&&e[$n]}e=t}}function gF(n,e,t,r){let i=Pt+r,o=t.length;r>0&&(t[i-1][$n]=e),r<o-Pt?(e[$n]=t[i],qC(t,Pt+r,e)):(t.push(e),e[$n]=null),e[Ot]=t;let s=e[Os];s!==null&&t!==s&&mT(s,e);let a=e[ks];a!==null&&a.insertView(n),Bm(e),e[ce]|=128}function mT(n,e){let t=n[Gd],r=e[Ot];if(zn(r))n[ce]|=Wd.HasTransplantedViews;else{let i=r[Ot][_n];e[_n]!==i&&(n[ce]|=Wd.HasTransplantedViews)}t===null?n[Gd]=[e]:t.push(e)}function tv(n,e){let t=n[Gd],r=t.indexOf(e);t.splice(r,1)}function Uu(n,e){if(n.length<=Pt)return;let t=Pt+e,r=n[t];if(r){let i=r[Os];i!==null&&i!==n&&tv(i,r),e>0&&(n[t-1][$n]=r[$n]);let o=$d(n,Pt+e);hF(r[de],r);let s=o[ks];s!==null&&s.detachView(o[de]),r[Ot]=null,r[$n]=null,r[ce]&=-129}return r}function Th(n,e){if(!(e[ce]&256)){let t=e[We];t.destroyNode&&Sh(n,e,t,3,null,null),pF(e)}}function Cm(n,e){if(e[ce]&256)return;let t=ve(null);try{e[ce]&=-129,e[ce]|=256,e[An]&&Qg(e[An]),yF(n,e),mF(n,e),e[de].type===1&&e[We].destroy();let r=e[Os];if(r!==null&&dr(e[Ot])){r!==e[Ot]&&tv(r,e);let i=e[ks];i!==null&&i.detachView(n)}Zm(e)}finally{ve(t)}}function mF(n,e){let t=n.cleanup,r=e[qd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[qd]=null);let i=e[Ei];if(i!==null){e[Ei]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function yF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Io)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ar(4,a,u);try{u.call(a)}finally{ar(5,a,u)}}else{ar(4,i,o);try{o.call(i)}finally{ar(5,i,o)}}}}}function vF(n,e,t){return _F(n,e.parent,t)}function _F(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[vn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===cr.None||o===cr.Emulated)return null}return wn(r,t)}}function ih(n,e,t,r,i){n.insertBefore(e,t,r,i)}function yT(n,e,t){n.appendChild(e,t)}function yC(n,e,t,r,i){r!==null?ih(n,e,t,r,i):yT(n,e,t)}function vT(n,e){return n.parentNode(e)}function wF(n,e){return n.nextSibling(e)}function EF(n,e,t){return DF(n,e,t)}function IF(n,e,t){return n.type&40?wn(n,t):null}var DF=IF,vC;function nv(n,e,t,r){let i=vF(n,r,e),o=e[We],s=r.parent||e[Kn],a=EF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)yC(o,i,t[u],a,!1);else yC(o,i,t,a,!1);vC!==void 0&&vC(o,r,e,t,i)}function Pu(n,e){if(e!==null){let t=e.type;if(t&3)return wn(e,n);if(t&4)return ty(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pu(n,r);{let i=n[e.index];return dr(i)?ty(-1,i):Hn(i)}}else{if(t&128)return Pu(n,e.next);if(t&32)return Xy(e,n)()||Hn(n[e.index]);{let r=_T(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wo(n[_n]);return Pu(i,r)}else return Pu(n,e.next)}}}return null}function _T(n,e){if(e!==null){let r=n[_n][Kn],i=e.projection;return r.projection[i]}return null}function ty(n,e){let t=Pt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Pu(r,i)}return e[$r]}function rv(n,e,t){n.removeChild(null,e,t)}function wT(n){n.textContent=""}function iv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Do(Hn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)iv(n,e,t.child,r,i,o,!1),Ss(e,n,i,a,o);else if(u&32){let l=Xy(t,r),d;for(;d=l();)Ss(e,n,i,d,o);Ss(e,n,i,a,o)}else u&16?CF(n,e,r,t,i,o):Ss(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Sh(n,e,t,r,i,o){iv(t,r,n.firstChild,e,i,o,!1)}function CF(n,e,t,r,i,o){let s=t[_n],u=s[Kn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Ss(e,n,i,d,o)}else{let l=u,d=s[Ot];th(r)&&(l.flags|=128),iv(n,e,l,d,i,o,!0)}}function bF(n,e,t,r,i){let o=t[$r],s=Hn(t);o!==s&&Ss(e,n,r,o,i);for(let a=Pt;a<t.length;a++){let u=t[a];Sh(u[de],u,n,e,r,o)}}function TF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:qr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qr.Important),n.setStyle(t,r,i,o))}}function SF(n,e,t){n.setAttribute(e,"style",t)}function ET(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function IT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Fm(n,e,r),i!==null&&ET(n,e,i),o!==null&&SF(n,e,o)}var En={};function W(n=1){DT(Qt(),Ee(),Gr()+n,!1)}function DT(n,e,t,r){if(!r)if((e[ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Vd(e,o,0,t)}Eo(t)}function Ae(n,e=me.Default){let t=Ee();if(t===null)return z(n,e);let r=dn();return Ub(r,t,Kt(n),e)}function CT(){let n="invalid";throw new Error(n)}function bT(n,e,t,r,i,o){let s=ve(null);try{let a=null;i&Ii.SignalBased&&(a=e[r][Vr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ii.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):lb(e,a,r,o)}finally{ve(s)}}function AF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Eo(~i);else{let o=i,s=t[++r],a=t[++r];ek(s,o);let u=e[o];a(2,u)}}}finally{Eo(-1)}}function Ah(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[vn]=i,f[ce]=r|4|128|8|64,(l!==null||n&&n[ce]&2048)&&(f[ce]|=2048),mb(f),f[Ot]=f[Hs]=n,f[Nt]=t,f[lr]=s||n&&n[lr],f[We]=a||n&&n[We],f[Ps]=u||n&&n[Ps]||null,f[Kn]=o,f[vh]=kk(),f[qn]=d,f[ab]=l,f[_n]=e.type==2?n[_n]:f,f}function Mh(n,e,t,r,i){let o=n.data[e];if(o===null)o=MF(n,e,t,r,i),XO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=YO();o.injectorIndex=s===null?-1:s.injectorIndex}return Zu(o,!0),o}function MF(n,e,t,r,i){let o=Eb(),s=Ib(),a=s?o:o&&o.parent,u=n.data[e]=kF(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function TT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ST(n,e,t,r,i){let o=Gr(),s=r&2;try{Eo(-1),s&&e.length>lt&&DT(n,e,lt,!1),ar(s?2:0,i),t(r,i)}finally{Eo(o),ar(s?3:1,i)}}function AT(n,e,t){if(cb(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}function MT(n,e,t){wb()&&(BF(n,e,t,wn(t,e)),(t.flags&64)===64&&FT(n,e,t))}function xT(n,e,t=wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function RT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ov(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ov(n,e,t,r,i,o,s,a,u,l,d){let f=lt+r,g=f+i,y=xF(f,g),E=typeof l=="function"?l():l;return y[de]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:d}}function xF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:En);return t}function RF(n,e,t,r){let o=r.get(uT,aT)||t===cr.ShadowDom,s=n.selectRootElement(e,o);return NF(s),s}function NF(n){NT(n)}var NT=()=>null;function PF(n){Kb(n)?wT(n):Yk(n)}function OF(){NT=PF}function kF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Yu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _C(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Ii.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?wC(r,t,l,a,u):wC(r,t,l,a)}return r}function wC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function FF(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,E=g?g.outputs:null;u=_C(0,f.inputs,d,u,y),l=_C(1,f.outputs,d,l,E);let S=u!==null&&s!==null&&!Ay(e)?JF(u,d,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function VF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function PT(n,e,t,r,i,o,s,a){let u=wn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(sv(n,t,d,r,i),Qu(e)&&LF(t,e.index)):e.type&3?(r=VF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function LF(n,e){let t=Si(e,n);t[ce]&16||(t[ce]|=64)}function OT(n,e,t,r){if(wb()){let i=r===null?null:{"":-1},o=zF(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&kT(n,e,t,s,i,a),i&&qF(t,r,i)}t.mergedAttrs=Fu(t.mergedAttrs,t.attrs)}function kT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Hm(Jd(t,e),n,r[l].type);GF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=TT(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Fu(t.mergedAttrs,d.hostAttrs),WF(n,t,e,u,d),HF(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}FF(n,t,o)}function jF(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;UF(s)!=a&&s.push(a),s.push(t,r,o)}}function UF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function BF(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Qu(t)&&KF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Jd(t,e),Do(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Vs(e,n,a,t);if(Do(l,e),s!==null&&ZF(e,a-i,l,u,t,s),Ci(u)){let d=Si(t.index,e);d[Nt]=Vs(e,n,a,t)}}}function FT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=tk();try{Eo(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];$m(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&$F(u,l)}}finally{Eo(-1),$m(s)}}function $F(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(gO(e,s.selectors,!1))if(r||(r=[]),Ci(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;ny(n,e,u)}else r.unshift(s),ny(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function ny(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function HF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ci(e)&&(t[""]=n)}}function GF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function WF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=vo(i.type,!0)),s=new Io(o,Ci(i),Ae);n.blueprint[r]=s,t[r]=s,jF(n,e,r,TT(n,t,i.hostVars,En),i)}function KF(n,e,t){let r=wn(e,n),i=RT(t),o=n[lr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=xh(n,Ah(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function QF(n,e,t,r,i,o){let s=wn(n,e);YF(e[We],s,o,n.value,t,r,i)}function YF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Br(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function ZF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];bT(r,t,u,l,d,f)}}function JF(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function VT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function LT(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];bb(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function xh(n,e){return n[Lu]?n[oC][$n]=e:n[Lu]=e,n[oC]=e,e}function ry(n,e,t){bb(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function XF(n){return n[qd]??=[]}function eV(n){return n.cleanup??=[]}function jT(n,e){let t=n[Ps],r=t?t.get(zr,null):null;r&&r.handleError(e)}function sv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];bT(d,l,r,a,u,i)}}function av(n,e,t){let r=pb(e,n);dF(n[We],r,t)}function tV(n,e){let t=Si(e,n),r=t[de];nV(r,t);let i=t[vn];i!==null&&t[qn]===null&&(t[qn]=Yy(i,t[Ps])),uv(r,t,t[Nt])}function nV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uv(n,e,t){Fy(e);try{let r=n.viewQuery;r!==null&&ry(1,r,t);let i=n.template;i!==null&&ST(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ks]?.finishViewCreation(n),n.staticContentQueries&&LT(n,e),n.staticViewQueries&&ry(2,n.viewQuery,t);let o=n.components;o!==null&&rV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ce]&=-5,Vy()}}function rV(n,e){for(let t=0;t<e.length;t++)tV(n,e[t])}function cv(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[ce]&4096?4096:16,u=Ah(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Os]=l;let d=n[ks];return d!==null&&(u[ks]=d.createEmbeddedView(o)),uv(o,u,t),u}finally{ve(i)}}function UT(n,e){let t=Pt+e;if(t<n.length)return n[t]}function Bu(n,e){return!e||e.firstChild===null||th(n)}function Rh(n,e,t,r=!0){let i=e[de];if(gF(i,e,n,t),r){let s=ty(t,n),a=e[We],u=vT(a,n[$r]);u!==null&&fF(i,n[Kn],a,e,u,s)}let o=e[qn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function BT(n,e){let t=Uu(n,e);return t!==void 0&&Th(t[de],t),t}function oh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Hn(o)),dr(o)&&iV(o,r);let s=t.type;if(s&8)oh(n,e,t.child,r);else if(s&32){let a=Xy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=_T(e,t);if(Array.isArray(a))r.push(...a);else{let u=wo(e[_n]);oh(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function iV(n,e){for(let t=Pt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&oh(r[de],r,i,e)}n[$r]!==n[vn]&&e.push(n[$r])}var $T=[];function oV(n){return n[An]??sV(n)}function sV(n){let e=$T.pop()??Object.create(uV);return e.lView=n,e}function aV(n){n.lView[An]!==n&&(n.lView=null,$T.push(n))}var uV=oe(L({},bu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wh(n.lView)},consumerOnSignalRead(){this.lView[An]=this}});function cV(n){let e=n[An]??Object.create(lV);return e.lView=n,e}var lV=oe(L({},bu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=wo(n.lView);for(;e&&!zT(e[de]);)e=wo(e);e&&yb(e)},consumerOnSignalRead(){this.lView[An]=this}});function zT(n){return n.type!==2}var dV=100;function qT(n,e=!0,t=0){let r=n[lr],i=r.rendererFactory,o=!1;o||i.begin?.();try{hV(n,t)}catch(s){throw e&&jT(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function hV(n,e){let t=Db();try{aC(!0),iy(n,e);let r=0;for(;_h(n);){if(r===dV)throw new X(103,!1);r++,iy(n,1)}}finally{aC(t)}}function fV(n,e,t,r){let i=e[ce];if((i&256)===256)return;let o=!1,s=!1;!o&&e[lr].inlineEffectRunner?.flush(),Fy(e);let a=!0,u=null,l=null;o||(zT(n)?(l=oV(e),u=Jl(l)):pD()===null?(a=!1,l=cV(e),u=Jl(l)):e[An]&&(Qg(e[An]),e[An]=null));try{mb(e),JO(n.bindingStartIndex),t!==null&&ST(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&Fd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Vd(e,y,0,null),_m(e,0)}if(s||pV(e),HT(e,0),n.contentQueries!==null&&LT(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&Fd(e,y)}else{let y=n.contentHooks;y!==null&&Vd(e,y,1),_m(e,1)}AF(n,e);let f=n.components;f!==null&&WT(e,f,0);let g=n.viewQuery;if(g!==null&&ry(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&Fd(e,y)}else{let y=n.viewHooks;y!==null&&Vd(e,y,2),_m(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[vm]){for(let y of e[vm])y();e[vm]=null}o||(e[ce]&=-73)}catch(d){throw o||wh(e),d}finally{l!==null&&(Wg(l,u),a&&aV(l)),Vy()}}function HT(n,e){for(let t=Yb(n);t!==null;t=Zb(t))for(let r=Pt;r<t.length;r++){let i=t[r];GT(i,e)}}function pV(n){for(let e=Yb(n);e!==null;e=Zb(e)){if(!(e[ce]&Wd.HasTransplantedViews))continue;let t=e[Gd];for(let r=0;r<t.length;r++){let i=t[r];yb(i)}}}function gV(n,e,t){let r=Si(e,n);GT(r,t)}function GT(n,e){Oy(n)&&iy(n,e)}function iy(n,e){let r=n[de],i=n[ce],o=n[An],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Kg(o)),s||=!1,o&&(o.dirty=!1),n[ce]&=-9217,s)fV(r,n,r.template,n[Nt]);else if(i&8192){HT(n,1);let a=r.components;a!==null&&WT(n,a,1)}}function WT(n,e,t){for(let r=0;r<e.length;r++)gV(n,e[r],t)}function lv(n,e){let t=Db()?64:1088;for(n[lr].changeDetectionScheduler?.notify(e);n;){n[ce]|=t;let r=wo(n);if(Kd(n)&&!r)return n;n=r}return null}var Ls=class{get rootNodes(){let e=this._lView,t=e[de];return oh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nt]}set context(e){this._lView[Nt]=e}get destroyed(){return(this._lView[ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ot];if(dr(e)){let t=e[Hd],r=t?t.indexOf(this):-1;r>-1&&(Uu(e,r),$d(t,r))}this._attachedToViewContainer=!1}Th(this._lView[de],this._lView)}onDestroy(e){vb(this._lView,e)}markForCheck(){lv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){Bm(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,qT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kd(this._lView),t=this._lView[Os];t!==null&&!e&&tv(t,this._lView),gT(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Kd(this._lView),r=this._lView[Os];r!==null&&!t&&mT(r,this._lView),Bm(this._lView)}};var mV=new RegExp(`^(\\d+)*(${tT}|${eT})*(.*)`);function yV(n){let e=n.match(mV),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,d]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(l,f)}return[s,...a]}function vV(n){return!n.prev&&n.parent?.type===8}function bm(n){return n.index-lt}function _V(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Nh(n,e,t,r){let i=bm(r),o=_V(n,i);if(o===void 0){let s=n.data[zk];if(s?.[i])o=EV(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(vV(r)){let l=bm(r.parent);o=ey(n,l)}else{let l=wn(u,t);if(a)o=l.firstChild;else{let d=bm(u),f=ey(n,d);if(u.type===2&&f){let y=Zy(n,d)+1;o=Ph(y,f)}else o=l.nextSibling}}}}return o}function Ph(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function wV(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Xm.FirstChild:t=t.firstChild;break;case Xm.NextSibling:t=t.nextSibling;break}}return t}function EV(n,e){let[t,...r]=yV(n),i;if(t===eT)i=e[_n][vn];else if(t===tT)i=cF(e[_n][vn]);else{let o=Number(t);i=Hn(e[o+lt])}return wV(i,r)}var IV=!1;function DV(n){IV=n}function CV(n){let e=n[qn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[We];for(let o of r.values())bV(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function bV(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-lt);i&&rv(n,i,!1)}}function KT(n){let e=n[ju]??[],r=n[Ot][We];for(let i of e)TV(i,r);n[ju]=mn}function TV(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[nh];for(;t<i;){let o=r.nextSibling;rv(e,r,!1),r=o,t++}}}function QT(n){KT(n);let e=n[vn];zn(e)&&sh(e);for(let t=Pt;t<n.length;t++)sh(n[t])}function sh(n){CV(n);let e=n[de];for(let t=lt;t<e.bindingStartIndex;t++)if(dr(n[t])){let r=n[t];QT(r)}else zn(n[t])&&sh(n[t])}function SV(n){let e=n._views;for(let t of e){let r=Kk(t);r!==null&&r[vn]!==null&&(zn(r)?sh(r):QT(r))}}function AV(n,e){let t=[];for(let r of e)for(let i=0;i<(r[nT]??1);i++){let o={data:r,firstChild:null};r[nh]>0&&(o.firstChild=n,n=Ph(r[nh],n)),t.push(o)}return[n,t]}var YT=()=>null;function MV(n,e){let t=n[ju];return!e||t===null||t.length===0?null:t[0].data[$k]===e?t.shift():(KT(n),null)}function xV(){YT=MV}function $u(n,e){return YT(n,e)}var js=class{},dv=new G("",{providedIn:"root",factory:()=>!1});var ZT=new G(""),JT=new G(""),oy=class{},ah=class{};function RV(n){let e=Error(`No component factory found for ${un(n)}.`);return e[NV]=n,e}var NV="ngComponent";var sy=class{resolveComponentFactory(e){throw RV(e)}},Us=class{static{this.NULL=new sy}},Bs=class{},So=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>PV()}}return n})();function PV(){let n=Ee(),e=dn(),t=Si(e.index,n);return(zn(t)?t:n)[We]}var OV=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>null})}}return n})();function ay(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=QD(i,a);else if(o==2){let u=a,l=e[++s];r=QD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var uh=class extends Us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Di(e);return new $s(t,this.ngModule)}};function EC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ii.None;e?t.push({propName:s,templateName:r,isSignal:(a&Ii.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function kV(n){let e=n.toLowerCase();return e==="svg"?jO:e==="math"?UO:null}var $s=class extends ah{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=EC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return EC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_O(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ve(null);try{i=i||this.ngModule;let s=i instanceof yn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new zm(e,s):e,u=a.get(Bs,null);if(u===null)throw new X(407,!1);let l=a.get(OV,null),d=a.get(js,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?RF(g,r,this.componentDef.encapsulation,a):ev(g,y,kV(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let A=null;E!==null&&(A=Yy(E,a,!0));let F=ov(0,null,null,1,0,null,null,null,null,null,null),$=Ah(null,F,null,S,null,null,f,g,a,null,A);Fy($);let j,Q,ie=null;try{let ee=this.componentDef,I,v=null;ee.findHostDirectiveDefs?(I=[],v=new Map,ee.findHostDirectiveDefs(ee,I,v),I.push(ee)):I=[ee];let w=FV($,E);ie=VV(w,E,ee,I,$,f,g),Q=Py(F,lt),E&&UV(g,ee,E,r),t!==void 0&&BV(Q,this.ngContentSelectors,t),j=jV(ie,ee,I,v,$,[$V]),uv(F,$,null)}catch(ee){throw ie!==null&&Zm(ie),Zm($),ee}finally{Vy()}return new uy(this.componentType,j,Gy(Q,$),$,Q)}finally{ve(o)}}},uy=class extends oy{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ls(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;sv(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Si(this._tNode.index,o);lv(s,1)}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FV(n,e){let t=n[de],r=lt;return n[r]=e,Mh(t,r,2,"#host",null)}function VV(n,e,t,r,i,o,s){let a=i[de];LV(r,n,e,s);let u=null;e!==null&&(u=Yy(e,i[Ps]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Ah(i,RT(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&ny(a,n,r.length-1),xh(i,f),i[n.index]=f}function LV(n,e,t,r){for(let i of n)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ay(e,e.mergedAttrs,!0),t!==null&&IT(r,t,e))}function jV(n,e,t,r,i,o){let s=dn(),a=i[de],u=wn(s,i);kT(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Vs(i,a,f,s);Do(g,i)}FT(a,i,s),u&&Do(u,i);let l=Vs(i,a,s.directiveStart+s.componentOffset,s);if(n[Nt]=i[Nt]=l,o!==null)for(let d of o)d(l,e);return AT(a,s,i),l}function UV(n,e,t,r){if(r)Fm(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=wO(e.selectors[0]);i&&Fm(n,t,i),o&&o.length>0&&ET(n,t,o.join(" "))}}function BV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function $V(){let n=dn();Uy(Ee()[de],n)}var Oh=(()=>{class n{static{this.__NG_ELEMENT_ID__=zV}}return n})();function zV(){let n=dn();return HV(n,Ee())}var qV=Oh,XT=class extends qV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Gy(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){let e=By(this._hostTNode,this._hostLView);if(Ob(e)){let t=Yd(e,this._hostLView),r=Qd(e),i=t[de].data[r+8];return new yo(i,t)}else return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=IC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$u(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Bu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!kO(e),a;if(s)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}let u=s?e:new $s(Di(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(yn,null);S&&(o=S)}let d=Di(u.componentType??{}),f=$u(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,Bu(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(BO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ot],l=new XT(u,u[Kn],u[Ot]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Rh(s,i,o,r),e.attachToViewContainerRef(),qC(Tm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=IC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Uu(this._lContainer,t);r&&($d(Tm(this._lContainer),t),Th(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Uu(this._lContainer,t);return r&&$d(Tm(this._lContainer),t)!=null?new Ls(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function IC(n){return n[Hd]}function Tm(n){return n[Hd]||(n[Hd]=[])}function HV(n,e){let t,r=e[n.index];return dr(r)?t=r:(t=VT(r,e,null,n),e[n.index]=t,xh(e,t)),eS(t,e,n,r),new XT(t,n,e)}function GV(n,e){let t=n[We],r=t.createComment(""),i=wn(e,n),o=vT(t,i);return ih(t,o,r,wF(t,i),!1),r}var eS=tS,hv=()=>!1;function WV(n,e,t){return hv(n,e,t)}function tS(n,e,t,r){if(n[$r])return;let i;t.type&8?i=Hn(r):i=GV(e,t),n[$r]=i}function KV(n,e,t){if(n[$r]&&n[ju])return!0;let r=t[qn],i=e.index-lt;if(!r||Pk(e)||Ju(r,i))return!1;let s=ey(r,i),a=r.data[Qy]?.[i],[u,l]=AV(s,a);return n[$r]=u,n[ju]=l,!0}function QV(n,e,t,r){hv(n,t,e)||tS(n,e,t,r)}function YV(){eS=QV,hv=KV}var DC=new Set;function hr(n){DC.has(n)||(DC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ZV(n){return typeof n=="function"&&n[Vr]!==void 0}function Lt(n,e){hr("NgSignals");let t=bD(n),r=t[Vr];return e?.equal&&(r.equal=e.equal),t.set=i=>Yg(r,i),t.update=i=>TD(r,i),t.asReadonly=JV.bind(t),t}function JV(){let n=this[Vr];if(n.readonlyFn===void 0){let e=()=>this();e[Vr]=n,n.readonlyFn=e}return n.readonlyFn}function nS(n){return ZV(n)&&typeof n.set=="function"}function XV(n){return Object.getPrototypeOf(n.prototype).constructor}function fr(n){let e=XV(n.type),t=!0,r=[n];for(;e;){let i;if(Ci(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Rd(n.inputs),s.inputTransforms=Rd(n.inputTransforms),s.declaredInputs=Rd(n.declaredInputs),s.outputs=Rd(n.outputs);let a=i.hostBindings;a&&iL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&nL(n,u),l&&rL(n,l),eL(n,i),B1(n.outputs,i.outputs),Ci(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===fr&&(t=!1)}}e=Object.getPrototypeOf(e)}tL(r)}function eL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function tL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fu(i.hostAttrs,t=Fu(t,i.hostAttrs))}}function Rd(n){return n===Rs?{}:n===mn?[]:n}function nL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function rL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function iL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function fv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var bi=class{},zu=class{};var cy=class extends bi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uh(this);let o=XC(e);this._bootstrapComponents=hT(o.bootstrap),this._r3Injector=zb(e,t,[{provide:bi,useValue:this},{provide:Us,useValue:this.componentFactoryResolver},...r],un(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ly=class extends zu{constructor(e){super(),this.moduleType=e}create(e){return new cy(this.moduleType,e,[])}};var ch=class extends bi{constructor(e){super(),this.componentFactoryResolver=new uh(this),this.instance=null;let t=new Vu([...e.providers,{provide:bi,useValue:this},{provide:Us,useValue:this.componentFactoryResolver}],e.parent||Ry(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kh(n,e,t=null){return new ch({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function pv(n,e,t){return n[e]=t}function oL(n,e){return n[e]}function Gn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function gv(n,e,t,r){let i=Gn(n,e,t);return Gn(n,e+1,r)||i}function sL(n,e,t,r,i){let o=gv(n,e,t,r);return Gn(n,e+2,i)||o}function ec(n){return(n.flags&32)===32}function aL(n,e,t,r,i,o,s,a,u){let l=e.consts,d=Mh(e,n,4,s||null,a||null);OT(e,t,d,Fs(l,u)),Uy(e,d);let f=d.tView=ov(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function dy(n,e,t,r,i,o,s,a,u,l){let d=t+lt,f=e.firstCreatePass?aL(d,e,n,r,i,o,s,a,u):e.data[d];Zu(f,!1);let g=rS(e,n,f,t);jy()&&nv(e,n,g,f),Do(g,n);let y=VT(g,n,g,f);return n[d]=y,xh(n,y),WV(y,f,n),Ny(f)&&MT(e,n,f),u!=null&&xT(n,f,l),f}function pr(n,e,t,r,i,o,s,a){let u=Ee(),l=Qt(),d=Fs(l.consts,o);return dy(u,l,n,e,t,r,i,d,s,a),pr}var rS=iS;function iS(n,e,t,r){return Ai(!0),e[We].createComment("")}function uL(n,e,t,r){let i=e[qn],o=!i||Yu()||ec(t)||Ju(i,r);if(Ai(o),o)return iS(n,e,t,r);let s=i.data[Bk]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=Nh(i,n,e,t);Ch(i,r,a);let u=Zy(i,r);return Ph(u,a)}function cL(){rS=uL}var As=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(As||{}),oS=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}}return n})(),hy=class n{constructor(){this.ngZone=P(Ne),this.scheduler=P(js),this.errorHandler=P(zr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[As.EarlyRead,As.Write,As.MixedReadWrite,As.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}},fy=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function mv(n,e){!e?.injector&&OO(mv);let t=e?.injector??P(Mn);return Nu(t)?(hr("NgAfterNextRender"),dL(n,t,e,!0)):hL}function lL(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function dL(n,e,t,r){let i=e.get(oS);i.impl??=e.get(hy);let o=t?.phase??As.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(zy):null,a=new fy(i.impl,lL(n,o),r,s);return i.impl.register(a),a}var hL={destroy(){}};function tc(n,e,t,r){let i=Ee(),o=Gs();if(Gn(i,o,e)){let s=Qt(),a=Ly();QF(a,i,n,e,t,r)}return tc}function fL(n,e,t,r){return Gn(n,Gs(),t)?e+Br(t)+r:En}function pL(n,e,t,r,i,o){let s=Cb(),a=gv(n,s,t,i);return ky(2),a?e+Br(t)+r+Br(i)+o:En}function gL(n,e,t,r,i,o,s,a){let u=Cb(),l=sL(n,u,t,i,s);return ky(3),l?e+Br(t)+r+Br(i)+o+Br(s)+a:En}function Nd(n,e){return n<<17|e<<2}function Co(n){return n>>17&32767}function mL(n){return(n&2)==2}function yL(n,e){return n&131071|e<<17}function py(n){return n|2}function zs(n){return(n&131068)>>2}function Sm(n,e){return n&-131069|e<<2}function vL(n){return(n&1)===1}function gy(n){return n|1}function _L(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Co(s),u=zs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Wu(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Co(n[a+1]);n[r+1]=Nd(g,a),g!==0&&(n[g+1]=Sm(n[g+1],r)),n[a+1]=yL(n[a+1],r)}else n[r+1]=Nd(a,0),a!==0&&(n[a+1]=Sm(n[a+1],r)),a=r;else n[r+1]=Nd(u,0),a===0?a=r:n[u+1]=Sm(n[u+1],r),u=r;l&&(n[r+1]=py(n[r+1])),CC(n,d,r,!0),CC(n,d,r,!1),wL(e,d,n,r,o),s=Nd(a,u),o?e.classBindings=s:e.styleBindings=s}function wL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Wu(o,e)>=0&&(t[r+1]=gy(t[r+1]))}function CC(n,e,t,r){let i=n[t+1],o=e===null,s=r?Co(i):zs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];EL(u,e)&&(a=!0,n[s+1]=r?gy(l):py(l)),s=r?Co(l):zs(l)}a&&(n[t+1]=r?py(i):gy(i))}function EL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Wu(n,e)>=0:!1}function Ze(n,e,t){let r=Ee(),i=Gs();if(Gn(r,i,e)){let o=Qt(),s=Ly();PT(o,s,r,n,e,r[We],t,!1)}return Ze}function bC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";sv(n,t,o[s],s,r)}function Ks(n,e){return IL(n,e,null,!0),Ks}function IL(n,e,t,r){let i=Ee(),o=Qt(),s=ky(2);if(o.firstUpdatePass&&CL(o,n,s,r),e!==En&&Gn(i,s,e)){let a=o.data[Gr()];ML(o,a,i,i[We],n,i[s+1]=xL(e,t),r,s)}}function DL(n,e){return e>=n.expandoStartIndex}function CL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Gr()],s=DL(n,t);RL(o,r)&&e===null&&!s&&(e=!1),e=bL(i,o,e,r),_L(i,o,e,t,s,r)}}function bL(n,e,t,r){let i=nk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Am(null,n,e,t,r),t=qu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Am(i,n,e,t,r),o===null){let u=TL(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Am(null,n,e,u[1],r),u=qu(u,e.attrs,r),SL(n,e,r,u))}else o=AL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function TL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(zs(r)!==0)return n[Co(r)]}function SL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Co(i)]=r}function AL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=qu(r,s,t)}return qu(r,e.attrs,t)}function Am(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=qu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function qu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),aO(n,s,t?!0:e[++o]))}return n===void 0?null:n}function ML(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=vL(l)?TC(u,e,t,i,zs(l),s):void 0;if(!lh(d)){lh(o)||mL(l)&&(o=TC(u,null,t,i,a,s));let f=pb(Gr(),t);TF(r,s,f,i,o)}}function TC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===En&&(g=f?mn:void 0);let y=f?mm(g,r):d===r?g:void 0;if(l&&!lh(y)&&(y=mm(u,r)),lh(y)&&(a=y,s))return a;let E=n[i+1];i=s?Co(E):zs(E)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=mm(u,r))}return a}function lh(n){return n!==void 0}function xL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=un(Xu(n)))),n}function RL(n,e){return(n.flags&(e?8:16))!==0}var my=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Mm(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function NL(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),d=e[o],f=Mm(o,l,o,d,t);if(f!==0){f<0&&n.updateValue(o,d),o++;continue}let g=n.at(s),y=e[u],E=Mm(s,g,u,y,t);if(E!==0){E<0&&n.updateValue(s,y),s--,u--;continue}let S=t(o,l),A=t(s,g),F=t(o,d);if(Object.is(F,A)){let $=t(u,y);Object.is($,S)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new dh,i??=AC(n,o,s,t),yy(n,r,o,F))n.updateValue(o,d),o++,s++;else if(i.has(F))r.set(S,n.detach(o)),s--;else{let $=n.create(o,e[o]);n.attach(o,$),o++,s++}}for(;o<=u;)SC(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let d=n.at(o),f=l.value,g=Mm(o,d,o,f,t);if(g!==0)g<0&&n.updateValue(o,f),o++,l=u.next();else{r??=new dh,i??=AC(n,o,s,t);let y=t(o,f);if(yy(n,r,o,y))n.updateValue(o,f),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,f)),o++,s++,l=u.next();else{let E=t(o,d);r.set(E,n.detach(o)),s--}}}for(;!l.done;)SC(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function yy(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function SC(n,e,t,r,i){if(yy(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function AC(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var dh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Yt(n,e){hr("NgControlFlow");let t=Ee(),r=Gs(),i=t[r]!==En?t[r]:-1,o=i!==-1?hh(t,lt+i):void 0,s=0;if(Gn(t,r,n)){let a=ve(null);try{if(o!==void 0&&BT(o,s),n!==-1){let u=lt+n,l=hh(t,u),d=Ey(t[de],u),f=$u(l,d.tView.ssrId),g=cv(t,d,e,{dehydratedView:f});Rh(l,g,s,Bu(d,f))}}finally{ve(a)}}else if(o!==void 0){let a=UT(o,s);a!==void 0&&(a[Nt]=e)}}var vy=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Pt}};function nc(n,e){return e}var _y=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function gr(n,e,t,r,i,o,s,a,u,l,d,f,g){hr("NgControlFlow");let y=Ee(),E=Qt(),S=u!==void 0,A=Ee(),F=a?s.bind(A[_n][Nt]):s,$=new _y(S,F);A[lt+n]=$,dy(y,E,n+1,e,t,r,i,Fs(E.consts,o)),S&&dy(y,E,n+2,u,l,d,f,Fs(E.consts,g))}var wy=class extends my{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Pt}at(e){return this.getLView(e)[Nt].$implicit}attach(e,t){let r=t[qn];this.needsIndexUpdate||=e!==this.length,Rh(this.lContainer,t,e,Bu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,PL(this.lContainer,e)}create(e,t){let r=$u(this.lContainer,this.templateTNode.tView.ssrId),i=cv(this.hostLView,this.templateTNode,new vy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Th(e[de],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Nt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Nt].$index=e}getLView(e){return OL(this.lContainer,e)}};function mr(n){let e=ve(null),t=Gr();try{let r=Ee(),i=r[de],o=r[t],s=t+1,a=hh(r,s);if(o.liveCollection===void 0){let l=Ey(i,s);o.liveCollection=new wy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(NL(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Gs(),d=u.length===0;if(Gn(r,l,d)){let f=t+2,g=hh(r,f);if(d){let y=Ey(i,f),E=$u(g,y.tView.ssrId),S=cv(r,y,void 0,{dehydratedView:E});Rh(g,S,0,Bu(y,E))}else BT(g,0)}}}finally{ve(e)}}function hh(n,e){return n[e]}function PL(n,e){return Uu(n,e)}function OL(n,e){return UT(n,e)}function Ey(n,e){return Py(n,e)}function kL(n,e,t,r,i,o){let s=e.consts,a=Fs(s,i),u=Mh(e,n,2,r,a);return OT(e,t,u,Fs(s,o)),u.attrs!==null&&ay(u,u.attrs,!1),u.mergedAttrs!==null&&ay(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function U(n,e,t,r){let i=Ee(),o=Qt(),s=lt+n,a=i[We],u=o.firstCreatePass?kL(s,o,i,e,t,r):o.data[s],l=sS(o,i,u,a,e,n);i[s]=l;let d=Ny(u);return Zu(u,!0),IT(a,l,u),!ec(u)&&jy()&&nv(o,i,l,u),qO()===0&&Do(l,i),HO(),d&&(MT(o,i,u),AT(o,u,i)),r!==null&&xT(i,u),U}function V(){let n=dn();Ib()?ZO():(n=n.parent,Zu(n,!1));let e=n;WO(e)&&QO(),GO();let t=Qt();return t.firstCreatePass&&(Uy(t,n),cb(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&uk(e)&&bC(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ck(e)&&bC(t,e,Ee(),e.stylesWithoutHost,!1),V}function Qn(n,e,t,r){return U(n,e,t,r),V(),Qn}var sS=(n,e,t,r,i,o)=>(Ai(!0),ev(r,i,Rb()));function FL(n,e,t,r,i,o){let s=e[qn],a=!s||Yu()||ec(t)||Ju(s,o);if(Ai(a),a)return ev(r,i,Rb());let u=Nh(s,n,e,t);return sT(s,o)&&Ch(s,o,u.nextSibling),s&&(Wb(t)||Kb(u))&&Qu(t)&&(KO(t),wT(u)),u}function VL(){sS=FL}var LL=(n,e,t,r)=>(Ai(!0),pT(e[We],""));function jL(n,e,t,r){let i,o=e[qn],s=!o||Yu()||Ju(o,r)||ec(t);if(Ai(s),s)return pT(e[We],"");let a=Nh(o,n,e,t),u=Zk(o,r);return Ch(o,r,a),i=Ph(u,a),i}function UL(){LL=jL}function Rn(){return Ee()}var go=void 0;function BL(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var $L=["en",[["a","p"],["AM","PM"],go],[["AM","PM"],go,go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",go,"{1} 'at' {0}",go],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",BL],xm={};function Nn(n){let e=zL(n),t=MC(e);if(t)return t;let r=e.split("-")[0];if(t=MC(r),t)return t;if(r==="en")return $L;throw new X(701,!1)}function MC(n){return n in xm||(xm[n]=mo.ng&&mo.ng.common&&mo.ng.common.locales&&mo.ng.common.locales[n]),xm[n]}var it=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(it||{});function zL(n){return n.toLowerCase().replace(/_/g,"-")}var fh="en-US";var qL=fh;function HL(n){typeof n=="string"&&(qL=n.toLowerCase().replace(/_/g,"-"))}var GL=(n,e,t)=>{};function se(n,e,t,r){let i=Ee(),o=Qt(),s=dn();return aS(o,i,i[We],s,n,e,r),se}function WL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[qd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function aS(n,e,t,r,i,o,s){let a=Ny(r),l=n.firstCreatePass&&eV(n),d=e[Nt],f=XF(e),g=!0;if(r.type&3||s){let S=wn(r,e),A=s?s(S):S,F=f.length,$=s?Q=>s(Hn(Q[r.index])):r.index,j=null;if(!s&&a&&(j=WL(n,e,i,r.index)),j!==null){let Q=j.__ngLastListenerFn__||j;Q.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,g=!1}else{o=RC(r,e,d,o),GL(S,i,o);let Q=t.listen(A,i,o);f.push(o,Q),l&&l.push(i,$,F,F+1)}}else o=RC(r,e,d,o);let y=r.outputs,E;if(g&&y!==null&&(E=y[i])){let S=E.length;if(S)for(let A=0;A<S;A+=2){let F=E[A],$=E[A+1],ie=e[F][$].subscribe(o),ee=f.length;f.push(o,ie),l&&l.push(i,r.index,ee,-(ee+1))}}}function xC(n,e,t,r){let i=ve(null);try{return ar(6,e,t),t(r)!==!1}catch(o){return jT(n,o),!1}finally{ar(7,e,t),ve(i)}}function RC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Si(n.index,e):e;lv(s,5);let a=xC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=xC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Oe(n=1){return ik(n)}function KL(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Y(n,e=""){let t=Ee(),r=Qt(),i=n+lt,o=r.firstCreatePass?Mh(r,i,1,e,null):r.data[i],s=uS(r,t,o,e,n);t[i]=s,jy()&&nv(r,t,s,o),Zu(o,!1)}var uS=(n,e,t,r,i)=>(Ai(!0),fT(e[We],r));function QL(n,e,t,r,i){let o=e[qn],s=!o||Yu()||ec(t)||Ju(o,i);return Ai(s),s?fT(e[We],r):Nh(o,n,e,t)}function YL(){uS=QL}function vt(n){return It("",n,""),vt}function It(n,e,t){let r=Ee(),i=fL(r,n,e,t);return i!==En&&av(r,Gr(),i),It}function yv(n,e,t,r,i){let o=Ee(),s=pL(o,n,e,t,r,i);return s!==En&&av(o,Gr(),s),yv}function Fh(n,e,t,r,i,o,s){let a=Ee(),u=gL(a,n,e,t,r,i,o,s);return u!==En&&av(a,Gr(),u),Fh}function Zt(n,e,t){nS(e)&&(e=e());let r=Ee(),i=Gs();if(Gn(r,i,e)){let o=Qt(),s=Ly();PT(o,s,r,n,e,r[We],t,!1)}return Zt}function jt(n,e){let t=nS(n);return t&&n.set(e),t}function Jt(n,e){let t=Ee(),r=Qt(),i=dn();return aS(r,t,t[We],i,n,e),Jt}function ZL(n,e,t){let r=Qt();if(r.firstCreatePass){let i=Ci(n);Iy(t,r.data,r.blueprint,i,!0),Iy(e,r.data,r.blueprint,i,!1)}}function Iy(n,e,t,r,i){if(n=Kt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Iy(n[o],e,t,r,i);else{let o=Qt(),s=Ee(),a=dn(),u=Ns(n)?n:Kt(n.provide),l=ob(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ns(n)||!n.multi){let y=new Io(l,i,Ae),E=Nm(u,e,i?d:d+g,f);E===-1?(Hm(Jd(a,s),o,u),Rm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[E]=y,s[E]=y)}else{let y=Nm(u,e,d+g,f),E=Nm(u,e,d,d+g),S=y>=0&&t[y],A=E>=0&&t[E];if(i&&!A||!i&&!S){Hm(Jd(a,s),o,u);let F=e2(i?XL:JL,t.length,i,r,l);!i&&A&&(t[E].providerFactory=F),Rm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=cS(t[i?E:y],l,!i&&r);Rm(o,n,y>-1?y:E,F)}!i&&r&&A&&t[E].componentProviders++}}}function Rm(n,e,t,r){let i=Ns(e),o=SO(e);if(i||o){let u=(o?Kt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function cS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Nm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function JL(n,e,t,r){return Dy(this.multi,[])}function XL(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Vs(t,t[de],this.providerFactory.index,r);o=a.slice(0,s),Dy(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Dy(i,o);return o}function Dy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function e2(n,e,t,r,i){let o=new Io(n,t,Ae);return o.multi=[],o.index=e,o.componentProviders=0,cS(o,i,r&&!t),o}function Qs(n,e=[]){return t=>{t.providersResolver=(r,i)=>ZL(r,i?i(n):n,e)}}var t2=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=nb(!1,t.type),i=r.length>0?kh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(z(yn))})}}return n})();function Me(n){hr("NgStandalone"),n.getStandaloneInjector=e=>e.get(t2).getOrCreateStandaloneInjector(n)}function vv(n,e,t){let r=Eh()+n,i=Ee();return i[r]===En?pv(i,r,t?e.call(t):e()):oL(i,r)}function lS(n,e,t,r){return hS(Ee(),Eh(),n,e,t,r)}function dS(n,e){let t=n[e];return t===En?void 0:t}function hS(n,e,t,r,i,o){let s=e+t;return Gn(n,s,i)?pv(n,s+1,o?r.call(o,i):r(i)):dS(n,s+1)}function n2(n,e,t,r,i,o,s){let a=e+t;return gv(n,a,i,o)?pv(n,a+2,s?r.call(s,i,o):r(i,o)):dS(n,a+2)}function yr(n,e){let t=Qt(),r,i=n+lt;t.firstCreatePass?(r=r2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=vo(r.type,!0)),s,a=an(Ae);try{let u=Zd(!1),l=o();return Zd(u),KL(t,Ee(),i,l),l}finally{an(a)}}function r2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function rc(n,e,t){let r=n+lt,i=Ee(),o=gb(i,r);return fS(i,r)?hS(i,Eh(),e,o.transform,t,o):o.transform(t)}function ic(n,e,t,r){let i=n+lt,o=Ee(),s=gb(o,i);return fS(o,i)?n2(o,Eh(),e,s.transform,t,r,s):s.transform(t,r)}function fS(n,e){return n[de].data[e].pure}var Hr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pS=new Hr("18.2.13");var Vh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var gS=new G("");function xi(n){return!!n&&typeof n.then=="function"}function _v(n){return!!n&&typeof n.subscribe=="function"}var Lh=new G(""),mS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=P(Lh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(xi(o))t.push(o);else if(_v(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ao=new G("");function i2(){CD(()=>{throw new X(600,!1)})}function o2(n){return n.isBoundToModule}var s2=10;function a2(n,e,t){try{let r=t();return xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var vr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(Mk),this.afterRenderManager=P(oS),this.zonelessEnabled=P(dv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ge,this.afterTick=new Ge,this.componentTypes=[],this.components=[],this.isStable=P(To).hasPendingTasks.pipe(re(t=>!t)),this._injector=P(yn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ah;if(!this._injector.get(mS).done){let g=!i&&JC(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(Us).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=o2(s)?void 0:this._injector.get(bi),u=r||s.selector,l=s.create(Mn.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(gS,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ld(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ve(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Bs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<s2;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)u2(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>_h(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ld(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ao,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ld(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ld(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Pd;function jh(n){Pd??=new WeakMap;let e=Pd.get(n);if(e)return e;let t=n.isStable.pipe(gn(r=>r)).toPromise().then(()=>{});return Pd.set(n,t),n.onDestroy(()=>Pd?.delete(n)),t}function u2(n,e,t,r){if(!t&&!_h(n))return;qT(n,e,t&&!r?0:1)}var Cy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uh=(()=>{class n{compileModuleSync(t){return new ly(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=XC(t),o=hT(i.declarations).reduce((s,a)=>{let u=Di(a);return u&&s.push(new $s(u)),s},[]);return new Cy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var c2=(()=>{class n{constructor(){this.zone=P(Ne),this.changeDetectionScheduler=P(js),this.applicationRef=P(vr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l2({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ne(oe(L({},d2()),{scheduleInRootZone:t})),[{provide:Ne,useFactory:n},{provide:_o,multi:!0,useFactory:()=>{let r=P(c2,{optional:!0});return()=>r.initialize()}},{provide:_o,multi:!0,useFactory:()=>{let r=P(h2);return()=>{r.initialize()}}},e===!0?{provide:ZT,useValue:!0}:[],{provide:JT,useValue:t??qb}]}function d2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var h2=(()=>{class n{constructor(){this.subscription=new tt,this.initialized=!1,this.zone=P(Ne),this.pendingTasks=P(To)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var f2=(()=>{class n{constructor(){this.appRef=P(vr),this.taskService=P(To),this.ngZone=P(Ne),this.zonelessEnabled=P(dv),this.disableScheduling=P(ZT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new tt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(eh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(JT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ym||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?hC:Hb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(eh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function p2(){return typeof $localize<"u"&&$localize.locale||fh}var Bh=new G("",{providedIn:"root",factory:()=>P(Bh,me.Optional|me.SkipSelf)||p2()});var by=new G("");function Od(n){return!n.moduleRef}function g2(n){let e=Od(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{Od(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Od(n)){let o=()=>e.destroy(),s=n.platformInjector.get(by);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(by);s.add(o),n.moduleRef.onDestroy(()=>{Ld(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return a2(r,t,()=>{let o=e.get(mS);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Bh,fh);if(HL(s||fh),Od(n)){let a=e.get(vr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return m2(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function m2(n,e){let t=n.injector.get(vr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var jd=null;function y2(n=[],e){return Mn.create({name:e,providers:[{provide:yh,useValue:"platform"},{provide:by,useValue:new Set([()=>jd=null])},...n]})}function v2(n=[]){if(jd)return jd;let e=y2(n);return jd=e,i2(),_2(e),e}function _2(n){n.get(Wy,null)?.forEach(t=>t())}function wv(){return!1}var _r=(()=>{class n{static{this.__NG_ELEMENT_ID__=w2}}return n})();function w2(n){return E2(dn(),Ee(),(n&16)===16)}function E2(n,e,t){if(Qu(n)&&!t){let r=Si(n.index,e);return new Ls(r,r)}else if(n.type&175){let r=e[_n];return new Ls(r,e)}return null}function yS(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=v2(r),o=[l2({}),{provide:js,useExisting:f2},...t||[]],s=new ch({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return g2({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var NC=!1;function I2(){NC||(NC=!0,Wk(),VL(),YL(),UL(),cL(),YV(),xV(),OF())}function D2(n,e){return jh(n)}function vS(){return qs([{provide:Md,useFactory:()=>{let n=!0;return Nu()&&(n=!!P(Ws,{optional:!0})?.get(iT,null)),n&&hr("NgHydration"),n}},{provide:_o,useValue:()=>{DV(!1),Nu()&&P(Md)&&(C2(),I2())},multi:!0},{provide:uT,useFactory:()=>Nu()&&P(Md)},{provide:Ao,useFactory:()=>{if(Nu()&&P(Md)){let n=P(vr),e=P(Mn);return()=>{D2(n,e).then(()=>{SV(n)})}}return()=>{}},multi:!0}])}function C2(){let n=Ih(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===Hk){e=t;break}if(!e)throw new X(-507,!1)}function Ri(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function oc(n,e){hr("NgSignals");let t=ED(n);return e?.equal&&(t[Vr].equal=e.equal),t}function Yn(n){let e=ve(null);try{return n()}finally{ve(e)}}function _S(n){let e=Di(n);if(!e)return null;let t=new $s(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var DS=null;function Yr(){return DS}function CS(n){DS??=n}var Yh=class{};var en=new G(""),Av=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(b2),providedIn:"platform"})}}return n})(),bS=new G(""),b2=(()=>{class n extends Av{constructor(){super(),this._doc=P(en),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yr().getBaseHref(this._doc)}onPopState(t){let r=Yr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Yr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Mv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function wS(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Kr(n){return n&&n[0]!=="?"?"?"+n:n}var Zr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(xv),providedIn:"root"})}}return n})(),TS=new G(""),xv=(()=>{class n extends Zr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(en).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(Av),z(TS,8))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SS=(()=>{class n extends Zr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Mv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(Av),z(TS,8))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Ys=(()=>{class n{constructor(t){this._subject=new _e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=A2(wS(ES(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Kr(r))}normalize(t){return n.stripTrailingSlash(S2(this._basePath,ES(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Kr}static{this.joinWithSlash=Mv}static{this.stripTrailingSlash=wS}static{this.\u0275fac=function(r){return new(r||n)(z(Zr))}}static{this.\u0275prov=J({token:n,factory:()=>T2(),providedIn:"root"})}}return n})();function T2(){return new Ys(z(Zr))}function S2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ES(n){return n.replace(/\/index.html$/,"")}function A2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Xt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Xt||{}),Le=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Le||{}),In=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(In||{}),Ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function M2(n){return Nn(n)[it.LocaleId]}function x2(n,e,t){let r=Nn(n),i=[r[it.DayPeriodsFormat],r[it.DayPeriodsStandalone]],o=Pn(i,e);return Pn(o,t)}function R2(n,e,t){let r=Nn(n),i=[r[it.DaysFormat],r[it.DaysStandalone]],o=Pn(i,e);return Pn(o,t)}function N2(n,e,t){let r=Nn(n),i=[r[it.MonthsFormat],r[it.MonthsStandalone]],o=Pn(i,e);return Pn(o,t)}function P2(n,e){let r=Nn(n)[it.Eras];return Pn(r,e)}function $h(n,e){let t=Nn(n);return Pn(t[it.DateFormat],e)}function zh(n,e){let t=Nn(n);return Pn(t[it.TimeFormat],e)}function qh(n,e){let r=Nn(n)[it.DateTimeFormat];return Pn(r,e)}function Xh(n,e){let t=Nn(n),r=t[it.NumberSymbols][e];if(typeof r>"u"){if(e===Ni.CurrencyDecimal)return t[it.NumberSymbols][Ni.Decimal];if(e===Ni.CurrencyGroup)return t[it.NumberSymbols][Ni.Group]}return r}function AS(n){if(!n[it.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[it.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function O2(n){let e=Nn(n);return AS(e),(e[it.ExtraData][2]||[]).map(r=>typeof r=="string"?Ev(r):[Ev(r[0]),Ev(r[1])])}function k2(n,e,t){let r=Nn(n);AS(r);let i=[r[it.ExtraData][0],r[it.ExtraData][1]],o=Pn(i,e)||[];return Pn(o,t)||[]}function Pn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Ev(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var F2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hh={},V2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Qr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Qr||{}),Re=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Re||{}),xe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(xe||{});function L2(n,e,t,r){let i=W2(n);e=Wr(t,e)||e;let s=[],a;for(;e;)if(a=V2.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=xS(r,u),i=G2(i,r,!0));let l="";return s.forEach(d=>{let f=q2(d);l+=f?f(i,t,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Zh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wr(n,e){let t=M2(n);if(Hh[t]??={},Hh[t][e])return Hh[t][e];let r="";switch(e){case"shortDate":r=$h(n,In.Short);break;case"mediumDate":r=$h(n,In.Medium);break;case"longDate":r=$h(n,In.Long);break;case"fullDate":r=$h(n,In.Full);break;case"shortTime":r=zh(n,In.Short);break;case"mediumTime":r=zh(n,In.Medium);break;case"longTime":r=zh(n,In.Long);break;case"fullTime":r=zh(n,In.Full);break;case"short":let i=Wr(n,"shortTime"),o=Wr(n,"shortDate");r=Gh(qh(n,In.Short),[i,o]);break;case"medium":let s=Wr(n,"mediumTime"),a=Wr(n,"mediumDate");r=Gh(qh(n,In.Medium),[s,a]);break;case"long":let u=Wr(n,"longTime"),l=Wr(n,"longDate");r=Gh(qh(n,In.Long),[u,l]);break;case"full":let d=Wr(n,"fullTime"),f=Wr(n,"fullDate");r=Gh(qh(n,In.Full),[d,f]);break}return r&&(Hh[t][e]=r),r}function Gh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function j2(n,e){return Zn(n,3).substring(0,e)}function dt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=U2(n,o);if((t>0||a>-t)&&(a+=t),n===Re.Hours)a===0&&t===-12&&(a=12);else if(n===Re.FractionalSeconds)return j2(a,e);let u=Xh(s,Ni.MinusSign);return Zn(a,e,u,r,i)}}function U2(n,e){switch(n){case Re.FullYear:return e.getFullYear();case Re.Month:return e.getMonth();case Re.Date:return e.getDate();case Re.Hours:return e.getHours();case Re.Minutes:return e.getMinutes();case Re.Seconds:return e.getSeconds();case Re.FractionalSeconds:return e.getMilliseconds();case Re.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Be(n,e,t=Xt.Format,r=!1){return function(i,o){return B2(i,o,n,e,t,r)}}function B2(n,e,t,r,i,o){switch(t){case xe.Months:return N2(e,i,r)[n.getMonth()];case xe.Days:return R2(e,i,r)[n.getDay()];case xe.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=O2(e),d=k2(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,E]=g,S=s>=y.hours&&a>=y.minutes,A=s<E.hours||s===E.hours&&a<E.minutes;if(y.hours<E.hours){if(S&&A)return!0}else if(S||A)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return x2(e,i,r)[s<12?0:1];case xe.Eras:return P2(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Wh(n){return function(e,t,r){let i=-1*r,o=Xh(t,Ni.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Qr.Short:return(i>=0?"+":"")+Zn(s,2,o)+Zn(Math.abs(i%60),2,o);case Qr.ShortGMT:return"GMT"+(i>=0?"+":"")+Zn(s,1,o);case Qr.Long:return"GMT"+(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);case Qr.Extended:return r===0?"Z":(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var $2=0,Qh=4;function z2(n){let e=Zh(n,$2,1).getDay();return Zh(n,0,1+(e<=Qh?Qh:Qh+7)-e)}function MS(n){let e=n.getDay(),t=e===0?-3:Qh-e;return Zh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Iv(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=MS(t),s=z2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Zn(i,n,Xh(r,Ni.MinusSign))}}function Kh(n,e=!1){return function(t,r){let o=MS(t).getFullYear();return Zn(o,n,Xh(r,Ni.MinusSign),e)}}var Dv={};function q2(n){if(Dv[n])return Dv[n];let e;switch(n){case"G":case"GG":case"GGG":e=Be(xe.Eras,Le.Abbreviated);break;case"GGGG":e=Be(xe.Eras,Le.Wide);break;case"GGGGG":e=Be(xe.Eras,Le.Narrow);break;case"y":e=dt(Re.FullYear,1,0,!1,!0);break;case"yy":e=dt(Re.FullYear,2,0,!0,!0);break;case"yyy":e=dt(Re.FullYear,3,0,!1,!0);break;case"yyyy":e=dt(Re.FullYear,4,0,!1,!0);break;case"Y":e=Kh(1);break;case"YY":e=Kh(2,!0);break;case"YYY":e=Kh(3);break;case"YYYY":e=Kh(4);break;case"M":case"L":e=dt(Re.Month,1,1);break;case"MM":case"LL":e=dt(Re.Month,2,1);break;case"MMM":e=Be(xe.Months,Le.Abbreviated);break;case"MMMM":e=Be(xe.Months,Le.Wide);break;case"MMMMM":e=Be(xe.Months,Le.Narrow);break;case"LLL":e=Be(xe.Months,Le.Abbreviated,Xt.Standalone);break;case"LLLL":e=Be(xe.Months,Le.Wide,Xt.Standalone);break;case"LLLLL":e=Be(xe.Months,Le.Narrow,Xt.Standalone);break;case"w":e=Iv(1);break;case"ww":e=Iv(2);break;case"W":e=Iv(1,!0);break;case"d":e=dt(Re.Date,1);break;case"dd":e=dt(Re.Date,2);break;case"c":case"cc":e=dt(Re.Day,1);break;case"ccc":e=Be(xe.Days,Le.Abbreviated,Xt.Standalone);break;case"cccc":e=Be(xe.Days,Le.Wide,Xt.Standalone);break;case"ccccc":e=Be(xe.Days,Le.Narrow,Xt.Standalone);break;case"cccccc":e=Be(xe.Days,Le.Short,Xt.Standalone);break;case"E":case"EE":case"EEE":e=Be(xe.Days,Le.Abbreviated);break;case"EEEE":e=Be(xe.Days,Le.Wide);break;case"EEEEE":e=Be(xe.Days,Le.Narrow);break;case"EEEEEE":e=Be(xe.Days,Le.Short);break;case"a":case"aa":case"aaa":e=Be(xe.DayPeriods,Le.Abbreviated);break;case"aaaa":e=Be(xe.DayPeriods,Le.Wide);break;case"aaaaa":e=Be(xe.DayPeriods,Le.Narrow);break;case"b":case"bb":case"bbb":e=Be(xe.DayPeriods,Le.Abbreviated,Xt.Standalone,!0);break;case"bbbb":e=Be(xe.DayPeriods,Le.Wide,Xt.Standalone,!0);break;case"bbbbb":e=Be(xe.DayPeriods,Le.Narrow,Xt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Be(xe.DayPeriods,Le.Abbreviated,Xt.Format,!0);break;case"BBBB":e=Be(xe.DayPeriods,Le.Wide,Xt.Format,!0);break;case"BBBBB":e=Be(xe.DayPeriods,Le.Narrow,Xt.Format,!0);break;case"h":e=dt(Re.Hours,1,-12);break;case"hh":e=dt(Re.Hours,2,-12);break;case"H":e=dt(Re.Hours,1);break;case"HH":e=dt(Re.Hours,2);break;case"m":e=dt(Re.Minutes,1);break;case"mm":e=dt(Re.Minutes,2);break;case"s":e=dt(Re.Seconds,1);break;case"ss":e=dt(Re.Seconds,2);break;case"S":e=dt(Re.FractionalSeconds,1);break;case"SS":e=dt(Re.FractionalSeconds,2);break;case"SSS":e=dt(Re.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Wh(Qr.Short);break;case"ZZZZZ":e=Wh(Qr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Wh(Qr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Wh(Qr.Long);break;default:return null}return Dv[n]=e,e}function xS(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function H2(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function G2(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=xS(e,i);return H2(n,r*(o-i))}function W2(n){if(IS(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Zh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(F2))return K2(r)}let e=new Date(n);if(!IS(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function K2(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function IS(n){return n instanceof Date&&!isNaN(n.valueOf())}function Rv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}function RS(n,e){return new X(2100,!1)}var Cv=class{createSubscription(e,t){return Yn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Yn(()=>e.unsubscribe())}},bv=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},Q2=new bv,Y2=new Cv,ef=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(xi(t))return Q2;if(_v(t))return Y2;throw RS(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Ae(_r,16))}}static{this.\u0275pipe=Ku({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Z2="mediumDate",J2=new G(""),X2=new G(""),Zs=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Z2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return L2(t,s,o||this.locale,a)}catch(s){throw RS(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Ae(Bh,16),Ae(J2,24),Ae(X2,24))}}static{this.\u0275pipe=Ku({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Mo=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ln({type:n})}static{this.\u0275inj=cn({})}}return n})(),Nv="browser",ej="server";function tj(n){return n===Nv}function Jr(n){return n===ej}var NS=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>tj(P(bt))?new Tv(P(en),window):new Sv})}}return n})(),Tv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=nj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function nj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Sv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Jh=class{};var nf=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var US=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(US||{}),Ov=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new nf,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var rf=class n extends Ov{constructor(e={}){super(e),this.type=US.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var rj=new G("");var ij=new G(""),PS="b",OS="h",kS="s",FS="st",VS="u",LS="rt",tf=new G(""),oj=["GET","HEAD"];function sj(n,e){let y=P(tf),{isCacheActive:t}=y,r=rD(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!oj.includes(o)||!r.includeRequestsWithAuthHeaders&&aj(n)||r.filter?.(n)===!1)return e(n);let s=P(Ws),a=P(ij,{optional:!0}),u=Jr(P(bt));if(a&&!u)throw new X(2803,!1);let l=u&&a?dj(n.url,a):n.url,d=cj(n,l),f=s.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),f){let{[PS]:E,[LS]:S,[OS]:A,[kS]:F,[FS]:$,[VS]:j}=f,Q=E;switch(S){case"arraybuffer":Q=new TextEncoder().encode(E).buffer;break;case"blob":Q=new Blob([E]);break}let ie=new nf(A);return te(new rf({body:Q,headers:ie,status:F,statusText:$,url:j}))}return e(n).pipe(rt(E=>{E instanceof rf&&u&&s.set(d,{[PS]:E.body,[OS]:uj(E.headers,g),[kS]:E.status,[FS]:E.statusText,[VS]:l,[LS]:n.responseType})}))}function aj(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function uj(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function jS(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function cj(n,e){let{params:t,method:r,responseType:i}=n,o=jS(t),s=n.serializeBody();s instanceof URLSearchParams?s=jS(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=lj(a);return u}function lj(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function BS(n){return[{provide:tf,useFactory:()=>(hr("NgHttpTransferCache"),L({isCacheActive:!0},n))},{provide:rj,useValue:sj,multi:!0,deps:[Ws,tf]},{provide:Ao,multi:!0,useFactory:()=>{let e=P(vr),t=P(tf);return()=>{jh(e).then(()=>{t.isCacheActive=!1})}}}]}function dj(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Vv=class extends Yh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lv=class n extends Vv{static makeCurrent(){CS(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=hj();return t==null?null:fj(t)}resetBaseElement(){sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rv(document.cookie,e)}},sc=null;function hj(){return sc=sc||document.querySelector("base"),sc?sc.getAttribute("href"):null}function fj(n){return new URL(n,document.baseURI).pathname}var pj=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),jv=new G(""),HS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(z(jv),z(Ne))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),of=class{constructor(e){this._doc=e}},kv="ng-app-id",GS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jr(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${kv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(kv),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(kv,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(z(en),z(Dh),z(Ky,8),z(bt))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Fv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$v=/%COMP%/g,WS="%COMP%",gj=`_nghost-${WS}`,mj=`_ngcontent-${WS}`,yj=!0,vj=new G("",{providedIn:"root",factory:()=>yj});function _j(n){return mj.replace($v,n)}function wj(n){return gj.replace($v,n)}function KS(n,e){return e.map(t=>t.replace($v,n))}var $S=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Jr(a),this.defaultRenderer=new ac(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cr.ShadowDom&&(r=oe(L({},r),{encapsulation:cr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof sf?i.applyToHost(t):i instanceof uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case cr.Emulated:o=new sf(u,l,r,this.appId,d,s,a,f);break;case cr.ShadowDom:return new Uv(u,l,t,r,s,a,this.nonce,f);default:o=new uc(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(z(HS),z(GS),z(Dh),z(vj),z(en),z(bt),z(Ne),z(Ky))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),ac=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Fv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(zS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Fv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Fv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qr.DashCase|qr.Important)?e.style.setProperty(t,r,i&qr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Yr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function zS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Uv=class extends ac{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=KS(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},uc=class extends ac{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?KS(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sf=class extends uc{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=_j(l),this.hostAttr=wj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Ej=(()=>{class n extends of{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(z(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),qS=["alt","control","meta","shift"],Ij={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Cj=(()=>{class n extends of{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qS.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Ij[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qS.forEach(s=>{if(s!==i){let a=Dj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(z(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function QS(n,e){return yS(L({rootComponent:n},bj(e)))}function bj(n){return{appProviders:[...xj,...n?.providers??[]],platformProviders:Mj}}function Tj(){Lv.makeCurrent()}function Sj(){return new zr}function Aj(){return Xb(document),document}var Mj=[{provide:bt,useValue:Nv},{provide:Wy,useValue:Tj,multi:!0},{provide:en,useFactory:Aj,deps:[]}];var xj=[{provide:yh,useValue:"root"},{provide:zr,useFactory:Sj,deps:[]},{provide:jv,useClass:Ej,multi:!0,deps:[en,Ne,bt]},{provide:jv,useClass:Cj,multi:!0,deps:[en]},$S,GS,HS,{provide:Bs,useExisting:$S},{provide:Jh,useClass:pj,deps:[]},[]];var YS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(z(en))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bv=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Bv||{});function ZS(...n){let e=[],t=new Set,r=t.has(Bv.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return qs([[],vS(),t.has(Bv.NoHttpTransferCache)||r?[]:BS({}),e])}var fe="primary",Dc=Symbol("RouteTitle"),Wv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ra(n){return new Wv(n)}function Nj(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Pj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wr(n[t],e[t]))return!1;return!0}function wr(n,e){let t=n?Kv(n):void 0,r=e?Kv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!uA(n[i],e[i]))return!1;return!0}function Kv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function cA(n){return n.length>0?n[n.length-1]:null}function Oi(n){return um(n)?n:xi(n)?Ie(Promise.resolve(n)):te(n)}var Oj={exact:dA,subset:hA},lA={exact:kj,subset:Fj,ignored:()=>!0};function JS(n,e,t){return Oj[t.paths](n.root,e.root,t.matrixParams)&&lA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function kj(n,e){return wr(n,e)}function dA(n,e,t){if(!Ro(n.segments,e.segments)||!cf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!dA(n.children[r],e.children[r],t))return!1;return!0}function Fj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uA(n[t],e[t]))}function hA(n,e,t){return fA(n,e,e.segments,t)}function fA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ro(i,t)||e.hasChildren()||!cf(i,t,r))}else if(n.segments.length===t.length){if(!Ro(n.segments,t)||!cf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!hA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ro(n.segments,i)||!cf(n.segments,i,r)||!n.children[fe]?!1:fA(n.children[fe],e,o,r)}}function cf(n,e,t){return e.every((r,i)=>lA[t](n[i].parameters,r.parameters))}var ei=class{constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ra(this.queryParams),this._queryParamMap}toString(){return jj.serialize(this)}},Pe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},xo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ra(this.parameters),this._parameterMap}toString(){return gA(this)}};function Vj(n,e){return Ro(n,e)&&n.every((t,r)=>wr(t.parameters,e[r].parameters))}function Ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Lj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var Cc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>new ia,providedIn:"root"})}}return n})(),ia=class{parse(e){let t=new Yv(e);return new ei(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${cc(e.root,!0)}`,r=$j(e.queryParams),i=typeof e.fragment=="string"?`#${Uj(e.fragment)}`:"";return`${t}${r}${i}`}},jj=new ia;function lf(n){return n.segments.map(e=>gA(e)).join("/")}function cc(n,e){if(!n.hasChildren())return lf(n);if(e){let t=n.children[fe]?cc(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${cc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Lj(n,(r,i)=>i===fe?[cc(n.children[fe],!1)]:[`${i}:${cc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${lf(n)}/${t[0]}`:`${lf(n)}/(${t.join("//")})`}}function pA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(n){return pA(n).replace(/%3B/gi,";")}function Uj(n){return encodeURI(n)}function Qv(n){return pA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(n){return decodeURIComponent(n)}function XS(n){return df(n.replace(/\+/g,"%20"))}function gA(n){return`${Qv(n.path)}${Bj(n.parameters)}`}function Bj(n){return Object.entries(n).map(([e,t])=>`;${Qv(e)}=${Qv(t)}`).join("")}function $j(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${af(t)}=${af(i)}`).join("&"):`${af(t)}=${af(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var zj=/^[^\/()?;#]+/;function zv(n){let e=n.match(zj);return e?e[0]:""}var qj=/^[^\/()?;=#]+/;function Hj(n){let e=n.match(qj);return e?e[0]:""}var Gj=/^[^=?&#]+/;function Wj(n){let e=n.match(Gj);return e?e[0]:""}var Kj=/^[^&#]+/;function Qj(n){let e=n.match(Kj);return e?e[0]:""}var Yv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Pe(e,t)),r}parseSegment(){let e=zv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new xo(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Hj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=zv(this.remaining);i&&(r=i,this.capture(r))}e[df(t)]=df(r)}parseQueryParam(e){let t=Wj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Qj(this.remaining);s&&(r=s,this.capture(r))}let i=XS(t),o=XS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function mA(n){return n.segments.length>0?new Pe([],{[fe]:n}):n}function yA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=yA(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return Yj(t)}function Yj(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Pe(n.segments.concat(e.segments),e.children)}return n}function No(n){return n instanceof ei}function Zj(n,e,t=null,r=null){let i=vA(n);return _A(i,e,t,r)}function vA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=mA(r);return e??i}function _A(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return qv(i,i,i,t,r);let o=Jj(e);if(o.toRoot())return qv(i,i,new Pe([],{}),t,r);let s=Xj(o,i,n),a=s.processChildren?hc(s.segmentGroup,s.index,o.commands):EA(s.segmentGroup,s.index,o.commands);return qv(i,s.segmentGroup,a,t,r)}function hf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gc(n){return typeof n=="object"&&n!=null&&n.outlets}function qv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=wA(n,e,t);let a=mA(yA(s));return new ei(a,o,i)}function wA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=wA(o,e,t)}),new Pe(n.segments,r)}var ff=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hf(r[0]))throw new X(4003,!1);let i=r.find(gc);if(i&&i!==cA(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Jj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ff(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ff(t,e,r)}var ea=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Xj(n,e,t){if(n.isAbsolute)return new ea(e,!0,0);if(!t)return new ea(e,!1,NaN);if(t.parent===null)return new ea(t,!0,0);let r=hf(n.commands[0])?0:1,i=t.segments.length-1+r;return eU(t,i,n.numberOfDoubleDots)}function eU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new ea(r,!1,i-o)}function tU(n){return gc(n[0])?n[0].outlets:{[fe]:n}}function EA(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return hc(n,e,t);let r=nU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Pe(n.segments.slice(r.pathIndex),n.children),hc(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?Zv(n,e,t):r.match?hc(n,0,i):Zv(n,e,t)}function hc(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=tU(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=hc(n.children[fe],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=EA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function nU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(gc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!tA(u,l,s))return o;r+=2}else{if(!tA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gc(o)){let u=rU(o.outlets);return new Pe(r,u)}if(i===0&&hf(t[0])){let u=n.segments[e];r.push(new xo(u.path,eA(t[0]))),i++;continue}let s=gc(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hf(a)?(r.push(new xo(s,eA(a))),i+=2):(r.push(new xo(s,{})),i++)}return new Pe(r,{})}function rU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Zv(new Pe([],{}),0,r))}),e}function eA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tA(n,e,t){return n==t.path&&wr(e,t.parameters)}var fc="imperative",Dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Dt||{}),On=class{constructor(e,t){this.id=e,this.url=t}},oa=class extends On{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Er=class extends On{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Cn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Cn||{}),pf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pf||{}),Xr=class extends On{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pi=class extends On{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Dt.NavigationSkipped}},mc=class extends On{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gf=class extends On{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jv=class extends On{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xv=class extends On{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},e_=class extends On{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},t_=class extends On{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},n_=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},r_=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},i_=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},o_=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},s_=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a_=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},yc=class{},sa=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function iU(n,e){return n.providers&&!n._injector&&(n._injector=kh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jn(n){return n.outlet||fe}function oU(n,e){let t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function bc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var u_=class{get injector(){return bc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Tc(this.rootInjector),this.attachRef=null}},Tc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new u_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(z(yn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=c_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=c_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=l_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return l_(e,this._root).map(t=>t.value)}};function c_(n,e){if(n===e.value)return e;for(let t of e.children){let r=c_(n,t);if(r)return r}return null}function l_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=l_(n,t);if(r.length)return r.unshift(e),r}return[]}var Dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vf=class extends yf{constructor(e,t){super(e),this.snapshot=t,__(this,e)}toString(){return this.snapshot.toString()}};function IA(n){let e=sU(n),t=new yt([new xo("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new Ir(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new vf(new Dn(a,[]),e)}function sU(n){let e={},t={},r={},i="",o=new ta([],e,r,i,t,fe,n,null,{});return new wf("",new Dn(o,[]))}var Ir=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[Dc]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>ra(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>ra(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _f(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&CA(i)&&(r.resolve[Dc]=i.title),r}var ta=class{get title(){return this.data?.[Dc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ra(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ra(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wf=class extends yf{constructor(e,t){super(t),this.url=e,__(this,t)}toString(){return DA(this._root)}};function __(n,e){e.value._routerState=n,e.children.forEach(t=>__(n,t))}function DA(n){let e=n.children.length>0?` { ${n.children.map(DA).join(", ")} } `:"";return`${n.value}${e}`}function Hv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wr(e.params,t.params)||n.paramsSubject.next(t.params),Pj(e.url,t.url)||n.urlSubject.next(t.url),wr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function d_(n,e){let t=wr(n.params,e.params)&&Vj(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||d_(n.parent,e.parent))}function CA(n){return typeof n.title=="string"||n.title===null}var w_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new _e,this.deactivateEvents=new _e,this.attachEvents=new _e,this.detachEvents=new _e,this.parentContexts=P(Tc),this.location=P(Oh),this.changeDetector=P(_r),this.inputBinder=P(Cf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new h_(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=kt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xn]})}}return n})(),h_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ir?this.route:e===Tc?this.childContexts:this.parent.get(e,t)}},Cf=new G(""),nA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xu([r.queryParams,r.params,r.data]).pipe(Ye(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=_S(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function aU(n,e,t){let r=vc(n,e._root,t?t._root:void 0);return new vf(r,e)}function vc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=uU(n,e,t);return new Dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>vc(n,a)),s}}let r=cU(e.value),i=e.children.map(o=>vc(n,o));return new Dn(r,i)}}function uU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vc(n,r,i);return vc(n,r)})}function cU(n){return new Ir(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var _c=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},bA="ngNavigationCancelingError";function Ef(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=No(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TA(!1,Cn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function TA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[bA]=!0,t.cancellationCode=e,t}function lU(n){return SA(n)&&No(n.url)}function SA(n){return!!n&&n[bA]}var dU=(n,e,t,r)=>re(i=>(new f_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),f_=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new a_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new o_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},If=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},na=class{constructor(e,t){this.component=e,this.route=t}};function hU(n,e,t){let r=n._root,i=e?e._root:null;return lc(r,i,t,[r.value])}function fU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ua(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!FC(n)?n:e.get(n):r}function lc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xs(e);return n.children.forEach(s=>{pU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pc(a,t.getContext(s),i)),i}function pU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=gU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new If(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?lc(n,e,a?a.children:null,r,i):lc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new na(a.outlet.component,s))}else s&&pc(e,a,i),i.canActivateChecks.push(new If(r)),o.component?lc(n,null,a?a.children:null,r,i):lc(n,null,t,r,i);return i}function gU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ro(n.url,e.url)||!wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!d_(n,e)||!wr(n.queryParams,e.queryParams);case"paramsChange":default:return!d_(n,e)}}function pc(n,e,t){let r=Xs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?pc(s,e.children.getContext(o),t):pc(s,null,t):pc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new na(e.outlet.component,i)):t.canDeactivateChecks.push(new na(null,i)):t.canDeactivateChecks.push(new na(null,i))}function Sc(n){return typeof n=="function"}function mU(n){return typeof n=="boolean"}function yU(n){return n&&Sc(n.canLoad)}function vU(n){return n&&Sc(n.canActivate)}function _U(n){return n&&Sc(n.canActivateChild)}function wU(n){return n&&Sc(n.canDeactivate)}function EU(n){return n&&Sc(n.canMatch)}function AA(n){return n instanceof jr||n?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function aa(){return Ye(n=>xu(n.map(e=>e.pipe(Ur(1),po(uf)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===uf)return uf;if(t===!1||IU(t))return t}return!0}),Et(e=>e!==uf),Ur(1)))}function IU(n){return No(n)||n instanceof _c}function DU(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(oe(L({},t),{guardsResult:!0})):CU(s,r,i,n).pipe(ct(a=>a&&mU(a)?bU(r,o,n,e):te(a)),re(a=>oe(L({},t),{guardsResult:a})))})}function CU(n,e,t,r){return Ie(n).pipe(ct(i=>xU(i.component,i.route,t,e,r)),gn(i=>i!==!0,!0))}function bU(n,e,t,r){return Ie(e).pipe(vi(i=>Is(SU(i.route.parent,r),TU(i.route,r),MU(n,i.path,t),AU(n,i.route,t))),gn(i=>i!==!0,!0))}function TU(n,e){return n!==null&&e&&e(new s_(n)),te(!0)}function SU(n,e){return n!==null&&e&&e(new i_(n)),te(!0)}function AU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>Cd(()=>{let s=bc(e)??t,a=ua(o,s),u=vU(a)?a.canActivate(e,n):Wn(s,()=>a(e,n));return Oi(u).pipe(gn())}));return te(i).pipe(aa())}function MU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>fU(s)).filter(s=>s!==null).map(s=>Cd(()=>{let a=s.guards.map(u=>{let l=bc(s.node)??t,d=ua(u,l),f=_U(d)?d.canActivateChild(r,n):Wn(l,()=>d(r,n));return Oi(f).pipe(gn())});return te(a).pipe(aa())}));return te(o).pipe(aa())}function xU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let u=bc(e)??i,l=ua(a,u),d=wU(l)?l.canDeactivate(n,e,t,r):Wn(u,()=>l(n,e,t,r));return Oi(d).pipe(gn())});return te(s).pipe(aa())}function RU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=ua(s,n),u=yU(a)?a.canLoad(e,t):Wn(n,()=>a(e,t));return Oi(u)});return te(o).pipe(aa(),MA(r))}function MA(n){return nm(rt(e=>{if(typeof e!="boolean")throw Ef(n,e)}),re(e=>e===!0))}function NU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=ua(s,n),u=EU(a)?a.canMatch(e,t):Wn(n,()=>a(e,t));return Oi(u)});return te(o).pipe(aa(),MA(r))}var wc=class{constructor(e){this.segmentGroup=e||null}},Ec=class extends Error{constructor(e){super(),this.urlTree=e}};function Js(n){return Es(new wc(n))}function PU(n){return Es(new X(4e3,!1))}function OU(n){return Es(TA(!1,Cn.GuardRejected))}var p_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[fe])return PU(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:E,title:S}=i,A=Wn(o,()=>a({params:y,data:E,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:S}));if(A instanceof ei)throw new Ec(A);t=A}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ec(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ei(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},g_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kU(n,e,t,r,i){let o=xA(n,e,t);return o.matched?(r=iU(e,r),NU(r,e,t,i).pipe(re(s=>s===!0?o:L({},g_)))):te(o)}function xA(n,e,t){if(e.path==="**")return FU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},g_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Nj)(t,n,e);if(!i)return L({},g_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function FU(n){return{matched:!0,parameters:n.length>0?cA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rA(n,e,t,r){return t.length>0&&jU(n,t,r)?{segmentGroup:new Pe(e,LU(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&UU(n,t,r)?{segmentGroup:new Pe(n.segments,VU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function VU(n,e,t,r){let i={};for(let o of t)if(bf(n,e,o)&&!r[Jn(o)]){let s=new Pe([],{});i[Jn(o)]=s}return L(L({},r),i)}function LU(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&Jn(r)!==fe){let i=new Pe([],{});t[Jn(r)]=i}return t}function jU(n,e,t){return t.some(r=>bf(n,e,r)&&Jn(r)!==fe)}function UU(n,e,t){return t.some(r=>bf(n,e,r))}function bf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function BU(n,e,t){return e.length===0&&!n.children[t]}var m_=class{};function $U(n,e,t,r,i,o,s="emptyOnly"){return new y_(n,e,t,r,i,s,o).recognize()}var zU=31,y_=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new p_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=rA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new Dn(r,t),o=new wf("",i),s=Zj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ta([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(re(r=>({children:r,rootSnapshot:t})),yi(r=>{if(r instanceof Ec)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(re(s=>s instanceof Dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(vi(s=>{let a=r.children[s],u=oU(t,s);return this.processSegmentGroup(e,u,a,s,i)}),fo((s,a)=>(s.push(...a),s)),_i(null),fm(),ct(s=>{if(s===null)return Js(r);let a=RA(s);return qU(a),te(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(vi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(yi(l=>{if(l instanceof wc)return te(null);throw l}))),gn(u=>!!u),yi(u=>{if(AA(u))return BU(r,i,o)?te(new m_):Js(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Jn(r)!==s&&(s===fe||!bf(i,o,r))?Js(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Js(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=xA(t,i,o);if(!u)return Js(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zU&&(this.allowRedirects=!1));let y=new ta(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,iA(i),Jn(i),i.component??i._loadedComponent??null,i,oA(i)),E=_f(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(E.params),y.data=Object.freeze(E.data);let S=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(ct(A=>this.processSegment(e,r,t,A.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=kU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ye(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,E=new ta(g,f,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,iA(r),Jn(r),r.component??r._loadedComponent??null,r,oA(r)),S=_f(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(S.params),E.data=Object.freeze(S.data);let{segmentGroup:A,slicedSegments:F}=rA(t,g,y,l);if(F.length===0&&A.hasChildren())return this.processChildren(d,l,A,E).pipe(re(j=>new Dn(E,j)));if(l.length===0&&F.length===0)return te(new Dn(E,[]));let $=Jn(r)===o;return this.processSegment(d,l,A,F,$?fe:o,!0,E).pipe(re(j=>new Dn(E,j instanceof Dn?[j]:[])))}))):Js(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):RU(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):OU(t))):te({routes:[],injector:e})}};function qU(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function HU(n){let e=n.value.routeConfig;return e&&e.path===""}function RA(n){let e=[],t=new Set;for(let r of n){if(!HU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=RA(r.children);e.push(new Dn(r.value,i))}return e.filter(r=>!t.has(r))}function iA(n){return n.data||{}}function oA(n){return n.resolve||{}}function GU(n,e,t,r,i,o){return ct(s=>$U(n,e,t,r,s.extractedUrl,i,o).pipe(re(({state:a,tree:u})=>oe(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function WU(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of NA(u))s.add(l);let a=0;return Ie(s).pipe(vi(u=>o.has(u)?KU(u,r,n,e):(u.data=_f(u,u.parent,n).resolve,te(void 0))),rt(()=>a++),Cs(1),ct(u=>a===s.size?te(t):Wt))})}function NA(n){let e=n.children.map(t=>NA(t)).flat();return[n,...e]}function KU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!CA(i)&&(o[Dc]=i.title),QU(o,n,e,r).pipe(re(s=>(n._resolvedData=s,n.data=_f(n,n.parent,t).resolve,null)))}function QU(n,e,t,r){let i=Kv(n);if(i.length===0)return te({});let o={};return Ie(i).pipe(ct(s=>YU(n[s],e,t,r).pipe(gn(),rt(a=>{if(a instanceof _c)throw Ef(new ia,a);o[s]=a}))),Cs(1),dm(o),yi(s=>AA(s)?Wt:Es(s)))}function YU(n,e,t,r){let i=bc(e)??r,o=ua(n,i),s=o.resolve?o.resolve(e,t):Wn(i,()=>o(e,t));return Oi(s)}function Gv(n){return Ye(e=>{let t=n(e);return t?Ie(t).pipe(re(()=>e)):te(e)})}var PA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[Dc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(ZU),providedIn:"root"})}}return n})(),ZU=(()=>{class n extends PA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(z(YS))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ac=new G("",{providedIn:"root",factory:()=>({})}),JU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["ng-component"]],standalone:!0,features:[Me],decls:1,vars:0,template:function(r,i){r&1&&Qn(0,"router-outlet")},dependencies:[w_],encapsulation:2})}}return n})();function E_(n){let e=n.children&&n.children.map(E_),t=e?oe(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=JU),t}var Ic=new G(""),I_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Uh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Oi(t.loadComponent()).pipe(re(OA),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ds(()=>{this.componentLoaders.delete(t)})),i=new ys(r,()=>new Ge).pipe(ms());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=XU(r,this.compiler,t,this.onLoadEndListener).pipe(Ds(()=>{this.childrenLoaders.delete(r)})),s=new ys(o,()=>new Ge).pipe(ms());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XU(n,e,t,r){return Oi(n.loadChildren()).pipe(re(OA),ct(i=>i instanceof zu||Array.isArray(i)?te(i):Ie(e.compileModuleAsync(i))),re(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ic,[],{optional:!0,self:!0}).flat()),{routes:s.map(E_),injector:o}}))}function eB(n){return n&&typeof n=="object"&&"default"in n}function OA(n){return eB(n)?n.default:n}var D_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(tB),providedIn:"root"})}}return n})(),tB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kA=new G(""),FA=new G("");function nB(n,e,t){let r=n.get(FA),i=n.get(en);return n.get(Ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),rB(n))),{onViewTransitionCreated:u}=r;return u&&Wn(n,()=>u({transition:a,from:e,to:t})),s})}function rB(n){return new Promise(e=>{mv({read:()=>setTimeout(e)},{injector:n})})}var iB=new G(""),C_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=P(I_),this.environmentInjector=P(yn),this.urlSerializer=P(Cc),this.rootContexts=P(Tc),this.location=P(Ys),this.inputBindingEnabled=P(Cf,{optional:!0})!==null,this.titleStrategy=P(PA),this.options=P(Ac,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(D_),this.createViewTransition=P(kA,{optional:!0}),this.navigationErrorHandler=P(iB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new n_(i)),r=i=>this.events.next(new r_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new yt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),re(o=>oe(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{let s=!1,a=!1;return te(o).pipe(Ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Cn.SupersededByNewNavigation),Wt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?oe(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Pi(u.id,this.urlSerializer.serialize(u.rawUrl),f,pf.IgnoredSameUrlNavigation)),u.resolve(!1),Wt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Ye(f=>{let g=this.transitions?.getValue();return this.events.next(new oa(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Wt:Promise.resolve(f)}),GU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=oe(L({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new gf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:E,extras:S}=u,A=new oa(f,this.urlSerializer.serialize(g),y,E);this.events.next(A);let F=IA(this.rootComponentType).snapshot;return this.currentTransition=o=oe(L({},u),{targetSnapshot:F,urlAfterRedirects:g,extras:oe(L({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,te(o)}else{let f="";return this.events.next(new Pi(u.id,this.urlSerializer.serialize(u.extractedUrl),f,pf.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Wt}}),rt(u=>{let l=new Jv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),re(u=>(this.currentTransition=o=oe(L({},u),{guards:hU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),DU(this.environmentInjector,u=>this.events.next(u)),rt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ef(this.urlSerializer,u.guardsResult);let l=new Xv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Cn.GuardRejected),!1)),Gv(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(rt(l=>{let d=new e_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ye(l=>{let d=!1;return te(l).pipe(WU(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Cn.NoDataFromResolver)}}))}),rt(l=>{let d=new t_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Gv(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(rt(g=>{d.component=g}),re(()=>{})));for(let g of d.children)f.push(...l(g));return f};return xu(l(u.targetSnapshot.root)).pipe(_i(null),Ur(1))}),Gv(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Ie(d).pipe(re(()=>o)):te(o)}),re(u=>{let l=aU(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=oe(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),rt(()=>{this.events.next(new yc)}),dU(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ur(1),rt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Er(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),gm(this.transitionAbortSubject.pipe(rt(u=>{throw u}))),Ds(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Cn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yi(u=>{if(a=!0,SA(u))this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),lU(u)?this.events.next(new sa(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new mc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=Wn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof _c){let{message:f,cancellationCode:g}=Ef(this.urlSerializer,d);this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new sa(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(u);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Wt}))}))}cancelNavigationTransition(t,r,i){let o=new Xr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oB(n){return n!==fc}var sB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(aB),providedIn:"root"})}}return n})(),v_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},aB=(()=>{class n extends v_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=bo(n)))(i||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:()=>P(uB),providedIn:"root"})}}return n})(),uB=(()=>{class n extends VA{constructor(){super(...arguments),this.location=P(Ys),this.urlSerializer=P(Cc),this.options=P(Ac,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(D_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ei,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof oa)this.stateMemento=this.createStateMemento();else if(t instanceof Pi)this.rawUrlTree=r.initialUrl;else if(t instanceof gf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof yc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Xr&&(t.code===Cn.GuardRejected||t.code===Cn.NoDataFromResolver)?this.restoreHistory(r):t instanceof mc?this.restoreHistory(r,!0):t instanceof Er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ei?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=bo(n)))(i||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(dc||{});function LA(n,e){n.events.pipe(Et(t=>t instanceof Er||t instanceof Xr||t instanceof mc||t instanceof Pi),re(t=>t instanceof Er||t instanceof Pi?dc.COMPLETE:(t instanceof Xr?t.code===Cn.Redirect||t.code===Cn.SupersededByNewNavigation:!1)?dc.REDIRECTING:dc.FAILED),Et(t=>t!==dc.REDIRECTING),Ur(1)).subscribe(()=>{e()})}function cB(n){throw n}var lB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Vh),this.stateManager=P(VA),this.options=P(Ac,{optional:!0})||{},this.pendingTasks=P(To),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(C_),this.urlSerializer=P(Cc),this.location=P(Ys),this.urlHandlingStrategy=P(D_),this._events=new Ge,this.errorHandler=this.options.errorHandler||cB,this.navigated=!1,this.routeReuseStrategy=P(sB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Ic,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Cf,{optional:!0}),this.eventsSubscription=new tt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Xr&&r.code!==Cn.Redirect&&r.code!==Cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Er)this.navigated=!0;else if(r instanceof sa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||oB(i.source)},s);this.scheduleNavigation(a,fc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(E_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=vA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return _A(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=No(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fc,null,r)}navigate(t,r={skipLocationChange:!1}){return hB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},lB):r===!1?i=L({},dB):i=r,No(t))return JS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return JS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return LA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function fB(n){return!(n instanceof yc)&&!(n instanceof sa)}var Tf=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ge,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Er&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(No(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:lT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:No(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ae(tn),Ae(Ir),$y("tabindex"),Ae(So),Ae(Mi),Ae(Zr))}}static{this.\u0275dir=kt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&tc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ri],replaceUrl:[2,"replaceUrl","replaceUrl",Ri],routerLink:"routerLink"},standalone:!0,features:[fv,xn]})}}return n})();var Df=class{};var pB=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Et(t=>t instanceof Er),vi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=kh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ie(i).pipe(mi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(ct(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ie([o,s]).pipe(mi())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(z(tn),z(Uh),z(yn),z(Df),z(I_))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jA=new G(""),gB=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Er?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Pi&&t.code===pf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mf&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mf(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){CT()}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function UA(n,...e){return qs([{provide:Ic,multi:!0,useValue:n},[],{provide:Ir,useFactory:BA,deps:[tn]},{provide:Ao,multi:!0,useFactory:$A},e.map(t=>t.\u0275providers)])}function BA(n){return n.routerState.root}function Mc(n,e){return{\u0275kind:n,\u0275providers:e}}function $A(){let n=P(Mn);return e=>{let t=n.get(vr);if(e!==t.components[0])return;let r=n.get(tn),i=n.get(zA);n.get(b_)===1&&r.initialNavigation(),n.get(qA,null,me.Optional)?.setUpPreloading(),n.get(jA,null,me.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zA=new G("",{factory:()=>new Ge}),b_=new G("",{providedIn:"root",factory:()=>1});function mB(){return Mc(2,[{provide:b_,useValue:0},{provide:Lh,multi:!0,deps:[Mn],useFactory:e=>{let t=e.get(bS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(tn),o=e.get(zA);LA(i,()=>{r(!0)}),e.get(C_).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function yB(){return Mc(3,[{provide:Lh,multi:!0,useFactory:()=>{let e=P(tn);return()=>{e.setUpLocationChangeListener()}}},{provide:b_,useValue:2}])}var qA=new G("");function vB(n){return Mc(0,[{provide:qA,useExisting:pB},{provide:Df,useExisting:n}])}function _B(){return Mc(8,[nA,{provide:Cf,useExisting:nA}])}function wB(n){let e=[{provide:kA,useValue:nB},{provide:FA,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mc(9,e)}var sA=new G("ROUTER_FORROOT_GUARD"),EB=[Ys,{provide:Cc,useClass:ia},tn,Tc,{provide:Ir,useFactory:BA,deps:[tn]},I_,[]],Sf=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[EB,[],{provide:Ic,multi:!0,useValue:t},{provide:sA,useFactory:bB,deps:[[tn,new Gu,new zC]]},{provide:Ac,useValue:r||{}},r?.useHash?DB():CB(),IB(),r?.preloadingStrategy?vB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TB(r):[],r?.bindToComponentInputs?_B().\u0275providers:[],r?.enableViewTransitions?wB().\u0275providers:[],SB()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ic,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(z(sA,8))}}static{this.\u0275mod=ln({type:n})}static{this.\u0275inj=cn({})}}return n})();function IB(){return{provide:jA,useFactory:()=>{let n=P(NS),e=P(Ne),t=P(Ac),r=P(C_),i=P(Cc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gB(i,r,n,e,t)}}}function DB(){return{provide:Zr,useClass:SS}}function CB(){return{provide:Zr,useClass:xv}}function bB(n){return"guarded"}function TB(n){return[n.initialNavigation==="disabled"?yB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?mB().\u0275providers:[]]}var aA=new G("");function SB(){return[{provide:aA,useFactory:$A},{provide:Ao,multi:!0,useExisting:aA}]}var AB="firebase",MB="10.14.1";gi(AB,MB,"app");var Oo=new Hr("ANGULARFIRE2_VERSION");var xB=(n,e)=>{let t=e?[e]:hD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Po=class{constructor(){return xB(RB)}},RB="app-check";function T_(){}var Af=class{zone;delegate;constructor(e,t=sm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},S_=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",T_,{},T_,T_)),t.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Mf=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Af(Zone.current)),this.insideAngular=t.run(()=>new Af(Zone.current,Mu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(z(Ne))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NB(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function hn(n){return PB(NB())(n)}function PB(n){return function(t){return t=t.lift(new S_(n.ngZone)),t.pipe(Un(n.outsideAngular),Sn(n.insideAngular))}}var FB=new Map,VB={activated:!1,tokenObservers:[]},LB={initialized:!1,enabled:!1};function Xn(n){return FB.get(n)||Object.assign({},VB)}function ZA(){return LB}var jB="https://content-firebaseappcheck.googleapis.com/v1";var UB="exchangeDebugToken",WA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},c7=24*60*60*1e3;var M_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Bg,this.pending.promise.catch(t=>{}),yield BB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Bg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function BB(n){return new Promise(e=>{setTimeout(e,n)})}var $B={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ki=new lD("appCheck","AppCheck",$B);function JA(n){if(!Xn(n).activated)throw ki.create("use-before-activation",{appName:n.name})}function XA(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw ki.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ki.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ki.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function eM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${jB}/projects/${t}/apps/${r}:${UB}?key=${i}`,body:{debug_token:e}}}var zB="firebase-app-check-database",qB=1,x_="firebase-app-check-store";var xf=null;function HB(){return xf||(xf=new Promise((n,e)=>{try{let t=indexedDB.open(zB,qB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ki.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(x_,{keyPath:"compositeKey"})}}}catch(t){e(ki.create("storage-open",{originalErrorMessage:t?.message}))}}),xf)}function GB(n,e){return WB(KB(n),e)}function WB(n,e){return N(this,null,function*(){let r=(yield HB()).transaction(x_,"readwrite"),o=r.objectStore(x_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ki.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function KB(n){return`${n.options.appId}-${n.name}`}var R_=new Kl("@firebase/app-check");function A_(n,e){return Wl()?GB(n,e).catch(t=>{R_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function tM(){return ZA().enabled}function nM(){return N(this,null,function*(){let n=ZA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var QB={error:"UNKNOWN_ERROR"};function YB(n){return aD.encodeString(JSON.stringify(n),!1)}function N_(n,e=!1){return N(this,null,function*(){let t=n.app;JA(t);let r=Xn(t),i=r.token,o;if(i&&!xc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(xc(u)?i=u:yield A_(t,void 0))}if(!e&&i&&xc(i))return{token:i.token};let s=!1;if(tM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=XA(eM(t,yield nM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield A_(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Xn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?R_.warn(u.message):R_.error(u),o=u}let a;return i?o?xc(i)?a={token:i.token,internalError:o}:a=QA(o):(a={token:i.token},r.token=i,yield A_(t,i)):a=QA(o),s&&e$(t,a),a})}function ZB(n){return N(this,null,function*(){let e=n.app;JA(e);let{provider:t}=Xn(e);if(tM()){let r=yield nM(),{token:i}=yield XA(eM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function JB(n,e,t,r){let{app:i}=n,o=Xn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),KA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>KA(n))}function rM(n,e){let t=Xn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function KA(n){let{app:e}=n,t=Xn(e),r=t.tokenRefresher;r||(r=XB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XB(n){let{app:e}=n;return new M_(()=>N(this,null,function*(){let t=Xn(e),r;if(t.token?r=yield N_(n,!0):r=yield N_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Xn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},WA.RETRIAL_MIN_WAIT,WA.RETRIAL_MAX_WAIT)}function e$(n,e){let t=Xn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xc(n){return n.expireTimeMillis-Date.now()>0}function QA(n){return{token:YB(QB),error:n}}var P_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Xn(this.app);for(let t of e)rM(this.app,t.next);return Promise.resolve()}};function t$(n,e){return new P_(n,e)}function n$(n){return{getToken:e=>N_(n,e),getLimitedUseToken:()=>ZB(n),addTokenListener:e=>JB(n,"INTERNAL",e),removeTokenListener:e=>rM(n.app,e)}}var r$="@firebase/app-check",i$="0.8.8";var o$="app-check",YA="app-check-internal";function s$(){Du(new uo(o$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return t$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(YA).initialize()})),Du(new uo(YA,n=>{let e=n.getProvider("app-check").getImmediate();return n$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gi(r$,i$)}s$();var a$=["localhost","0.0.0.0","127.0.0.1"],E7=typeof window<"u"&&a$.includes(window.location.hostname);var u$="firebase",c$="10.14.1";Ht.registerVersion(u$,c$,"app-compat");var l$=["ngOnDestroy"],sM=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(l$.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Rf=class{constructor(e){return e}},ca=new G("angularfire2.app.options"),la=new G("angularfire2.app.name");function Rc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ht.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ht.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;d$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rf(s)}var d$=(n,...e)=>{wv()&&typeof console<"u"&&console[n](...e)},h$={provide:Rf,useFactory:Rc,deps:[ca,Ne,[new Gu,la]]},aM=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ca,useValue:t},{provide:la,useValue:r}]}}constructor(t){Ht.registerVersion("angularfire",Oo.full,"core"),Ht.registerVersion("angularfire",Oo.full,"app-compat"),Ht.registerVersion("angular",pS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(z(bt))};static \u0275mod=ln({type:n});static \u0275inj=cn({providers:[h$]})}return n})();function Nf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return f$(i,s)||(oM("error",`${e} was already initialized on the ${t} Firebase App with different settings.${p$?" You may need to reload as Firebase is not HMR aware.":""}`),oM("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function f$(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var p$=typeof module<"u"&&!!module.hot,oM=(n,...e)=>{wv()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var O_=new G("angularfire2.auth.use-emulator"),k_=new G("angularfire2.auth.settings"),F_=new G("angularfire2.auth.tenant-id"),V_=new G("angularfire2.auth.langugage-code"),L_=new G("angularfire2.auth.use-device-language"),j_=new G("angularfire.auth.persistence"),U_=(n,e,t,r,i,o,s,a)=>Nf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),ko=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let E=new Ge,S=te(void 0).pipe(Sn(s.outsideAngular),Ye(()=>o.runOutsideAngular(()=>import("./chunk-SJDVR6DC.js"))),re(()=>Rc(t,o,r)),re(A=>U_(A,o,a,l,d,f,u,g)),Td({bufferSize:1,refCount:!1}));if(Jr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{S.pipe(gn()).subscribe();let A=S.pipe(Ye(j=>j.getRedirectResult().then(Q=>Q,()=>null)),hn,Td({bufferSize:1,refCount:!1})),F=S.pipe(Ye(j=>new ue(Q=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ie=>Q.next(ie),ie=>Q.error(ie),()=>Q.complete()))})))),$=S.pipe(Ye(j=>new ue(Q=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ie=>Q.next(ie),ie=>Q.error(ie),()=>Q.complete()))}))));this.authState=A.pipe(Sd(F),Un(s.outsideAngular),Sn(s.insideAngular)),this.user=A.pipe(Sd($),Un(s.outsideAngular),Sn(s.insideAngular)),this.idToken=this.user.pipe(Ye(j=>j?Ie(j.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Ye(j=>j?Ie(j.getIdTokenResult()):te(null))),this.credential=lm(A,E,this.authState.pipe(Et(j=>!j))).pipe(re(j=>j?.user?j:null),Un(s.outsideAngular),Sn(s.insideAngular))}return sM(this,S,o,{spy:{apply:(A,F,$)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&$.then(j=>E.next(j))}}})}static \u0275fac=function(r){return new(r||n)(z(ca),z(la,8),z(bt),z(Ne),z(Mf),z(O_,8),z(k_,8),z(F_,8),z(V_,8),z(L_,8),z(j_,8),z(Po,8))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),uM=(()=>{class n{constructor(){Ht.registerVersion("angularfire",Oo.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ln({type:n});static \u0275inj=cn({providers:[ko]})}return n})();var cM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lM={};var Fi,B_;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(D,C,T){for(var _=Array(arguments.length-2),Or=2;Or<arguments.length;Or++)_[Or-2]=arguments[Or];return v.prototype[C].apply(D,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var D=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)D[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)D[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],C=I.g[2];var T=I.g[3],_=v+(T^w&(C^T))+D[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+D[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+D[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+D[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+D[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+D[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+D[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+D[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+D[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+D[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+D[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+D[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+D[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+D[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+D[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+D[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+D[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+D[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+D[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+D[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+D[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+D[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+D[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+D[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+D[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+D[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+D[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+D[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+D[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+D[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+D[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+D[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+D[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+D[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+D[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+D[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+D[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+D[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+D[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+D[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+D[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+D[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+D[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+D[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+D[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+D[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+D[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+D[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+D[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+D[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+D[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+D[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+D[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+D[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+D[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+D[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+D[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+D[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+D[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+D[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+D[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+D[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+D[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,D=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(D[C++]=I.charCodeAt(T++),C==this.blockSize){i(this,D),C=0;break}}else for(;T<v;)if(D[C++]=I[T++],C==this.blockSize){i(this,D),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var D=0;32>D;D+=8)I[w++]=this.g[v]>>>D&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],D=!0,C=I.length-1;0<=C;C--){var T=I[C]|0;D&&T==v||(w[C]=T,D=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(l(-I));for(var v=[],w=1,D=0;I>=w;D++)v[D]=I/w|0,w*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return A(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),D=f,C=0;C<I.length;C+=8){var T=Math.min(8,I.length-C),_=parseInt(I.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),D=D.j(T).add(l(_))):(D=D.j(w),D=D.add(l(_)))}return D}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(S(this))return-A(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var D=this.i(w);I+=(0<=D?D:4294967296+D)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(S(this))return"-"+A(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,D="";;){var C=Q(w,v).g;w=F(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,E(w))return T+D;for(;6>T.length;)T="0"+T;D=T+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=F(this,I),S(I)?-1:E(I)?0:1};function A(I){for(var v=I.g.length,w=[],D=0;D<v;D++)w[D]=~I.g[D];return new s(w,~I.h).add(g)}n.abs=function(){return S(this)?A(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0,C=0;C<=v;C++){var T=D+(this.i(C)&65535)+(I.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);D=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(A(v))}n.j=function(I){if(E(this)||E(I))return f;if(S(this))return S(I)?A(this).j(A(I)):A(A(this).j(I));if(S(I))return A(this.j(A(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],D=0;D<2*v;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var C=0;C<I.g.length;C++){var T=this.i(D)>>>16,_=this.i(D)&65535,Or=I.i(C)>>>16,ru=I.i(C)&65535;w[2*D+2*C]+=_*ru,$(w,2*D+2*C),w[2*D+2*C+1]+=T*ru,$(w,2*D+2*C+1),w[2*D+2*C+1]+=_*Or,$(w,2*D+2*C+1),w[2*D+2*C+2]+=T*Or,$(w,2*D+2*C+2)}for(D=0;D<v;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=v;D<2*v;D++)w[D]=0;return new s(w,0)};function $(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function j(I,v){this.g=I,this.h=v}function Q(I,v){if(E(v))throw Error("division by zero");if(E(I))return new j(f,f);if(S(I))return v=Q(A(I),v),new j(A(v.g),A(v.h));if(S(v))return v=Q(I,A(v)),new j(A(v.g),v.h);if(30<I.g.length){if(S(I)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,D=v;0>=D.l(I);)w=ie(w),D=ie(D);var C=ee(w,1),T=ee(D,1);for(D=ee(D,2),w=ee(w,2);!E(D);){var _=T.add(D);0>=_.l(I)&&(C=C.add(w),T=_),D=ee(D,1),w=ee(w,1)}return v=F(I,C.j(v)),new j(C,v)}for(C=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),T=l(w),_=T.j(v);S(_)||0<_.l(I);)w-=D,T=l(w),_=T.j(v);E(T)&&(T=g),C=C.add(T),I=F(I,_)}return new j(C,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)&I.i(D);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)|I.i(D);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)^I.i(D);return new s(w,this.h^I.h)};function ie(I){for(var v=I.g.length+1,w=[],D=0;D<v;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(w,I.h)}function ee(I,v){var w=v>>5;v%=32;for(var D=I.g.length-w,C=[],T=0;T<D;T++)C[T]=0<v?I.i(T+w)>>>v|I.i(T+w+1)<<32-v:I.i(T+w);return new s(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,B_=lM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Fi=lM.Integer=s}).apply(typeof cM<"u"?cM:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ti={};var $_,m$,da,z_,Nc,Of,q_,H_,G_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var x=p++;return{value:h(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(h,b)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function E(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,x){for(var B=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)B[Fe-2]=arguments[Fe];return h.prototype[b].apply(m,B)}}function S(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function A(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,x=m.length||0;c.length=b+x;for(let B=0;B<x;B++)c[b+B]=m[B]}else c.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var ie=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ee(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let x=0;x<w.length;x++)p=w[x],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function C(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=gg;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Or{constructor(){this.h=this.g=null}add(h,p){let m=ru.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var ru=new F(()=>new NP,c=>c.reset());class NP{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let iu,ou=!1,gg=new Or,n0=()=>{let c=a.Promise.resolve(void 0);iu=()=>{c.then(PP)}};var PP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){T(p)}var h=ru;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}ou=!1};function di(){this.s=this.s,this.C=this.C}di.prototype.s=!1,di.prototype.ma=function(){this.s||(this.s=!0,this.N())},di.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var OP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function su(c,h){if(At.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ie){e:{try{Q(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:kP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&su.aa.h.call(this)}}E(su,At);var kP={2:"touch",3:"pen",4:"mouse"};su.prototype.h=function(){su.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var au="closure_listenable_"+(1e6*Math.random()|0),FP=0;function VP(c,h,p,m,b){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++FP,this.da=this.fa=!1}function Ml(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xl(c){this.src=c,this.g={},this.h=0}xl.prototype.add=function(c,h,p,m,b){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var B=yg(c,h,m,b);return-1<B?(h=c[B],p||(h.fa=!1)):(h=new VP(h,this.src,x,!!m,b),h.fa=p,c.push(h)),h};function mg(c,h){var p=h.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,h,void 0),x;(x=0<=b)&&Array.prototype.splice.call(m,b,1),x&&(Ml(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function yg(c,h,p,m){for(var b=0;b<c.length;++b){var x=c[b];if(!x.da&&x.listener==h&&x.capture==!!p&&x.ha==m)return b}return-1}var vg="closure_lm_"+(1e6*Math.random()|0),_g={};function r0(c,h,p,m,b){if(m&&m.once)return o0(c,h,p,m,b);if(Array.isArray(h)){for(var x=0;x<h.length;x++)r0(c,h[x],p,m,b);return null}return p=Dg(p),c&&c[au]?c.K(h,p,l(m)?!!m.capture:!!m,b):i0(c,h,p,!1,m,b)}function i0(c,h,p,m,b,x){if(!h)throw Error("Invalid event type");var B=l(b)?!!b.capture:!!b,Fe=Eg(c);if(Fe||(c[vg]=Fe=new xl(c)),p=Fe.add(h,p,m,B,x),p.proxy)return p;if(m=LP(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)OP||(b=B),b===void 0&&(b=!1),c.addEventListener(h.toString(),m,b);else if(c.attachEvent)c.attachEvent(a0(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function LP(){function c(p){return h.call(c.src,c.listener,p)}let h=jP;return c}function o0(c,h,p,m,b){if(Array.isArray(h)){for(var x=0;x<h.length;x++)o0(c,h[x],p,m,b);return null}return p=Dg(p),c&&c[au]?c.L(h,p,l(m)?!!m.capture:!!m,b):i0(c,h,p,!0,m,b)}function s0(c,h,p,m,b){if(Array.isArray(h))for(var x=0;x<h.length;x++)s0(c,h[x],p,m,b);else m=l(m)?!!m.capture:!!m,p=Dg(p),c&&c[au]?(c=c.i,h=String(h).toString(),h in c.g&&(x=c.g[h],p=yg(x,p,m,b),-1<p&&(Ml(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete c.g[h],c.h--)))):c&&(c=Eg(c))&&(h=c.g[h.toString()],c=-1,h&&(c=yg(h,p,m,b)),(p=-1<c?h[c]:null)&&wg(p))}function wg(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[au])mg(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(a0(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Eg(h))?(mg(p,c),p.h==0&&(p.src=null,h[vg]=null)):Ml(c)}}}function a0(c){return c in _g?_g[c]:_g[c]="on"+c}function jP(c,h){if(c.da)c=!0;else{h=new su(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&wg(c),c=p.call(m,h)}return c}function Eg(c){return c=c[vg],c instanceof xl?c:null}var Ig="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dg(c){return typeof c=="function"?c:(c[Ig]||(c[Ig]=function(h){return c.handleEvent(h)}),c[Ig])}function Mt(){di.call(this),this.i=new xl(this),this.M=this,this.F=null}E(Mt,di),Mt.prototype[au]=!0,Mt.prototype.removeEventListener=function(c,h,p,m){s0(this,c,h,p,m)};function zt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new At(h,c);else if(h instanceof At)h.target=h.target||c;else{var b=h;h=new At(m,c),D(h,b)}if(b=!0,p)for(var x=p.length-1;0<=x;x--){var B=h.g=p[x];b=Rl(B,m,!0,h)&&b}if(B=h.g=c,b=Rl(B,m,!0,h)&&b,b=Rl(B,m,!1,h)&&b,p)for(x=0;x<p.length;x++)B=h.g=p[x],b=Rl(B,m,!1,h)&&b}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Ml(p[m]);delete c.g[h],c.h--}}this.F=null},Mt.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},Mt.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function Rl(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,x=0;x<h.length;++x){var B=h[x];if(B&&!B.da&&B.capture==p){var Fe=B.listener,Ct=B.ha||B.src;B.fa&&mg(c.i,B),b=Fe.call(Ct,m)!==!1&&b}}return b&&!m.defaultPrevented}function u0(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function c0(c){c.g=u0(()=>{c.g=null,c.i&&(c.i=!1,c0(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class UP extends di{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:c0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uu(c){di.call(this),this.h=c,this.g={}}E(uu,di);var l0=[];function d0(c){ee(c.g,function(h,p){this.g.hasOwnProperty(p)&&wg(h)},c),c.g={}}uu.prototype.N=function(){uu.aa.N.call(this),d0(this)},uu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cg=a.JSON.stringify,BP=a.JSON.parse,$P=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function bg(){}bg.prototype.h=null;function h0(c){return c.h||(c.h=c.i())}function f0(){}var cu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tg(){At.call(this,"d")}E(Tg,At);function Sg(){At.call(this,"c")}E(Sg,At);var io={},p0=null;function Nl(){return p0=p0||new Mt}io.La="serverreachability";function g0(c){At.call(this,io.La,c)}E(g0,At);function lu(c){let h=Nl();zt(h,new g0(h))}io.STAT_EVENT="statevent";function m0(c,h){At.call(this,io.STAT_EVENT,c),this.stat=h}E(m0,At);function qt(c){let h=Nl();zt(h,new m0(h,c))}io.Ma="timingevent";function y0(c,h){At.call(this,io.Ma,c),this.size=h}E(y0,At);function du(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function hu(){this.g=!0}hu.prototype.xa=function(){this.g=!1};function zP(c,h,p,m,b,x){c.info(function(){if(c.g)if(x)for(var B="",Fe=x.split("&"),Ct=0;Ct<Fe.length;Ct++){var Te=Fe[Ct].split("=");if(1<Te.length){var xt=Te[0];Te=Te[1];var Rt=xt.split("_");B=2<=Rt.length&&Rt[1]=="type"?B+(xt+"="+Te+"&"):B+(xt+"=redacted&")}}else B=null;else B=x;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+B})}function qP(c,h,p,m,b,x,B){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+x+" "+B})}function us(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+GP(c,p)+(m?" "+m:"")})}function HP(c,h){c.info(function(){return"TIMEOUT: "+h})}hu.prototype.info=function(){};function GP(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var x=b[0];if(x!="noop"&&x!="stop"&&x!="close")for(var B=1;B<b.length;B++)b[B]=""}}}}return Cg(p)}catch{return h}}var Pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ag;function Ol(){}E(Ol,bg),Ol.prototype.g=function(){return new XMLHttpRequest},Ol.prototype.i=function(){return{}},Ag=new Ol;function hi(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new uu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _0}function _0(){this.i=null,this.g="",this.h=!1}var w0={},Mg={};function xg(c,h,p){c.L=1,c.v=Ll(kr(h)),c.m=p,c.P=!0,E0(c,null)}function E0(c,h){c.F=Date.now(),kl(c),c.A=kr(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),k0(p.i,"t",m),c.C=0,p=c.j.J,c.h=new _0,c.g=X0(c.j,p?h:null,!c.m),0<c.O&&(c.M=new UP(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(l0[0]=b.toString()),b=l0);for(var x=0;x<b.length;x++){var B=r0(p,b[x],m||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),lu(),zP(c.i,c.u,c.A,c.l,c.R,c.m)}hi.prototype.ca=function(c){c=c.target;let h=this.M;h&&Fr(c)==3?h.j():this.Y(c)},hi.prototype.Y=function(c){try{if(c==this.g)e:{let Rt=Fr(this.g);var h=this.g.Ba();let ds=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||$0(this.g)))){this.J||Rt!=4||h==7||(h==8||0>=ds?lu(3):lu(2)),Rg(this);var p=this.g.Z();this.X=p;t:if(I0(this)){var m=$0(this.g);c="";var b=m.length,x=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oo(this),fu(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(x&&h==b-1)});m.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,qP(this.i,this.u,this.A,this.l,this.R,Rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Ct=this.g;if((Fe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Fe)){var Te=Fe;break t}}Te=null}if(p=Te)us(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ng(this,p);else{this.o=!1,this.s=3,qt(12),oo(this),fu(this);break e}}if(this.P){p=!0;let Ln;for(;!this.J&&this.C<B.length;)if(Ln=WP(this,B),Ln==Mg){Rt==4&&(this.s=4,qt(14),p=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==w0){this.s=4,qt(15),us(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else us(this.i,this.l,Ln,null),Ng(this,Ln);if(I0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||B.length!=0||this.h.h||(this.s=1,qt(16),p=!1),this.o=this.o&&p,!p)us(this.i,this.l,B,"[Invalid Chunked Response]"),oo(this),fu(this);else if(0<B.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Lg(xt),xt.M=!0,qt(11))}}else us(this.i,this.l,B,null),Ng(this,B);Rt==4&&oo(this),this.o&&!this.J&&(Rt==4?Q0(this.j,this):(this.o=!1,kl(this)))}else l1(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),oo(this),fu(this)}}}catch{}finally{}};function I0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function WP(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?Mg:(p=Number(h.substring(p,m)),isNaN(p)?w0:(m+=1,m+p>h.length?Mg:(h=h.slice(m,m+p),c.C=m+p,h)))}hi.prototype.cancel=function(){this.J=!0,oo(this)};function kl(c){c.S=Date.now()+c.I,D0(c,c.I)}function D0(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=du(g(c.ba,c),h)}function Rg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}hi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(HP(this.i,this.A),this.L!=2&&(lu(),qt(17)),oo(this),this.s=2,fu(this)):D0(this,this.S-c)};function fu(c){c.j.G==0||c.J||Q0(c.j,c)}function oo(c){Rg(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,d0(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Ng(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Pg(p.h,c))){if(!c.K&&Pg(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)zl(p),Bl(p);else break e;Vg(p),qt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=du(g(p.Za,p),6e3));if(1>=T0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ao(p,11)}else if((c.K||p.g==c)&&zl(p),!$(h))for(b=p.Da.g.parse(h),h=0;h<b.length;h++){let Te=b[h];if(p.T=Te[0],Te=Te[1],p.G==2)if(Te[0]=="c"){p.K=Te[1],p.ia=Te[2];let xt=Te[3];xt!=null&&(p.la=xt,p.j.info("VER="+p.la));let Rt=Te[4];Rt!=null&&(p.Aa=Rt,p.j.info("SVER="+p.Aa));let ds=Te[5];ds!=null&&typeof ds=="number"&&0<ds&&(m=1.5*ds,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Ln=c.g;if(Ln){let Hl=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var x=m.h;x.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Og(x,x.h),x.h=null))}if(m.D){let jg=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;jg&&(m.ya=jg,ze(m.I,m.D,jg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var B=c;if(m.qa=J0(m,m.J?m.ia:null,m.W),B.K){S0(m.h,B);var Fe=B,Ct=m.L;Ct&&(Fe.I=Ct),Fe.B&&(Rg(Fe),kl(Fe)),m.g=B}else W0(m);0<p.i.length&&$l(p)}else Te[0]!="stop"&&Te[0]!="close"||ao(p,7);else p.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ao(p,7):Fg(p):Te[0]!="noop"&&p.l&&p.l.ta(Te),p.v=0)}}lu(4)}catch{}}var KP=class{constructor(c,h){this.g=c,this.map=h}};function C0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function b0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function T0(c){return c.h?1:c.g?c.g.size:0}function Pg(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Og(c,h){c.g?c.g.add(h):c.h=h}function S0(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}C0.prototype.cancel=function(){if(this.i=A0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function A0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return S(c.i)}function QP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function YP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function M0(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=YP(c),m=QP(c),b=m.length,x=0;x<b;x++)h.call(void 0,m[x],p&&p[x],c)}var x0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZP(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var x=c[p].substring(0,m);b=c[p].substring(m+1)}else x=c[p];h(x,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function so(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof so){this.h=c.h,Fl(this,c.j),this.o=c.o,this.g=c.g,Vl(this,c.s),this.l=c.l;var h=c.i,p=new mu;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),R0(this,p),this.m=c.m}else c&&(h=String(c).match(x0))?(this.h=!1,Fl(this,h[1]||"",!0),this.o=pu(h[2]||""),this.g=pu(h[3]||"",!0),Vl(this,h[4]),this.l=pu(h[5]||"",!0),R0(this,h[6]||"",!0),this.m=pu(h[7]||"")):(this.h=!1,this.i=new mu(null,this.h))}so.prototype.toString=function(){var c=[],h=this.j;h&&c.push(gu(h,N0,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(gu(h,N0,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(gu(p,p.charAt(0)=="/"?e1:XP,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",gu(p,n1)),c.join("")};function kr(c){return new so(c)}function Fl(c,h,p){c.j=p?pu(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Vl(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function R0(c,h,p){h instanceof mu?(c.i=h,r1(c.i,c.h)):(p||(h=gu(h,t1)),c.i=new mu(h,c.h))}function ze(c,h,p){c.i.set(h,p)}function Ll(c){return ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function pu(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gu(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,JP),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function JP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var N0=/[#\/\?@]/g,XP=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,n1=/#/g;function mu(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function fi(c){c.g||(c.g=new Map,c.h=0,c.i&&ZP(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=mu.prototype,n.add=function(c,h){fi(this),this.i=null,c=cs(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function P0(c,h){fi(c),h=cs(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function O0(c,h){return fi(c),h=cs(c,h),c.g.has(h)}n.forEach=function(c,h){fi(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(h,b,m,this)},this)},this)},n.na=function(){fi(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let b=c[m];for(let x=0;x<b.length;x++)p.push(h[m])}return p},n.V=function(c){fi(this);let h=[];if(typeof c=="string")O0(this,c)&&(h=h.concat(this.g.get(cs(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return fi(this),this.i=null,c=cs(this,c),O0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function k0(c,h,p){P0(c,h),0<p.length&&(c.i=null,c.g.set(cs(c,h),S(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let x=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var b=x;B[m]!==""&&(b+="="+encodeURIComponent(String(B[m]))),c.push(b)}}return this.i=c.join("&")};function cs(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function r1(c,h){h&&!c.j&&(fi(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(P0(this,m),k0(this,b,p))},c)),c.j=h}function i1(c,h){let p=new hu;if(a.Image){let m=new Image;m.onload=y(pi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(pi,p,"TestLoadImage: error",!1,h,m),m.onabort=y(pi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(pi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function o1(c,h){let p=new hu,m=new AbortController,b=setTimeout(()=>{m.abort(),pi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(b),x.ok?pi(p,"TestPingServer: ok",!0,h):pi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),pi(p,"TestPingServer: error",!1,h)})}function pi(c,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function s1(){this.g=new $P}function a1(c,h,p){let m=p||"";try{M0(c,function(b,x){let B=b;l(b)&&(B=Cg(b)),h.push(m+x+"="+encodeURIComponent(B))})}catch(b){throw h.push(m+"type="+encodeURIComponent("_badmap")),b}}function yu(c){this.l=c.Ub||null,this.j=c.eb||!1}E(yu,bg),yu.prototype.g=function(){return new jl(this.l,this.j)},yu.prototype.i=function(c){return function(){return c}}({});function jl(c,h){Mt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(jl,Mt),n=jl.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,_u(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_u(this)),this.g&&(this.readyState=3,_u(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;F0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function F0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?vu(this):_u(this),this.readyState==3&&F0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,vu(this))},n.Qa=function(c){this.g&&(this.response=c,vu(this))},n.ga=function(){this.g&&vu(this)};function vu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_u(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function _u(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function V0(c){let h="";return ee(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function kg(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=V0(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ze(c,h,p))}function et(c){Mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(et,Mt);var u1=/^https?$/i,c1=["POST","PUT"];n=et.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ag.g(),this.v=this.o?h0(this.o):h0(Ag),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(x){L0(this,x);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())p.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(c1,h,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,B]of p)this.g.setRequestHeader(x,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{B0(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){L0(this,x)}};function L0(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,j0(c),Ul(c)}function j0(c){c.A||(c.A=!0,zt(c,"complete"),zt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,zt(this,"complete"),zt(this,"abort"),Ul(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?U0(this):this.bb())},n.bb=function(){U0(this)};function U0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Fr(c)!=4||c.Z()!=2)){if(c.u&&Fr(c)==4)u0(c.Ea,0,c);else if(zt(c,"readystatechange"),Fr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=B===0){var b=String(c.D).match(x0)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!u1.test(b?b.toLowerCase():"")}p=m}if(p)zt(c,"complete"),zt(c,"success");else{c.m=6;try{var x=2<Fr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",j0(c)}}finally{Ul(c)}}}}function Ul(c,h){if(c.g){B0(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||zt(c,"ready");try{p.onreadystatechange=m}catch{}}}function B0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Fr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),BP(h)}};function $0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function l1(c){let h={};c=(c.g&&2<=Fr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var p=C(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=h[b]||[];h[b]=x,x.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wu(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function z0(c){this.Aa=0,this.i=[],this.j=new hu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wu("baseRetryDelayMs",5e3,c),this.cb=wu("retryDelaySeedMs",1e4,c),this.Wa=wu("forwardChannelMaxRetries",2,c),this.wa=wu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new C0(c&&c.concurrentRequestLimit),this.Da=new s1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=z0.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){qt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=J0(this,null,this.W),$l(this)};function Fg(c){if(q0(c),c.G==3){var h=c.U++,p=kr(c.I);if(ze(p,"SID",c.K),ze(p,"RID",h),ze(p,"TYPE","terminate"),Eu(c,p),h=new hi(c,c.j,h),h.L=2,h.v=Ll(kr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=X0(h.j,null),h.g.ea(h.v)),h.F=Date.now(),kl(h)}Z0(c)}function Bl(c){c.g&&(Lg(c),c.g.cancel(),c.g=null)}function q0(c){Bl(c),c.u&&(a.clearTimeout(c.u),c.u=null),zl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function $l(c){if(!b0(c.h)&&!c.s){c.s=!0;var h=c.Ga;iu||n0(),ou||(iu(),ou=!0),gg.add(h,c),c.B=0}}function d1(c,h){return T0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=du(g(c.Ga,c,h),Y0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new hi(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),D(x,this.S)):x=this.S),this.m!==null||this.O||(b.H=x,x=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=G0(this,b,h),p=kr(this.I),ze(p,"RID",c),ze(p,"CVER",22),this.D&&ze(p,"X-HTTP-Session-Id",this.D),Eu(this,p),x&&(this.O?h="headers="+encodeURIComponent(String(V0(x)))+"&"+h:this.m&&kg(p,this.m,x)),Og(this.h,b),this.Ua&&ze(p,"TYPE","init"),this.P?(ze(p,"$req",h),ze(p,"SID","null"),b.T=!0,xg(b,p,null)):xg(b,p,h),this.G=2}}else this.G==3&&(c?H0(this,c):this.i.length==0||b0(this.h)||H0(this))};function H0(c,h){var p;h?p=h.l:p=c.U++;let m=kr(c.I);ze(m,"SID",c.K),ze(m,"RID",p),ze(m,"AID",c.T),Eu(c,m),c.m&&c.o&&kg(m,c.m,c.o),p=new hi(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=G0(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Og(c.h,p),xg(p,m,h)}function Eu(c,h){c.H&&ee(c.H,function(p,m){ze(h,m,p)}),c.l&&M0({},function(p,m){ze(h,m,p)})}function G0(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let x=-1;for(;;){let B=["count="+p];x==-1?0<p?(x=b[0].g,B.push("ofs="+x)):x=0:B.push("ofs="+x);let Fe=!0;for(let Ct=0;Ct<p;Ct++){let Te=b[Ct].g,xt=b[Ct].map;if(Te-=x,0>Te)x=Math.max(0,b[Ct].g-100),Fe=!1;else try{a1(xt,B,"req"+Te+"_")}catch{m&&m(xt)}}if(Fe){m=B.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function W0(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;iu||n0(),ou||(iu(),ou=!0),gg.add(h,c),c.v=0}}function Vg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=du(g(c.Fa,c),Y0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,K0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=du(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Bl(this),K0(this))};function Lg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function K0(c){c.g=new hi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=kr(c.qa);ze(h,"RID","rpc"),ze(h,"SID",c.K),ze(h,"AID",c.T),ze(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&ze(h,"TO",c.ja),ze(h,"TYPE","xmlhttp"),Eu(c,h),c.m&&c.o&&kg(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Ll(kr(h)),p.m=null,p.P=!0,E0(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Bl(this),Vg(this),qt(19))};function zl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Q0(c,h){var p=null;if(c.g==h){zl(c),Lg(c),c.g=null;var m=2}else if(Pg(c.h,h))p=h.D,S0(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var b=c.B;m=Nl(),zt(m,new y0(m,p)),$l(c)}else W0(c);else if(b=h.s,b==3||b==0&&0<h.X||!(m==1&&d1(c,h)||m==2&&Vg(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),b){case 1:ao(c,5);break;case 4:ao(c,10);break;case 3:ao(c,6);break;default:ao(c,2)}}}function Y0(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function ao(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new so(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fl(m,"https"),Ll(m),b?i1(m.toString(),p):o1(m.toString(),p)}else qt(2);c.G=0,c.l&&c.l.sa(h),Z0(c),q0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Z0(c){if(c.G=0,c.ka=[],c.l){let h=A0(c.h);(h.length!=0||c.i.length!=0)&&(A(c.ka,h),A(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function J0(c,h,p){var m=p instanceof so?kr(p):new so(p);if(m.g!="")h&&(m.g=h+"."+m.g),Vl(m,m.s);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var x=new so(null);m&&Fl(x,m),h&&(x.g=h),b&&Vl(x,b),p&&(x.l=p),m=x}return p=c.D,h=c.ya,p&&h&&ze(m,p,h),ze(m,"VER",c.la),Eu(c,m),m}function X0(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new et(new yu({eb:p})):new et(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eD(){}n=eD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ql(){}ql.prototype.g=function(c,h){return new pn(c,h)};function pn(c,h){Mt.call(this),this.g=new z0(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!$(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new ls(this)}E(pn,Mt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Fg(this.g)},pn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Cg(c),c=p);h.i.push(new KP(h.Ya++,c)),h.G==3&&$l(h)},pn.prototype.N=function(){this.g.l=null,delete this.j,Fg(this.g),delete this.g,pn.aa.N.call(this)};function tD(c){Tg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}E(tD,Tg);function nD(){Sg.call(this),this.status=1}E(nD,Sg);function ls(c){this.g=c}E(ls,eD),ls.prototype.ua=function(){zt(this.g,"a")},ls.prototype.ta=function(c){zt(this.g,new tD(c))},ls.prototype.sa=function(c){zt(this.g,new nD)},ls.prototype.ra=function(){zt(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,G_=ti.createWebChannelTransport=function(){return new ql},H_=ti.getStatEventTarget=function(){return Nl()},q_=ti.Event=io,Of=ti.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pl.NO_ERROR=0,Pl.TIMEOUT=8,Pl.HTTP_ERROR=6,Nc=ti.ErrorCode=Pl,v0.COMPLETE="complete",z_=ti.EventType=v0,f0.EventType=cu,cu.OPEN="a",cu.CLOSE="b",cu.ERROR="c",cu.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,da=ti.WebChannel=f0,m$=ti.FetchXmlHttpFactory=yu,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,$_=ti.XhrIo=et}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});var dM="@firebase/firestore";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var $a="10.14.0";var zi=new Kl("@firebase/firestore");function ma(){return zi.logLevel}function px(n){zi.setLogLevel(n)}function k(n,...e){if(zi.logLevel<=or.DEBUG){let t=e.map(ZE);zi.debug(`Firestore (${$a}): ${n}`,...t)}}function ot(n,...e){if(zi.logLevel<=or.ERROR){let t=e.map(ZE);zi.error(`Firestore (${$a}): ${n}`,...t)}}function er(n,...e){if(zi.logLevel<=or.WARN){let t=e.map(ZE);zi.warn(`Firestore (${$a}): ${n}`,...t)}}function ZE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+n;throw ot(e),new Error(e)}function Z(n,e){n||K()}function gx(n,e){n||K()}function q(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends cD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _t=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},J_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},X_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ew=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new _t;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _t,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _t)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new qf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new pt(e)}},tw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},nw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new tw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new rw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function y$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Hf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=y$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function ba(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mx(n){return n+"\0"}var Je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Je(0,0))}static max(){return new n(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ce=class n extends Gf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},v$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends Gf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return v$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};var Ta=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ow(n){return n.fields.find(e=>e.kind===2)}function Vo(n){return n.fields.filter(e=>e.kind!==2)}Ta.UNKNOWN_ID=-1;var Ia=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var qc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Fn.min())}};function yx(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new Fn(i,H.empty(),e)}function vx(n){return new Fn(n.readTime,n.key,-1)}var Fn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),H.empty(),-1)}static max(){return new n(ne.max(),H.empty(),-1)}};function JE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var _x="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==_x)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Kf=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new _t,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=XE(r.target.error);this.V.reject(new zo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new zo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new aw(t)}},qi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Iu())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Lo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wl())return!1;if(n.v())return!0;let e=Iu(),t=n.S(e),r=0<t&&t<10,i=wx(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new zo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new zo(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Kf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function wx(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var sw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Lo(this.B.delete())}},zo=class extends O{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function eo(n){return n.name==="IndexedDbTransactionError"}var aw=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lo(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Lo(this.store.add(e))}get(e){return Lo(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Lo(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Lo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=XE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new sw(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let d=l.catch(f=>(u.done(),M.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Lo(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=XE(r.target.error);t(i)}})}var hM=!1;function XE(n){let e=qi.S(Iu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hM||(hM=!0,setTimeout(()=>{throw r},0)),r}}return n}var uw=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){eo(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Xi(t)}yield this.X(6e4)}))}},cw=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=vx(o);JE(s,r)>0&&(r=s)}),new Fn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var bn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function dl(n){return n==null}function Hc(n){return n===0&&1/n==-1/0}function Ex(n){return typeof n=="number"&&Number.isInteger(n)&&!Hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function nn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fM(e)),e=_$(n.get(t),e);return fM(e)}function _$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function fM(n){return n+""}function Dr(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),Ce.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Ce(r)}var pM=["userId","batchId"];function jf(n,e){return[n,nn(e)]}function Ix(n,e,t){return[n,nn(e),t]}var w$={},E$=["prefixPath","collectionGroup","readTime","documentId"],I$=["prefixPath","collectionGroup","documentId"],D$=["collectionGroup","readTime","prefixPath","documentId"],C$=["canonicalId","targetId"],b$=["targetId","path"],T$=["path","targetId"],S$=["collectionId","parent"],A$=["indexId","uid"],M$=["uid","sequenceNumber"],x$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R$=["indexId","uid","orderedDocumentKey"],N$=["userId","collectionPath","documentId"],P$=["userId","collectionPath","largestBatchId"],O$=["userId","collectionGroup","largestBatchId"],Dx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k$=[...Dx,"documentOverlays"],Cx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bx=Cx,eI=[...bx,"indexConfiguration","indexState","indexEntries"],F$=eI,V$=[...eI,"globals"];var Gc=class extends Wf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function wt(n,e){let t=q(n);return qi.F(t._e,e)}function gM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ts(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ea(this.root,e,this.comparator,!0)}},Ea=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},br=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};br.EMPTY=null,br.RED=!0,br.BLACK=!1;br.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qf(this.data.getIterator())}getIteratorFrom(e){return new Qf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Qf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ha(n){return n.hasNext()?n.getNext():void 0}var Tn=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new je(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Yf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Sx(){return typeof atob<"u"}var ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var L$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(n){if(Z(!!n),typeof n=="string"){let e=0,t=L$.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(n.seconds),nanos:Ke(n.nanos)}}function Ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hi(n){return typeof n=="string"?ut.fromBase64String(n):ut.fromUint8Array(n)}function Bp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function tI(n){let e=n.mapValue.fields.__previous_value__;return Bp(e)?tI(e):e}function Wc(n){let e=ii(n.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var lw=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Gi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uf={nullValue:"NULL_VALUE"};function qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bp(n)?4:Ax(n)?9007199254740991:$p(n)?10:11:K()}function Ar(n,e){if(n===e)return!0;let t=qo(n);if(t!==qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wc(n).isEqual(Wc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ii(i.timestampValue),a=ii(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Hi(i.bytesValue).isEqual(Hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ke(i.geoPointValue.latitude)===Ke(o.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ke(i.integerValue)===Ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ke(i.doubleValue),a=Ke(o.doubleValue);return s===a?Hc(s)===Hc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ba(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(gM(s)!==gM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ar(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function Kc(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function Wi(n,e){if(n===e)return 0;let t=qo(n),r=qo(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ke(o.integerValue||o.doubleValue),u=Ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return mM(n.timestampValue,e.timestampValue);case 4:return mM(Wc(n),Wc(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Hi(o),u=Hi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=le(a[l],u[l]);if(d!==0)return d}return le(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=le(Ke(o.latitude),Ke(s.latitude));return a!==0?a:le(Ke(o.longitude),Ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return yM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=le(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:yM(y,E)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Bi.mapValue&&s===Bi.mapValue)return 0;if(o===Bi.mapValue)return 1;if(s===Bi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=le(u[f],d[f]);if(g!==0)return g;let y=Wi(a[u[f]],l[d[f]]);if(y!==0)return y}return le(u.length,d.length)}(n.mapValue,e.mapValue);default:throw K()}}function mM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=ii(n),r=ii(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function yM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Wi(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function Sa(n){return dw(n)}function dw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ii(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=dw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${dw(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function Ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hw(n){return!!n&&"integerValue"in n}function Qc(n){return!!n&&"arrayValue"in n}function vM(n){return!!n&&"nullValue"in n}function _M(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bf(n){return!!n&&"mapValue"in n}function $p(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function jc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ts(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ax(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Mx={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function j$(n){return"nullValue"in n?Uf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ho(Gi.empty(),H.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$p(n)?Mx:{mapValue:{}}:K()}function U$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ho(Gi.empty(),H.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Mx:"mapValue"in n?$p(n)?{mapValue:{}}:Bi:K()}function wM(n,e){let t=Wi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EM(n,e){let t=Wi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Bt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=jc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ts(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(jc(this.value))}};function xx(n){let e=[];return ts(n.fields,(t,r)=>{let i=new st([t]);if(Bf(r)){let o=xx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Tn(e)}var gt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Bt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mr=class{constructor(e,t){this.position=e,this.inclusive=t}};function IM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=Wi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function DM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}var Go=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function B$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zf=class{},we=class n extends Zf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gw(e,t,r):t==="array-contains"?new vw(e,r):t==="in"?new Jf(e,r):t==="not-in"?new _w(e,r):t==="array-contains-any"?new ww(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mw(e,r):new yw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wi(t,this.value)):t!==null&&qo(this.value)===qo(t)&&this.matchesComparison(Wi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ke=class n extends Zf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Aa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Aa(n){return n.op==="and"}function fw(n){return n.op==="or"}function nI(n){return Rx(n)&&Aa(n)}function Rx(n){for(let e of n.filters)if(e instanceof ke)return!1;return!0}function pw(n){if(n instanceof we)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(nI(n))return n.filters.map(e=>pw(e)).join(",");{let e=n.filters.map(t=>pw(t)).join(",");return`${n.op}(${e})`}}function Nx(n,e){return n instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)}(n,e):n instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Nx(s,i.filters[a]),!0):!1}(n,e):void K()}function Px(n,e){let t=n.filters.concat(e);return ke.create(t,n.op)}function Ox(n){return n instanceof we?function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`}(n):n instanceof ke?function(t){return t.op.toString()+" {"+t.getFilters().map(Ox).join(" ,")+"}"}(n):"Filter"}var gw=class extends we{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},mw=class extends we{constructor(e,t){super(e,"in",t),this.keys=kx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},yw=class extends we{constructor(e,t){super(e,"not-in",t),this.keys=kx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var vw=class extends we{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Qc(t)&&Kc(t.arrayValue,this.value)}},Jf=class extends we{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Kc(this.value.arrayValue,t)}},_w=class extends we{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Kc(this.value.arrayValue,t)}},ww=class extends we{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Qc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}};var Ew=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Iw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Ew(n,e,t,r,i,o,s)}function Wo(n){let e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),dl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sa(r)).join(",")),e.ue=t}return e.ue}function hl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Nx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DM(n.startAt,e.startAt)&&DM(n.endAt,e.endAt)}function Xf(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ep(n,e){return n.filters.filter(t=>t instanceof we&&t.field.isEqual(e))}function CM(n,e,t){let r=Uf,i=!0;for(let o of ep(n,e)){let s=Uf,a=!0;switch(o.op){case"<":case"<=":s=j$(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Uf}wM({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];wM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function bM(n,e,t){let r=Bi,i=!0;for(let o of ep(n,e)){let s=Bi,a=!0;switch(o.op){case">=":case">":s=U$(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Bi}EM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];EM({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var tr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Fx(n,e,t,r,i,o,s,a){return new tr(n,e,t,r,i,o,s,a)}function za(n){return new tr(n)}function TM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rI(n){return n.collectionGroup!==null}function Da(n){let e=q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new je(st.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Go(o,r))}),t.has(st.keyField().canonicalString())||e.ce.push(new Go(st.keyField(),r))}return e.ce}function rn(n){let e=q(n);return e.le||(e.le=$$(e,Da(n))),e.le}function $$(n,e){if(n.limitType==="F")return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Go(i.field,o)});let t=n.endAt?new Mr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Mr(n.startAt.position,n.startAt.inclusive):null;return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dw(n,e){let t=n.filters.concat([e]);return new tr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tp(n,e,t){return new tr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fl(n,e){return hl(rn(n),rn(e))&&n.limitType===e.limitType}function Vx(n){return`${Wo(rn(n))}|lt:${n.limitType}`}function ya(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ox(i)).join(", ")}]`),dl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sa(i)).join(",")),`Target(${r})`}(rn(n))}; limitType=${n.limitType})`}function pl(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Da(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=IM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Da(r),i)||r.endAt&&!function(s,a,u){let l=IM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Da(r),i))}(n,e)}function Lx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jx(n){return(e,t)=>{let r=!1;for(let i of Da(n)){let o=z$(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function z$(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Wi(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var xr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Tx(this.inner)}size(){return this.innerSize}};var q$=new He(H.comparator);function fn(){return q$}var Ux=new He(H.comparator);function Vc(...n){let e=Ux;for(let t of n)e=e.insert(t.key,t);return e}function Bx(n){let e=Ux;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cr(){return Uc()}function $x(){return Uc()}function Uc(){return new xr(n=>n.toString(),(n,e)=>n.isEqual(e))}var H$=new He(H.comparator),G$=new je(H.comparator);function he(...n){let e=G$;for(let t of n)e=e.add(t);return e}var W$=new je(le);function iI(){return W$}function oI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function zx(n){return{integerValue:""+n}}function qx(n,e){return Ex(e)?zx(e):oI(n,e)}var Ma=class{constructor(){this._=void 0}};function K$(n,e,t){return n instanceof Ki?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Bp(o)&&(o=tI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof oi?Gx(n,e):n instanceof si?Wx(n,e):function(i,o){let s=Hx(i,o),a=SM(s)+SM(i.Pe);return hw(s)&&hw(i.Pe)?zx(a):oI(i.serializer,a)}(n,e)}function Q$(n,e,t){return n instanceof oi?Gx(n,e):n instanceof si?Wx(n,e):t}function Hx(n,e){return n instanceof Qi?function(r){return hw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ki=class extends Ma{},oi=class extends Ma{constructor(e){super(),this.elements=e}};function Gx(n,e){let t=Kx(e);for(let r of n.elements)t.some(i=>Ar(i,r))||t.push(r);return{arrayValue:{values:t}}}var si=class extends Ma{constructor(e){super(),this.elements=e}};function Wx(n,e){let t=Kx(e);for(let r of n.elements)t=t.filter(i=>!Ar(i,r));return{arrayValue:{values:t}}}var Qi=class extends Ma{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function SM(n){return Ke(n.integerValue||n.doubleValue)}function Kx(n){return Qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ko=class{constructor(e,t){this.field=e,this.transform=t}};function Y$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof oi&&i instanceof oi||r instanceof si&&i instanceof si?ba(r.elements,i.elements,Ar):r instanceof Qi&&i instanceof Qi?Ar(r.Pe,i.Pe):r instanceof Ki&&i instanceof Ki}(n.transform,e.transform)}var Cw=class{constructor(e,t){this.version=e,this.transformResults=t}},nt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $f(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xa=class{};function Qx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zi(n.key,nt.none()):new Yi(n.key,n.data,nt.none());{let t=n.data,r=Bt.empty(),i=new je(st.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new nr(n.key,r,new Tn(i.toArray()),nt.none())}}function Z$(n,e,t){n instanceof Yi?function(i,o,s){let a=i.value.clone(),u=MM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof nr?function(i,o,s){if(!$f(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Yx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Bc(n,e,t,r){return n instanceof Yi?function(o,s,a,u){if(!$f(o.precondition,s))return a;let l=o.value.clone(),d=xM(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof nr?function(o,s,a,u){if(!$f(o.precondition,s))return a;let l=xM(o.fieldTransforms,u,s),d=s.data;return d.setAll(Yx(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return $f(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function J$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Hx(r.transform,i||null);o!=null&&(t===null&&(t=Bt.empty()),t.set(r.field,o))}return t||null}function AM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ba(r,i,(o,s)=>Y$(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yi=class extends xa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},nr=class extends xa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Yx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MM(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Q$(s,a,t[i]))}return r}function xM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,K$(o,s,e))}return r}var Zi=class extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yc=class extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Z$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Bc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$x();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=Qx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(t,r)=>AM(t,r))&&ba(this.baseMutations,e.baseMutations,(t,r)=>AM(t,r))}},bw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return H$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Jc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ht,De;function Zx(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Jx(n){if(n===void 0)return ot("GRPC error has no .code"),R.UNKNOWN;switch(n){case ht.OK:return R.OK;case ht.CANCELLED:return R.CANCELLED;case ht.UNKNOWN:return R.UNKNOWN;case ht.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ht.INTERNAL:return R.INTERNAL;case ht.UNAVAILABLE:return R.UNAVAILABLE;case ht.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ht.NOT_FOUND:return R.NOT_FOUND;case ht.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ht.ABORTED:return R.ABORTED;case ht.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ht.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(De=ht||(ht={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var RM=null;function Xx(){return new TextEncoder}var X$=new Fi([4294967295,4294967295],0);function NM(n){let e=Xx().encode(n),t=new B_;return t.update(e),new Uint8Array(t.digest())}function PM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fi([t,r],0),new Fi([i,o],0)]}var Sw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $o(`Invalid padding: ${t}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $o(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fi.fromNumber(r)));return i.compare(X$)===1&&(i=new Fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=NM(e),[r,i]=PM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=NM(e),[r,i]=PM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$o=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new He(le),fn(),he())}},el=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var Ca=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},np=class{constructor(e,t){this.targetId=e,this.me=t}},rp=class{constructor(e,t,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ip=class{constructor(){this.fe=0,this.ge=kM(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),t=he(),r=he();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new el(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=kM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Aw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=fn(),this.qe=OM(),this.Qe=new He(le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Xf(o))if(r===0){let s=new H(o.path);this.Ue(t,s,gt.newNoDocument(s,ne.min()))}else Z(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}RM?.et(function(d,f,g,y,E){var S,A,F,$,j,Q;let ie={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ee=f.unchangedNames;return ee&&(ie.bloomFilter={applied:E===0,hashCount:(S=ee?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:($=(F=(A=ee?.bits)===null||A===void 0?void 0:A.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(Q=(j=ee?.bits)===null||j===void 0?void 0:j.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ie}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hi(r).toUint8Array()}catch(u){if(u instanceof Yf)return er("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Sw(s,i,o)}catch(u){return er(u instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Xf(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,gt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=he();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Xc(e,t,this.Qe,this.ke,r);return this.ke=fn(),this.qe=OM(),this.Qe=new He(le),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ip,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new je(le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ip),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function OM(){return new He(H.comparator)}function kM(){return new He(H.comparator)}var e4={asc:"ASCENDING",desc:"DESCENDING"},t4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n4={and:"AND",or:"OR"},Mw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xw(n,e){return n.useProto3Json||dl(e)?e:{value:e}}function Ra(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r4(n,e){return Ra(n,e.toTimestamp())}function at(n){return Z(!!n),ne.fromTimestamp(function(t){let r=ii(t);return new Je(r.seconds,r.nanos)}(n))}function sI(n,e){return Rw(n,e).canonicalString()}function Rw(n,e){let t=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function tR(n){let e=Ce.fromString(n);return Z(dR(e)),e}function tl(n,e){return sI(n.databaseId,e.path)}function Tr(n,e){let t=tR(e);if(t.get(1)!==n.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(iR(t))}function nR(n,e){return sI(n.databaseId,e)}function rR(n){let e=tR(n);return e.length===4?Ce.emptyPath():iR(e)}function Nw(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iR(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function FM(n,e,t){return{name:tl(n,e),fields:t.value.mapValue.fields}}function oR(n,e,t){let r=Tr(n,e.name),i=at(e.updateTime),o=e.createTime?at(e.createTime):ne.min(),s=new Bt({mapValue:{fields:e.fields}}),a=gt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function i4(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let o=Tr(r,i.found.name),s=at(i.found.updateTime),a=i.found.createTime?at(i.found.createTime):ne.min(),u=new Bt({mapValue:{fields:i.found.fields}});return gt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let o=Tr(r,i.missing),s=at(i.readTime);return gt.newNoDocument(o,s)}(n,e):K()}function o4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Z(d===void 0||typeof d=="string"),ut.fromBase64String(d||"")):(Z(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ut.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:Jx(l.code);return new O(d,l.message||"")}(s);t=new rp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Tr(n,r.document.name),o=at(r.document.updateTime),s=r.document.createTime?at(r.document.createTime):ne.min(),a=new Bt({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ca(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Tr(n,r.document),o=r.readTime?at(r.readTime):ne.min(),s=gt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ca([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Tr(n,r.document),o=r.removedTargetIds||[];t=new Ca([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Tw(i,o),a=r.targetId;t=new np(a,s)}}return t}function nl(n,e){let t;if(e instanceof Yi)t={update:FM(n,e.key,e.value)};else if(e instanceof Zi)t={delete:tl(n,e.key)};else if(e instanceof nr)t={update:FM(n,e.key,e.data),updateMask:d4(e.fieldMask)};else{if(!(e instanceof Yc))return K();t={verify:tl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ki)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof si)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:r4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function Pw(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?nt.updateTime(at(o.updateTime)):o.exists!==void 0?nt.exists(o.exists):nt.none()}(e.currentDocument):nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),u=new Ki;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new oi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new si(d)}else"increment"in a?u=new Qi(s,a.increment):K();let l=st.fromServerFormat(a.fieldPath);return new Ko(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Tr(n,e.update.name),o=new Bt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Tn(l.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new nr(i,o,s,t,r)}return new Yi(i,o,t,r)}if(e.delete){let i=Tr(n,e.delete);return new Zi(i,t)}if(e.verify){let i=Tr(n,e.verify);return new Yc(i,t)}return K()}function s4(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?at(i.updateTime):at(o);return s.isEqual(ne.min())&&(s=at(o)),new Cw(s,i.transformResults||[])}(t,e))):[]}function sR(n,e){return{documents:[nR(n,e.path)]}}function aR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nR(n,i);let o=function(l){if(l.length!==0)return lR(ke.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:va(g.field),direction:u4(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=xw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function uR(n){let e=rR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=cR(f);return g instanceof ke&&nI(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(E){return new Go(_a(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,dl(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Mr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Mr(y,g)}(t.endAt)),Fx(e,i,s,o,a,"F",u,l)}function a4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cR(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=_a(t.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_a(t.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_a(t.unaryFilter.field);return we.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_a(t.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return we.create(_a(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ke.create(t.compositeFilter.filters.map(r=>cR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function u4(n){return e4[n]}function c4(n){return t4[n]}function l4(n){return n4[n]}function va(n){return{fieldPath:n.canonicalString()}}function _a(n){return st.fromServerFormat(n.fieldPath)}function lR(n){return n instanceof we?function(t){if(t.op==="=="){if(_M(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NAN"}};if(vM(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_M(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NAN"}};if(vM(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(t.field),op:c4(t.op),value:t.value}}}(n):n instanceof ke?function(t){let r=t.getFilters().map(i=>lR(i));return r.length===1?r[0]:{compositeFilter:{op:l4(t.op),filters:r}}}(n):K()}function d4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Na=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var op=class{constructor(e){this.ct=e}};function h4(n,e){let t;if(e.document)t=oR(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=H.fromSegments(e.noDocument.path),i=Yo(e.noDocument.readTime);t=gt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=H.fromSegments(e.unknownDocument.path),i=Yo(e.unknownDocument.version);t=gt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Je(i[0],i[1]);return ne.fromTimestamp(o)}(e.readTime)),t}function VM(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:tl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ra(o,s.version.toTimestamp()),createTime:Ra(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Qo(e.version)}}return r}function sp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yo(n){let e=new Je(n.seconds,n.nanoseconds);return ne.fromTimestamp(e)}function jo(n,e){let t=(e.baseMutations||[]).map(o=>Pw(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Pw(n.ct,o)),i=Je.fromMillis(e.localWriteTimeMs);return new Zc(e.batchId,i,t,r)}function Lc(n){let e=Yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yo(n.lastLimboFreeSnapshotVersion):ne.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Z(o.documents.length===1),rn(za(rR(o.documents[0])))}(n.query):function(o){return rn(uR(o))}(n.query),new Na(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ut.fromBase64String(n.resumeToken))}function hR(n,e){let t=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion),i;i=Xf(e.target)?sR(n.ct,e.target):aR(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function aI(n){let e=uR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tp(e,e.limit,"L"):e}function W_(n,e){return new Jc(e.largestBatchId,Pw(n.ct,e.overlayMutation))}function LM(n,e){let t=e.path.lastSegment();return[n,nn(e.path.popLast()),t]}function jM(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qo(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ow=class{getBundleMetadata(e,t){return UM(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Yo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return UM(e).put(function(i){return{bundleId:i.id,createTime:Qo(at(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return BM(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:aI(o.bundledQuery),readTime:Yo(o.readTime)}}(r)})}saveNamedQuery(e,t){return BM(e).put(function(i){return{name:i.name,readTime:Qo(at(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function UM(n){return wt(n,"bundles")}function BM(n){return wt(n,"namedQueries")}var ap=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Pc(e).get(LM(this.userId,t)).next(r=>r?W_(this.serializer,r):null)}getOverlays(e,t){let r=Cr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Jc(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(nn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Pc(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Cr(),o=nn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Pc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=W_(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Cr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=W_(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Pc(e).put(function(i,o,s){let[a,u,l]=LM(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:nl(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Pc(n){return wt(n,"documentOverlays")}var kw=class{Pt(e){return wt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ut.fromUint8Array(r):ut.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ni=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ke(e.integerValue));else if("doubleValue"in e){let r=Ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Hc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ii(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Ax(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$p(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),H.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ni.vt=new ni;function f4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $M(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=f4(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Fw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=$M(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=$M(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Vw=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Lw=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Uo=class{constructor(){this.jt=new Fw,this.Ht=new Vw(this.jt),this.Jt=new Lw(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Bo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Vi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=zM(n.arrayValue,e.arrayValue),t!==0?t:(t=zM(n.directionalValue,e.directionalValue),t!==0?t:H.comparator(n.documentKey,e.documentKey)))}function zM(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var up=class{constructor(e){this.Xt=new je((t,r)=>st.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=ow(e);if(t!==void 0&&!this.sn(t))return!1;let r=Vo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new je(st.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ia(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ia(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ia(r.field,r.dir==="asc"?0:1)));return new Ta(Ta.UNKNOWN_ID,this.collectionId,t,qc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function fR(n){var e,t;if(Z(n instanceof we||n instanceof ke),n instanceof we){if(n instanceof Jf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>we.create(n.field,"==",o)))||[];return ke.create(i,"or")}return n}let r=n.filters.map(i=>fR(i));return ke.create(r,n.op)}function p4(n){if(n.getFilters().length===0)return[];let e=Bw(fR(n));return Z(pR(e)),jw(e)||Uw(e)?[e]:e.getFilters()}function jw(n){return n instanceof we}function Uw(n){return n instanceof ke&&nI(n)}function pR(n){return jw(n)||Uw(n)||function(t){if(t instanceof ke&&fw(t)){for(let r of t.getFilters())if(!jw(r)&&!Uw(r))return!1;return!0}return!1}(n)}function Bw(n){if(Z(n instanceof we||n instanceof ke),n instanceof we)return n;if(n.filters.length===1)return Bw(n.filters[0]);let e=n.filters.map(r=>Bw(r)),t=ke.create(e,n.op);return t=cp(t),pR(t)?t:(Z(t instanceof ke),Z(Aa(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>uI(r,i)))}function uI(n,e){let t;return Z(n instanceof we||n instanceof ke),Z(e instanceof we||e instanceof ke),t=n instanceof we?e instanceof we?function(i,o){return ke.create([i,o],"and")}(n,e):qM(n,e):e instanceof we?qM(e,n):function(i,o){if(Z(i.filters.length>0&&o.filters.length>0),Aa(i)&&Aa(o))return Px(i,o.getFilters());let s=fw(i)?i:o,a=fw(i)?o:i,u=s.filters.map(l=>uI(l,a));return ke.create(u,"or")}(n,e),cp(t)}function qM(n,e){if(Aa(e))return Px(e,n.getFilters());{let t=e.filters.map(r=>uI(n,r));return ke.create(t,"or")}}function cp(n){if(Z(n instanceof we||n instanceof ke),n instanceof we)return n;let e=n.getFilters();if(e.length===1)return cp(e[0]);if(Rx(n))return n;let t=e.map(i=>cp(i)),r=[];return t.forEach(i=>{i instanceof we?r.push(i):i instanceof ke&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,n.op)}var $w=class{constructor(){this.un=new rl}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Fn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},rl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(Ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Ce.comparator)).toArray()}};var kf=new Uint8Array(0),zw=class{constructor(e,t){this.databaseId=t,this.cn=new rl,this.ln=new xr(r=>Wo(r),(r,i)=>hl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:nn(i)};return HM(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[mx(t),""],!1,!0);return HM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Dr(s.parent))}return r})}addFieldIndex(e,t){let r=Oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=pa(e);return o.next(a=>{s.put(jM(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Oc(e),i=pa(e),o=fa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Oc(e),r=fa(e),i=pa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new up(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=fa(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=he(),a=[];return M.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(u)} to execute ${Wo(t)}`);let d=function(j,Q){let ie=ow(Q);if(ie===void 0)return null;for(let ee of ep(j,ie.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,u),f=function(j,Q){let ie=new Map;for(let ee of Vo(Q))for(let I of ep(j,ee.fieldPath))switch(I.op){case"==":case"in":ie.set(ee.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ie.set(ee.fieldPath.canonicalString(),I.value),Array.from(ie.values())}return null}(l,u),g=function(j,Q){let ie=[],ee=!0;for(let I of Vo(Q)){let v=I.kind===0?CM(j,I.fieldPath,j.startAt):bM(j,I.fieldPath,j.startAt);ie.push(v.value),ee&&(ee=v.inclusive)}return new Mr(ie,ee)}(l,u),y=function(j,Q){let ie=[],ee=!0;for(let I of Vo(Q)){let v=I.kind===0?bM(j,I.fieldPath,j.endAt):CM(j,I.fieldPath,j.endAt);ie.push(v.value),ee&&(ee=v.inclusive)}return new Mr(ie,ee)}(l,u),E=this.In(u,l,g),S=this.In(u,l,y),A=this.Tn(u,l,f),F=this.En(u.indexId,d,E,g.inclusive,S,y.inclusive,A);return M.forEach(F,$=>r.G($,t.limit).next(j=>{j.forEach(Q=>{let ie=H.fromSegments(Q.documentKey);s.has(ie)||(s=s.add(ie),a.push(ie))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=p4(ke.create(e.filters,"and")).map(r=>Iw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):kf,y=this.An(e,g,r[f%l],i),E=this.Rn(e,g,o[f%l],s),S=a.map(A=>this.An(e,g,A,!0));d.push(...this.createRange(y,E,S))}return d}An(e,t,r,i){let o=new Bo(e,H.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Bo(e,H.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new up(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new je(st.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Uo;for(let i of Vo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ni.vt.It(o,s)}return r.zt()}dn(e){let t=new Uo;return ni.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Uo;return ni.vt.It(Ho(this.databaseId,t),r.Yt(function(o){let s=Vo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Uo);let o=0;for(let s of Vo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Qc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);ni.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Uo;u.seed(a.zt()),ni.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Oc(e),i=pa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new qc(f.sequenceNumber,new Fn(Yo(f.readTime),new H(Dr(f.documentKey)),f.largestBatchId)):qc.empty(),y=d.fields.map(([E,S])=>new Ia(st.fromServerFormat(E),S));return new Ta(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Oc(e),o=pa(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>o.put(jM(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?M.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return fa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return fa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=fa(e),o=new je(Vi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Bo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new je(Vi),i=this.Vn(t,e);if(i==null)return r;let o=ow(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Qc(s))for(let a of s.arrayValue.values||[])r=r.add(new Bo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Bo(t.indexId,e.key,kf,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),E=l.getIterator(),S=ha(y),A=ha(E);for(;S||A;){let F=!1,$=!1;if(S&&A){let j=d(S,A);j<0?$=!0:j>0&&(F=!0)}else S!=null?$=!0:F=!0;F?(f(A),A=ha(E)):$?(g(S),S=ha(y)):(S=ha(y),A=ha(E))}}(i,o,Vi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return pa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Vi(s,a)).filter((s,a,u)=>!a||Vi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Vi(s,e),u=Vi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,kf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,kf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(GM)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(GM)}};function HM(n){return wt(n,"collectionParents")}function fa(n){return wt(n,"indexEntries")}function Oc(n){return wt(n,"indexConfiguration")}function pa(n){return wt(n,"indexState")}function GM(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;JE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fn(e.readTime,e.documentKey,t)}var WM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function gR(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{Z(a===1)}));let l=[];for(let d of t.mutations){let f=Ix(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return M.waitFor(o).next(()=>l)}function lp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(41943040,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);var dp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Li(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=wa(e),s=Li(e);return s.add({}).next(a=>{Z(typeof a=="number");let u=new Zc(a,t,r,i),l=function(y,E,S){let A=S.baseMutations.map($=>nl(y.ct,$)),F=S.mutations.map($=>nl(y.ct,$));return{userId:E,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:F}}(this.serializer,this.userId,u),d=[],f=new je((g,y)=>le(g.canonicalString(),y.canonicalString()));for(let g of i){let y=Ix(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,w$))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),M.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Li(e).get(t).next(r=>r?(Z(r.userId===this.userId),jo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Li(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Z(a.batchId>=r),o=jo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Li(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Li(e).U("userMutationsIndex",t).next(r=>r.map(i=>jo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=jf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return wa(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=Dr(d);if(l===this.userId&&t.path.isEqual(g))return Li(e).get(f).next(y=>{if(!y)throw K();Z(y.userId===this.userId),o.push(jo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(le),i=[];return t.forEach(o=>{let s=jf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=wa(e).J({range:a},(l,d,f)=>{let[g,y,E]=l,S=Dr(y);g===this.userId&&o.path.isEqual(S)?r=r.add(E):f.done()});i.push(u)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=jf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new je(le);return wa(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,E=Dr(g);f===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Li(e).get(o).next(s=>{if(s===null)throw K();Z(s.userId===this.userId),r.push(jo(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return gR(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return wa(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Dr(o[1]);i.push(u)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return mR(e,this.userId,t)}Nn(e){return yR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function mR(n,e,t){let r=jf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return wa(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Li(n){return wt(n,"mutations")}function wa(n){return wt(n,"documentMutations")}function yR(n){return wt(n,"mutationQueues")}var Pa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var qw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Pa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ne.fromTimestamp(new Je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ga(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ga(e).J((s,a)=>{let u=Lc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ga(e).J((r,i)=>{let o=Lc(i);t(o)})}qn(e){return KM(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return KM(e).put("targetGlobalKey",t)}Kn(e,t){return ga(e).put(hR(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Wo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ga(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Lc(a);hl(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ji(e);return t.forEach(s=>{let a=nn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=ji(e);return M.forEach(t,o=>{let s=nn(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ji(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ji(e),o=he();return i.J({range:r,H:!0},(s,a,u)=>{let l=Dr(s[1]),d=new H(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=nn(t.path),i=IDBKeyRange.bound([r],[mx(r)],!1,!0),o=0;return ji(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ga(e).get(t).next(r=>r?Lc(r):null)}};function ga(n){return wt(n,"targets")}function KM(n){return wt(n,"targetGlobal")}function ji(n){return wt(n,"targetDocuments")}function QM([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var Hw=class{constructor(e){this.Un=e,this.buffer=new je(QM),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();QM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Gw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){eo(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Xi(t)}yield this.Hn(3e5)}))}},Ww=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(bn.oe);let r=new Hw(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(WM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WM):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ma()<=or.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function g4(n,e){return new Ww(n,e)}var Kw=class{constructor(e,t){this.db=e,this.garbageCollector=g4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Ff(e,r)}removeReference(e,t,r){return Ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ff(e,t)}nr(e,t){return function(i,o){let s=!1;return yR(i).Y(a=>mR(i,a,o).next(u=>(u&&(s=!0),M.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ne.min()),ji(e).delete(function(f){return[0,nn(f.path)]}(s))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ff(e,t)}tr(e,t){let r=ji(e),i,o=bn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==bn.oe&&t(new H(Dr(i)),o),o=l,i=u):o=bn.oe}).next(()=>{o!==bn.oe&&t(new H(Dr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ff(n,e){return ji(n).put(function(r,i){return{targetId:0,path:nn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var hp=class{constructor(){this.changes=new xr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Qw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fo(e).put(r)}removeEntry(e,t,r){return Fo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sp(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=gt.newInvalidDocument(t);return Fo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:gt.newInvalidDocument(t)};return Fo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kc(t))},(i,o)=>{r={document:this.ir(t,o),size:lp(o)}}).next(()=>r)}getEntries(e,t){let r=fn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=fn(),i=new He(H.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,lp(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new je(JM);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(kc(i.first()),kc(i.last())),s=i.getIterator(),a=s.getNext();return Fo(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=H.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&JM(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(kc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),sp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=fn();for(let f of l){let g=this.ir(H.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(pl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=fn(),s=ZM(t,r),a=ZM(t,Fn.max());return Fo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(H.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Yw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YM(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return YM(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=h4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return gt.newInvalidDocument(e)}};function vR(n){return new Qw(n)}var Yw=class extends hp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new xr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new je((o,s)=>le(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=VM(this.cr.serializer,s);i=i.add(o.path.popLast());let l=lp(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=VM(this.cr.serializer,s.convertToNoDocument(ne.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function YM(n){return wt(n,"remoteDocumentGlobal")}function Fo(n){return wt(n,"remoteDocumentsV14")}function kc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZM(n,e){let t=e.documentKey.path.toArray();return[n,sp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JM(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=le(t[o],r[o]),i)return i;return i=le(t.length,r.length),i||(i=le(t[t.length-2],r[r.length-2]),i||le(t[t.length-1],r[r.length-1]))}var Zw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Bc(r.mutation,i,Tn.empty(),Je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=Cr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Vc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Cr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=fn(),s=Uc(),a=function(){return Uc()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof nr)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Bc(d.mutation,l,d.mutation.getFieldMask(),Je.now())):s.set(l.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Zw(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Uc(),i=new He((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Tn.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=$x();d.forEach(g=>{if(!o.has(g)){let y=Qx(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Cr()),a=-1,u=o;return s.next(l=>M.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(d=>({batchId:a,changes:Bx(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=Vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Vc();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=function(f,g){return new tr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,gt.newInvalidDocument(d)))});let a=Vc();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&Bc(d.mutation,l,Tn.empty(),Je.now()),pl(t,l)&&(a=a.insert(u,l))}),a})}};var Jw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:at(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:aI(i.bundledQuery),readTime:at(i.readTime)}}(t)),M.resolve()}};var Xw=class{constructor(){this.overlays=new He(H.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Cr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Cr(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new He((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Cr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Cr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Jc(t,r));let o=this.Ir.get(t);o===void 0&&(o=he(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var eE=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var il=class{constructor(){this.Tr=new je(ft.Er),this.dr=new je(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ft(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ft(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new H(new Ce([])),r=new ft(t,e),i=new ft(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new H(new Ce([])),r=new ft(t,e),i=new ft(t,e+1),o=he();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ft(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ft=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return H.comparator(e.key,t.key)||le(e.wr,t.wr)}static Ar(e,t){return le(e.wr,t.wr)||H.comparator(e.key,t.key)}};var tE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new je(ft.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Zc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ft(t,0),i=new ft(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(le);return t.forEach(i=>{let o=new ft(i,0),s=new ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new ft(new H(o),0),a=new je(le);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new ft(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ft(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var nE=class{constructor(e){this.Mr=e,this.docs=function(){return new He(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(t))}getEntries(e,t){let r=fn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fn(),s=t.path,a=new H(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||JE(vx(d),r)<=0||(i.has(d.key)||pl(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rE(this)}getSize(e){return M.resolve(this.size)}},rE=class extends hp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var iE=class{constructor(e){this.persistence=e,this.Nr=new xr(t=>Wo(t),hl),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new il,this.targetCount=0,this.kr=Pa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Pa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var pp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new bn(0),this.Kr=!1,this.Kr=!0,this.$r=new eE,this.referenceDelegate=e(this),this.Ur=new iE(this),this.indexManager=new $w,this.remoteDocumentCache=function(i){return new nE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new op(t),this.Gr=new Jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new tE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new oE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},oE=class extends Wf{constructor(e){super(),this.currentSequenceNumber=e}},gp=class n{constructor(e){this.persistence=e,this.Jr=new il,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var sE=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Kf("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0}),u.createObjectStore("documentMutations")}(e),XM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),XM(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return M.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:N$});l.createIndex("collectionPathOverlayIndex",P$,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",O$,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:E$});l.createIndex("documentKeyIndex",I$),l.createIndex("collectionGroupIndex",D$)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:A$}).createIndex("sequenceNumberIndex",M$,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:x$}).createIndex("documentKeyIndex",R$,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=lp(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,u=>{Z(u.userId===o.userId);let l=jo(this.serializer,u);return gR(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ce(s),l=function(f){return[0,nn(f)]}(u);o.push(t.get(l).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:nn(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:S$});let r=t.store("collectionParents"),i=new rl,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:nn(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ce(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=Dr(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Lc(i),s=hR(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new H(Ce.fromString(f.document.name).popFirst(5)):f.noDocument?H.fromSegments(f.noDocument.path):f.unknownDocument?H.fromSegments(f.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=vR(this.serializer),o=new pp(gp.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:he();jo(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),M.forEach(a,(u,l)=>{let d=new pt(l),f=ap.lt(this.serializer,d),g=o.getIndexManager(d),y=dp.lt(d,this.serializer,g,o.referenceDelegate);return new fp(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Gc(t,bn.oe),u).next()})})}};function XM(n){n.createObjectStore("targetDocuments",{keyPath:b$}).createIndex("documentTargetsIndex",T$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",C$,{unique:!0}),n.createObjectStore("targetGlobal")}var K_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aE=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new O(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kw(this,i),this.Ai=t+"main",this.serializer=new op(u),this.Ri=new qi(this.Ai,this.hi,new sE(this.serializer)),this.$r=new kw,this.Ur=new qw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vR(this.serializer),this.Gr=new Ow,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,K_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new bn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(eo(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Fc(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return Vf(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=wt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Fc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,K_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Gc(e,bn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Vf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return dp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ap.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?V$:u===16?F$:u===15?eI:u===14?bx:u===13?Cx:u===12?k$:u===11?Dx:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Gc(a,this.Qr?this.Qr.next():bn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(R.FAILED_PRECONDITION,_x);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Fc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(R.FAILED_PRECONDITION,K_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fc(e).put("owner",t)}static D(){return qi.D()}bi(e){let t=Fc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;$g()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Fc(n){return wt(n,"owner")}function Vf(n){return wt(n,"clientMetadata")}function cI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var uE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var cE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $g()?8:wx(Iu())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new cE;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ma()<=or.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ya(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ma()<=or.DEBUG&&k("QueryEngine","Query:",ya(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ma()<=or.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ya(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(t))):M.resolve())}Yi(e,t){if(TM(t))return M.resolve(null);let r=rn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tp(t,null,"F"),r=rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,tp(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return TM(t)||i.isEqual(ne.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(ma()<=or.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ya(t)),this.rs(e,s,t,yx(i,-1)).next(a=>a))})}ts(e,t){let r=new je(jx(e));return t.forEach((i,o)=>{pl(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ma()<=or.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ya(t)),this.Ji.getDocumentsMatchingQuery(e,t,Fn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var lE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new He(le),this._s=new xr(o=>Wo(o),hl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function _R(n,e,t,r){return new lE(n,e,t,r)}function wR(n,e){return N(this,null,function*(){let t=q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function m4(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=M.resolve();return g.forEach(E=>{y=y.next(()=>d.getEntry(u,E)).next(S=>{let A=l.docVersions.get(E);Z(A!==null),S.version.compareTo(A)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),d.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ER(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function y4(n,e){let t=q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ut.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(S,A,F){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=fn(),l=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(IR(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(ne.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function IR(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=fn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function v4(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oa(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Na(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ka(n,e,t){return N(this,null,function*(){let r=q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!eo(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function yp(n,e,t){let r=q(n),i=ne.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=q(u),g=f._s.get(d);return g!==void 0?M.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,rn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:he())).next(a=>(bR(r,Lx(e),a),{documents:a,Ts:o})))}function DR(n,e){let t=q(n),r=q(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function CR(n,e){let t=q(n),r=t.us.get(e)||ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,yx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bR(t,e,i),i))}function bR(n,e,t){let r=n.us.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function _4(n,e,t,r){return N(this,null,function*(){let i=q(n),o=he(),s=fn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Oa(i,function(d){return rn(za(Ce.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>IR(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function w4(r,i){return N(this,arguments,function*(n,e,t=he()){let o=yield Oa(n,rn(aI(e.bundledQuery))),s=q(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=at(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(ut.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function ex(n,e){return`firestore_clients_${n}_${e}`}function tx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Q_(n,e){return`firestore_targets_${n}_${e}`}var vp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ot("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},$c=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(ot("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_p=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=iI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Ex(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ot("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},dE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ot("SharedClientState",`Failed to parse online state: ${e}`),null)}},ol=class{constructor(){this.activeTargetIds=iI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},zc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new He(le),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=ex(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ol),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(ex(this.persistenceKey,r));if(i){let o=_p.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Q_(this.persistenceKey,e));if(i){let o=$c.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Q_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=bn.oe;if(o!=null)try{let a=JSON.parse(o);Z(typeof a=="number"),s=a}catch(a){ot("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==bn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new vp(this.currentUser,e,t,r),o=tx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=tx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Q_(this.persistenceKey,e),o=new $c(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return _p.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return vp.Rs(new pt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return $c.Rs(i,t)}Ls(e){return dE.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=iI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},wp=class{constructor(){this.so=new ol,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ol,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hE=class{_o(e){}shutdown(){}};var Ep=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Lf=null;function Y_(){return Lf===null?Lf=function(){return 268435456+Math.round(2147483648*Math.random())}():Lf++,"0x"+Lf.toString(16)}var E4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var fE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ut="WebChannelConnection",pE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Y_(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(k("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw er("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=E4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Y_();return new Promise((s,a)=>{let u=new $_;u.setWithCredentials(!0),u.listenOnce(z_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nc.NO_ERROR:let d=u.getResponseJson();k(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Nc.TIMEOUT:k(Ut,`RPC '${e}' ${o} timed out`),a(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:let f=u.getStatus();if(k(Ut,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let E=function(A){let F=A.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(F)>=0?F:R.UNKNOWN}(y.status);a(new O(E,y.message))}else a(new O(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{k(Ut,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(Ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Y_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=G_(),a=H_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");k(Ut,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,E=new fE({Io:A=>{y?k(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(k(Ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(Ut,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),S=(A,F,$)=>{A.listen(F,j=>{try{$(j)}catch(Q){setTimeout(()=>{throw Q},0)}})};return S(f,da.EventType.OPEN,()=>{y||(k(Ut,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),S(f,da.EventType.CLOSE,()=>{y||(y=!0,k(Ut,`RPC '${e}' stream ${i} transport closed`),E.So())}),S(f,da.EventType.ERROR,A=>{y||(y=!0,er(Ut,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new O(R.UNAVAILABLE,"The operation could not be completed")))}),S(f,da.EventType.MESSAGE,A=>{var F;if(!y){let $=A.data[0];Z(!!$);let j=$,Q=j.error||((F=j[0])===null||F===void 0?void 0:F.error);if(Q){k(Ut,`RPC '${e}' stream ${i} received error:`,Q);let ie=Q.status,ee=function(w){let D=ht[w];if(D!==void 0)return Jx(D)}(ie),I=Q.message;ee===void 0&&(ee=R.INTERNAL,I="Unknown error status: "+ie+" with message "+Q.message),y=!0,E.So(new O(ee,I)),f.close()}else k(Ut,`RPC '${e}' stream ${i} received:`,$),E.bo($)}}),S(a,q_.STAT_EVENT,A=>{A.stat===Of.PROXY?k(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Of.NOPROXY&&k(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function TR(){return typeof window<"u"?window:null}function zf(){return typeof document<"u"?document:null}function gl(n){return new Mw(n,!0)}var sl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ip=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(ot(t.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gE=class extends Ip{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=o4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?at(s.readTime):ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Nw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Xf(u)?{documents:sR(o,u)}:{query:aR(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=eR(o,s.resumeToken);let l=xw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Ra(o,s.snapshotVersion.toTimestamp());let l=xw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=a4(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Nw(this.serializer),t.removeTarget=e,this.a_(t)}},mE=class extends Ip{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=s4(e.writeResults,e.commitTime),r=at(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Nw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>nl(this.serializer,r))};this.a_(t)}};var yE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Rw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Rw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},vE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ot(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _E=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){to(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=q(u);l.L_.add(4),yield qa(l),l.q_.set("Unknown"),l.L_.delete(4),yield ml(l)})}(this))}))}),this.q_=new vE(r,i)}};function ml(n){return N(this,null,function*(){if(to(n))for(let e of n.B_)yield e(!0)})}function qa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function zp(n,e){let t=q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),hI(t)?dI(t):Ga(t).r_()&&lI(t,e))}function Fa(n,e){let t=q(n),r=Ga(t);t.N_.delete(e),r.r_()&&SR(t,e),t.N_.size===0&&(r.r_()?r.o_():to(t)&&t.q_.set("Unknown"))}function lI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ga(n).A_(e)}function SR(n,e){n.Q_.xe(e),Ga(n).R_(e)}function dI(n){n.Q_=new Aw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ga(n).start(),n.q_.v_()}function hI(n){return to(n)&&!Ga(n).n_()&&n.N_.size>0}function to(n){return q(n).L_.size===0}function AR(n){n.Q_=void 0}function I4(n){return N(this,null,function*(){n.q_.set("Online")})}function D4(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{lI(n,e)})})}function C4(n,e){return N(this,null,function*(){AR(n),hI(n)?(n.q_.M_(e),dI(n)):n.q_.set("Unknown")})}function b4(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof rp&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Dp(n,r)}else if(e instanceof Ca?n.Q_.Ke(e):e instanceof np?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ne.min()))try{let r=yield ER(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(ut.EMPTY_BYTE_STRING,d.snapshotVersion)),SR(o,u);let f=new Na(d.target,u,l,d.sequenceNumber);lI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Dp(n,r)}})}function Dp(n,e,t){return N(this,null,function*(){if(!eo(e))throw e;n.L_.add(1),yield qa(n),n.q_.set("Offline"),t||(t=()=>ER(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ml(n)}))})}function MR(n,e){return e().catch(t=>Dp(n,t,e))}function Ha(n){return N(this,null,function*(){let e=q(n),t=Ji(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;T4(e);)try{let i=yield v4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,S4(e,i)}catch(i){yield Dp(e,i)}xR(e)&&RR(e)})}function T4(n){return to(n)&&n.O_.length<10}function S4(n,e){n.O_.push(e);let t=Ji(n);t.r_()&&t.V_&&t.m_(e.mutations)}function xR(n){return to(n)&&!Ji(n).n_()&&n.O_.length>0}function RR(n){Ji(n).start()}function A4(n){return N(this,null,function*(){Ji(n).p_()})}function M4(n){return N(this,null,function*(){let e=Ji(n);for(let t of n.O_)e.m_(t.mutations)})}function x4(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=bw.from(r,e,t);yield MR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ha(n)})}function R4(n,e){return N(this,null,function*(){e&&Ji(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return Zx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ji(r).s_(),yield MR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ha(r)}})}(n,e)),xR(n)&&RR(n)})}function nx(n,e){return N(this,null,function*(){let t=q(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=to(t);t.L_.add(3),yield qa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ml(t)})}function wE(n,e){return N(this,null,function*(){let t=q(n);e?(t.L_.delete(2),yield ml(t)):e||(t.L_.add(2),yield qa(t),t.q_.set("Unknown"))})}function Ga(n){return n.K_||(n.K_=function(t,r,i){let o=q(t);return o.w_(),new gE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:I4.bind(null,n),Ro:D4.bind(null,n),mo:C4.bind(null,n),d_:b4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),hI(n)?dI(n):n.q_.set("Unknown")):(yield n.K_.stop(),AR(n))}))),n.K_}function Ji(n){return n.U_||(n.U_=function(t,r,i){let o=q(t);return o.w_(),new mE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:A4.bind(null,n),mo:R4.bind(null,n),f_:M4.bind(null,n),g_:x4.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ha(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var EE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Wa(n,e){if(ot("AsyncQueue",`${e}: ${n}`),eo(n))return new O(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Cp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Vc(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var bp=class{constructor(){this.W_=new He(H.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Va=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Cp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var IE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},DE=class{constructor(){this.queries=rx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=q(t),o=i.queries;i.queries=rx(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new O(R.ABORTED,"Firestore shutting down"))}};function rx(){return new xr(n=>Vx(n),fl)}function fI(n,e){return N(this,null,function*(){let t=q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new IE,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Wa(s,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&gI(t)})}function pI(n,e){return N(this,null,function*(){let t=q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function N4(n,e){let t=q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&gI(t)}function P4(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function gI(n){n.Y_.forEach(e=>{e.next()})}var CE,ix;(ix=CE||(CE={})).ea="default",ix.Cache="cache";var al=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==CE.Cache}};var bE=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Tp=class{constructor(e){this.serializer=e}Es(e){return Tr(this.serializer,e)}ds(e){return e.metadata.exists?oR(this.serializer,e.document,!1):gt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return at(e)}},TE=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ce.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Tp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||he()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield _4(this.localStore,new Tp(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield w4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function NR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Sp=class{constructor(e){this.key=e}},Ap=class{constructor(e){this.key=e}},Mp=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=jx(e),this.Ra=new Cp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new bp,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=pl(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?E!==S&&(r.track({type:3,doc:y}),A=!0):this.ga(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=S?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,E){let S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return S(y)-S(E)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Va(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ap(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Sp(r))}),t}ba(e){this.Ta=e.Ts,this.da=he();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Va.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},SE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},AE=class{constructor(e){this.key=e,this.va=!1}},ME=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new xr(a=>Vx(a),fl),this.Ma=new Map,this.xa=new Set,this.Oa=new He(H.comparator),this.Na=new Map,this.La=new il,this.Ba={},this.ka=new Map,this.qa=Pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function O4(n,e,t=!0){return N(this,null,function*(){let r=qp(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield PR(r,e,t,!0),i})}function k4(n,e){return N(this,null,function*(){let t=qp(n);yield PR(t,e,!0,!1)})}function PR(n,e,t,r){return N(this,null,function*(){let i=yield Oa(n.localStore,rn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield mI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&zp(n.remoteStore,i),a})}function mI(n,e,t,r,i){return N(this,null,function*(){n.Ka=(f,g,y)=>function(S,A,F,$){return N(this,null,function*(){let j=A.view.ma(F);j.ns&&(j=yield yp(S.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,j)));let Q=$&&$.targetChanges.get(A.targetId),ie=$&&$.targetMismatches.get(A.targetId)!=null,ee=A.view.applyChanges(j,S.isPrimaryClient,Q,ie);return xE(S,A.targetId,ee.wa),ee.snapshot})}(n,f,g,y);let o=yield yp(n.localStore,e,!0),s=new Mp(e,o.Ts),a=s.ma(o.documents),u=el.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);xE(n,t,l.wa);let d=new SE(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function F4(n,e,t){return N(this,null,function*(){let r=q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!fl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ka(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Fa(r.remoteStore,i.targetId),La(r,i.targetId)}).catch(Xi))):(La(r,i.targetId),yield ka(r.localStore,i.targetId,!0))})}function V4(n,e){return N(this,null,function*(){let t=q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fa(t.remoteStore,r.targetId))})}function L4(n,e,t){return N(this,null,function*(){let r=wI(n);try{let i=yield function(s,a){let u=q(s),l=Je.now(),d=a.reduce((y,E)=>y.add(E.key),he()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=fn(),S=he();return u.cs.getEntries(y,d).next(A=>{E=A,E.forEach((F,$)=>{$.isValidDocument()||(S=S.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(A=>{f=A;let F=[];for(let $ of a){let j=J$($,f.get($.key).overlayedDocument);j!=null&&F.push(new nr($.key,j,xx(j.value.mapValue),nt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(A=>{g=A;let F=A.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,A.batchId,F)})}).then(()=>({batchId:g.batchId,changes:Bx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new He(le)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield ci(r,i.changes),yield Ha(r.remoteStore)}catch(i){let o=Wa(i,"Failed to persist write");t.reject(o)}})}function OR(n,e){return N(this,null,function*(){let t=q(n);try{let r=yield y4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Z(s.va):i.removedDocuments.size>0&&(Z(s.va),s.va=!1))}),yield ci(t,r,e)}catch(r){yield Xi(r)}})}function ox(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=q(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&gI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j4(n,e,t){return N(this,null,function*(){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new He(H.comparator);s=s.insert(o,gt.newNoDocument(o,ne.min()));let a=he().add(o),u=new Xc(ne.min(),new Map,new He(le),s,a);yield OR(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),_I(r)}else yield ka(r.localStore,e,!1).then(()=>La(r,e,t)).catch(Xi)})}function U4(n,e){return N(this,null,function*(){let t=q(n),r=e.batch.batchId;try{let i=yield m4(t.localStore,e);vI(t,r,null),yI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ci(t,i)}catch(i){yield Xi(i)}})}function B4(n,e,t){return N(this,null,function*(){let r=q(n);try{let i=yield function(s,a){let u=q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Z(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);vI(r,e,t),yI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ci(r,i)}catch(i){yield Xi(i)}})}function $4(n,e){return N(this,null,function*(){let t=q(n);to(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=q(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Wa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function yI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function vI(n,e,t){let r=q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function La(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||kR(n,r)})}function kR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Fa(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_I(n))}function xE(n,e,t){for(let r of t)r instanceof Sp?(n.La.addReference(r.key,e),z4(n,r)):r instanceof Ap?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||kR(n,r.key)):K()}function z4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),_I(n))}function _I(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new H(Ce.fromString(e)),r=n.qa.next();n.Na.set(r,new AE(t)),n.Oa=n.Oa.insert(t,r),zp(n.remoteStore,new Na(rn(za(t.path)),r,"TargetPurposeLimboResolution",bn.oe))}}function ci(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=uE.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=q(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,g=>M.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>M.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!eo(f))throw f;k("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),E=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(g,S)}}})}(r.localStore,o))})}function q4(n,e){return N(this,null,function*(){let t=q(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield wR(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new O(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ci(t,r.hs)}})}function H4(n,e){let t=q(n),r=t.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function G4(n,e){return N(this,null,function*(){let t=q(n),r=yield yp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&xE(t,e.targetId,i.wa),i})}function W4(n,e){return N(this,null,function*(){let t=q(n);return CR(t.localStore,e).then(r=>ci(t,r))})}function K4(n,e,t,r){return N(this,null,function*(){let i=q(n),o=yield function(a,u){let l=q(a),d=q(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ha(i.remoteStore):t==="acknowledged"||t==="rejected"?(vI(i,e,r||null),yI(i,e),function(a,u){q(q(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield ci(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Q4(n,e){return N(this,null,function*(){let t=q(n);if(qp(t),wI(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sx(t,r.toArray());t.Qa=!0,yield wE(t.remoteStore,!0);for(let o of i)zp(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(La(t,s),ka(t.localStore,s,!0))),Fa(t.remoteStore,s)}),yield i,yield sx(t,r),function(s){let a=q(s);a.Na.forEach((u,l)=>{Fa(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new He(H.comparator)}(t),t.Qa=!1,yield wE(t.remoteStore,!1)}})}function sx(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Oa(r.localStore,rn(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield G4(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield DR(r.localStore,s);a=yield Oa(r.localStore,l),yield mI(r,FR(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function FR(n){return Fx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Y4(n){return function(t){return q(q(t).persistence).Qi()}(q(n).localStore)}function Z4(n,e,t,r){return N(this,null,function*(){let i=q(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield CR(i.localStore,Lx(o[0])),a=Xc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ut.EMPTY_BYTE_STRING);yield ci(i,s,a);break}case"rejected":yield ka(i.localStore,e,!0),La(i,e,r);break;default:K()}})}function J4(n,e,t){return N(this,null,function*(){let r=qp(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield DR(r.localStore,i),s=yield Oa(r.localStore,o);yield mI(r,FR(o),s.targetId,!1,s.resumeToken),zp(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ka(r.localStore,i,!1).then(()=>{Fa(r.remoteStore,i),La(r,i)}).catch(Xi))}})}function qp(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j4.bind(null,e),e.Ca.d_=N4.bind(null,e.eventManager),e.Ca.$a=P4.bind(null,e.eventManager),e}function wI(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B4.bind(null,e),e}function X4(n,e,t){let r=q(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,E){let S=q(y),A=at(E.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",F=>S.Gr.getBundleMetadata(F,E.id)).then(F=>!!F&&F.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(NR(u));let l=new TE(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield ci(o,f.Ia,void 0),yield function(y,E){let S=q(y);return S.persistence.runTransaction("Save bundle","readwrite",A=>S.Gr.saveBundleMetadata(A,E))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return er("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var RE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=gl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return _R(this.persistence,new mp,t.initialUser,this.serializer)}Ga(t){return new pp(gp.Zr,this.serializer)}Wa(t){return new wp}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var xp=class n extends RE{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Ug(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield wI(this.Ja.syncEngine),yield Ha(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return _R(this.persistence,new mp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Gw(r,e.asyncQueue,t)}Ha(e,t){let r=new cw(t,this.persistence);return new uw(e.asyncQueue,r)}Ga(e){let t=cI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new aE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TR(),zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new wp}},NE=class n extends xp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Ug(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof zc&&(this.sharedClientState.syncEngine={no:K4.bind(null,t),ro:Z4.bind(null,t),io:J4.bind(null,t),Qi:Y4.bind(null,t),eo:W4.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield Q4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=TR();if(!zc.D(t))throw new O(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=cI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},EI=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ox(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q4.bind(null,this.syncEngine),yield wE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new DE}()}createDatastore(t){let r=gl(t.databaseInfo.databaseId),i=function(s){return new pE(s)}(t.databaseInfo);return function(s,a,u,l){return new yE(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new _E(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>ox(this.syncEngine,r,0),function(){return Ep.D()?new Ep:new hE}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new ME(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=q(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield qa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function ax(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ja=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var PE=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new _t,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new bE(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var OE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=q(i),a={documents:o.map(f=>tl(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ce.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=i4(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());Z(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=H.fromPath(r);this.mutations.push(new Yc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=q(r),s={writes:i.map(a=>nl(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ce.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ne.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ne.min())?nt.exists(!1):nt.updateTime(t):nt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ne.min()))throw new O(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(t)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var kE=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new sl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new OE(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!dl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Zx(t)}return!1}};var FE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=Hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Wa(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Z_(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield wR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ux(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield II(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nx(e.remoteStore,i)),n._onlineComponents=e})}function II(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Z_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;er("Error using user provided cache. Falling back to memory cache: "+t),yield Z_(n,new RE)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Z_(n,new RE);return n._offlineComponents})}function Hp(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ux(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ux(n,new EI))),n._onlineComponents})}function VR(n){return II(n).then(e=>e.persistence)}function DI(n){return II(n).then(e=>e.localStore)}function LR(n){return Hp(n).then(e=>e.remoteStore)}function CI(n){return Hp(n).then(e=>e.syncEngine)}function ez(n){return Hp(n).then(e=>e.datastore)}function Ua(n){return N(this,null,function*(){let e=yield Hp(n),t=e.eventManager;return t.onListen=O4.bind(null,e.syncEngine),t.onUnlisten=F4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=k4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=V4.bind(null,e.syncEngine),t})}function tz(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield VR(n),t=yield LR(n);return e.setNetworkEnabled(!0),function(i){let o=q(i);return o.L_.delete(0),ml(o)}(t)}))}function nz(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield VR(n),t=yield LR(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=q(i);o.L_.add(0),yield qa(o),o.q_.set("Offline")})}(t)}))}function rz(n,e){let t=new _t;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=q(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Wa(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield DI(n),e,t)})),t.promise}function jR(n,e,t={}){let r=new _t;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new ja({next:g=>{d.Za(),s.enqueueAndForget(()=>pI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new al(za(a.path),d,{includeMetadataChanges:!0,_a:!0});return fI(o,f)}(yield Ua(n),n.asyncQueue,e,t,r)})),r.promise}function iz(n,e){let t=new _t;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield yp(i,o,!0),u=new Mp(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Wa(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield DI(n),e,t)})),t.promise}function UR(n,e,t={}){let r=new _t;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new ja({next:g=>{d.Za(),s.enqueueAndForget(()=>pI(o,f)),g.fromCache&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new al(a,d,{includeMetadataChanges:!0,_a:!0});return fI(o,f)}(yield Ua(n),n.asyncQueue,e,t,r)})),r.promise}function oz(n,e){let t=new ja(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).Y_.add(o),o.next()}(yield Ua(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).Y_.delete(o)}(yield Ua(n),t)}))}}function sz(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?Xx().encode(s):s,function(d,f){return new PE(d,f)}(function(d,f){if(d instanceof Uint8Array)return ax(d,f);if(d instanceof ArrayBuffer)return ax(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,gl(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){X4(yield CI(n),i,r)}))}function az(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=q(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield DI(n),e)}))}function BR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var cx=new Map;function bI(n,e,t){if(!t)throw new O(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TI(n,e,t,r){if(e===!0&&r===!0)throw new O(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lx(n){if(!H.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dx(n){if(H.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Gp(n);throw new O(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $R(n,e){if(e<=0)throw new O(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Rp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J_;switch(r.type){case"firstParty":return new nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=cx.get(t);r&&(k("ComponentProvider","Removing Datastore"),cx.delete(t),r.terminate())}(this),Promise.resolve()}};function zR(n,e,t,r={}){var i;let o=(n=be(n,Zo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=pt.MOCK_USER;else{a=uD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pt(l)}n._authCredentials=new X_(new qf(a,u))}}var Tt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$e=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Sr=class n extends Tt{constructor(e,t,r){super(e,t,za(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function SI(n,e,...t){if(n=Qe(n),bI("collection","path",e),n instanceof Zo){let r=Ce.fromString(e,...t);return dx(r),new Sr(n,null,r)}{if(!(n instanceof $e||n instanceof Sr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return dx(r),new Sr(n.firestore,null,r)}}function qR(n,e){if(n=be(n,Zo),bI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Tt(n,null,function(r){return new tr(Ce.emptyPath(),r)}(e))}function yl(n,e,...t){if(n=Qe(n),arguments.length===1&&(e=Hf.newId()),bI("doc","path",e),n instanceof Zo){let r=Ce.fromString(e,...t);return lx(r),new $e(n,null,new H(r))}{if(!(n instanceof $e||n instanceof Sr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return lx(r),new $e(n.firestore,n instanceof Sr?n.converter:null,new H(r))}}function AI(n,e){return n=Qe(n),e=Qe(e),(n instanceof $e||n instanceof Sr)&&(e instanceof $e||e instanceof Sr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MI(n,e){return n=Qe(n),e=Qe(e),n instanceof Tt&&e instanceof Tt&&n.firestore===e.firestore&&fl(n._query,e._query)&&n.converter===e.converter}var Np=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sl(this,"async_queue_retry"),this.Vu=()=>{let r=zf();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new _t;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!eo(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ot("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=EE.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function VE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var LE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new _t,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var HR=-1,Xe=class extends Zo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Np,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Np(e),this._firestoreClient=void 0,yield e}})}};function St(n){if(n._terminated)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GR(n),n._firestoreClient}function GR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new lw(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,BR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new FE(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function WR(n,e){er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return QR(n,EI.provider,{build:r=>new xp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function KR(n){return N(this,null,function*(){er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();QR(n,EI.provider,{build:t=>new NE(t,e.cacheSizeBytes)})})}function QR(n,e,t){if((n=be(n,Xe))._firestoreClient||n._terminated)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},GR(n)}function YR(n){if(n._initialized&&!n._terminated)throw new O(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new _t;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!qi.D())return Promise.resolve();let i=r+"main";yield qi.delete(i)})}(cI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ZR(n){return function(t){let r=new _t;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return $4(yield CI(t),r)})),r.promise}(St(n=be(n,Xe)))}function JR(n){return tz(St(n=be(n,Xe)))}function XR(n){return nz(St(n=be(n,Xe)))}function eN(n,e){let t=St(n=be(n,Xe)),r=new LE;return sz(t,n._databaseId,e,r),r}function tN(n,e){return az(St(n=be(n,Xe)),e).then(t=>t?new Tt(n,null,t.query):null)}var Rr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ut.fromBase64String(e))}catch(t){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var rr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ai=class{constructor(e){this._methodName=e}};var Jo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var ul=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var uz=/^__.*__$/,jE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yi(e,this.data,t,this.fieldTransforms)}},Pp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function nN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Op=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nN(this.Cu)&&uz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},UE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gl(e)}Qu(e,t,r,i=!1){return new Op({Cu:e,methodName:t,qu:r,path:st.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ns(n){let e=n._freezeSettings(),t=gl(n._databaseId);return new UE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);NI("Data must be an object, but it was:",s,r);let a=oN(r,s),u,l;if(o.merge)u=new Tn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=HE(e,f,t);if(!s.contains(g))throw new O(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);aN(d,g)||d.push(g)}u=new Tn(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new jE(new Bt(a),u,l)}var cl=class n extends ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function rN(n,e,t){return new Op({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var BE=class n extends ai{_toFieldTransform(e){return new Ko(e.path,new Ki)}isEqual(e){return e instanceof n}},$E=class n extends ai{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=rN(this,e,!0),r=this.Ku.map(o=>rs(o,t)),i=new oi(r);return new Ko(e.path,i)}isEqual(e){return e instanceof n&&zg(this.Ku,e.Ku)}},zE=class n extends ai{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=rN(this,e,!0),r=this.Ku.map(o=>rs(o,t)),i=new si(r);return new Ko(e.path,i)}isEqual(e){return e instanceof n&&zg(this.Ku,e.Ku)}},qE=class n extends ai{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Qi(e.serializer,qx(e.serializer,this.$u));return new Ko(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function xI(n,e,t,r){let i=n.Qu(1,e,t);NI("Data must be an object, but it was:",i,r);let o=[],s=Bt.empty();ts(r,(u,l)=>{let d=PI(e,u,t);l=Qe(l);let f=i.Nu(d);if(l instanceof cl)o.push(d);else{let g=rs(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Tn(o);return new Pp(s,a,i.fieldTransforms)}function RI(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[HE(e,r,t)],u=[i];if(o.length%2!=0)throw new O(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(HE(e,o[g])),u.push(o[g+1]);let l=[],d=Bt.empty();for(let g=a.length-1;g>=0;--g)if(!aN(l,a[g])){let y=a[g],E=u[g];E=Qe(E);let S=s.Nu(y);if(E instanceof cl)l.push(y);else{let A=rs(E,S);A!=null&&(l.push(y),d.set(y,A))}}let f=new Tn(l);return new Pp(d,f,s.fieldTransforms)}function iN(n,e,t,r=!1){return rs(t,n.Qu(r?4:3,e))}function rs(n,e){if(sN(n=Qe(n)))return NI("Unsupported field value:",e,n),oN(n,e);if(n instanceof ai)return function(r,i){if(!nN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=rs(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Je.fromDate(r);return{timestampValue:Ra(i.serializer,o)}}if(r instanceof Je){let o=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ra(i.serializer,o)}}if(r instanceof Jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:eR(i.serializer,r._byteString)};if(r instanceof $e){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ul)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return oI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gp(r)}`)}(n,e)}function oN(n,e){let t={};return Tx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(n,(r,i)=>{let o=rs(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function sN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof Jo||n instanceof Rr||n instanceof $e||n instanceof ai||n instanceof ul)}function NI(n,e,t){if(!sN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Gp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function HE(n,e,t){if((e=Qe(e))instanceof rr)return e._internalPath;if(typeof e=="string")return PI(n,e);throw kp("Field path arguments must be of type string or ",n,!1,void 0,t)}var cz=new RegExp("[~\\*/\\[\\]]");function PI(n,e,t){if(e.search(cz)>=0)throw kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rr(...e.split("."))._internalPath}catch{throw kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(R.INVALID_ARGUMENT,a+n+u)}function aN(n,e){return n.some(t=>t.isEqual(e))}var Xo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new GE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Kp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},GE=class extends Xo{data(){return super.data()}};function Kp(n,e){return typeof e=="string"?PI(n,e):e instanceof rr?e._internalPath:e._delegate._internalPath}function uN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ll=class{},es=class extends ll{};function li(n,e,...t){let r=[];e instanceof ll&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof WE).length,a=o.filter(u=>u instanceof Fp).length;if(s>1||s>0&&a>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Fp=class n extends es{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return vN(e._query,t),new Tt(e.firestore,e.converter,Dw(e._query,t))}_parse(e){let t=ns(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fx(f,d);let y=[];for(let E of f)y.push(hx(u,o,E));g={arrayValue:{values:y}}}else g=hx(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fx(f,d),g=iN(a,s,f,d==="in"||d==="not-in");return we.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function cN(n,e,t){let r=e,i=Kp("where",n);return Fp._create(i,r,t)}var WE=class n extends ll{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ke.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)vN(s,u),s=Dw(s,u)}(e._query,t),new Tt(e.firestore,e.converter,Dw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var KE=class n extends es{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(o,s)}(e._query,this._field,this._direction);return new Tt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new tr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function lN(n,e="asc"){let t=e,r=Kp("orderBy",n);return KE._create(r,t)}var Vp=class n extends es{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Tt(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}};function dN(n){return $R("limit",n),Vp._create("limit",n,"F")}function hN(n){return $R("limitToLast",n),Vp._create("limitToLast",n,"L")}var Lp=class n extends es{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=yN(e,this.type,this._docOrFields,this._inclusive);return new Tt(e.firestore,e.converter,function(i,o){return new tr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function fN(...n){return Lp._create("startAt",n,!0)}function pN(...n){return Lp._create("startAfter",n,!1)}var jp=class n extends es{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=yN(e,this.type,this._docOrFields,this._inclusive);return new Tt(e.firestore,e.converter,function(i,o){return new tr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function gN(...n){return jp._create("endBefore",n,!1)}function mN(...n){return jp._create("endAt",n,!0)}function yN(n,e,t,r){if(t[0]=Qe(t[0]),t[0]instanceof Xo)return function(o,s,a,u,l){if(!u)throw new O(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Da(o))if(f.field.isKeyField())d.push(Ho(s,u.key));else{let g=u.data.field(f.field);if(Bp(g))throw new O(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new O(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Mr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ns(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new O(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let E=0;E<d.length;E++){let S=d[E];if(g[E].field.isKeyField()){if(typeof S!="string")throw new O(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!rI(s)&&S.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let A=s.path.child(Ce.fromString(S));if(!H.isDocumentKey(A))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let F=new H(A);y.push(Ho(a,F))}else{let A=iN(u,l,S);y.push(A)}}return new Mr(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hx(n,e,t){if(typeof(t=Qe(t))=="string"){if(t==="")throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rI(e)&&t.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ce.fromString(t));if(!H.isDocumentKey(r))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ho(n,new H(r))}if(t instanceof $e)return Ho(n,t._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gp(t)}.`)}function fx(n,e){if(!Array.isArray(n)||n.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vN(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ba=class{convertValue(e,t="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ts(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ke(s.doubleValue));return new ul(o)}convertGeoPoint(e){return new Jo(Ke(e.latitude),Ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){let t=ii(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ce.fromString(e);Z(dR(r));let i=new Gi(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||ot(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Qp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var QE=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};var ri=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vn=class extends Xo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Kp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$i=class extends Vn{data(e={}){return super.data(e)}},ir=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ri(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $i(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new $i(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new $i(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:lz(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function lz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function OI(n,e){return n instanceof Vn&&e instanceof Vn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ir&&e instanceof ir&&n._firestore===e._firestore&&MI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _N(n){n=be(n,$e);let e=be(n.firestore,Xe);return jR(St(e),n._key).then(t=>LI(e,n,t))}var ui=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};function wN(n){n=be(n,$e);let e=be(n.firestore,Xe),t=St(e),r=new ui(e);return rz(t,n._key).then(i=>new Vn(e,r,n._key,i,new ri(i!==null&&i.hasLocalMutations,!0),n.converter))}function EN(n){n=be(n,$e);let e=be(n.firestore,Xe);return jR(St(e),n._key,{source:"server"}).then(t=>LI(e,n,t))}function IN(n){n=be(n,Tt);let e=be(n.firestore,Xe),t=St(e),r=new ui(e);return uN(n._query),UR(t,n._query).then(i=>new ir(e,r,n,i))}function DN(n){n=be(n,Tt);let e=be(n.firestore,Xe),t=St(e),r=new ui(e);return iz(t,n._query).then(i=>new ir(e,r,n,i))}function CN(n){n=be(n,Tt);let e=be(n.firestore,Xe),t=St(e),r=new ui(e);return UR(t,n._query,{source:"server"}).then(i=>new ir(e,r,n,i))}function kI(n,e,t){n=be(n,$e);let r=be(n.firestore,Xe),i=Qp(n.converter,e,t);return Ka(r,[Wp(ns(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,nt.none())])}function FI(n,e,t,...r){n=be(n,$e);let i=be(n.firestore,Xe),o=ns(i),s;return s=typeof(e=Qe(e))=="string"||e instanceof rr?RI(o,"updateDoc",n._key,e,t,r):xI(o,"updateDoc",n._key,e),Ka(i,[s.toMutation(n._key,nt.exists(!0))])}function bN(n){return Ka(be(n.firestore,Xe),[new Zi(n._key,nt.none())])}function TN(n,e){let t=be(n.firestore,Xe),r=yl(n),i=Qp(n.converter,e);return Ka(t,[Wp(ns(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,nt.exists(!1))]).then(()=>r)}function VI(n,...e){var t,r,i;n=Qe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||VE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VE(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof $e)l=be(n.firestore,Xe),d=za(n._key.path),u={next:f=>{e[s]&&e[s](LI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=be(n,Tt);l=be(f.firestore,Xe),d=f._query;let g=new ui(l);u={next:y=>{e[s]&&e[s](new ir(l,g,f,y))},error:e[s+1],complete:e[s+2]},uN(n._query)}return function(g,y,E,S){let A=new ja(S),F=new al(y,A,E);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return fI(yield Ua(g),F)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return pI(yield Ua(g),F)}))}}(St(l),d,a,u)}function SN(n,e){return oz(St(n=be(n,Xe)),VE(e)?e:{next:e})}function Ka(n,e){return function(r,i){let o=new _t;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return L4(yield CI(r),i,o)})),o.promise}(St(n),e)}function LI(n,e,t){let r=t.docs.get(e._key),i=new ui(n);return new Vn(n,i,e._key,r,new ri(t.hasPendingWrites,t.fromCache),e.converter)}var dz={maxAttempts:5};var Up=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ns(e)}set(e,t,r){this._verifyNotCommitted();let i=Ui(e,this._firestore),o=Qp(i.converter,t,r),s=Wp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,nt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ui(e,this._firestore),s;return s=typeof(t=Qe(t))=="string"||t instanceof rr?RI(this._dataReader,"WriteBatch.update",o._key,t,r,i):xI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ui(e,this._firestore);return this._mutations=this._mutations.concat(new Zi(t._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ui(n,e){if((n=Qe(n)).firestore!==e)throw new O(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var YE=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ns(t)}get(t){let r=Ui(t,this._firestore),i=new QE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new Xo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Xo(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=Ui(t,this._firestore),s=Qp(o.converter,r,i),a=Wp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Ui(t,this._firestore),a;return a=typeof(r=Qe(r))=="string"||r instanceof rr?RI(this._dataReader,"Transaction.update",s._key,r,i,o):xI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Ui(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ui(e,this._firestore),r=new ui(this._firestore);return super.get(e).then(i=>new Vn(this._firestore,r,t._key,i._document,new ri(!1,!1),t.converter))}};function AN(n,e,t){n=be(n,Xe);let r=Object.assign(Object.assign({},dz),t);return function(o){if(o.maxAttempts<1)throw new O(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new _t;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield ez(o);new kE(o.asyncQueue,l,a,s,u).au()})),u.promise}(St(n),i=>e(new YE(n,i)),r)}function MN(){return new cl("deleteField")}function xN(){return new BE("serverTimestamp")}function RN(...n){return new $E("arrayUnion",n)}function NN(...n){return new zE("arrayRemove",n)}function PN(n){return new qE("increment",n)}(function(e,t=!0){(function(i){$a=i})(dD),Du(new uo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Xe(new ew(r.getProvider("auth-internal")),new iw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gi(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),gi(dM,"4.7.3",e),gi(dM,"4.7.3","esm2017")})();var hz="@firebase/firestore-compat",fz="0.3.38";function qI(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ON(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function kN(){if(!Sx())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Yp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return kN(),new n(Rr.fromBase64String(e))}static fromUint8Array(e){return ON(),new n(Rr.fromUint8Array(e))}toBase64(){return kN(),this._delegate.toBase64()}toUint8Array(){return ON(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function jI(n){return pz(n,["next","error","complete"])}function pz(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var UI=class{enableIndexedDbPersistence(e,t){return WR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return KR(e._delegate)}clearIndexedDbPersistence(e){return YR(e._delegate)}},Zp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){zR(this._delegate,e,t,r)}enableNetwork(){return JR(this._delegate)}disableNetwork(){return XR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ZR(this._delegate)}onSnapshotsInSync(e){return SN(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Za(this,SI(this._delegate,e))}catch(t){throw on(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nr(this,yl(this._delegate,e))}catch(t){throw on(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,qR(this._delegate,e))}catch(t){throw on(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return AN(this._delegate,t=>e(new Jp(this,t)))}batch(){return St(this._delegate),new Xp(new Up(this._delegate,e=>Ka(this._delegate,e)))}loadBundle(e){return eN(this._delegate,e)}namedQuery(e){return tN(this._delegate,e).then(t=>t?new as(this,t):null)}},Qa=class extends Ba{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yp(new Rr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Nr.forKey(t,this.firestore,null)}};function gz(n){px(n)}var Jp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Qa(e)}get(e){let t=is(e);return this._delegate.get(t).then(r=>new os(this._firestore,new Vn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=is(e);return r?(qI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=is(e);return this._delegate.delete(t),this}},Xp=class{constructor(e){this._delegate=e}set(e,t,r){let i=is(e);return r?(qI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=is(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ya=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new $i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ss(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Qa(e),t),i.set(t,o)),o}};Ya.INSTANCES=new WeakMap;var Nr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qa(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new $e(t._delegate,r,new H(e)))}static forKey(e,t,r){return new n(t,new $e(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Za(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Za(this.firestore,SI(this._delegate,e))}catch(t){throw on(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Qe(e),e instanceof $e?AI(this._delegate,e):!1}set(e,t){t=qI("DocumentReference.set",t);try{return t?kI(this._delegate,e,t):kI(this._delegate,e)}catch(r){throw on(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?FI(this._delegate,e):FI(this._delegate,e,t,...r)}catch(i){throw on(i,"updateDoc()","DocumentReference.update()")}}delete(){return bN(this._delegate)}onSnapshot(...e){let t=FN(e),r=VN(e,i=>new os(this.firestore,new Vn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return VI(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=wN(this._delegate):e?.source==="server"?t=EN(this._delegate):t=_N(this._delegate),t.then(r=>new os(this.firestore,new Vn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ya.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function on(n,e,t){return n.message=n.message.replace(e,t),n}function FN(n){for(let e of n)if(typeof e=="object"&&!jI(e))return e;return{}}function VN(n,e){var t,r;let i;return jI(n[0])?i=n[0]:jI(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var os=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OI(this._delegate,e._delegate)}},ss=class extends os{data(e){let t=this._delegate.data(e);return this._delegate._converter||gx(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},as=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Qa(e)}where(e,t,r){try{return new n(this.firestore,li(this._delegate,cN(e,t,r)))}catch(i){throw on(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,li(this._delegate,lN(e,t)))}catch(r){throw on(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,li(this._delegate,dN(e)))}catch(t){throw on(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,li(this._delegate,hN(e)))}catch(t){throw on(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,li(this._delegate,fN(...e)))}catch(t){throw on(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,li(this._delegate,pN(...e)))}catch(t){throw on(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,li(this._delegate,gN(...e)))}catch(t){throw on(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,li(this._delegate,mN(...e)))}catch(t){throw on(t,"endAt()","Query.endAt()")}}isEqual(e){return MI(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=DN(this._delegate):e?.source==="server"?t=CN(this._delegate):t=IN(this._delegate),t.then(r=>new vl(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=FN(e),r=VN(e,i=>new vl(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return VI(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ya.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},BI=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ss(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},vl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ss(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new BI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ss(this._firestore,r))})}isEqual(e){return OI(this._delegate,e._delegate)}},Za=class n extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Nr(this.firestore,e):null}doc(e){try{return e===void 0?new Nr(this.firestore,yl(this._delegate)):new Nr(this.firestore,yl(this._delegate,e))}catch(t){throw on(t,"doc()","CollectionReference.doc()")}}add(e){return TN(this._delegate,e).then(t=>new Nr(this.firestore,t))}isEqual(e){return AI(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ya.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function is(n){return be(n,$e)}var $I=class n{constructor(...e){this._delegate=new rr(...e)}static documentId(){return new n(st.keyField().canonicalString())}isEqual(e){return e=Qe(e),e instanceof rr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var zI=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=xN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=MN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=RN(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=NN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=PN(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var mz={Firestore:Zp,GeoPoint:Jo,Timestamp:Je,Blob:Yp,Transaction:Jp,WriteBatch:Xp,DocumentReference:Nr,DocumentSnapshot:os,Query:as,QueryDocumentSnapshot:ss,QuerySnapshot:vl,CollectionReference:Za,FieldPath:$I,FieldValue:zI,setLogLevel:gz,CACHE_SIZE_UNLIMITED:HR};function yz(n,e){n.INTERNAL.registerComponent(new uo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mz)))}function vz(n){yz(n,(e,t)=>new Zp(e,t,new UI)),n.registerVersion(hz,fz)}vz(Ht);function _z(n,e=Mu){return new ue(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function LN(n,e){return _z(n,e)}function wz(n,e){return LN(n,e).pipe(po(void 0),Ru(),re(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function WI(n,e){return LN(n,e).pipe(re(t=>({payload:t,type:"query"})))}var eg=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=zN(r,t);return new ng(i,o,this.afs)}snapshotChanges(){return wz(this.ref,this.afs.schedulers.outsideAngular).pipe(hn)}valueChanges(e={}){return this.snapshotChanges().pipe(re(({payload:t})=>e.idField?oe(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(hn)}};function tg(n,e){return WI(n,e).pipe(po(void 0),Ru(),re(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function jN(n,e,t){return tg(n,t).pipe(fo((r,i)=>Ez(r,i.map(o=>o.payload),e),[]),hm(),re(r=>r.map(i=>({type:i.type,payload:i}))))}function Ez(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=Iz(n,r))}),n}function HI(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function Iz(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return HI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return HI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HI(n,e.oldIndex,1);break}return n}function UN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ng=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(po(void 0),Ru(),Et(([r,i])=>i.length>0||!r),re(([,r])=>r),hn)}auditTrail(e){return this.stateChanges(e).pipe(fo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=UN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn)}valueChanges(e={}){return WI(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.payload.docs.map(r=>e.idField?oe(L({},r.data()),{[e.idField]:r.id}):r.data())),hn)}get(e){return Ie(this.query.get(e)).pipe(hn)}add(e){return this.ref.add(e)}doc(e){return new eg(this.ref.doc(e),this.afs)}},GI=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?tg(this.query,this.afs.schedulers.outsideAngular).pipe(hn):tg(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.filter(r=>e.indexOf(r.type)>-1)),Et(t=>t.length>0),hn)}auditTrail(e){return this.stateChanges(e).pipe(fo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=UN(e);return jN(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn)}valueChanges(e={}){return WI(this.query,this.afs.schedulers.outsideAngular).pipe(re(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),hn)}get(e){return Ie(this.query.get(e)).pipe(hn)}},BN=new G("angularfire2.enableFirestorePersistence"),$N=new G("angularfire2.firestore.persistenceSettings"),Dz=new G("angularfire2.firestore.settings"),Cz=new G("angularfire2.firestore.use-emulator");function zN(n,e=t=>t){return{query:e(n),ref:n}}var _l=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,E,S,A,F,$){this.schedulers=u;let j=Rc(t,a,r),Q=d;f&&U_(j,a,g,E,S,A,y,F),[this.firestore,this.persistenceEnabled$]=Nf(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let ie=a.runOutsideAngular(()=>j.firestore());if(o&&ie.settings(o),Q&&ie.useEmulator(...Q),i&&!Jr(s)){let ee=()=>{try{return Ie(ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),te(!1)}};return[ie,a.runOutsideAngular(ee)]}else return[ie,te(!1)]},[o,Q,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=zN(i,r),a=this.schedulers.ngZone.run(()=>o);return new ng(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new GI(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new eg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(z(ca),z(la,8),z(BN,8),z(Dz,8),z(bt),z(Ne),z(Mf),z($N,8),z(Cz,8),z(ko,8),z(O_,8),z(k_,8),z(F_,8),z(V_,8),z(L_,8),z(j_,8),z(Po,8))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),qN=(()=>{class n{constructor(){Ht.registerVersion("angularfire",Oo.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BN,useValue:!0},{provide:$N,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ln({type:n});static \u0275inj=cn({providers:[_l]})}return n})();var Pr=(()=>{class n{constructor(){this.client=P(_l),this.afAuth=P(ko)}getTrainings(){return new ue(t=>{this.afAuth.currentUser.then(r=>{let i=r?.uid;i?this.client.collection("Training",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{t.next(o)}):t.next([])}).catch(()=>t.next([]))})}getMeals(){return new ue(t=>{this.afAuth.currentUser.then(r=>{let i=r?.uid;i?this.client.collection("Meal",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{console.log("Pobrane posi\u0142ki:",o),t.next(o)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",r),t.next([])})})}addTraining(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{let i=r?.uid;i&&this.client.collection("Training").doc(t.id).set(oe(L({},t),{uid:i,date:t.date.toISOString()})).then(()=>console.log("Training added/updated successfully")).catch(o=>console.error("Error adding/updating training:",o))}).catch(r=>console.error("Error getting user:",r))}addMeal(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){let i=t.id||this.client.createId();this.client.collection("Meal").doc(i).set(oe(L({},t),{uid:r.uid,date:t.date.toISOString()})).then(()=>console.log("Meal added/updated successfully")).catch(o=>console.error("Error adding/updating meal:",o))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(t.id).update(oe(L({},t),{date:t.date.toISOString()})):Promise.reject("User not authenticated"))}updateTraining(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(t.id).update(oe(L({},t),{date:t.date.toISOString()})):Promise.reject("User not authenticated"))}getTrainingsByDate(t){return console.log("Pobieranie trening\xF3w dla daty:",t),new ue(r=>{this.afAuth.currentUser.then(i=>{let o=i?.uid;if(o){let s=new Date(t);s.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Training",u=>u.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane treningi:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania trening\xF3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(t){return console.log("Pobieranie posi\u0142k\xF3w dla daty:",t),new ue(r=>{this.afAuth.currentUser.then(i=>{let o=i?.uid;if(o){let s=new Date(t);s.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Meal",u=>u.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane posi\u0142ki:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(t,r){return new ue(i=>{this.afAuth.currentUser.then(o=>{let s=o?.uid;s?this.client.collection("Meal",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(t,r){return new ue(i=>{this.afAuth.currentUser.then(o=>{let s=o?.uid;s?this.client.collection("Training",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xF3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(t).delete().then(()=>console.log("Training deleted successfully")).catch(o=>console.error("Error deleting training:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(t).delete().then(()=>console.log("Meal deleted successfully")).catch(o=>console.error("Error deleting meal:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var XN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(So),Ae(Mi))}}static{this.\u0275dir=kt({type:n})}}return n})(),eP=(()=>{class n extends XN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=bo(n)))(i||n)}})()}static{this.\u0275dir=kt({type:n,features:[fr]})}}return n})(),QI=new G("");var bz={provide:QI,useExisting:Ti(()=>nu),multi:!0};function Tz(){let n=Yr()?Yr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Sz=new G(""),nu=(()=>{class n extends XN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Tz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(So),Ae(Mi),Ae(Sz,8))}}static{this.\u0275dir=kt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Qs([bz]),fr]})}}return n})();function Az(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var YI=new G(""),tP=new G("");function Mz(n){return Az(n.value)?{required:!0}:null}function HN(n){return null}function nP(n){return n!=null}function rP(n){return xi(n)?Ie(n):n}function iP(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function oP(n,e){return e.map(t=>t(n))}function xz(n){return!n.validate}function sP(n){return n.map(e=>xz(e)?e:t=>e.validate(t))}function Rz(n){if(!n)return null;let e=n.filter(nP);return e.length==0?null:function(t){return iP(oP(t,e))}}function ZI(n){return n!=null?Rz(sP(n)):null}function Nz(n){if(!n)return null;let e=n.filter(nP);return e.length==0?null:function(t){let r=oP(t,e).map(rP);return cm(r).pipe(re(iP))}}function JI(n){return n!=null?Nz(sP(n)):null}function GN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Pz(n){return n._rawValidators}function Oz(n){return n._rawAsyncValidators}function KI(n){return n?Array.isArray(n)?n:[n]:[]}function ig(n,e){return Array.isArray(n)?n.includes(e):n===e}function WN(n,e){let t=KI(e);return KI(n).forEach(i=>{ig(t,i)||t.push(i)}),t}function KN(n,e){return KI(e).filter(t=>!ig(n,t))}var og=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},eu=class extends og{get formDirective(){return null}get path(){return null}},bl=class extends og{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},sg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},kz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eQ=oe(L({},kz),{"[class.ng-submitted]":"isSubmitted"}),lg=(()=>{class n extends sg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(bl,2))}}static{this.\u0275dir=kt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ks("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[fr]})}}return n})(),dg=(()=>{class n extends sg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(eu,10))}}static{this.\u0275dir=kt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ks("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[fr]})}}return n})();var wl="VALID",rg="INVALID",Ja="PENDING",El="DISABLED",tu=class{},ag=class extends tu{constructor(e,t){super(),this.value=e,this.source=t}},Dl=class extends tu{constructor(e,t){super(),this.pristine=e,this.source=t}},Cl=class extends tu{constructor(e,t){super(),this.touched=e,this.source=t}},Xa=class extends tu{constructor(e,t){super(),this.status=e,this.source=t}};function aP(n){return(hg(n)?n.validators:n)||null}function Fz(n){return Array.isArray(n)?ZI(n):n||null}function uP(n,e){return(hg(e)?e.asyncValidators:n)||null}function Vz(n){return Array.isArray(n)?JI(n):n||null}function hg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Lz(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function jz(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var ug=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=oc(()=>this.statusReactive()),this.statusReactive=Lt(void 0),this._pristine=oc(()=>this.pristineReactive()),this.pristineReactive=Lt(!0),this._touched=oc(()=>this.touchedReactive()),this.touchedReactive=Lt(!1),this._events=new Ge,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Yn(this.statusReactive)}set status(e){Yn(()=>this.statusReactive.set(e))}get valid(){return this.status===wl}get invalid(){return this.status===rg}get pending(){return this.status==Ja}get disabled(){return this.status===El}get enabled(){return this.status!==El}get pristine(){return Yn(this.pristineReactive)}set pristine(e){Yn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Yn(this.touchedReactive)}set touched(e){Yn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KN(e,this._rawAsyncValidators))}hasValidator(e){return ig(this._rawValidators,e)}hasAsyncValidator(e){return ig(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Cl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Cl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dl(!0,r))}markAsPending(e={}){this.status=Ja;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=El,this.errors=null,this._forEachChild(i=>{i.disable(oe(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ag(this.value,r)),this._events.next(new Xa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wl,this._forEachChild(r=>{r.enable(oe(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wl||this.status===Ja)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ag(this.value,t)),this._events.next(new Xa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?El:wl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ja,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=rP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new _e,this.statusChanges=new _e}_calculateStatus(){return this._allControlsDisabled()?El:this.errors?rg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ja)?Ja:this._anyControlsHaveStatus(rg)?rg:wl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Dl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Cl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Fz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Vz(this._rawAsyncValidators)}},cg=class extends ug{constructor(e,t,r){super(aP(t),uP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jz(this,!0,e),Object.keys(e).forEach(r=>{Lz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var XI=new G("CallSetDisabledState",{providedIn:"root",factory:()=>e0}),e0="always";function Uz(n,e){return[...e.path,n]}function cP(n,e,t=e0){lP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),$z(n,e),qz(n,e),zz(n,e),Bz(n,e)}function QN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lP(n,e){let t=Pz(n);e.validator!==null?n.setValidators(GN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Oz(n);e.asyncValidator!==null?n.setAsyncValidators(GN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();QN(e._rawValidators,i),QN(e._rawAsyncValidators,i)}function $z(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&dP(n,e)})}function zz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&dP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function dP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Hz(n,e){n==null,lP(n,e)}function Gz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Wz(n){return Object.getPrototypeOf(n.constructor)===eP}function Kz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Qz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===nu?t=o:Wz(o)?r=o:i=o}),i||r||t||null}var Yz={provide:eu,useExisting:Ti(()=>Tl)},Il=Promise.resolve(),Tl=(()=>{class n extends eu{get submitted(){return Yn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=oc(()=>this.submittedReactive()),this.submittedReactive=Lt(!1),this._directives=new Set,this.ngSubmit=new _e,this.form=new cg({},ZI(t),JI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Il.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Il.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Il.then(()=>{let r=this._findContainer(t.path),i=new cg({});Hz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Il.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Il.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Kz(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ae(YI,10),Ae(tP,10),Ae(XI,8))}}static{this.\u0275dir=kt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qs([Yz]),fr]})}}return n})();function YN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Zz=class extends ug{constructor(e=null,t,r){super(aP(t),uP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ZN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Jz={provide:bl,useExisting:Ti(()=>Sl)},JN=Promise.resolve(),Sl=(()=>{class n extends bl{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Zz,this._registered=!1,this.name="",this.update=new _e,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Qz(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Gz(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){JN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ri(r);JN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Uz(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ae(eu,9),Ae(YI,10),Ae(tP,10),Ae(QI,10),Ae(_r,8),Ae(XI,8))}}static{this.\u0275dir=kt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qs([Jz]),fr,xn]})}}return n})(),fg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=kt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),Xz={provide:QI,useExisting:Ti(()=>t0),multi:!0},t0=(()=>{class n extends eP{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=bo(n)))(i||n)}})()}static{this.\u0275dir=kt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&se("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Qs([Xz]),fr]})}}return n})();var eq=(()=>{class n{constructor(){this._validator=HN}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):HN,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=kt({type:n,features:[xn]})}}return n})();var tq={provide:YI,useExisting:Ti(()=>Al),multi:!0};var Al=(()=>{class n extends eq{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ri,this.createValidator=t=>Mz}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=bo(n)))(i||n)}})()}static{this.\u0275dir=kt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&tc("required",i._enabled?"":null)},inputs:{required:"required"},features:[Qs([tq]),fr]})}}return n})();var nq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ln({type:n})}static{this.\u0275inj=cn({})}}return n})();var $t=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:XI,useValue:t.callSetDisabledState??e0}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ln({type:n})}static{this.\u0275inj=cn({imports:[nq]})}}return n})();function rq(n,e){if(n&1){let t=Rn();U(0,"div",5)(1,"label",9),Y(2),V(),U(3,"input",10),Jt("ngModelChange",function(i){Ft(t);let o=Oe();return jt(o.model.calories,i)||(o.model.calories=i),Vt(i)}),V()()}if(n&2){let t=Oe();W(2),vt(t.caloriesLabel),W(),Zt("ngModel",t.model.calories)}}function iq(n,e){if(n&1){let t=Rn();U(0,"div",5)(1,"label",11),Y(2),V(),U(3,"input",12),Jt("ngModelChange",function(i){Ft(t);let o=Oe();return jt(o.model.burnedKcal,i)||(o.model.burnedKcal=i),Vt(i)}),V()()}if(n&2){let t=Oe();W(2),vt(t.burnedCalories),W(),Zt("ngModel",t.model.burnedKcal)}}function oq(n,e){if(n&1){let t=Rn();U(0,"div",5)(1,"label",13),Y(2),V(),U(3,"input",14),Jt("ngModelChange",function(i){Ft(t);let o=Oe();return jt(o.model.weight,i)||(o.model.weight=i),Vt(i)}),V()()}if(n&2){let t=Oe();W(2),vt(t.weightLabel),W(),Zt("ngModel",t.model.weight)}}function sq(n,e){if(n&1){let t=Rn();U(0,"div",5)(1,"label",15),Y(2),V(),U(3,"input",16),Jt("ngModelChange",function(i){Ft(t);let o=Oe();return jt(o.model.time,i)||(o.model.time=i),Vt(i)}),V()()}if(n&2){let t=Oe();W(2),vt(t.timeLabel),W(),Zt("ngModel",t.model.time)}}function aq(n,e){if(n&1){let t=Rn();U(0,"div",5)(1,"label",17),Y(2),V(),U(3,"input",18),Jt("ngModelChange",function(i){Ft(t);let o=Oe();return jt(o.model.date,i)||(o.model.date=i),Vt(i)}),se("ngModelChange",function(i){Ft(t);let o=Oe();return Vt(o.onDateChange(i))}),V()()}if(n&2){let t=Oe();W(2),vt(t.dateLabel),W(),Zt("ngModel",t.model.date)}}var fP=(()=>{class n{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.save=new _e}onSubmit(){this.save.emit(this.model)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Me],decls:17,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"h5",1),Y(2),V(),Qn(3,"button",2),V(),U(4,"div",3)(5,"form",4),se("ngSubmit",function(){return i.onSubmit()}),U(6,"div",5)(7,"label",6),Y(8),V(),U(9,"input",7),Jt("ngModelChange",function(s){return jt(i.model.name,s)||(i.model.name=s),s}),V()(),pr(10,rq,4,2,"div",5)(11,iq,4,2,"div",5)(12,oq,4,2,"div",5)(13,sq,4,2,"div",5)(14,aq,4,2,"div",5),U(15,"button",8),Y(16," Zapisz zmiany "),V()()()),r&2&&(W(2),vt(i.title),W(6),vt(i.nameLabel),W(),Zt("ngModel",i.model.name),W(),Yt(i.caloriesLabel?10:-1),W(),Yt(i.burnedCalories?11:-1),W(),Yt(i.weightLabel?12:-1),W(),Yt(i.timeLabel?13:-1),W(),Yt(i.dateLabel?14:-1))},dependencies:[$t,fg,nu,t0,lg,dg,Al,Sl,Tl],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return n})();var no=(()=>{class n{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.dateLabel="",this.model={},this.save=new _e}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",dateLabel:"dateLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Me],decls:5,vars:9,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","model"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),se("save",function(s){return i.save.emit(s)}),V()()()()()),r&2&&(Ze("id",i.modalId),W(4),Ze("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("model",i.model))},dependencies:[fP],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}"]})}}return n})();var pP=(()=>{class n{constructor(){this.trainingAndMealService=P(Pr),this.meals=[],this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}addMeal(t){this.trainingAndMealService.addMeal(t),this.meals.push(t),console.log("Meal added:",t)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-meal-modal"]],standalone:!0,features:[Me],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","dateLabel","model"]],template:function(r,i){r&1&&(U(0,"app-modal",0),se("save",function(s){return i.addMeal(s)}),V()),r&2&&Ze("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("dateLabel","Data")("model",i.model)},dependencies:[$t,no]})}}return n})();var gP=(()=>{class n{constructor(){this.trainingAndMealService=P(Pr),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,time:"",date:new Date,id:""}}addMeal(t){throw new Error("Method not implemented.")}addTraining(t){this.trainingAndMealService.addTraining(t),this.training.push(t),console.log("Meal added:",t)}onDateChange(t){this.model.date=new Date(`${t}T00:00:00`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-training-modal"]],standalone:!0,features:[Me],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","model"]],template:function(r,i){r&1&&(U(0,"app-modal",0),se("save",function(s){return i.addTraining(s)}),V()),r&2&&Ze("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("model",i.model)},dependencies:[$t,no]})}}return n})();var mP=(()=>{class n{constructor(){this.meal=null,this.Save=new _e,this.close=new _e,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}ngOnChanges(t){t.meal&&this.meal&&(this.model=oe(L({},this.meal),{date:new Date(this.meal.date)}))}saveMeal(t){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[xn,Me],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){r&1&&(U(0,"app-modal",0),se("save",function(s){return i.saveMeal(s)}),V()),r&2&&Ze("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[$t,no]})}}return n})();var yP=(()=>{class n{constructor(){this.training=null,this.Save=new _e,this.close=new _e,this.model={name:"",burnedKcal:0,time:"",date:new Date,id:""}}ngOnChanges(t){t.training&&this.training&&(this.model=oe(L({},this.training),{date:new Date(this.training.date)}))}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[xn,Me],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","model"]],template:function(r,i){r&1&&(U(0,"app-modal",0),se("save",function(){return i.saveTraining()}),V()),r&2&&Ze("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("model",i.model)},dependencies:[$t,no]})}}return n})();var uq=(n,e)=>e.date,vP=(n,e)=>e.id,cq=n=>["/day-details",n];function lq(n,e){if(n&1&&(U(0,"div",7),Y(1),V()),n&2){let t=e.$implicit;W(),vt(t)}}function dq(n,e){if(n&1){let t=Rn();U(0,"li"),Y(1),U(2,"div",14)(3,"button",15),se("click",function(){let i=Ft(t).$implicit,o=Oe(3);return Vt(o.editMeal(i))}),Y(4," Edytuj "),V(),U(5,"button",16),se("click",function(){let i=Ft(t).$implicit,o=Oe(3);return Vt(o.deleteMeal(i.id))}),Y(6," Usu\u0144 "),V()()()}if(n&2){let t=e.$implicit;W(),Fh(" ",t.name," - ",t.calories," kcal (",t.weight," g) ")}}function hq(n,e){if(n&1&&(U(0,"div")(1,"h4"),Y(2,"Posi\u0142ki:"),V(),U(3,"ul"),gr(4,dq,7,3,"li",null,vP),V()()),n&2){let t=Oe().$implicit,r=Oe();W(4),mr(r.getMealsForDay(t.date))}}function fq(n,e){if(n&1){let t=Rn();U(0,"li"),Y(1),U(2,"div",14)(3,"button",17),se("click",function(){let i=Ft(t).$implicit,o=Oe(3);return Vt(o.editTraining(i))}),Y(4," Edytuj "),V(),U(5,"button",16),se("click",function(){let i=Ft(t).$implicit,o=Oe(3);return Vt(o.deleteTraining(i.id))}),Y(6," Usu\u0144 "),V()()()}if(n&2){let t=e.$implicit;W(),Fh(" ",t.name," - ",t.burnedKcal," kcal (",t.time,") ")}}function pq(n,e){if(n&1&&(U(0,"div")(1,"h4"),Y(2,"Treningi:"),V(),U(3,"ul"),gr(4,fq,7,3,"li",null,vP),V()()),n&2){let t=Oe().$implicit,r=Oe();W(4),mr(r.getTrainingsForDay(t.date))}}function gq(n,e){if(n&1&&(U(0,"div",11)(1,"h3",12)(2,"a",13),Y(3),V()(),pr(4,hq,6,0,"div")(5,pq,6,0,"div"),V()),n&2){let t=e.$implicit,r=Oe();Ks("other-month",t.isOtherMonth),W(2),Ze("routerLink",lS(6,cq,t.date.toISOString())),W(),It(" ",t.date.getDate()," "),W(),Yt(r.getMealsForDay(t.date).length>0?4:-1),W(),Yt(r.getTrainingsForDay(t.date).length>0?5:-1)}}var _P=(()=>{class n{constructor(){this.TrainingAndMealService=P(Pr),this.meals=Lt([]),this.trainings=Lt([]),this.calendarDays=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.showModal=Lt(!1),this.dayNames=["Pn","Wt","\u015Ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar()}loadData(){this.TrainingAndMealService.getTrainings().subscribe(t=>{let r=t.map((i,o)=>oe(L({},i),{id:i.id||`training-${o}-${new Date().getTime()}`,date:new Date(i.date)}));this.trainings.set(r)}),this.TrainingAndMealService.getMeals().subscribe(t=>{let r=t.map((i,o)=>oe(L({},i),{id:i.id||`meal-${o}-${new Date().getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}getMealsForDay(t){return this.meals().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}getTrainingsForDay(t){return this.trainings().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}generateCalendar(){let t=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),s=(t.getDay()||7)-1,u=7-(r.getDay()||7);this.calendarDays=[];for(let l=s;l>0;l--){let d=new Date(this.currentYear,this.currentMonth,-l+1);this.calendarDays.push({date:d,isOtherMonth:!0})}for(let l=1;l<=i;l++){let d=new Date(this.currentYear,this.currentMonth,l);this.calendarDays.push({date:d,isOtherMonth:!1})}for(let l=1;l<=u;l++){let d=new Date(this.currentYear,this.currentMonth+1,l);this.calendarDays.push({date:d,isOtherMonth:!0})}}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}saveEditedMeal(t){this.TrainingAndMealService.updateMeal(t).then(()=>{this.meals.set(this.meals().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xF3buj ponownie.")})}editMeal(t){this.selectedMeal=L({},t)}closeModal(){this.showModal.set(!1)}saveEditedTraining(t){this.TrainingAndMealService.updateTraining(t).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xF3buj ponownie.")})}editTraining(t){this.selectedTraining=L({},t)}deleteMeal(t){this.TrainingAndMealService.deleteMeal(t).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xF3buj ponownie.")})}deleteTraining(t){this.TrainingAndMealService.deleteTraining(t).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xF3buj ponownie.")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-calendar"]],standalone:!0,features:[Me],decls:22,vars:4,consts:[[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"calendar-container"],[1,"calendar-header"],[1,"btn","btn-primary",3,"click"],[1,"calendar-days"],[1,"day-name"],[1,"day",3,"other-month"],[3,"Save","close","meal"],[3,"Save","close","training"],[1,"day"],[1,"day-number"],[3,"routerLink"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"button",1),Y(2," Dodaj Posi\u0142ek "),V(),U(3,"button",2),Y(4," Dodaj Trening "),V()(),U(5,"div",3)(6,"div",4)(7,"button",5),se("click",function(){return i.prevMonth()}),Y(8,"\u2190 Poprzedni"),V(),U(9,"h2"),Y(10),V(),U(11,"button",5),se("click",function(){return i.nextMonth()}),Y(12,"Nast\u0119pny \u2192"),V()(),U(13,"div",6),gr(14,lq,2,1,"div",7,nc),gr(16,gq,6,8,"div",8,uq),V()(),Qn(18,"app-meal-modal")(19,"app-training-modal"),U(20,"app-edit",9),se("Save",function(s){return i.saveEditedMeal(s)})("close",function(){return i.closeModal()}),V(),U(21,"app-edit-training",10),se("Save",function(s){return i.saveEditedTraining(s)})("close",function(){return i.closeModal()}),V()),r&2&&(W(10),yv("",i.months[i.currentMonth]," ",i.currentYear,""),W(4),mr(i.dayNames),W(2),mr(i.calendarDays),W(4),Ze("meal",i.selectedMeal),W(),Ze("training",i.selectedTraining))},dependencies:[Mo,pP,Sf,Tf,gP,mP,yP],styles:[".calendar-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;align-items:center;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:10px;color:#333}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:20px}.calendar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:16px;cursor:pointer;transition:background .3s}.calendar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:#2f5957}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}.calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:15px;text-align:center;cursor:pointer;transition:transform .2s;color:#333}.day[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.day-name[_ngcontent-%COMP%]{font-weight:700;padding:10px 0;color:#333}.day.other-month[_ngcontent-%COMP%]{background:#e0e0e0;color:#888}.calendar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333}.day-number[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#006400;text-decoration:none}.day-number[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();var wP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-home"]],standalone:!0,features:[Me],decls:1,vars:0,template:function(r,i){r&1&&Qn(0,"app-calendar")},dependencies:[_P]})}}return n})();var ro=(()=>{class n{isAuthenticated(){return this.currentUserSubject.value!==null}constructor(){this.afAuth=P(ko),this.currentUserSubject=new yt(null),this.afAuth.authState.subscribe(t=>{this.currentUserSubject.next(t)})}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}logout(){return this.afAuth.signOut()}getCurrentUser(){return this.currentUserSubject.asObservable()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pg=(()=>{class n{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.emailChange=new _e,this.passwordChange=new _e,this.formSubmit=new _e}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onSubmit(){this.email&&this.password?this.formSubmit.emit({email:this.email,password:this.password}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password"},outputs:{emailChange:"emailChange",passwordChange:"passwordChange",formSubmit:"formSubmit"},standalone:!0,features:[Me],decls:14,vars:4,consts:[[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o",3,"ngModelChange","ngModel"],["type","submit",1,"btn"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"h2"),Y(2),V(),U(3,"form",1),se("ngSubmit",function(){return i.onSubmit()}),U(4,"div",2)(5,"label",3),Y(6,"E-mail"),V(),U(7,"input",4),Jt("ngModelChange",function(s){return jt(i.email,s)||(i.email=s),s}),se("ngModelChange",function(){return i.onEmailChange()}),V()(),U(8,"div",2)(9,"label",5),Y(10,"Has\u0142o"),V(),U(11,"input",6),Jt("ngModelChange",function(s){return jt(i.password,s)||(i.password=s),s}),se("ngModelChange",function(){return i.onPasswordChange()}),V()(),U(12,"button",7),Y(13),V()()()),r&2&&(W(2),vt(i.isLogin?"Logowanie":"Rejestracja"),W(5),Zt("ngModel",i.email),W(4),Zt("ngModel",i.password),W(2),vt(i.buttonText))},dependencies:[$t,fg,nu,lg,dg,Al,Sl,Tl],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#00796b;color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:#004d40}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return n})();var EP=(()=>{class n{constructor(){this.router=P(tn),this.authService=P(ro),this.email="",this.password="",this.isLogin=!0}login({email:t,password:r}){t&&r?this.authService.login(t,r).then(()=>{this.router.navigate(["/home"])}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-login"]],standalone:!0,features:[Me],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","isLogin","buttonText","email","password"]],template:function(r,i){r&1&&(U(0,"app-auth-form",0),Jt("emailChange",function(s){return jt(i.email,s)||(i.email=s),s})("passwordChange",function(s){return jt(i.password,s)||(i.password=s),s}),se("formSubmit",function(s){return i.login(s)}),V()),r&2&&(Ze("isLogin",!0)("buttonText","Zaloguj si\u0119"),Zt("email",i.email)("password",i.password))},dependencies:[$t,pg]})}}return n})();var IP=(()=>{class n{constructor(){this.email="",this.password="",this.authService=P(ro)}register({email:t,password:r}){t&&r?this.authService.register(t,r).then(()=>{console.log("Zarejestrowano pomy\u015Blnie")}).catch(i=>{console.error("B\u0142\u0105d rejestracji:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-register"]],standalone:!0,features:[Me],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","isLogin","buttonText","email","password"]],template:function(r,i){r&1&&(U(0,"app-auth-form",0),Jt("emailChange",function(s){return jt(i.email,s)||(i.email=s),s})("passwordChange",function(s){return jt(i.password,s)||(i.password=s),s}),se("formSubmit",function(s){return i.register(s)}),V()),r&2&&(Ze("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Zt("email",i.email)("password",i.password))},dependencies:[$t,pg]})}}return n})();var DP=()=>{let n=P(ro),e=P(tn);return n.isAuthenticated()?!0:(e.navigate(["/login"]),!1)};var CP=(()=>{class n{transform(t,r){console.log("Meals:",t),console.log("Trainings:",r);let i=t.reduce((s,a)=>{let u=parseInt(a.calories,10);return console.log("Meal:",a,"Calories:",u),s+(isNaN(u)?0:u)},0),o=r.reduce((s,a)=>{let u=parseInt(a.burnedKcal,10);return console.log("Training:",a,"BurnedKcal:",u),s+(isNaN(u)?0:u)},0);return console.log("Total Calories:",i),console.log("Total Burned Calories:",o),i-o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Ku({name:"caloriesBalance",type:n,pure:!0,standalone:!0})}}return n})();function mq(n,e){if(n&1&&(U(0,"li",7)(1,"span",8),Y(2),V(),Y(3," - "),U(4,"span",9),Y(5),V(),Y(6),V()),n&2){let t=e.$implicit;W(2),vt(t.name),W(3),It("",t.calories," kcal"),W(),It(" (",t.weight," g) ")}}function yq(n,e){if(n&1&&(U(0,"div",4)(1,"h3"),Y(2,"Meals:"),V(),U(3,"ul",6),gr(4,mq,7,3,"li",7,nc),V()()),n&2){let t=Oe();W(4),mr(t.meals())}}function vq(n,e){if(n&1&&(U(0,"li",11)(1,"span",12),Y(2),V(),Y(3," - "),U(4,"span",13),Y(5),V(),Y(6),V()),n&2){let t=e.$implicit;W(2),vt(t.name),W(3),It("",t.burnedKcal," kcal"),W(),It(" (",t.time," min) ")}}function _q(n,e){if(n&1&&(U(0,"div",5)(1,"h3"),Y(2,"Trainings:"),V(),U(3,"ul",10),gr(4,vq,7,3,"li",11,nc),V()()),n&2){let t=Oe();W(4),mr(t.trainings())}}var bP=(()=>{class n{constructor(){this.day=Lt(null),this.meals=Lt([]),this.trainings=Lt([]),this.route=P(Ir),this.trainingAndMealService=P(Pr),this.route.paramMap.subscribe(t=>{let r=t.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){let i=new Date(r);this.day.set(i),this.loadDetails(i)}})}loadDetails(t){this.trainingAndMealService.getMealsByDate(t).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(t).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-day-details"]],standalone:!0,features:[Me],decls:12,vars:10,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"balance-value"],[1,"meals"],[1,"trainings"],[1,"meal-list"],[1,"meal-item"],[1,"meal-name"],[1,"meal-calories"],[1,"training-list"],[1,"training-item"],[1,"training-name"],[1,"training-burned"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"h2",1),Y(2),yr(3,"date"),V(),U(4,"div",2)(5,"h3"),Y(6,"Calories balance:"),V(),U(7,"p",3),Y(8),yr(9,"caloriesBalance"),V()(),pr(10,yq,6,0,"div",4)(11,_q,6,0,"div",5),V()),r&2&&(W(2),It("Details for ",ic(3,4,i.day(),"fullDate"),""),W(6),It(" ",ic(9,7,i.meals(),i.trainings())," kcal "),W(2),Yt(i.meals().length>0?10:-1),W(),Yt(i.trainings().length>0?11:-1))},dependencies:[Zs,CP],styles:[".day-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:800px;margin:30px auto;color:#fff;/}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.meals[_ngcontent-%COMP%], .trainings[_ngcontent-%COMP%]{background-color:#fffc;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d}.meal-list[_ngcontent-%COMP%], .training-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0;color:#333}.meal-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.meal-name[_ngcontent-%COMP%], .training-name[_ngcontent-%COMP%]{color:#006400}.meal-calories[_ngcontent-%COMP%], .training-burned[_ngcontent-%COMP%]{color:#d32f2f}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1rem}}"]})}}return n})();var TP=(()=>{class n{constructor(){this.meals=Lt([]),this.trainings=Lt([]),this.currentMonth=new Date,this.trainingAndMealService=P(Pr),this.cdr=P(_r),this.loadMonthlyDetails()}changeMonth(t){let r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+t),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){let t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(t,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(t,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().reduce((r,i)=>r+(i.burnedKcal?Number(i.burnedKcal):0),0)}totalTrainingTime(){return this.trainings().reduce((r,i)=>r+(i.time?Number(i.time):0),0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-monthly-summary"]],standalone:!0,features:[Me],decls:27,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),se("click",function(){return i.changeMonth(-1)}),U(4,"span"),Y(5,"<"),V(),Y(6," Poprzedni miesi\u0105c "),V(),U(7,"h2",4),Y(8),yr(9,"date"),V(),U(10,"button",3),se("click",function(){return i.changeMonth(1)}),Y(11," Nast\u0119pny miesi\u0105c "),U(12,"span"),Y(13,">"),V()()(),U(14,"div",5)(15,"p")(16,"strong"),Y(17,"\u0141\u0105czna liczba kalorii:"),V(),Y(18),V(),U(19,"p")(20,"strong"),Y(21,"\u0141\u0105czna liczba spalonych kalorii:"),V(),Y(22),V(),U(23,"p")(24,"strong"),Y(25,"\u0141\u0105czny czas trening\xF3w:"),V(),Y(26),V()()()()),r&2&&(W(8),It(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",ic(9,4,i.currentMonth,"MMMM yyyy")," "),W(10),It(" ",i.totalCalories()," kcal"),W(4),It(" ",i.totalBurnedCalories()," kcal "),W(4),It(" ",i.totalTrainingTime()," min "))},dependencies:[Zs],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;align-items:center;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 8px #0000001a;width:80%;margin:0 auto;color:#fff}.summary-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:20px;color:#fff;text-align:center}.month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:20px;align-items:center}.nav-button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#00796b;color:#fff;font-size:14px;font-weight:500;border:2px solid #00796b;border-radius:12px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;min-width:100px;text-align:center}.nav-button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#00796b;border-color:#00796b;transform:translateY(-2px)}.calories-summary[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:100%;box-shadow:0 2px 4px #0000001a;color:#333}.calories-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:10px 0}.calories-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.nav-button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.nav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}"]})}}return n})();var SP=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:wP,canActivate:[DP]},{path:"login",component:EP},{path:"register",component:IP},{path:"day-details/:day",component:bP},{path:"summary",component:TP}];var AP={production:!1,firebaseConfig:{apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"}};var MP={providers:[UA(SP),ZS(),My([qN,uM,aM.initializeApp(AP.firebaseConfig)]),Zs]};var wq=()=>["/summary"],Eq=()=>["/"];function Iq(n,e){if(n&1){let t=Rn();U(0,"div",3)(1,"p"),Y(2),V(),U(3,"button",5),se("click",function(){Ft(t);let i=Oe();return Vt(i.logout())}),Y(4,"Wyloguj"),V()()}n&2&&(W(2),It("Witaj, ",e.email,""))}function Dq(n,e){if(n&1){let t=Rn();U(0,"div",4)(1,"button",6),se("click",function(){Ft(t);let i=Oe();return Vt(i.navigateToLogin())}),Y(2," Zaloguj si\u0119 "),V(),U(3,"button",6),se("click",function(){Ft(t);let i=Oe();return Vt(i.navigateToRegister())}),Y(4," Zarejestruj si\u0119 "),V()()}}var xP=(()=>{class n{constructor(){this.authService=P(ro),this.router=P(tn),this.formChange=new _e,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(t){this.formChange.emit(t)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[Me],decls:10,vars:10,consts:[[1,"navbar"],[1,"nav-links"],[1,"btn","btn-primary",3,"routerLink"],[1,"user-info"],[1,"auth-buttons"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-light",3,"click"]],template:function(r,i){if(r&1&&(U(0,"div",0)(1,"div",1)(2,"button",2),Y(3,"Summary"),V(),U(4,"button",2),Y(5,"Home"),V()(),pr(6,Iq,5,1,"div",3),yr(7,"async"),pr(8,Dq,5,0,"div",4),yr(9,"async"),V()),r&2){let o;W(2),Ze("routerLink",vv(8,wq)),W(2),Ze("routerLink",vv(9,Eq)),W(2),Yt((o=rc(7,4,i.user$))?6:-1,o),W(2),Yt(rc(9,6,i.user$)?-1:8)}},dependencies:[Mo,ef,Sf,Tf],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#254636;color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return n})();var Cq=(n,e)=>e.id;function bq(n,e){if(n&1&&(U(0,"li"),Y(1),V()),n&2){let t=e.$implicit;W(),vt(t.fitness)}}var RP=(()=>{class n{constructor(){this.client=P(_l),this.products$=this.getProducts(),this.currentForm="login"}getProducts(){return this.client.collection("products").valueChanges()}showForm(t){this.currentForm=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Se({type:n,selectors:[["app-root"]],standalone:!0,features:[Me],decls:7,vars:2,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){r&1&&(U(0,"app-navbar",0),se("formChange",function(s){return i.showForm(s)}),V(),U(1,"div",1),Qn(2,"router-outlet"),V(),U(3,"ul"),gr(4,bq,2,1,"li",null,Cq),yr(6,"async"),V()),r&2&&(W(4),mr(rc(6,0,i.products$)))},dependencies:[w_,Mo,ef,xP],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:16px;cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{font-size:18px;margin:5px 0}"]})}}return n})();QS(RP,MP).catch(n=>console.error(n));
