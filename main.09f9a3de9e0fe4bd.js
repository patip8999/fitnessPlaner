"use strict";(self.webpackChunkFitnessPlaner=self.webpackChunkFitnessPlaner||[]).push([[792],{401:(Go,Pr,dt)=>{dt.d(Pr,{Am:()=>Wo,Bd:()=>pe,FA:()=>_e,Fy:()=>ni,I9:()=>Ko,Im:()=>ii,Ku:()=>Yo,Ll:()=>dn,T9:()=>mn,Uj:()=>zt,XA:()=>Vt,ZQ:()=>Ye,bD:()=>bi,c1:()=>Gn,cY:()=>Lt,eX:()=>ne,g:()=>de,gR:()=>Pt,hp:()=>sa,jZ:()=>Un,lT:()=>ms,lV:()=>Xi,mS:()=>At,nr:()=>_s,p7:()=>wn,sr:()=>ri,tD:()=>oi,u:()=>he,zW:()=>J,zw:()=>Be});const oe=function(x){const R=[];let B=0;for(let se=0;se<x.length;se++){let Q=x.charCodeAt(se);Q<128?R[B++]=Q:Q<2048?(R[B++]=Q>>6|192,R[B++]=63&Q|128):55296==(64512&Q)&&se+1<x.length&&56320==(64512&x.charCodeAt(se+1))?(Q=65536+((1023&Q)<<10)+(1023&x.charCodeAt(++se)),R[B++]=Q>>18|240,R[B++]=Q>>12&63|128,R[B++]=Q>>6&63|128,R[B++]=63&Q|128):(R[B++]=Q>>12|224,R[B++]=Q>>6&63|128,R[B++]=63&Q|128)}return R},$e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(x,R){if(!Array.isArray(x))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,se=[];for(let Q=0;Q<x.length;Q+=3){const Ce=x[Q],Pe=Q+1<x.length,Cn=Pe?x[Q+1]:0,ke=Q+2<x.length,sn=ke?x[Q+2]:0;let ui=(15&Cn)<<2|sn>>6,Zo=63&sn;ke||(Zo=64,Pe||(ui=64)),se.push(B[Ce>>2],B[(3&Ce)<<4|Cn>>4],B[ui],B[Zo])}return se.join("")},encodeString(x,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(x):this.encodeByteArray(oe(x),R)},decodeString(x,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(x):function(x){const R=[];let B=0,se=0;for(;B<x.length;){const Q=x[B++];if(Q<128)R[se++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ce=x[B++];R[se++]=String.fromCharCode((31&Q)<<6|63&Ce)}else if(Q>239&&Q<365){const ke=((7&Q)<<18|(63&x[B++])<<12|(63&x[B++])<<6|63&x[B++])-65536;R[se++]=String.fromCharCode(55296+(ke>>10)),R[se++]=String.fromCharCode(56320+(1023&ke))}else{const Ce=x[B++],Pe=x[B++];R[se++]=String.fromCharCode((15&Q)<<12|(63&Ce)<<6|63&Pe)}}return R.join("")}(this.decodeStringToByteArray(x,R))},decodeStringToByteArray(x,R){this.init_();const B=R?this.charToByteMapWebSafe_:this.charToByteMap_,se=[];for(let Q=0;Q<x.length;){const Ce=B[x.charAt(Q++)],Cn=Q<x.length?B[x.charAt(Q)]:0;++Q;const sn=Q<x.length?B[x.charAt(Q)]:64;++Q;const ot=Q<x.length?B[x.charAt(Q)]:64;if(++Q,null==Ce||null==Cn||null==sn||null==ot)throw new Rn;se.push(Ce<<2|Cn>>4),64!==sn&&(se.push(Cn<<4&240|sn>>2),64!==ot&&se.push(sn<<6&192|ot))}return se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let x=0;x<this.ENCODED_VALS.length;x++)this.byteToCharMap_[x]=this.ENCODED_VALS.charAt(x),this.charToByteMap_[this.byteToCharMap_[x]]=x,this.byteToCharMapWebSafe_[x]=this.ENCODED_VALS_WEBSAFE.charAt(x),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[x]]=x,x>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(x)]=x,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(x)]=x)}}};class Rn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zt=function(x){return function(x){const R=oe(x);return $e.encodeByteArray(R,!0)}(x).replace(/\./g,"")},he=function(x){try{return $e.decodeString(x,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function Be(x,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===x&&(x={});break;case Array:x=[];break;default:return R}for(const B in R)!R.hasOwnProperty(B)||!mt(B)||(x[B]=Be(x[B],R[B]));return x}function mt(x){return"__proto__"!==x}function At(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _t=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const x=process.env.__FIREBASE_DEFAULTS__;return x?JSON.parse(x):void 0})()||(()=>{if(typeof document>"u")return;let x;try{x=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=x&&he(x[1]);return R&&JSON.parse(R)})()}catch(x){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${x}`)}},mn=()=>{var x;return null===(x=_t())||void 0===x?void 0:x.config},Vt=x=>{var R;return null===(R=_t())||void 0===R?void 0:R[`_${x}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,B)=>{this.resolve=R,this.reject=B})}wrapCallback(R){return(B,se)=>{B?this.reject(B):this.resolve(se),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(B):R(B,se))}}}function ni(x,R){if(x.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const se=R||"demo-project",Q=x.iat||0,Ce=x.sub||x.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${se}`,aud:se,iat:Q,exp:Q+3600,auth_time:Q,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},x);return[zt(JSON.stringify({alg:"none",type:"JWT"})),zt(JSON.stringify(Pe)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Un(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function dn(){var x;const R=null===(x=_t())||void 0===x?void 0:x.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return typeof window<"u"||wn()}function wn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Gn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function ri(){const x="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof x&&void 0!==x.id}function Xi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ms(){const x=Ye();return x.indexOf("MSIE ")>=0||x.indexOf("Trident/")>=0}function _s(){return!dn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){try{return"object"==typeof indexedDB}catch{return!1}}function ne(){return new Promise((x,R)=>{try{let B=!0;const se="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(se);Q.onsuccess=()=>{Q.result.close(),B||self.indexedDB.deleteDatabase(se),x(!0)},Q.onupgradeneeded=()=>{B=!1},Q.onerror=()=>{var Ce;R((null===(Ce=Q.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(B){R(B)}})}class de extends Error{constructor(R,B,se){super(B),this.code=R,this.customData=se,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor(R,B,se){this.service=R,this.serviceName=B,this.errors=se}create(R,...B){const se=B[0]||{},Q=`${this.service}/${R}`,Ce=this.errors[R],Pe=Ce?function ze(x,R){return x.replace(St,(B,se)=>{const Q=R[se];return null!=Q?String(Q):`<${se}?>`})}(Ce,se):"Error";return new de(Q,`${this.serviceName}: ${Pe} (${Q}).`,se)}}const St=/\{\$([^}]+)}/g;function Pt(x,R){return Object.prototype.hasOwnProperty.call(x,R)}function ii(x){for(const R in x)if(Object.prototype.hasOwnProperty.call(x,R))return!1;return!0}function bi(x,R){if(x===R)return!0;const B=Object.keys(x),se=Object.keys(R);for(const Q of B){if(!se.includes(Q))return!1;const Ce=x[Q],Pe=R[Q];if(eo(Ce)&&eo(Pe)){if(!bi(Ce,Pe))return!1}else if(Ce!==Pe)return!1}for(const Q of se)if(!B.includes(Q))return!1;return!0}function eo(x){return null!==x&&"object"==typeof x}function Wo(x){const R=[];for(const[B,se]of Object.entries(x))Array.isArray(se)?se.forEach(Q=>{R.push(encodeURIComponent(B)+"="+encodeURIComponent(Q))}):R.push(encodeURIComponent(B)+"="+encodeURIComponent(se));return R.length?"&"+R.join("&"):""}function Ko(x){const R={};return x.replace(/^\?/,"").split("&").forEach(se=>{if(se){const[Q,Ce]=se.split("=");R[decodeURIComponent(Q)]=decodeURIComponent(Ce)}}),R}function sa(x){const R=x.indexOf("?");if(!R)return"";const B=x.indexOf("#",R);return x.substring(R,B>0?B:void 0)}function oi(x,R){const B=new Kn(x,R);return B.subscribe.bind(B)}class Kn{constructor(R,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{R(this)}).catch(se=>{this.error(se)})}next(R){this.forEachObserver(B=>{B.next(R)})}error(R){this.forEachObserver(B=>{B.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,B,se){let Q;if(void 0===R&&void 0===B&&void 0===se)throw new Error("Missing Observer.");Q=function mc(x,R){if("object"!=typeof x||null===x)return!1;for(const B of R)if(B in x&&"function"==typeof x[B])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:B,complete:se},void 0===Q.next&&(Q.next=si),void 0===Q.error&&(Q.error=si),void 0===Q.complete&&(Q.complete=si);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Ce}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,R)}sendOne(R,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{B(this.observers[R])}catch(se){typeof console<"u"&&console.error&&console.error(se)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function si(){}function Yo(x){return x&&x._delegate?x._delegate:x}},834:(Go,Pr,dt)=>{function A(t,e){return Object.is(t,e)}let Le=null,Ne=!1,oe=1;const Zt=Symbol("SIGNAL");function $e(t){const e=Le;return Le=t,e}const he={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ve(t){if(Ne)throw new Error("");if(null===Le)return;Le.consumerOnSignalRead(t);const e=Le.nextProducerIndex++;ni(Le),e<Le.producerNode.length&&Le.producerNode[e]!==t&&Lt(Le)&&Vt(Le.producerNode[e],Le.producerIndexOfThis[e]),Le.producerNode[e]!==t&&(Le.producerNode[e]=t,Le.producerIndexOfThis[e]=Lt(Le)?mn(t,Le,e):0),Le.producerLastReadVersion[e]=t.version}function mt(t){if((!Lt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==oe)){if(!t.producerMustRecompute(t)&&!er(t))return t.dirty=!1,void(t.lastCleanEpoch=oe);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=oe}}function At(t){if(void 0===t.liveConsumerNode)return;const e=Ne;Ne=!0;try{for(const n of t.liveConsumerNode)n.dirty||Ht(n)}finally{Ne=e}}function fr(){return!1!==Le?.consumerAllowSignalWrites}function Ht(t){t.dirty=!0,At(t),t.consumerMarkedDirty?.(t)}function tt(t){return t&&(t.nextProducerIndex=0),$e(t)}function _t(t,e){if($e(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Lt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Vt(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function er(t){ni(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mt(n),r!==n.version))return!0}return!1}function Er(t){if(ni(t),Lt(t))for(let e=0;e<t.producerNode.length;e++)Vt(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function mn(t,e,n){if(Ye(t),0===t.liveConsumerNode.length&&Un(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=mn(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Vt(t,e){if(Ye(t),1===t.liveConsumerNode.length&&Un(t))for(let r=0;r<t.producerNode.length;r++)Vt(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ni(i),i.producerIndexOfThis[r]=e}}function Lt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ni(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Ye(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Un(t){return void 0!==t.producerNode}const pe=Symbol("UNSET"),wn=Symbol("COMPUTING"),Gn=Symbol("ERRORED"),ri={...he,value:pe,dirty:!0,error:null,equal:A,producerMustRecompute:t=>t.value===pe||t.value===wn,producerRecomputeValue(t){if(t.value===wn)throw new Error("Detected cycle in computations.");const e=t.value;t.value=wn;const n=tt(t);let r;try{r=t.computation()}catch(i){r=Gn,t.error=i}finally{_t(t,n)}e!==pe&&e!==Gn&&r!==Gn&&t.equal(e,r)?t.value=e:(t.value=r,t.version++)}};let xr=function Xi(){throw new Error};function ms(){xr()}let Ci=null;function ue(t,e){fr()||ms(),t.equal(t.value,e)||(t.value=e,function ze(t){t.version++,function Be(){oe++}(),At(t),Ci?.()}(t))}const _e={...he,equal:A,value:void 0};function nt(t){return"function"==typeof t}function Fi(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ct=Fi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Bn(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Pt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(nt(r))try{r()}catch(o){e=o instanceof Ct?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{oa(o)}catch(s){e=e??[],s instanceof Ct?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ct(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oa(e);else{if(e instanceof Pt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Bn(n,e)}remove(e){const{_finalizers:n}=this;n&&Bn(n,e),e instanceof Pt&&e._removeParent(this)}}Pt.EMPTY=(()=>{const t=new Pt;return t.closed=!0,t})();const Nr=Pt.EMPTY;function ii(t){return t instanceof Pt||t&&"closed"in t&&nt(t.remove)&&nt(t.add)&&nt(t.unsubscribe)}function oa(t){nt(t)?t():t.unsubscribe()}const bi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},eo={setTimeout(t,e,...n){const{delegate:r}=eo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=eo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gc(t){eo.setTimeout(()=>{const{onUnhandledError:e}=bi;if(!e)throw t;e(t)})}function Wo(){}const Ko=oi("C",void 0,void 0);function oi(t,e,n){return{kind:t,value:e,error:n}}let Kn=null;function ys(t){if(bi.useDeprecatedSynchronousErrorHandling){const e=!Kn;if(e&&(Kn={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Kn;if(Kn=null,n)throw r}}else t()}class si extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ii(e)&&e.add(this)):this.destination=ua}static create(e,n,r){return new Or(e,n,r)}next(e){this.isStopped?wr(function Vi(t){return oi("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wr(function sa(t){return oi("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wr(Ko,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const aa=Function.prototype.bind;function Li(t,e){return aa.call(t,e)}class nu{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Qo(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Qo(r)}else Qo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Qo(n)}}}class Or extends si{constructor(e,n,r){let i;if(super(),nt(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&bi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Li(e.next,o),error:e.error&&Li(e.error,o),complete:e.complete&&Li(e.complete,o)}):i=e}this.destination=new nu(i)}}function Qo(t){bi.useDeprecatedSynchronousErrorHandling?function mc(t){bi.useDeprecatedSynchronousErrorHandling&&Kn&&(Kn.errorThrown=!0,Kn.error=t)}(t):gc(t)}function wr(t,e){const{onStoppedNotification:n}=bi;n&&eo.setTimeout(()=>n(t,e))}const ua={closed:!0,next:Wo,error:function ql(t){throw t},complete:Wo},to="function"==typeof Symbol&&Symbol.observable||"@@observable";function ai(t){return t}function vs(t){return 0===t.length?ai:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let xt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function Yo(t){return t&&t instanceof si||function ou(t){return t&&nt(t.next)&&nt(t.error)&&nt(t.complete)}(t)&&ii(t)}(n)?n:new Or(n,r,i);return ys(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=iu(r))((i,o)=>{const s=new Or({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[to](){return this}pipe(...n){return vs(n)(this)}toPromise(n){return new(n=iu(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function iu(t){var e;return null!==(e=t??bi.Promise)&&void 0!==e?e:Promise}const x=Fi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let R=(()=>{class t extends xt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new B(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new x}next(n){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Nr:(this.currentObservers=null,o.push(n),new Pt(()=>{this.currentObservers=null,Bn(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new xt;return n.source=this,n}}return t.create=(e,n)=>new B(e,n),t})();class B extends R{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Nr}}class se extends R{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Q(t){return nt(t?.lift)}function Ce(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(t,e,n,r,i){return new Cn(t,e,n,r,i)}class Cn extends si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ke(t,e){return Ce((n,r)=>{let i=0;n.subscribe(Pe(r,o=>{r.next(t.call(e,o,i++))}))})}const sn=Fi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Jt(t,e){return Ce((n,r)=>{let i=0;n.subscribe(Pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}const ot=new xt(t=>t.complete());function no(t){return t<=0?()=>ot:Ce((e,n)=>{let r=0;e.subscribe(Pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ca(t){return Ce((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Jo(t=Gl){return Ce((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Gl(){return new sn}function Ui(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((i,o)=>t(i,o,r)):ai,no(1),n?ca(e):Jo(()=>new sn))}const Wl="https://g.co/ng/security#xss";class S extends Error{constructor(e,n){super(function $(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ut(t){return{toString:t}.toString()}const pr="__parameters__";function su(t,e,n){return Ut(()=>{const r=function da(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,d,p){const m=u.hasOwnProperty(pr)?u[pr]:Object.defineProperty(u,pr,{value:[]})[pr];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const _n=globalThis;function Wt(t){for(let e in t)if(t[e]===Wt)return e;throw Error("Could not find renamed property on target object.")}function Hw(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Kl(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Qf=Wt({__forward_ref__:Wt});function Kt(t){return t.__forward_ref__=Kt,t.toString=function(){return tr(this())},t}function Qe(t){return Ql(t)?t():t}function Ql(t){return"function"==typeof t&&t.hasOwnProperty(Qf)&&t.__forward_ref__===Kt}function Me(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yl(t){return ey(t,au)||ey(t,Jl)}function ey(t,e){return t.hasOwnProperty(e)?t[e]:null}function Zl(t){return t&&(t.hasOwnProperty(Xf)||t.hasOwnProperty(Qw))?t[Xf]:null}const au=Wt({\u0275prov:Wt}),Xf=Wt({\u0275inj:Wt}),Jl=Wt({ngInjectableDef:Wt}),Qw=Wt({ngInjectorDef:Wt});class ye{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Me({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vc(t){return t&&!!t.\u0275providers}const Ic=Wt({\u0275cmp:Wt}),np=Wt({\u0275dir:Wt}),Ec=Wt({\u0275pipe:Wt}),Is=Wt({\u0275mod:Wt}),es=Wt({\u0275fac:Wt}),wc=Wt({__NG_ELEMENT_ID__:Wt}),uu=Wt({__NG_ENV_ID__:Wt});function at(t){return"string"==typeof t?t:null==t?"":String(t)}function ed(t,e){throw new S(-201,!1)}var It=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(It||{});let ws;function iy(){return ws}function Cr(t){const e=ws;return ws=t,e}function rp(t,e,n){const r=Yl(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&It.Optional?null:void 0!==e?e:void ed()}const kr={},td="__NG_DI_FLAG__",nd="ngTempTokenPath",rd=/\n/gm,op="__source";let du;function Mo(t){const e=du;return du=t,e}function ap(t,e=It.Default){if(void 0===du)throw new S(-203,!1);return null===du?rp(t,void 0,e):du.get(t,e&It.Optional?null:void 0,e)}function we(t,e=It.Default){return(iy()||ap)(Qe(t),e)}function G(t,e=It.Default){return we(t,hu(e))}function hu(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function od(t){const e=[];for(let n=0;n<t.length;n++){const r=Qe(t[n]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,o=It.Default;for(let s=0;s<r.length;s++){const a=r[s],u=sd(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(we(i,o))}else e.push(we(r))}return e}function fa(t,e){return t[td]=e,t.prototype[td]=e,t}function sd(t){return t[td]}const fu=fa(su("Optional"),8),ad=fa(su("SkipSelf"),4);function pa(t,e){return t.hasOwnProperty(es)?t[es]:null}function Cs(t,e){t.forEach(n=>Array.isArray(n)?Cs(n,e):e(n))}function ud(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ga(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gr(t,e,n){let r=bs(t,e);return r>=0?t[1|r]=n:(r=~r,function cd(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fp(t,e){const n=bs(t,e);if(n>=0)return t[1|n]}function bs(t,e){return function ld(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Ro={},bt=[],io=new ye(""),dd=new ye("",-1),pp=new ye("");class hd{get(e,n=kr){if(n===kr){const r=new Error(`NullInjectorError: No provider for ${tr(e)}!`);throw r.name="NullInjectorError",r}return n}}var gu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gu||{}),oo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(oo||{}),Ts=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ts||{});function gp(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function mp(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];uy(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function fd(t){return 3===t||4===t||6===t}function uy(t){return 64===t.charCodeAt(0)}function ma(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||cy(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function cy(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const pd="ng-template";function Xw(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==gp(e[i+1].toLowerCase(),n,0))return!0}else if(bc(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function bc(t){return 4===t.type&&t.value!==pd}function eC(t,e,n){return e===(4!==t.type||n?t.value:pd)}function _p(t,e,n){let r=4;const i=t.attrs,o=null!==i?function dy(t){for(let e=0;e<t.length;e++)if(fd(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!eC(t,u,n)||""===u&&1===e.length){if(so(r))return!1;s=!0}}else if(8&r){if(null===i||!Xw(t,i,u,n)){if(so(r))return!1;s=!0}}else{const d=e[++a],p=yp(u,i,bc(t),n);if(-1===p){if(so(r))return!1;s=!0;continue}if(""!==d){let m;if(m=p>o?"":i[p+1].toLowerCase(),2&r&&d!==m){if(so(r))return!1;s=!0}}}}else{if(!s&&!so(r)&&!so(u))return!1;if(s&&so(u))continue;s=!1,r=u|1&r}}return so(r)||s}function so(t){return!(1&t)}function yp(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function vp(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ly(t,e,n=!1){for(let r=0;r<e.length;r++)if(_p(t,e[r],n))return!0;return!1}function _a(t,e){return t?":not("+e.trim()+")":e}function hy(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!so(s)&&(e+=_a(o,i),i=""),r=s,o=o||!so(r);n++}return""!==i&&(e+=_a(o,i)),e}function Pn(t){return Ut(()=>{const e=uC(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||oo.Emulated,styles:t.styles||bt,_:null,schemas:t.schemas||null,tView:null,id:""};cC(n);const r=t.dependencies;return n.directiveDefs=Ip(r,!1),n.pipeDefs=Ip(r,!0),n.id=function va(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function oC(t){return yt(t)||nr(t)}function sC(t){return null!==t}function Ds(t){return Ut(()=>({type:t.type,bootstrap:t.bootstrap||bt,declarations:t.declarations||bt,imports:t.imports||bt,exports:t.exports||bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function aC(t,e){if(null==t)return Ro;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a=Ts.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ts.None?[r,a]:r,e[o]=s):n[o]=r}return n}function it(t){return Ut(()=>{const e=uC(t);return cC(e),e})}function br(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function yt(t){return t[Ic]||null}function nr(t){return t[np]||null}function Fr(t){return t[Ec]||null}function Wr(t,e){const n=t[Is]||null;if(!n&&!0===e)throw new Error(`Type ${tr(t)} does not have '\u0275mod' property.`);return n}function uC(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ro,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||bt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aC(t.inputs,e),outputs:aC(t.outputs),debugInfo:null}}function cC(t){t.features?.forEach(e=>e(t))}function Ip(t,e){if(!t)return null;const n=e?Fr:oC;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(sC)}function ts(t){return{\u0275providers:t}}function fy(...t){return{\u0275providers:wp(0,t),\u0275fromNgModule:!0}}function wp(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Cs(e,s=>{const a=s;Cp(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&py(i,o),n}function py(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];bp(i,o=>{e(o,r)})}}function Cp(t,e,n,r){if(!(t=Qe(t)))return!1;let i=null,o=Zl(t);const s=!o&&yt(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Zl(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of u)Cp(d,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{Cs(o.imports,p=>{Cp(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&py(d,e)}if(!a){const d=pa(i)||(()=>new i);e({provide:i,useFactory:d,deps:bt},i),e({provide:pp,useValue:i,multi:!0},i),e({provide:io,useValue:()=>we(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const d=t;bp(u,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function bp(t,e){for(let n of t)vc(n)&&(n=n.\u0275providers),Array.isArray(n)?bp(n,e):e(n)}const Tp=Wt({provide:String,useValue:Wt});function Tc(t){return null!==t&&"object"==typeof t&&Tp in t}function As(t){return"function"==typeof t}const Dp=new ye(""),Ap={},gd={};let my;function ao(){return void 0===my&&(my=new hd),my}class Kr{}class mu extends Kr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mp(e,s=>this.processProvider(s)),this.records.set(dd,Ss(void 0,this)),i.has("environment")&&this.records.set(Kr,Ss(void 0,this));const o=this.records.get(Dp);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pp,bt,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=$e(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Mo(this),r=Cr(void 0);try{return e()}finally{Mo(n),Cr(r)}}get(e,n=kr,r=It.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(uu))return e[uu](this);r=hu(r);const o=Mo(this),s=Cr(void 0);try{if(!(r&It.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function fC(t){return"function"==typeof t||"object"==typeof t&&t instanceof ye}(e)&&Yl(e);u=d&&this.injectableDefInScope(d)?Ss(Ia(e),Ap):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&It.Self?ao():this.parent).get(e,n=r&It.Optional&&n===kr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[nd]=a[nd]||[]).unshift(tr(e)),o)throw a;return function up(t,e,n,r){const i=t[nd];throw e[op]&&i.unshift(e[op]),t.message=function ay(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=tr(e);if(Array.isArray(e))i=e.map(tr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):tr(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(rd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[nd]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Cr(s),Mo(o)}}resolveInjectorInitializers(){const e=$e(null),n=Mo(this),r=Cr(void 0);try{const o=this.get(io,bt,It.Self);for(const s of o)s()}finally{Mo(n),Cr(r),$e(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(tr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let n=As(e=Qe(e))?e:Qe(e&&e.provide);const r=function Qn(t){return Tc(t)?Ss(void 0,t.useValue):Ss(_y(t),Ap)}(e);if(!As(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ss(void 0,Ap,!0),i.factory=()=>od(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=$e(null);try{return n.value===Ap&&(n.value=gd,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Sp(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Qe(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Ia(t){const e=Yl(t),n=null!==e?e.factory:pa(t);if(null!==n)return n;if(t instanceof ye)throw new S(204,!1);if(t instanceof Function)return function dC(t){if(t.length>0)throw new S(204,!1);const n=function Jf(t){return t&&(t[au]||t[Jl])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new S(204,!1)}function _y(t,e,n){let r;if(As(t)){const i=Qe(t);return pa(i)||Ia(i)}if(Tc(t))r=()=>Qe(t.useValue);else if(function Dc(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...od(t.deps||[]));else if(function gy(t){return!(!t||!t.useExisting)}(t))r=()=>we(Qe(t.useExisting));else{const i=Qe(t&&(t.useClass||t.provide));if(!function hC(t){return!!t.deps}(t))return pa(i)||Ia(i);r=()=>new i(...od(t.deps))}return r}function Ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Mp(t,e){for(const n of t)Array.isArray(n)?Mp(n,e):n&&vc(n)?Mp(n.\u0275providers,e):e(n)}function uo(t,e){t instanceof mu&&t.assertNotDestroyed();const r=Mo(t),i=Cr(void 0);try{return e()}finally{Mo(r),Cr(i)}}function yy(){return void 0!==iy()||null!=function sp(){return du}()}const bn=0,Ee=1,qe=2,Yn=3,ci=4,Tr=5,Qr=6,yu=7,an=8,Zn=9,Po=10,Xe=11,Sc=12,Pp=13,vu=14,Tn=15,Ca=16,Rs=17,ns=18,Ps=19,Ey=20,xo=21,vd=22,li=23,Ue=25,Mc=1,Rc=6,ji=7,$i=9,xn=10;var Id=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Id||{});function ir(t){return Array.isArray(t)&&"object"==typeof t[Mc]}function Vr(t){return Array.isArray(t)&&!0===t[Mc]}function Pc(t){return!!(4&t.flags)}function Ns(t){return t.componentOffset>-1}function Ed(t){return!(1&~t.flags)}function co(t){return!!t.template}function ba(t){return!!(512&t[qe])}class Fp{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function My(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Lr(){return xc}function xc(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ry),Vp}function Vp(){const t=Py(this),e=t?.current;if(e){const n=t.previous;if(n===Ro)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ry(t,e,n,r,i){const o=this.declaredInputs[r],s=Py(t)||function xy(t,e){return t[Td]=e}(t,{previous:Ro,current:null}),a=s.current||(s.current={}),u=s.previous,d=u[o];a[o]=new Fp(d&&d.currentValue,n,u===Ro),My(t,e,i,n)}Lr.ngInherit=!0;const Td="__ngSimpleChanges__";function Py(t){return t[Td]||null}const No=function(t,e,n){};function Ot(t){for(;Array.isArray(t);)t=t[bn];return t}function Nc(t,e){return Ot(e[t])}function Dr(t,e){return Ot(e[t.index])}function Oc(t,e){return t.data[e]}function Os(t,e){return t[e]}function Di(t,e){const n=e[t];return ir(n)?n:n[bn]}function Bp(t){return!(128&~t[qe])}function zi(t,e){return null==e?null:t[e]}function Oy(t){t[Rs]=0}function ky(t){1024&t[qe]||(t[qe]|=1024,Bp(t)&&Iu(t))}function Md(t){return!!(9216&t[qe]||t[li]?.dirty)}function jp(t){t[Po].changeDetectionScheduler?.notify(8),64&t[qe]&&(t[qe]|=1024),Md(t)&&Iu(t)}function Iu(t){t[Po].changeDetectionScheduler?.notify(0);let e=rs(t);for(;null!==e&&!(8192&e[qe])&&(e[qe]|=8192,Bp(e));)e=rs(e)}function Rd(t,e){if(!(256&~t[qe]))throw new S(911,!1);null===t[xo]&&(t[xo]=[]),t[xo].push(e)}function rs(t){const e=t[Yn];return Vr(e)?e[Yn]:e}const et={lFrame:qy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Vy=!1;function Nd(){return et.bindingsEnabled}function is(){return null!==et.skipHydrationRootTNode}function ae(){return et.lFrame.lView}function ft(){return et.lFrame.tView}function pt(t){return et.lFrame.contextLView=t,t[an]}function ct(t){return et.lFrame.contextLView=null,t}function Qt(){let t=kc();for(;null!==t&&64===t.type;)t=t.parent;return t}function kc(){return et.lFrame.currentTNode}function Hi(t,e){const n=et.lFrame;n.currentTNode=t,n.isParent=e}function Hp(){return et.lFrame.isParent}function jy(){return Vy}function DC(t){Vy=t}function Yr(){const t=et.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Zr(){return et.lFrame.bindingIndex}function lo(){return et.lFrame.bindingIndex++}function ho(t){const e=et.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function SC(t,e){const n=et.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fc(e)}function Fc(t){et.lFrame.currentDirectiveIndex=t}function wu(t){et.lFrame.currentQueryIndex=t}function RC(t){const e=t[Ee];return 2===e.type?e.declTNode:1===e.type?t[Tr]:null}function zy(t,e,n){if(n&It.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&It.Host||(i=RC(o),null===i||(o=o[vu],10&i.type))););if(null===i)return!1;e=i,t=o}const r=et.lFrame=Hy();return r.currentTNode=e,r.lView=t,!0}function Qp(t){const e=Hy(),n=t[Ee];et.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hy(){const t=et.lFrame,e=null===t?null:t.child;return null===e?qy(t):e}function qy(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Yp(){const t=et.lFrame;return et.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const kd=Yp;function Zp(){const t=Yp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function or(){return et.lFrame.selectedIndex}function os(t){et.lFrame.selectedIndex=t}function hn(){const t=et.lFrame;return Oc(t.tView,t.selectedIndex)}function Gy(){return et.lFrame.currentNamespace}let Jp=!0;function Vc(){return Jp}function Oo(t){Jp=t}function Vd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function ks(t,e,n){Wy(t,e,3,n)}function Ld(t,e,n,r){(3&t[qe])===n&&Wy(t,e,n,r)}function Ud(t,e){let n=t[qe];(3&n)===e&&(n&=16383,n+=1,t[qe]=n)}function Wy(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Rs]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Rs]+=65536),(a<o||-1==o)&&(FC(t,n,e,u),t[Rs]=(4294901760&t[Rs])+u+2),u++}function Ky(t,e){No(4,t,e);const n=$e(null);try{e.call(t)}finally{$e(n),No(5,t,e)}}function FC(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[qe]>>14<t[Rs]>>16&&(3&t[qe])===e&&(t[qe]+=16384,Ky(a,o)):Ky(a,o)}const Cu=-1;class bu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}const jd={};class Ta{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hu(r);const i=this.injector.get(e,jd,r);return i!==jd||n===jd?i:this.parentInjector.get(e,n,r)}}function Uc(t){return t!==Cu}function Da(t){return 32767&t}function Tu(t,e){let n=function UC(t){return t>>16}(t),r=e;for(;n>0;)r=r[vu],n--;return r}let ko=!0;function Bc(t){const e=ko;return ko=t,e}const Qy=255,Yy=5;let Zy=0;const Nn={};function Du(t,e){const n=Fo(t,e);if(-1!==n)return n;const r=e[Ee];r.firstCreatePass&&(t.injectorIndex=e.length,rg(r.data,t),rg(e,null),rg(r.blueprint,null));const i=Fs(t,e),o=t.injectorIndex;if(Uc(i)){const s=Da(i),a=Tu(i,e),u=a[Ee].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function rg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fo(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fs(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Oe(i),null===r)return Cu;if(n++,i=i[vu],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Cu}function $d(t,e,n){!function ng(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(wc)&&(r=n[wc]),null==r&&(r=n[wc]=Zy++);const i=r&Qy;e.data[t+(i>>Yy)]|=1<<i}(t,e,n)}function Xy(t,e,n){if(n&It.Optional||void 0!==t)return t;ed()}function zd(t,e,n,r){if(n&It.Optional&&void 0===r&&(r=null),!(n&(It.Self|It.Host))){const i=t[Zn],o=Cr(void 0);try{return i?i.get(e,r,n&It.Optional):rp(e,r,n&It.Optional)}finally{Cr(o)}}return Xy(r,0,n)}function ev(t,e,n,r=It.Default,i){if(null!==t){if(2048&e[qe]&&!(r&It.Self)){const s=function Fe(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[qe]&&!(512&s[qe]);){const a=tv(o,s,n,r|It.Self,Nn);if(a!==Nn)return a;let u=o.parent;if(!u){const d=s[Ey];if(d){const p=d.get(n,Nn,r);if(p!==Nn)return p}u=Oe(s),s=s[vu]}o=u}return i}(t,e,n,r,Nn);if(s!==Nn)return s}const o=tv(t,e,n,r,Nn);if(o!==Nn)return o}return zd(e,n,r,i)}function tv(t,e,n,r,i){const o=function c(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(wc)?t[wc]:void 0;return"number"==typeof e?e>=0?e&Qy:z:e}(n);if("function"==typeof o){if(!zy(e,t,r))return r&It.Host?Xy(i,0,r):zd(e,n,r,i);try{let s;if(s=o(r),null!=s||r&It.Optional)return s;ed()}finally{kd()}}else if("number"==typeof o){let s=null,a=Fo(t,e),u=Cu,d=r&It.Host?e[Tn][Tr]:null;for((-1===a||r&It.SkipSelf)&&(u=-1===a?Fs(t,e):e[a+8],u!==Cu&&g(r,!1)?(s=e[Ee],a=Da(u),e=Tu(u,e)):a=-1);-1!==a;){const p=e[Ee];if(l(o,a,p.data)){const m=jC(a,e,n,s,r,d);if(m!==Nn)return m}u=e[a+8],u!==Cu&&g(r,e[Ee].data[a+8]===d)&&l(o,a,e)?(s=p,a=Da(u),e=Tu(u,e)):a=-1}}return i}function jC(t,e,n,r,i,o){const s=e[Ee],a=s.data[t+8],p=function Hd(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,p=o>>20,y=i?a+p:t.directiveEnd;for(let E=r?a:a+p;E<y;E++){const C=s[E];if(E<u&&n===C||E>=u&&C.type===n)return E}if(i){const E=s[u];if(E&&co(E)&&E.type===n)return u}return null}(a,s,n,null==r?Ns(a)&&ko:r!=s&&!!(3&a.type),i&It.Host&&o===a);return null!==p?f(e,s,p,a):Nn}function f(t,e,n,r){let i=t[n];const o=e.data;if(function Xp(t){return t instanceof bu}(i)){const s=i;s.resolving&&function lu(t,e){throw e&&e.join(" > "),new S(-200,t)}(function Nt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}(o[n]));const a=Bc(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Cr(s.injectImpl):null;zy(t,r,It.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function kC(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=xc(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==d&&Cr(d),Bc(a),s.resolving=!1,kd()}}return i}function l(t,e,n){return!!(n[e+(t>>Yy)]&1<<t)}function g(t,e){return!(t&It.Self||t&It.Host&&e)}class M{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ev(this._tNode,this._lView,e,hu(r),n)}}function z(){return new M(Qt(),ae())}function X(t){return Ut(()=>{const e=t.prototype.constructor,n=e[es]||be(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[es]||be(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function be(t){return Ql(t)?()=>{const e=be(Qe(t));return e&&e()}:pa(t)}function Oe(t){const e=t[Ee],n=e.type;return 2===n?e.declTNode:1===n?t[Tr]:null}function IR(t,e=null,n=null,r){const i=ER(t,e,n,r);return i.resolveInjectorInitializers(),i}function ER(t,e=null,n=null,r,i=new Set){const o=[n||bt,fy(t)];return r=r||("object"==typeof t?void 0:tr(t)),new mu(o,e||ao(),r||null,i)}class Ur{static{this.THROW_IF_NOT_FOUND=kr}static{this.NULL=new hd}static create(e,n){if(Array.isArray(e))return IR({name:""},n,e,"");{const r=e.name??"";return IR({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Me({token:Ur,providedIn:"any",factory:()=>we(dd)})}static{this.__NG_ELEMENT_ID__=-1}}new ye("").__NG_ELEMENT_ID__=t=>{const e=Qt();if(null===e)throw new S(204,!1);if(2&e.type)return e.value;if(t&It.Optional)return null;throw new S(204,!1)};function zC(t){return t.ngOriginalError}const CR=!0;let lg=(()=>{class t{static{this.__NG_ELEMENT_ID__=o4}static{this.__NG_ENV_ID__=n=>n}}return t})();class i4 extends lg{constructor(e){super(),this._lView=e}onDestroy(e){return Rd(this._lView,e),()=>function $p(t,e){if(null===t[xo])return;const n=t[xo].indexOf(e);-1!==n&&t[xo].splice(n,1)}(this._lView,e)}}function o4(){return new i4(ae())}let Su=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>new t})}}return t})();const kt=class s4 extends R{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,yy()&&(this.destroyRef=G(lg,{optional:!0})??void 0,this.pendingTasks=G(Su,{optional:!0})??void 0)}emit(e){const n=$e(null);try{super.next(e)}finally{$e(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(n),void 0!==r&&this.pendingTasks?.remove(r)})}}};function iv(...t){}function bR(t){let e,n;function r(){t=iv;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function TR(t){return queueMicrotask(()=>t()),()=>{t=iv}}const HC="isAngularZone",ov=HC+"_ID";let a4=0;class Tt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kt(!1),this.onMicrotaskEmpty=new kt(!1),this.onStable=new kt(!1),this.onError=new kt(!1);const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=CR}=e;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function l4(t){const e=()=>{!function c4(t){function e(){bR(()=>{t.callbackScheduled=!1,GC(t),t.isCheckStableRunning=!0,qC(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),GC(t))}(t)},n=a4++;t._inner=t._inner.fork({name:"angular",properties:{[HC]:!0,[ov]:n,[ov+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(function d4(t){return SR(t,"__ignore_ng_zone__")}(u))return r.invokeTask(o,s,a,u);try{return DR(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),AR(t)}},onInvoke:(r,i,o,s,a,u,d)=>{try{return DR(t),r.invoke(o,s,a,u,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function h4(t){return SR(t,"__scheduler_tick__")}(u)&&e(),AR(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,GC(t),qC(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(HC)}static assertInAngularZone(){if(!Tt.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(Tt.isInAngularZone())throw new S(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,u4,iv,iv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const u4={};function qC(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function GC(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function DR(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AR(t){t._nesting--,qC(t)}class WC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kt,this.onMicrotaskEmpty=new kt,this.onStable=new kt,this.onError=new kt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function SR(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}class Vs{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&zC(e);for(;n&&zC(n);)n=zC(n);return n||null}}const p4=new ye("",{providedIn:"root",factory:()=>{const t=G(Tt),e=G(Vs);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function g4(){return Gd(Qt(),ae())}function Gd(t,e){return new po(Dr(t,e))}let po=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=g4}}return t})();const dg="ngSkipHydration",_4="ngskiphydration";function QC(t){const e=t.mergedAttrs;if(null===e)return!1;for(let n=0;n<e.length;n+=2){const r=e[n];if("number"==typeof r)return!1;if("string"==typeof r&&r.toLowerCase()===_4)return!0}return!1}function PR(t){return t.hasAttribute(dg)}function hg(t){return!(128&~t.flags)}const YC=new Map;let y4=0;function ZC(t){YC.delete(t[Ps])}const sv="__ngContext__";function di(t,e){ir(e)?(t[sv]=e[Ps],function I4(t){YC.set(t[Ps],t)}(e)):t[sv]=e}function BR(t){return $R(t[Sc])}function jR(t){return $R(t[ci])}function $R(t){for(;null!==t&&!Vr(t);)t=t[ci];return t}let XC;function Mu(){if(void 0!==XC)return XC;if(typeof document<"u")return document;throw new S(210,!1)}const pg=new ye("",{providedIn:"root",factory:()=>V4}),V4="ng",YR=new ye(""),go=new ye("",{providedIn:"platform",factory:()=>"unknown"}),ZR=new ye("",{providedIn:"root",factory:()=>Mu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function B4(){const t=new Kd;return"browser"===G(go)&&(t.store=function j4(t,e){const n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(Mu(),G(pg))),t}let Kd=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Me({token:t,providedIn:"root",factory:B4})}get(n,r){return void 0!==this.store[n]?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(const n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();const eb="h",tb="b";var Qd=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Qd||{});const uv="e",nb="t",gg="c",cv="x",Yd="r",rb="i",lv="n",mg="d",ob="__nghData__",_g="ngh";let JR=()=>null;function z4(t,e,n=!1){let r=t.getAttribute(_g);if(null==r)return null;const[i,o]=r.split("|");if(r=n?o:i,!r)return null;const a=n?i:o?`|${o}`:"";let u={};if(""!==r){const p=e.get(Kd,null,{optional:!0});null!==p&&(u=p.get(ob,[])[Number(r)])}const d={data:u,firstChild:t.firstChild??null};return n&&(d.firstChild=t,dv(d,0,t.nextSibling)),a?t.setAttribute(_g,a):t.removeAttribute(_g),d}function sb(t,e,n=!1){return JR(t,e,n)}function XR(t){let e=t._lView;return 2===e[Ee].type?null:(ba(e)&&(e=e[Ue]),e)}function dv(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function ub(t,e){return t.segmentHeads?.[e]??null}function nP(t,e){return t.data[gg]?.[e]??null}function cb(t,e){const n=nP(t,e)??[];let r=0;for(let i of n)r+=i[Yd]*(i[cv]??1);return r}function $c(t,e){if(typeof t.disconnectedNodes>"u"){const n=t.data[mg];t.disconnectedNodes=n?new Set(n):null}return!!function rP(t){if(typeof t.disconnectedNodes>"u"){const e=t.data[mg];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}(t)?.has(e)}const hv=new ye(""),sP=new ye("",{providedIn:"root",factory:()=>!1});let fv,pv;function Zd(t){return function db(){if(void 0===fv&&(fv=null,_n.trustedTypes))try{fv=_n.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fv}()?.createHTML(t)||t}function dP(t){return function hb(){if(void 0===pv&&(pv=null,_n.trustedTypes))try{pv=_n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return pv}()?.createScriptURL(t)||t}class zc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wl})`}}class J4 extends zc{getTypeName(){return"HTML"}}class X4 extends zc{getTypeName(){return"Style"}}class ez extends zc{getTypeName(){return"Script"}}class tz extends zc{getTypeName(){return"URL"}}class nz extends zc{getTypeName(){return"ResourceURL"}}function mo(t){return t instanceof zc?t.changingThisBreaksApplicationSecurity:t}function Ls(t,e){const n=function rz(t){return t instanceof zc&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Wl})`)}return n===e}class cz{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Zd(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}}class lz{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Zd(e),n}}const hz=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gv(t){return(t=String(t)).match(hz)?t:"unsafe:"+t}function Aa(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ig(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const fP=Aa("area,br,col,hr,img,wbr"),pP=Aa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gP=Aa("rp,rt"),fb=Ig(fP,Ig(pP,Aa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ig(gP,Aa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ig(gP,pP)),pb=Aa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mP=Ig(pb,Aa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Aa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fz=Aa("script,style,template");class pz{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)i.push(n),n=_z(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=mz(n);if(o){n=o;break}n=i.pop()}return this.buf.join("")}startElement(e){const n=_P(e).toLowerCase();if(!fb.hasOwnProperty(n))return this.sanitizedSomething=!0,!fz.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!mP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;pb[a]&&(u=gv(u)),this.buf.push(" ",s,'="',vP(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=_P(e).toLowerCase();fb.hasOwnProperty(n)&&!fP.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(vP(e))}}function mz(t){const e=t.nextSibling;if(e&&t!==e.previousSibling)throw yP(e);return e}function _z(t){const e=t.firstChild;if(e&&function gz(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,e))throw yP(e);return e}function _P(t){const e=t.nodeName;return"string"==typeof e?e:"FORM"}function yP(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const yz=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vz=/([^\#-~ |!])/g;function vP(t){return t.replace(/&/g,"&amp;").replace(yz,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(vz,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mv;function IP(t,e){let n=null;try{mv=mv||function hP(t){const e=new lz(t);return function dz(){try{return!!(new window.DOMParser).parseFromString(Zd(""),"text/html")}catch{return!1}}()?new cz(e):e}(t);let r=e?String(e):"";n=mv.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=mv.getInertBodyElement(r)}while(r!==o);return Zd((new pz).sanitizeChildren(gb(n)||n))}finally{if(n){const r=gb(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function gb(t){return"content"in t&&function Iz(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Vo=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Vo||{});function EP(t){const e=Eg();return e?e.sanitize(Vo.URL,t)||"":Ls(t,"URL")?mo(t):gv(at(t))}function _v(t){const e=Eg();if(e)return dP(e.sanitize(Vo.RESOURCE_URL,t)||"");if(Ls(t,"ResourceURL"))return dP(mo(t));throw new S(904,!1)}function Eg(){const t=ae();return t&&t[Po].sanitizer}const Az=/^>|^->|<!--|-->|--!>|<!-$/g,Sz=/(<|>)/g,Mz="\u200b$1\u200b";function _o(t){return t instanceof Function?t():t}function yo(t){return"browser"===(t??G(Ur)).get(go)}var Ru=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ru||{});let yb;function vb(t,e){return yb(t,e)}function Xd(t,e,n,r,i){if(null!=r){let o,s=!1;Vr(r)?o=r:ir(r)&&(s=!0,r=r[bn]);const a=Ot(r);0===t&&null!==n?null==i?kP(e,n,a):Hc(e,n,a,i||null,!0):1===t&&null!==n?Hc(e,n,a,i||null,!0):2===t?Cg(e,a,s):3===t&&e.destroyNode(a),null!=o&&function Qz(t,e,n,r,i){const o=n[ji];o!==Ot(n)&&Xd(e,t,r,o,i);for(let a=xn;a<n.length;a++){const u=n[a];Cv(u[Ee],u,t,e,r,o)}}(e,t,o,n,i)}}function Ib(t,e){return t.createText(e)}function Eb(t,e){return t.createComment(function CP(t){return t.replace(Az,e=>e.replace(Sz,Mz))}(e))}function Iv(t,e,n){return t.createElement(e,n)}function xP(t,e){e[Po].changeDetectionScheduler?.notify(9),Cv(t,e,e[Xe],2,null,null)}function NP(t,e){const n=t[$i],r=e[Yn];(ir(r)||e[Tn]!==r[Yn][Tn])&&(t[qe]|=Id.HasTransplantedViews),null===n?t[$i]=[e]:n.push(e)}function wb(t,e){const n=t[$i],r=n.indexOf(e);n.splice(r,1)}function wg(t,e){if(t.length<=xn)return;const n=xn+e,r=t[n];if(r){const i=r[Ca];null!==i&&i!==t&&wb(i,r),e>0&&(t[n-1][ci]=r[ci]);const o=ga(t,xn+e);!function jz(t,e){xP(t,e),e[bn]=null,e[Tr]=null}(r[Ee],r);const s=o[ns];null!==s&&s.detachView(o[Ee]),r[Yn]=null,r[ci]=null,r[qe]&=-129}return r}function Ev(t,e){if(!(256&e[qe])){const n=e[Xe];n.destroyNode&&Cv(t,e,n,3,null,null),function zz(t){let e=t[Sc];if(!e)return Cb(t[Ee],t);for(;e;){let n=null;if(ir(e))n=e[Sc];else{const r=e[xn];r&&(n=r)}if(!n){for(;e&&!e[ci]&&e!==t;)ir(e)&&Cb(e[Ee],e),e=e[Yn];null===e&&(e=t),ir(e)&&Cb(e[Ee],e),n=e&&e[ci]}e=n}}(e)}}function Cb(t,e){if(256&e[qe])return;const n=$e(null);try{e[qe]&=-129,e[qe]|=256,e[li]&&Er(e[li]),function Gz(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof bu)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];No(4,a,u);try{u.call(a)}finally{No(5,a,u)}}else{No(4,i,o);try{o.call(i)}finally{No(5,i,o)}}}}}(t,e),function qz(t,e){const n=t.cleanup,r=e[yu];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[yu]=null);const i=e[xo];if(null!==i){e[xo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[Ee].type&&e[Xe].destroy();const r=e[Ca];if(null!==r&&Vr(e[Yn])){r!==e[Yn]&&wb(r,e);const i=e[ns];null!==i&&i.detachView(t)}ZC(e)}finally{$e(n)}}function bb(t,e,n){return function OP(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[bn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===oo.None||o===oo.Emulated)return null}return Dr(r,n)}}(t,e.parent,n)}function Hc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function kP(t,e,n){t.appendChild(e,n)}function FP(t,e,n,r,i){null!==r?Hc(t,e,n,r,i):kP(t,e,n)}function Tb(t,e){return t.parentNode(e)}let Db,UP=function LP(t,e,n){return 40&t.type?Dr(t,n):null};function wv(t,e,n,r){const i=bb(t,r,e),o=e[Xe],a=function VP(t,e,n){return UP(t,e,n)}(r.parent||e[Tr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)FP(o,i,n[u],a,!1);else FP(o,i,n,a,!1);void 0!==Db&&Db(o,r,e,n,i)}function qc(t,e){if(null!==e){const n=e.type;if(3&n)return Dr(e,t);if(4&n)return Ab(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return qc(t,r);{const i=t[e.index];return Vr(i)?Ab(-1,i):Ot(i)}}if(128&n)return qc(t,e.next);if(32&n)return vb(e,t)()||Ot(t[e.index]);{const r=jP(t,e);return null!==r?Array.isArray(r)?r[0]:qc(rs(t[Tn]),r):qc(t,e.next)}}return null}function jP(t,e){return null!==e?t[Tn][Tr].projection[e.projection]:null}function Ab(t,e){const n=xn+t+1;if(n<e.length){const r=e[n],i=r[Ee].firstChild;if(null!==i)return qc(r,i)}return e[ji]}function Cg(t,e,n){t.removeChild(null,e,n)}function $P(t){t.textContent=""}function Sb(t,e,n,r,i,o,s){for(;null!=n;){if(128===n.type){n=n.next;continue}const a=r[n.index],u=n.type;if(s&&0===e&&(a&&di(Ot(a),r),n.flags|=2),32&~n.flags)if(8&u)Sb(t,e,n.child,r,i,o,!1),Xd(e,t,i,a,o);else if(32&u){const d=vb(n,r);let p;for(;p=d();)Xd(e,t,i,p,o);Xd(e,t,i,a,o)}else 16&u?zP(t,e,r,n,i,o):Xd(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Cv(t,e,n,r,i,o){Sb(n,r,t.firstChild,e,i,o,!1)}function zP(t,e,n,r,i,o){const s=n[Tn],u=s[Tr].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Xd(e,t,i,u[d],o);else{let d=u;const p=s[Yn];hg(r)&&(d.flags|=128),Sb(t,e,d,p,i,o,!0)}}function HP(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qP(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&mp(t,e,r),null!==i&&HP(t,e,i),null!==o&&function Zz(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const lt={};function te(t=1){GP(ft(),ae(),or()+t,!1)}function GP(t,e,n,r){if(!r)if(3&~e[qe]){const o=t.preOrderHooks;null!==o&&Ld(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&ks(e,o,n)}os(n)}function Ie(t,e=It.Default){const n=ae();return null===n?we(t,e):ev(Qt(),n,Qe(t),e)}function KP(t,e,n,r,i,o){const s=$e(null);try{let a=null;i&Ts.SignalBased&&(a=e[r][Zt]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&Ts.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):My(e,a,r,o)}finally{$e(s)}}function bv(t,e,n,r,i,o,s,a,u,d,p){const m=e.blueprint.slice();return m[bn]=i,m[qe]=204|r,(null!==d||t&&2048&t[qe])&&(m[qe]|=2048),Oy(m),m[Yn]=m[vu]=t,m[an]=n,m[Po]=s||t&&t[Po],m[Xe]=a||t&&t[Xe],m[Zn]=u||t&&t[Zn]||null,m[Tr]=o,m[Ps]=function v4(){return y4++}(),m[Qr]=p,m[Ey]=d,m[Tn]=2==e.type?t[Tn]:m,m}function Gc(t,e,n,r,i){let o=t.data[e];if(null===o)o=function Mb(t,e,n,r,i){const o=kc(),s=Hp(),u=t.data[e]=function oH(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return is()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function AC(){return et.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Eu(){const t=et.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Hi(o,!0),o}function bg(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function QP(t,e,n,r,i){const o=or(),s=2&r;try{os(-1),s&&e.length>Ue&&GP(t,e,Ue,!1),No(s?2:0,i),n(r,i)}finally{os(o),No(s?3:1,i)}}function Rb(t,e,n){if(Pc(e)){const r=$e(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{$e(r)}}}function Pb(t,e,n){Nd()&&(function hH(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;Ns(n)&&function vH(t,e,n){const r=Dr(e,t),i=YP(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Tv(t,bv(t,i,null,s,r,e,null,t[Po].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Du(n,e),di(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],d=f(e,t,a,n);di(d,e),null!==s&&IH(0,a-i,d,u,0,s),co(u)&&(Di(n.index,e)[an]=f(e,t,a,n))}}(t,e,n,Dr(n,e)),!(64&~n.flags)&&tx(t,e,n))}function xb(t,e,n=Dr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function YP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Nb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Nb(t,e,n,r,i,o,s,a,u,d,p){const m=Ue+r,y=m+i,E=function Xz(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:lt);return n}(m,y),C="function"==typeof d?d():d;return E[Ee]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:p}}let ZP=()=>null;function nH(t){PR(t)?$P(t):function G4(t){const e=Mu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){const s=function q4(t){return t.textContent?.replace(/\s/gm,"")}(o);return"ngetn"===s||"ngtns"===s?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=n.nextNode();)i.push(r);for(const o of i)"ngetn"===o.textContent?o.replaceWith(e.createTextNode("")):o.remove()}(t)}function JP(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,u=Ts.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let d=o;if(null!==i){if(!i.hasOwnProperty(o))continue;d=i[o]}0===t?XP(r,n,d,a,u):XP(r,n,d,a)}return r}function XP(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function Wi(t,e,n,r,i,o,s,a){const u=Dr(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(Lb(t,n,p,r,i),Ns(e)&&function uH(t,e){const n=Di(e,t);16&n[qe]||(n[qe]|=64)}(n,e.index)):3&e.type&&(r=function aH(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function Ob(t,e,n,r){if(Nd()){const i=null===r?null:{"":-1},o=function pH(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(ly(e,s.selectors,!1))if(r||(r=[]),co(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),kb(t,e,a.length)}else r.unshift(s),kb(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&ex(t,e,n,s,i,a),i&&function gH(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new S(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=ma(n.mergedAttrs,n.attrs)}function ex(t,e,n,r,i,o){for(let d=0;d<r.length;d++)$d(Du(n,e),t,r[d].type);!function _H(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,u=bg(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=ma(n.mergedAttrs,p.hostAttrs),yH(t,n,e,u,p),mH(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const m=p.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function sH(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,d=null;for(let p=e.directiveStart;p<i;p++){const m=o[p],y=n?n.get(m):null,C=y?y.outputs:null;u=JP(0,m.inputs,p,u,y?y.inputs:null),d=JP(1,m.outputs,p,d,C);const T=null===u||null===s||bc(e)?null:EH(u,p,s);a.push(T)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,o)}function tx(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function MC(){return et.lFrame.currentDirectiveIndex}();try{os(o);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Fc(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&fH(u,d)}}finally{os(-1),Fc(s)}}function fH(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function kb(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mH(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;co(e)&&(n[""]=t)}}function yH(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=pa(i.type)),s=new bu(o,co(i),Ie);t.blueprint[r]=s,n[r]=s,function lH(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function dH(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,bg(t,n,i.hostVars,lt),i)}function Us(t,e,n,r,i,o){const s=Dr(t,e);!function Fb(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?at(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Xe],s,o,t.value,n,r,i)}function IH(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)KP(r,n,s[a++],s[a++],s[a++],s[a++])}function EH(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function nx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function rx(t,e){const n=t.contentQueries;if(null!==n){const r=$e(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];wu(n[i]),a.contentQueries(2,e[s],s)}}}finally{$e(r)}}}function Tv(t,e){return t[Sc]?t[Pp][ci]=e:t[Sc]=e,t[Pp]=e,e}function Vb(t,e,n){wu(0);const r=$e(null);try{e(t,n)}finally{$e(r)}}function Dv(t,e){const n=t[Zn],r=n?n.get(Vs,null):null;r&&r.handleError(e)}function Lb(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=n[o++];KP(t.data[s],e[s],r,a,u,i)}}function Sa(t,e,n){const r=Nc(e,t);!function PP(t,e,n){t.setValue(e,n)}(t[Xe],r,n)}function wH(t,e){const n=Di(e,t),r=n[Ee];!function CH(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[bn];null!==i&&null===n[Qr]&&(n[Qr]=sb(i,n[Zn])),Ub(r,n,n[an])}function Ub(t,e,n){Qp(e);try{const r=t.viewQuery;null!==r&&Vb(1,r,n);const i=t.template;null!==i&&QP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ns]?.finishViewCreation(t),t.staticContentQueries&&rx(t,e),t.staticViewQueries&&Vb(2,t.viewQuery,n);const o=t.components;null!==o&&function bH(t,e){for(let n=0;n<e.length;n++)wH(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[qe]&=-5,Zp()}}function eh(t,e,n,r){const i=$e(null);try{const o=e.tView,u=bv(t,o,n,4096&t[qe]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[Ca]=t[e.index];const p=t[ns];return null!==p&&(u[ns]=p.createEmbeddedView(o)),Ub(o,u,n),u}finally{$e(i)}}function ax(t,e){const n=xn+e;if(n<t.length)return t[n]}function Wc(t,e){return!e||null===e.firstChild||hg(t)}function th(t,e,n,r=!0){const i=e[Ee];if(function Hz(t,e,n,r){const i=xn+r,o=n.length;r>0&&(n[i-1][ci]=e),r<o-xn?(e[ci]=n[i],ud(n,xn+r,e)):(n.push(e),e[ci]=null),e[Yn]=n;const s=e[Ca];null!==s&&n!==s&&NP(s,e);const a=e[ns];null!==a&&a.insertView(t),jp(e),e[qe]|=128}(i,e,t,n),r){const s=Ab(n,t),a=e[Xe],u=Tb(a,t[ji]);null!==u&&function $z(t,e,n,r,i,o){r[bn]=i,r[Tr]=e,Cv(t,r,n,1,i,o)}(i,t[Tr],a,e,u,s)}const o=e[Qr];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function Bb(t,e){const n=wg(t,e);return void 0!==n&&Ev(n[Ee],n),n}function Tg(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(Ot(o)),Vr(o)&&ux(o,r);const s=n.type;if(8&s)Tg(t,e,n.child,r);else if(32&s){const a=vb(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=jP(e,n);if(Array.isArray(a))r.push(...a);else{const u=rs(e[Tn]);Tg(u[Ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ux(t,e){for(let n=xn;n<t.length;n++){const r=t[n],i=r[Ee].firstChild;null!==i&&Tg(r[Ee],r,i,e)}t[ji]!==t[bn]&&e.push(t[ji])}let cx=[];const SH={...he,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Iu(t.lView)},consumerOnSignalRead(){this.lView[li]=this}},RH={...he,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=rs(t.lView);for(;e&&!lx(e[Ee]);)e=rs(e);e&&ky(e)},consumerOnSignalRead(){this.lView[li]=this}};function lx(t){return 2!==t.type}const PH=100;function Av(t,e=!0,n=0){const r=t[Po],i=r.rendererFactory;i.begin?.();try{!function xH(t,e){const n=jy();try{DC(!0),jb(t,e);let r=0;for(;Md(t);){if(r===PH)throw new S(103,!1);r++,jb(t,1)}}finally{DC(n)}}(t,n)}catch(s){throw e&&Dv(t,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function NH(t,e,n,r){const i=e[qe];if(!(256&~i))return;e[Po].inlineEffectRunner?.flush(),Qp(e);let a=!0,u=null,d=null;lx(t)?(d=function TH(t){return t[li]??function DH(t){const e=cx.pop()??Object.create(SH);return e.lView=t,e}(t)}(e),u=tt(d)):null===function Rn(){return Le}()?(a=!1,d=function MH(t){const e=t[li]??Object.create(RH);return e.lView=t,e}(e),u=tt(d)):e[li]&&(Er(e[li]),e[li]=null);try{Oy(e),function $y(t){return et.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&QP(t,e,n,2,r);const p=!(3&~i);if(p){const E=t.preOrderCheckHooks;null!==E&&ks(e,E,null)}else{const E=t.preOrderHooks;null!==E&&Ld(e,E,0,null),Ud(e,0)}if(function OH(t){for(let e=BR(t);null!==e;e=jR(e)){if(!(e[qe]&Id.HasTransplantedViews))continue;const n=e[$i];for(let r=0;r<n.length;r++)ky(n[r])}}(e),hx(e,0),null!==t.contentQueries&&rx(t,e),p){const E=t.contentCheckHooks;null!==E&&ks(e,E)}else{const E=t.contentHooks;null!==E&&Ld(e,E,1),Ud(e,1)}!function Jz(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)os(~i);else{const o=i,s=n[++r],a=n[++r];SC(s,o),a(2,e[o])}}}finally{os(-1)}}(t,e);const m=t.components;null!==m&&px(e,m,0);const y=t.viewQuery;if(null!==y&&Vb(2,y,r),p){const E=t.viewCheckHooks;null!==E&&ks(e,E)}else{const E=t.viewHooks;null!==E&&Ld(e,E,2),Ud(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[vd]){for(const E of e[vd])E();e[vd]=null}e[qe]&=-73}catch(p){throw Iu(e),p}finally{null!==d&&(_t(d,u),a&&function AH(t){t.lView[li]!==t&&(t.lView=null,cx.push(t))}(d)),Zp()}}function hx(t,e){for(let n=BR(t);null!==n;n=jR(n))for(let r=xn;r<n.length;r++)fx(n[r],e)}function kH(t,e,n){fx(Di(e,t),n)}function fx(t,e){Bp(t)&&jb(t,e)}function jb(t,e){const r=t[Ee],i=t[qe],o=t[li];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!er(o)),s||=!1,o&&(o.dirty=!1),t[qe]&=-9217,s)NH(r,t,r.template,t[an]);else if(8192&i){hx(t,1);const a=r.components;null!==a&&px(t,a,1)}}function px(t,e,n){for(let r=0;r<e.length;r++)kH(t,e[r],n)}function Dg(t,e){const n=jy()?64:1088;for(t[Po].changeDetectionScheduler?.notify(e);t;){t[qe]|=n;const r=rs(t);if(ba(t)&&!r)return t;t=r}return null}class Ag{get rootNodes(){const e=this._lView,n=e[Ee];return Tg(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return!(256&~this._lView[qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Yn];if(Vr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(wg(e,r),ga(n,r))}this._attachedToViewContainer=!1}Ev(this._lView[Ee],this._lView)}onDestroy(e){Rd(this._lView,e)}markForCheck(){Dg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[qe]&=-129}reattach(){jp(this._lView),this._lView[qe]|=128}detectChanges(){this._lView[qe]|=1024,Av(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=ba(this._lView),n=this._lView[Ca];null!==n&&!e&&wb(n,this._lView),xP(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e;const n=ba(this._lView),r=this._lView[Ca];null!==r&&!n&&NP(r,this._lView),jp(this._lView)}}let Ma=(()=>{class t{static{this.__NG_ELEMENT_ID__=LH}}return t})();const FH=Ma,VH=class extends FH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=eh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ag(i)}};function LH(){return function Sv(t,e){return 4&t.type?new VH(e,t,Gd(t,e)):null}(Qt(),ae())}const n5=new RegExp(`^(\\d+)*(${tb}|${eb})*(.*)`);function Gb(t){return t.index-Ue}function Ng(t,e,n,r){const i=Gb(r);let o=function Dx(t,e){const n=t.i18nNodes;if(n)return n.get(e)}(t,i);if(void 0===o){const s=t.data[lv];if(s?.[i])o=function Ax(t,e){const[n,...r]=function i5(t){const e=t.match(n5),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(const[u,d,p]of o.matchAll(/(f|n)(\d*)/g)){const m=parseInt(p,10)||1;a.push(d,m)}return[s,...a]}(t);let i;i=n===eb?e[Tn][bn]:n===tb?function AP(t){return t.ownerDocument.body}(e[Tn][bn]):Ot(e[Number(n)+Ue]);return function a5(t,e){let n=t;for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Qd.FirstChild:n=n.firstChild;break;case Qd.NextSibling:n=n.nextSibling}}return n}(i,r)}(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{const a=null===r.prev,u=r.prev??r.parent;if(function o5(t){return!t.prev&&8===t.parent?.type}(r))o=ub(t,Gb(r.parent));else{let d=Dr(u,n);if(a)o=d.firstChild;else{const p=Gb(u),m=ub(t,p);o=2===u.type&&m?xv(cb(t,p)+1,m):d.nextSibling}}}}return o}function xv(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}let Mx=!1;function b5(t,e,n){for(const r of n.node.cases[n.case]){const i=e.get(r.index-Ue);i&&Cg(t,i,!1)}}function Nx(t){const e=t[Rc]??[],r=t[Yn][Xe];for(const i of e)T5(i,r);t[Rc]=bt}function T5(t,e){let n=0,r=t.firstChild;if(r){const i=t.data[Yd];for(;n<i;){const o=r.nextSibling;Cg(e,r,!1),r=o,n++}}}function Ox(t){Nx(t);const e=t[bn];ir(e)&&Nv(e);for(let n=xn;n<t.length;n++)Nv(t[n])}function Nv(t){!function C5(t){const e=t[Qr];if(e){const{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){const i=t[Xe];for(const o of r.values())b5(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}(t);const e=t[Ee];for(let n=Ue;n<e.bindingStartIndex;n++)Vr(t[n])?Ox(t[n]):ir(t[n])&&Nv(t[n])}let kx=()=>null;function S5(t,e){const n=t[Rc];return e&&null!==n&&0!==n.length?n[0].data[rb]===e?n.shift():(Nx(t),null):null}function Qc(t,e){return kx(t,e)}class rh{}const ih=new ye("",{providedIn:"root",factory:()=>!1}),Fx=new ye(""),Jb=new ye("");class R5{}class Vx{}class x5{resolveComponentFactory(e){throw function P5(t){const e=Error(`No component factory found for ${tr(t)}.`);return e.ngComponent=t,e}(e)}}class Ov{static{this.NULL=new x5}}class Xb{}let Ra=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function N5(){const t=ae(),n=Di(Qt().index,t);return(ir(n)?n:t)[Xe]}()}}return t})(),O5=(()=>{class t{static{this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>null})}}return t})();function Fv(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Kl(i,a):2==o&&(r=Kl(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class jx extends Ov{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=yt(e);return new Vg(n,this.ngModule)}}function $x(t,e){const n=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r];if(void 0===i)continue;const o=Array.isArray(i),s=o?i[0]:i;n.push(e?{propName:s,templateName:r,isSignal:!!((o?i[1]:Ts.None)&Ts.SignalBased)}:{propName:s,templateName:r})}return n}class Vg extends Vx{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=$x(e.inputs,!0);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return $x(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function rC(t){return t.map(hy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=$e(null);try{let s=(i=i||this.ngModule)instanceof Kr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Ta(e,s):e,u=a.get(Xb,null);if(null===u)throw new S(407,!1);const m={rendererFactory:u,sanitizer:a.get(O5,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(rh,null)},y=u.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",C=r?function eH(t,e,n,r){const o=r.get(sP,!1)||n===oo.ShadowDom,s=t.selectRootElement(e,o);return function tH(t){ZP(t)}(s),s}(y,r,this.componentDef.encapsulation,a):Iv(y,E,function V5(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let D=null;null!==C&&(D=sb(C,a,!0));const L=Nb(0,null,null,1,0,null,null,null,null,null,null),k=bv(null,L,null,T,null,null,m,y,a,null,D);Qp(k);let K,fe,Te=null;try{const xe=this.componentDef;let V,P=null;xe.findHostDirectiveDefs?(V=[],P=new Map,xe.findHostDirectiveDefs(xe,V,P),V.push(xe)):V=[xe];const F=function U5(t,e){const n=t[Ee],r=Ue;return t[r]=e,Gc(n,r,2,"#host",null)}(k,C);Te=function B5(t,e,n,r,i,o,s){const a=i[Ee];!function j5(t,e,n,r){for(const i of t)e.mergedAttrs=ma(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Fv(e,e.mergedAttrs,!0),null!==n&&qP(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=sb(e,i[Zn]));const d=o.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const m=bv(i,YP(n),null,p,i[t.index],t,o,d,null,null,u);return a.firstCreatePass&&kb(a,t,r.length-1),Tv(i,m),i[t.index]=m}(F,C,xe,V,k,m,y),fe=Oc(L,Ue),C&&function z5(t,e,n,r){if(r)mp(t,n,["ng-version","18.2.13"]);else{const{attrs:i,classes:o}=function iC(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!so(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&mp(t,n,i),o&&o.length>0&&HP(t,n,o.join(" "))}}(y,xe,C,r),void 0!==n&&function H5(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(fe,this.ngContentSelectors,n),K=function $5(t,e,n,r,i,o){const s=Qt(),a=i[Ee],u=Dr(s,i);ex(a,i,s,n,null,r);for(let p=0;p<n.length;p++)di(f(i,a,s.directiveStart+p,s),i);tx(a,i,s),u&&di(u,i);const d=f(i,a,s.directiveStart+s.componentOffset,s);if(t[an]=i[an]=d,null!==o)for(const p of o)p(d,e);return Rb(a,s,i),d}(Te,xe,V,P,k,[q5]),Ub(L,k,null)}catch(xe){throw null!==Te&&ZC(Te),ZC(k),xe}finally{Zp()}return new L5(this.componentType,K,Gd(fe,k),k,fe)}finally{$e(o)}}}class L5 extends R5{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ag(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;Lb(o[Ee],o,i,e,n),this.previousInputValues.set(e,n),Dg(Di(this._tNode.index,o),1)}}get injector(){return new M(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function q5(){const t=Qt();Vd(ae()[Ee],t)}let ss=(()=>{class t{static{this.__NG_ELEMENT_ID__=G5}}return t})();function G5(){return function qx(t,e){let n;const r=e[t.index];return Vr(r)?n=r:(n=nx(r,e,null,t),e[t.index]=n,Tv(e,n)),Gx(n,e,t,r),new zx(n,t,e)}(Qt(),ae())}const W5=ss,zx=class extends W5{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gd(this._hostTNode,this._hostLView)}get injector(){return new M(this._hostTNode,this._hostLView)}get parentInjector(){const e=Fs(this._hostTNode,this._hostLView);if(Uc(e)){const n=Tu(e,this._hostLView),r=Da(e);return new M(n[Ee].data[r+8],n)}return new M(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Hx(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=Qc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Wc(this._hostTNode,s)),a}createComponent(e,n,r,i,o){const s=e&&!function wa(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}const u=s?e:new Vg(yt(e)),d=r||this.parentInjector;if(!o&&null==u.ngModule){const T=(s?d:this.parentInjector).get(Kr,null);T&&(o=T)}const p=yt(u.componentType??{}),m=Qc(this._lContainer,p?.id??null),E=u.create(d,i,m?.firstChild??null,o);return this.insertImpl(E.hostView,a,Wc(this._hostTNode,m)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function IC(t){return Vr(t[Yn])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Yn],d=new zx(u,u[Tr],u[Yn]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return th(s,i,o,r),e.attachToViewContainerRef(),ud(n0(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Hx(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=wg(this._lContainer,n);r&&(ga(n0(this._lContainer),n),Ev(r[Ee],r))}detach(e){const n=this._adjustIndex(e,-1),r=wg(this._lContainer,n);return r&&null!=ga(n0(this._lContainer),n)?new Ag(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Hx(t){return t[8]}function n0(t){return t[8]||(t[8]=[])}let Gx=Kx,r0=()=>!1;function Kx(t,e,n,r){if(t[ji])return;let i;i=8&n.type?Ot(r):function K5(t,e){const n=t[Xe],r=n.createComment(""),i=Dr(e,t);return Hc(n,Tb(n,i),r,function Wz(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ji]=i}function Q5(t,e,n){if(t[ji]&&t[Rc])return!0;const r=n[Qr],i=e.index-Ue;if(!r||function fg(t){if(hg(t))return!0;let e=t.parent;for(;e;){if(hg(t)||QC(e))return!0;e=e.parent}return!1}(e)||$c(r,i))return!1;const s=ub(r,i),a=r.data[gg]?.[i],[u,d]=function A5(t,e){const n=[];for(const r of e)for(let i=0;i<(r[cv]??1);i++){const o={data:r,firstChild:null};r[Yd]>0&&(o.firstChild=t,t=xv(r[Yd],t)),n.push(o)}return[t,n]}(s,a);return t[ji]=u,t[Rc]=d,!0}function Y5(t,e,n,r){r0(t,n,e)||Kx(t,e,n,r)}const nN=new Set;function hi(t){nN.has(t)||(nN.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ki(t,e){hi("NgSignals");const n=function _s(t){const e=Object.create(_e);e.value=t;const n=()=>(ve(e),e.value);return n[Zt]=e,n}(t),r=n[Zt];return e?.equal&&(r.equal=e.equal),n.set=i=>ue(r,i),n.update=i=>function Y(t,e){fr()||ms(),ue(t,e(t.value))}(r,i),n.asReadonly=iN.bind(n),n}function iN(){const t=this[Zt];if(void 0===t.readonlyFn){const e=()=>this();e[Zt]=t,t.readonlyFn=e}return t.readonlyFn}function oN(t){return function rN(t){return"function"==typeof t&&void 0!==t[Zt]}(t)&&"function"==typeof t.set}function cn(t){let e=function mN(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(co(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=Lv(t.inputs),s.inputTransforms=Lv(t.inputTransforms),s.declaredInputs=Lv(t.declaredInputs),s.outputs=Lv(t.outputs);const a=i.hostBindings;a&&_q(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&gq(t,u),d&&mq(t,d),fq(t,i),Hw(t.outputs,i.outputs),co(i)&&i.data.animation){const p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===cn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function pq(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ma(i.hostAttrs,n=ma(n,i.hostAttrs))}}(r)}function fq(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Lv(t){return t===Ro?{}:t===bt?[]:t}function gq(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function mq(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function _q(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function EN(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class Yc{}class wN{}class p0 extends Yc{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jx(this);const o=Wr(e);this._bootstrapComponents=_o(o.bootstrap),this._r3Injector=ER(e,n,[{provide:Yc,useValue:this},{provide:Ov,useValue:this.componentFactoryResolver},...r],tr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class g0 extends wN{constructor(e){super(),this.moduleType=e}create(e){return new p0(this.moduleType,e,[])}}class CN extends Yc{constructor(e){super(),this.componentFactoryResolver=new jx(this),this.instance=null;const n=new mu([...e.providers,{provide:Yc,useValue:this},{provide:Ov,useValue:this.componentFactoryResolver}],e.parent||ao(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Uv(t,e,n=null){return new CN({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function m0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Bs(t,e,n){return t[e]=n}function sr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Zc(t,e,n,r){const i=sr(t,e,n);return sr(t,e+1,r)||i}function sh(t){return!(32&~t.flags)}function Bg(t,e,n,r,i,o,s,a,u,d){const p=n+Ue,m=e.firstCreatePass?function Mq(t,e,n,r,i,o,s,a,u){const d=e.consts,p=Gc(e,t,4,s||null,a||null);Ob(e,n,p,zi(d,u)),Vd(e,p);const m=p.tView=Nb(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}(p,e,t,r,i,o,s,a,u):e.data[p];Hi(m,!1);const y=bN(e,t,m,n);Vc()&&wv(e,t,y,m),di(y,t);const E=nx(y,t,y,m);return t[p]=E,Tv(t,E),function Wx(t,e,n){return r0(t,e,n)}(E,m,t),Ed(m)&&Pb(e,t,m),null!=u&&xb(t,m,d),m}function jn(t,e,n,r,i,o,s,a){const u=ae(),d=ft();return Bg(u,d,t,e,n,r,i,zi(d.consts,o),s,a),jn}let bN=TN;function TN(t,e,n,r){return Oo(!0),e[Xe].createComment("")}function Rq(t,e,n,r){const i=e[Qr],o=!i||is()||sh(n)||$c(i,r);if(Oo(o),o)return TN(0,e);const s=i.data[nb]?.[r]??null;null!==s&&null!==n.tView&&null===n.tView.ssrId&&(n.tView.ssrId=s);const a=Ng(i,t,e,n);return dv(i,r,a),xv(cb(i,r),a)}var uh=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(uh||{});let PN=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>new t})}}return t})();class zg{constructor(){this.ngZone=G(Tt),this.scheduler=G(rh),this.errorHandler=G(Vs,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[uh.EarlyRead,uh.Write,uh.MixedReadWrite,uh.Read]}execute(){this.executing=!0;for(const e of zg.PHASES)for(const n of this.sequences)if(!n.erroredOrDestroyed&&n.hooks[e])try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Me({token:zg,providedIn:"root",factory:()=>new zg})}}class Nq{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function qv(t,e){!e?.injector&&function _u(t){if(!yy())throw new S(-203,!1)}();const n=e?.injector??G(Ur);return yo(n)?(hi("NgAfterNextRender"),function xN(t,e,n,r){const i=e.get(PN);i.impl??=e.get(zg);const o=n?.phase??uh.MixedReadWrite,s=!0!==n?.manualCleanup?e.get(lg):null,a=new Nq(i.impl,function kq(t,e){if(t instanceof Function){const n=[void 0,void 0,void 0,void 0];return n[e]=t,n}return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t,o),r,s);return i.impl.register(a),a}(t,n,e,!0)):NN}const NN={destroy(){}};function js(t,e,n,r){const i=ae();return sr(i,lo(),e)&&(ft(),Us(hn(),i,t,e,n,r)),js}function gh(t,e,n,r){return sr(t,lo(),n)?e+at(n)+r:lt}function _h(t,e,n,r,i,o,s,a){const d=function jv(t,e,n,r,i){const o=Zc(t,e,n,r);return sr(t,e+2,i)||o}(t,Zr(),n,i,s);return ho(3),d?e+at(n)+r+at(i)+o+at(s)+a:lt}function Kv(t,e){return t<<17|e<<2}function Ou(t){return t>>17&32767}function A0(t){return 2|t}function Xc(t){return(131068&t)>>2}function S0(t,e){return-131069&t|e<<2}function M0(t){return 1|t}function o1(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Ou(i):Xc(i),a=!1;for(;0!==s&&(!1===a||o);){const d=t[s+1];_6(t[s],e)&&(a=!0,t[s+1]=r?M0(d):A0(d)),s=r?Ou(d):Xc(d)}a&&(t[n+1]=r?A0(i):M0(i))}function _6(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bs(t,e)>=0}function en(t,e,n){const r=ae();return sr(r,lo(),e)&&Wi(ft(),hn(),r,t,e,r[Xe],n,!1),en}function R0(t,e,n,r,i){const s=i?"class":"style";Lb(t,n,e.inputs[s],s,r)}function bh(t,e){return function as(t,e,n,r){const i=ae(),o=ft(),s=ho(2);o.firstUpdatePass&&function p1(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[or()],s=function f1(t,e){return e>=t.expandoStartIndex}(t,n);(function y1(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function D6(t,e,n,r){const i=function Wp(t){const e=et.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qg(n=P0(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=P0(i,t,e,n,r),null===o){let u=function A6(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Xc(r))return t[Ou(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=P0(null,t,e,u[1],r),u=qg(u,e.attrs,r),function S6(t,e,n,r){t[Ou(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function M6(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qg(r,t[o].hostAttrs,n);return qg(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function g6(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ou(s),u=Xc(s);t[r]=n;let p,d=!1;if(Array.isArray(n)?(p=n[1],(null===p||bs(n,p)>0)&&(d=!0)):p=n,i)if(0!==u){const y=Ou(t[a+1]);t[r+1]=Kv(y,a),0!==y&&(t[y+1]=S0(t[y+1],r)),t[a+1]=function f6(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Kv(a,0),0!==a&&(t[a+1]=S0(t[a+1],r)),a=r;else t[r+1]=Kv(u,0),0===a?a=r:t[u+1]=S0(t[u+1],r),u=r;d&&(t[r+1]=A0(t[r+1])),o1(t,p,r,!0),o1(t,p,r,!1),function m6(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&bs(o,e)>=0&&(n[r+1]=M0(n[r+1]))}(e,p,t,r,o),s=Kv(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==lt&&sr(i,s,e)&&function m1(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],p=function p6(t){return!(1&~t)}(d)?_1(u,e,n,i,Xc(d),s):void 0;Qv(p)||(Qv(o)||function h6(t){return!(2&~t)}(d)&&(o=_1(u,null,n,i,a,s)),function Yz(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Ru.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ru.Important),t.setStyle(n,r,i,o))}}(r,s,Nc(or(),n),i,o))}(o,o.data[or()],i,i[Xe],t,i[s+1]=function N6(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=tr(mo(t)))),t}(e,n),r,s)}(t,e,null,!0),bh}function P0(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qg(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qg(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gr(t,s,!!n||e[++o]))}return void 0===t?null:t}function _1(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),p=d?u[1]:u,m=null===p;let y=n[i+1];y===lt&&(y=m?bt:void 0);let E=m?fp(y,r):p===r?y:void 0;if(d&&!Qv(E)&&(E=fp(u,r)),Qv(E)&&(a=E,s))return a;const C=t[i+1];i=s?Ou(C):Xc(C)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=fp(u,r))}return a}function Qv(t){return void 0!==t}class H6{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function x0(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function N0(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function v1(t,e,n,r,i){if(N0(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function I1(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class E1{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function tn(t,e){hi("NgControlFlow");const n=ae(),r=lo(),i=n[r]!==lt?n[r]:-1,o=-1!==i?Yv(n,Ue+i):void 0;if(sr(n,r,t)){const a=$e(null);try{if(void 0!==o&&Bb(o,0),-1!==t){const u=Ue+t,d=Yv(n,u),p=O0(n[Ee],u),m=Qc(d,p.tView.ssrId);th(d,eh(n,p,e,{dehydratedView:m}),0,Wc(p,m))}}finally{$e(a)}}else if(void 0!==o){const a=ax(o,0);void 0!==a&&(a[an]=e)}}class G6{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xn}}function cs(t,e){return e}class K6{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function Uo(t,e,n,r,i,o,s,a,u,d,p,m,y){hi("NgControlFlow");const E=ae(),C=ft(),T=void 0!==u,D=ae(),L=a?s.bind(D[Tn][an]):s,k=new K6(T,L);D[Ue+t]=k,Bg(E,C,t+1,e,n,r,i,zi(C.consts,o)),T&&Bg(E,C,t+2,u,d,p,m,zi(C.consts,y))}class Q6 extends H6{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-xn}at(e){return this.getLView(e)[an].$implicit}attach(e,n){const r=n[Qr];this.needsIndexUpdate||=e!==this.length,th(this.lContainer,n,e,Wc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function Y6(t,e){return wg(t,e)}(this.lContainer,e)}create(e,n){const r=Qc(this.lContainer,this.templateTNode.tView.ssrId),i=eh(this.hostLView,this.templateTNode,new G6(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ev(e[Ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[an].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[an].$index=e}getLView(e){return function Z6(t,e){return ax(t,e)}(this.lContainer,e)}}function Bo(t){const e=$e(null),n=or();try{const r=ae(),i=r[Ee],o=r[n],s=n+1,a=Yv(r,s);if(void 0===o.liveCollection){const d=O0(i,s);o.liveCollection=new Q6(a,r,d)}else o.liveCollection.reset();const u=o.liveCollection;if(function q6(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){const d=t.at(o),p=e[o],m=x0(o,d,o,p,n);if(0!==m){m<0&&t.updateValue(o,p),o++;continue}const y=t.at(s),E=e[u],C=x0(s,y,u,E,n);if(0!==C){C<0&&t.updateValue(s,E),s--,u--;continue}const T=n(o,d),D=n(s,y),L=n(o,p);if(Object.is(L,D)){const k=n(u,E);Object.is(k,T)?(t.swap(o,s),t.updateValue(s,E),u--,s--):t.move(s,o),t.updateValue(o,p),o++}else if(r??=new E1,i??=I1(t,o,s,n),N0(t,r,o,L))t.updateValue(o,p),o++,s++;else if(i.has(L))r.set(T,t.detach(o)),s--;else{const k=t.create(o,e[o]);t.attach(o,k),o++,s++}}for(;o<=u;)v1(t,r,n,o,e[o]),o++}else if(null!=e){const u=e[Symbol.iterator]();let d=u.next();for(;!d.done&&o<=s;){const p=t.at(o),m=d.value,y=x0(o,p,o,m,n);if(0!==y)y<0&&t.updateValue(o,m),o++,d=u.next();else{r??=new E1,i??=I1(t,o,s,n);const E=n(o,m);if(N0(t,r,o,E))t.updateValue(o,m),o++,s++,d=u.next();else if(i.has(E)){const C=n(o,p);r.set(C,t.detach(o)),s--}else t.attach(o,t.create(o,m)),o++,s++,d=u.next()}}for(;!d.done;)v1(t,r,n,t.length,d.value),d=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){const d=lo(),p=0===u.length;if(sr(r,d,p)){const m=n+2,y=Yv(r,m);if(p){const E=O0(i,m),C=Qc(y,E.tView.ssrId);th(y,eh(r,E,void 0,{dehydratedView:C}),0,Wc(E,C))}else Bb(y,0)}}}finally{$e(e)}}function Yv(t,e){return t[e]}function O0(t,e){return Oc(t,e)}function U(t,e,n,r){const i=ae(),o=ft(),s=Ue+t,a=i[Xe],u=o.firstCreatePass?function J6(t,e,n,r,i,o){const s=e.consts,u=Gc(e,t,2,r,zi(s,i));return Ob(e,n,u,zi(s,o)),null!==u.attrs&&Fv(u,u.attrs,!1),null!==u.mergedAttrs&&Fv(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],d=w1(o,i,u,a,e,t);i[s]=d;const p=Ed(u);return Hi(u,!0),qP(a,d,u),!sh(u)&&Vc()&&wv(o,i,d,u),0===function EC(){return et.lFrame.elementDepthCount}()&&di(d,i),function wC(){et.lFrame.elementDepthCount++}(),p&&(Pb(o,i,u),Rb(o,u,i)),null!==r&&xb(i,u),U}function O(){let t=Qt();Hp()?function qp(){et.lFrame.isParent=!1}():(t=t.parent,Hi(t,!1));const e=t;(function bC(t){return et.skipHydrationRootTNode===t})(e)&&function Uy(){et.skipHydrationRootTNode=null}(),function CC(){et.lFrame.elementDepthCount--}();const n=ft();return n.firstCreatePass&&(Vd(n,t),Pc(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function tg(t){return!!(8&t.flags)}(e)&&R0(n,e,ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function LC(t){return!!(16&t.flags)}(e)&&R0(n,e,ae(),e.stylesWithoutHost,!1),O}function jo(t,e,n,r){return U(t,e,n,r),O(),jo}let w1=(t,e,n,r,i,o)=>(Oo(!0),Iv(r,i,Gy()));function X6(t,e,n,r,i,o){const s=e[Qr],a=!s||is()||sh(n)||$c(s,o);if(Oo(a),a)return Iv(r,i,Gy());const u=Ng(s,t,e,n);return nP(s,o)&&dv(s,o,u.nextSibling),s&&(QC(n)||PR(u))&&Ns(n)&&(function TC(t){et.skipHydrationRootTNode=t}(n),$P(u)),u}let b1=(t,e,n,r)=>(Oo(!0),Eb(e[Xe],""));function nG(t,e,n,r){let i;const o=e[Qr],s=!o||is()||$c(o,r)||sh(n);if(Oo(s),s)return Eb(e[Xe],"");const a=Ng(o,t,e,n),u=function tP(t,e){const n=t.data;let r=n[uv]?.[e]??null;return null===r&&n[gg]?.[e]&&(r=cb(t,e)),r}(o,r);return dv(o,r,a),i=xv(u,a),i}function mr(){return ae()}const el=void 0;var oG=["en",[["a","p"],["AM","PM"],el],[["AM","PM"],el,el],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],el,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],el,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",el,"{1} 'at' {0}",el],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iG(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Th={};function Ai(t){const e=function aG(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=S1(e);if(n)return n;const r=e.split("-")[0];if(n=S1(r),n)return n;if("en"===r)return oG;throw new S(701,!1)}function S1(t){return t in Th||(Th[t]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[t]),Th[t]}var Dn=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Dn||{});const Zv="en-US";let M1=Zv,W1=(t,e,n)=>{};function Ze(t,e,n,r){const i=ae(),o=ft(),s=Qt();return U0(o,i,i[Xe],s,t,e,r),Ze}function U0(t,e,n,r,i,o,s){const a=Ed(r),d=t.firstCreatePass&&function ox(t){return t.cleanup??=[]}(t),p=e[an],m=function ix(t){return t[yu]??=[]}(e);let y=!0;if(3&r.type||s){const T=Dr(r,e),D=s?s(T):T,L=m.length,k=s?fe=>s(Ot(fe[r.index])):r.index;let K=null;if(!s&&a&&(K=function QG(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[yu],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==K)(K.__ngLastListenerFn__||K).__ngNextListenerFn__=o,K.__ngLastListenerFn__=o,y=!1;else{o=Z1(r,e,p,o),W1(T,i,o);const fe=n.listen(D,i,o);m.push(o,fe),d&&d.push(i,k,L,L+1)}}else o=Z1(r,e,p,o);const E=r.outputs;let C;if(y&&null!==E&&(C=E[i])){const T=C.length;if(T)for(let D=0;D<T;D+=2){const Te=e[C[D]][C[D+1]].subscribe(o),xe=m.length;m.push(o,Te),d&&d.push(i,r.index,xe,-(xe+1))}}}function Y1(t,e,n,r){const i=$e(null);try{return No(6,e,n),!1!==n(r)}catch(o){return Dv(t,o),!1}finally{No(7,e,n),$e(i)}}function Z1(t,e,n,r){return function i(o){if(o===Function)return r;Dg(t.componentOffset>-1?Di(t.index,e):e,5);let a=Y1(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=Y1(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ge(t=1){return function PC(t){return(et.lFrame.contextLView=function Fy(t,e){for(;t>0;)e=e[vu],t--;return e}(t,et.lFrame.contextLView))[an]}(t)}function Pa(t,e,n,r,i){const o=ae(),s=gh(o,e,n,r);return s!==lt&&Wi(ft(),hn(),o,t,s,o[Xe],i,!1),Pa}function Hs(t){return Os(function By(){return et.lFrame.contextLView}(),Ue+t)}function re(t,e=""){const n=ae(),r=ft(),i=t+Ue,o=r.firstCreatePass?Gc(r,i,1,e,null):r.data[i],s=vO(r,n,o,e,t);n[i]=s,Vc()&&wv(r,n,s,o),Hi(o,!1)}let vO=(t,e,n,r,i)=>(Oo(!0),Ib(e[Xe],r));function f9(t,e,n,r,i){const o=e[Qr],s=!o||is()||sh(n)||$c(o,i);return Oo(s),s?Ib(e[Xe],r):Ng(o,t,e,n)}function fn(t){return cr("",t,""),fn}function cr(t,e,n){const r=ae(),i=gh(r,t,e,n);return i!==lt&&Sa(r,or(),i),cr}function j0(t,e,n,r,i){const o=ae(),s=function mh(t,e,n,r,i,o){const a=Zc(t,Zr(),n,i);return ho(2),a?e+at(n)+r+at(i)+o:lt}(o,t,e,n,r,i);return s!==lt&&Sa(o,or(),s),j0}function tI(t,e,n,r,i,o,s){const a=ae(),u=_h(a,t,e,n,r,i,o,s);return u!==lt&&Sa(a,or(),u),tI}function Bt(t,e,n){oN(e)&&(e=e());const r=ae();return sr(r,lo(),e)&&Wi(ft(),hn(),r,t,e,r[Xe],n,!1),Bt}function Dt(t,e){const n=oN(t);return n&&t.set(e),n}function jt(t,e){const n=ae(),r=ft(),i=Qt();return U0(r,n,n[Xe],i,t,e),jt}function $0(t,e,n,r,i){if(t=Qe(t),Array.isArray(t))for(let o=0;o<t.length;o++)$0(t[o],e,n,r,i);else{const o=ft(),s=ae(),a=Qt();let u=As(t)?t:Qe(t.provide);const d=_y(t),p=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(As(t)||!t.multi){const E=new bu(d,i,Ie),C=H0(u,e,i?p:p+y,m);-1===C?($d(Du(a,s),o,u),z0(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[C]=E,s[C]=E)}else{const E=H0(u,e,p+y,m),C=H0(u,e,p,p+y),D=C>=0&&n[C];if(i&&!D||!i&&!(E>=0&&n[E])){$d(Du(a,s),o,u);const L=function I9(t,e,n,r,i){const o=new bu(t,n,Ie);return o.multi=[],o.index=e,o.componentProviders=0,SO(o,i,r&&!n),o}(i?v9:y9,n.length,i,r,d);!i&&D&&(n[C].providerFactory=L),z0(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),s.push(L)}else z0(o,t,E>-1?E:C,SO(n[i?C:E],d,!i&&r));!i&&r&&D&&n[C].componentProviders++}}}function z0(t,e,n,r){const i=As(e),o=function lC(t){return!!t.useClass}(e);if(i||o){const u=(o?Qe(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const p=d.indexOf(n);-1===p?d.push(n,[r,u]):d[p+1].push(r,u)}else d.push(n,u)}}}function SO(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function H0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function y9(t,e,n,r){return q0(this.multi,[])}function v9(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=f(n,n[Ee],this.providerFactory.index,r);o=a.slice(0,s),q0(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],q0(i,o);return o}function q0(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function On(t,e=[]){return n=>{n.providersResolver=(r,i)=>function _9(t,e,n){const r=ft();if(r.firstCreatePass){const i=co(t);$0(n,r.data,r.blueprint,i,!0),$0(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let E9=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=wp(0,n.type),i=r.length>0?Uv([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Me({token:t,providedIn:"environment",factory:()=>new t(we(Kr))})}}return t})();function Wn(t){hi("NgStandalone"),t.getStandaloneInjector=e=>e.get(E9).getOrCreateStandaloneInjector(t)}function Dh(t,e,n){const r=Yr()+t,i=ae();return i[r]===lt?Bs(i,r,n?e.call(n):e()):function Ug(t,e){return t[e]}(i,r)}function G0(t,e,n,r){return PO(ae(),Yr(),t,e,n,r)}function Zg(t,e){const n=t[e];return n===lt?void 0:n}function PO(t,e,n,r,i,o){const s=e+n;return sr(t,s,i)?Bs(t,s+1,o?r.call(o,i):r(i)):Zg(t,s+1)}function xa(t,e){const n=ft();let r;const i=t+Ue;n.firstCreatePass?(r=function N9(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=pa(r.type)),a=Cr(Ie);try{const u=Bc(!1),d=o();return Bc(u),function B0(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,ae(),i,d),d}finally{Cr(a)}}function Jg(t,e,n){const r=t+Ue,i=ae(),o=Os(i,r);return em(i,r)?PO(i,Yr(),e,o.transform,n,o):o.transform(n)}function Xg(t,e,n,r){const i=t+Ue,o=ae(),s=Os(o,i);return em(o,i)?function xO(t,e,n,r,i,o,s){const a=e+n;return Zc(t,a,i,o)?Bs(t,a+2,s?r.call(s,i,o):r(i,o)):Zg(t,a+2)}(o,Yr(),e,s.transform,n,r,s):s.transform(n,r)}function em(t,e){return t[Ee].data[e].pure}class Mh{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const o8=new Mh("18.2.13");let Z0=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const tk=new ye("");function rm(t){return!!t&&"function"==typeof t.then}function nk(t){return!!t&&"function"==typeof t.subscribe}const nT=new ye("");let rk=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=G(nT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(rm(o))n.push(o);else if(nk(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Rh=new ye("");let uI,ls=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(p4),this.afterRenderManager=G(PN),this.zonelessEnabled=G(ih),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new R,this.afterTick=new R,this.componentTypes=[],this.components=[],this.isStable=G(Su).hasPendingTasks.pipe(ke(n=>!n)),this._injector=G(Kr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Vx;if(!this._injector.get(rk).done)throw!i&&function ya(t){const e=yt(t)||nr(t)||Fr(t);return null!==e&&e.standalone}(n),new S(405,!1);let s;s=i?n:this._injector.get(Ov).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function x8(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Yc),d=s.create(Ur.NULL,[],r||s.selector,a),p=d.location.nativeElement,m=d.injector.get(tk,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),aI(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new S(101,!1);const n=$e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,$e(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Xb,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)k8(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else n?.begin?.(),n?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>Md(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;aI(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Rh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>aI(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function aI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function rT(t){uI??=new WeakMap;const e=uI.get(t);if(e)return e;const n=t.isStable.pipe(Ui(r=>r)).toPromise().then(()=>{});return uI.set(t,n),t.onDestroy(()=>uI?.delete(t)),n}function k8(t,e,n,r){(n||Md(t))&&Av(t,e,n&&!r?0:1)}class F8{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let sk=(()=>{class t{compileModuleSync(n){return new g0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=_o(Wr(n).declarations).reduce((s,a)=>{const u=yt(a);return u&&s.push(new Vg(u)),s},[]);return new F8(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),U8=(()=>{class t{constructor(){this.zone=G(Tt),this.changeDetectionScheduler=G(rh),this.applicationRef=G(ls)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function iT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Tt({...oT(),scheduleInRootZone:n}),[{provide:Tt,useFactory:t},{provide:io,multi:!0,useFactory:()=>{const r=G(U8,{optional:!0});return()=>r.initialize()}},{provide:io,multi:!0,useFactory:()=>{const r=G(j8);return()=>{r.initialize()}}},!0===e?{provide:Fx,useValue:!0}:[],{provide:Jb,useValue:n??CR}]}function oT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let j8=(()=>{class t{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=G(Tt),this.pendingTasks=G(Su)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),im=(()=>{class t{constructor(){this.appRef=G(ls),this.taskService=G(Su),this.ngZone=G(Tt),this.zonelessEnabled=G(ih),this.disableScheduling=G(Fx,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Pt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ov):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(Jb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof WC||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?TR:bR;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ov+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Na=new ye("",{providedIn:"root",factory:()=>G(Na,It.Optional|It.SkipSelf)||function $8(){return typeof $localize<"u"&&$localize.locale||Zv}()}),cI=new ye("");function lI(t){return!t.moduleRef}let ku=null;let tl=(()=>{class t{static{this.__NG_ELEMENT_ID__=J8}}return t})();function J8(t){return function X8(t,e,n){if(Ns(t)&&!n){const r=Di(t.index,e);return new Ag(r,r)}return 175&t.type?new Ag(e[Tn],e):null}(Qt(),ae(),!(16&~t))}class bk{constructor(){}supports(e){return e instanceof Map||m0(e)}create(){return new aW}}class aW{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||m0(e)))throw new S(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new uW(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class uW{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dk(){return new fI([new bk])}let fI=(()=>{class t{static{this.\u0275prov=Me({token:t,providedIn:"root",factory:Dk})}constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Dk()),deps:[[t,new ad,new fu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new S(901,!1)}}return t})();function wW(t){try{const{rootComponent:e,appProviders:n,platformProviders:r}=t,i=function Z8(t=[]){if(ku)return ku;const e=function pk(t=[],e){return Ur.create({name:e,providers:[{provide:Dp,useValue:"platform"},{provide:cI,useValue:new Set([()=>ku=null])},...t]})}(t);return ku=e,function ik(){!function tu(t){xr=t}(()=>{throw new S(600,!1)})}(),function gk(t){t.get(YR,null)?.forEach(n=>n())}(e),e}(r),o=[iT({}),{provide:rh,useExisting:im},...n||[]];return function dk(t){const e=lI(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Tt);return n.run(()=>{lI(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Vs,null);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),lI(t)){const o=()=>e.destroy(),s=t.platformInjector.get(cI);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(cI);s.add(o),t.moduleRef.onDestroy(()=>{aI(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function O8(t,e,n){try{const r=n();return rm(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(r,n,()=>{const o=e.get(rk);return o.runInitializers(),o.donePromise.then(()=>{if(function dG(t){"string"==typeof t&&(M1=t.toLowerCase().replace(/_/g,"-"))}(e.get(Na,Zv)||Zv),lI(t)){const a=e.get(ls);return void 0!==t.rootComponent&&a.bootstrap(t.rootComponent),a}return function K8(t,e){const n=t.injector.get(ls);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(n)}e.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({r3Injector:new CN({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}let Wk=!1;function jW(){return ts([{provide:hv,useFactory:()=>{let t=!0;return yo()&&(t=!!G(Kd,{optional:!0})?.get(ob,null)),t&&hi("NgHydration"),t}},{provide:io,useValue:()=>{(function Px(t){Mx=t})(!1),yo()&&G(hv)&&(function $W(){const t=Mu();let e;for(const n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&"nghm"===n.textContent?.trim()){e=n;break}if(!e)throw new S(-507,!1)}(),function LW(){Wk||(Wk=!0,function H4(){JR=z4}(),function eG(){w1=X6}(),function p9(){vO=f9}(),function rG(){b1=nG}(),function Pq(){bN=Rq}(),function Z5(){Gx=Y5,r0=Q5}(),function M5(){kx=S5}(),function rH(){ZP=nH}())}())},multi:!0},{provide:sP,useFactory:()=>yo()&&G(hv)},{provide:Rh,useFactory:()=>{if(yo()&&G(hv)){const t=G(ls);return G(Ur),()=>{(function BW(t){return rT(t)})(t).then(()=>{!function D5(t){const e=t._views;for(const n of e){const r=XR(n);null!==r&&null!==r[bn]&&(ir(r)?Nv(r):Ox(r))}}(t)})}}return()=>{}},multi:!0}])}function Ph(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function um(t,e){hi("NgSignals");const n=function dn(t){const e=Object.create(ri);e.computation=t;const n=()=>{if(mt(e),ve(e),e.value===Gn)throw e.error;return e.value};return n[Zt]=e,n}(t);return e?.equal&&(n[Zt].equal=e.equal),n}function qs(t){const e=$e(null);try{return t()}finally{$e(e)}}let Qk=null;function Fu(){return Qk}class ZW{}const Yi=new ye("");let gT=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(XW),providedIn:"platform"})}}return t})();const JW=new ye("");let XW=(()=>{class t extends gT{constructor(){super(),this._doc=G(Yi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fu().getBaseHref(this._doc)}onPopState(n){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Fu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function mT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Yk(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Oa(t){return t&&"?"!==t[0]?"?"+t:t}let rl=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(Jk),providedIn:"root"})}}return t})();const Zk=new ye("");let Jk=(()=>{class t extends rl{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(Yi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return mT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Oa(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Oa(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Oa(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(we(gT),we(Zk,8))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),e7=(()=>{class t extends rl{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=mT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Oa(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Oa(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(we(gT),we(Zk,8))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})(),cm=(()=>{class t{constructor(n){this._subject=new kt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function r7(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(Yk(Xk(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Oa(r))}normalize(n){return t.stripTrailingSlash(function n7(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Xk(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Oa(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Oa(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Oa}static{this.joinWithSlash=mT}static{this.stripTrailingSlash=Yk}static{this.\u0275fac=function(r){return new(r||t)(we(rl))}}static{this.\u0275prov=Me({token:t,factory:()=>function t7(){return new cm(we(rl))}(),providedIn:"root"})}}return t})();function Xk(t){return t.replace(/\/index.html$/,"")}var Mi=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Mi||{}),yn=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(yn||{}),Io=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Io||{});const _r={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function EI(t,e){return zo(Ai(t)[Dn.DateFormat],e)}function wI(t,e){return zo(Ai(t)[Dn.TimeFormat],e)}function CI(t,e){return zo(Ai(t)[Dn.DateTimeFormat],e)}function $o(t,e){const n=Ai(t),r=n[Dn.NumberSymbols][e];if(typeof r>"u"){if(e===_r.CurrencyDecimal)return n[Dn.NumberSymbols][_r.Decimal];if(e===_r.CurrencyGroup)return n[Dn.NumberSymbols][_r.Group]}return r}function tF(t){if(!t[Dn.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Dn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function zo(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function yT(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const _7=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bI={},y7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ka=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ka||{}),nn=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(nn||{}),rn=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(rn||{});function v7(t,e,n,r){let i=function S7(t){if(iF(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,o=1,s=1]=t.split("-").map(a=>+a);return TI(i,o-1,s)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(_7))return function M7(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,d),e}(r)}const e=new Date(t);if(!iF(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Fa(n,e)||e;let a,s=[];for(;e;){if(a=y7.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const p=s.pop();if(!p)break;e=p}}let u=i.getTimezoneOffset();r&&(u=rF(r,u),i=function A7(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function D7(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(rF(e,i)-i))}(i,r,!0));let d="";return s.forEach(p=>{const m=function T7(t){if(IT[t])return IT[t];let e;switch(t){case"G":case"GG":case"GGG":e=An(rn.Eras,yn.Abbreviated);break;case"GGGG":e=An(rn.Eras,yn.Wide);break;case"GGGGG":e=An(rn.Eras,yn.Narrow);break;case"y":e=yr(nn.FullYear,1,0,!1,!0);break;case"yy":e=yr(nn.FullYear,2,0,!0,!0);break;case"yyy":e=yr(nn.FullYear,3,0,!1,!0);break;case"yyyy":e=yr(nn.FullYear,4,0,!1,!0);break;case"Y":e=MI(1);break;case"YY":e=MI(2,!0);break;case"YYY":e=MI(3);break;case"YYYY":e=MI(4);break;case"M":case"L":e=yr(nn.Month,1,1);break;case"MM":case"LL":e=yr(nn.Month,2,1);break;case"MMM":e=An(rn.Months,yn.Abbreviated);break;case"MMMM":e=An(rn.Months,yn.Wide);break;case"MMMMM":e=An(rn.Months,yn.Narrow);break;case"LLL":e=An(rn.Months,yn.Abbreviated,Mi.Standalone);break;case"LLLL":e=An(rn.Months,yn.Wide,Mi.Standalone);break;case"LLLLL":e=An(rn.Months,yn.Narrow,Mi.Standalone);break;case"w":e=vT(1);break;case"ww":e=vT(2);break;case"W":e=vT(1,!0);break;case"d":e=yr(nn.Date,1);break;case"dd":e=yr(nn.Date,2);break;case"c":case"cc":e=yr(nn.Day,1);break;case"ccc":e=An(rn.Days,yn.Abbreviated,Mi.Standalone);break;case"cccc":e=An(rn.Days,yn.Wide,Mi.Standalone);break;case"ccccc":e=An(rn.Days,yn.Narrow,Mi.Standalone);break;case"cccccc":e=An(rn.Days,yn.Short,Mi.Standalone);break;case"E":case"EE":case"EEE":e=An(rn.Days,yn.Abbreviated);break;case"EEEE":e=An(rn.Days,yn.Wide);break;case"EEEEE":e=An(rn.Days,yn.Narrow);break;case"EEEEEE":e=An(rn.Days,yn.Short);break;case"a":case"aa":case"aaa":e=An(rn.DayPeriods,yn.Abbreviated);break;case"aaaa":e=An(rn.DayPeriods,yn.Wide);break;case"aaaaa":e=An(rn.DayPeriods,yn.Narrow);break;case"b":case"bb":case"bbb":e=An(rn.DayPeriods,yn.Abbreviated,Mi.Standalone,!0);break;case"bbbb":e=An(rn.DayPeriods,yn.Wide,Mi.Standalone,!0);break;case"bbbbb":e=An(rn.DayPeriods,yn.Narrow,Mi.Standalone,!0);break;case"B":case"BB":case"BBB":e=An(rn.DayPeriods,yn.Abbreviated,Mi.Format,!0);break;case"BBBB":e=An(rn.DayPeriods,yn.Wide,Mi.Format,!0);break;case"BBBBB":e=An(rn.DayPeriods,yn.Narrow,Mi.Format,!0);break;case"h":e=yr(nn.Hours,1,-12);break;case"hh":e=yr(nn.Hours,2,-12);break;case"H":e=yr(nn.Hours,1);break;case"HH":e=yr(nn.Hours,2);break;case"m":e=yr(nn.Minutes,1);break;case"mm":e=yr(nn.Minutes,2);break;case"s":e=yr(nn.Seconds,1);break;case"ss":e=yr(nn.Seconds,2);break;case"S":e=yr(nn.FractionalSeconds,1);break;case"SS":e=yr(nn.FractionalSeconds,2);break;case"SSS":e=yr(nn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=AI(ka.Short);break;case"ZZZZZ":e=AI(ka.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=AI(ka.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=AI(ka.Long);break;default:return null}return IT[t]=e,e}(p);d+=m?m(i,n,u):"''"===p?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function TI(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Fa(t,e){const n=function o7(t){return Ai(t)[Dn.LocaleId]}(t);if(bI[n]??={},bI[n][e])return bI[n][e];let r="";switch(e){case"shortDate":r=EI(t,Io.Short);break;case"mediumDate":r=EI(t,Io.Medium);break;case"longDate":r=EI(t,Io.Long);break;case"fullDate":r=EI(t,Io.Full);break;case"shortTime":r=wI(t,Io.Short);break;case"mediumTime":r=wI(t,Io.Medium);break;case"longTime":r=wI(t,Io.Long);break;case"fullTime":r=wI(t,Io.Full);break;case"short":const i=Fa(t,"shortTime"),o=Fa(t,"shortDate");r=DI(CI(t,Io.Short),[i,o]);break;case"medium":const s=Fa(t,"mediumTime"),a=Fa(t,"mediumDate");r=DI(CI(t,Io.Medium),[s,a]);break;case"long":const u=Fa(t,"longTime"),d=Fa(t,"longDate");r=DI(CI(t,Io.Long),[u,d]);break;case"full":const p=Fa(t,"fullTime"),m=Fa(t,"fullDate");r=DI(CI(t,Io.Full),[p,m])}return r&&(bI[n][e]=r),r}function DI(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function ds(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function yr(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function E7(t,e){switch(t){case nn.FullYear:return e.getFullYear();case nn.Month:return e.getMonth();case nn.Date:return e.getDate();case nn.Hours:return e.getHours();case nn.Minutes:return e.getMinutes();case nn.Seconds:return e.getSeconds();case nn.FractionalSeconds:return e.getMilliseconds();case nn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===nn.Hours)0===a&&-12===n&&(a=12);else if(t===nn.FractionalSeconds)return function I7(t,e){return ds(t,3).substring(0,e)}(a,e);const u=$o(s,_r.MinusSign);return ds(a,e,u,r,i)}}function An(t,e,n=Mi.Format,r=!1){return function(i,o){return function w7(t,e,n,r,i,o){switch(n){case rn.Months:return function u7(t,e,n){const r=Ai(t),o=zo([r[Dn.MonthsFormat],r[Dn.MonthsStandalone]],e);return zo(o,n)}(e,i,r)[t.getMonth()];case rn.Days:return function a7(t,e,n){const r=Ai(t),o=zo([r[Dn.DaysFormat],r[Dn.DaysStandalone]],e);return zo(o,n)}(e,i,r)[t.getDay()];case rn.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const d=function h7(t){const e=Ai(t);return tF(e),(e[Dn.ExtraData][2]||[]).map(r=>"string"==typeof r?yT(r):[yT(r[0]),yT(r[1])])}(e),p=function f7(t,e,n){const r=Ai(t);tF(r);const o=zo([r[Dn.ExtraData][0],r[Dn.ExtraData][1]],e)||[];return zo(o,n)||[]}(e,i,r),m=d.findIndex(y=>{if(Array.isArray(y)){const[E,C]=y,T=s>=E.hours&&a>=E.minutes,D=s<C.hours||s===C.hours&&a<C.minutes;if(E.hours<C.hours){if(T&&D)return!0}else if(T||D)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(-1!==m)return p[m]}return function s7(t,e,n){const r=Ai(t),o=zo([r[Dn.DayPeriodsFormat],r[Dn.DayPeriodsStandalone]],e);return zo(o,n)}(e,i,r)[s<12?0:1];case rn.Eras:return function c7(t,e){return zo(Ai(t)[Dn.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,t,e,n,r)}}function AI(t){return function(e,n,r){const i=-1*r,o=$o(n,_r.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ka.Short:return(i>=0?"+":"")+ds(s,2,o)+ds(Math.abs(i%60),2,o);case ka.ShortGMT:return"GMT"+(i>=0?"+":"")+ds(s,1,o);case ka.Long:return"GMT"+(i>=0?"+":"")+ds(s,2,o)+":"+ds(Math.abs(i%60),2,o);case ka.Extended:return 0===r?"Z":(i>=0?"+":"")+ds(s,2,o)+":"+ds(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const C7=0,SI=4;function nF(t){const e=t.getDay(),n=0===e?-3:SI-e;return TI(t.getFullYear(),t.getMonth(),t.getDate()+n)}function vT(t,e=!1){return function(n,r){let i;if(e){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{const o=nF(n),s=function b7(t){const e=TI(t,C7,1).getDay();return TI(t,0,1+(e<=SI?SI:SI+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ds(i,t,$o(r,_r.MinusSign))}}function MI(t,e=!1){return function(n,r){return ds(nF(n).getFullYear(),t,$o(r,_r.MinusSign),e)}}const IT={};function rF(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function iF(t){return t instanceof Date&&!isNaN(t.valueOf())}function uF(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let hF=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new G7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){fF("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){fF("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ie(ss),Ie(Ma))}}static{this.\u0275dir=it({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class G7{constructor(){this.$implicit=null,this.ngIf=null}}function fF(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tr(e)}'.`)}let gF=(()=>{class t{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,o]=n.split("."),s=-1===i.indexOf("-")?void 0:Ru.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||t)(Ie(po),Ie(fI),Ie(Ra))}}static{this.\u0275dir=it({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return t})();function hs(t,e){return new S(2100,!1)}class Y7{createSubscription(e,n){return qs(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){qs(()=>e.unsubscribe())}}class Z7{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const J7=new Z7,X7=new Y7;let MT=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(rm(n))return J7;if(nk(n))return X7;throw hs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(Ie(tl,16))}}static{this.\u0275pipe=br({name:"async",type:t,pure:!1,standalone:!0})}}return t})();const oK=new ye(""),sK=new ye("");let dm=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(null==n||""===n||n!=n)return null;try{return v7(n,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw hs()}}static{this.\u0275fac=function(r){return new(r||t)(Ie(Na,16),Ie(oK,24),Ie(sK,24))}}static{this.\u0275pipe=br({name:"date",type:t,pure:!0,standalone:!0})}}return t})(),Nh=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ds({type:t})}static{this.\u0275inj=Bi({})}}return t})();const _F="browser",mK="server";function hm(t){return t===mK}let yK=(()=>{class t{static{this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>function _K(t){return t===_F}(G(go))?new vK(G(Yi),window):new EK})}}return t})();class vK{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function IK(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class EK{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class yF{}var ce=dt(467);function kT(t){return t[t.length-1]}function MF(t){return nt(kT(t))?t.pop():void 0}function gm(t){return function QK(t){return t&&nt(t.schedule)}(kT(t))?t.pop():void 0}var kh=dt(635);const RF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function PF(t){return nt(t?.then)}function xF(t){return nt(t[to])}function NF(t){return Symbol.asyncIterator&&nt(t?.[Symbol.asyncIterator])}function OF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const kF=function ZK(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function FF(t){return nt(t?.[kF])}function VF(t){return(0,kh.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,kh.N3)(n.read());if(i)return yield(0,kh.N3)(void 0);yield yield(0,kh.N3)(r)}}finally{n.releaseLock()}})}function LF(t){return nt(t?.getReader)}function Eo(t){if(t instanceof xt)return t;if(null!=t){if(xF(t))return function JK(t){return new xt(e=>{const n=t[to]();if(nt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(RF(t))return function XK(t){return new xt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(PF(t))return function eQ(t){return new xt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,gc)})}(t);if(NF(t))return UF(t);if(FF(t))return function tQ(t){return new xt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(LF(t))return function nQ(t){return UF(VF(t))}(t)}throw OF(t)}function UF(t){return new xt(e=>{(function rQ(t,e){var n,r,i,o;return(0,kh.sH)(this,void 0,void 0,function*(){try{for(n=(0,kh.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Va(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function il(t,e=0){return Ce((n,r)=>{n.subscribe(Pe(r,i=>Va(r,t,()=>r.next(i),e),()=>Va(r,t,()=>r.complete(),e),i=>Va(r,t,()=>r.error(i),e)))})}function Fh(t,e=0){return Ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function BF(t,e){if(!t)throw new Error("Iterable cannot be null");return new xt(n=>{Va(n,e,()=>{const r=t[Symbol.asyncIterator]();Va(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Sn(t,e){return e?function cQ(t,e){if(null!=t){if(xF(t))return function iQ(t,e){return Eo(t).pipe(Fh(e),il(e))}(t,e);if(RF(t))return function sQ(t,e){return new xt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(PF(t))return function oQ(t,e){return Eo(t).pipe(Fh(e),il(e))}(t,e);if(NF(t))return BF(t,e);if(FF(t))return function aQ(t,e){return new xt(n=>{let r;return Va(n,e,()=>{r=t[kF](),Va(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>nt(r?.return)&&r.return()})}(t,e);if(LF(t))return function uQ(t,e){return BF(VF(t),e)}(t,e)}throw OF(t)}(t,e):Eo(t)}function Ke(...t){return Sn(t,gm(t))}function fi(t,e,n=1/0){return nt(e)?fi((r,i)=>ke((o,s)=>e(r,o,i,s))(Eo(t(r,i))),n):("number"==typeof e&&(n=e),Ce((r,i)=>function lQ(t,e,n,r,i,o,s,a){const u=[];let d=0,p=0,m=!1;const y=()=>{m&&!u.length&&!d&&e.complete()},E=T=>d<r?C(T):u.push(T),C=T=>{o&&e.next(T),d++;let D=!1;Eo(n(T,p++)).subscribe(Pe(e,L=>{i?.(L),o?E(L):e.next(L)},()=>{D=!0},void 0,()=>{if(D)try{for(d--;u.length&&d<r;){const L=u.shift();s?Va(e,s,()=>C(L)):C(L)}y()}catch(L){e.error(L)}}))};return t.subscribe(Pe(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,t,n)))}function Vh(t,e){return nt(e)?fi(t,e,1):fi(t,1)}function OI(t){return Ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mr(t,e){return Ce((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Pe(r,u=>{i?.unsubscribe();let d=0;const p=o++;Eo(t(u,p)).subscribe(i=Pe(r,m=>r.next(e?e(u,m,p,d++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Br(t,e,n){const r=nt(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ce((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Pe(o,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),o.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):ai}class kI{}class FI{}class Ho{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ho?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Ho;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ho?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class dQ{encodeKey(e){return jF(e)}encodeValue(e){return jF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const fQ=/%(\d[a-f0-9])/gi,pQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function jF(t){return encodeURIComponent(t).replace(fQ,(e,n)=>pQ[n]??e)}function VI(t){return`${t}`}class Vu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new dQ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hQ(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(VI):[VI(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Vu({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(VI(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VI(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class gQ{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function $F(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function zF(t){return typeof Blob<"u"&&t instanceof Blob}function HF(t){return typeof FormData<"u"&&t instanceof FormData}class mm{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function mQ(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ho,this.context??=new gQ,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Vu,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||$F(this.body)||zF(this.body)||HF(this.body)||function _Q(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Vu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HF(this.body)?null:zF(this.body)?this.body.type||null:$F(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress;let d=e.headers||this.headers,p=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(d=Object.keys(e.setHeaders).reduce((y,E)=>y.set(E,e.setHeaders[E]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,E)=>y.set(E,e.setParams[E]),p)),new mm(n,r,s,{params:p,headers:d,context:m,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}}var Lu=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Lu||{});class FT{constructor(e,n=200,r="OK"){this.headers=e.headers||new Ho,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LI extends FT{constructor(e={}){super(e),this.type=Lu.ResponseHeader}clone(e={}){return new LI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ol extends FT{constructor(e={}){super(e),this.type=Lu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ol({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Lh extends FT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function VT(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let GF=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof mm)o=n;else{let u,d;u=i.headers instanceof Ho?i.headers:new Ho(i.headers),i.params&&(d=i.params instanceof Vu?i.params:new Vu({fromObject:i.params})),o=new mm(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=Ke(o).pipe(Vh(u=>this.handler.handle(u)));if(n instanceof mm||"events"===i.observe)return s;const a=s.pipe(Jt(u=>u instanceof ol));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ke(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ke(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Vu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,VT(i,r))}post(n,r,i={}){return this.request("POST",n,VT(i,r))}put(n,r,i={}){return this.request("PUT",n,VT(i,r))}static{this.\u0275fac=function(r){return new(r||t)(we(kI))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();const IQ=/^\)\]\}',?\n/;function WF(t){if(t.url)return t.url;const e="X-Request-URL".toLocaleLowerCase();return t.headers.get(e)}let LT=(()=>{class t{constructor(){this.fetchImpl=G(wQ,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=G(Tt)}handle(n){return new xt(r=>{const i=new AbortController;return this.doRequest(n,i.signal,r).then(UT,o=>r.error(new Lh({error:o}))),()=>i.abort()})}doRequest(n,r,i){var o=this;return(0,ce.A)(function*(){const s=o.createRequestInit(n);let a;try{const C=o.ngZone.runOutsideAngular(()=>o.fetchImpl(n.urlWithParams,{signal:r,...s}));(function CQ(t){t.then(UT,UT)})(C),i.next({type:Lu.Sent}),a=yield C}catch(C){return void i.error(new Lh({error:C,status:C.status??0,statusText:C.statusText,url:n.urlWithParams,headers:C.headers}))}const u=new Ho(a.headers),d=a.statusText,p=WF(a)??n.urlWithParams;let m=a.status,y=null;if(n.reportProgress&&i.next(new LI({headers:u,status:m,statusText:d,url:p})),a.body){const C=a.headers.get("content-length"),T=[],D=a.body.getReader();let k,K,L=0;const fe=typeof Zone<"u"&&Zone.current;yield o.ngZone.runOutsideAngular((0,ce.A)(function*(){for(;;){const{done:xe,value:V}=yield D.read();if(xe)break;if(T.push(V),L+=V.length,n.reportProgress){K="text"===n.responseType?(K??"")+(k??=new TextDecoder).decode(V,{stream:!0}):void 0;const P=()=>i.next({type:Lu.DownloadProgress,total:C?+C:void 0,loaded:L,partialText:K});fe?fe.run(P):P()}}}));const Te=o.concatChunks(T,L);try{const xe=a.headers.get("Content-Type")??"";y=o.parseBody(n,Te,xe)}catch(xe){return void i.error(new Lh({error:xe,headers:new Ho(a.headers),status:a.status,statusText:a.statusText,url:WF(a)??n.urlWithParams}))}}0===m&&(m=y?200:0),m>=200&&m<300?(i.next(new ol({body:y,headers:u,status:m,statusText:d,url:p})),i.complete()):i.error(new Lh({error:y,headers:u,status:m,statusText:d,url:p}))})()}parseBody(n,r,i){switch(n.responseType){case"json":const o=(new TextDecoder).decode(r).replace(IQ,"");return""===o?null:JSON.parse(o);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){const r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((o,s)=>r[o]=s.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){const o=n.detectContentTypeHeader();null!==o&&(r["Content-Type"]=o)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){const i=new Uint8Array(r);let o=0;for(const s of n)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();class wQ{}function UT(){}function KF(t,e){return e(t)}const _m=new ye(""),QF=new ye(""),YF=new ye("",{providedIn:"root",factory:()=>!0});let ZF=(()=>{class t extends kI{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=G(Su),this.contributeToStability=G(YF)}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(_m),...this.injector.get(QF,[])]));this.chain=r.reduceRight((i,o)=>function TQ(t,e,n){return(r,i)=>uo(n,()=>e(r,o=>t(o,i)))}(i,o,this.injector),KF)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(OI(()=>this.pendingTasks.remove(r)))}return this.chain(n,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||t)(we(FI),we(Kr))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();const xQ=/^\)\]\}',?\n/;let XF=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new S(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Sn(r.\u0275loadImpl()):Ke(null)).pipe(Mr(()=>new xt(o=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((T,D)=>s.setRequestHeader(T,D.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const T=n.detectContentTypeHeader();null!==T&&s.setRequestHeader("Content-Type",T)}if(n.responseType){const T=n.responseType.toLowerCase();s.responseType="json"!==T?T:"text"}const a=n.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const T=s.statusText||"OK",D=new Ho(s.getAllResponseHeaders()),L=function NQ(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||n.url;return u=new LI({headers:D,status:s.status,statusText:T,url:L}),u},p=()=>{let{headers:T,status:D,statusText:L,url:k}=d(),K=null;204!==D&&(K=typeof s.response>"u"?s.responseText:s.response),0===D&&(D=K?200:0);let fe=D>=200&&D<300;if("json"===n.responseType&&"string"==typeof K){const Te=K;K=K.replace(xQ,"");try{K=""!==K?JSON.parse(K):null}catch(xe){K=Te,fe&&(fe=!1,K={error:xe,text:K})}}fe?(o.next(new ol({body:K,headers:T,status:D,statusText:L,url:k||void 0})),o.complete()):o.error(new Lh({error:K,headers:T,status:D,statusText:L,url:k||void 0}))},m=T=>{const{url:D}=d(),L=new Lh({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(L)};let y=!1;const E=T=>{y||(o.next(d()),y=!0);let D={type:Lu.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(D.total=T.total),"text"===n.responseType&&s.responseText&&(D.partialText=s.responseText),o.next(D)},C=T=>{let D={type:Lu.UploadProgress,loaded:T.loaded};T.lengthComputable&&(D.total=T.total),o.next(D)};return s.addEventListener("load",p),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),n.reportProgress&&(s.addEventListener("progress",E),null!==a&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:Lu.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",p),s.removeEventListener("timeout",m),n.reportProgress&&(s.removeEventListener("progress",E),null!==a&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(we(yF))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();const BT=new ye(""),eV=new ye("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),tV=new ye("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class nV{}let FQ=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=uF(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(we(Yi),we(go),we(eV))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();function VQ(t,e){const n=t.url.toLowerCase();if(!G(BT)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=G(nV).getToken(),i=G(tV);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}const UQ=new ye(""),iV="b",oV="h",sV="s",aV="st",uV="u",cV="rt",UI=new ye(""),BQ=["GET","HEAD"];function jQ(t,e){const{isCacheActive:n,...r}=G(UI),{transferCache:i,method:o}=t;if(!n||!1===i||"POST"===o&&!r.includePostRequests&&!i||"POST"!==o&&!BQ.includes(o)||!r.includeRequestsWithAuthHeaders&&function $Q(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}(t)||!1===r.filter?.(t))return e(t);const s=G(Kd),a=G(UQ,{optional:!0}),u=hm(G(go));if(a&&!u)throw new S(2803,!1);const d=u&&a?function WQ(t,e){const n=new URL(t,"resolve://").origin,r=e[n];return r?t.replace(n,r):t}(t.url,a):t.url,p=function HQ(t,e){const{params:n,method:r,responseType:i}=t,o=lV(n);let s=t.serializeBody();s instanceof URLSearchParams?s=lV(s):"string"!=typeof s&&(s="");const u=function qQ(t){let e=0;for(const n of t)e=Math.imul(31,e)+n.charCodeAt(0)|0;return e+=2147483648,e.toString()}([r,i,e,s,o].join("|"));return u}(t,d),m=s.get(p,null);let y=r.includeHeaders;if("object"==typeof i&&i.includeHeaders&&(y=i.includeHeaders),m){const{[iV]:E,[cV]:C,[oV]:T,[sV]:D,[aV]:L,[uV]:k}=m;let K=E;switch(C){case"arraybuffer":K=(new TextEncoder).encode(E).buffer;break;case"blob":K=new Blob([E])}let fe=new Ho(T);return Ke(new ol({body:K,headers:fe,status:D,statusText:L,url:k}))}return e(t).pipe(Br(E=>{E instanceof ol&&u&&s.set(p,{[iV]:E.body,[oV]:zQ(E.headers,y),[sV]:E.status,[aV]:E.statusText,[uV]:d,[cV]:t.responseType})}))}function zQ(t,e){if(!e)return{};const n={};for(const r of e){const i=t.getAll(r);null!==i&&(n[r]=i)}return n}function lV(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function GQ(t){return[{provide:UI,useFactory:()=>(hi("NgHttpTransferCache"),{isCacheActive:!0,...t})},{provide:QF,useValue:jQ,multi:!0,deps:[Kd,UI]},{provide:Rh,multi:!0,useFactory:()=>{const e=G(ls),n=G(UI);return()=>{rT(e).then(()=>{n.isCacheActive=!1})}}}]}class KQ extends ZW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jT extends KQ{static makeCurrent(){!function YW(t){Qk??=t}(new jT)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function QQ(){return ym=ym||document.querySelector("base"),ym?ym.getAttribute("href"):null}();return null==n?null:function YQ(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){ym=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uF(document.cookie,e)}}let ym=null,JQ=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();const $T=new ye("");let dV=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(we($T),we(Tt))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();class hV{constructor(e){this._doc=e}}const zT="ng-app-id";let fV=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hm(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${zT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(zT),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(zT,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(we(Yi),we(pg),we(ZR,8),we(go))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();const HT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qT=/%COMP%/g,nY=new ye("",{providedIn:"root",factory:()=>!0});function gV(t,e){return e.map(n=>n.replace(qT,t))}let mV=(()=>{class t{constructor(n,r,i,o,s,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=hm(a),this.defaultRenderer=new GT(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===oo.ShadowDom&&(r={...r,encapsulation:oo.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof yV?i.applyToHost(n):i instanceof WT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case oo.Emulated:o=new yV(u,d,r,this.appId,p,s,a,m);break;case oo.ShadowDom:return new sY(u,d,n,r,s,a,this.nonce,m);default:o=new WT(u,d,r,p,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(we(dV),we(fV),we(pg),we(nY),we(Yi),we(go),we(Tt),we(ZR))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();class GT{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(HT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_V(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_V(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=HT[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=HT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ru.DashCase|Ru.Important)?e.style.setProperty(n,r,i&Ru.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ru.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Fu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function _V(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class sY extends GT{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=gV(i.id,i.styles);for(const p of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class WT extends GT{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?gV(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class yV extends WT{constructor(e,n,r,i,o,s,a,u){const d=i+"-"+r.id;super(e,n,r,o,s,a,u,d),this.contentAttr=function rY(t){return"_ngcontent-%COMP%".replace(qT,t)}(d),this.hostAttr=function iY(t){return"_nghost-%COMP%".replace(qT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}const vV=["alt","control","meta","shift"],uY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cY={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function IV(t){return{appProviders:[..._Y,...t?.providers??[]],platformProviders:gY}}const gY=[{provide:go,useValue:_F},{provide:YR,useValue:function hY(){jT.makeCurrent()},multi:!0},{provide:Yi,useFactory:function pY(){return function F4(t){XC=t}(document),document},deps:[]}],_Y=[{provide:Dp,useValue:"root"},{provide:Vs,useFactory:function fY(){return new Vs},deps:[]},{provide:$T,useClass:(()=>{class t extends hV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(we(Yi))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[Yi,Tt,go]},{provide:$T,useClass:(()=>{class t extends hV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fu().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vV.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=uY[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),vV.forEach(s=>{s!==i&&(0,cY[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(we(Yi))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[Yi]},mV,fV,dV,{provide:Xb,useExisting:mV},{provide:yF,useClass:JQ,deps:[]},[]];let yY=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(we(Yi))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),KT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:function(r){let i=null;return i=r?new(r||t):we(wY),i},providedIn:"root"})}}return t})(),wY=(()=>{class t extends KT{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case Vo.NONE:return r;case Vo.HTML:return Ls(r,"HTML")?mo(r):IP(this._doc,String(r)).toString();case Vo.STYLE:return Ls(r,"Style")?mo(r):r;case Vo.SCRIPT:if(Ls(r,"Script"))return mo(r);throw new S(5200,!1);case Vo.URL:return Ls(r,"URL")?mo(r):gv(String(r));case Vo.RESOURCE_URL:if(Ls(r,"ResourceURL"))return mo(r);throw new S(5201,!1);default:throw new S(5202,!1)}}bypassSecurityTrustHtml(n){return function iz(t){return new J4(t)}(n)}bypassSecurityTrustStyle(n){return function oz(t){return new X4(t)}(n)}bypassSecurityTrustScript(n){return function sz(t){return new ez(t)}(n)}bypassSecurityTrustUrl(n){return function az(t){return new tz(t)}(n)}bypassSecurityTrustResourceUrl(n){return function uz(t){return new nz(t)}(n)}static{this.\u0275fac=function(r){return new(r||t)(we(Yi))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var al=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t}(al||{});const{isArray:TY}=Array,{getPrototypeOf:DY,prototype:AY,keys:SY}=Object;function CV(t){if(1===t.length){const e=t[0];if(TY(e))return{args:e,keys:null};if(function MY(t){return t&&"object"==typeof t&&DY(t)===AY}(e)){const n=SY(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:RY}=Array;function bV(t){return ke(e=>function PY(t,e){return RY(e)?t(...e):t(e)}(t,e))}function TV(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function QT(...t){const e=gm(t),n=MF(t),{args:r,keys:i}=CV(t);if(0===r.length)return Sn([],e);const o=new xt(function xY(t,e,n=ai){return r=>{DV(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)DV(e,()=>{const d=Sn(t[u],e);let p=!1;d.subscribe(Pe(r,m=>{o[u]=m,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>TV(i,s):ai));return n?o.pipe(bV(n)):o}function DV(t,e,n){t?Va(n,t,e):e()}function Uh(t=1/0){return fi(ai,t)}function YT(...t){return function NY(){return Uh(1)}()(Sn(t,gm(t)))}function AV(t){return new xt(e=>{Eo(t()).subscribe(e)})}function jI(t,e){const n=nt(t)?t:()=>t,r=i=>i.error(n());return new xt(e?i=>e.schedule(r,0,i):r)}function ZT(){return Ce((t,e)=>{let n=null;t._refCount++;const r=Pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class SV extends xt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;const n=this.getSubject();e.add(this.source.subscribe(Pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return ZT()(this)}}function $I(...t){const e=gm(t);return Ce((n,r)=>{(e?YT(t,n,e):YT(t,n)).subscribe(r)})}function Bh(t){return Ce((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Pe(n,void 0,void 0,s=>{o=Eo(t(s,Bh(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function zI(t,e){return Ce(function OY(t,e,n,r,i){return(o,s)=>{let a=n,u=e,d=0;o.subscribe(Pe(s,p=>{const m=d++;u=a?t(u,p,m):(a=!0,p),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function JT(t){return t<=0?()=>ot:Ce((e,n)=>{let r=[];e.subscribe(Pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}const vt="primary",vm=Symbol("RouteTitle");class LY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function jh(t){return new LY(t)}function UY(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Gs(t,e){const n=t?XT(t):void 0,r=e?XT(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!MV(t[i],e[i]))return!1;return!0}function XT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function MV(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function RV(t){return t.length>0?t[t.length-1]:null}function Bu(t){return function bY(t){return!!t&&(t instanceof xt||nt(t.lift)&&nt(t.subscribe))}(t)?t:rm(t)?Sn(Promise.resolve(t)):Ke(t)}const jY={exact:function NV(t,e,n){if(!cl(t.segments,e.segments)||!HI(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!NV(t.children[r],e.children[r],n))return!1;return!0},subset:OV},PV={exact:function $Y(t,e){return Gs(t,e)},subset:function zY(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MV(t[n],e[n]))},ignored:()=>!0};function xV(t,e,n){return jY[n.paths](t.root,e.root,n.matrixParams)&&PV[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function OV(t,e,n){return kV(t,e,e.segments,n)}function kV(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!cl(i,n)||e.hasChildren()||!HI(i,n,r))}if(t.segments.length===n.length){if(!cl(t.segments,n)||!HI(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!OV(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(cl(t.segments,i)&&HI(t.segments,i,r)&&t.children[vt])&&kV(t.children[vt],e,o,r)}}function HI(t,e,n){return e.every((r,i)=>PV[n](t[i].parameters,r.parameters))}class ul{constructor(e=new pn([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=jh(this.queryParams),this._queryParamMap}toString(){return GY.serialize(this)}}class pn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return GI(this)}}class Im{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=jh(this.parameters),this._parameterMap}toString(){return LV(this)}}function cl(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let $h=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>new qI,providedIn:"root"})}}return t})();class qI{parse(e){const n=new rZ(e);return new ul(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Em(e.root,!0)}`,r=function QY(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${WI(n)}=${WI(i)}`).join("&"):`${WI(n)}=${WI(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function WY(t){return encodeURI(t)}(e.fragment)}`:""}`}}const GY=new qI;function GI(t){return t.segments.map(e=>LV(e)).join("/")}function Em(t,e){if(!t.hasChildren())return GI(t);if(e){const n=t.children[vt]?Em(t.children[vt],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==vt&&r.push(`${i}:${Em(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function qY(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===vt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==vt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===vt?[Em(t.children[vt],!1)]:[`${i}:${Em(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[vt]?`${GI(t)}/${n[0]}`:`${GI(t)}/(${n.join("//")})`}}function FV(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function WI(t){return FV(t).replace(/%3B/gi,";")}function eD(t){return FV(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KI(t){return decodeURIComponent(t)}function VV(t){return KI(t.replace(/\+/g,"%20"))}function LV(t){return`${eD(t.path)}${function KY(t){return Object.entries(t).map(([e,n])=>`;${eD(e)}=${eD(n)}`).join("")}(t.parameters)}`}const YY=/^[^\/()?;#]+/;function tD(t){const e=t.match(YY);return e?e[0]:""}const ZY=/^[^\/()?;=#]+/,XY=/^[^=?&#]+/,tZ=/^[^&#]+/;class rZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[vt]=new pn(e,n)),r}parseSegment(){const e=tD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Im(KI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function JY(t){const e=t.match(ZY);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=tD(this.remaining);i&&(r=i,this.capture(r))}e[KI(n)]=KI(r)}parseQueryParam(e){const n=function eZ(t){const e=t.match(XY);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function nZ(t){const e=t.match(tZ);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=VV(n),o=VV(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=vt);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[vt]:new pn([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function UV(t){return t.segments.length>0?new pn([],{[vt]:t}):t}function BV(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=BV(i);if(r===vt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function iZ(t){if(1===t.numberOfChildren&&t.children[vt]){const e=t.children[vt];return new pn(t.segments.concat(e.segments),e.children)}return t}(new pn(t.segments,e))}function ll(t){return t instanceof ul}function jV(t){let e;const i=UV(function n(o){const s={};for(const u of o.children){const d=n(u);s[u.outlet]=d}const a=new pn(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function $V(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return nD(i,i,i,n,r);const o=function sZ(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new HV(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new HV(n,e,r)}(e);if(o.toRoot())return nD(i,i,new pn([],{}),n,r);const s=function aZ(t,e,n){if(t.isAbsolute)return new YI(e,!0,0);if(!n)return new YI(e,!1,NaN);if(null===n.parent)return new YI(n,!0,0);const r=QI(t.commands[0])?0:1;return function uZ(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new YI(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Cm(s.segmentGroup,s.index,o.commands):qV(s.segmentGroup,s.index,o.commands);return nD(i,s.segmentGroup,a,n,r)}function QI(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function wm(t){return"object"==typeof t&&null!=t&&t.outlets}function nD(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),s=t===e?n:zV(t,e,n);const a=UV(BV(s));return new ul(a,o,i)}function zV(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:zV(o,e,n)}),new pn(t.segments,r)}class HV{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&QI(r[0]))throw new S(4003,!1);const i=r.find(wm);if(i&&i!==RV(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class YI{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function qV(t,e,n){if(t??=new pn([],{}),0===t.segments.length&&t.hasChildren())return Cm(t,e,n);const r=function lZ(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(wm(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!WV(u,d,s))return o;r+=2}else{if(!WV(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new pn(t.segments.slice(0,r.pathIndex),{});return o.children[vt]=new pn(t.segments.slice(r.pathIndex),t.children),Cm(o,0,i)}return r.match&&0===i.length?new pn(t.segments,{}):r.match&&!t.hasChildren()?rD(t,e,n):r.match?Cm(t,0,i):rD(t,e,n)}function Cm(t,e,n){if(0===n.length)return new pn(t.segments,{});{const r=function cZ(t){return wm(t[0])?t[0].outlets:{[vt]:t}}(n),i={};if(Object.keys(r).some(o=>o!==vt)&&t.children[vt]&&1===t.numberOfChildren&&0===t.children[vt].segments.length){const o=Cm(t.children[vt],e,n);return new pn(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=qV(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new pn(t.segments,i)}}function rD(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(wm(o)){const u=dZ(o.outlets);return new pn(r,u)}if(0===i&&QI(n[0])){r.push(new Im(t.segments[e].path,GV(n[0]))),i++;continue}const s=wm(o)?o.outlets[vt]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&QI(a)?(r.push(new Im(s,GV(a))),i+=2):(r.push(new Im(s,{})),i++)}return new pn(r,{})}function dZ(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=rD(new pn([],{}),0,r))}),e}function GV(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function WV(t,e,n){return t==n.path&&Gs(e,n.parameters)}const bm="imperative";var Ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ft||{});class Ws{constructor(e,n){this.id=e,this.url=n}}class ZI extends Ws{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class La extends Ws{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var wo=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(wo||{}),JI=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(JI||{});class dl extends Ws{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zh extends Ws{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}}class iD extends Ws{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KV extends Ws{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hZ extends Ws{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fZ extends Ws{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pZ extends Ws{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gZ extends Ws{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mZ{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _Z{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yZ{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vZ{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IZ{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EZ{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QV{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ft.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oD{}class XI{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function fs(t){return t.outlet||vt}function Tm(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class AZ{get injector(){return Tm(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Dm(this.rootInjector),this.attachRef=null}}let Dm=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new AZ(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(we(Kr))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class YV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=sD(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=sD(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=aD(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return aD(e,this._root).map(n=>n.value)}}function sD(t,e){if(t===e.value)return e;for(const n of e.children){const r=sD(t,n);if(r)return r}return null}function aD(t,e){if(t===e.value)return[e];for(const n of e.children){const r=aD(t,n);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Hh(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class ZV extends YV{constructor(e,n){super(e),this.snapshot=n,uD(this,e)}toString(){return this.snapshot.toString()}}function JV(t){const e=function SZ(t){const o=new tE([],{},{},"",{},vt,t,null,{});return new XV("",new ps(o,[]))}(t),n=new se([new Im("",{})]),r=new se({}),i=new se({}),o=new se({}),s=new se(""),a=new ju(n,r,o,s,i,vt,t,e.root);return a.snapshot=e.root,new ZV(new ps(a,[]),e)}class ju{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(d=>d[vm]))??Ke(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ke(e=>jh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ke(e=>jh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eE(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&tL(i)&&(r.resolve[vm]=i.title),r}class tE{get title(){return this.data?.[vm]}constructor(e,n,r,i,o,s,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jh(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XV extends YV{constructor(e,n){super(n),this.url=e,uD(this,n)}toString(){return eL(this._root)}}function uD(t,e){e.value._routerState=t,e.children.forEach(n=>uD(t,n))}function eL(t){const e=t.children.length>0?` { ${t.children.map(eL).join(", ")} } `:"";return`${t.value}${e}`}function cD(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gs(e.params,n.params)||t.paramsSubject.next(n.params),function BY(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Gs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function lD(t,e){const n=Gs(t.params,e.params)&&function HY(t,e){return cl(t,e)&&t.every((n,r)=>Gs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||lD(t.parent,e.parent))}function tL(t){return"string"==typeof t.title||null===t.title}let dD=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=vt,this.activateEvents=new kt,this.deactivateEvents=new kt,this.attachEvents=new kt,this.detachEvents=new kt,this.parentContexts=G(Dm),this.location=G(ss),this.changeDetector=G(tl),this.inputBinder=G(nE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new hD(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=it({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lr]})}}return t})();class hD{__ngOutletInjector(e){return new hD(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ju?this.route:e===Dm?this.childContexts:this.parent.get(e,n)}}const nE=new ye("");let nL=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=QT([r.queryParams,r.params,r.data]).pipe(Mr(([o,s,a],u)=>(a={...o,...s,...a},0===u?Ke(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function QW(t){const e=yt(t);if(!e)return null;const n=new Vg(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();function Am(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function RZ(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Am(t,r,i);return Am(t,r)})}(t,e,n);return new ps(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Am(t,a)),s}}const r=function PZ(t){return new ju(new se(t.url),new se(t.params),new se(t.queryParams),new se(t.fragment),new se(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Am(t,o));return new ps(r,i)}}class fD{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const rL="ngNavigationCancelingError";function rE(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ll(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iL(!1,wo.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function iL(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[rL]=!0,n.cancellationCode=e,n}function oL(t){return!!t&&t[rL]}class OZ{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),cD(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Hh(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hh(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hh(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Hh(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new EZ(o.value.snapshot))}),e.children.length&&this.forwardEvent(new vZ(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(cD(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class sL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class iE{constructor(e,n){this.component=e,this.route=n}}function kZ(t,e,n){const r=t._root;return Sm(r,e?e._root:null,n,[r.value])}function qh(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Zf(t){return null!==Yl(t)}(t)?e.get(t):t:r}function Sm(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Hh(e);return t.children.forEach(s=>{(function VZ(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function LZ(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!cl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cl(t.url,e.url)||!Gs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lD(t,e)||!Gs(t.queryParams,e.queryParams);default:return!lD(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sL(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Sm(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new iE(a.outlet.component,s))}else s&&Mm(e,a,i),i.canActivateChecks.push(new sL(r)),Sm(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Mm(a,n.getContext(s),i)),i}function Mm(t,e,n){const r=Hh(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Mm(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new iE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Rm(t){return"function"==typeof t}function aL(t){return t instanceof sn||"EmptyError"===t?.name}const oE=Symbol("INITIAL_VALUE");function Gh(){return Mr(t=>QT(t.map(e=>e.pipe(no(1),$I(oE)))).pipe(ke(e=>{for(const n of e)if(!0!==n){if(n===oE)return oE;if(!1===n||qZ(n))return n}return!0}),Jt(e=>e!==oE),no(1)))}function qZ(t){return ll(t)||t instanceof fD}function uL(t){return function ru(...t){return vs(t)}(Br(e=>{if("boolean"!=typeof e)throw rE(0,e)}),ke(e=>!0===e))}class pD{constructor(e){this.segmentGroup=e||null}}class sE extends Error{constructor(e){super(),this.urlTree=e}}function Wh(t){return jI(new pD(t))}class iJ{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ke(r);if(i.numberOfChildren>1||!i.children[vt])return jI(new S(4e3,!1));i=i.children[vt]}}applyRedirectCommands(e,n,r,i,o){if("string"!=typeof n){const a=n,{queryParams:u,fragment:d,routeConfig:p,url:m,outlet:y,params:E,data:C,title:T}=i,D=uo(o,()=>a({params:E,data:C,queryParams:u,fragment:d,routeConfig:p,url:m,outlet:y,title:T}));if(D instanceof ul)throw new sE(D);n=D}const s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if("/"===n[0])throw new sE(s);return s}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new ul(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new pn(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const gD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oJ(t,e,n,r,i){const o=cL(t,e,n);return o.matched?(r=function wZ(t,e){return t.providers&&!t._injector&&(t._injector=Uv(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function tJ(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Ke(i.map(s=>{const a=qh(s,t);return Bu(function HZ(t){return t&&Rm(t.canMatch)}(a)?a.canMatch(e,n):uo(t,()=>a(e,n)))})).pipe(Gh(),uL()):Ke(!0)}(r,e,n).pipe(ke(s=>!0===s?o:{...gD}))):Ke(o)}function cL(t,e,n){if("**"===e.path)return function sJ(t){return{matched:!0,parameters:t.length>0?RV(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...gD}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||UY)(n,t,e);if(!i)return{...gD};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function lL(t,e,n,r){return n.length>0&&function cJ(t,e,n){return n.some(r=>aE(t,e,r)&&fs(r)!==vt)}(t,n,r)?{segmentGroup:new pn(e,uJ(r,new pn(n,t.children))),slicedSegments:[]}:0===n.length&&function lJ(t,e,n){return n.some(r=>aE(t,e,r))}(t,n,r)?{segmentGroup:new pn(t.segments,aJ(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new pn(t.segments,t.children),slicedSegments:n}}function aJ(t,e,n,r){const i={};for(const o of n)if(aE(t,e,o)&&!r[fs(o)]){const s=new pn([],{});i[fs(o)]=s}return{...r,...i}}function uJ(t,e){const n={};n[vt]=e;for(const r of t)if(""===r.path&&fs(r)!==vt){const i=new pn([],{});n[fs(r)]=i}return n}function aE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class hJ{}class gJ{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new iJ(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){const e=lL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ke(({children:n,rootSnapshot:r})=>{const i=new ps(r,n),o=new XV("",i),s=function oZ(t,e,n=null,r=null){return $V(jV(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new tE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),vt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,vt,n).pipe(ke(r=>({children:r,rootSnapshot:n})),Bh(r=>{if(r instanceof sE)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pD?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ke(s=>s instanceof ps?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Sn(o).pipe(Vh(s=>{const a=r.children[s],u=function DZ(t,e){const n=t.filter(r=>fs(r)===e);return n.push(...t.filter(r=>fs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,u,a,s,i)}),zI((s,a)=>(s.push(...a),s)),ca(null),function kY(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((i,o)=>t(i,o,r)):ai,JT(1),n?ca(e):Jo(()=>new sn))}(),fi(s=>{if(null===s)return Wh(r);const a=dL(s);return function mJ(t){t.sort((e,n)=>e.value.outlet===vt?-1:n.value.outlet===vt?1:e.value.outlet.localeCompare(n.value.outlet))}(a),Ke(a)}))}processSegment(e,n,r,i,o,s,a){return Sn(n).pipe(Vh(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Bh(d=>{if(d instanceof pD)return Ke(null);throw d}))),Ui(u=>!!u),Bh(u=>{if(aL(u))return function dJ(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Ke(new hJ):Wh(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return fs(r)===s||s!==vt&&aE(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Wh(i):Wh(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:u,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=cL(n,i,o);if(!u)return Wh(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new tE(o,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hL(i),fs(i),i.component??i._loadedComponent??null,i,fL(i)),C=eE(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(C.params),E.data=Object.freeze(C.data);const T=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,E,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(fi(D=>this.processSegment(e,r,n,D.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=oJ(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(Mr(u=>u.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Mr(({routes:d})=>{const p=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:E}=u,C=new tE(y,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hL(r),fs(r),r.component??r._loadedComponent??null,r,fL(r)),T=eE(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(T.params),C.data=Object.freeze(T.data);const{segmentGroup:D,slicedSegments:L}=lL(n,y,E,d);if(0===L.length&&D.hasChildren())return this.processChildren(p,d,D,C).pipe(ke(K=>new ps(C,K)));if(0===d.length&&0===L.length)return Ke(new ps(C,[]));const k=fs(r)===o;return this.processSegment(p,d,D,L,k?vt:o,!0,C).pipe(ke(K=>new ps(C,K instanceof ps?[K]:[])))})):Wh(n)))}getChildConfig(e,n,r){return n.children?Ke({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Ke({routes:n._loadedRoutes,injector:n._loadedInjector}):function eJ(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Ke(!0):Ke(i.map(s=>{const a=qh(s,t);return Bu(function BZ(t){return t&&Rm(t.canLoad)}(a)?a.canLoad(e,n):uo(t,()=>a(e,n)))})).pipe(Gh(),uL())}(e,n,r).pipe(fi(i=>i?this.configLoader.loadChildren(e,n).pipe(Br(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function rJ(){return jI(iL(!1,wo.GuardRejected))}())):Ke({routes:[],injector:e})}}function _J(t){const e=t.value.routeConfig;return e&&""===e.path}function dL(t){const e=[],n=new Set;for(const r of t){if(!_J(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=dL(r.children);e.push(new ps(r.value,i))}return e.filter(r=>!n.has(r))}function hL(t){return t.data||{}}function fL(t){return t.resolve||{}}function pL(t){const e=t.children.map(n=>pL(n)).flat();return[t,...e]}function mD(t){return Mr(e=>{const n=t(e);return n?Sn(n).pipe(ke(()=>e)):Ke(e)})}let gL=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===vt);return r}getResolvedTitleForRoute(n){return n.data[vm]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(CJ),providedIn:"root"})}}return t})(),CJ=(()=>{class t extends gL{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(we(yY))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Kh=new ye("",{providedIn:"root",factory:()=>({})});let mL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["ng-component"]],standalone:!0,features:[Wn],decls:1,vars:0,template:function(r,i){1&r&&jo(0,"router-outlet")},dependencies:[dD],encapsulation:2})}}return t})();function _D(t){const e=t.children&&t.children.map(_D),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==vt&&(n.component=mL),n}const Qh=new ye("");let yD=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(sk)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ke(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Bu(n.loadComponent()).pipe(ke(_L),Br(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),OI(()=>{this.componentLoaders.delete(n)})),i=new SV(r,()=>new R).pipe(ZT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function bJ(t,e,n,r){return Bu(t.loadChildren()).pipe(ke(_L),fi(i=>i instanceof wN||Array.isArray(i)?Ke(i):Sn(e.compileModuleAsync(i))),ke(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Qh,[],{optional:!0,self:!0}).flat()),{routes:s.map(_D),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(OI(()=>{this.childrenLoaders.delete(r)})),s=new SV(o,()=>new R).pipe(ZT());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _L(t){return function TJ(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let vD=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(DJ),providedIn:"root"})}}return t})(),DJ=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const yL=new ye(""),vL=new ye("");function AJ(t,e,n){const r=t.get(vL),i=t.get(Yi);return t.get(Tt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o;const s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),function SJ(t){return new Promise(e=>{qv({read:()=>setTimeout(e)},{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&uo(t,()=>u({transition:a,from:e,to:n})),s})}const IL=new ye("");let uE=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new R,this.transitionAbortSubject=new R,this.configLoader=G(yD),this.environmentInjector=G(Kr),this.urlSerializer=G($h),this.rootContexts=G(Dm),this.location=G(cm),this.inputBindingEnabled=null!==G(nE,{optional:!0}),this.titleStrategy=G(gL),this.options=G(Kh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(vD),this.createViewTransition=G(yL,{optional:!0}),this.navigationErrorHandler=G(IL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ke(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new _Z(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new mZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new se({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bm,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Jt(o=>0!==o.id),ke(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Mr(o=>{let s=!1,a=!1;return Ke(o).pipe(Mr(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",wo.SupersededByNewNavigation),ot;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:"string"==typeof u.extras.browserUrl?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new zh(u.id,this.urlSerializer.serialize(u.rawUrl),m,JI.IgnoredSameUrlNavigation)),u.resolve(!1),ot}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Ke(u).pipe(Mr(m=>{const y=this.transitions?.getValue();return this.events.next(new ZI(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?ot:Promise.resolve(m)}),function yJ(t,e,n,r,i,o){return fi(s=>function fJ(t,e,n,r,i,o,s="emptyOnly"){return new gJ(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(ke(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Br(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new KV(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:E,restoredState:C,extras:T}=u,D=new ZI(m,this.urlSerializer.serialize(y),E,C);this.events.next(D);const L=JV(this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:L,urlAfterRedirects:y,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=y,Ke(o)}{const m="";return this.events.next(new zh(u.id,this.urlSerializer.serialize(u.extractedUrl),m,JI.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ot}}),Br(u=>{const d=new hZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ke(u=>(this.currentTransition=o={...u,guards:kZ(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function GZ(t,e){return fi(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ke({...n,guardsResult:!0}):function WZ(t,e,n,r){return Sn(t).pipe(fi(i=>function XZ(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ke(o.map(a=>{const u=Tm(e)??i,d=qh(a,u);return Bu(function zZ(t){return t&&Rm(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):uo(u,()=>d(t,e,n,r))).pipe(Ui())})).pipe(Gh()):Ke(!0)}(i.component,i.route,n,e,r)),Ui(i=>!0!==i,!0))}(s,r,i,t).pipe(fi(a=>a&&function UZ(t){return"boolean"==typeof t}(a)?function KZ(t,e,n,r){return Sn(e).pipe(Vh(i=>YT(function YZ(t,e){return null!==t&&e&&e(new yZ(t)),Ke(!0)}(i.route.parent,r),function QZ(t,e){return null!==t&&e&&e(new IZ(t)),Ke(!0)}(i.route,r),function JZ(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function FZ(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>AV(()=>Ke(s.guards.map(u=>{const d=Tm(s.node)??n,p=qh(u,d);return Bu(function $Z(t){return t&&Rm(t.canActivateChild)}(p)?p.canActivateChild(r,t):uo(d,()=>p(r,t))).pipe(Ui())})).pipe(Gh())));return Ke(o).pipe(Gh())}(t,i.path,n),function ZZ(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ke(!0);const i=r.map(o=>AV(()=>{const s=Tm(e)??n,a=qh(o,s);return Bu(function jZ(t){return t&&Rm(t.canActivate)}(a)?a.canActivate(e,t):uo(s,()=>a(e,t))).pipe(Ui())}));return Ke(i).pipe(Gh())}(t,i.route,n))),Ui(i=>!0!==i,!0))}(r,o,t,e):Ke(a)),ke(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Br(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&"boolean"!=typeof u.guardsResult)throw rE(0,u.guardsResult);const d=new fZ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Jt(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",wo.GuardRejected),!1)),mD(u=>{if(u.guards.canActivateChecks.length)return Ke(u).pipe(Br(d=>{const p=new pZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),Mr(d=>{let p=!1;return Ke(d).pipe(function vJ(t,e){return fi(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ke(n);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const d of pL(u))s.add(d);let a=0;return Sn(s).pipe(Vh(u=>o.has(u)?function IJ(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!tL(i)&&(o[vm]=i.title),function EJ(t,e,n,r){const i=XT(t);if(0===i.length)return Ke({});const o={};return Sn(i).pipe(fi(s=>function wJ(t,e,n,r){const i=Tm(e)??r,o=qh(t,i);return Bu(o.resolve?o.resolve(e,n):uo(i,()=>o(e,n)))}(t[s],e,n,r).pipe(Ui(),Br(a=>{if(a instanceof fD)throw rE(new qI,a);o[s]=a}))),JT(1),function FY(t){return ke(()=>t)}(o),Bh(s=>aL(s)?ot:jI(s)))}(o,t,e,r).pipe(ke(s=>(t._resolvedData=s,t.data=eE(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=eE(u,u.parent,t).resolve,Ke(void 0))),Br(()=>a++),JT(1),fi(u=>a===s.size?Ke(n):ot))})}(this.paramsInheritanceStrategy,this.environmentInjector),Br({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",wo.NoDataFromResolver)}}))}),Br(d=>{const p=new gZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),mD(u=>{const d=p=>{const m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Br(y=>{p.component=y}),ke(()=>{})));for(const y of p.children)m.push(...d(y));return m};return QT(d(u.targetSnapshot.root)).pipe(ca(null),no(1))}),mD(()=>this.afterPreactivation()),Mr(()=>{const{currentSnapshot:u,targetSnapshot:d}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return p?Sn(p).pipe(ke(()=>o)):Ke(o)}),ke(u=>{const d=function MZ(t,e,n){const r=Am(t,e._root,n?n._root:void 0);return new ZV(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:d},this.currentNavigation.targetRouterState=d,o}),Br(()=>{this.events.next(new oD)}),((t,e,n,r)=>ke(i=>(new OZ(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),no(1),Br({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new La(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function VY(t){return Ce((e,n)=>{Eo(t).subscribe(Pe(n,()=>n.complete(),Wo)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Br(u=>{throw u}))),OI(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",wo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bh(u=>{if(a=!0,oL(u))this.events.next(new dl(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function xZ(t){return oL(t)&&ll(t.url)}(u)?this.events.next(new XI(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{const d=new iD(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{const p=uo(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof fD){const{message:m,cancellationCode:y}=rE(0,p);this.events.next(new dl(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new XI(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(d);const m=n.errorHandler(u);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return ot}))}))}cancelNavigationTransition(n,r,i){const o=new dl(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function MJ(t){return t!==bm}let RJ=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(xJ),providedIn:"root"})}}return t})();class PJ{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let xJ=(()=>{class t extends PJ{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),EL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:()=>G(NJ),providedIn:"root"})}}return t})(),NJ=(()=>{class t extends EL{constructor(){super(...arguments),this.location=G(cm),this.urlSerializer=G($h),this.options=G(Kh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(vD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ul,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JV(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ZI)this.stateMemento=this.createStateMemento();else if(n instanceof zh)this.rawUrlTree=r.initialUrl;else if(n instanceof KV){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof oD?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof dl&&(n.code===wo.GuardRejected||n.code===wo.NoDataFromResolver)?this.restoreHistory(r):n instanceof iD?this.restoreHistory(r,!0):n instanceof La&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=n instanceof ul?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&0===o&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Pm=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Pm||{});function wL(t,e){t.events.pipe(Jt(n=>n instanceof La||n instanceof dl||n instanceof iD||n instanceof zh),ke(n=>n instanceof La||n instanceof zh?Pm.COMPLETE:n instanceof dl&&(n.code===wo.Redirect||n.code===wo.SupersededByNewNavigation)?Pm.REDIRECTING:Pm.FAILED),Jt(n=>n!==Pm.REDIRECTING),no(1)).subscribe(()=>{e()})}function OJ(t){throw t}const kJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(Z0),this.stateManager=G(EL),this.options=G(Kh,{optional:!0})||{},this.pendingTasks=G(Su),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(uE),this.urlSerializer=G($h),this.location=G(cm),this.urlHandlingStrategy=G(vD),this._events=new R,this.errorHandler=this.options.errorHandler||OJ,this.navigated=!1,this.routeReuseStrategy=G(RJ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Qh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(nE,{optional:!0}),this.eventsSubscription=new Pt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof dl&&r.code!==wo.Redirect&&r.code!==wo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof La)this.navigated=!0;else if(r instanceof XI){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||MJ(i.source),...s};this.scheduleNavigation(a,bm,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function LJ(t){return!(t instanceof oD||t instanceof XI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(_D),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s;let m,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p={...this.currentUrlTree.queryParams,...o};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}null!==p&&(p=this.removeEmptyProps(p));try{m=jV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),m=this.currentUrlTree.root}return $V(m,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ll(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,bm,null,r)}navigate(n,r={skipLocationChange:!1}){return function VJ(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new S(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...kJ}:!1===r?{...FJ}:r,ll(n))return xV(this.currentUrlTree,n,i);const o=this.parseUrl(n);return xV(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((m,y)=>{a=m,u=y});const p=this.pendingTasks.add();return wL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Yh=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new R,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof La&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=ll(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.href=null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;const r=null===this.href?null:function wP(t,e,n){return function Dz(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?_v:EP}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:ll(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(Ie(jr),Ie(ju),function un(t){return function Jy(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(fd(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(Qt(),t)}("tabindex"),Ie(Ra),Ie(po),Ie(rl))}}static{this.\u0275dir=it({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ze("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&js("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ph],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ph],replaceUrl:[2,"replaceUrl","replaceUrl",Ph],routerLink:"routerLink"},standalone:!0,features:[EN,Lr]})}}return t})();class CL{}let jJ=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Jt(n=>n instanceof La),Vh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Uv(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Sn(i).pipe(Uh())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ke(null);const o=i.pipe(fi(s=>null===s?Ke(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Sn([o,this.loader.loadComponent(r)]).pipe(Uh()):o})}static{this.\u0275fac=function(r){return new(r||t)(we(jr),we(sk),we(Kr),we(CL),we(yD))}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const ID=new ye("");let bL=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ZI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof La?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof zh&&n.code===JI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof QV&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new QV(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function WP(){throw new Error("invalid")}()}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac})}}return t})();function TL(t){return t.routerState.root}function Ks(t,e){return{\u0275kind:t,\u0275providers:e}}function DL(){const t=G(Ur);return e=>{const n=t.get(ls);if(e!==n.components[0])return;const r=t.get(jr),i=t.get(AL);1===t.get(ED)&&r.initialNavigation(),t.get(SL,null,It.Optional)?.setUpPreloading(),t.get(ID,null,It.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const AL=new ye("",{factory:()=>new R}),ED=new ye("",{providedIn:"root",factory:()=>1}),SL=new ye("");function GJ(t){return Ks(0,[{provide:SL,useExisting:jJ},{provide:CL,useExisting:t}])}function KJ(t){return Ks(9,[{provide:yL,useValue:AJ},{provide:vL,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const ML=new ye("ROUTER_FORROOT_GUARD"),QJ=[cm,{provide:$h,useClass:qI},jr,Dm,{provide:ju,useFactory:TL,deps:[jr]},yD,[]];let wD=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[QJ,[],{provide:Qh,multi:!0,useValue:n},{provide:ML,useFactory:XJ,deps:[[jr,new fu,new ad]]},{provide:Kh,useValue:r||{}},r?.useHash?{provide:rl,useClass:e7}:{provide:rl,useClass:Jk},{provide:ID,useFactory:()=>{const t=G(yK),e=G(Tt),n=G(Kh),r=G(uE),i=G($h);return n.scrollOffset&&t.setOffset(n.scrollOffset),new bL(i,r,t,e,n)}},r?.preloadingStrategy?GJ(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?eX(r):[],r?.bindToComponentInputs?Ks(8,[nL,{provide:nE,useExisting:nL}]).\u0275providers:[],r?.enableViewTransitions?KJ().\u0275providers:[],[{provide:RL,useFactory:DL},{provide:Rh,multi:!0,useExisting:RL}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Qh,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(we(ML,8))}}static{this.\u0275mod=Ds({type:t})}static{this.\u0275inj=Bi({})}}return t})();function XJ(t){return"guarded"}function eX(t){return["disabled"===t.initialNavigation?Ks(3,[{provide:nT,multi:!0,useFactory:()=>{const e=G(jr);return()=>{e.setUpLocationChangeListener()}}},{provide:ED,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ks(2,[{provide:ED,useValue:0},{provide:nT,multi:!0,deps:[Ur],useFactory:e=>{const n=e.get(JW,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(jr),o=e.get(AL);wL(i,()=>{r(!0)}),e.get(uE).afterPreactivation=()=>(r(!0),o.closed?Ke(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const RL=new ye("");var Zh=dt(979);(0,Zh.registerVersion)("firebase","10.14.1","app");class iX extends Pt{constructor(e,n){super()}schedule(e,n=0){return this}}const cE={setInterval(t,e,...n){const{delegate:r}=cE;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=cE;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class PL extends iX{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return cE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&cE.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Bn(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const CD={now:()=>(CD.delegate||Date).now(),delegate:void 0};class xm{constructor(e,n=xm.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}xm.now=CD.now;class xL extends xm{constructor(e,n=xm.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const aX=new class sX extends xL{}(class oX extends PL{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),NL=new xL(PL),lE=new Mh("ANGULARFIRE2_VERSION");class OL{constructor(){return(t=>{const n=(0,Zh.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(cX)}}const cX="app-check";function Jh(){}class kL{zone;delegate;constructor(e,n=aX){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class lX{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jh,{},Jh,Jh)),n.pipe(Br({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let FL=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new kL(Zone.current)),this.insideAngular=n.run(()=>new kL(Zone.current,NL)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(we(Tt))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Co(t){return function hX(t){return function(n){return(n=n.lift(new lX(t.ngZone))).pipe(Fh(t.outsideAngular),il(t.insideAngular))}}(function Xh(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Ua=dt(574);Ua.A.registerVersion("firebase","10.14.1","app-compat");const mX=["ngOnDestroy"];class VL{constructor(e){return e}}const dE=new ye("angularfire2.app.options"),hE=new ye("angularfire2.app.name");function bD(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Ua.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ua.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;vX("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new VL(s)}const vX=(t,...e)=>{},IX={provide:VL,useFactory:bD,deps:[dE,Tt,[new fu,hE]]};let EX=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:dE,useValue:n},{provide:hE,useValue:r}]}}constructor(n){Ua.A.registerVersion("angularfire",lE.full,"core"),Ua.A.registerVersion("angularfire",lE.full,"app-compat"),Ua.A.registerVersion("angular",o8.full,n.toString())}static \u0275fac=function(r){return new(r||t)(we(go))};static \u0275mod=Ds({type:t});static \u0275inj=Bi({providers:[IX]})}return t})();function LL(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function wX(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(UL("error",`${e} was already initialized on the ${n} Firebase App with different settings.${CX?" You may need to reload as Firebase is not HMR aware.":""}`),UL("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const CX=typeof module<"u"&&!!module.hot,UL=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],dt(324);class TX extends R{constructor(e=1/0,n=1/0,r=CD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function TD(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Or({next:()=>{r.unsubscribe(),t()}});return Eo(e(...n)).subscribe(r)}function BL(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,function DX(t={}){const{connector:e=()=>new R,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,d=0,p=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),s=u=void 0,p=m=!1},C=()=>{const T=s;E(),T?.unsubscribe()};return Ce((T,D)=>{d++,!m&&!p&&y();const L=u=u??e();D.add(()=>{d--,0===d&&!m&&!p&&(a=TD(C,i))}),L.subscribe(D),!s&&d>0&&(s=new Or({next:k=>L.next(k),error:k=>{m=!0,y(),a=TD(E,n,k),L.error(k)},complete:()=>{p=!0,y(),a=TD(E,r),L.complete()}}),Eo(T).subscribe(s))})(o)}}({connector:()=>new TX(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function jL(t,e){return nt(e)?Mr(()=>t,e):Mr(()=>t)}const $L=new ye("angularfire2.auth.use-emulator"),zL=new ye("angularfire2.auth.settings"),HL=new ye("angularfire2.auth.tenant-id"),qL=new ye("angularfire2.auth.langugage-code"),GL=new ye("angularfire2.auth.use-device-language"),WL=new ye("angularfire.auth.persistence"),KL=(t,e,n,r,i,o,s,a)=>LL(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[d,p]of Object.entries(s))u.settings[d]=p;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let fl=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,d,p,m,y,E){const C=new R,T=Ke(void 0).pipe(il(s.outsideAngular),Mr(()=>o.runOutsideAngular(()=>Promise.resolve().then(dt.bind(dt,324)))),ke(()=>bD(n,o,r)),ke(D=>KL(D,o,a,d,p,m,u,y)),BL({bufferSize:1,refCount:!1}));if(hm(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{T.pipe(Ui()).subscribe();const D=T.pipe(Mr(K=>K.getRedirectResult().then(fe=>fe,()=>null)),Co,BL({bufferSize:1,refCount:!1})),L=T.pipe(Mr(K=>new xt(fe=>({unsubscribe:o.runOutsideAngular(()=>K.onAuthStateChanged(Te=>fe.next(Te),Te=>fe.error(Te),()=>fe.complete()))})))),k=T.pipe(Mr(K=>new xt(fe=>({unsubscribe:o.runOutsideAngular(()=>K.onIdTokenChanged(Te=>fe.next(Te),Te=>fe.error(Te),()=>fe.complete()))}))));this.authState=D.pipe(jL(L),Fh(s.outsideAngular),il(s.insideAngular)),this.user=D.pipe(jL(k),Fh(s.outsideAngular),il(s.insideAngular)),this.idToken=this.user.pipe(Mr(K=>K?Sn(K.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(Mr(K=>K?Sn(K.getIdTokenResult()):Ke(null))),this.credential=function bX(...t){const e=gm(t),n=function YK(t,e){return"number"==typeof kT(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Eo(r[0]):Uh(n)(Sn(r,e)):ot}(D,C,this.authState.pipe(Jt(K=>!K))).pipe(ke(K=>K?.user?K:null),Fh(s.outsideAngular),il(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(mX.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,d)=>s.then(p=>{const m=p?.(...d);return r?.spy?.apply&&r.spy.apply(o,d,m),m})})})}))(this,T,o,{spy:{apply:(D,L,k)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&k.then(K=>C.next(K))}}})}static \u0275fac=function(r){return new(r||t)(we(dE),we(hE,8),we(go),we(Tt),we(FL),we($L,8),we(zL,8),we(HL,8),we(qL,8),we(GL,8),we(WL,8),we(OL,8))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),SX=(()=>{class t{constructor(){Ua.A.registerVersion("angularfire",lE.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ds({type:t});static \u0275inj=Bi({providers:[fl]})}return t})();function DD(){return Ce((t,e)=>{let n,r=!1;t.subscribe(Pe(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function RX(t,e){return t===e}var pl,JL,QL=dt(779),Qs=dt(398),on=dt(401),YL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZL={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,P,F){F||(F=0);var j=Array(16);if("string"==typeof P)for(var H=0;16>H;++H)j[H]=P.charCodeAt(F++)|P.charCodeAt(F++)<<8|P.charCodeAt(F++)<<16|P.charCodeAt(F++)<<24;else for(H=0;16>H;++H)j[H]=P[F++]|P[F++]<<8|P[F++]<<16|P[F++]<<24;var Z=V.g[3],N=(P=V.g[0])+(Z^(F=V.g[1])&((H=V.g[2])^Z))+j[0]+3614090360&4294967295;N=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=(F=(H=(Z=(P=F+(N<<7&4294967295|N>>>25))+((N=Z+(H^P&(F^H))+j[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=H+(F^Z&(P^F))+j[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=F+(P^H&(Z^P))+j[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=P+(Z^F&(H^Z))+j[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=Z+(H^P&(F^H))+j[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=H+(F^Z&(P^F))+j[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=F+(P^H&(Z^P))+j[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=P+(Z^F&(H^Z))+j[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=Z+(H^P&(F^H))+j[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=H+(F^Z&(P^F))+j[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=F+(P^H&(Z^P))+j[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=P+(Z^F&(H^Z))+j[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=Z+(H^P&(F^H))+j[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=H+(F^Z&(P^F))+j[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=F+(P^H&(Z^P))+j[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=P+(H^Z&(F^H))+j[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=Z+(F^H&(P^F))+j[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=H+(P^F&(Z^P))+j[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=F+(Z^P&(H^Z))+j[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=P+(H^Z&(F^H))+j[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=Z+(F^H&(P^F))+j[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=H+(P^F&(Z^P))+j[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=F+(Z^P&(H^Z))+j[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=P+(H^Z&(F^H))+j[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=Z+(F^H&(P^F))+j[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=H+(P^F&(Z^P))+j[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=F+(Z^P&(H^Z))+j[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=P+(H^Z&(F^H))+j[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=Z+(F^H&(P^F))+j[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=H+(P^F&(Z^P))+j[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=F+(Z^P&(H^Z))+j[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=P+(F^H^Z)+j[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=Z+(P^F^H)+j[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=H+(Z^P^F)+j[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=F+(H^Z^P)+j[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=P+(F^H^Z)+j[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=Z+(P^F^H)+j[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=H+(Z^P^F)+j[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=F+(H^Z^P)+j[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=P+(F^H^Z)+j[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=Z+(P^F^H)+j[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=H+(Z^P^F)+j[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=F+(H^Z^P)+j[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=P+(F^H^Z)+j[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=Z+(P^F^H)+j[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=H+(Z^P^F)+j[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=F+(H^Z^P)+j[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=P+(H^(F|~Z))+j[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=Z+(F^(P|~H))+j[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=H+(P^(Z|~F))+j[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=F+(Z^(H|~P))+j[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=P+(H^(F|~Z))+j[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=Z+(F^(P|~H))+j[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=H+(P^(Z|~F))+j[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=F+(Z^(H|~P))+j[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=P+(H^(F|~Z))+j[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=Z+(F^(P|~H))+j[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=H+(P^(Z|~F))+j[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=F+(Z^(H|~P))+j[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((Z=(P=F+((N=P+(H^(F|~Z))+j[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=Z+(F^(P|~H))+j[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^((H=Z+((N=H+(P^(Z|~F))+j[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~P))+j[9]+3951481745&4294967295,V.g[0]=V.g[0]+P&4294967295,V.g[1]=V.g[1]+(H+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+H&4294967295,V.g[3]=V.g[3]+Z&4294967295}function s(V,P){this.h=P;for(var F=[],j=!0,H=V.length-1;0<=H;H--){var Z=0|V[H];j&&Z==P||(F[H]=Z,j=!1)}this.g=F}(function e(V,P){function F(){}F.prototype=P.prototype,V.D=P.prototype,V.prototype=new F,V.prototype.constructor=V,V.C=function(j,H,Z){for(var N=Array(arguments.length-2),Ja=2;Ja<arguments.length;Ja++)N[Ja-2]=arguments[Ja];return P.prototype[H].apply(j,N)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,P){void 0===P&&(P=V.length);for(var F=P-this.blockSize,j=this.B,H=this.h,Z=0;Z<P;){if(0==H)for(;Z<=F;)i(this,V,Z),Z+=this.blockSize;if("string"==typeof V){for(;Z<P;)if(j[H++]=V.charCodeAt(Z++),H==this.blockSize){i(this,j),H=0;break}}else for(;Z<P;)if(j[H++]=V[Z++],H==this.blockSize){i(this,j),H=0;break}}this.h=H,this.o+=P},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var P=1;P<V.length-8;++P)V[P]=0;var F=8*this.o;for(P=V.length-8;P<V.length;++P)V[P]=255&F,F/=256;for(this.u(V),V=Array(16),P=F=0;4>P;++P)for(var j=0;32>j;j+=8)V[F++]=this.g[P]>>>j&255;return V};var a={};function u(V){return-128<=V&&128>V?function o(V,P){var F=a;return Object.prototype.hasOwnProperty.call(F,V)?F[V]:F[V]=P(V)}(V,function(P){return new s([0|P],0>P?-1:0)}):new s([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return D(d(-V));for(var P=[],F=1,j=0;V>=F;j++)P[j]=V/F|0,F*=4294967296;return new s(P,0)}var m=u(0),y=u(1),E=u(16777216);function C(V){if(0!=V.h)return!1;for(var P=0;P<V.g.length;P++)if(0!=V.g[P])return!1;return!0}function T(V){return-1==V.h}function D(V){for(var P=V.g.length,F=[],j=0;j<P;j++)F[j]=~V.g[j];return new s(F,~V.h).add(y)}function L(V,P){return V.add(D(P))}function k(V,P){for(;(65535&V[P])!=V[P];)V[P+1]+=V[P]>>>16,V[P]&=65535,P++}function K(V,P){this.g=V,this.h=P}function fe(V,P){if(C(P))throw Error("division by zero");if(C(V))return new K(m,m);if(T(V))return P=fe(D(V),P),new K(D(P.g),D(P.h));if(T(P))return P=fe(V,D(P)),new K(D(P.g),P.h);if(30<V.g.length){if(T(V)||T(P))throw Error("slowDivide_ only works with positive integers.");for(var F=y,j=P;0>=j.l(V);)F=Te(F),j=Te(j);var H=xe(F,1),Z=xe(j,1);for(j=xe(j,2),F=xe(F,2);!C(j);){var N=Z.add(j);0>=N.l(V)&&(H=H.add(F),Z=N),j=xe(j,1),F=xe(F,1)}return P=L(V,H.j(P)),new K(H,P)}for(H=m;0<=V.l(P);){for(F=Math.max(1,Math.floor(V.m()/P.m())),j=48>=(j=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,j-48),N=(Z=d(F)).j(P);T(N)||0<N.l(V);)N=(Z=d(F-=j)).j(P);C(Z)&&(Z=y),H=H.add(Z),V=L(V,N)}return new K(H,V)}function Te(V){for(var P=V.g.length+1,F=[],j=0;j<P;j++)F[j]=V.i(j)<<1|V.i(j-1)>>>31;return new s(F,V.h)}function xe(V,P){var F=P>>5;P%=32;for(var j=V.g.length-F,H=[],Z=0;Z<j;Z++)H[Z]=0<P?V.i(Z+F)>>>P|V.i(Z+F+1)<<32-P:V.i(Z+F);return new s(H,V.h)}(t=s.prototype).m=function(){if(T(this))return-D(this).m();for(var V=0,P=1,F=0;F<this.g.length;F++){var j=this.i(F);V+=(0<=j?j:4294967296+j)*P,P*=4294967296}return V},t.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(C(this))return"0";if(T(this))return"-"+D(this).toString(V);for(var P=d(Math.pow(V,6)),F=this,j="";;){var H=fe(F,P).g,Z=((0<(F=L(F,H.j(P))).g.length?F.g[0]:F.h)>>>0).toString(V);if(C(F=H))return Z+j;for(;6>Z.length;)Z="0"+Z;j=Z+j}},t.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},t.l=function(V){return T(V=L(this,V))?-1:C(V)?0:1},t.abs=function(){return T(this)?D(this):this},t.add=function(V){for(var P=Math.max(this.g.length,V.g.length),F=[],j=0,H=0;H<=P;H++){var Z=j+(65535&this.i(H))+(65535&V.i(H)),N=(Z>>>16)+(this.i(H)>>>16)+(V.i(H)>>>16);j=N>>>16,F[H]=(N&=65535)<<16|(Z&=65535)}return new s(F,-2147483648&F[F.length-1]?-1:0)},t.j=function(V){if(C(this)||C(V))return m;if(T(this))return T(V)?D(this).j(D(V)):D(D(this).j(V));if(T(V))return D(this.j(D(V)));if(0>this.l(E)&&0>V.l(E))return d(this.m()*V.m());for(var P=this.g.length+V.g.length,F=[],j=0;j<2*P;j++)F[j]=0;for(j=0;j<this.g.length;j++)for(var H=0;H<V.g.length;H++){var Z=this.i(j)>>>16,N=65535&this.i(j),Ja=V.i(H)>>>16,S_=65535&V.i(H);F[2*j+2*H]+=N*S_,k(F,2*j+2*H),F[2*j+2*H+1]+=Z*S_,k(F,2*j+2*H+1),F[2*j+2*H+1]+=N*Ja,k(F,2*j+2*H+1),F[2*j+2*H+2]+=Z*Ja,k(F,2*j+2*H+2)}for(j=0;j<P;j++)F[j]=F[2*j+1]<<16|F[2*j];for(j=P;j<2*P;j++)F[j]=0;return new s(F,0)},t.A=function(V){return fe(this,V).h},t.and=function(V){for(var P=Math.max(this.g.length,V.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)&V.i(j);return new s(F,this.h&V.h)},t.or=function(V){for(var P=Math.max(this.g.length,V.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)|V.i(j);return new s(F,this.h|V.h)},t.xor=function(V){for(var P=Math.max(this.g.length,V.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)^V.i(j);return new s(F,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JL=ZL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=function p(V,P){if(0==V.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==V.charAt(0))return D(p(V.substring(1),P));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=d(Math.pow(P,8)),j=m,H=0;H<V.length;H+=8){var Z=Math.min(8,V.length-H),N=parseInt(V.substring(H,H+Z),P);8>Z?(Z=d(Math.pow(P,Z)),j=j.j(Z).add(d(N))):j=(j=j.j(F)).add(d(N))}return j},pl=ZL.Integer=s}).apply(typeof YL<"u"?YL:typeof self<"u"?self:typeof window<"u"?window:{});var XL,Nm,e2,pE,AD,t2,n2,r2,fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ba={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function n(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof fE&&fE];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in I))break e;I=I[q]}(_=_(b=I[h=h[h.length-1]]))!=b&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function o(h,_){h instanceof String&&(h+="");var I=0,b=!1,q={next:function(){if(!b&&I<h.length){var ie=I++;return{value:_(ie,h[ie]),done:!1}}return b=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}(this,function(_,I){return I})}});var s=s||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function p(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,b),h.apply(_,q)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function C(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(b,q,ie){for(var Ae=Array(arguments.length-2),En=2;En<arguments.length;En++)Ae[En-2]=arguments[En];return _.prototype[q].apply(b,Ae)}}function T(h){const _=h.length;if(0<_){const I=Array(_);for(let b=0;b<_;b++)I[b]=h[b];return I}return[]}function D(h,_){for(let I=1;I<arguments.length;I++){const b=arguments[I];if(u(b)){const q=h.length||0,ie=b.length||0;h.length=q+ie;for(let Ae=0;Ae<ie;Ae++)h[q+Ae]=b[Ae]}else h.push(b)}}function k(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function fe(h){return fe[" "](h),h}fe[" "]=function(){};var Te=!(-1==K().indexOf("Gecko")||-1!=K().toLowerCase().indexOf("webkit")&&-1==K().indexOf("Edge")||-1!=K().indexOf("Trident")||-1!=K().indexOf("MSIE")||-1!=K().indexOf("Edge"));function xe(h,_,I){for(const b in h)_.call(I,h[b],b,h)}function P(h){const _={};for(const I in h)_[I]=h[I];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,_){let I,b;for(let q=1;q<arguments.length;q++){for(I in b=arguments[q],b)h[I]=b[I];for(let ie=0;ie<F.length;ie++)I=F[ie],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function H(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function Z(h){a.setTimeout(()=>{throw h},0)}function N(){var h=wM;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var S_=new class L{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Tse,h=>h.reset());class Tse{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let M_,R_=!1,wM=new class Ja{constructor(){this.h=this.g=null}add(_,I){const b=S_.get();b.set(_,I),this.h?this.h.next=b:this.g=b,this.h=b}},n3=()=>{const h=a.Promise.resolve(void 0);M_=()=>{h.then(Dse)}};var Dse=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(I){Z(I)}var _=S_;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}R_=!1};function dc(){this.s=this.s,this.C=this.C}function vi(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}dc.prototype.s=!1,dc.prototype.ma=function(){this.s||(this.s=!0,this.N())},dc.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},vi.prototype.h=function(){this.defaultPrevented=!0};var Ase=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function P_(h,_){if(vi.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Te){e:{try{fe(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Sse[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&P_.aa.h.call(this)}}C(P_,vi);var Sse={2:"touch",3:"pen",4:"mouse"};P_.prototype.h=function(){P_.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var x_="closure_listenable_"+(1e6*Math.random()|0),Mse=0;function Rse(h,_,I,b,q){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!b,this.ha=q,this.key=++Mse,this.da=this.fa=!1}function Aw(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Sw(h){this.src=h,this.g={},this.h=0}function CM(h,_){var I=_.type;if(I in h.g){var ie,b=h.g[I],q=Array.prototype.indexOf.call(b,_,void 0);(ie=0<=q)&&Array.prototype.splice.call(b,q,1),ie&&(Aw(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function bM(h,_,I,b){for(var q=0;q<h.length;++q){var ie=h[q];if(!ie.da&&ie.listener==_&&ie.capture==!!I&&ie.ha==b)return q}return-1}Sw.prototype.add=function(h,_,I,b,q){var ie=h.toString();(h=this.g[ie])||(h=this.g[ie]=[],this.h++);var Ae=bM(h,_,b,q);return-1<Ae?(_=h[Ae],I||(_.fa=!1)):((_=new Rse(_,this.src,ie,!!b,q)).fa=I,h.push(_)),_};var TM="closure_lm_"+(1e6*Math.random()|0),DM={};function r3(h,_,I,b,q){if(b&&b.once)return o3(h,_,I,b,q);if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)r3(h,_[ie],I,b,q);return null}return I=RM(I),h&&h[x_]?h.K(_,I,d(b)?!!b.capture:!!b,q):i3(h,_,I,!1,b,q)}function i3(h,_,I,b,q,ie){if(!_)throw Error("Invalid event type");var Ae=d(q)?!!q.capture:!!q,En=SM(h);if(En||(h[TM]=En=new Sw(h)),(I=En.add(_,I,b,Ae,ie)).proxy)return I;if(b=function Pse(){const _=xse;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)Ase||(q=Ae),void 0===q&&(q=!1),h.addEventListener(_.toString(),b,q);else if(h.attachEvent)h.attachEvent(a3(_.toString()),b);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(b)}return I}function o3(h,_,I,b,q){if(Array.isArray(_)){for(var ie=0;ie<_.length;ie++)o3(h,_[ie],I,b,q);return null}return I=RM(I),h&&h[x_]?h.L(_,I,d(b)?!!b.capture:!!b,q):i3(h,_,I,!0,b,q)}function s3(h,_,I,b,q){if(Array.isArray(_))for(var ie=0;ie<_.length;ie++)s3(h,_[ie],I,b,q);else b=d(b)?!!b.capture:!!b,I=RM(I),h&&h[x_]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=bM(ie=h.g[_],I,b,q))&&(Aw(ie[I]),Array.prototype.splice.call(ie,I,1),0==ie.length&&(delete h.g[_],h.h--))):h&&(h=SM(h))&&(_=h.g[_.toString()],h=-1,_&&(h=bM(_,I,b,q)),(I=-1<h?_[h]:null)&&AM(I))}function AM(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[x_])CM(_.i,h);else{var I=h.type,b=h.proxy;_.removeEventListener?_.removeEventListener(I,b,h.capture):_.detachEvent?_.detachEvent(a3(I),b):_.addListener&&_.removeListener&&_.removeListener(b),(I=SM(_))?(CM(I,h),0==I.h&&(I.src=null,_[TM]=null)):Aw(h)}}}function a3(h){return h in DM?DM[h]:DM[h]="on"+h}function xse(h,_){if(h.da)h=!0;else{_=new P_(_,this);var I=h.listener,b=h.ha||h.src;h.fa&&AM(h),h=I.call(b,_)}return h}function SM(h){return(h=h[TM])instanceof Sw?h:null}var MM="__closure_events_fn_"+(1e9*Math.random()>>>0);function RM(h){return"function"==typeof h?h:(h[MM]||(h[MM]=function(_){return h.handleEvent(_)}),h[MM])}function Ii(){dc.call(this),this.i=new Sw(this),this.M=this,this.F=null}function Oi(h,_){var I,b=h.F;if(b)for(I=[];b;b=b.F)I.push(b);if(h=h.M,b=_.type||_,"string"==typeof _)_=new vi(_,h);else if(_ instanceof vi)_.target=_.target||h;else{var q=_;j(_=new vi(b,h),q)}if(q=!0,I)for(var ie=I.length-1;0<=ie;ie--){var Ae=_.g=I[ie];q=Mw(Ae,b,!0,_)&&q}if(q=Mw(Ae=_.g=h,b,!0,_)&&q,q=Mw(Ae,b,!1,_)&&q,I)for(ie=0;ie<I.length;ie++)q=Mw(Ae=_.g=I[ie],b,!1,_)&&q}function Mw(h,_,I,b){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var q=!0,ie=0;ie<_.length;++ie){var Ae=_[ie];if(Ae&&!Ae.da&&Ae.capture==I){var En=Ae.listener,ti=Ae.ha||Ae.src;Ae.fa&&CM(h.i,Ae),q=!1!==En.call(ti,b)&&q}}return q&&!b.defaultPrevented}function u3(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function c3(h){h.g=u3(()=>{h.g=null,h.i&&(h.i=!1,c3(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}C(Ii,dc),Ii.prototype[x_]=!0,Ii.prototype.removeEventListener=function(h,_,I,b){s3(this,h,_,I,b)},Ii.prototype.N=function(){if(Ii.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],b=0;b<I.length;b++)Aw(I[b]);delete h.g[_],h.h--}}this.F=null},Ii.prototype.K=function(h,_,I,b){return this.i.add(String(h),_,!1,I,b)},Ii.prototype.L=function(h,_,I,b){return this.i.add(String(h),_,!0,I,b)};class Nse extends dc{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:c3(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function N_(h){dc.call(this),this.h=h,this.g={}}C(N_,dc);var l3=[];function d3(h){xe(h.g,function(_,I){this.g.hasOwnProperty(I)&&AM(_)},h),h.g={}}N_.prototype.N=function(){N_.aa.N.call(this),d3(this)},N_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var PM=a.JSON.stringify,Ose=a.JSON.parse,kse=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function xM(){}function f3(){}xM.prototype.h=null;var O_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function NM(){vi.call(this,"d")}function OM(){vi.call(this,"c")}C(NM,vi),C(OM,vi);var jl={},p3=null;function Rw(){return p3=p3||new Ii}function g3(h){vi.call(this,jl.La,h)}function k_(h){const _=Rw();Oi(_,new g3(_))}function m3(h,_){vi.call(this,jl.STAT_EVENT,h),this.stat=_}function ki(h){const _=Rw();Oi(_,new m3(_,h))}function _3(h,_){vi.call(this,jl.Ma,h),this.size=_}function F_(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function V_(){this.g=!0}function qf(h,_,I,b){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Use(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var b=I[h];if(!(2>b.length)){var q=b[1];if(Array.isArray(q)&&!(1>q.length)){var ie=q[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var Ae=1;Ae<q.length;Ae++)q[Ae]=""}}}return PM(I)}catch{return _}}(h,I)+(b?" "+b:"")})}jl.La="serverreachability",C(g3,vi),jl.STAT_EVENT="statevent",C(m3,vi),jl.Ma="timingevent",C(_3,vi),V_.prototype.xa=function(){this.g=!1},V_.prototype.info=function(){};var kM,Pw={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},y3={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function xw(){}function hc(h,_,I,b){this.j=h,this.i=_,this.l=I,this.R=b||1,this.U=new N_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new v3}function v3(){this.i=null,this.g="",this.h=!1}C(xw,xM),xw.prototype.g=function(){return new XMLHttpRequest},xw.prototype.i=function(){return{}},kM=new xw;var I3={},FM={};function VM(h,_,I){h.L=1,h.v=Fw(Xa(_)),h.m=I,h.P=!0,E3(h,null)}function E3(h,_){h.F=Date.now(),Nw(h),h.A=Xa(h.v);var I=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),k3(I.i,"t",b),h.C=0,I=h.j.J,h.h=new v3,h.g=X3(h.j,I?_:null,!h.m),0<h.O&&(h.M=new Nse(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,b=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(l3[0]=q.toString()),q=l3);for(var ie=0;ie<q.length;ie++){var Ae=r3(I,q[ie],b||_.handleEvent,!1,_.h||_);if(!Ae)break;_.g[Ae.key]=Ae}_=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),k_(),function Fse(h,_,I,b,q,ie){h.info(function(){if(h.g)if(ie)for(var Ae="",En=ie.split("&"),ti=0;ti<En.length;ti++){var Yt=En[ti].split("=");if(1<Yt.length){var Ei=Yt[0];Yt=Yt[1];var wi=Ei.split("_");Ae=2<=wi.length&&"type"==wi[1]?Ae+(Ei+"=")+Yt+"&":Ae+(Ei+"=redacted&")}}else Ae=null;else Ae=ie;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+_+"\n"+I+"\n"+Ae})}(h.i,h.u,h.A,h.l,h.R,h.m)}function w3(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Bse(h,_){var I=h.C,b=_.indexOf("\n",I);return-1==b?FM:(I=Number(_.substring(I,b)),isNaN(I)?I3:(b+=1)+I>_.length?FM:(_=_.slice(b,b+I),h.C=b+I,_))}function Nw(h){h.S=Date.now()+h.I,C3(h,h.I)}function C3(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=F_(y(h.ba,h),_)}function LM(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function L_(h){0==h.j.G||h.J||Q3(h.j,h)}function $l(h){LM(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,d3(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function UM(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||BM(I.h,h)))if(!h.K&&BM(I.h,h)&&3==I.G){try{var b=I.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&3==b.length){var q=b;if(0==q[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;jw(I),Uw(I)}HM(I),ki(18)}}else I.za=q[1],0<I.za-I.T&&37500>q[2]&&I.F&&0==I.v&&!I.C&&(I.C=F_(y(I.Za,I),6e3));if(1>=D3(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Hl(I,11)}else if((h.K||I.g==h)&&jw(I),!k(_))for(q=I.Da.g.parse(_),_=0;_<q.length;_++){let Yt=q[_];if(I.T=Yt[0],Yt=Yt[1],2==I.G)if("c"==Yt[0]){I.K=Yt[1],I.ia=Yt[2];const Ei=Yt[3];null!=Ei&&(I.la=Ei,I.j.info("VER="+I.la));const wi=Yt[4];null!=wi&&(I.Aa=wi,I.j.info("SVER="+I.Aa));const Kf=Yt[5];null!=Kf&&"number"==typeof Kf&&0<Kf&&(I.L=b=1.5*Kf,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const gs=h.g;if(gs){const zw=gs.g?gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zw){var ie=b.h;ie.g||-1==zw.indexOf("spdy")&&-1==zw.indexOf("quic")&&-1==zw.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(jM(ie,ie.h),ie.h=null))}if(b.D){const GM=gs.g?gs.g.getResponseHeader("X-HTTP-Session-Id"):null;GM&&(b.ya=GM,Ln(b.I,b.D,GM))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ae=h;if((b=I).qa=J3(b,b.J?b.ia:null,b.W),Ae.K){A3(b.h,Ae);var En=Ae,ti=b.L;ti&&(En.I=ti),En.B&&(LM(En),Nw(En)),b.g=Ae}else W3(b);0<I.i.length&&Bw(I)}else"stop"!=Yt[0]&&"close"!=Yt[0]||Hl(I,7);else 3==I.G&&("stop"==Yt[0]||"close"==Yt[0]?"stop"==Yt[0]?Hl(I,7):zM(I):"noop"!=Yt[0]&&I.l&&I.l.ta(Yt),I.v=0)}k_()}catch{}}hc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==eu(h)?_.j():this.Y(h)},hc.prototype.Y=function(h){try{if(h==this.g)e:{const wi=eu(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>wi)&&(3!=wi||this.g&&(this.h.h||this.g.oa()||$3(this.g)))){this.J||4!=wi||7==_||k_(),LM(this);var I=this.g.Z();this.X=I;t:if(w3(this)){var b=$3(this.g);h="";var q=b.length,ie=4==eu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$l(this),L_(this);var Ae="";break t}this.h.i=new a.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,h+=this.h.i.decode(b[_],{stream:!(ie&&_==q-1)});b.length=0,this.h.g+=h,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=200==I,function Vse(h,_,I,b,q,ie,Ae){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+_+"\n"+I+"\n"+ie+" "+Ae})}(this.i,this.u,this.A,this.l,this.R,wi,I),this.o){if(this.T&&!this.K){t:{if(this.g){var En,ti=this.g;if((En=ti.g?ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(En)){var Yt=En;break t}}Yt=null}if(!(I=Yt)){this.o=!1,this.s=3,ki(12),$l(this),L_(this);break e}qf(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,UM(this,I)}if(this.P){let gs;for(I=!0;!this.J&&this.C<Ae.length;){if(gs=Bse(this,Ae),gs==FM){4==wi&&(this.s=4,ki(14),I=!1),qf(this.i,this.l,null,"[Incomplete Response]");break}if(gs==I3){this.s=4,ki(15),qf(this.i,this.l,Ae,"[Invalid Chunk]"),I=!1;break}qf(this.i,this.l,gs,null),UM(this,gs)}if(w3(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=wi||0!=Ae.length||this.h.h||(this.s=1,ki(16),I=!1),this.o=this.o&&I,I){if(0<Ae.length&&!this.W){this.W=!0;var Ei=this.j;Ei.g==this&&Ei.ba&&!Ei.M&&(Ei.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),qM(Ei),Ei.M=!0,ki(11))}}else qf(this.i,this.l,Ae,"[Invalid Chunked Response]"),$l(this),L_(this)}else qf(this.i,this.l,Ae,null),UM(this,Ae);4==wi&&$l(this),this.o&&!this.J&&(4==wi?Q3(this.j,this):(this.o=!1,Nw(this)))}else(function rae(h){const _={};h=(h.g&&2<=eu(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let b=0;b<h.length;b++){if(k(h[b]))continue;var I=H(h[b]);const q=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const ie=_[q]||[];_[q]=ie,ie.push(I)}!function V(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(b){return b.join(", ")})})(this.g),400==I&&0<Ae.indexOf("Unknown SID")?(this.s=3,ki(12)):(this.s=0,ki(13)),$l(this),L_(this)}}}catch{}},hc.prototype.cancel=function(){this.J=!0,$l(this)},hc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Lse(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(k_(),ki(17)),$l(this),this.s=2,L_(this)):C3(this,this.S-h)};var jse=class{constructor(h,_){this.g=h,this.map=_}};function b3(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function T3(h){return!!h.h||!!h.g&&h.g.size>=h.j}function D3(h){return h.h?1:h.g?h.g.size:0}function BM(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function jM(h,_){h.g?h.g.add(_):h.h=_}function A3(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function S3(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return T(h.i)}function M3(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function zse(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const b in h)_[I++]=b;return _}}}(h),b=function $se(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,b=0;b<I;b++)_.push(h[b]);return _}for(b in _=[],I=0,h)_[I++]=h[b];return _}(h),q=b.length,ie=0;ie<q;ie++)_.call(void 0,b[ie],I&&I[ie],h)}b3.prototype.cancel=function(){if(this.i=S3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var R3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zl){this.h=h.h,Ow(this,h.j),this.o=h.o,this.g=h.g,kw(this,h.s),this.l=h.l;var _=h.i,I=new j_;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),P3(this,I),this.m=h.m}else h&&(_=String(h).match(R3))?(this.h=!1,Ow(this,_[1]||"",!0),this.o=U_(_[2]||""),this.g=U_(_[3]||"",!0),kw(this,_[4]),this.l=U_(_[5]||"",!0),P3(this,_[6]||"",!0),this.m=U_(_[7]||"")):(this.h=!1,this.i=new j_(null,this.h))}function Xa(h){return new zl(h)}function Ow(h,_,I){h.j=I?U_(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function kw(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function P3(h,_,I){_ instanceof j_?(h.i=_,function Yse(h,_){_&&!h.j&&(fc(h),h.i=null,h.g.forEach(function(I,b){var q=b.toLowerCase();b!=q&&(N3(this,b),k3(this,q,I))},h)),h.j=_}(h.i,h.h)):(I||(_=B_(_,Kse)),h.i=new j_(_,h.h))}function Ln(h,_,I){h.i.set(_,I)}function Fw(h){return Ln(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function U_(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function B_(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,qse),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qse(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}zl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(B_(_,x3,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(B_(_,x3,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(B_(I,"/"==I.charAt(0)?Wse:Gse,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",B_(I,Qse)),h.join("")};var x3=/[#\/\?@]/g,Gse=/[#\?:]/g,Wse=/[#\?]/g,Kse=/[#\?@]/g,Qse=/#/g;function j_(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function fc(h){h.g||(h.g=new Map,h.h=0,h.i&&function Hse(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var b=h[I].indexOf("="),q=null;if(0<=b){var ie=h[I].substring(0,b);q=h[I].substring(b+1)}else ie=h[I];_(ie,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function N3(h,_){fc(h),_=Gf(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function O3(h,_){return fc(h),_=Gf(h,_),h.g.has(_)}function k3(h,_,I){N3(h,_),0<I.length&&(h.i=null,h.g.set(Gf(h,_),T(I)),h.h+=I.length)}function Gf(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function pc(h,_,I,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(I)}catch{}}function Xse(){this.g=new kse}function eae(h,_,I){const b=I||"";try{M3(h,function(q,ie){let Ae=q;d(q)&&(Ae=PM(q)),_.push(b+ie+"="+encodeURIComponent(Ae))})}catch(q){throw _.push(b+"type="+encodeURIComponent("_badmap")),q}}function $_(h){this.l=h.Ub||null,this.j=h.eb||!1}function Vw(h,_){Ii.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function F3(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function z_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,H_(h)}function H_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function V3(h){let _="";return xe(h,function(I,b){_+=b,_+=":",_+=I,_+="\r\n"}),_}function $M(h,_,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=V3(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):Ln(h,_,I))}function Xn(h){Ii.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=j_.prototype).add=function(h,_){fc(this),this.i=null,h=Gf(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},t.forEach=function(h,_){fc(this),this.g.forEach(function(I,b){I.forEach(function(q){h.call(_,q,b,this)},this)},this)},t.na=function(){fc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let b=0;b<_.length;b++){const q=h[b];for(let ie=0;ie<q.length;ie++)I.push(_[b])}return I},t.V=function(h){fc(this);let _=[];if("string"==typeof h)O3(this,h)&&(_=_.concat(this.g.get(Gf(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},t.set=function(h,_){return fc(this),this.i=null,O3(this,h=Gf(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var b=_[I];const ie=encodeURIComponent(String(b)),Ae=this.V(b);for(b=0;b<Ae.length;b++){var q=ie;""!==Ae[b]&&(q+="="+encodeURIComponent(String(Ae[b]))),h.push(q)}}return this.i=h.join("&")},C($_,xM),$_.prototype.g=function(){return new Vw(this.l,this.j)},$_.prototype.i=function(h){return function(){return h}}({}),C(Vw,Ii),(t=Vw.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,H_(this)},t.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,z_(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,H_(this)),this.g&&(this.readyState=3,H_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;F3(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?z_(this):H_(this),3==this.readyState&&F3(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,z_(this))},t.Qa=function(h){this.g&&(this.response=h,z_(this))},t.ga=function(){this.g&&z_(this)},t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(Vw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),C(Xn,Ii);var tae=/^https?$/i,nae=["POST","PUT"];function L3(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,U3(h),Lw(h)}function U3(h){h.A||(h.A=!0,Oi(h,"complete"),Oi(h,"error"))}function B3(h){if(h.h&&typeof s<"u"&&(!h.v[1]||4!=eu(h)||2!=h.Z()))if(h.u&&4==eu(h))u3(h.Ea,0,h);else if(Oi(h,"readystatechange"),4==eu(h)){h.h=!1;try{const Ae=h.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var b;if(b=0===Ae){var q=String(h.D).match(R3)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),b=!tae.test(q?q.toLowerCase():"")}I=b}if(I)Oi(h,"complete"),Oi(h,"success");else{h.m=6;try{var ie=2<eu(h)?h.g.statusText:""}catch{ie=""}h.l=ie+" ["+h.Z()+"]",U3(h)}}finally{Lw(h)}}}function Lw(h,_){if(h.g){j3(h);const I=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Oi(h,"ready");try{I.onreadystatechange=b}catch{}}}function j3(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function eu(h){return h.g?h.g.readyState:0}function $3(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function q_(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function z3(h){this.Aa=0,this.i=[],this.j=new V_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=q_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=q_("baseRetryDelayMs",5e3,h),this.cb=q_("retryDelaySeedMs",1e4,h),this.Wa=q_("forwardChannelMaxRetries",2,h),this.wa=q_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new b3(h&&h.concurrentRequestLimit),this.Da=new Xse,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zM(h){if(H3(h),3==h.G){var _=h.U++,I=Xa(h.I);if(Ln(I,"SID",h.K),Ln(I,"RID",_),Ln(I,"TYPE","terminate"),G_(h,I),(_=new hc(h,h.j,_)).L=2,_.v=Fw(Xa(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=X3(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Nw(_)}Z3(h)}function Uw(h){h.g&&(qM(h),h.g.cancel(),h.g=null)}function H3(h){Uw(h),h.u&&(a.clearTimeout(h.u),h.u=null),jw(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function Bw(h){if(!T3(h.h)&&!h.s){h.s=!0;var _=h.Ga;M_||n3(),R_||(M_(),R_=!0),wM.add(_,h),h.B=0}}function q3(h,_){var I;I=_?_.l:h.U++;const b=Xa(h.I);Ln(b,"SID",h.K),Ln(b,"RID",I),Ln(b,"AID",h.T),G_(h,b),h.m&&h.o&&$M(b,h.m,h.o),I=new hc(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=G3(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),jM(h.h,I),VM(I,b,_)}function G_(h,_){h.H&&xe(h.H,function(I,b){Ln(_,b,I)}),h.l&&M3({},function(I,b){Ln(_,b,I)})}function G3(h,_,I){I=Math.min(h.i.length,I);var b=h.l?y(h.l.Na,h.l,h):null;e:{var q=h.i;let ie=-1;for(;;){const Ae=["count="+I];-1==ie?0<I?(ie=q[0].g,Ae.push("ofs="+ie)):ie=0:Ae.push("ofs="+ie);let En=!0;for(let ti=0;ti<I;ti++){let Yt=q[ti].g;const Ei=q[ti].map;if(Yt-=ie,0>Yt)ie=Math.max(0,q[ti].g-100),En=!1;else try{eae(Ei,Ae,"req"+Yt+"_")}catch{b&&b(Ei)}}if(En){b=Ae.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,b}function W3(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;M_||n3(),R_||(M_(),R_=!0),wM.add(_,h),h.v=0}}function HM(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=F_(y(h.Fa,h),Y3(h,h.v)),h.v++,0))}function qM(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function K3(h){h.g=new hc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Xa(h.qa);Ln(_,"RID","rpc"),Ln(_,"SID",h.K),Ln(_,"AID",h.T),Ln(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ln(_,"TO",h.ja),Ln(_,"TYPE","xmlhttp"),G_(h,_),h.m&&h.o&&$M(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Fw(Xa(_)),I.m=null,I.P=!0,E3(I,h)}function jw(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function Q3(h,_){var I=null;if(h.g==_){jw(h),qM(h),h.g=null;var b=2}else{if(!BM(h.h,_))return;I=_.D,A3(h.h,_),b=1}if(0!=h.G)if(_.o)if(1==b){I=_.m?_.m.length:0,_=Date.now()-_.F;var q=h.B;Oi(b=Rw(),new _3(b,I)),Bw(h)}else W3(h);else if(3==(q=_.s)||0==q&&0<_.X||!(1==b&&function iae(h,_){return!(D3(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=F_(y(h.Ga,h,_),Y3(h,h.B)),h.B++,0)))}(h,_)||2==b&&HM(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),q){case 1:Hl(h,5);break;case 4:Hl(h,10);break;case 3:Hl(h,6);break;default:Hl(h,2)}}function Y3(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function Hl(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),b=h.Xa;const q=!b;b=new zl(b||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ow(b,"https"),Fw(b),q?function Zse(h,_){const I=new V_;if(a.Image){const b=new Image;b.onload=E(pc,I,"TestLoadImage: loaded",!0,_,b),b.onerror=E(pc,I,"TestLoadImage: error",!1,_,b),b.onabort=E(pc,I,"TestLoadImage: abort",!1,_,b),b.ontimeout=E(pc,I,"TestLoadImage: timeout",!1,_,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else _(!1)}(b.toString(),I):function Jse(h,_){new V_;const b=new AbortController,q=setTimeout(()=>{b.abort(),pc(0,0,!1,_)},1e4);fetch(h,{signal:b.signal}).then(ie=>{clearTimeout(q),pc(0,0,!!ie.ok,_)}).catch(()=>{clearTimeout(q),pc(0,0,!1,_)})}(b.toString(),I)}else ki(2);h.G=0,h.l&&h.l.sa(_),Z3(h),H3(h)}function Z3(h){if(h.G=0,h.ka=[],h.l){const _=S3(h.h);(0!=_.length||0!=h.i.length)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.ra()}}function J3(h,_,I){var b=I instanceof zl?Xa(I):new zl(I);if(""!=b.g)_&&(b.g=_+"."+b.g),kw(b,b.s);else{var q=a.location;b=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var ie=new zl(null);b&&Ow(ie,b),_&&(ie.g=_),q&&kw(ie,q),I&&(ie.l=I),b=ie}return _=h.ya,(I=h.D)&&_&&Ln(b,I,_),Ln(b,"VER",h.la),G_(h,b),b}function X3(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Xn(h.Ca&&!h.pa?new $_({eb:I}):h.pa)).Ha(h.J),_}function e4(){}function $w(){}function Ao(h,_){Ii.call(this),this.g=new z3(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!k(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!k(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Wf(this)}function t4(h){NM.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function n4(){OM.call(this),this.status=1}function Wf(h){this.g=h}(t=Xn.prototype).Ha=function(h){this.J=h},t.ea=function(h,_,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kM.g(),this.v=function h3(h){return h.h||(h.h=h.i())}(this.o?this.o:kM),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ie){return void L3(this,ie)}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)I.set(q,b[q]);else{if("function"!=typeof b.keys||"function"!=typeof b.get)throw Error("Unknown input type for opt_headers: "+String(b));for(const ie of b.keys())I.set(ie,b.get(ie))}b=Array.from(I.keys()).find(ie=>"content-type"==ie.toLowerCase()),q=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nae,_,void 0))||b||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ae]of I)this.g.setRequestHeader(ie,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{j3(this),this.u=!0,this.g.send(h),this.u=!1}catch(ie){L3(this,ie)}},t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Oi(this,"complete"),Oi(this,"abort"),Lw(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lw(this,!0)),Xn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?B3(this):this.bb())},t.bb=function(){B3(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<eu(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Ose(_)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=z3.prototype).la=8,t.G=1,t.connect=function(h,_,I,b){ki(0),this.W=h,this.H=_||{},I&&void 0!==b&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.I=J3(this,null,this.W),Bw(this)},t.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new hc(this,this.j,h);let ie=this.o;if(this.S&&(ie?(ie=P(ie),j(ie,this.S)):ie=this.S),null!==this.m||this.O||(q.H=ie,ie=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var b=this.i[I];if(void 0===(b="__data__"in b.map&&"string"==typeof(b=b.map.__data__)?b.length:void 0))break;if(4096<(_+=b)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=G3(this,q,_),Ln(I=Xa(this.I),"RID",h),Ln(I,"CVER",22),this.D&&Ln(I,"X-HTTP-Session-Id",this.D),G_(this,I),ie&&(this.O?_="headers="+encodeURIComponent(String(V3(ie)))+"&"+_:this.m&&$M(I,this.m,ie)),jM(this.h,q),this.Ua&&Ln(I,"TYPE","init"),this.P?(Ln(I,"$req",_),Ln(I,"SID","null"),q.T=!0,VM(q,I,null)):VM(q,I,_),this.G=2}}else 3==this.G&&(h?q3(this,h):0==this.i.length||T3(this.h)||q3(this))},t.Fa=function(){if(this.u=null,K3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=F_(y(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ki(10),Uw(this),K3(this))},t.Za=function(){null!=this.C&&(this.C=null,Uw(this),HM(this),ki(19))},t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ki(2)):(this.j.info("Failed to ping google.com"),ki(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=e4.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},$w.prototype.g=function(h,_){return new Ao(h,_)},C(Ao,Ii),Ao.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ao.prototype.close=function(){zM(this.g)},Ao.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=PM(h),h=I);_.i.push(new jse(_.Ya++,h)),3==_.G&&Bw(_)},Ao.prototype.N=function(){this.g.l=null,delete this.j,zM(this.g),delete this.g,Ao.aa.N.call(this)},C(t4,NM),C(n4,OM),C(Wf,e4),Wf.prototype.ua=function(){Oi(this.g,"a")},Wf.prototype.ta=function(h){Oi(this.g,new t4(h))},Wf.prototype.sa=function(h){Oi(this.g,new n4)},Wf.prototype.ra=function(){Oi(this.g,"b")},$w.prototype.createWebChannel=$w.prototype.g,Ao.prototype.send=Ao.prototype.o,Ao.prototype.open=Ao.prototype.m,Ao.prototype.close=Ao.prototype.close,r2=Ba.createWebChannelTransport=function(){return new $w},n2=Ba.getStatEventTarget=function(){return Rw()},t2=Ba.Event=jl,AD=Ba.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pw.NO_ERROR=0,Pw.TIMEOUT=8,Pw.HTTP_ERROR=6,pE=Ba.ErrorCode=Pw,y3.COMPLETE="complete",e2=Ba.EventType=y3,f3.EventType=O_,O_.OPEN="a",O_.CLOSE="b",O_.ERROR="c",O_.MESSAGE="d",Ii.prototype.listen=Ii.prototype.K,Nm=Ba.WebChannel=f3,Ba.FetchXmlHttpFactory=$_,Xn.prototype.listenOnce=Xn.prototype.L,Xn.prototype.getLastError=Xn.prototype.Ka,Xn.prototype.getLastErrorCode=Xn.prototype.Ba,Xn.prototype.getStatus=Xn.prototype.Z,Xn.prototype.getResponseJson=Xn.prototype.Oa,Xn.prototype.getResponseText=Xn.prototype.oa,Xn.prototype.send=Xn.prototype.ea,Xn.prototype.setWithCredentials=Xn.prototype.Ha,XL=Ba.XhrIo=Xn}).apply(typeof fE<"u"?fE:typeof self<"u"?self:typeof window<"u"?window:{});const i2="@firebase/firestore";class $r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");let ef="10.14.0";const $u=new Qs.Vy("@firebase/firestore");function tf(){return $u.logLevel}function me(t,...e){if($u.logLevel<=Qs.$b.DEBUG){const n=e.map(SD);$u.debug(`Firestore (${ef}): ${t}`,...n)}}function lr(t,...e){if($u.logLevel<=Qs.$b.ERROR){const n=e.map(SD);$u.error(`Firestore (${ef}): ${t}`,...n)}}function bo(t,...e){if($u.logLevel<=Qs.$b.WARN){const n=e.map(SD);$u.warn(`Firestore (${ef}): ${t}`,...n)}}function SD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ve(t="Unexpected state"){const e=`FIRESTORE (${ef}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function je(t,e){t||Ve()}function De(t,e){return t}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends on.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class o2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($r.UNAUTHENTICATED))}shutdown(){}}class kX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FX{constructor(e){this.t=e,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;je(void 0===this.o);let i=this.i;const o=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let s=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable((0,ce.A)(function*(){yield d.promise,yield o(r.currentUser)}))},u=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je("string"==typeof r.accessToken),new o2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(null===e||"string"==typeof e),new $r(e)}}class VX{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$r.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LX{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VX(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){je(void 0===this.o);const r=o=>{null!=o.error&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je("string"==typeof n.token),this.R=n.token,new s2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function BX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class a2{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=BX(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function nf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function u2(t){return t+"\0"}class $n{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $n(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class He{constructor(e){this.timestamp=e}static fromTimestamp(e){return new He(e)}static min(){return new He(new $n(0,0))}static max(){return new He(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Om{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ve(),void 0===r?r=e.length-n:r>e.length-n&&Ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Om.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Om?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Mt extends Om{construct(e,n,r){return new Mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Mt(n)}static emptyPath(){return new Mt([])}}const jX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Om{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return jX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Mt.fromString(e))}static fromName(e){return new Re(Mt.fromString(e).popFirst(5))}static empty(){return new Re(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Mt(e.slice()))}}class rf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function MD(t){return t.fields.find(e=>2===e.kind)}function gl(t){return t.fields.filter(e=>2!==e.kind)}rf.UNKNOWN_ID=-1;class ml{constructor(e,n){this.fieldPath=e,this.kind=n}}class sf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new sf(0,To.min())}}function c2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(1e9===r?new $n(n+1,0):new $n(n,r));return new To(i,Re.empty(),e)}function l2(t){return new To(t.readTime,t.key,-1)}class To{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new To(He.min(),Re.empty(),-1)}static max(){return new To(He.max(),Re.empty(),-1)}}function RD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Re.comparator(t.documentKey,e.documentKey),0!==n?n:st(t.largestBatchId,e.largestBatchId))}const d2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zu(t){return PD.apply(this,arguments)}function PD(){return(PD=(0,ce.A)(function*(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==d2)throw t;me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(p=>{s[d]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,n){return new W((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class gE{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new km(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=xD(r.target.error);this.V.reject(new km(e,i))}}static open(e,n,r,i){try{return new gE(n,e.transaction(i,r))}catch(o){throw new km(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new qX(n)}}class Ys{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Ys.S((0,on.ZQ)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return me("SimpleDb","Removing database:",e),_l(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,on.zW)())return!1;if(Ys.v())return!0;const e=(0,on.ZQ)(),n=Ys.S(e),r=0<n&&n<10,i=f2(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var n=this;return(0,ce.A)(function*(){return n.db||(me("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new km(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ge(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ge(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new km(e,a))},o.onupgradeneeded=s=>{me("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.O(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{me("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.N&&(n.db.onversionchange=r=>n.N(r)),n.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,ce.A)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.M(e);const u=gE.open(o.db,e,s?"readonly":"readwrite",r),d=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),W.reject(p))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,p="FirebaseError"!==d.name&&a<3;if(me("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),o.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function f2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class HX{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _l(this.B.delete())}}class km extends ge{constructor(e,n){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Hu(t){return"IndexedDbTransactionError"===t.name}class qX{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(me("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_l(r)}add(e){return me("SimpleDb","ADD",this.store.name,e,e),_l(this.store.add(e))}get(e){return _l(this.store.get(e)).next(n=>(void 0===n&&(n=null),me("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return me("SimpleDb","DELETE",this.store.name,e),_l(this.store.delete(e))}count(){return me("SimpleDb","COUNT",this.store.name),_l(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new W((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new W((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new W((r,i)=>{n.onerror=o=>{const s=xD(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){const r=[];return new W((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new HX(a),d=n(a.primaryKey,a.value,u);if(d instanceof W){const p=d.catch(m=>(u.done(),W.reject(m)));r.push(p)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>W.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _l(t){return new W((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=xD(r.target.error);n(i)}})}let p2=!1;function xD(t){const e=Ys.S((0,on.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p2||(p2=!0,setTimeout(()=>{throw r},0)),r}}return t}class GX{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var n=this;me("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.A)(function*(){n.task=null;try{me("IndexBackfiller",`Documents written: ${yield n.Z.ee()}`)}catch(r){Hu(r)?me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield zu(r)}yield n.X(6e4)}))}}class WX{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){var n=this;return(0,ce.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.te(r,e))})()}te(e,n){const r=new Set;let i=n,o=!0;return W.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return me("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=l2(o);RD(s,r)>0&&(r=s)}),new To(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Do=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Fm(t){return null==t}function Vm(t){return 0===t&&1/t==-1/0}function g2(t){return"number"==typeof t&&Number.isInteger(t)&&!Vm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function pi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=m2(e)),e=KX(t.get(n),e);return m2(e)}function KX(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function m2(t){return t+"\x01\x01"}function Zs(t){const e=t.length;if(je(e>=2),2===e)return je("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Mt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ve(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ve()}o=s+2}return new Mt(r)}const _2=["userId","batchId"];function mE(t,e){return[t,pi(e)]}function y2(t,e,n){return[t,pi(e),n]}const QX={},YX=["prefixPath","collectionGroup","readTime","documentId"],ZX=["prefixPath","collectionGroup","documentId"],JX=["collectionGroup","readTime","prefixPath","documentId"],XX=["canonicalId","targetId"],eee=["targetId","path"],tee=["path","targetId"],nee=["collectionId","parent"],ree=["indexId","uid"],iee=["uid","sequenceNumber"],oee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],see=["indexId","uid","orderedDocumentKey"],aee=["userId","collectionPath","documentId"],uee=["userId","collectionPath","largestBatchId"],cee=["userId","collectionGroup","largestBatchId"],v2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lee=[...v2,"documentOverlays"],I2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],E2=I2,ND=[...E2,"indexConfiguration","indexState","indexEntries"],dee=ND,hee=[...ND,"globals"];class OD extends h2{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Rr(t,e){const n=De(t);return Ys.F(n._e,e)}function w2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function b2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Mn{constructor(e,n){this.comparator=e,this.root=n||Jr.EMPTY}insert(e,n){return new Mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _E(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _E(this.root,e,this.comparator,!1)}getReverseIterator(){return new _E(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _E(this.root,e,this.comparator,!0)}}class _E{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Jr.RED,this.left=i??Jr.EMPTY,this.right=o??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Jr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T2(this.data.getIterator())}getIteratorFrom(e){return new T2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class T2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function af(t){return t.hasNext()?t.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new gn(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class D2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new D2("Invalid base64 string: "+o):o}}(e);return new Jn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const pee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(t){if(je(!!t),"string"==typeof t){let e=0;const n=pee.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function $a(t){return"string"==typeof t?Jn.fromBase64String(t):Jn.fromUint8Array(t)}function yE(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vE(t){const e=t.mapValue.fields.__previous_value__;return yE(e)?vE(e):e}function Lm(t){const e=ja(t.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class gee{constructor(e,n,r,i,o,s,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Gu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},IE={nullValue:"NULL_VALUE"};function Ku(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yE(t)?4:P2(t)?9007199254740991:CE(t)?10:11:Ve()}function Js(t,e){if(t===e)return!0;const n=Ku(t);if(n!==Ku(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lm(t).isEqual(Lm(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ja(i.timestampValue),a=ja(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,$a(t.bytesValue).isEqual($a(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return zn(i.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return zn(i.integerValue)===zn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=zn(i.doubleValue),a=zn(o.doubleValue);return s===a?Vm(s)===Vm(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return nf(t.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(w2(s)!==w2(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Js(s[u],a[u])))return!1;return!0}(t,e);default:return Ve()}var o}function Um(t,e){return void 0!==(t.values||[]).find(n=>Js(n,e))}function Qu(t,e){if(t===e)return 0;const n=Ku(t),r=Ku(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=zn(o.integerValue||o.doubleValue),u=zn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return A2(t.timestampValue,e.timestampValue);case 4:return A2(Lm(t),Lm(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(o,s){const a=$a(o),u=$a(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){const p=st(a[d],u[d]);if(0!==p)return p}return st(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=st(zn(o.latitude),zn(s.latitude));return 0!==a?a:st(zn(o.longitude),zn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return S2(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,d,p;const E=null===(a=(o.fields||{}).value)||void 0===a?void 0:a.arrayValue,C=null===(u=(s.fields||{}).value)||void 0===u?void 0:u.arrayValue,T=st((null===(d=E?.values)||void 0===d?void 0:d.length)||0,(null===(p=C?.values)||void 0===p?void 0:p.length)||0);return 0!==T?T:S2(E,C)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Wu.mapValue&&s===Wu.mapValue)return 0;if(o===Wu.mapValue)return 1;if(s===Wu.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),d=s.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=st(u[m],p[m]);if(0!==y)return y;const E=Qu(a[u[m]],d[p[m]]);if(0!==E)return E}return st(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Ve()}}function A2(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return st(t,e);const n=ja(t),r=ja(e),i=st(n.seconds,r.seconds);return 0!==i?i:st(n.nanos,r.nanos)}function S2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Qu(n[i],r[i]);if(o)return o}return st(n.length,r.length)}function uf(t){return kD(t)}function kD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ja(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?$a(t.bytesValue).toBase64():"referenceValue"in t?Re.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=kD(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${kD(n.fields[s])}`;return i+"}"}(t.mapValue):Ve()}function yl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FD(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function M2(t){return!!t&&"nullValue"in t}function R2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wE(t){return!!t&&"mapValue"in t}function CE(t){var e,n;return"__vector__"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P2(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}const x2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function mee(t){return"nullValue"in t?IE:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yl(Gu.empty(),Re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?CE(t)?x2:{mapValue:{}}:Ve()}function _ee(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yl(Gu.empty(),Re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?x2:"mapValue"in t?CE(t)?{mapValue:{}}:Wu:Ve()}function N2(t,e){const n=Qu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function O2(t,e){const n=Qu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wE(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jm(n)}setAll(e){let n=kn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=jm(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());wE(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qu(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Xr(jm(this.value))}}function k2(t){const e=[];return qu(t.fields,(n,r)=>{const i=new kn([n]);if(wE(r)){const o=k2(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zi(e)}class Fn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Fn(e,0,He.min(),He.min(),He.min(),Xr.empty(),0)}static newFoundDocument(e,n,r,i){return new Fn(e,1,n,He.min(),r,i,0)}static newNoDocument(e,n){return new Fn(e,2,n,He.min(),He.min(),Xr.empty(),0)}static newUnknownDocument(e,n){return new Fn(e,3,n,He.min(),He.min(),Xr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yu{constructor(e,n){this.position=e,this.inclusive=n}}function F2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Re.comparator(Re.fromName(s.referenceValue),n.key):Qu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function V2(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Js(t.position[n],e.position[n]))return!1;return!0}class $m{constructor(e,n="asc"){this.field=e,this.dir=n}}function yee(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class L2{}class Rt extends L2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new vee(e,n,r):"array-contains"===n?new wee(e,r):"in"===n?new H2(e,r):"not-in"===n?new Cee(e,r):"array-contains-any"===n?new bee(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Iee(e,r):new Eee(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Qu(n,this.value)):null!==n&&Ku(this.value)===Ku(n)&&this.matchesComparison(Qu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends L2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ln(e,n)}matches(e){return cf(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cf(t){return"and"===t.op}function VD(t){return"or"===t.op}function LD(t){return U2(t)&&cf(t)}function U2(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function UD(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+uf(t.value);if(LD(t))return t.filters.map(e=>UD(e)).join(",");{const e=t.filters.map(n=>UD(n)).join(",");return`${t.op}(${e})`}}function B2(t,e){return t instanceof Rt?(r=t,(i=e)instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&Js(r.value,i.value)):t instanceof ln?function(r,i){return i instanceof ln&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&B2(s,i.filters[a]),!0)}(t,e):void Ve();var r,i}function j2(t,e){const n=t.filters.concat(e);return ln.create(n,t.op)}function $2(t){return t instanceof Rt?`${(n=t).field.canonicalString()} ${n.op} ${uf(n.value)}`:t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map($2).join(" ,")+"}"}(t):"Filter";var n}class vee extends Rt{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class Iee extends Rt{constructor(e,n){super(e,"in",n),this.keys=z2(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Eee extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=z2(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function z2(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class wee extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&Um(n.arrayValue,this.value)}}class H2 extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Um(this.value.arrayValue,n)}}class Cee extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Um(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Um(this.value.arrayValue,n)}}class bee extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Um(this.value.arrayValue,r))}}class Tee{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function BD(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Tee(t,e,n,r,i,o,s)}function vl(t){const e=De(t);if(null===e.ue){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>UD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uf(r)).join(",")),e.ue=n}return e.ue}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yee(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!B2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!V2(t.startAt,e.startAt)&&V2(t.endAt,e.endAt)}function bE(t){return Re.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function TE(t,e){return t.filters.filter(n=>n instanceof Rt&&n.field.isEqual(e))}function q2(t,e,n){let r=IE,i=!0;for(const o of TE(t,e)){let s=IE,a=!0;switch(o.op){case"<":case"<=":s=mee(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=IE}N2({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];N2({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function G2(t,e,n){let r=Wu,i=!0;for(const o of TE(t,e)){let s=Wu,a=!0;switch(o.op){case">=":case">":s=_ee(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wu}O2({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];O2({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class za{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function W2(t,e,n,r,i,o,s,a){return new za(t,e,n,r,i,o,s,a)}function lf(t){return new za(t)}function K2(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function jD(t){return null!==t.collectionGroup}function df(t){const e=De(t);if(null===e.ce){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new gn(kn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $m(o,r))}),n.has(kn.keyField().canonicalString())||e.ce.push(new $m(kn.keyField(),r))}return e.ce}function gi(t){const e=De(t);return e.le||(e.le=function Y2(t,e){if("F"===t.limitType)return BD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new $m(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yu(t.startAt.position,t.startAt.inclusive):null;return BD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,df(t))),e.le}function $D(t,e){const n=t.filters.concat([e]);return new za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function DE(t,e,n){return new za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hm(t,e){return zm(gi(t),gi(e))&&t.limitType===e.limitType}function Z2(t){return`${vl(gi(t))}|lt:${t.limitType}`}function hf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$2(i)).join(", ")}]`),Fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uf(i)).join(",")),`Target(${r})`}(gi(t))}; limitType=${t.limitType})`}function qm(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of df(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const d=F2(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,df(r),i)||r.endAt&&!function(s,a,u){const d=F2(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,df(r),i)));var r,i}function J2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function X2(t){return(e,n)=>{let r=!1;for(const i of df(t)){const o=Dee(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Dee(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),d=a.data.field(o);return null!==u&&null!==d?Qu(u,d):Ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qu(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return b2(this.inner)}size(){return this.innerSize}}const Aee=new Mn(Re.comparator);function Ji(){return Aee}const eU=new Mn(Re.comparator);function Gm(...t){let e=eU;for(const n of t)e=e.insert(n.key,n);return e}function tU(t){let e=eU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return Wm()}function nU(){return Wm()}function Wm(){return new Ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const See=new Mn(Re.comparator),Mee=new gn(Re.comparator);function gt(...t){let e=Mee;for(const n of t)e=e.add(n);return e}const Ree=new gn(st);function zD(){return Ree}function HD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vm(e)?"-0":e}}function rU(t){return{integerValue:""+t}}function iU(t,e){return g2(e)?rU(e):HD(t,e)}class AE{constructor(){this._=void 0}}function Pee(t,e,n){return t instanceof ff?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&yE(o)&&(o=vE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Il?sU(t,e):t instanceof El?aU(t,e):function(i,o){const s=oU(i,o),a=uU(s)+uU(i.Pe);return FD(s)&&FD(i.Pe)?rU(a):HD(i.serializer,a)}(t,e)}function xee(t,e,n){return t instanceof Il?sU(t,e):t instanceof El?aU(t,e):n}function oU(t,e){return t instanceof pf?FD(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class ff extends AE{}class Il extends AE{constructor(e){super(),this.elements=e}}function sU(t,e){const n=cU(e);for(const r of t.elements)n.some(i=>Js(i,r))||n.push(r);return{arrayValue:{values:n}}}class El extends AE{constructor(e){super(),this.elements=e}}function aU(t,e){let n=cU(e);for(const r of t.elements)n=n.filter(i=>!Js(i,r));return{arrayValue:{values:n}}}class pf extends AE{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function uU(t){return zn(t.integerValue||t.doubleValue)}function cU(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Km{constructor(e,n){this.field=e,this.transform=n}}class Oee{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function SE(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ME{}function lU(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new mf(t.key,Hn.none()):new gf(t.key,t.data,Hn.none());{const n=t.data,r=Xr.empty();let i=new gn(kn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new qa(t.key,r,new Zi(i.toArray()),Hn.none())}}function kee(t,e,n){t instanceof gf?function(i,o,s){const a=i.value.clone(),u=fU(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qa?function(i,o,s){if(!SE(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=fU(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(hU(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Qm(t,e,n,r){return t instanceof gf?function(o,s,a,u){if(!SE(o.precondition,s))return a;const d=o.value.clone(),p=pU(o.fieldTransforms,u,s);return d.setAll(p),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qa?function(o,s,a,u){if(!SE(o.precondition,s))return a;const d=pU(o.fieldTransforms,u,s),p=s.data;return p.setAll(hU(o)),p.setAll(d),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):(a=n,SE(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Fee(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=oU(r.transform,i||null);null!=o&&(null===n&&(n=Xr.empty()),n.set(r.field,o))}return n||null}function dU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&nf(r,i,(o,s)=>function Nee(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Il&&i instanceof Il||r instanceof El&&i instanceof El?nf(r.elements,i.elements,Js):r instanceof pf&&i instanceof pf?Js(r.Pe,i.Pe):r instanceof ff&&i instanceof ff);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class gf extends ME{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qa extends ME{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fU(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,xee(s,a,n[i]))}return r}function pU(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Pee(o,s,e))}return r}class mf extends ME{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qD extends ME{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&kee(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nU();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=lU(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(He.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gt())}isEqual(e){return this.batchId===e.batchId&&nf(this.mutations,e.mutations,(n,r)=>dU(n,r))&&nf(this.baseMutations,e.baseMutations,(n,r)=>dU(n,r))}}class WD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return See}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new WD(e,n,r,i)}}class KD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vee{constructor(e,n){this.count=e,this.unchangedNames=n}}var vr,$t;function mU(t){switch(t){default:return Ve();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function _U(t){if(void 0===t)return lr("GRPC error has no .code"),ee.UNKNOWN;switch(t){case vr.OK:return ee.OK;case vr.CANCELLED:return ee.CANCELLED;case vr.UNKNOWN:return ee.UNKNOWN;case vr.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case vr.INTERNAL:return ee.INTERNAL;case vr.UNAVAILABLE:return ee.UNAVAILABLE;case vr.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case vr.NOT_FOUND:return ee.NOT_FOUND;case vr.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case vr.ABORTED:return ee.ABORTED;case vr.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case vr.DATA_LOSS:return ee.DATA_LOSS;default:return Ve()}}($t=vr||(vr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";function yU(){return new TextEncoder}const Lee=new pl([4294967295,4294967295],0);function vU(t){const e=yU().encode(t),n=new JL;return n.update(e),new Uint8Array(n.digest())}function IU(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pl([n,r],0),new pl([i,o],0)]}class QD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ym(`Invalid padding: ${n}`);if(r<0)throw new Ym(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ym(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ym(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=pl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(pl.fromNumber(r)));return 1===i.compare(Lee)&&(i=new pl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const n=vU(e),[r,i]=IU(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new QD(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const n=vU(e),[r,i]=IU(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zm{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zm(He.min(),i,new Mn(st),Ji(),gt())}}class Jm{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jm(r,n,gt(),gt(),gt())}}class PE{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class EU{constructor(e,n){this.targetId=e,this.me=n}}class wU{constructor(e,n,r=Jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CU{constructor(){this.fe=0,this.ge=TU(),this.pe=Jn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=gt(),n=gt(),r=gt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ve()}}),new Jm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=TU()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Uee{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ji(),this.qe=bU(),this.Qe=new Mn(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(bE(o))if(0===r){const s=new Re(o.path);this.Ue(n,s,Fn.newNoDocument(s,He.min()))}else je(1===r);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(n),this.Qe=this.Qe.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=$a(r).toUint8Array()}catch(u){if(u instanceof D2)return bo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QD(s,i,o)}catch(u){return bo(u instanceof Ym?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&bE(a.target)){const u=new Re(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,Fn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=gt();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Zm(e,n,this.Qe,this.ke,r);return this.ke=Ji(),this.qe=bU(),this.Qe=new Mn(st),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new CU,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gn(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=null!==this.Je(e);return n||me("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new CU),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bU(){return new Mn(Re.comparator)}function TU(){return new Mn(Re.comparator)}const Bee={asc:"ASCENDING",desc:"DESCENDING"},jee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$ee={and:"AND",or:"OR"};class zee{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YD(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function _f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hee(t,e){return _f(t,e.toTimestamp())}function dr(t){return je(!!t),He.fromTimestamp(function(n){const r=ja(n);return new $n(r.seconds,r.nanos)}(t))}function ZD(t,e){return JD(t,e).canonicalString()}function JD(t,e){const n=(i=t,new Mt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function AU(t){const e=Mt.fromString(t);return je(LU(e)),e}function Xm(t,e){return ZD(t.databaseId,e.path)}function ea(t,e){const n=AU(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(RU(n))}function SU(t,e){return ZD(t.databaseId,e)}function MU(t){const e=AU(t);return 4===e.length?Mt.emptyPath():RU(e)}function XD(t){return new Mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RU(t){return je(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function PU(t,e,n){return{name:Xm(t,e),fields:n.value.mapValue.fields}}function xU(t,e,n){const r=ea(t,e.name),i=dr(e.updateTime),o=e.createTime?dr(e.createTime):He.min(),s=new Xr({mapValue:{fields:e.fields}}),a=Fn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function e_(t,e){let n;if(e instanceof gf)n={update:PU(t,e.key,e.value)};else if(e instanceof mf)n={delete:Xm(t,e.key)};else if(e instanceof qa)n={update:PU(t,e.key,e.data),updateMask:Jee(e.fieldMask)};else{if(!(e instanceof qD))return Ve();n={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ff)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Il)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof El)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pf)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Ve()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Hee(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ve()),n;var o}function eA(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Hn.updateTime(dr(o.updateTime)):void 0!==o.exists?Hn.exists(o.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(je("REQUEST_TIME"===a.setToServerValue),u=new ff):"appendMissingElements"in a?u=new Il(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new El(a.removeAllFromArray.values||[]):"increment"in a?u=new pf(s,a.increment):Ve();const d=kn.fromServerFormat(a.fieldPath);return new Km(d,u)}(t,i)):[];var o;if(e.update){const i=ea(t,e.update.name),o=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Zi((e.updateMask.fieldPaths||[]).map(p=>kn.fromServerFormat(p)));return new qa(i,o,s,n,r)}return new gf(i,o,n,r)}if(e.delete){const i=ea(t,e.delete);return new mf(i,n)}if(e.verify){const i=ea(t,e.verify);return new qD(i,n)}return Ve()}function NU(t,e){return{documents:[SU(t,e.path)]}}function xE(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SU(t,i);const o=function(d){if(0!==d.length)return VU(ln.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(0!==d.length)return d.map(p=>{return{field:Zu((y=p).field),direction:Qee(y.dir)};var y})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=YD(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i};var d}function kU(t){let e=MU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(m){const y=FU(m);return y instanceof ln&&LD(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(y=>{return new $m(yf((C=y).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;n.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Fm(y)?null:y}(n.limit));let u=null;var m;n.startAt&&(u=new Yu((m=n.startAt).values||[],!!m.before));let d=null;return n.endAt&&(d=function(m){return new Yu(m.values||[],!m.before)}(n.endAt)),W2(e,i,s,o,a,"F",u,d)}function FU(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yf(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yf(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yf(n.unaryFilter.field);return Rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yf(n.unaryFilter.field);return Rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(t):void 0!==t.fieldFilter?Rt.create(yf((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return ln.create(n.compositeFilter.filters.map(r=>FU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve()}}(n.compositeFilter.op))}(t):Ve();var n}function Qee(t){return Bee[t]}function Yee(t){return jee[t]}function Zee(t){return $ee[t]}function Zu(t){return{fieldPath:t.canonicalString()}}function yf(t){return kn.fromServerFormat(t.fieldPath)}function VU(t){return t instanceof Rt?function(n){if("=="===n.op){if(R2(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NAN"}};if(M2(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(R2(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NOT_NAN"}};if(M2(n.value))return{unaryFilter:{field:Zu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(n.field),op:Yee(n.op),value:n.value}}}(t):t instanceof ln?function(n){const r=n.getFilters().map(i=>VU(i));return 1===r.length?r[0]:{compositeFilter:{op:Zee(n.op),filters:r}}}(t):Ve()}function Jee(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LU(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ga{constructor(e,n,r,i,o=He.min(),s=He.min(),a=Jn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UU{constructor(e){this.ct=e}}function BU(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:NE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Xm(o=t.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:_f(o,s.version.toTimestamp()),createTime:_f(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:wl(e.version)};else{if(!e.isUnknownDocument())return Ve();r.unknownDocument={path:n.path.toArray(),version:wl(e.version)}}var o,s;return r}function NE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cl(t){const e=new $n(t.seconds,t.nanoseconds);return He.fromTimestamp(e)}function bl(t,e){const n=(e.baseMutations||[]).map(o=>eA(t.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>eA(t.ct,o)),i=$n.fromMillis(e.localWriteTimeMs);return new GD(e.batchId,i,n,r)}function t_(t){const e=Cl(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Cl(t.lastLimboFreeSnapshotVersion):He.min();let r;return r=void 0!==t.query.documents?(je(1===(o=t.query).documents.length),gi(lf(MU(o.documents[0])))):function(o){return gi(kU(o))}(t.query),new Ga(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Jn.fromBase64String(t.resumeToken));var o}function jU(t,e){const n=wl(e.snapshotVersion),r=wl(e.lastLimboFreeSnapshotVersion);let i;i=bE(e.target)?NU(t.ct,e.target):xE(t.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vl(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tA(t){const e=kU({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?DE(e,e.limit,"L"):e}function nA(t,e){return new KD(e.largestBatchId,eA(t.ct,e.overlayMutation))}function $U(t,e){const n=e.path.lastSegment();return[t,pi(e.path.popLast()),n]}function zU(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:wl(r.readTime),documentKey:pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ete{getBundleMetadata(e,n){return HU(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Cl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return HU(e).put({bundleId:(i=n).id,createTime:wl(dr(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return qU(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:tA(o.bundledQuery),readTime:Cl(o.readTime)};var o})}saveNamedQuery(e,n){return qU(e).put({name:(i=n).name,readTime:wl(dr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function HU(t){return Rr(t,"bundles")}function qU(t){return Rr(t,"namedQueries")}class OE{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new OE(e,n.uid||"")}getOverlay(e,n){return n_(e).get($U(this.userId,n)).next(r=>r?nA(this.serializer,r):null)}getOverlays(e,n){const r=Xs();return W.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new KD(n,s);i.push(this.ht(e,a))}),W.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(pi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(n_(e).j("collectionPathOverlayIndex",a))}),W.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Xs(),o=pi(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return n_(e).U("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const d=nA(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Xs();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return n_(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,p)=>{const m=nA(this.serializer,d);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):p.done()}).next(()=>o)}ht(e,n){return n_(e).put(function(i,o,s){const[a,u,d]=$U(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:d,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:e_(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function n_(t){return Rr(t,"documentOverlays")}class tte{Pt(e){return Rr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n?.value;return r?Jn.fromUint8Array(r):Jn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Tl{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Vm(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),"string"==typeof r&&(r=ja(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt($a(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?P2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):CE(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ve()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const o=e.fields||{};this.dt(n,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(n,15),n.At(zn(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Re.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}function nte(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function GU(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=nte(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Tl.vt=new Tl;class rte{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=GU(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=GU(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;0===n?(this.Gt(0),this.Gt(255)):255===n?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ite{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class ote{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class r_{constructor(){this.jt=new rte,this.Ht=new ite(this.jt),this.Jt=new ote(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Dl{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Dl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ju(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=WU(t.arrayValue,e.arrayValue),0!==n?n:(n=WU(t.directionalValue,e.directionalValue),0!==n?n:Re.comparator(t.documentKey,e.documentKey)))}function WU(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class KU{constructor(e){this.Xt=new gn((n,r)=>kn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(je(e.collectionGroup===this.collectionId),this.nn)return!1;const n=MD(e);if(void 0!==n&&!this.sn(n))return!1;const r=gl(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.en.length||!this._n(this.en[s++],r[o]))return!1;return!0}an(){if(this.nn)return null;let e=new gn(kn.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new ml(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ml(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ml(r.field,"asc"===r.dir?0:1)));return new rf(rf.UNKNOWN_ID,this.collectionId,n,sf.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function QU(t){var e,n;if(je(t instanceof Rt||t instanceof ln),t instanceof Rt){if(t instanceof H2){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Rt.create(t.field,"==",o)))||[];return ln.create(i,"or")}return t}const r=t.filters.map(i=>QU(i));return ln.create(r,t.op)}function ste(t){if(0===t.getFilters().length)return[];const e=oA(QU(t));return je(YU(e)),rA(e)||iA(e)?[e]:e.getFilters()}function rA(t){return t instanceof Rt}function iA(t){return t instanceof ln&&LD(t)}function YU(t){return rA(t)||iA(t)||function(n){if(n instanceof ln&&VD(n)){for(const r of n.getFilters())if(!rA(r)&&!iA(r))return!1;return!0}return!1}(t)}function oA(t){if(je(t instanceof Rt||t instanceof ln),t instanceof Rt)return t;if(1===t.filters.length)return oA(t.filters[0]);const e=t.filters.map(r=>oA(r));let n=ln.create(e,t.op);return n=kE(n),YU(n)?n:(je(n instanceof ln),je(cf(n)),je(n.filters.length>1),n.filters.reduce((r,i)=>sA(r,i)))}function sA(t,e){let n;return je(t instanceof Rt||t instanceof ln),je(e instanceof Rt||e instanceof ln),n=t instanceof Rt?e instanceof Rt?ln.create([t,e],"and"):ZU(t,e):e instanceof Rt?ZU(e,t):function(i,o){if(je(i.filters.length>0&&o.filters.length>0),cf(i)&&cf(o))return j2(i,o.getFilters());const s=VD(i)?i:o,a=VD(i)?o:i,u=s.filters.map(d=>sA(d,a));return ln.create(u,"or")}(t,e),kE(n)}function ZU(t,e){if(cf(e))return j2(e,t.getFilters());{const n=e.filters.map(r=>sA(t,r));return ln.create(n,"or")}}function kE(t){if(je(t instanceof Rt||t instanceof ln),t instanceof Rt)return t;const e=t.getFilters();if(1===e.length)return kE(e[0]);if(U2(t))return t;const n=e.map(i=>kE(i)),r=[];return n.forEach(i=>{i instanceof Rt?r.push(i):i instanceof ln&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ln.create(r,t.op)}class ate{constructor(){this.un=new aA}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(To.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(To.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class aA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gn(Mt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gn(Mt.comparator)).toArray()}}const FE=new Uint8Array(0);class ute{constructor(e,n){this.databaseId=n,this.cn=new aA,this.ln=new Ha(r=>vl(r),(r,i)=>zm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const o={collectionId:r,parent:pi(i)};return JU(e).put(o)}return W.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[u2(n),""],!1,!0);return JU(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Zs(s.parent))}return r})}addFieldIndex(e,n){const r=i_(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=If(e);return o.next(a=>{s.put(zU(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=i_(e),i=If(e),o=vf(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=i_(e),r=vf(e),i=If(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return W.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new KU(r).an();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=vf(e);let i=!0;const o=new Map;return W.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=gt();const a=[];return W.forEach(o,(u,d)=>{var K;me("IndexedDbIndexManager",`Using index ${K=u,`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`} to execute ${vl(n)}`);const p=function(K,fe){const Te=MD(fe);if(void 0===Te)return null;for(const xe of TE(K,Te.fieldPath))switch(xe.op){case"array-contains-any":return xe.value.arrayValue.values||[];case"array-contains":return[xe.value]}return null}(d,u),m=function(K,fe){const Te=new Map;for(const xe of gl(fe))for(const V of TE(K,xe.fieldPath))switch(V.op){case"==":case"in":Te.set(xe.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return Te.set(xe.fieldPath.canonicalString(),V.value),Array.from(Te.values())}return null}(d,u),y=function(K,fe){const Te=[];let xe=!0;for(const V of gl(fe)){const P=0===V.kind?q2(K,V.fieldPath,K.startAt):G2(K,V.fieldPath,K.startAt);Te.push(P.value),xe&&(xe=P.inclusive)}return new Yu(Te,xe)}(d,u),E=function(K,fe){const Te=[];let xe=!0;for(const V of gl(fe)){const P=0===V.kind?G2(K,V.fieldPath,K.endAt):q2(K,V.fieldPath,K.endAt);Te.push(P.value),xe&&(xe=P.inclusive)}return new Yu(Te,xe)}(d,u),C=this.In(u,d,y),T=this.In(u,d,E),D=this.Tn(u,d,m),L=this.En(u.indexId,p,C,y.inclusive,T,E.inclusive,D);return W.forEach(L,k=>r.G(k,n.limit).next(K=>{K.forEach(fe=>{const Te=Re.fromSegments(fe.documentKey);s.has(Te)||(s=s.add(Te),a.push(Te))})}))}).next(()=>a)}return W.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(n=0===e.filters.length?[e]:ste(ln.create(e.filters,"and")).map(r=>BD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),d=u/(null!=n?n.length:1),p=[];for(let m=0;m<u;++m){const y=n?this.dn(n[m/d]):FE,E=this.An(e,y,r[m%d],i),C=this.Rn(e,y,o[m%d],s),T=a.map(D=>this.An(e,y,D,!0));p.push(...this.createRange(E,C,T))}return p}An(e,n,r,i){const o=new Dl(e,Re.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){const o=new Dl(e,Re.empty(),n,r);return i?o.Zt():o}Pn(e,n){const r=new KU(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.hn(n);return W.forEach(i,o=>this.Pn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new gn(kn.comparator),p=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?p=!0:d=d.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(p?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}Vn(e,n){const r=new r_;for(const i of gl(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.Yt(i.kind);Tl.vt.It(o,s)}return r.zt()}dn(e){const n=new r_;return Tl.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new r_;return Tl.vt.It(yl(this.databaseId,n),r.Yt(function(o){const s=gl(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(null===r)return[];let i=[];i.push(new r_);let o=0;for(const s of gl(e)){const a=r[o++];for(const u of i)if(this.fn(n,s.fieldPath)&&Bm(a))i=this.gn(i,s,a);else{const d=u.Yt(s.kind);Tl.vt.It(a,d)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new r_;u.seed(a.zt()),Tl.vt.It(s,u.Yt(n.kind)),o.push(u)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof Rt&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=i_(e),i=If(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{const s=[];return W.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(p,m){const y=m?new sf(m.sequenceNumber,new To(Cl(m.readTime),new Re(Zs(m.documentKey)),m.largestBatchId)):sf.empty(),E=p.fields.map(([C,T])=>new ml(kn.fromServerFormat(C),T));return new rf(p.indexId,p.collectionGroup,E,y)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:st(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=i_(e),o=If(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>W.forEach(a,u=>o.put(zU(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return W.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?W.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),W.forEach(a,u=>this.wn(e,i,u).next(d=>{const p=this.Sn(o,u);return d.isEqual(p)?W.resolve():this.bn(e,o,u,d,p)}))))})}Dn(e,n,r,i){return vf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return vf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=vf(e);let o=new gn(Ju);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new Dl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new gn(Ju);const i=this.Vn(n,e);if(null==i)return r;const o=MD(n);if(null!=o){const s=e.data.field(o.fieldPath);if(Bm(s))for(const a of s.arrayValue.values||[])r=r.add(new Dl(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Dl(n.indexId,e.key,FE,i));return r}bn(e,n,r,i,o){me("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,d,p,m,y){const E=u.getIterator(),C=d.getIterator();let T=af(E),D=af(C);for(;T||D;){let L=!1,k=!1;if(T&&D){const K=p(T,D);K<0?k=!0:K>0&&(L=!0)}else null!=T?k=!0:L=!0;L?(m(D),D=af(C)):k?(y(T),T=af(E)):(T=af(E),D=af(C))}}(i,o,Ju,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),W.waitFor(s)}yn(e){let n=1;return If(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ju(s,a)).filter((s,a,u)=>!a||0!==Ju(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=Ju(s,e),u=Ju(s,n);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,FE,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,FE,[]]))}return o}Cn(e,n){return Ju(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(XU)}getMinOffset(e,n){return W.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Ve())).next(XU)}}function JU(t){return Rr(t,"collectionParents")}function vf(t){return Rr(t,"indexEntries")}function i_(t){return Rr(t,"indexConfiguration")}function If(t){return Rr(t,"indexState")}function XU(t){je(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;RD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new To(e.readTime,e.documentKey,n)}const eB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tB(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:s},(p,m,y)=>(a++,y.delete()));o.push(u.next(()=>{je(1===a)}));const d=[];for(const p of n.mutations){const m=y2(e,p.key.path,n.batchId);o.push(i.delete(m)),d.push(p.key)}return W.waitFor(o).next(()=>d)}function VE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ve();e=t.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class LE{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){je(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new LE(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Ef(e),s=Xu(e);return s.add({}).next(a=>{je("number"==typeof a);const u=new GD(a,n,r,i),d=function(E,C,T){const D=T.baseMutations.map(k=>e_(E.ct,k)),L=T.mutations.map(k=>e_(E.ct,k));return{userId:C,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:D,mutations:L}}(this.serializer,this.userId,u),p=[];let m=new gn((y,E)=>st(y.canonicalString(),E.canonicalString()));for(const y of i){const E=y2(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),p.push(s.put(d)),p.push(o.put(E,QX))}return m.forEach(y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),W.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Xu(e).get(n).next(r=>r?(je(r.userId===this.userId),bl(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?W.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Xu(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(je(a.batchId>=r),o=bl(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xu(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).U("userMutationsIndex",n).next(r=>r.map(i=>bl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mE(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ef(e).J({range:i},(s,a,u)=>{const[d,p,m]=s,y=Zs(p);if(d===this.userId&&n.path.isEqual(y))return Xu(e).get(m).next(E=>{if(!E)throw Ve();je(E.userId===this.userId),o.push(bl(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(st);const i=[];return n.forEach(o=>{const s=mE(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ef(e).J({range:a},(d,p,m)=>{const[y,E,C]=d,T=Zs(E);y===this.userId&&o.path.isEqual(T)?r=r.add(C):m.done()});i.push(u)}),W.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=mE(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new gn(st);return Ef(e).J({range:s},(u,d,p)=>{const[m,y,E]=u,C=Zs(y);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(E)):p.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Xu(e).get(o).next(s=>{if(null===s)throw Ve();je(s.userId===this.userId),r.push(bl(this.serializer,s))}))}),W.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return tB(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),W.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return W.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ef(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Zs(o[1]);i.push(u)}else a.done()}).next(()=>{je(0===i.length)})})}containsKey(e,n){return nB(e,this.userId,n)}Nn(e){return rB(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nB(t,e,n){const r=mE(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Ef(t).J({range:o,H:!0},(a,u,d)=>{const[p,m,y]=a;p===e&&m===i&&(s=!0),d.done()}).next(()=>s)}function Xu(t){return Rr(t,"mutations")}function Ef(t){return Rr(t,"documentMutations")}function rB(t){return Rr(t,"mutationQueues")}class Al{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Al(0)}static kn(){return new Al(-1)}}class cte{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Al(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>He.fromTimestamp(new $n(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>wf(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(je(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return wf(e).J((s,a)=>{const u=t_(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>W.waitFor(o)).next(()=>i)}forEachTarget(e,n){return wf(e).J((r,i)=>{const o=t_(i);n(o)})}qn(e){return iB(e).get("targetGlobalKey").next(n=>(je(null!==n),n))}Qn(e,n){return iB(e).put("targetGlobalKey",n)}Kn(e,n){return wf(e).put(jU(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=vl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return wf(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const d=t_(a);zm(n,d.target)&&(o=d,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=ec(e);return n.forEach(s=>{const a=pi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),W.waitFor(i)}removeMatchingKeys(e,n,r){const i=ec(e);return W.forEach(n,o=>{const s=pi(o.path);return W.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=ec(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ec(e);let o=gt();return i.J({range:r,H:!0},(s,a,u)=>{const d=Zs(s[1]),p=new Re(d);o=o.add(p)}).next(()=>o)}containsKey(e,n){const r=pi(n.path),i=IDBKeyRange.bound([r],[u2(r)],!1,!0);let o=0;return ec(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,d)=>{0!==s&&(o++,d.done())}).next(()=>o>0)}ot(e,n){return wf(e).get(n).next(r=>r?t_(r):null)}}function wf(t){return Rr(t,"targets")}function iB(t){return Rr(t,"targetGlobal")}function ec(t){return Rr(t,"targetDocuments")}function oB([t,e],[n,r]){const i=st(t,n);return 0===i?st(e,r):i}class lte{constructor(e){this.Un=e,this.buffer=new gn(oB),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oB(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var n=this;me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.A)(function*(){n.jn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Hu(r)?me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zu(r)}yield n.Hn(3e5)}))}}class dte{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return W.resolve(Do.oe);const r=new lte(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(eB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eB):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),tf()<=Qs.$b.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-p}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-p}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class hte{constructor(e,n){this.db=e,this.garbageCollector=function aB(t,e){return new dte(t,e)}(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return UE(e,r)}removeReference(e,n,r){return UE(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return UE(e,n)}nr(e,n){return function(i,o){let s=!1;return rB(i).Y(a=>nB(i,a,o).next(u=>(u&&(s=!0),W.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.tr(e,(s,a)=>{if(a<=n){const u=this.nr(e,s).next(d=>{if(!d)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,He.min()),ec(e).delete([0,pi(s.path)])))});i.push(u)}}).next(()=>W.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return UE(e,n)}tr(e,n){const r=ec(e);let i,o=Do.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:d})=>{0===s?(o!==Do.oe&&n(new Re(Zs(i)),o),o=d,i=u):o=Do.oe}).next(()=>{o!==Do.oe&&n(new Re(Zs(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UE(t,e){return ec(t).put((i=t.currentSequenceNumber,{targetId:0,path:pi(e.path),sequenceNumber:i}));var i}class uB{constructor(){this.changes=new Ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fte{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Sl(e).put(r)}removeEntry(e,n,r){return Sl(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],NE(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Fn.newInvalidDocument(n);return Sl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(o_(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:Fn.newInvalidDocument(n)};return Sl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(o_(n))},(i,o)=>{r={document:this.ir(n,o),size:VE(o)}}).next(()=>r)}getEntries(e,n){let r=Ji();return this._r(e,n,(i,o)=>{const s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=Ji(),i=new Mn(Re.comparator);return this._r(e,n,(o,s)=>{const a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,VE(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return W.resolve();let i=new gn(hB);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(o_(i.first()),o_(i.last())),s=i.getIterator();let a=s.getNext();return Sl(e).J({index:"documentKeyIndex",range:o},(u,d,p)=>{const m=Re.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&hB(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,d),a=s.hasNext()?s.getNext():null),a?p.$(o_(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),NE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sl(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{o?.incrementDocumentReadCount(d.length);let p=Ji();for(const m of d){const y=this.ir(Re.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(qm(n,y)||i.has(y.key))&&(p=p.insert(y.key,y))}return p})}getAllFromCollectionGroup(e,n,r,i){let o=Ji();const s=dB(n,r),a=dB(n,To.max());return Sl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,d,p)=>{const m=this.ir(Re.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(m.key,m),o.size===i&&p.done()}).next(()=>o)}newChangeBuffer(e){return new pte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return lB(e).get("remoteDocumentGlobalKey").next(n=>(je(!!n),n))}rr(e,n){return lB(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=function Xee(t,e){let n;if(e.document)n=xU(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),i=Cl(e.noDocument.readTime);n=Fn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ve();{const r=Re.fromSegments(e.unknownDocument.path),i=Cl(e.unknownDocument.version);n=Fn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new $n(i[0],i[1]);return He.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(He.min()))return r}return Fn.newInvalidDocument(e)}}function cB(t){return new fte(t)}class pte extends uB{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ha(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new gn((o,s)=>st(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=BU(this.cr.serializer,s);i=i.add(o.path.popLast());const d=VE(u);r+=d-a.size,n.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=BU(this.cr.serializer,s.convertToNoDocument(He.min()));n.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),W.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function lB(t){return Rr(t,"remoteDocumentGlobal")}function Sl(t){return Rr(t,"remoteDocumentsV14")}function o_(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dB(t,e){const n=e.documentKey.path.toArray();return[t,NE(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hB(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=st(n[o],r[o]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class gte{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class fB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Qm(r.mutation,i,Zi.empty(),$n.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gt()){const i=Xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Gm();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ji();const s=Wm(),a=Wm();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof qa)?o=o.insert(d.key,d):void 0!==p?(s.set(d.key,p.mutation.getFieldMask()),Qm(p.mutation,d,p.mutation.getFieldMask(),$n.now())):s.set(d.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,p)=>s.set(d,p)),n.forEach((d,p)=>{var m;return a.set(d,new gte(p,null!==(m=s.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wm();let i=new Mn((s,a)=>s-a),o=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let p=r.get(u)||Zi.empty();p=a.applyToLocalView(d,p),r.set(u,p);const m=(i.get(a.batchId)||gt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,p=u.value,m=nU();p.forEach(y=>{if(!o.has(y)){const E=lU(n.get(y),r.get(y));null!==E&&m.set(y,E),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,m))}return W.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Re.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):jD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):W.resolve(Xs());let a=-1,u=o;return s.next(d=>W.forEach(d,(p,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(p)?W.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,gt())).next(p=>({batchId:a,changes:tU(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let i=Gm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Gm();return this.indexManager.getCollectionParents(e,o).next(a=>W.forEach(a,u=>{const d=(m=n,y=u.child(o),new za(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const p=d.getKey();null===s.get(p)&&(s=s.insert(p,Fn.newInvalidDocument(p)))});let a=Gm();return s.forEach((u,d)=>{const p=o.get(u);void 0!==p&&Qm(p.mutation,d,Zi.empty(),$n.now()),qm(n,d)&&(a=a.insert(u,d))}),a})}}class mte{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,{id:(i=n).id,version:i.version,createTime:dr(i.createTime)}),W.resolve();var i}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,{name:(i=n).name,query:tA(i.bundledQuery),readTime:dr(i.readTime)}),W.resolve();var i}}class _te{constructor(){this.overlays=new Mn(Re.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return W.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Xs(),o=n.length+1,s=new Re(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Mn((d,p)=>d-p);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=o.get(d.largestBatchId);null===p&&(p=Xs(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=Xs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return W.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new KD(n,r));let o=this.Ir.get(n);void 0===o&&(o=gt(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}class yte{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class uA{constructor(){this.Tr=new gn(Hr.Er),this.dr=new gn(Hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Hr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Hr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Re(new Mt([])),r=new Hr(n,e),i=new Hr(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new Mt([])),r=new Hr(n,e),i=new Hr(n,e+1);let o=gt();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Hr(e,0),r=this.Tr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Hr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||Re.comparator(e.key,n.key)}}class vte{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gn(Hr.Er)}checkEmpty(e){return W.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++;const s=new GD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Hr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(s)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.vr(n+1),o=i<0?0:i;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hr(n,0),i=new Hr(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(st);return n.forEach(i=>{const o=new Hr(i,0),s=new Hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const s=new Hr(new Re(o),0);let a=new gn(st);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},s),W.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){je(0===this.Fr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const o=new Hr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Hr(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Ite{constructor(e){this.Mr=e,this.docs=new Mn(Re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=Ji();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ji();const s=n.path,a=new Re(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||RD(l2(p),r)<=0||(i.has(p.key)||qm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ve()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ete(this)}getSize(e){return W.resolve(this.size)}}class Ete extends uB{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class wte{constructor(e){this.persistence=e,this.Nr=new Ha(n=>vl(n),zm),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uA,this.targetCount=0,this.kr=Al.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Al(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(o).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}class cA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Do(0),this.Kr=!1,this.Kr=!0,this.$r=new yte,this.referenceDelegate=e(this),this.Ur=new wte(this),this.indexManager=new ate,this.remoteDocumentCache=new Ite(r=>this.referenceDelegate.Wr(r)),this.serializer=new UU(n),this.Gr=new mte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _te,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vte(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new Cte(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Cte extends h2{constructor(e){super(),this.currentSequenceNumber=e}}class BE{constructor(e){this.persistence=e,this.Jr=new uA,this.Yr=null}static Zr(e){return new BE(e)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=Re.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,He.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class bte{constructor(e){this.serializer=e}O(e,n,r,i){const o=new gE("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_2,{unique:!0}),u.createObjectStore("documentMutations"),pB(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=W.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),pB(e)),s=s.next(()=>function(u){const d=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:He.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,d){return d.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_2,{unique:!0});const m=d.store("mutations"),y=p.map(E=>m.put(E));return W.waitFor(y)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:aee});d.createIndex("collectionPathOverlayIndex",uee,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",cee,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:YX});d.createIndex("documentKeyIndex",ZX),d.createIndex("collectionGroupIndex",JX)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:ree}).createIndex("sequenceNumberIndex",iee,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:oee}).createIndex("documentKeyIndex",see,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=VE(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>W.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>W.forEach(a,u=>{je(u.userId===o.userId);const d=bl(this.serializer,u);return tB(e,o.userId,d).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const u=new Mt(s),d=[0,pi(u)];o.push(n.get(d).next(p=>p?W.resolve():n.put({targetId:0,path:pi(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>W.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:nee});const r=n.store("collectionParents"),i=new aA,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:pi(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{const u=new Mt(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],d)=>{const p=Zs(a);return o(p.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const o=t_(i),s=jU(this.serializer,o);return n.put(s)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(m=s,m.document?new Re(Mt.fromString(m.document.name).popFirst(5)):m.noDocument?Re.fromSegments(m.noDocument.path):m.unknownDocument?Re.fromSegments(m.unknownDocument.path):Ve()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>W.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=cB(this.serializer),o=new cA(BE.Zr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(u=>{var d;let p=null!==(d=a.get(u.userId))&&void 0!==d?d:gt();bl(this.serializer,u).keys().forEach(m=>p=p.add(m)),a.set(u.userId,p)}),W.forEach(a,(u,d)=>{const p=new $r(d),m=OE.lt(this.serializer,p),y=o.getIndexManager(p),E=LE.lt(p,this.serializer,y,o.referenceDelegate);return new fB(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new OD(n,Do.oe),u).next()})})}}function pB(t){t.createObjectStore("targetDocuments",{keyPath:eee}).createIndex("documentTargetsIndex",tee,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XX,{unique:!0}),t.createObjectStore("targetGlobal")}const lA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dA{constructor(e,n,r,i,o,s,a,u,d,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=d,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!dA.D())throw new ge(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hte(this,i),this.Ai=n+"main",this.serializer=new UU(u),this.Ri=new Ys(this.Ai,this.hi,new bte(this.serializer)),this.$r=new tte,this.Ur=new cte(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cB(this.serializer),this.Gr=new ete,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===p&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,lA);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Do(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var n=this;return this.di=function(){var r=(0,ce.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var n=(0,ce.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ce.A)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$E(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Hu(e))return me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return s_(e).get("owner").next(n=>W.resolve(this.vi(n)))}Ci(e){return $E(e).delete(this.clientId)}Fi(){var e=this;return(0,ce.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Rr(r,"clientMetadata");return i.U().next(o=>{const s=e.xi(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return W.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of n)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?W.resolve(!0):s_(e).get("owner").next(n=>{if(null!==n&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,lA);return!1}}return!(!this.networkEnabled||!this.inForeground)||$E(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&me("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ce.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new OD(n,Do.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>$E(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return LE.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ute(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return OE.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){me("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=17===(u=this.hi)?hee:16===u?dee:15===u?ND:14===u?E2:13===u?I2:12===u?lee:11===u?v2:void Ve();var u;let s;return this.Ri.runTransaction(e,i,o,a=>(s=new OD(a,this.Qr?this.Qr.next():Do.oe),"readwrite-primary"===n?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ge(ee.FAILED_PRECONDITION,d2);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return s_(e).get("owner").next(n=>{if(null!==n&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ge(ee.FAILED_PRECONDITION,lA)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return s_(e).put("owner",n)}static D(){return Ys.D()}bi(e){const n=s_(e);return n.get("owner").next(r=>this.vi(r)?(me("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):W.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;(0,on.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=null!==(null===(n=this.Vi)||void 0===n?void 0:n.getItem(this.Oi(e)));return me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function s_(t){return Rr(t,"owner")}function $E(t){return Rr(t,"clientMetadata")}function hA(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class fA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=gt(),i=gt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new fA(e,n.fromCache,r,i)}}class Tte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,on.nr)()?8:f2((0,on.ZQ)())>0?6:4}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Tte;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(tf()<=Qs.$b.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",hf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(tf()<=Qs.$b.DEBUG&&me("QueryEngine","Query:",hf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tf()<=Qs.$b.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",hf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):W.resolve())}Yi(e,n){if(K2(n))return W.resolve(null);let r=gi(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=DE(n,null,"F"),r=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=gt(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,a);return this.ns(n,d,s,u.readTime)?this.Yi(e,DE(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return K2(n)||i.isEqual(He.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?W.resolve(null):(tf()<=Qs.$b.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hf(n)),this.rs(e,s,n,c2(i,-1)).next(a=>a))})}ts(e,n){let r=new gn(X2(e));return n.forEach((i,o)=>{qm(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return tf()<=Qs.$b.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",hf(n)),this.Ji.getDocumentsMatchingQuery(e,n,To.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Dte{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Mn(st),this._s=new Ha(o=>vl(o),zm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mB(t,e,n,r){return new Dte(t,e,n,r)}function _B(t,e){return pA.apply(this,arguments)}function pA(){return(pA=(0,ce.A)(function*(t,e){const n=De(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=gt();for(const d of i){s.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of o){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function yB(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vB(t,e,n){let r=gt(),i=gt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ji();return n.forEach((a,u)=>{const d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(He.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Mte(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cf(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,W.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ga(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function bf(t,e,n){return gA.apply(this,arguments)}function gA(){return(gA=(0,ce.A)(function*(t,e,n){const r=De(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Hu(s))throw s;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function zE(t,e,n){const r=De(t);let i=He.min(),o=gt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,p){const m=De(u),y=m._s.get(p);return void 0!==y?W.resolve(m.os.get(y)):m.Ur.getTargetData(d,p)}(r,s,gi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:He.min(),n?o:gt())).next(a=>(wB(r,J2(e),a),{documents:a,Ts:o})))}function IB(t,e){const n=De(t),r=De(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function EB(t,e){const n=De(t),r=n.us.get(e)||He.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,c2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wB(n,e,i),i))}function wB(t,e,n){let r=t.us.get(e)||He.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}function mA(){return(mA=(0,ce.A)(function*(t,e,n,r){const i=De(t);let o=gt(),s=Ji();for(const d of n){const p=e.Es(d.metadata.name);d.document&&(o=o.add(p));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),s=s.insert(p,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Cf(i,(p=r,gi(lf(Mt.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>vB(d,a,s).next(p=>(a.apply(d),p)).next(p=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.Ps,p.Is)).next(()=>p.Ps)))})).apply(this,arguments)}function Pte(t,e){return _A.apply(this,arguments)}function _A(){return(_A=(0,ce.A)(function*(t,e,n=gt()){const r=yield Cf(t,gi(tA(e.bundledQuery))),i=De(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=dr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Gr.saveNamedQuery(o,e);const a=r.withResumeToken(Jn.EMPTY_BYTE_STRING,s);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(o,a).next(()=>i.Ur.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Ur.addMatchingKeys(o,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(o,e))})})).apply(this,arguments)}function CB(t,e){return`firestore_clients_${t}_${e}`}function bB(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yA(t,e){return`firestore_targets_${t}_${e}`}class HE{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ge(i.error.code,i.error.message))),s?new HE(e,n,i.state,o):(lr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a_{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ge(r.error.code,r.error.message))),o?new a_(e,r.state,i):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qE{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=zD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=g2(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new qE(e,o):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class vA{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new vA(n.clientId,n.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IA{constructor(){this.activeTargetIds=zD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EA{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Mn(st),this.started=!1,this.bs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=CB(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new IA),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.A)(function*(){const n=yield e.syncEngine.Qi();for(const i of n){if(i===e.ps)continue;const o=e.getItem(CB(e.persistenceKey,i));if(o){const s=qE.Rs(i,o);s&&(e.Ss=e.Ss.insert(s.clientId,s))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(yA(this.persistenceKey,e));if(i){const o=a_.Rs(e,i);o&&(r=o.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yA(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return me("SharedClientState","READ",e,n),n}setItem(e,n){me("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var n=this;const r=e;if(r.storageArea===this.storage){if(me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ce.A)(function*(){if(n.started){if(null!==r.key)if(n.Cs.test(r.key)){if(null==r.newValue){const i=n.Gs(r.key);return n.zs(i,null)}{const i=n.js(r.key,r.newValue);if(i)return n.zs(i.clientId,i)}}else if(n.Fs.test(r.key)){if(null!==r.newValue){const i=n.Hs(r.key,r.newValue);if(i)return n.Js(i)}}else if(n.Ms.test(r.key)){if(null!==r.newValue){const i=n.Ys(r.key,r.newValue);if(i)return n.Zs(i)}}else if(r.key===n.xs){if(null!==r.newValue){const i=n.Ls(r.newValue);if(i)return n.Bs(i)}}else if(r.key===n.vs){const i=function(s){let a=Do.oe;if(null!=s)try{const u=JSON.parse(s);je("number"==typeof u),a=u}catch(u){lr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Do.oe&&n.sequenceNumberHandler(i)}else if(r.key===n.Os){const i=n.Xs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.eo(o)))}}else n.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new HE(this.currentUser,e,n,r),o=bB(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){const n=bB(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,n,r){const i=yA(this.persistenceKey,e),o=new a_(e,n,r);this.setItem(i,o.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return qE.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]);return HE.Rs(new $r(void 0!==r[2]?r[2]:null),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return a_.Rs(i,n)}Ls(e){return vA.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var n=this;return(0,ce.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.no(e.batchId,e.state,e.error);me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=zD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class TB{constructor(){this.so=new IA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new IA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xte{_o(e){}shutdown(){}}class DB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GE=null;function wA(){return null===GE?GE=268435456+Math.round(2147483648*Math.random()):GE++,"0x"+GE.toString(16)}const Nte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ote{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const _i="WebChannelConnection";class kte extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=wA(),u=this.xo(n,r.toUriEncodedString());me("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,u,d,i).then(p=>(me("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw bo("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+ef,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){return`${this.Do}/v1/${r}:${Nte[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=wA();return new Promise((s,a)=>{const u=new XL;u.setWithCredentials(!0),u.listenOnce(e2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pE.NO_ERROR:const p=u.getResponseJson();me(_i,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case pE.TIMEOUT:me(_i,`RPC '${e}' ${o} timed out`),a(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case pE.HTTP_ERROR:const m=u.getStatus();if(me(_i,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const C=function(D){const L=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(L)>=0?L:ee.UNKNOWN}(E.status);a(new ge(C,E.message))}else a(new ge(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{me(_i,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);me(_i,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=wA(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=r2(),a=n2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=o.join("");me(_i,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=s.createWebChannel(p,u);let y=!1,E=!1;const C=new Ote({Io:D=>{E?me(_i,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(y||(me(_i,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),me(_i,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},To:()=>m.close()}),T=(D,L,k)=>{D.listen(L,K=>{try{k(K)}catch(fe){setTimeout(()=>{throw fe},0)}})};return T(m,Nm.EventType.OPEN,()=>{E||(me(_i,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),T(m,Nm.EventType.CLOSE,()=>{E||(E=!0,me(_i,`RPC '${e}' stream ${i} transport closed`),C.So())}),T(m,Nm.EventType.ERROR,D=>{E||(E=!0,bo(_i,`RPC '${e}' stream ${i} transport errored:`,D),C.So(new ge(ee.UNAVAILABLE,"The operation could not be completed")))}),T(m,Nm.EventType.MESSAGE,D=>{var L;if(!E){const k=D.data[0];je(!!k);const fe=k.error||(null===(L=k[0])||void 0===L?void 0:L.error);if(fe){me(_i,`RPC '${e}' stream ${i} received error:`,fe);const Te=fe.status;let xe=function(F){const j=vr[F];if(void 0!==j)return _U(j)}(Te),V=fe.message;void 0===xe&&(xe=ee.INTERNAL,V="Unknown error status: "+Te+" with message "+fe.message),E=!0,C.So(new ge(xe,V)),m.close()}else me(_i,`RPC '${e}' stream ${i} received:`,k),C.bo(k)}}),T(a,t2.STAT_EVENT,D=>{D.stat===AD.PROXY?me(_i,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===AD.NOPROXY&&me(_i,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function AB(){return typeof window<"u"?window:null}function WE(){return typeof document<"u"?document:null}function u_(t){return new zee(t,!0)}class CA{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class SB{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CA(e,n)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ce.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ce.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){var r=this;return(0,ce.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):n&&n.code===ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(n)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ce.A)(function*(){e.state=0,e.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fte extends SB{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=function Gee(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:Ve(),i=e.targetChange.targetIds||[],o=function(d,p){return d.useProto3Json?(je(void 0===p||"string"==typeof p),Jn.fromBase64String(p||"")):(je(void 0===p||p instanceof Buffer||p instanceof Uint8Array),Jn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const p=void 0===d.code?ee.UNKNOWN:_U(d.code);return new ge(p,d.message||"")}(s);n=new wU(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ea(t,r.document.name),o=dr(r.document.updateTime),s=r.document.createTime?dr(r.document.createTime):He.min(),a=new Xr({mapValue:{fields:r.document.fields}}),u=Fn.newFoundDocument(i,o,s,a);n=new PE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ea(t,r.document),o=r.readTime?dr(r.readTime):He.min(),s=Fn.newNoDocument(i,o);n=new PE([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=ea(t,r.document);n=new PE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ve();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Vee(i,o);n=new EU(r.targetId,s)}}var d;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return He.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?He.min():s.readTime?dr(s.readTime):He.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=XD(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=bE(u)?{documents:NU(o,u)}:{query:xE(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DU(o,s.resumeToken);const d=YD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(He.min())>0){a.readTime=_f(o,s.snapshotVersion.toTimestamp());const d=YD(o,s.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function Kee(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=XD(this.serializer),n.removeTarget=e,this.a_(n)}}class Vte extends SB{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=function Wee(t,e){return t&&t.length>0?(je(void 0!==e),t.map(n=>function(i,o){let s=dr(i.updateTime?i.updateTime:o);return s.isEqual(He.min())&&(s=dr(o)),new Oee(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=XD(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>e_(this.serializer,r))};this.a_(n)}}class Lte extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,JD(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ee.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,JD(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(ee.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ute{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):me("OnlineStateTracker",n)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Bte{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget((0,ce.A)(function*(){var u;tc(s)&&(me("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ce.A)(function*(p){const m=De(p);m.L_.add(4),yield Tf(m),m.q_.set("Unknown"),m.L_.delete(4),yield c_(m)}),function d(p){return u.apply(this,arguments)})(s))}))}),this.q_=new Ute(r,i)}}function c_(t){return bA.apply(this,arguments)}function bA(){return(bA=(0,ce.A)(function*(t){if(tc(t))for(const e of t.B_)yield e(!0)})).apply(this,arguments)}function Tf(t){return TA.apply(this,arguments)}function TA(){return(TA=(0,ce.A)(function*(t){for(const e of t.B_)yield e(!1)})).apply(this,arguments)}function KE(t,e){const n=De(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),SA(n)?AA(n):Sf(n).r_()&&DA(n,e))}function Df(t,e){const n=De(t),r=Sf(n);n.N_.delete(e),r.r_()&&MB(n,e),0===n.N_.size&&(r.r_()?r.o_():tc(n)&&n.q_.set("Unknown"))}function DA(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sf(t).A_(e)}function MB(t,e){t.Q_.xe(e),Sf(t).R_(e)}function AA(t){t.Q_=new Uee({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Sf(t).start(),t.q_.v_()}function SA(t){return tc(t)&&!Sf(t).n_()&&t.N_.size>0}function tc(t){return 0===De(t).L_.size}function RB(t){t.Q_=void 0}function jte(t){return MA.apply(this,arguments)}function MA(){return(MA=(0,ce.A)(function*(t){t.q_.set("Online")})).apply(this,arguments)}function $te(t){return RA.apply(this,arguments)}function RA(){return(RA=(0,ce.A)(function*(t){t.N_.forEach((e,n)=>{DA(t,e)})})).apply(this,arguments)}function zte(t,e){return PA.apply(this,arguments)}function PA(){return(PA=(0,ce.A)(function*(t,e){RB(t),SA(t)?(t.q_.M_(e),AA(t)):t.q_.set("Unknown")})).apply(this,arguments)}function Hte(t,e,n){return xA.apply(this,arguments)}function xA(){return xA=(0,ce.A)(function*(t,e,n){if(t.q_.set("Online"),e instanceof wU&&2===e.state&&e.cause)try{yield(r=(0,ce.A)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.N_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.N_.delete(u),o.Q_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield QE(t,r)}else if(e instanceof PE?t.Q_.Ke(e):e instanceof EU?t.Q_.He(e):t.Q_.We(e),!n.isEqual(He.min()))try{const r=yield yB(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=o.N_.get(d);p&&o.N_.set(d,p.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{const p=o.N_.get(u);if(!p)return;o.N_.set(u,p.withResumeToken(Jn.EMPTY_BYTE_STRING,p.snapshotVersion)),MB(o,u);const m=new Ga(p.target,u,d,p.sequenceNumber);DA(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){me("RemoteStore","Failed to raise snapshot:",r),yield QE(t,r)}var r}),xA.apply(this,arguments)}function QE(t,e,n){return NA.apply(this,arguments)}function NA(){return(NA=(0,ce.A)(function*(t,e,n){if(!Hu(e))throw e;t.L_.add(1),yield Tf(t),t.q_.set("Offline"),n||(n=()=>yB(t.localStore)),t.asyncQueue.enqueueRetryable((0,ce.A)(function*(){me("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield c_(t)}))})).apply(this,arguments)}function PB(t,e){return e().catch(n=>QE(t,n,e))}function Af(t){return OA.apply(this,arguments)}function OA(){return(OA=(0,ce.A)(function*(t){const e=De(t),n=nc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qte(e);)try{const i=yield Mte(e.localStore,r);if(null===i){0===e.O_.length&&n.o_();break}r=i.batchId,Gte(e,i)}catch(i){yield QE(e,i)}xB(e)&&NB(e)})).apply(this,arguments)}function qte(t){return tc(t)&&t.O_.length<10}function Gte(t,e){t.O_.push(e);const n=nc(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xB(t){return tc(t)&&!nc(t).n_()&&t.O_.length>0}function NB(t){nc(t).start()}function Wte(t){return kA.apply(this,arguments)}function kA(){return(kA=(0,ce.A)(function*(t){nc(t).p_()})).apply(this,arguments)}function Kte(t){return FA.apply(this,arguments)}function FA(){return(FA=(0,ce.A)(function*(t){const e=nc(t);for(const n of t.O_)e.m_(n.mutations)})).apply(this,arguments)}function Qte(t,e,n){return VA.apply(this,arguments)}function VA(){return(VA=(0,ce.A)(function*(t,e,n){const r=t.O_.shift(),i=WD.from(r,e,n);yield PB(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Af(t)})).apply(this,arguments)}function Yte(t,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ce.A)(function*(t,e){var n;e&&nc(t).V_&&(yield(n=(0,ce.A)(function*(i,o){if(mU(a=o.code)&&a!==ee.ABORTED){const s=i.O_.shift();nc(i).s_(),yield PB(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Af(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),xB(t)&&NB(t)}),LA.apply(this,arguments)}function OB(t,e){return UA.apply(this,arguments)}function UA(){return(UA=(0,ce.A)(function*(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=tc(n);n.L_.add(3),yield Tf(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield c_(n)})).apply(this,arguments)}function BA(t,e){return jA.apply(this,arguments)}function jA(){return(jA=(0,ce.A)(function*(t,e){const n=De(t);e?(n.L_.delete(2),yield c_(n)):e||(n.L_.add(2),yield Tf(n),n.q_.set("Unknown"))})).apply(this,arguments)}function Sf(t){return t.K_||(t.K_=function(n,r,i){const o=De(n);return o.w_(),new Fte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jte.bind(null,t),Ro:$te.bind(null,t),mo:zte.bind(null,t),d_:Hte.bind(null,t)}),t.B_.push(function(){var e=(0,ce.A)(function*(n){n?(t.K_.s_(),SA(t)?AA(t):t.q_.set("Unknown")):(yield t.K_.stop(),RB(t))});return function(n){return e.apply(this,arguments)}}())),t.K_}function nc(t){return t.U_||(t.U_=function(n,r,i){const o=De(n);return o.w_(),new Vte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Wte.bind(null,t),mo:Yte.bind(null,t),f_:Kte.bind(null,t),g_:Qte.bind(null,t)}),t.B_.push(function(){var e=(0,ce.A)(function*(n){n?(t.U_.s_(),yield Af(t)):(yield t.U_.stop(),t.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))});return function(n){return e.apply(this,arguments)}}())),t.U_}class $A{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new $A(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(t,e){if(lr("AsyncQueue",`${e}: ${t}`),Hu(t))return new ge(ee.UNAVAILABLE,`${e}: ${t}`);throw t}class Rf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=Gm(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new Rf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Rf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class kB{constructor(){this.W_=new Mn(Re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(n,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(n):1===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pf{constructor(e,n,r,i,o,s,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Pf(e,n,Rf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Zte{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Jte{constructor(){this.queries=FB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(n,r){const i=De(n),o=i.queries;i.queries=FB(),o.forEach((s,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function FB(){return new Ha(t=>Z2(t),Hm)}function zA(t,e){return HA.apply(this,arguments)}function HA(){return(HA=(0,ce.A)(function*(t,e){const n=De(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Zte,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Mf(s,`Initialization of query '${hf(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&WA(n)})).apply(this,arguments)}function qA(t,e){return GA.apply(this,arguments)}function GA(){return(GA=(0,ce.A)(function*(t,e){const n=De(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),0===o.j_.length?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Xte(t,e){const n=De(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&WA(n)}function ene(t,e,n){const r=De(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function WA(t){t.Y_.forEach(e=>{e.next()})}var KA,VB;(VB=KA||(KA={})).ea="default",VB.Cache="cache";class QA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Pf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Pf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==KA.Cache}}class tne{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}class LB{constructor(e){this.serializer=e}Es(e){return ea(this.serializer,e)}ds(e){return e.metadata.exists?xU(this.serializer,e.document,!1):Fn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dr(e)}}class nne{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UB(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Mt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new LB(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Es(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||gt()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,ce.A)(function*(){const n=yield function Rte(t,e,n,r){return mA.apply(this,arguments)}(e.localStore,new LB(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield Pte(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:n}})()}}function UB(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class BB{constructor(e){this.key=e}}class jB{constructor(e){this.key=e}}class $B{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=gt(),this.mutatedKeys=gt(),this.Aa=X2(e),this.Ra=new Rf(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new kB,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),E=qm(this.query,m)?m:null,C=!!y&&this.mutatedKeys.has(y.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;y&&E?y.data.isEqual(E.data)?C!==T&&(r.track({type:3,doc:E}),D=!0):this.ga(y,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.Aa(E,u)>0||d&&this.Aa(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),D=!0):y&&!E&&(r.track({type:1,doc:y}),D=!0,(u||d)&&(a=!0)),D&&(E?(s=s.add(E),o=T?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const p="F"===this.query.limitType?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((p,m)=>function(E,C){const T=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return T(E)-T(C)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=n&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==s.length||d?{snapshot:new Pf(this.query,e.Ra,o,s,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kB,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=gt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new jB(r))}),this.da.forEach(r=>{e.has(r)||n.push(new BB(r))}),n}ba(e){this.Ta=e.Ts,this.da=gt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class rne{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ine{constructor(e){this.key=e,this.va=!1}}class one{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ha(a=>Z2(a),Hm),this.Ma=new Map,this.xa=new Set,this.Oa=new Mn(Re.comparator),this.Na=new Map,this.La=new uA,this.Ba={},this.ka=new Map,this.qa=Al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function sne(t,e){return YA.apply(this,arguments)}function YA(){return(YA=(0,ce.A)(function*(t,e,n=!0){const r=YE(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield zB(r,e,n,!0),i})).apply(this,arguments)}function ane(t,e){return ZA.apply(this,arguments)}function ZA(){return(ZA=(0,ce.A)(function*(t,e){const n=YE(t);yield zB(n,e,!0,!1)})).apply(this,arguments)}function zB(t,e,n,r){return JA.apply(this,arguments)}function JA(){return(JA=(0,ce.A)(function*(t,e,n,r){const i=yield Cf(t.localStore,gi(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield XA(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&KE(t.remoteStore,i),a})).apply(this,arguments)}function XA(t,e,n,r,i){return eS.apply(this,arguments)}function eS(){return eS=(0,ce.A)(function*(t,e,n,r,i){t.Ka=(m,y,E)=>{return(C=(0,ce.A)(function*(D,L,k,K){let fe=L.view.ma(k);fe.ns&&(fe=yield zE(D.localStore,L.query,!1).then(({documents:P})=>L.view.ma(P,fe)));const Te=K&&K.targetChanges.get(L.targetId),xe=K&&null!=K.targetMismatches.get(L.targetId),V=L.view.applyChanges(fe,D.isPrimaryClient,Te,xe);return dS(D,L.targetId,V.wa),V.snapshot}),function T(D,L,k,K){return C.apply(this,arguments)})(t,m,y,E);var C};const o=yield zE(t.localStore,e,!0),s=new $B(e,o.Ts),a=s.ma(o.documents),u=Jm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=s.applyChanges(a,t.isPrimaryClient,u);dS(t,n,d.wa);const p=new rne(e,n,s);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}),eS.apply(this,arguments)}function une(t,e,n){return tS.apply(this,arguments)}function tS(){return(tS=(0,ce.A)(function*(t,e,n){const r=De(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Hm(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield bf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Df(r.remoteStore,i.targetId),xf(r,i.targetId)}).catch(zu))):(xf(r,i.targetId),yield bf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function cne(t,e){return nS.apply(this,arguments)}function nS(){return(nS=(0,ce.A)(function*(t,e){const n=De(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Df(n.remoteStore,r.targetId))})).apply(this,arguments)}function rS(){return(rS=(0,ce.A)(function*(t,e,n){const r=wS(t);try{const i=yield function(s,a){const u=De(s),d=$n.now(),p=a.reduce((E,C)=>E.add(C.key),gt());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=Ji(),T=gt();return u.cs.getEntries(E,p).next(D=>{C=D,C.forEach((L,k)=>{k.isValidDocument()||(T=T.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,C)).next(D=>{m=D;const L=[];for(const k of a){const K=Fee(k,m.get(k.key).overlayedDocument);null!=K&&L.push(new qa(k.key,K,k2(K.value.mapValue),Hn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,L,a)}).next(D=>{y=D;const L=D.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(E,D.batchId,L)})}).then(()=>({batchId:y.batchId,changes:tU(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.Ba[s.currentUser.toKey()];d||(d=new Mn(st)),d=d.insert(a,u),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),yield Wa(r,i.changes),yield Af(r.remoteStore)}catch(i){const o=Mf(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function HB(t,e){return iS.apply(this,arguments)}function iS(){return(iS=(0,ce.A)(function*(t,e){const n=De(t);try{const r=yield function Ste(t,e){const n=De(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;a.push(n.Ur.removeMatchingKeys(o,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(o,p.addedDocuments,m)));let E=y.withSequenceNumber(o.currentSequenceNumber);var T,D,L;null!==e.targetMismatches.get(m)?E=E.withResumeToken(Jn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(m,E),D=E,L=p,(0===(T=y).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(o,E))});let u=Ji(),d=gt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(vB(o,s,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(He.min())){const p=n.Ur.getLastRemoteSnapshotVersion(o).next(m=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return W.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.os=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?je(s.va):i.removedDocuments.size>0&&(je(s.va),s.va=!1))}),yield Wa(n,r,e)}catch(r){yield zu(r)}})).apply(this,arguments)}function qB(t,e,n){const r=De(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=De(s);u.onlineState=a;let d=!1;u.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(a)&&(d=!0)}),d&&WA(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dne(t,e,n){return oS.apply(this,arguments)}function oS(){return(oS=(0,ce.A)(function*(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Mn(Re.comparator);s=s.insert(o,Fn.newNoDocument(o,He.min()));const a=gt().add(o),u=new Zm(He.min(),new Map,new Mn(st),s,a);yield HB(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),hS(r)}else yield bf(r.localStore,e,!1).then(()=>xf(r,e,n)).catch(zu)})).apply(this,arguments)}function hne(t,e){return sS.apply(this,arguments)}function sS(){return(sS=(0,ce.A)(function*(t,e){const n=De(t),r=e.batch.batchId;try{const i=yield function Ate(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){const m=d.batch,y=m.keys();let E=W.resolve();return y.forEach(C=>{E=E.next(()=>p.getEntry(u,C)).next(T=>{const D=d.docVersions.get(C);je(null!==D),T.version.compareTo(D)<0&&(m.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),p.addEntry(T)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=gt();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);lS(n,r,null),cS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Wa(n,i)}catch(i){yield zu(i)}})).apply(this,arguments)}function fne(t,e,n){return aS.apply(this,arguments)}function aS(){return(aS=(0,ce.A)(function*(t,e,n){const r=De(t);try{const i=yield function(s,a){const u=De(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(je(null!==m),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);lS(r,e,n),cS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Wa(r,i)}catch(i){yield zu(i)}})).apply(this,arguments)}function uS(){return(uS=(0,ce.A)(function*(t,e){const n=De(t);tc(n.remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=De(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Mf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function cS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function lS(t,e,n){const r=De(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||GB(t,r)})}function GB(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(Df(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hS(t))}function dS(t,e,n){for(const r of n)r instanceof BB?(t.La.addReference(r.key,e),gne(t,r)):r instanceof jB?(me("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||GB(t,r.key)):Ve()}function gne(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(me("SyncEngine","New document in limbo: "+n),t.xa.add(r),hS(t))}function hS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(Mt.fromString(e)),r=t.qa.next();t.Na.set(r,new ine(n)),t.Oa=t.Oa.insert(n,r),KE(t.remoteStore,new Ga(gi(lf(n.path)),r,"TargetPurposeLimboResolution",Do.oe))}}function Wa(t,e,n){return fS.apply(this,arguments)}function fS(){return fS=(0,ce.A)(function*(t,e,n){const r=De(t),i=[],o=[],s=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(p=n?.targetChanges.get(u.targetId))||void 0===p?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=fA.Wi(u.targetId,d);o.push(m)}}))}),yield Promise.all(s),r.Ca.d_(i),yield(a=(0,ce.A)(function*(d,p){const m=De(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>W.forEach(p,E=>W.forEach(E.$i,C=>m.persistence.referenceDelegate.addReference(y,E.targetId,C)).next(()=>W.forEach(E.Ui,C=>m.persistence.referenceDelegate.removeReference(y,E.targetId,C)))))}catch(y){if(!Hu(y))throw y;me("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const E=y.targetId;if(!y.fromCache){const C=m.os.get(E),D=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.os=m.os.insert(E,D)}}}),function u(d,p){return a.apply(this,arguments)})(r.localStore,o))}),fS.apply(this,arguments)}function mne(t,e){return pS.apply(this,arguments)}function pS(){return(pS=(0,ce.A)(function*(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=yield _B(n.localStore,e);n.currentUser=e,(o=n).ka.forEach(a=>{a.forEach(u=>{u.reject(new ge(ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ka.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wa(n,r.hs)}var o})).apply(this,arguments)}function _ne(t,e){const n=De(t),r=n.Na.get(e);if(r&&r.va)return gt().add(r.key);{let i=gt();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function yne(t,e){return gS.apply(this,arguments)}function gS(){return(gS=(0,ce.A)(function*(t,e){const n=De(t),r=yield zE(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&dS(n,e.targetId,i.wa),i})).apply(this,arguments)}function vne(t,e){return mS.apply(this,arguments)}function mS(){return(mS=(0,ce.A)(function*(t,e){const n=De(t);return EB(n.localStore,e).then(r=>Wa(n,r))})).apply(this,arguments)}function Ine(t,e,n,r){return _S.apply(this,arguments)}function _S(){return(_S=(0,ce.A)(function*(t,e,n,r){const i=De(t),o=yield function(a,u){const d=De(a),p=De(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>p.Mn(m,u).next(y=>y?d.localDocuments.getDocuments(m,y):W.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield Af(i.remoteStore):"acknowledged"===n||"rejected"===n?(lS(i,e,r||null),cS(i,e),u=e,De(De(i.localStore).mutationQueue).On(u)):Ve(),yield Wa(i,o)):me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function yS(){return(yS=(0,ce.A)(function*(t,e){const n=De(t);if(YE(n),wS(n),!0===e&&!0!==n.Qa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield WB(n,r.toArray());n.Qa=!0,yield BA(n.remoteStore,!0);for(const o of i)KE(n.remoteStore,o)}else if(!1===e&&!1!==n.Qa){const r=[];let i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(xf(n,s),bf(n.localStore,s,!0))),Df(n.remoteStore,s)}),yield i,yield WB(n,r),function(s){const a=De(s);a.Na.forEach((u,d)=>{Df(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new Mn(Re.comparator)}(n),n.Qa=!1,yield BA(n.remoteStore,!1)}})).apply(this,arguments)}function WB(t,e,n){return vS.apply(this,arguments)}function vS(){return(vS=(0,ce.A)(function*(t,e,n){const r=De(t),i=[],o=[];for(const s of e){let a;const u=r.Ma.get(s);if(u&&0!==u.length){a=yield Cf(r.localStore,gi(u[0]));for(const d of u){const p=r.Fa.get(d),m=yield yne(r,p);m.snapshot&&o.push(m.snapshot)}}else{const d=yield IB(r.localStore,s);a=yield Cf(r.localStore,d),yield XA(r,KB(d),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})).apply(this,arguments)}function KB(t){return W2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wne(t){return n=De(t).localStore,De(De(n).persistence).Qi();var n}function Cne(t,e,n,r){return IS.apply(this,arguments)}function IS(){return(IS=(0,ce.A)(function*(t,e,n,r){const i=De(t);if(i.Qa)return void me("SyncEngine","Ignoring unexpected query state notification.");const o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield EB(i.localStore,J2(o[0])),a=Zm.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Jn.EMPTY_BYTE_STRING);yield Wa(i,s,a);break}case"rejected":yield bf(i.localStore,e,!0),xf(i,e,r);break;default:Ve()}})).apply(this,arguments)}function bne(t,e,n){return ES.apply(this,arguments)}function ES(){return(ES=(0,ce.A)(function*(t,e,n){const r=YE(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){me("SyncEngine","Adding an already active target "+i);continue}const o=yield IB(r.localStore,i),s=yield Cf(r.localStore,o);yield XA(r,KB(o),s.targetId,!1,s.resumeToken),KE(r.remoteStore,s)}for(const i of n)r.Ma.has(i)&&(yield bf(r.localStore,i,!1).then(()=>{Df(r.remoteStore,i),xf(r,i)}).catch(zu))}})).apply(this,arguments)}function YE(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_ne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dne.bind(null,e),e.Ca.d_=Xte.bind(null,e.eventManager),e.Ca.$a=ene.bind(null,e.eventManager),e}function wS(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fne.bind(null,e),e}let Nf=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return(0,ce.A)(function*(){r.serializer=u_(n.databaseInfo.databaseId),r.sharedClientState=r.Wa(n),r.persistence=r.Ga(n),yield r.persistence.start(),r.localStore=r.za(n),r.gcScheduler=r.ja(n,r.localStore),r.indexBackfillerScheduler=r.Ha(n,r.localStore)})()}ja(n,r){return null}Ha(n,r){return null}za(n){return mB(this.persistence,new gB,n.initialUser,this.serializer)}Ga(n){return new cA(BE.Zr,this.serializer)}Wa(n){return new TB}terminate(){var n=this;return(0,ce.A)(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})();class CS extends Nf{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,ce.A)(function*(){yield n().call(r,e),yield r.Ja.initialize(r,e),yield wS(r.Ja.syncEngine),yield Af(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return mB(this.persistence,new gB,e.initialUser,this.serializer)}ja(e,n){return new sB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Ha(e,n){const r=new WX(n,this.persistence);return new GX(e.asyncQueue,r)}Ga(e){const n=hA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new dA(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,AB(),WE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new TB}}class QB extends CS{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,ce.A)(function*(){yield n().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof EA&&(r.sharedClientState.syncEngine={no:Ine.bind(null,i),ro:Cne.bind(null,i),io:bne.bind(null,i),Qi:wne.bind(null,i),eo:vne.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var o=(0,ce.A)(function*(s){yield function Ene(t,e){return yS.apply(this,arguments)}(r.Ja.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}Wa(e){const n=AB();if(!EA.D(n))throw new ge(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new EA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}let Of=(()=>{class t{initialize(n,r){var i=this;return(0,ce.A)(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>qB(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=mne.bind(null,i.syncEngine),yield BA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Jte}createDatastore(n){const r=u_(n.databaseInfo.databaseId),i=new kte(n.databaseInfo);return new Lte(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>qB(this.syncEngine,r,0),u=DB.D()?new DB:new xte,new Bte(i,o,s,a,u);var i,o,s,a,u}createSyncEngine(n,r){return function(o,s,a,u,d,p,m){const y=new one(o,s,a,u,d,p);return m&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return(0,ce.A)(function*(){var r,i,o;yield(o=(0,ce.A)(function*(a){const u=De(a);me("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Tf(u),u.k_.shutdown(),u.q_.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();function YB(t,e=10240){let n=0;return{read:()=>(0,ce.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,ce.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}class Ane{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new zr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ce.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ce.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ce.A)(function*(){const n=yield e.nu();if(null===n)return null;const r=e.eu.decode(n),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const o=yield e.iu(i);return new tne(JSON.parse(o),n.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,ce.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const n=e.su();n<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}iu(e){var n=this;return(0,ce.A)(function*(){for(;n.buffer.length<e;)(yield n.ou())&&n.ru("Reached the end of bundle when more is expected.");const r=n.eu.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ce.A)(function*(){const n=yield e.Xa.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class Sne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ce.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new ge(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,ce.A)(function*(s,a){const u=De(s),d={documents:a.map(E=>Xm(u.serializer,E))},p=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Mt.emptyPath(),d,a.length),m=new Map;p.forEach(E=>{const C=function qee(t,e){return"found"in e?function(r,i){je(!!i.found);const o=ea(r,i.found.name),s=dr(i.found.updateTime),a=i.found.createTime?dr(i.found.createTime):He.min(),u=new Xr({mapValue:{fields:i.found.fields}});return Fn.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){je(!!i.missing),je(!!i.readTime);const o=ea(r,i.missing),s=dr(i.readTime);return Fn.newNoDocument(o,s)}(t,e):Ve()}(u.serializer,E);m.set(C.key.toString(),C)});const y=[];return a.forEach(E=>{const C=m.get(E.toString());je(!!C),y.push(C)}),y}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=Re.fromPath(i);e.mutations.push(new qD(o,e.precondition(o)))}),yield(r=(0,ce.A)(function*(o,s){const a=De(o),u={writes:s.map(d=>e_(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,Mt.emptyPath(),u)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ve();n=He.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ge(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(He.min())?Hn.exists(!1):Hn.updateTime(n):Hn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(He.min()))throw new ge(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(n)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mne{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new CA(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ce.A)(function*(){const n=new Sne(e.datastore),r=e.cu(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.lu(o)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const n=this.updateFunction(e);return!Fm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!mU(n)}return!1}}class Rne{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$r.UNAUTHENTICATED,this.clientId=a2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=(0,ce.A)(function*(u){me("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(me("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Mf(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function bS(t,e){return TS.apply(this,arguments)}function TS(){return TS=(0,ce.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,ce.A)(function*(o){r.isEqual(o)||(yield _B(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),TS.apply(this,arguments)}function ZB(t,e){return DS.apply(this,arguments)}function DS(){return(DS=(0,ce.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield AS(t);me("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>OB(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>OB(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function AS(t){return SS.apply(this,arguments)}function SS(){return(SS=(0,ce.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bS(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;bo("Error using user provided cache. Falling back to memory cache: "+e),yield bS(t,new Nf)}}else me("FirestoreClient","Using default OfflineComponentProvider"),yield bS(t,new Nf);var i;return t._offlineComponents})).apply(this,arguments)}function JE(t){return MS.apply(this,arguments)}function MS(){return(MS=(0,ce.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),yield ZB(t,t._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),yield ZB(t,new Of))),t._onlineComponents})).apply(this,arguments)}function JB(t){return AS(t).then(e=>e.persistence)}function kf(t){return AS(t).then(e=>e.localStore)}function XB(t){return JE(t).then(e=>e.remoteStore)}function RS(t){return JE(t).then(e=>e.syncEngine)}function Ff(t){return PS.apply(this,arguments)}function PS(){return(PS=(0,ce.A)(function*(t){const e=yield JE(t),n=e.eventManager;return n.onListen=sne.bind(null,e.syncEngine),n.onUnlisten=une.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ane.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cne.bind(null,e.syncEngine),n})).apply(this,arguments)}function tj(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return function(o,s,a,u,d){const p=new ZE({next:y=>{p.Za(),s.enqueueAndForget(()=>qA(o,m));const E=y.docs.has(a);!E&&y.fromCache?d.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?d.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new QA(lf(a.path),p,{includeMetadataChanges:!0,_a:!0});return zA(o,m)}(yield Ff(t),t.asyncQueue,e,n,r)})),r.promise}function nj(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return function(o,s,a,u,d){const p=new ZE({next:y=>{p.Za(),s.enqueueAndForget(()=>qA(o,m)),y.fromCache&&"server"===u.source?d.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new QA(a,p,{includeMetadataChanges:!0,_a:!0});return zA(o,m)}(yield Ff(t),t.asyncQueue,e,n,r)})),r.promise}function rj(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const ij=new Map;function xS(t,e,n){if(!n)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oj(t,e,n,r){if(!0===e&&!0===r)throw new ge(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sj(t){if(!Re.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aj(t){if(Re.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function XE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Ve()}function wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=XE(t);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uj(t,e){if(e<=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class cj{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=rj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cj(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new OX;switch(r.type){case"firstParty":return new LX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ce.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ij.get(n);r&&(me("ComponentProvider","Removing Datastore"),ij.delete(n),r.terminate())}(this),Promise.resolve()}}class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class ta extends ei{constructor(e,n,r){super(e,n,lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Re(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function dj(t,e,...n){if(t=(0,on.Ku)(t),xS("collection","path",e),t instanceof l_){const r=Mt.fromString(e,...n);return aj(r),new ta(t,null,r)}{if(!(t instanceof Vn||t instanceof ta))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return aj(r),new ta(t.firestore,null,r)}}function ew(t,e,...n){if(t=(0,on.Ku)(t),1===arguments.length&&(e=a2.newId()),xS("doc","path",e),t instanceof l_){const r=Mt.fromString(e,...n);return sj(r),new Vn(t,null,new Re(r))}{if(!(t instanceof Vn||t instanceof ta))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return sj(r),new Vn(t.firestore,t instanceof ta?t.converter:null,new Re(r))}}function hj(t,e){return t=(0,on.Ku)(t),e=(0,on.Ku)(e),(t instanceof Vn||t instanceof ta)&&(e instanceof Vn||e instanceof ta)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function NS(t,e){return t=(0,on.Ku)(t),e=(0,on.Ku)(e),t instanceof ei&&e instanceof ei&&t.firestore===e.firestore&&Hm(t._query,e._query)&&t.converter===e.converter}class fj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CA(this,"async_queue_retry"),this.Vu=()=>{const r=WE();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=WE();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=WE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ce.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(n){if(!Hu(n))throw n;me("AsyncQueue","Operation failed with retryable error: "+n)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,lr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=$A.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}wu(){var e=this;return(0,ce.A)(function*(){let n;do{n=e.mu,yield n}while(n!==e.mu)})()}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function OS(t){return function(n){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class zne{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends l_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ce.A)(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new fj(n),e._firestoreClient=void 0,yield n}})()}}function qn(t){if(t._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pj(t),t._firestoreClient}function pj(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new gee(t._databaseId,u,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,rj(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Rne(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}function kS(){return(kS=(0,ce.A)(function*(t){bo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();gj(t,Of.provider,{build:n=>new QB(n,e.cacheSizeBytes)})})).apply(this,arguments)}function gj(t,e,n){if((t=wt(t,In))._firestoreClient||t._terminated)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ge(ee.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},pj(t)}class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(Jn.fromBase64String(e))}catch(n){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ka{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._methodName=e}}class tw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}class nw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const ere=/^__.*__$/;class tre{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new qa(e,this.data,this.fieldMask,n,this.fieldTransforms):new gf(e,this.data,n,this.fieldTransforms)}}class mj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _j(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class rw{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sw(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(_j(this.Cu)&&ere.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nre{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||u_(e)}Qu(e,n,r,i=!1){return new rw({Cu:e,methodName:n,qu:r,path:kn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(t){const e=t._freezeSettings(),n=u_(t._databaseId);return new nre(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iw(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);$S("Data must be an object, but it was:",s,r);const a=Ij(r,s);let u,d;if(o.merge)u=new Zi(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const p=[];for(const m of o.mergeFields){const y=f_(e,m,n);if(!s.contains(y))throw new ge(ee.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);wj(p,y)||p.push(y)}u=new Zi(p),d=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=s.fieldTransforms;return new tre(new Xr(a),u,d)}class h_ extends Ml{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof h_}}function yj(t,e,n){return new rw({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class FS extends Ml{_toFieldTransform(e){return new Km(e.path,new ff)}isEqual(e){return e instanceof FS}}class VS extends Ml{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=yj(this,e,!0),r=this.Ku.map(o=>Pl(o,n)),i=new Il(r);return new Km(e.path,i)}isEqual(e){return e instanceof VS&&(0,on.bD)(this.Ku,e.Ku)}}class LS extends Ml{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=yj(this,e,!0),r=this.Ku.map(o=>Pl(o,n)),i=new El(r);return new Km(e.path,i)}isEqual(e){return e instanceof LS&&(0,on.bD)(this.Ku,e.Ku)}}class US extends Ml{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new pf(e.serializer,iU(e.serializer,this.$u));return new Km(e.path,n)}isEqual(e){return e instanceof US&&this.$u===e.$u}}function BS(t,e,n,r){const i=t.Qu(1,e,n);$S("Data must be an object, but it was:",i,r);const o=[],s=Xr.empty();qu(r,(u,d)=>{const p=ow(e,u,n);d=(0,on.Ku)(d);const m=i.Nu(p);if(d instanceof h_)o.push(p);else{const y=Pl(d,m);null!=y&&(o.push(p),s.set(p,y))}});const a=new Zi(o);return new mj(s,a,i.fieldTransforms)}function jS(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[f_(e,r,n)],u=[i];if(o.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(f_(e,o[y])),u.push(o[y+1]);const d=[],p=Xr.empty();for(let y=a.length-1;y>=0;--y)if(!wj(d,a[y])){const E=a[y];let C=u[y];C=(0,on.Ku)(C);const T=s.Nu(E);if(C instanceof h_)d.push(E);else{const D=Pl(C,T);null!=D&&(d.push(E),p.set(E,D))}}const m=new Zi(d);return new mj(p,m,s.fieldTransforms)}function vj(t,e,n,r=!1){return Pl(n,t.Qu(r?4:3,e))}function Pl(t,e){if(Ej(t=(0,on.Ku)(t)))return $S("Unsupported field value:",e,t),Ij(t,e);if(t instanceof Ml)return function(r,i){if(!_j(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Pl(a,i.Lu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,on.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return iU(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=$n.fromDate(r);return{timestampValue:_f(i.serializer,o)}}if(r instanceof $n){const o=new $n(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_f(i.serializer,o)}}if(r instanceof tw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof na)return{bytesValue:DU(i.serializer,r._byteString)};if(r instanceof Vn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ZD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nw)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return HD(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${XE(r)}`)}(t,e)}function Ij(t,e){const n={};return b2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qu(t,(r,i)=>{const o=Pl(i,e.Mu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function Ej(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $n||t instanceof tw||t instanceof na||t instanceof Vn||t instanceof Ml||t instanceof nw)}function $S(t,e,n){if(!Ej(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=XE(n);throw e.Bu("an object"===r?t+" a custom object":t+" "+r)}var i}function f_(t,e,n){if((e=(0,on.Ku)(e))instanceof Ka)return e._internalPath;if("string"==typeof e)return ow(t,e);throw sw("Field path arguments must be of type string or ",t,!1,void 0,n)}const rre=new RegExp("[~\\*/\\[\\]]");function ow(t,e,n){if(e.search(rre)>=0)throw sw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ka(...e.split("."))._internalPath}catch{throw sw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sw(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ge(ee.INVALID_ARGUMENT,a+t+u)}function wj(t,e){return t.some(n=>n.isEqual(e))}class p_{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ire(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ire extends p_{data(){return super.data()}}function aw(t,e){return"string"==typeof e?ow(t,e):e instanceof Ka?e._internalPath:e._delegate._internalPath}function Cj(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zS{}class g_ extends zS{}function rc(t,e,...n){let r=[];e instanceof zS&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Vf).length,a=o.filter(u=>u instanceof m_).length;if(s>1||s>0&&a>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class m_ extends g_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new m_(e,n,r)}_apply(e){const n=this._parse(e);return Aj(e._query,n),new ei(e.firestore,e.converter,$D(e._query,n))}_parse(e){const n=Rl(e.firestore);return function(o,s,a,u,d,p,m){let y;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){Dj(m,p);const E=[];for(const C of m)E.push(Tj(u,o,C));y={arrayValue:{values:E}}}else y=Tj(u,o,m)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||Dj(m,p),y=vj(a,"where",m,"in"===p||"not-in"===p);return Rt.create(d,p,y)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vf extends zS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)Aj(s,u),s=$D(s,u)}(e._query,n),new ei(e.firestore,e.converter,$D(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HS extends g_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new HS(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $m(o,s)}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new za(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class uw extends g_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new uw(e,n,r)}_apply(e){return new ei(e.firestore,e.converter,DE(e._query,this._limit,this._limitType))}}class cw extends g_{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new cw(e,n,r)}_apply(e){const n=bj(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(o=n,new za((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class lw extends g_{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new lw(e,n,r)}_apply(e){const n=bj(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(o=n,new za((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function bj(t,e,n,r){if(n[0]=(0,on.Ku)(n[0]),n[0]instanceof p_)return function(o,s,a,u,d){if(!u)throw new ge(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const m of df(o))if(m.field.isKeyField())p.push(yl(s,u.key));else{const y=u.data.field(m.field);if(yE(y))throw new ge(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new ge(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}p.push(y)}return new Yu(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Rl(t.firestore);return function(s,a,u,d,p,m){const y=s.explicitOrderBy;if(p.length>y.length)throw new ge(ee.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let C=0;C<p.length;C++){const T=p[C];if(y[C].field.isKeyField()){if("string"!=typeof T)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!jD(s)&&-1!==T.indexOf("/"))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const D=s.path.child(Mt.fromString(T));if(!Re.isDocumentKey(D))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const L=new Re(D);E.push(yl(a,L))}else{const D=vj(u,d,T);E.push(D)}}return new Yu(E,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Tj(t,e,n){if("string"==typeof(n=(0,on.Ku)(n))){if(""===n)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jD(e)&&-1!==n.indexOf("/"))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Mt.fromString(n));if(!Re.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yl(t,new Re(r))}if(n instanceof Vn)return yl(t,n._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XE(n)}.`)}function Dj(t,e){if(!Array.isArray(t)||0===t.length)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aj(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ge(ee.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qS{convertValue(e,n="none"){switch(Ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qu(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>zn(s.doubleValue));return new nw(o)}convertGeoPoint(e){return new tw(zn(e.latitude),zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vE(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lm(e));default:return null}}convertTimestamp(e){const n=ja(e);return new $n(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Mt.fromString(e);je(LU(r));const i=new Gu(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return i.isEqual(n)||lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function dw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fre extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,n)}}class xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends p_{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new __(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(aw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class __ extends Qa{data(e={}){return super.data(e)}}class ic{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new __(this._firestore,this._userDataWriter,r.key,r,new xl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new __(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new __(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:gre(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}function Mj(t,e){return t instanceof Qa&&e instanceof Qa?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ic&&e instanceof ic&&t._firestore===e._firestore&&NS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class oc extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,n)}}function Rj(t,e,n){t=wt(t,Vn);const r=wt(t.firestore,In),i=dw(t.converter,e,n);return Lf(r,[iw(Rl(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Hn.none())])}function Pj(t,e,n,...r){t=wt(t,Vn);const i=wt(t.firestore,In),o=Rl(i);let s;return s="string"==typeof(e=(0,on.Ku)(e))||e instanceof Ka?jS(o,"updateDoc",t._key,e,n,r):BS(o,"updateDoc",t._key,e),Lf(i,[s.toMutation(t._key,Hn.exists(!0))])}function xj(t,...e){var n,r,i;t=(0,on.Ku)(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||OS(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(OS(e[s])){const m=e[s];e[s]=null===(n=m.next)||void 0===n?void 0:n.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,p;if(t instanceof Vn)d=wt(t.firestore,In),p=lf(t._key.path),u={next:m=>{e[s]&&e[s](GS(d,t,m))},error:e[s+1],complete:e[s+2]};else{const m=wt(t,ei);d=wt(m.firestore,In),p=m._query;const y=new oc(d);u={next:E=>{e[s]&&e[s](new ic(d,y,m,E))},error:e[s+1],complete:e[s+2]},Cj(t._query)}return function(y,E,C,T){const D=new ZE(T),L=new QA(E,D,C);return y.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return zA(yield Ff(y),L)})),()=>{D.Za(),y.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return qA(yield Ff(y),L)}))}}(qn(d),p,a,u)}function Lf(t,e){return function(r,i){const o=new zr;return r.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return function lne(t,e,n){return rS.apply(this,arguments)}(yield RS(r),i,o)})),o.promise}(qn(t),e)}function GS(t,e,n){const r=n.docs.get(e._key),i=new oc(t);return new Qa(t,i,e._key,r,new xl(n.hasPendingWrites,n.fromCache),e.converter)}const Nre={maxAttempts:5};class Nj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,n,r){this._verifyNotCommitted();const i=sc(e,this._firestore),o=dw(i.converter,n,r),s=iw(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Hn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=sc(e,this._firestore);let s;return s="string"==typeof(n=(0,on.Ku)(n))||n instanceof Ka?jS(this._dataReader,"WriteBatch.update",o._key,n,r,i):BS(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sc(e,this._firestore);return this._mutations=this._mutations.concat(new mf(n._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sc(t,e){if((t=(0,on.Ku)(t)).firestore!==e)throw new ge(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Ore extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Rl(n)}get(n){const r=sc(n,this._firestore),i=new fre(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Ve();const s=o[0];if(s.isFoundDocument())return new p_(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new p_(this._firestore,i,r._key,null,r.converter);throw Ve()})}set(n,r,i){const o=sc(n,this._firestore),s=dw(o.converter,r,i),a=iw(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=sc(n,this._firestore);let a;return a="string"==typeof(r=(0,on.Ku)(r))||r instanceof Ka?jS(this._dataReader,"Transaction.update",s._key,r,i,o):BS(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=sc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=sc(e,this._firestore),r=new oc(this._firestore);return super.get(e).then(i=>new Qa(this._firestore,r,n._key,i._document,new xl(!1,!1),n.converter))}}function KS(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vj(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function Lj(){if(!function fee(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ef=Zh.SDK_VERSION,(0,Zh._registerComponent)(new QL.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new In(new FX(r.getProvider("auth-internal")),new UX(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(d.options.projectId,p)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Zh.registerVersion)(i2,"4.7.3",e),(0,Zh.registerVersion)(i2,"4.7.3","esm2017")}();class y_{constructor(e){this._delegate=e}static fromBase64String(e){return Lj(),new y_(na.fromBase64String(e))}static fromUint8Array(e){return Vj(),new y_(na.fromUint8Array(e))}toBase64(){return Lj(),this._delegate.toBase64()}toUint8Array(){return Vj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QS(t){return function Hre(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class qre{enableIndexedDbPersistence(e,n){return function qne(t,e){bo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return gj(t,Of.provider,{build:r=>new CS(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Gne(t){return kS.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Wne(t){if(t._initialized&&!t._terminated)throw new ge(ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,ce.A)(function*(){try{yield(n=(0,ce.A)(function*(i){if(!Ys.D())return Promise.resolve();const o=i+"main";yield Ys.delete(o)}),function r(i){return n.apply(this,arguments)})(hA(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Uj{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function lj(t,e,n,r={}){var i;const o=(t=wt(t,l_))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=$r.MOCK_USER;else{a=(0,on.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $r(d)}t._authCredentials=new kX(new o2(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function Qne(t){return function Pne(t){return t.asyncQueue.enqueue((0,ce.A)(function*(){const e=yield JB(t),n=yield XB(t);return e.setNetworkEnabled(!0),function(i){const o=De(i);return o.L_.delete(0),c_(o)}(n)}))}(qn(t=wt(t,In)))}(this._delegate)}disableNetwork(){return function Yne(t){return function xne(t){return t.asyncQueue.enqueue((0,ce.A)(function*(){const e=yield JB(t),n=yield XB(t);return e.setNetworkEnabled(!1),(r=(0,ce.A)(function*(o){const s=De(o);s.L_.add(0),yield Tf(s),s.q_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(qn(t=wt(t,In)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oj("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Kne(t){return function(n){const r=new zr;return n.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return function pne(t,e){return uS.apply(this,arguments)}(yield RS(n),r)})),r.promise}(qn(t=wt(t,In)))}(this._delegate)}onSnapshotsInSync(e){return function bre(t,e){return function Fne(t,e){const n=new ZE(e);return t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return i=yield Ff(t),o=n,De(i).Y_.add(o),void o.next();var i,o})),()=>{n.Za(),t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return i=yield Ff(t),o=n,void De(i).Y_.delete(o);var i,o}))}}(qn(t=wt(t,In)),OS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uf(this,dj(this._delegate,e))}catch(n){throw Ri(n,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,ew(this._delegate,e))}catch(n){throw Ri(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pi(this,function $ne(t,e){if(t=wt(t,l_),xS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ei(t,null,(r=e,new za(Mt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Ri(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kre(t,e,n){t=wt(t,In);const r=Object.assign(Object.assign({},Nre),n);return function(o){if(o.maxAttempts<1)throw new ge(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new zr;return o.asyncQueue.enqueueAndForget((0,ce.A)(function*(){const d=yield function ej(t){return JE(t).then(e=>e.datastore)}(o);new Mne(o.asyncQueue,d,a,s,u).au()})),u.promise}(qn(t),i=>e(new Ore(t,i)),r)}(this._delegate,n=>e(new Bj(this,n)))}batch(){return qn(this._delegate),new jj(new Nj(this._delegate,e=>Lf(this._delegate,e)))}loadBundle(e){return function Zne(t,e){const n=qn(t=wt(t,In)),r=new zne;return function Vne(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?yU().encode(s):s,p=function(p,m){if(p instanceof Uint8Array)return YB(p,m);if(p instanceof ArrayBuffer)return YB(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Ane(p,a);var p}(n,u_(e));t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){!function Tne(t,e,n){const r=De(t);var i;(i=(0,ce.A)(function*(s,a,u){try{const d=yield a.getMetadata();if(yield function(C,T){const D=De(C),L=dr(T.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",k=>D.Gr.getBundleMetadata(k,T.id)).then(k=>!!k&&k.createTime.compareTo(L)>=0)}(s.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=d).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(UB(d));const p=new nne(d,s.localStore,a.serializer);let m=yield a.Ua();for(;m;){const E=yield p.la(m);E&&u._updateProgress(E),m=yield a.Ua()}const y=yield p.complete();return yield Wa(s,y.Ia,void 0),yield function(C,T){const D=De(C);return D.persistence.runTransaction("Save bundle","readwrite",L=>D.Gr.saveBundleMetadata(L,T))}(s.localStore,d),u._completeWith(y.progress),Promise.resolve(y.Pa)}catch(d){return bo("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var C}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield RS(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Jne(t,e){return function Lne(t,e){return t.asyncQueue.enqueue((0,ce.A)(function*(){return function(r,i){const o=De(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield kf(t),e)}))}(qn(t=wt(t,In)),e).then(n=>n?new ei(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Pi(this,n):null)}}class fw extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new y_(new na(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(n,this.firestore,null)}}class Bj{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new fw(e)}get(e){const n=Ol(e);return this._delegate.get(n).then(r=>new v_(this._firestore,new Qa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ol(e);return r?(KS("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ol(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ol(e);return this._delegate.delete(n),this}}class jj{constructor(e){this._delegate=e}set(e,n,r){const i=Ol(e);return r?(KS("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ol(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ol(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Nl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new __(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new I_(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Nl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Nl(e,new fw(e),n),i.set(n,o)),o}}Nl.INSTANCES=new WeakMap;class qo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fw(e)}static forPath(e,n,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(n,new Vn(n._delegate,r,new Re(e)))}static forKey(e,n,r){return new qo(n,new Vn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Uf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uf(this.firestore,dj(this._delegate,e))}catch(n){throw Ri(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.Ku)(e))instanceof Vn&&hj(this._delegate,e)}set(e,n){n=KS("DocumentReference.set",n);try{return n?Rj(this._delegate,e,n):Rj(this._delegate,e)}catch(r){throw Ri(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?Pj(this._delegate,e):Pj(this._delegate,e,n,...r)}catch(i){throw Ri(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wre(t){return Lf(wt(t.firestore,In),[new mf(t._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const n=$j(e),r=zj(e,i=>new v_(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xj(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function _re(t){t=wt(t,Vn);const e=wt(t.firestore,In),n=qn(e),r=new oc(e);return function Nne(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return(r=(0,ce.A)(function*(o,s,a){try{const u=yield function(p,m){const y=De(p);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ge(ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Mf(u,`Failed to get document '${s} from cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield kf(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Qa(e,r,t._key,i,new xl(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function yre(t){t=wt(t,Vn);const e=wt(t.firestore,In);return tj(qn(e),t._key,{source:"server"}).then(n=>GS(e,t,n))}(this._delegate):function mre(t){t=wt(t,Vn);const e=wt(t.firestore,In);return tj(qn(e),t._key).then(n=>GS(e,t,n))}(this._delegate),n.then(r=>new v_(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}function Ri(t,e,n){return t.message=t.message.replace(e,n),t}function $j(t){for(const e of t)if("object"==typeof e&&!QS(e))return e;return{}}function zj(t,e){var n,r;let i;return i=QS(t[0])?t[0]:QS(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class v_{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Mj(this._delegate,e._delegate)}}class I_ extends v_{data(e){const n=this._delegate.data(e);return this._delegate._converter||function NX(t){t||Ve()}(void 0!==n),n}}class Pi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fw(e)}where(e,n,r){try{return new Pi(this.firestore,rc(this._delegate,function ore(t,e,n){const r=e,i=aw("where",t);return m_._create(i,r,n)}(e,n,r)))}catch(i){throw Ri(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Pi(this.firestore,rc(this._delegate,function sre(t,e="asc"){const n=e,r=aw("orderBy",t);return HS._create(r,n)}(e,n)))}catch(r){throw Ri(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pi(this.firestore,rc(this._delegate,function are(t){return uj("limit",t),uw._create("limit",t,"F")}(e)))}catch(n){throw Ri(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Pi(this.firestore,rc(this._delegate,function ure(t){return uj("limitToLast",t),uw._create("limitToLast",t,"L")}(e)))}catch(n){throw Ri(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pi(this.firestore,rc(this._delegate,function cre(...t){return cw._create("startAt",t,!0)}(...e)))}catch(n){throw Ri(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pi(this.firestore,rc(this._delegate,function lre(...t){return cw._create("startAfter",t,!1)}(...e)))}catch(n){throw Ri(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pi(this.firestore,rc(this._delegate,function dre(...t){return lw._create("endBefore",t,!1)}(...e)))}catch(n){throw Ri(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pi(this.firestore,rc(this._delegate,function hre(...t){return lw._create("endAt",t,!0)}(...e)))}catch(n){throw Ri(n,"endAt()","Query.endAt()")}}isEqual(e){return NS(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Ire(t){t=wt(t,ei);const e=wt(t.firestore,In),n=qn(e),r=new oc(e);return function One(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget((0,ce.A)(function*(){return(r=(0,ce.A)(function*(o,s,a){try{const u=yield zE(o,s,!0),d=new $B(s,u.Ts),p=d.ma(u.documents),m=d.applyChanges(p,!1);a.resolve(m.snapshot)}catch(u){const d=Mf(u,`Failed to execute query '${s} against cache`);a.reject(d)}}),function i(o,s,a){return r.apply(this,arguments)})(yield kf(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ic(e,r,t,i))}(this._delegate):"server"===e?.source?function Ere(t){t=wt(t,ei);const e=wt(t.firestore,In),n=qn(e),r=new oc(e);return nj(n,t._query,{source:"server"}).then(i=>new ic(e,r,t,i))}(this._delegate):function vre(t){t=wt(t,ei);const e=wt(t.firestore,In),n=qn(e),r=new oc(e);return Cj(t._query),nj(n,t._query).then(i=>new ic(e,r,t,i))}(this._delegate),n.then(r=>new YS(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=$j(e),r=zj(e,i=>new YS(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xj(this._delegate,n,r)}withConverter(e){return new Pi(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}class Wre{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new I_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YS{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new I_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Wre(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new I_(this._firestore,r))})}isEqual(e){return Mj(this._delegate,e._delegate)}}class Uf extends Pi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?ew(this._delegate):ew(this._delegate,e))}catch(n){throw Ri(n,"doc()","CollectionReference.doc()")}}add(e){return function Cre(t,e){const n=wt(t.firestore,In),r=ew(t),i=dw(t.converter,e);return Lf(n,[iw(Rl(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new qo(this.firestore,n))}isEqual(e){return hj(this._delegate,e._delegate)}withConverter(e){return new Uf(this.firestore,this._delegate.withConverter(e?Nl.getInstance(this.firestore,e):null))}}function Ol(t){return wt(t,Vn)}class ZS{constructor(...e){this._delegate=new Ka(...e)}static documentId(){return new ZS(kn.keyField().canonicalString())}isEqual(e){return(e=(0,on.Ku)(e))instanceof Ka&&this._delegate._internalPath.isEqual(e._internalPath)}}class kl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vre(){return new FS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kl(e)}static delete(){const e=function Fre(){return new h_("deleteField")}();return e._methodName="FieldValue.delete",new kl(e)}static arrayUnion(...e){const n=function Lre(...t){return new VS("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new kl(n)}static arrayRemove(...e){const n=function Ure(...t){return new LS("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new kl(n)}static increment(e){const n=function Bre(t){return new US("increment",t)}(e);return n._methodName="FieldValue.increment",new kl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Kre={Firestore:Uj,GeoPoint:tw,Timestamp:$n,Blob:y_,Transaction:Bj,WriteBatch:jj,DocumentReference:qo,DocumentSnapshot:v_,Query:Pi,QueryDocumentSnapshot:I_,QuerySnapshot:YS,CollectionReference:Uf,FieldPath:ZS,FieldValue:kl,setLogLevel:function Gre(t){!function xX(t){$u.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function Hj(t,e){return function Zre(t,e=NL){return new xt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function JS(t,e){return Hj(t,e).pipe(ke(n=>({payload:n,type:"query"})))}!function Yre(t){(function Qre(t,e){t.INTERNAL.registerComponent(new QL.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Kre)))})(t,(e,n)=>new Uj(e,n,new qre)),t.registerVersion("@firebase/firestore-compat","0.3.38")}(Ua.A);class qj{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=Zj(r,n);return new Kj(i,o,this.afs)}snapshotChanges(){return function Jre(t,e){return Hj(t,e).pipe($I(void 0),DD(),ke(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Co)}valueChanges(e={}){return this.snapshotChanges().pipe(ke(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return Sn(this.ref.get(e)).pipe(Co)}}function pw(t,e){return JS(t,e).pipe($I(void 0),DD(),ke(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=o.find(m=>m.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function Gj(t,e,n){return pw(t,n).pipe(zI((r,i)=>function Xre(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function eie(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return XS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return XS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XS(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),function MX(t,e=ai){return t=t??RX,Ce((n,r)=>{let i,o=!0;n.subscribe(Pe(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),ke(r=>r.map(i=>({type:i.type,payload:i}))))}function XS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Wj(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class Kj{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=pw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ke(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe($I(void 0),DD(),Jt(([r,i])=>i.length>0||!r),ke(([,r])=>r),Co)}auditTrail(e){return this.stateChanges(e).pipe(zI((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=Wj(e);return Gj(this.query,n,this.afs.schedulers.outsideAngular).pipe(Co)}valueChanges(e={}){return JS(this.query,this.afs.schedulers.outsideAngular).pipe(ke(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Co)}get(e){return Sn(this.query.get(e)).pipe(Co)}add(e){return this.ref.add(e)}doc(e){return new qj(this.ref.doc(e),this.afs)}}class tie{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?pw(this.query,this.afs.schedulers.outsideAngular).pipe(ke(n=>n.filter(r=>e.indexOf(r.type)>-1)),Jt(n=>n.length>0),Co):pw(this.query,this.afs.schedulers.outsideAngular).pipe(Co)}auditTrail(e){return this.stateChanges(e).pipe(zI((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=Wj(e);return Gj(this.query,n,this.afs.schedulers.outsideAngular).pipe(Co)}valueChanges(e={}){return JS(this.query,this.afs.schedulers.outsideAngular).pipe(ke(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Co)}get(e){return Sn(this.query.get(e)).pipe(Co)}}const Qj=new ye("angularfire2.enableFirestorePersistence"),Yj=new ye("angularfire2.firestore.persistenceSettings"),nie=new ye("angularfire2.firestore.settings"),rie=new ye("angularfire2.firestore.use-emulator");function Zj(t,e=n=>n){return{query:e(t),ref:t}}let Bf=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,d,p,m,y,E,C,T,D,L,k){this.schedulers=u;const K=bD(n,a,r),fe=p;m&&KL(K,a,y,C,T,D,E,L),[this.firestore,this.persistenceEnabled$]=LL(`${K.name}.firestore`,"AngularFirestore",K.name,()=>{const Te=a.runOutsideAngular(()=>K.firestore());if(o&&Te.settings(o),fe&&Te.useEmulator(...fe),i&&!hm(s)){const xe=()=>{try{return Sn(Te.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),Ke(!1)}};return[Te,a.runOutsideAngular(xe)]}return[Te,Ke(!1)]},[o,fe,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=Zj(i,r),a=this.schedulers.ngZone.run(()=>o);return new Kj(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new tie(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new qj(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(we(dE),we(hE,8),we(Qj,8),we(nie,8),we(go),we(Tt),we(FL),we(Yj,8),we(rie,8),we(fl,8),we($L,8),we(zL,8),we(HL,8),we(qL,8),we(GL,8),we(WL,8),we(OL,8))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),iie=(()=>{class t{constructor(){Ua.A.registerVersion("angularfire",lE.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:Qj,useValue:!0},{provide:Yj,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ds({type:t});static \u0275inj=Bi({providers:[Bf]})}return t})(),jf=(()=>{class t{constructor(){this.client=G(Bf),this.afAuth=G(fl)}getTrainings(){return new xt(n=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Training",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{n.next(o)}):n.next([])}).catch(()=>n.next([]))})}getMeals(){return new xt(n=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Meal",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{console.log("Pobrane posi\u0142ki:",o),n.next(o)}):n.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",r),n.next([])})})}addTraining(n){n.id||(n.id=this.client.createId()),this.afAuth.currentUser.then(r=>{const i=r?.uid;i&&this.client.collection("Training").doc(n.id).set({...n,uid:i,date:n.date.toISOString()}).then(()=>console.log("Training added/updated successfully")).catch(o=>console.error("Error adding/updating training:",o))}).catch(r=>console.error("Error getting user:",r))}addMeal(n){n.id||(n.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){const i=n.id||this.client.createId();this.client.collection("Meal").doc(i).set({...n,uid:r.uid,date:n.date.toISOString()}).then(()=>console.log("Meal added/updated successfully")).catch(o=>console.error("Error adding/updating meal:",o))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(n){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(n.id).update({...n,date:n.date.toISOString()}):Promise.reject("User not authenticated"))}updateTraining(n){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(n.id).update({...n,date:n.date.toISOString()}):Promise.reject("User not authenticated"))}getTrainingsByDate(n){return console.log("Pobieranie trening\xf3w dla daty:",n),new xt(r=>{this.afAuth.currentUser.then(i=>{const o=i?.uid;if(o){const s=new Date(n);s.setHours(0,0,0,0);const a=new Date(n);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Training",u=>u.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane treningi:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(n){return console.log("Pobieranie posi\u0142k\xf3w dla daty:",n),new xt(r=>{this.afAuth.currentUser.then(i=>{const o=i?.uid;if(o){const s=new Date(n);s.setHours(0,0,0,0);const a=new Date(n);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Meal",u=>u.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane posi\u0142ki:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(n,r){return new xt(i=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("Meal",a=>a.where("uid","==",s).where("date",">=",n.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(n,r){return new xt(i=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("Training",a=>a.where("uid","==",s).where("date",">=",n.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(n){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(n).delete().then(()=>console.log("Training deleted successfully")).catch(o=>console.error("Error deleting training:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(n){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(n).delete().then(()=>console.log("Meal deleted successfully")).catch(o=>console.error("Error deleting meal:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const hr=void 0,sie=["pl",[["a","p"],["AM","PM"],hr],hr,[["n","p","w","\u015b","c","p","s"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["N","P","W","\u015a","C","P","S"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],hr,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",hr,"{1} {0}",hr],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[hr,"$"],CAD:[hr,"$"],CNY:[hr,"\xa5"],GBP:[hr,"\xa3"],HKD:[hr,"$"],ILS:[hr,"\u20aa"],INR:[hr,"\u20b9"],JPY:[hr,"\xa5"],KRW:[hr,"\u20a9"],MXN:[hr,"$"],NZD:[hr,"$"],PHP:[hr,"\u20b1"],PLN:["z\u0142"],RON:[hr,"lej"],TWD:[hr,"NT$"],USD:[hr,"$"],VND:[hr,"\u20ab"]},"ltr",function oie(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:0===r&&n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?3:0===r&&1!==n&&n%10===Math.floor(n%10)&&n%10>=0&&n%10<=1||0===r&&n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||0===r&&n%100===Math.floor(n%100)&&n%100>=12&&n%100<=14?4:5}];let Jj=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(Ie(Ra),Ie(po))}}static{this.\u0275dir=it({type:t})}}return t})(),Fl=(()=>{class t extends Jj{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275dir=it({type:t,features:[cn]})}}return t})();const ra=new ye(""),cie={provide:ra,useExisting:Kt(()=>ia),multi:!0},die=new ye("");let ia=(()=>{class t extends Jj{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lie(){const t=Fu()?Fu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(Ie(Ra),Ie(po),Ie(die,8))}}static{this.\u0275dir=it({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ze("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[On([cie]),cn]})}}return t})();function ac(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const yi=new ye(""),uc=new ye("");function r$(t){return ac(t.value)?{required:!0}:null}function gw(t){return null}function c$(t){return null!=t}function l$(t){return rm(t)?Sn(t):t}function d$(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function h$(t,e){return e.map(n=>n(t))}function f$(t){return t.map(e=>function fie(t){return!t.validate}(e)?e:n=>e.validate(n))}function eM(t){return null!=t?function p$(t){if(!t)return null;const e=t.filter(c$);return 0==e.length?null:function(n){return d$(h$(n,e))}}(f$(t)):null}function tM(t){return null!=t?function g$(t){if(!t)return null;const e=t.filter(c$);return 0==e.length?null:function(n){return function aie(...t){const e=MF(t),{args:n,keys:r}=CV(t),i=new xt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,d=s;for(let p=0;p<s;p++){let m=!1;Eo(n[p]).subscribe(Pe(o,y=>{m||(m=!0,d--),a[p]=y},()=>u--,void 0,()=>{(!u||!m)&&(d||o.next(r?TV(r,a):a),o.complete())}))}});return e?i.pipe(bV(e)):i}(h$(n,e).map(l$)).pipe(ke(d$))}}(f$(t)):null}function m$(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function nM(t){return t?Array.isArray(t)?t:[t]:[]}function mw(t,e){return Array.isArray(t)?t.includes(e):t===e}function v$(t,e){const n=nM(e);return nM(t).forEach(i=>{mw(n,i)||n.push(i)}),n}function I$(t,e){return nM(e).filter(n=>!mw(t,n))}class E${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class xi extends E${get formDirective(){return null}get path(){return null}}class cc extends E${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class w${constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let lc=(()=>{class t extends w${constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Ie(cc,2))}}static{this.\u0275dir=it({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&bh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[cn]})}}return t})(),E_=(()=>{class t extends w${constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Ie(xi,10))}}static{this.\u0275dir=it({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&bh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[cn]})}}return t})();const w_="VALID",yw="INVALID",$f="PENDING",C_="DISABLED";class zf{}class b$ extends zf{constructor(e,n){super(),this.value=e,this.source=n}}class oM extends zf{constructor(e,n){super(),this.pristine=e,this.source=n}}class sM extends zf{constructor(e,n){super(),this.touched=e,this.source=n}}class vw extends zf{constructor(e,n){super(),this.status=e,this.source=n}}function aM(t){return(Iw(t)?t.validators:t)||null}function uM(t,e){return(Iw(e)?e.asyncValidators:t)||null}function Iw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class cM{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=um(()=>this.statusReactive()),this.statusReactive=Ki(void 0),this._pristine=um(()=>this.pristineReactive()),this.pristineReactive=Ki(!0),this._touched=um(()=>this.touchedReactive()),this.touchedReactive=Ki(!1),this._events=new R,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qs(this.statusReactive)}set status(e){qs(()=>this.statusReactive.set(e))}get valid(){return this.status===w_}get invalid(){return this.status===yw}get pending(){return this.status==$f}get disabled(){return this.status===C_}get enabled(){return this.status!==C_}get pristine(){return qs(this.pristineReactive)}set pristine(e){qs(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return qs(this.touchedReactive)}set touched(e){qs(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(v$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(v$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(I$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(I$(e,this._rawAsyncValidators))}hasValidator(e){return mw(this._rawValidators,e)}hasAsyncValidator(e){return mw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new sM(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new sM(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new oM(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new oM(!0,r))}markAsPending(e={}){this.status=$f;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new vw(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=C_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new b$(this.value,r)),this._events.next(new vw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=w_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w_||this.status===$f)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new b$(this.value,n)),this._events.next(new vw(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C_:w_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=$f,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n};const r=l$(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new vw(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new kt,this.statusChanges=new kt}_calculateStatus(){return this._allControlsDisabled()?C_:this.errors?yw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($f)?$f:this._anyControlsHaveStatus(yw)?yw:w_}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new oM(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new sM(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Iw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Iie(t){return Array.isArray(t)?eM(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Eie(t){return Array.isArray(t)?tM(t):t||null}(this._rawAsyncValidators)}}class lM extends cM{constructor(e,n,r){super(aM(n),uM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function D$(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function T$(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Hf=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>Ew}),Ew="always";function b_(t,e,n=Ew){dM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function bie(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&A$(t,e)})}(t,e),function Die(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Tie(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&A$(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Cie(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function bw(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function dM(t,e){const n=function _$(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(m$(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function y$(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(m$(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();bw(e._rawValidators,i),bw(e._rawAsyncValidators,i)}function A$(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Pie={provide:xi,useExisting:Kt(()=>Vl)},T_=Promise.resolve();let Vl=(()=>{class t extends xi{get submitted(){return qs(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=um(()=>this.submittedReactive()),this.submittedReactive=Ki(!1),this._directives=new Set,this.ngSubmit=new kt,this.form=new lM({},eM(n),tM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){T_.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),b_(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){T_.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){T_.then(()=>{const r=this._findContainer(n.path),i=new lM({});(function S$(t,e){dM(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){T_.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){T_.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),function M$(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(Ie(yi,10),Ie(uc,10),Ie(Hf,8))}}static{this.\u0275dir=it({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ze("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[On([Pie]),cn]})}}return t})();function R$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function P$(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const x$=class extends cM{constructor(e=null,n,r){super(aM(n),uM(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Iw(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=P$(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){R$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){R$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){P$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Oie={provide:cc,useExisting:Kt(()=>Ya)},k$=Promise.resolve();let Ya=(()=>{class t extends cc{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new x$,this._registered=!1,this.name="",this.update=new kt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function pM(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===ia?n=o:function Mie(t){return Object.getPrototypeOf(t.constructor)===Fl}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function fM(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){b_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){k$.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Ph(r);k$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function ww(t,e){return[...e.path,t]}(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(Ie(xi,9),Ie(yi,10),Ie(uc,10),Ie(ra,10),Ie(tl,8),Ie(Hf,8))}}static{this.\u0275dir=it({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[On([Oie]),cn,Lr]})}}return t})(),D_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=it({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();const kie={provide:ra,useExisting:Kt(()=>Ll),multi:!0};let Ll=(()=>{class t extends Fl{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275dir=it({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Ze("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[On([kie]),cn]})}}return t})(),Ul=(()=>{class t{constructor(){this._validator=gw}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gw,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=it({type:t,features:[Lr]})}}return t})();const Jie={provide:yi,useExisting:Kt(()=>Bl),multi:!0};let Bl=(()=>{class t extends Ul{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ph,this.createValidator=n=>r$}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275dir=it({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&js("required",i._enabled?"":null)},inputs:{required:"required"},features:[On([Jie]),cn]})}}return t})();const roe={provide:yi,useExisting:Kt(()=>IM),multi:!0};let IM=(()=>{class t extends Ul{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=n=>n,this.createValidator=n=>function u$(t){if(!t)return gw;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ac(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=X(t)))(i||t)}})()}static{this.\u0275dir=it({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&js("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[On([roe]),cn]})}}return t})(),ioe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ds({type:t})}static{this.\u0275inj=Bi({})}}return t})(),Ni=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Hf,useValue:n.callSetDisabledState??Ew}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ds({type:t})}static{this.\u0275inj=Bi({imports:[ioe]})}}return t})();function soe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",9),re(2),O(),U(3,"input",10),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.calories,i)||(o.model.calories=i),ct(i)}),O()()}if(2&t){const n=Ge();te(2),fn(n.caloriesLabel),te(),Bt("ngModel",n.model.calories)}}function aoe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",11),re(2),O(),U(3,"input",12),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.burnedKcal,i)||(o.model.burnedKcal=i),ct(i)}),O()()}if(2&t){const n=Ge();te(2),fn(n.burnedCalories),te(),Bt("ngModel",n.model.burnedKcal)}}function uoe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",13),re(2),O(),U(3,"input",14),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.videoLink,i)||(o.model.videoLink=i),ct(i)}),O()()}if(2&t){const n=Ge();te(2),fn(n.videoLinkLabel),te(),Bt("ngModel",n.model.videoLink)}}function coe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",15),re(2),O(),U(3,"input",16),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.weight,i)||(o.model.weight=i),ct(i)}),O()()}if(2&t){const n=Ge();te(2),fn(n.weightLabel),te(),Bt("ngModel",n.model.weight)}}function loe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",17),re(2),O(),U(3,"input",18),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.time,i)||(o.model.time=i),ct(i)}),O()()}if(2&t){const n=Ge();te(2),fn(n.timeLabel),te(),Bt("ngModel",n.model.time)}}function doe(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"label",19),re(2),O(),U(3,"input",20),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.model.date,i)||(o.model.date=i),ct(i)}),Ze("ngModelChange",function(i){return pt(n),ct(Ge().onDateChange(i))}),O()()}if(2&t){const n=Ge();te(2),fn(n.dateLabel),te(),Bt("ngModel",n.model.date)}}let hoe=(()=>{class t{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.videoLinkLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.save=new kt}onSubmit(){this.save.emit(this.model)}onDateChange(n){this.model.date=new Date(n+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",videoLinkLabel:"videoLinkLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Wn],decls:18,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoLink",1,"form-label"],["type","string","id","videoLink","name","videoLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h5",1),re(2),O(),jo(3,"button",2),O(),U(4,"div",3)(5,"form",4),Ze("ngSubmit",function(){return i.onSubmit()}),U(6,"div",5)(7,"label",6),re(8),O(),U(9,"input",7),jt("ngModelChange",function(s){return Dt(i.model.name,s)||(i.model.name=s),s}),O()(),jn(10,soe,4,2,"div",5)(11,aoe,4,2,"div",5)(12,uoe,4,2,"div",5)(13,coe,4,2,"div",5)(14,loe,4,2,"div",5)(15,doe,4,2,"div",5),U(16,"button",8),re(17," Zapisz zmiany "),O()()()),2&r&&(te(2),fn(i.title),te(6),fn(i.nameLabel),te(),Bt("ngModel",i.model.name),te(),tn(i.caloriesLabel?10:-1),te(),tn(i.burnedCalories?11:-1),te(),tn(i.videoLinkLabel?12:-1),te(),tn(i.weightLabel?13:-1),te(),tn(i.timeLabel?14:-1),te(),tn(i.dateLabel?15:-1))},dependencies:[Ni,D_,ia,Ll,lc,E_,Bl,Ya,Vl],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return t})(),Dw=(()=>{class t{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.videoLinkLabel="",this.dateLabel="",this.model={},this.save=new kt}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",videoLinkLabel:"videoLinkLabel",dateLabel:"dateLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Wn],decls:5,vars:10,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),Ze("save",function(s){return i.save.emit(s)}),O()()()()()),2&r&&(en("id",i.modalId),te(4),en("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("videoLinkLabel",i.videoLinkLabel)("model",i.model))},dependencies:[hoe],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}"]})}}return t})(),foe=(()=>{class t{constructor(){this.trainingAndMealService=G(jf),this.meals=[],this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}addMeal(n){this.trainingAndMealService.addMeal(n),this.meals.push(n),console.log("Meal added:",n),this.resetForm()}onDateChange(n){this.model.date=new Date(n+"T00:00:00")}resetForm(){this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}onCloseModal(){this.resetForm()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-meal-modal"]],standalone:!0,features:[Wn],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","dateLabel","model"]],template:function(r,i){1&r&&(U(0,"app-modal",0),Ze("save",function(s){return i.addMeal(s)}),O()),2&r&&en("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("dateLabel","Data")("model",i.model)},dependencies:[Ni,Dw]})}}return t})(),poe=(()=>{class t{constructor(){this.trainingAndMealService=G(jf),this.router=G(jr),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:""}}addMeal(n){throw new Error("Method not implemented.")}addTraining(n){this.trainingAndMealService.addTraining(n),this.training.push(n),console.log("Meal added:",n),this.router.navigate(["/home"]),this.resetForm()}resetForm(){this.model={name:"",burnedKcal:0,time:"",videoLink:"",date:new Date,isDone:!1,id:""}}onDateChange(n){this.model.date=new Date(`${n}T00:00:00`)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-training-modal"]],standalone:!0,features:[Wn],decls:1,vars:8,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(U(0,"app-modal",0),Ze("save",function(s){return i.addTraining(s)}),O()),2&r&&en("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Ni,Dw]})}}return t})(),goe=(()=>{class t{constructor(){this.meal=null,this.Save=new kt,this.close=new kt,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}ngOnChanges(n){n.meal&&this.meal&&(this.model={...this.meal,date:new Date(this.meal.date)})}saveMeal(n){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Lr,Wn],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){1&r&&(U(0,"app-modal",0),Ze("save",function(s){return i.saveMeal(s)}),O()),2&r&&en("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[Ni,Dw]})}}return t})(),moe=(()=>{class t{constructor(){this.training=null,this.Save=new kt,this.close=new kt,this.model={name:"",isDone:!1,burnedKcal:0,time:"",videoLink:"",date:new Date,id:""}}ngOnChanges(n){n.training&&this.training&&(this.model={...this.training,date:new Date(this.training.date)})}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Lr,Wn],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(U(0,"app-modal",0),Ze("save",function(){return i.saveTraining()}),O()),2&r&&en("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Ni,Dw]})}}return t})(),_oe=(()=>{class t{constructor(){this.firestore=G(Bf)}getQuotes(){return this.firestore.collection("quotes").valueChanges()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const yoe=t=>["/day-details",t];function voe(t,e){if(1&t&&(U(0,"div",1)(1,"p"),re(2),O()()),2&t){const n=Ge();te(2),fn(n.randomQuote)}}function Ioe(t,e){if(1&t&&(U(0,"span"),re(1),O()),2&t){const n=e.$implicit;te(),fn(n)}}function Eoe(t,e){if(1&t){const n=mr();U(0,"div",8),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge().selectDay(i.date))}),re(1),O()}if(2&t){const n=e.$implicit,r=Ge();bh("other-month",n.isOtherMonth)("has-events",r.hasEventsForDay(n.date)),te(),cr(" ",n.date.getDate()," ")}}function woe(t,e){if(1&t){const n=mr();U(0,"div"),re(1),O(),U(2,"div",19)(3,"button",20),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge(2).editTraining(i))}),re(4," Edytuj "),O(),U(5,"button",21),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge(2).deleteTraining(i.id))}),re(6," Usu\u0144 "),O(),U(7,"label",22)(8,"input",23),Ze("change",function(){const i=pt(n).$implicit;return ct(Ge(2).toggleTrainingDone(i))}),O(),re(9," Zrobiony "),O()()}if(2&t){const n=e.$implicit;te(),tI(" ",n.name," - ",n.burnedKcal," kcal ",n.time,"min"),te(7),en("checked",n.isDone)}}function Coe(t,e){if(1&t){const n=mr();U(0,"div"),re(1),O(),U(2,"div",19)(3,"button",24),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge(2).editMeal(i))}),re(4," Edytuj "),O(),U(5,"button",21),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge(2).deleteMeal(i.id))}),re(6," Usu\u0144 "),O()()}if(2&t){const n=e.$implicit;te(),tI(" ",n.name," - ",n.calories," kcal (",n.weight," g)")}}function boe(t,e){if(1&t&&(U(0,"div",15)(1,"a",18)(2,"h4"),re(3),xa(4,"date"),O()(),U(5,"div")(6,"h4"),re(7,"Treningi"),O(),Uo(8,woe,10,4,null,null,cs),O(),U(10,"div")(11,"h4"),re(12,"Posi\u0142ki"),O(),Uo(13,Coe,7,3,null,null,cs),O()()),2&t){const n=e.$implicit,r=Ge();te(),en("routerLink",G0(5,yoe,n.date.toISOString())),te(2),fn(Xg(4,2,n.date,"EEEE, d MMMM")),te(5),Bo(r.getTrainingsForDay(n.date)),te(5),Bo(r.getMealsForDay(n.date))}}!function j7(t,e,n){(function sG(t,e,n){"string"!=typeof e&&(n=e,e=t[Dn.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Th[e]=t,n&&(Th[e][Dn.ExtraData]=n)})(t,e,n)}(sie);let Toe=(()=>{class t{constructor(){this.TrainingAndMealService=G(jf),this.quoteService=G(_oe),this.randomQuote="",this.meals=Ki([]),this.trainings=Ki([]),this.calendarDays=[],this.currentWeek=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.showModal=Ki(!1),this.selectedDay=null,this.dayNames=["Pn","Wt","\u015ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar(),this.generateWeek(new Date),this.loadRandomQuote()}generateWeek(n){const r=new Date(n.setDate(n.getDate()-n.getDay()+1));this.currentWeek=[];for(let i=0;i<7;i++){const o=new Date(r);o.setDate(r.getDate()+i),this.currentWeek.push({date:o,isOtherMonth:!1})}}prevWeek(){const n=this.currentWeek[0].date,r=new Date(n.setDate(n.getDate()-7));this.generateWeek(r)}nextWeek(){const n=this.currentWeek[6].date,r=new Date(n.setDate(n.getDate()+1));this.generateWeek(r)}getWeekRange(){const r=this.currentWeek[6].date;return`${this.currentWeek[0].date.toLocaleDateString()} - ${r.toLocaleDateString()}`}selectDay(n){this.selectedDay=n,console.log("Wybrano dzie\u0144:",this.selectedDay),this.generateWeek(n)}loadData(){this.TrainingAndMealService.getTrainings().subscribe(n=>{const r=n.map((i,o)=>({...i,id:i.id||`training-${o}-${(new Date).getTime()}`,date:new Date(i.date)}));this.trainings.set(r)}),this.TrainingAndMealService.getMeals().subscribe(n=>{const r=n.map((i,o)=>({...i,id:i.id||`meal-${o}-${(new Date).getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}getMealsForDay(n){return this.meals().filter(r=>r.date.getDate()===n.getDate()&&r.date.getMonth()===n.getMonth()&&r.date.getFullYear()===n.getFullYear())}getTrainingsForDay(n){return this.trainings().filter(r=>r.date.getDate()===n.getDate()&&r.date.getMonth()===n.getMonth()&&r.date.getFullYear()===n.getFullYear())}generateCalendar(){const n=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),s=(n.getDay()||7)-1,u=7-(r.getDay()||7);this.calendarDays=[];for(let d=s;d>0;d--){const p=new Date(this.currentYear,this.currentMonth,1-d);this.calendarDays.push({date:p,isOtherMonth:!0})}for(let d=1;d<=i;d++){const p=new Date(this.currentYear,this.currentMonth,d);this.calendarDays.push({date:p,isOtherMonth:!1})}for(let d=1;d<=u;d++){const p=new Date(this.currentYear,this.currentMonth+1,d);this.calendarDays.push({date:p,isOtherMonth:!0})}}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}saveEditedMeal(n){this.TrainingAndMealService.updateMeal(n).then(()=>{this.meals.set(this.meals().map(r=>r.id===n.id?n:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}editMeal(n){this.selectedMeal={...n}}closeModal(){this.showModal.set(!1)}saveEditedTraining(n){this.TrainingAndMealService.updateTraining(n).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===n.id?n:r))}).catch(r=>{console.error("Error saving edited training:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 treningu. Spr\xf3buj ponownie.")})}editTraining(n){this.selectedTraining={...n}}deleteMeal(n){this.TrainingAndMealService.deleteMeal(n).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==n))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}deleteTraining(n){this.TrainingAndMealService.deleteTraining(n).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==n))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xf3buj ponownie.")})}toggleTrainingDone(n){const r={...n,isDone:!n.isDone};this.saveEditedTraining(r)}hasEventsForDay(n){return this.getMealsForDay(n).length>0||this.getTrainingsForDay(n).length>0}loadRandomQuote(){this.quoteService.getQuotes().subscribe(n=>{if(n.length>0){const r=Math.floor(Math.random()*n.length);this.randomQuote=n[r].name,console.log("Random Quote:",this.randomQuote)}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-calendar"]],standalone:!0,features:[On([{provide:Na,useValue:"pl"}]),Wn],decls:37,vars:6,consts:[[1,"login-container"],[1,"quote"],[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"layout-container"],[1,"monthly-calendar"],[1,"calendar-navigation"],[3,"click"],[1,"day-names"],[1,"calendar-days"],[3,"other-month","has-events"],[1,"weekly-view"],[1,"week-header"],[1,"week-days"],[1,"day-details"],[3,"Save","close","meal"],[3,"Save","close","training"],[2,"color","#254636",3,"routerLink"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm","edit-button",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm","delete-button",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"form-check-label","done-label"],["type","checkbox",1,"form-check-input",3,"change","checked"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm","edit-button",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){1&r&&(U(0,"div",0),jn(1,voe,3,1,"div",1),O(),U(2,"div",2)(3,"button",3),re(4," Dodaj Posi\u0142ek "),O(),U(5,"button",4),re(6," Dodaj Trening "),O()(),U(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),Ze("click",function(){return i.prevMonth()}),re(11,"Poprzedni"),O(),U(12,"span"),re(13),O(),U(14,"button",8),Ze("click",function(){return i.nextMonth()}),re(15,"Nast\u0119pny"),O()(),U(16,"div",9),Uo(17,Ioe,2,1,"span",null,cs),O(),U(19,"div",10),Uo(20,Eoe,2,5,"div",11,cs),O()(),U(22,"div",12)(23,"div",13)(24,"button",8),Ze("click",function(){return i.prevWeek()}),re(25,"Poprzedni tydzie\u0144"),O(),U(26,"span"),re(27),O(),U(28,"button",8),Ze("click",function(){return i.nextWeek()}),re(29,"Nast\u0119pny tydzie\u0144"),O()(),U(30,"div",14),Uo(31,boe,15,7,"div",15,cs),O()()(),jo(33,"app-meal-modal")(34,"app-training-modal"),U(35,"app-edit",16),Ze("Save",function(s){return i.saveEditedMeal(s)})("close",function(){return i.closeModal()}),O(),U(36,"app-edit-training",17),Ze("Save",function(s){return i.saveEditedTraining(s)})("close",function(){return i.closeModal()}),O()),2&r&&(te(),tn(i.randomQuote?1:-1),te(12),j0("",i.months[i.currentMonth]," ",i.currentYear,""),te(4),Bo(i.dayNames),te(3),Bo(i.calendarDays),te(7),cr(" ",i.getWeekRange()," "),te(4),Bo(i.currentWeek),te(4),en("meal",i.selectedMeal),te(),en("training",i.selectedTraining))},dependencies:[Nh,dm,foe,wD,Yh,poe,goe,moe,Ni],styles:[".calendar-container[_ngcontent-%COMP%], .layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:linear-gradient(135deg,#e0f7fa,#254636);padding:20px;border-radius:10px;color:#333}.monthly-calendar[_ngcontent-%COMP%]{flex:0 1 350px;max-height:400px;overflow:hidden;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;display:flex;flex-direction:column;justify-content:space-between}.calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#254636;border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#254636}.day-names[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day-names[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;transition:background-color .3s}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.calendar-days[_ngcontent-%COMP%]   div.other-month[_ngcontent-%COMP%]{color:#aaa}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:1px solid #0056b3}.weekly-view[_ngcontent-%COMP%]{flex:2;padding:20px;background:#f8f8f8;height:900px;overflow-y:auto;border-radius:10px;box-shadow:0 2px 10px #0000001a}.week-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#254636;border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#254636}.week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.day-details[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:8px;box-shadow:0 1px 5px #0000001a}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.day-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:#2f5957}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]{background-color:#d0e6e6}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]:hover{background-color:#b0d0d0}.quote-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px 0;padding:10px;background-color:#f0f0f0;border-left:5px solid #254636;border-radius:5px}.quote[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-size:1.5rem;font-style:italic;color:#555;text-align:center}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%], .done-label[_ngcontent-%COMP%]{color:#254636}.edit-button[_ngcontent-%COMP%]:hover, .delete-button[_ngcontent-%COMP%]:hover, .done-label[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#254636;border-color:#254636}input[type=checkbox][_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #25463680}"]})}}return t})(),A_=(()=>{class t{isAuthenticated(){return null!==this.currentUserSubject.value}constructor(){this.afAuth=G(fl),this.currentUserSubject=new se(null),this.afAuth.authState.subscribe(n=>{this.currentUserSubject.next(n)})}register(n,r){return this.afAuth.createUserWithEmailAndPassword(n,r)}login(n,r){return this.afAuth.signInWithEmailAndPassword(n,r)}logout(){return this.afAuth.signOut()}getCurrentUser(){return this.currentUserSubject.asObservable()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Doe(t,e){1&t&&(U(0,"p"),re(1,"Nazwa u\u017cytkownika jest wymagana."),O())}function Aoe(t,e){1&t&&(U(0,"p"),re(1,"Nazwa u\u017cytkownika mo\u017ce zawiera\u0107 tylko ma\u0142e litery i cyfry oraz musi zaczyna\u0107 si\u0119 od litery."),O())}function Soe(t,e){if(1&t&&(U(0,"div",10),jn(1,Doe,2,0,"p")(2,Aoe,2,0,"p"),O()),2&t){Ge();const n=Hs(4);te(),tn(null!=n.errors&&n.errors.required?1:-1),te(),tn(null!=n.errors&&n.errors.pattern?2:-1)}}function Moe(t,e){if(1&t){const n=mr();U(0,"div",7)(1,"label",14),re(2,"Nazwa u\u017cytkownika"),O(),U(3,"input",15,3),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.username,i)||(o.username=i),ct(i)}),O(),jn(5,Soe,3,2,"div",10),O()}if(2&t){const n=Hs(4),r=Ge();te(3),Bt("ngModel",r.username),te(2),tn(null!=n&&n.touched&&null!=n&&n.invalid?5:-1)}}function Roe(t,e){1&t&&(U(0,"p"),re(1,"E-mail jest wymagany."),O())}function Poe(t,e){if(1&t&&(U(0,"div",10),jn(1,Roe,2,0,"p"),O()),2&t){Ge();const n=Hs(10);te(),tn(null!=n.errors&&n.errors.required?1:-1)}}function xoe(t,e){1&t&&(U(0,"p"),re(1,"Has\u0142o jest wymagane."),O())}function Noe(t,e){1&t&&(U(0,"p"),re(1,"Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 ma\u0142\u0105 liter\u0119, jedn\u0105 wielk\u0105 liter\u0119, jedn\u0105 cyfr\u0119, jeden znak specjalny i musi mie\u0107 co najmniej 6 znak\xf3w d\u0142ugo\u015bci."),O())}function Ooe(t,e){if(1&t&&(U(0,"div",10),jn(1,xoe,2,0,"p")(2,Noe,2,0,"p"),O()),2&t){Ge();const n=Hs(16);te(),tn(null!=n.errors&&n.errors.required?1:-1),te(),tn(null!=n.errors&&n.errors.pattern?2:-1)}}function koe(t,e){1&t&&(U(0,"p"),re(1,"Potwierdzenie has\u0142a jest wymagane."),O())}function Foe(t,e){if(1&t&&(U(0,"div",10),jn(1,koe,2,0,"p"),O()),2&t){Ge();const n=Hs(4);te(),tn(null!=n.errors&&n.errors.required?1:-1)}}function Voe(t,e){1&t&&(U(0,"div",10)(1,"p"),re(2,"Has\u0142a nie s\u0105 zgodne."),O()())}function Loe(t,e){if(1&t){const n=mr();U(0,"div",7)(1,"label",16),re(2,"Potwierd\u017a has\u0142o"),O(),U(3,"input",17,4),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.confirmPassword,i)||(o.confirmPassword=i),ct(i)}),O(),jn(5,Foe,2,1,"div",10)(6,Voe,3,0,"div",10),O()}if(2&t){const n=Hs(4),r=Ge();te(3),Bt("ngModel",r.confirmPassword),te(2),tn(n.touched&&n.invalid?5:-1),te(),tn(r.password!==r.confirmPassword&&n.touched?6:-1)}}let J$=(()=>{class t{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.confirmPassword="",this.username="",this.emailChange=new kt,this.passwordChange=new kt,this.confirmPasswordChange=new kt,this.usernameChange=new kt,this.googleLogin=new kt,this.formSubmit=new kt}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onConfirmPasswordChange(){this.confirmPasswordChange.emit(this.confirmPassword)}onUsernameChange(){this.usernameChange.emit(this.username)}onSubmit(){this.isLogin?this.email&&this.password?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o."):this.email&&this.username&&this.password&&this.password===this.confirmPassword?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password",confirmPassword:"confirmPassword",username:"username"},outputs:{emailChange:"emailChange",passwordChange:"passwordChange",confirmPasswordChange:"confirmPasswordChange",usernameChange:"usernameChange",googleLogin:"googleLogin",formSubmit:"formSubmit"},standalone:!0,features:[Wn],decls:21,vars:9,consts:[["authForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],["usernameField","ngModel"],["confirmPasswordField","ngModel"],[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-]).{6,}$",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"disabled"],["for","username"],["id","username","type","text","name","username","required","","pattern","^[a-z][a-z0-9]*$","placeholder","Wpisz nazw\u0119 u\u017cytkownika",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","","placeholder","Potwierd\u017a has\u0142o",3,"ngModelChange","ngModel"]],template:function(r,i){if(1&r){const o=mr();U(0,"div",5)(1,"h2"),re(2),O(),U(3,"form",6,0),Ze("ngSubmit",function(){return pt(o),ct(i.onSubmit())}),jn(5,Moe,6,2,"div",7),U(6,"div",7)(7,"label",8),re(8,"E-mail"),O(),U(9,"input",9,1),jt("ngModelChange",function(a){return pt(o),Dt(i.email,a)||(i.email=a),ct(a)}),O(),jn(11,Poe,2,1,"div",10),O(),U(12,"div",7)(13,"label",11),re(14,"Has\u0142o"),O(),U(15,"input",12,2),jt("ngModelChange",function(a){return pt(o),Dt(i.password,a)||(i.password=a),ct(a)}),O(),jn(17,Ooe,3,2,"div",10),O(),jn(18,Loe,7,3,"div",7),U(19,"button",13),re(20),O()()()}if(2&r){const o=Hs(4),s=Hs(10),a=Hs(16);te(2),fn(i.isLogin?"Logowanie":"Rejestracja"),te(3),tn(i.isLogin?-1:5),te(4),Bt("ngModel",i.email),te(2),tn(s.touched&&s.invalid?11:-1),te(4),Bt("ngModel",i.password),te(2),tn(a.touched&&a.invalid?17:-1),te(),tn(i.isLogin?-1:18),te(),en("disabled",o.invalid),te(),fn(i.buttonText)}},dependencies:[Ni,D_,ia,lc,E_,Bl,IM,Ya,Vl],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#00796b;color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:#004d40}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return t})(),Uoe=(()=>{class t{constructor(){this.router=G(jr),this.authService=G(A_),this.cdr=G(tl),this.email="",this.password="",this.isLogin=!0}login({email:n,password:r}){console.log("Attempting to log in with email:",n),n&&r?this.authService.login(n,r).then(()=>{console.log("Login successful, navigating to /home"),this.router.navigate(["/home"]),this.cdr.detectChanges()}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-login"]],standalone:!0,features:[Wn],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","isLogin","buttonText","email","password"]],template:function(r,i){1&r&&(U(0,"app-auth-form",0),jt("emailChange",function(s){return Dt(i.email,s)||(i.email=s),s})("passwordChange",function(s){return Dt(i.password,s)||(i.password=s),s}),Ze("formSubmit",function(s){return i.login(s)}),O()),2&r&&(en("isLogin",!0)("buttonText","Zaloguj si\u0119"),Bt("email",i.email)("password",i.password))},dependencies:[Ni,J$]})}}return t})(),Boe=(()=>{class t{constructor(){this.email="",this.password="",this.confirmPassword="",this.username="",this.authService=G(A_),this.router=G(jr)}register({email:n,password:r,confirmPassword:i,username:o}){n&&r&&o?r===i?this.authService.register(n,r).then(()=>{this.router.navigate(["/home"]),console.log(`Zarejestrowano pomy\u015blnie u\u017cytkownika: ${o}`)}).catch(s=>{console.error("B\u0142\u0105d rejestracji:",s.message)}):console.error("Has\u0142a nie s\u0105 zgodne."):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-register"]],standalone:!0,features:[Wn],decls:1,vars:6,consts:[[3,"emailChange","passwordChange","confirmPasswordChange","usernameChange","formSubmit","isLogin","buttonText","email","password","confirmPassword","username"]],template:function(r,i){1&r&&(U(0,"app-auth-form",0),jt("emailChange",function(s){return Dt(i.email,s)||(i.email=s),s})("passwordChange",function(s){return Dt(i.password,s)||(i.password=s),s})("confirmPasswordChange",function(s){return Dt(i.confirmPassword,s)||(i.confirmPassword=s),s})("usernameChange",function(s){return Dt(i.username,s)||(i.username=s),s}),Ze("formSubmit",function(s){return i.register(s)}),O()),2&r&&(en("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Bt("email",i.email)("password",i.password)("confirmPassword",i.confirmPassword)("username",i.username))},dependencies:[Ni,J$]})}}return t})();const Za=()=>{const t=G(A_),e=G(jr);return console.log("AuthGuard: Checking authentication status"),t.isAuthenticated()?(console.log("AuthGuard: User is authenticated"),!0):(console.log("AuthGuard: User is not authenticated, redirecting to /login"),e.navigate(["/login"]),!1)};let joe=(()=>{class t{transform(n,r){console.log("Meals:",n),console.log("Trainings:",r);const i=n.reduce((s,a)=>{const u=parseInt(a.calories,10);return console.log("Meal:",a,"Calories:",u),s+(isNaN(u)?0:u)},0),o=r.reduce((s,a)=>{const u=parseInt(a.burnedKcal,10);return console.log("Training:",a,"BurnedKcal:",u),s+(isNaN(u)?0:u)},0);return console.log("Total Calories:",i),console.log("Total Burned Calories:",o),i-o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=br({name:"caloriesBalance",type:t,pure:!0,standalone:!0})}}return t})();let zoe=(()=>{class t{constructor(){this.http=G(GF),this.apiUrl="https://www.googleapis.com/youtube/v3"}getVideoDetails(n){return this.http.get(`https://www.googleapis.com/youtube/v3/videos?id=${n}&part=snippet,contentDetails,statistics&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}searchVideos(n,r=10){return this.http.get(`${this.apiUrl}/search?part=snippet&q=${n}&maxResults=${r}&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Hoe=(t,e)=>e.id;function qoe(t,e){if(1&t&&(U(0,"li",8)(1,"span",9),re(2),O(),re(3," - "),U(4,"span",10),re(5),O(),re(6),O()),2&t){const n=e.$implicit;te(2),fn(n.name),te(3),cr("",n.calories," kcal"),te(),cr(" (",n.weight," g) ")}}function Goe(t,e){if(1&t&&(U(0,"div",4)(1,"h3"),re(2,"Meals:"),O(),U(3,"ul",7),Uo(4,qoe,7,3,"li",8,cs),O()()),2&t){const n=Ge();te(4),Bo(n.meals())}}function Woe(t,e){if(1&t&&(U(0,"li",12)(1,"span",13),re(2),O(),re(3," - "),U(4,"span",14),re(5),O(),re(6),O()),2&t){const n=e.$implicit;te(2),fn(n.name),te(3),cr("",n.burnedKcal," kcal"),te(),cr(" (",n.time," min) ")}}function Koe(t,e){if(1&t&&(U(0,"div",5)(1,"h3"),re(2,"Trainings:"),O(),U(3,"ul",11),Uo(4,Woe,7,3,"li",12,Hoe),O()()),2&t){const n=Ge();te(4),Bo(n.trainings())}}function Qoe(t,e){if(1&t&&(U(0,"div",6)(1,"h3"),re(2,"Watch the video:"),O(),jo(3,"iframe",15),O()),2&t){const n=Ge();te(3),en("src",n.videoUrl,_v)}}function Yoe(t,e){1&t&&(U(0,"p"),re(1,"No video available for this training."),O())}let Zoe=(()=>{class t{constructor(){this.day=Ki(null),this.meals=Ki([]),this.trainings=Ki([]),this.youtubeService=G(zoe),this.route=G(ju),this.trainingAndMealService=G(jf),this.videoDetails=null,this.videoId=null,this.sanitizer=G(KT),this.videoUrl=null,this.route.paramMap.subscribe(n=>{const r=n.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){const i=new Date(r);this.day.set(i),this.loadDetails(i)}})}loadDetails(n){this.trainingAndMealService.getMealsByDate(n).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(n).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r),this.checkForVideo(r)})}checkForVideo(n){const r=n.find(i=>i.videoLink);r?(console.log("Training with video link found:",r),this.videoId=this.extractVideoId(r.videoLink),this.videoId?this.loadVideoDetails(this.videoId):(console.error("Brak ID wideo w linku"),this.videoUrl=null)):(console.log("Brak linku do wideo"),this.videoId=null,this.videoDetails=null,this.videoUrl=null)}extractVideoId(n){const i=n.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}loadVideoDetails(n){n&&this.youtubeService.getVideoDetails(n).subscribe(r=>{console.log("Odpowied\u017a z YouTube:",r),r.items&&r.items.length>0?(this.videoDetails=r.items[0],this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${n}`)):(console.error("Brak wynik\xf3w dla wideo"),this.videoDetails=null,this.videoUrl=null)},r=>{console.error("B\u0142\u0105d \u0142adowania wideo:",r)})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-day-details"]],standalone:!0,features:[Wn],decls:14,vars:11,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"balance-value"],[1,"meals"],[1,"trainings"],[1,"youtube-video"],[1,"meal-list"],[1,"meal-item"],[1,"meal-name"],[1,"meal-calories"],[1,"training-list"],[1,"training-item"],[1,"training-name"],[1,"training-burned"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h2",1),re(2),xa(3,"date"),O(),U(4,"div",2)(5,"h3"),re(6,"Calories balance:"),O(),U(7,"p",3),re(8),xa(9,"caloriesBalance"),O()(),jn(10,Goe,6,0,"div",4)(11,Koe,6,0,"div",5)(12,Qoe,4,1,"div",6)(13,Yoe,2,0,"p"),O()),2&r&&(te(2),cr("Details for ",Xg(3,5,i.day(),"fullDate"),""),te(6),cr(" ",Xg(9,8,i.meals(),i.trainings())," kcal "),te(2),tn(i.meals().length>0?10:-1),te(),tn(i.trainings().length>0?11:-1),te(),tn(i.videoUrl?12:13))},dependencies:[dm,joe],styles:[".day-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:800px;margin:30px auto;color:#fff}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.meals[_ngcontent-%COMP%], .trainings[_ngcontent-%COMP%]{background-color:#fffc;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d}.meal-list[_ngcontent-%COMP%], .training-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0;color:#333}.meal-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.meal-name[_ngcontent-%COMP%], .training-name[_ngcontent-%COMP%]{color:#006400}.meal-calories[_ngcontent-%COMP%], .training-burned[_ngcontent-%COMP%]{color:#d32f2f}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1rem}.youtube-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;margin:0 auto}}"]})}}return t})(),Joe=(()=>{class t{constructor(){this.client=G(Bf),this.afAuth=G(fl)}addMeasurement(n){return new Promise((r,i)=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("measurements").add({...n,uid:s,date:n.date.toString()}).then(()=>{console.log("Measurement added successfully"),r()}).catch(a=>{console.error("Error adding measurement:",a),i(a)}):i(new Error("No user found"))}).catch(o=>{console.error("Error getting user:",o),i(o)})})}getMeasurements(){return new xt(n=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("measurements",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{n.next(o)}):n.next([])}).catch(()=>n.next([]))})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Xoe(t,e){if(1&t&&(U(0,"tr")(1,"td"),re(2),O(),U(3,"td"),re(4),O(),U(5,"td",8),re(6),O(),U(7,"td",8),re(8),O(),U(9,"td",8),re(10),O(),U(11,"td",8),re(12),O(),U(13,"td",8),re(14),O(),U(15,"td",8),re(16),O()()),2&t){const n=e.$implicit,r=e.$index,i=Ge(2);te(2),fn(n.date),te(2),fn(n.weight),te(),en("ngStyle",i.getStyle(n,r,"waist")),te(),fn(n.waist),te(),en("ngStyle",i.getStyle(n,r,"hips")),te(),fn(n.hips),te(),en("ngStyle",i.getStyle(n,r,"thigh")),te(),fn(n.thigh),te(),en("ngStyle",i.getStyle(n,r,"buttocks")),te(),fn(n.buttocks),te(),en("ngStyle",i.getStyle(n,r,"arms")),te(),fn(n.arms),te(),en("ngStyle",i.getStyle(n,r,"chest")),te(),fn(n.chest)}}function ese(t,e){if(1&t&&(U(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),re(5,"Data"),O(),U(6,"th"),re(7,"Waga (kg)"),O(),U(8,"th"),re(9,"Talia (cm)"),O(),U(10,"th"),re(11,"Biodra (cm)"),O(),U(12,"th"),re(13,"Uda (cm)"),O(),U(14,"th"),re(15,"Po\u015bladki (cm)"),O(),U(16,"th"),re(17,"Ramiona (cm)"),O(),U(18,"th"),re(19,"Klatka piersiowa (cm)"),O()()(),U(20,"tbody"),Uo(21,Xoe,17,14,"tr",null,cs),O()()()),2&t){const n=Ge();te(21),Bo(n.measurements)}}function tse(t,e){if(1&t){const n=mr();U(0,"div",7)(1,"form",9),Ze("ngSubmit",function(){return pt(n),ct(Ge().addMeasurement())}),U(2,"div",10)(3,"label",11),re(4,"Data:"),O(),U(5,"input",12),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.date,i)||(o.newMeasurement.date=i),ct(i)}),O()(),U(6,"div",10)(7,"label",13),re(8,"Talia:"),O(),U(9,"input",14),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.waist,i)||(o.newMeasurement.waist=i),ct(i)}),O()(),U(10,"div",10)(11,"label",15),re(12,"Biodra:"),O(),U(13,"input",16),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.hips,i)||(o.newMeasurement.hips=i),ct(i)}),O()(),U(14,"div",10)(15,"label",17),re(16,"Po\u015bladki:"),O(),U(17,"input",18),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.buttocks,i)||(o.newMeasurement.buttocks=i),ct(i)}),O()(),U(18,"div",10)(19,"label",19),re(20,"Uda:"),O(),U(21,"input",20),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.thigh,i)||(o.newMeasurement.thigh=i),ct(i)}),O()(),U(22,"div",10)(23,"label",21),re(24,"Ramiona:"),O(),U(25,"input",22),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.arms,i)||(o.newMeasurement.arms=i),ct(i)}),O()(),U(26,"div",10)(27,"label",23),re(28,"Klatka piersiowa:"),O(),U(29,"input",24),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.chest,i)||(o.newMeasurement.chest=i),ct(i)}),O()(),U(30,"div",10)(31,"label",25),re(32,"Waga:"),O(),U(33,"input",26),jt("ngModelChange",function(i){pt(n);const o=Ge();return Dt(o.newMeasurement.weight,i)||(o.newMeasurement.weight=i),ct(i)}),O()(),U(34,"div",10)(35,"button",27),re(36,"Dodaj pomiar"),O()()()()}if(2&t){const n=Ge();te(5),Bt("ngModel",n.newMeasurement.date),te(4),Bt("ngModel",n.newMeasurement.waist),te(4),Bt("ngModel",n.newMeasurement.hips),te(4),Bt("ngModel",n.newMeasurement.buttocks),te(4),Bt("ngModel",n.newMeasurement.thigh),te(4),Bt("ngModel",n.newMeasurement.arms),te(4),Bt("ngModel",n.newMeasurement.chest),te(4),Bt("ngModel",n.newMeasurement.weight)}}let e3=(()=>{class t{constructor(n){this.measurementsService=n,this.measurements=[],this.isFormVisible=!1,this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}ngOnInit(){this.loadMeasurements()}loadMeasurements(){this.measurementsService.getMeasurements().subscribe(n=>{this.measurements=n})}addMeasurement(){this.measurementsService.addMeasurement(this.newMeasurement).then(()=>{this.loadMeasurements()}),this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}calculateChange(n,r){return 0===r?"-":(n.weight-this.measurements[r-1].weight).toFixed(2)}getStyle(n,r,i){if(0===r)return{};const s=n[i],a=this.measurements[r-1][i];if("number"==typeof s&&"number"==typeof a){const u=s-a;return u>0?{color:"red"}:u<0?{color:"green"}:{color:"black"}}return{}}toggleForm(){this.isFormVisible=!this.isFormVisible}static{this.\u0275fac=function(r){return new(r||t)(Ie(Joe))}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-weight-control"]],standalone:!0,features:[Wn],decls:10,vars:2,consts:[[1,"measurements-summary"],[1,"justify-content-center"],[1,"measurements-content"],[1,"measurements-table"],[4,"ngIf"],[1,"btn-container"],[1,"btn-toggle",3,"click"],[1,"measurement-form-container"],[3,"ngStyle"],[1,"measurement-form",3,"ngSubmit"],[1,"form-group"],["for","date"],["type","date","id","date","name","date","required","",3,"ngModelChange","ngModel"],["for","waist"],["type","number","id","waist","name","waist","required","",3,"ngModelChange","ngModel"],["for","hips"],["type","number","id","hips","name","hips","required","",3,"ngModelChange","ngModel"],["for","buttocks"],["type","number","id","buttocks","name","buttocks","required","",3,"ngModelChange","ngModel"],["for","thigh"],["type","number","id","thigh","name","thigh","required","",3,"ngModelChange","ngModel"],["for","arms"],["type","number","id","arms","name","arms","required","",3,"ngModelChange","ngModel"],["for","chest"],["type","number","id","chest","name","chest","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h3",1),re(2,"Zestawienie Pomiar\xf3w cia\u0142a:"),O(),U(3,"div",2)(4,"div",3),jn(5,ese,23,0,"div",4),O(),U(6,"div",5)(7,"button",6),Ze("click",function(){return i.toggleForm()}),re(8,"Dodaj pomiar"),O()(),jn(9,tse,37,8,"div",7),O()()),2&r&&(te(5),en("ngIf",i.measurements.length>1),te(4),tn(i.isFormVisible?9:-1))},dependencies:[Ni,D_,ia,Ll,lc,E_,Bl,Ya,Vl,Nh,hF,gF],styles:[".measurements-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.measurements-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.measurements-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.measurement-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .measurement-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}@media (max-width: 768px){.measurement-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.justify-content-center[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{text-align:center;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .btn-toggle[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:auto;margin:0 auto}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return t})();function nse(t,e){if(1&t&&(U(0,"div")(1,"h3"),re(2),O(),U(3,"p"),re(4),O()()),2&t){const n=Ge();te(2),cr("Twoje BMI: ",n.bmi.toFixed(2),""),te(2),fn(n.bmiMessage)}}let t3=(()=>{class t{constructor(){this.weight=0,this.height=0,this.bmiMessage=""}calculateBMI(n){n.preventDefault(),this.weight>0&&this.height>0?(this.bmi=this.weight/(this.height*this.height),this.setBMIMessage()):(this.bmi=void 0,this.bmiMessage="Prosz\u0119 poda\u0107 poprawne warto\u015bci.")}setBMIMessage(){void 0!==this.bmi&&(this.bmi<18.5&&(this.bmiMessage="Masz niedowag\u0119."),this.bmi<24.9&&(this.bmiMessage="Twoja waga jest prawid\u0142owa."),this.bmiMessage=this.bmi<29.9?"Masz nadwag\u0119.":"Masz oty\u0142o\u015b\u0107.")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-bmi-calculator"]],standalone:!0,features:[Wn],decls:15,vars:3,consts:[[1,"bmi-calculator"],[3,"submit"],["for","weight"],["type","number","id","weight","placeholder","Podaj swoj\u0105 wag\u0119","required","",3,"ngModelChange","ngModel"],["for","height"],["type","number","id","height","step","0.01","placeholder","Podaj sw\xf3j wzrost","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h2"),re(2,"Oblicz swoje BMI"),O(),U(3,"form",1),Ze("submit",function(s){return i.calculateBMI(s)}),U(4,"div")(5,"label",2),re(6,"Waga (kg):"),O(),U(7,"input",3),jt("ngModelChange",function(s){return Dt(i.weight,s)||(i.weight=s),s}),O()(),U(8,"div")(9,"label",4),re(10,"Wzrost (m):"),O(),U(11,"input",5),jt("ngModelChange",function(s){return Dt(i.height,s)||(i.height=s),s}),O()(),U(12,"button",6),re(13,"Oblicz"),O()(),jn(14,nse,5,2,"div"),O()),2&r&&(te(7),Bt("ngModel",i.weight),te(4),Bt("ngModel",i.height),te(3),tn(i.bmi?14:-1))},dependencies:[Ni,D_,ia,Ll,lc,E_,Bl,Ya,Vl],styles:[".bmi-calculator[_ngcontent-%COMP%]{width:300px;margin:20px auto;padding:15px;border:1px solid #ccc;border-radius:5px;background-color:#f9f9f9}.bmi-calculator[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.bmi-calculator[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.bmi-calculator[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}.bmi-calculator[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.bmi-calculator[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;font-size:1em}.bmi-calculator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#254636;color:#fff;border:none;border-radius:5px;cursor:pointer}.bmi-calculator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1f3d2f}"]})}}return t})(),rse=(()=>{class t{constructor(){this.meals=Ki([]),this.trainings=Ki([]),this.currentMonth=new Date,this.trainingAndMealService=G(jf),this.cdr=G(tl),this.loadMonthlyDetails()}changeMonth(n){const r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+n),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){const n=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(n,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(n,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().filter(i=>!0===i.isDone).reduce((i,o)=>i+(o.burnedKcal?Number(o.burnedKcal):0),0)}totalTrainingTime(){const r=this.trainings().filter(i=>!0===i.isDone);return console.log("Completed Trainings:",r),r.reduce((i,o)=>{const s=o.time?Number(o.time):0;return console.log("Training Time:",s),i+(isNaN(s)?0:s)},0)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-monthly-summary"]],standalone:!0,features:[Wn],decls:25,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ze("click",function(){return i.changeMonth(-1)}),re(4," \u2190 Poprzedni miesi\u0105c "),O(),U(5,"h2",4),re(6),xa(7,"date"),O(),U(8,"button",3),Ze("click",function(){return i.changeMonth(1)}),re(9," Nast\u0119pny miesi\u0105c \u2192 "),O()(),U(10,"div",5)(11,"p")(12,"strong"),re(13,"\u0141\u0105czna liczba spo\u017cytych kalorii:"),O(),re(14),O(),U(15,"p")(16,"strong"),re(17,"\u0141\u0105czna liczba spalonych kalorii:"),O(),re(18),O(),U(19,"p")(20,"strong"),re(21,"\u0141\u0105czny czas trening\xf3w:"),O(),re(22),O()()()(),jo(23,"app-weight-control")(24,"app-bmi-calculator")),2&r&&(te(6),cr(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",Xg(7,4,i.currentMonth,"MMMM yyyy")," "),te(8),cr(" ",i.totalCalories()," kcal"),te(4),cr(" ",i.totalBurnedCalories()," kcal "),te(4),cr(" ",i.totalTrainingTime()," min "))},dependencies:[dm,e3,t3,Ni],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.monthly-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.monthly-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.monthly-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .monthly-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}@media (max-width: 768px){.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:8px 16px;border-radius:5px;font-size:14px;cursor:pointer;width:auto;margin:0 auto}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background-color:#2f5957;transform:scale(1.05)}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px;font-size:16px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333;margin:0 20px}"]})}}return t})(),EM=(()=>{class t{constructor(){this.client=G(Bf),this.afAuth=G(fl)}getAllFitnessPlans(){return this.client.collection("FitnessPlans").valueChanges()}createFitnessPlan(n){const r={...n};this.client.collection("FitnessPlans").add(r).then(()=>console.log("Plan fitness dodany")).catch(i=>console.error("B\u0142\u0105d przy dodawaniu planu fitness",i))}getFitnessPlanById(n){return this.client.collection("FitnessPlans",r=>r.where("id","==",n)).valueChanges().pipe(ke(r=>r.length>0?r[0]:void 0),Br(r=>{console.log("Fetched Plan Data from Firestore:",r)}),ke(r=>{if(r)return r;console.log("Brak planu dla podanego ID:",n)}))}updateFitnessPlan(n){this.client.collection("FitnessPlans",r=>r.where("id","==",n.id)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).update(n).then(()=>console.log("Plan fitness zaktualizowany")).catch(o=>console.error("B\u0142\u0105d przy aktualizacji planu fitness",o))})})}deleteFitnessPlan(n){this.client.collection("FitnessPlans",r=>r.where("id","==",n)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).delete().then(()=>console.log("Plan fitness usuni\u0119ty")).catch(o=>console.error("B\u0142\u0105d przy usuwaniu planu fitness",o))})})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ise(t,e){if(1&t){const n=mr();U(0,"div",5)(1,"div",7)(2,"input",8),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.videoLink,i)||(o.videoLink=i),ct(i)}),O(),U(3,"input",9),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.time,i)||(o.time=i),ct(i)}),O(),U(4,"input",10),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.burnedKcal,i)||(o.burnedKcal=i),ct(i)}),O(),U(5,"button",11),Ze("click",function(){const i=pt(n).$index;return ct(Ge().removeDay(i))}),re(6,"Usu\u0144 dzie\u0144"),O()()()}if(2&t){const n=e.$implicit;te(2),Bt("ngModel",n.videoLink),te(),Bt("ngModel",n.time),te(),Bt("ngModel",n.burnedKcal)}}let ose=(()=>{class t{constructor(){this.fitnessPlanService=G(EM),this.router=G(jr),this.plans=[],this.planName="",this.days=[],this.planDescription="",this.loadAllPlans()}loadAllPlans(){this.fitnessPlanService.getAllFitnessPlans().subscribe(n=>{console.log("Wszystkie plany:",n),this.plans=n})}addDay(){this.days.push({date:"",videoLink:"",time:"",burnedKcal:0})}removeDay(n){this.days.splice(n,1)}savePlan(){const n={id:this.fitnessPlanService.client.createId(),name:this.planName,description:this.planDescription,days:this.days,uid:""};this.fitnessPlanService.createFitnessPlan(n),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-training-plans"]],standalone:!0,features:[Wn],decls:11,vars:2,consts:[[1,"plan-form"],[1,"image-container"],["src","assets/foto.jpg","alt","Fitness Plan Image",1,"plan-image"],["placeholder","Nazwa planu",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Opis planu",1,"form-control",3,"ngModelChange","ngModel"],[1,"day-card"],[1,"btn-primary",3,"click"],[1,"day-form"],["placeholder","Link do YouTube",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Czas trwania (min)","type","number",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Spalone kcal","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-danger",3,"click"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"div",1),jo(2,"img",2),O(),U(3,"input",3),jt("ngModelChange",function(s){return Dt(i.planName,s)||(i.planName=s),s}),O(),U(4,"input",4),jt("ngModelChange",function(s){return Dt(i.planDescription,s)||(i.planDescription=s),s}),O(),Uo(5,ise,7,3,"div",5,cs),U(7,"button",6),Ze("click",function(){return i.addDay()}),re(8,"Dodaj dzie\u0144"),O(),U(9,"button",6),Ze("click",function(){return i.savePlan()}),re(10,"Zapisz plan"),O()()),2&r&&(te(3),Bt("ngModel",i.planName),te(),Bt("ngModel",i.planDescription),te(),Bo(i.days))},dependencies:[Ni,ia,Ll,lc,Ya],styles:[".plan-form[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:10px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}.day-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;padding:15px;margin-bottom:15px}.day-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}button.btn-primary[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2f5957}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:10px}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return t})();const sse=t=>["/plan",t];function ase(t,e){if(1&t){const n=mr();U(0,"div",8),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge().selectPlan(i))}),U(1,"h4",9),re(2),O(),U(3,"p"),re(4),O(),U(5,"div",10)(6,"button",11),re(7," Wi\u0119cej "),O(),U(8,"button",12),Ze("click",function(){const i=pt(n).$implicit;return ct(Ge().deletePlan(i))}),re(9," Usu\u0144 "),O()()()}if(2&t){const n=e.$implicit,r=Ge();bh("selected",n.id===(null==r.selectedPlan?null:r.selectedPlan.id)),te(2),fn(n.name),te(2),fn(n.description),te(2),en("routerLink",G0(5,sse,n.id))}}let use=(()=>{class t{constructor(){this.fitnessPlanService=G(EM),this.calendarService=G(jf),this.fitnessPlans=[],this.selectedPlan=null,this.startDate=new Date,this.router=G(jr),this.fitnessPlanService.getAllFitnessPlans().subscribe(n=>{console.log("Plany w komponencie:",n),this.fitnessPlans=n})}selectPlan(n){console.log("Wybrano plan:",n),this.selectedPlan=n}goToPlanDetails(n){this.router.navigate([`/plan/${n}`])}startPlan(){if(console.log("Rozpoczynanie planu:",this.selectedPlan),this.selectedPlan){let n=this.startDate;n instanceof Date||(n=new Date(n)),this.selectedPlan.days.forEach((r,i)=>{const o=new Date(n);o.setDate(n.getDate()+i),this.calendarService.addTraining({name:r.name?`Trening: ${r.name}`:`Trening: Dzie\u0144 ${i+1}`,date:o,burnedKcal:r.burnedKcal||0,time:r.time||0,videoLink:r.videoLink}),this.router.navigate(["/home"]),console.log(`Dodano trening dnia ${o.toISOString()}: ${r.videoLink}`)})}}deletePlan(n){this.fitnessPlanService.deleteFitnessPlan(n.id),this.fitnessPlans=this.fitnessPlans.filter(r=>r.id!==n.id),console.log("Plan usuni\u0119ty",n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-training-plans-select"]],standalone:!0,features:[Wn],decls:13,vars:1,consts:[["src","assets/foto2.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"fitness-plan-select"],[1,"plan-cards-container"],[1,"plan-card",3,"selected"],[1,"form-group"],["for","startDate"],["id","startDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"plan-card",3,"click"],[1,"plan-title"],[1,"button-group"],[1,"btn","btn-link","btn-sm","more-button",3,"routerLink"],[1,"btn","btn-link","btn-sm","delete-button",3,"click"]],template:function(r,i){1&r&&(jo(0,"img",0),U(1,"div",1)(2,"h3"),re(3,"Fitness Plans:"),O(),U(4,"div",2),Uo(5,ase,10,7,"div",3,cs),O(),U(7,"div",4)(8,"label",5),re(9,"Wybierz dat\u0119 rozpocz\u0119cia "),O(),U(10,"input",6),jt("ngModelChange",function(s){return Dt(i.startDate,s)||(i.startDate=s),s}),O()(),U(11,"button",7),Ze("click",function(){return i.startPlan()}),re(12,"Rozpocznij Plan"),O()()),2&r&&(te(5),Bo(i.fitnessPlans),te(5),Bt("ngModel",i.startDate))},dependencies:[Ni,ia,lc,Ya,Nh,wD,Yh],styles:[".fitness-plan-select[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:10px;color:#333}h3[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;margin-bottom:20px}.plan-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;max-width:780px;margin:0 auto}.plan-card[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:20px;width:250px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease}.plan-card.selected[_ngcontent-%COMP%]{background:#dcdcdc}.plan-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin-bottom:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;border-radius:5px;padding:8px 12px}.form-group[_ngcontent-%COMP%]{margin-top:20px}#startDate[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{margin-top:20px;background:#254636;border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#254636}.more-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{color:#254636}"]})}}return t})();function cse(t,e){if(1&t&&(U(0,"div"),jo(1,"iframe",10),O()),2&t){const n=Ge().$implicit,r=Ge();te(),en("src",r.getVideoUrl(n.videoLink),_v)}}function lse(t,e){if(1&t){const n=mr();U(0,"div",2)(1,"div",4)(2,"h5",5),re(3),O(),U(4,"div",6)(5,"label",7),re(6,"Spalone kalorie"),O(),U(7,"input",8),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.burnedKcal,i)||(o.burnedKcal=i),ct(i)}),O()(),U(8,"div",6)(9,"label",7),re(10,"Czas treningu (w minutach)"),O(),U(11,"input",8),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.time,i)||(o.time=i),ct(i)}),O()(),U(12,"div",6)(13,"label",7),re(14,"Link wideo"),O(),U(15,"input",9),jt("ngModelChange",function(i){const o=pt(n).$implicit;return Dt(o.videoLink,i)||(o.videoLink=i),ct(i)}),O()(),U(16,"div",6)(17,"label"),re(18,"Filmik z YouTube"),O(),jn(19,cse,2,1,"div"),O()()()}if(2&t){const n=e.$implicit,r=e.$index;te(3),cr("Dzie\u0144 ",r+1,""),te(2),Pa("for","burnedKcal",r,""),te(2),Pa("id","burnedKcal",r,""),Bt("ngModel",n.burnedKcal),te(2),Pa("for","duration",r,""),te(2),Pa("id","duration",r,""),Bt("ngModel",n.time),te(2),Pa("for","videoLink",r,""),te(2),Pa("id","videoLink",r,""),Bt("ngModel",n.videoLink),te(4),tn(n.videoLink?19:-1)}}let dse=(()=>{class t{constructor(){this.fitnessPlanService=G(EM),this.route=G(ju),this.planId=null,this.plan=void 0,this.sanitizer=G(KT)}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");console.log("Fetched Plan ID:",n),n&&this.fitnessPlanService.getFitnessPlanById(n).subscribe(r=>{r?this.plan=r:console.log("Brak planu dla ID:",n)})}savePlanEdits(){this.plan&&(this.fitnessPlanService.updateFitnessPlan(this.plan),console.log("Zmiany zapisane dla planu:",this.plan))}getVideoUrl(n){if(n){const i=`https://www.youtube.com/embed/${this.extractVideoId(n)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}return""}extractVideoId(n){const i=n.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-training-plan-detail"]],standalone:!0,features:[Wn],decls:8,vars:1,consts:[[1,"plan-details"],[1,"card-container"],[1,"card","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[3,"for"],["type","number",1,"form-control",3,"ngModelChange","ngModel","id"],["type","text",1,"form-control",3,"ngModelChange","ngModel","id"],["width","100%","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h4"),re(2),O(),U(3,"div",1),Uo(4,lse,20,17,"div",2,cs),O(),U(6,"button",3),Ze("click",function(){return i.savePlanEdits()}),re(7,"Zapisz zmiany"),O()()),2&r&&(te(2),cr("Szczeg\xf3\u0142y planu: ",null==i.plan?null:i.plan.name,""),te(2),Bo(null==i.plan?null:i.plan.days))},dependencies:[Ni,ia,Ll,lc,Ya],styles:[".plan-details[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-radius:10px;color:#333}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}.card[_ngcontent-%COMP%]{width:30%;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;padding:20px;color:#333}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}.card-body[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}iframe[_ngcontent-%COMP%]{border-radius:10px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}"]})}}return t})();function fse(t,e){if(1&t){const n=mr();U(0,"p",1)(1,"strong"),re(2,"Email:"),O(),re(3),O(),U(4,"p",1)(5,"strong"),re(6,"UID:"),O(),re(7),O(),U(8,"button",2),Ze("click",function(){return pt(n),ct(Ge().authService.logout())}),re(9,"Wyloguj"),O()}if(2&t){const n=e;te(3),cr(" ",n.email,""),te(4),cr(" ",n.uid,"")}}function pse(t,e){1&t&&(U(0,"p",1),re(1,"No user is logged in."),O())}const gse={providers:[function $J(t,...e){return ts([{provide:Qh,multi:!0,useValue:t},[],{provide:ju,useFactory:TL,deps:[jr]},{provide:Rh,multi:!0,useFactory:DL},e.map(n=>n.\u0275providers)])}([{path:"",component:(()=>{class t{constructor(){this.router=G(jr)}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-welcome"]],standalone:!0,features:[Wn],decls:13,vars:0,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-images"],["src","assets/welcome.jpg","alt","Fitness Image 1",1,"welcome-image"],["src","assets/welcome2.jpeg","alt","Fitness Image 2",1,"welcome-image"],[1,"welcome-description"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(U(0,"div",0)(1,"h1",1),re(2,"Witaj w swoim kalendarzu fitness!"),O(),U(3,"p",2),re(4,"U nas mo\u017cesz \u015bledzi\u0107 swoje plany treningowe, spalone kalorie i wiele wi\u0119cej."),O(),U(5,"div",3),jo(6,"img",4)(7,"img",5),O(),U(8,"div",6)(9,"p"),re(10,"Wybierz jeden z naszych plan\xf3w treningowych, aby rozpocz\u0105\u0107 swoj\u0105 fitnessow\u0105 podr\xf3\u017c!"),O()(),U(11,"button",7),Ze("click",function(){return i.goToLogin()}),re(12,"Zaloguj si\u0119"),O()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-image:url(/assets/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;color:#fff;text-align:center;position:relative;z-index:1;padding:20px}.welcome-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out;margin-bottom:20px}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin:20px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s 1s forwards}.welcome-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:15px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 3s 1.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease,transform .3s ease;text-transform:uppercase;letter-spacing:1px;margin-top:30px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff);transform:scale(1.05)}.welcome-images[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:30px;flex-wrap:wrap;justify-content:space-evenly}.welcome-image[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;border-radius:10px;opacity:0;animation:_ngcontent-%COMP%_fadeInImage 2s 2s forwards}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0}to{opacity:1}}.welcome-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}"]})}}return t})()},{path:"home",component:Toe,canActivate:[Za]},{path:"login",component:Uoe},{path:"register",component:Boe},{path:"day-details/:day",component:Zoe,canActivate:[Za]},{path:"summary",component:rse,canActivate:[Za]},{path:"trainig-plans",component:ose,canActivate:[Za]},{path:"select-plan",component:use,canActivate:[Za]},{path:"plan/:id",component:dse,canActivate:[Za]},{path:"user",component:(()=>{class t{constructor(){this.authService=G(A_),this.userSignal=this.authService.getCurrentUser()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-user"]],standalone:!0,features:[Wn],decls:6,vars:3,consts:[[1,"user-details"],[1,"user-info"],[1,"btn-primary",3,"click"]],template:function(r,i){if(1&r&&(U(0,"div",0)(1,"h2"),re(2,"User Details"),O(),jn(3,fse,10,2),xa(4,"async"),jn(5,pse,2,0,"p",1),O()),2&r){let o;te(3),tn((o=Jg(4,1,i.userSignal))?3:5,o)}},dependencies:[Nh,MT],styles:[".user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#254636;margin-bottom:15px}.user-info[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;color:#333}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#254636}button.btn-primary[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:20px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2f5957}p.user-info[_ngcontent-%COMP%]{margin-top:10px}"]})}}return t})(),canActivate:[Za]},{path:"weight",component:e3,canActivate:[Za]},{path:"bmi",component:t3,canActivate:[Za]}]),function CY(...t){const e=[],n=new Set,r=n.has(al.HttpTransferCacheOptions);for(const{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return ts([[],jW(),n.has(al.NoHttpTransferCache)||r?[]:GQ({}),e])}(),function LQ(...t){const e=[GF,XF,ZF,{provide:kI,useExisting:ZF},{provide:FI,useFactory:()=>G(LT,{optional:!0})??G(XF)},{provide:_m,useValue:VQ,multi:!0},{provide:BT,useValue:!0},{provide:nV,useClass:FQ}];for(const n of t)e.push(...n.\u0275providers);return ts(e)}(),fy([iie,SX,EX.initializeApp({apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"})]),dm]},mse=()=>["/summary"],_se=()=>["/home"],yse=()=>["/select-plan"],vse=()=>["/trainig-plans"],Ise=()=>["/bmi"];function Ese(t,e){1&t&&(U(0,"div",1)(1,"button",4),re(2,"Osi\u0105gni\u0119cia"),O(),U(3,"button",4),re(4,"Kalnedarz"),O(),U(5,"button",4),re(6,"Fitness Plany"),O(),U(7,"button",4),re(8,"Stw\xf3rz Fitness Plan"),O(),U(9,"button",4),re(10,"Stw\xf3rz Fitness Plan"),O()()),2&t&&(te(),en("routerLink",Dh(5,mse)),te(2),en("routerLink",Dh(6,_se)),te(2),en("routerLink",Dh(7,yse)),te(2),en("routerLink",Dh(8,vse)),te(2),en("routerLink",Dh(9,Ise)))}function wse(t,e){if(1&t){const n=mr();U(0,"div",2)(1,"button",5),Ze("click",function(){return pt(n),ct(Ge().navigateToLogin())}),re(2,"Zaloguj si\u0119"),O(),U(3,"button",5),Ze("click",function(){return pt(n),ct(Ge().navigateToRegister())}),re(4,"Zarejestruj si\u0119"),O()()}}function Cse(t,e){if(1&t){const n=mr();U(0,"div",3)(1,"p"),re(2),O(),U(3,"button",6),re(4,"Moje konto"),O(),U(5,"button",7),Ze("click",function(){return pt(n),ct(Ge().logout())}),re(6,"Wyloguj"),O()()}2&t&&(te(2),cr("Witaj, ",e.email,""),te(),en("routerLink","/user"))}let bse=(()=>{class t{constructor(){this.authService=G(A_),this.router=G(jr),this.formChange=new kt,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(n){this.formChange.emit(n)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[Wn],decls:7,vars:9,consts:[[1,"navbar"],[1,"nav-links"],[1,"auth-buttons"],[1,"user-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){if(1&r&&(U(0,"div",0),jn(1,Ese,11,10,"div",1),xa(2,"async"),jn(3,wse,5,0,"div",2),xa(4,"async"),jn(5,Cse,7,2,"div",3),xa(6,"async"),O()),2&r){let o,s;te(),tn((o=Jg(2,3,i.user$))?1:-1,o),te(2),tn(Jg(4,5,i.user$)?-1:3),te(2),tn((s=Jg(6,7,i.user$))?5:-1,s)}},dependencies:[Nh,MT,wD,Yh],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#254636;color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return t})();(function dY(t,e){return wW({rootComponent:t,...IV(e)})})((()=>{class t{constructor(){this.client=G(Bf),this.products$=this.getProducts(),this.currentForm="login"}getProducts(){return this.client.collection("products").valueChanges()}showForm(n){this.currentForm=n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Pn({type:t,selectors:[["app-root"]],standalone:!0,features:[Wn],decls:3,vars:0,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){1&r&&(U(0,"app-navbar",0),Ze("formChange",function(s){return i.showForm(s)}),O(),U(1,"div",1),jo(2,"router-outlet"),O())},dependencies:[dD,Nh,bse],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:16px;cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{font-size:18px;margin:5px 0}"]})}}return t})(),gse).catch(t=>console.error(t))},574:(Go,Pr,dt)=>{dt.d(Pr,{A:()=>fr});var A=dt(401),Le=dt(779),Ne=dt(979),oe=dt(398);class Zt{constructor(tt,_t){this._delegate=tt,this.firebase=_t,(0,Ne._addComponent)(tt,new Le.uA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ne.deleteApp)(this._delegate)))}_getService(tt,_t=Ne._DEFAULT_ENTRY_NAME){var er;this._delegate.checkDestroyed();const Er=this._delegate.container.getProvider(tt);return!Er.isInitialized()&&"EXPLICIT"===(null===(er=Er.getComponent())||void 0===er?void 0:er.instantiationMode)&&Er.initialize(),Er.getImmediate({identifier:_t})}_removeServiceInstance(tt,_t=Ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(_t)}_addComponent(tt){(0,Ne._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,Ne._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Rn=new A.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function zt(){const Ht=function Ir(Ht){const tt={},_t={__esModule:!0,initializeApp:function mn(Ye,Un={}){const dn=Ne.initializeApp(Ye,Un);if((0,A.gR)(tt,dn.name))return tt[dn.name];const pe=new Ht(dn,_t);return tt[dn.name]=pe,pe},app:Er,registerVersion:Ne.registerVersion,setLogLevel:Ne.setLogLevel,onLog:Ne.onLog,apps:null,SDK_VERSION:Ne.SDK_VERSION,INTERNAL:{registerComponent:function Lt(Ye){const Un=Ye.name,dn=Un.replace("-compat","");if(Ne._registerComponent(Ye)&&"PUBLIC"===Ye.type){const pe=(wn=Er())=>{if("function"!=typeof wn[dn])throw Rn.create("invalid-app-argument",{appName:Un});return wn[dn]()};void 0!==Ye.serviceProps&&(0,A.zw)(pe,Ye.serviceProps),_t[dn]=pe,Ht.prototype[dn]=function(...wn){return this._getService.bind(this,Un).apply(this,Ye.multipleInstances?wn:[])}}return"PUBLIC"===Ye.type?_t[dn]:null},removeApp:function er(Ye){delete tt[Ye]},useAsService:function ni(Ye,Un){return"serverAuth"===Un?null:Un},modularAPIs:Ne}};function Er(Ye){if(!(0,A.gR)(tt,Ye=Ye||Ne._DEFAULT_ENTRY_NAME))throw Rn.create("no-app",{appName:Ye});return tt[Ye]}return _t.default=_t,Object.defineProperty(_t,"apps",{get:function Vt(){return Object.keys(tt).map(Ye=>tt[Ye])}}),Er.App=Ht,_t}(Zt);return Ht.INTERNAL=Object.assign(Object.assign({},Ht.INTERNAL),{createFirebaseNamespace:zt,extendNamespace:function tt(_t){(0,A.zw)(Ht,_t)},createSubscribe:A.tD,ErrorFactory:A.FA,deepExtend:A.zw}),Ht}(),ve=new oe.Vy("@firebase/app-compat");try{const Ht=(0,A.mS)();if(void 0!==Ht.firebase){ve.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const tt=Ht.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&ve.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const fr=he;!function At(Ht){(0,Ne.registerVersion)("@firebase/app-compat","0.2.43",Ht)}()},979:(Go,Pr,dt)=>{dt.r(Pr),dt.d(Pr,{FirebaseError:()=>oe.g,SDK_VERSION:()=>ai,_DEFAULT_ENTRY_NAME:()=>Ko,_addComponent:()=>ys,_addOrOverwriteComponent:()=>mc,_apps:()=>Vi,_clearComponents:()=>Qo,_components:()=>Kn,_getProvider:()=>aa,_isFirebaseApp:()=>nu,_isFirebaseServerApp:()=>Or,_registerComponent:()=>si,_removeServiceInstance:()=>Li,_serverApps:()=>oi,deleteApp:()=>ou,getApp:()=>xt,getApps:()=>iu,initializeApp:()=>ru,initializeServerApp:()=>vs,onLog:()=>R,registerVersion:()=>x,setLogLevel:()=>B});var A=dt(467),Le=dt(779),Ne=dt(398),oe=dt(401);const Zt=(S,$)=>$.some(le=>S instanceof le);let $e,Rn;const he=new WeakMap,ve=new WeakMap,Be=new WeakMap,mt=new WeakMap,At=new WeakMap;let tt={get(S,$,le){if(S instanceof IDBTransaction){if("done"===$)return ve.get(S);if("objectStoreNames"===$)return S.objectStoreNames||Be.get(S);if("store"===$)return le.objectStoreNames[1]?void 0:le.objectStore(le.objectStoreNames[0])}return mn(S[$])},set:(S,$,le)=>(S[$]=le,!0),has:(S,$)=>S instanceof IDBTransaction&&("done"===$||"store"===$)||$ in S};function Er(S){return"function"==typeof S?function er(S){return S!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function zt(){return Rn||(Rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(S)?function(...$){return S.apply(Vt(this),$),mn(he.get(this))}:function(...$){return mn(S.apply(Vt(this),$))}:function($,...le){const Se=S.call(Vt(this),$,...le);return Be.set(Se,$.sort?$.sort():[$]),mn(Se)}}(S):(S instanceof IDBTransaction&&function Ht(S){if(ve.has(S))return;const $=new Promise((le,Se)=>{const rt=()=>{S.removeEventListener("complete",ut),S.removeEventListener("error",ht),S.removeEventListener("abort",ht)},ut=()=>{le(),rt()},ht=()=>{Se(S.error||new DOMException("AbortError","AbortError")),rt()};S.addEventListener("complete",ut),S.addEventListener("error",ht),S.addEventListener("abort",ht)});ve.set(S,$)}(S),Zt(S,function Ir(){return $e||($e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(S,tt):S)}function mn(S){if(S instanceof IDBRequest)return function fr(S){const $=new Promise((le,Se)=>{const rt=()=>{S.removeEventListener("success",ut),S.removeEventListener("error",ht)},ut=()=>{le(mn(S.result)),rt()},ht=()=>{Se(S.error),rt()};S.addEventListener("success",ut),S.addEventListener("error",ht)});return $.then(le=>{le instanceof IDBCursor&&he.set(le,S)}).catch(()=>{}),At.set($,S),$}(S);if(mt.has(S))return mt.get(S);const $=Er(S);return $!==S&&(mt.set(S,$),At.set($,S)),$}const Vt=S=>At.get(S),Ye=["get","getKey","getAll","getAllKeys","count"],Un=["put","add","delete","clear"],dn=new Map;function pe(S,$){if(!(S instanceof IDBDatabase)||$ in S||"string"!=typeof $)return;if(dn.get($))return dn.get($);const le=$.replace(/FromIndex$/,""),Se=$!==le,rt=Un.includes(le);if(!(le in(Se?IDBIndex:IDBObjectStore).prototype)||!rt&&!Ye.includes(le))return;const ut=function(){var ht=(0,A.A)(function*(Ut,...Xt){const pr=this.transaction(Ut,rt?"readwrite":"readonly");let Et=pr.store;return Se&&(Et=Et.index(Xt.shift())),(yield Promise.all([Et[le](...Xt),rt&&pr.done]))[0]});return function(Xt){return ht.apply(this,arguments)}}();return dn.set($,ut),ut}!function _t(S){tt=S(tt)}(S=>({...S,get:($,le,Se)=>pe($,le)||S.get($,le,Se),has:($,le)=>!!pe($,le)||S.has($,le)}));class wn{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(le=>{if(function Gn(S){const $=S.getComponent();return"VERSION"===$?.type}(le)){const Se=le.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(le=>le).join(" ")}}const ri="@firebase/app",Xi="0.10.13",xr=new Ne.Vy("@firebase/app"),ms="@firebase/app-compat",tu="@firebase/analytics-compat",Ci="@firebase/analytics",_s="@firebase/app-check-compat",J="@firebase/app-check",ne="@firebase/auth",ue="@firebase/auth-compat",Y="@firebase/database",de="@firebase/data-connect",_e="@firebase/database-compat",ze="@firebase/functions",St="@firebase/functions-compat",qt="@firebase/installations",Je="@firebase/installations-compat",Gt="@firebase/messaging",nt="@firebase/messaging-compat",Fi="@firebase/performance",Ct="@firebase/performance-compat",Bn="@firebase/remote-config",Pt="@firebase/remote-config-compat",Nr="@firebase/storage",ii="@firebase/storage-compat",oa="@firebase/firestore",bi="@firebase/vertexai-preview",eo="@firebase/firestore-compat",gc="firebase",Ko="[DEFAULT]",sa={[ri]:"fire-core",[ms]:"fire-core-compat",[Ci]:"fire-analytics",[tu]:"fire-analytics-compat",[J]:"fire-app-check",[_s]:"fire-app-check-compat",[ne]:"fire-auth",[ue]:"fire-auth-compat",[Y]:"fire-rtdb",[de]:"fire-data-connect",[_e]:"fire-rtdb-compat",[ze]:"fire-fn",[St]:"fire-fn-compat",[qt]:"fire-iid",[Je]:"fire-iid-compat",[Gt]:"fire-fcm",[nt]:"fire-fcm-compat",[Fi]:"fire-perf",[Ct]:"fire-perf-compat",[Bn]:"fire-rc",[Pt]:"fire-rc-compat",[Nr]:"fire-gcs",[ii]:"fire-gcs-compat",[oa]:"fire-fst",[eo]:"fire-fst-compat",[bi]:"fire-vertex","fire-js":"fire-js",[gc]:"fire-js-all"},Vi=new Map,oi=new Map,Kn=new Map;function ys(S,$){try{S.container.addComponent($)}catch(le){xr.debug(`Component ${$.name} failed to register with FirebaseApp ${S.name}`,le)}}function mc(S,$){S.container.addOrOverwriteComponent($)}function si(S){const $=S.name;if(Kn.has($))return xr.debug(`There were multiple attempts to register component ${$}.`),!1;Kn.set($,S);for(const le of Vi.values())ys(le,S);for(const le of oi.values())ys(le,S);return!0}function aa(S,$){const le=S.container.getProvider("heartbeat").getImmediate({optional:!0});return le&&le.triggerHeartbeat(),S.container.getProvider($)}function Li(S,$,le=Ko){aa(S,$).clearInstance(le)}function nu(S){return void 0!==S.options}function Or(S){return void 0!==S.settings}function Qo(){Kn.clear()}const wr=new oe.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ua{constructor($,le,Se){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},le),this._name=le.name,this._automaticDataCollectionEnabled=le.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new Le.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}class to extends ua{constructor($,le,Se,rt){const ut=void 0!==le.automaticDataCollectionEnabled&&le.automaticDataCollectionEnabled,ht={name:Se,automaticDataCollectionEnabled:ut};super(void 0!==$.apiKey?$:$.options,ht,rt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ut},le),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,le.releaseOnDeref=void 0,x(ri,Xi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ou(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wr.create("server-app-deleted")}}const ai="10.14.1";function ru(S,$={}){let le=S;"object"!=typeof $&&($={name:$});const Se=Object.assign({name:Ko,automaticDataCollectionEnabled:!1},$),rt=Se.name;if("string"!=typeof rt||!rt)throw wr.create("bad-app-name",{appName:String(rt)});if(le||(le=(0,oe.T9)()),!le)throw wr.create("no-options");const ut=Vi.get(rt);if(ut){if((0,oe.bD)(le,ut.options)&&(0,oe.bD)(Se,ut.config))return ut;throw wr.create("duplicate-app",{appName:rt})}const ht=new Le.h1(rt);for(const Xt of Kn.values())ht.addComponent(Xt);const Ut=new ua(le,Se,ht);return Vi.set(rt,Ut),Ut}function vs(S,$){if((0,oe.Bd)()&&!(0,oe.p7)())throw wr.create("invalid-server-app-environment");let le;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),le=nu(S)?S.options:S;const Se=Object.assign(Object.assign({},$),le);if(void 0!==Se.releaseOnDeref&&delete Se.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw wr.create("finalization-registry-not-supported",{});const ut=""+(pr=JSON.stringify(Se),[...pr].reduce((Et,_c)=>Math.imul(31,Et)+_c.charCodeAt(0)|0,0)),ht=oi.get(ut);var pr;if(ht)return ht.incRefCount($.releaseOnDeref),ht;const Ut=new Le.h1(ut);for(const pr of Kn.values())Ut.addComponent(pr);const Xt=new to(le,$,ut,Ut);return oi.set(ut,Xt),Xt}function xt(S=Ko){const $=Vi.get(S);if(!$&&S===Ko&&(0,oe.T9)())return ru();if(!$)throw wr.create("no-app",{appName:S});return $}function iu(){return Array.from(Vi.values())}function ou(S){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,A.A)(function*(S){let $=!1;const le=S.name;Vi.has(le)?($=!0,Vi.delete(le)):oi.has(le)&&S.decRefCount()<=0&&(oi.delete(le),$=!0),$&&(yield Promise.all(S.container.getProviders().map(Se=>Se.delete())),S.isDeleted=!0)})).apply(this,arguments)}function x(S,$,le){var Se;let rt=null!==(Se=sa[S])&&void 0!==Se?Se:S;le&&(rt+=`-${le}`);const ut=rt.match(/\s|\//),ht=$.match(/\s|\//);if(ut||ht){const Ut=[`Unable to register library "${rt}" with version "${$}":`];return ut&&Ut.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),ut&&ht&&Ut.push("and"),ht&&Ut.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void xr.warn(Ut.join(" "))}si(new Le.uA(`${rt}-version`,()=>({library:rt,version:$}),"VERSION"))}function R(S,$){if(null!==S&&"function"!=typeof S)throw wr.create("invalid-log-argument");(0,Ne.Ey)(S,$)}function B(S){(0,Ne.He)(S)}const se="firebase-heartbeat-database",Q=1,Ce="firebase-heartbeat-store";let Pe=null;function Cn(){return Pe||(Pe=function Lt(S,$,{blocked:le,upgrade:Se,blocking:rt,terminated:ut}={}){const ht=indexedDB.open(S,$),Ut=mn(ht);return Se&&ht.addEventListener("upgradeneeded",Xt=>{Se(mn(ht.result),Xt.oldVersion,Xt.newVersion,mn(ht.transaction),Xt)}),le&&ht.addEventListener("blocked",Xt=>le(Xt.oldVersion,Xt.newVersion,Xt)),Ut.then(Xt=>{ut&&Xt.addEventListener("close",()=>ut()),rt&&Xt.addEventListener("versionchange",pr=>rt(pr.oldVersion,pr.newVersion,pr))}).catch(()=>{}),Ut}(se,Q,{upgrade:(S,$)=>{if(0===$)try{S.createObjectStore(Ce)}catch(le){console.warn(le)}}}).catch(S=>{throw wr.create("idb-open",{originalErrorMessage:S.message})})),Pe}function sn(){return(sn=(0,A.A)(function*(S){try{const le=(yield Cn()).transaction(Ce),Se=yield le.objectStore(Ce).get(ui(S));return yield le.done,Se}catch($){if($ instanceof oe.g)xr.warn($.message);else{const le=wr.create("idb-get",{originalErrorMessage:$?.message});xr.warn(le.message)}}})).apply(this,arguments)}function Jt(S,$){return ot.apply(this,arguments)}function ot(){return(ot=(0,A.A)(function*(S,$){try{const Se=(yield Cn()).transaction(Ce,"readwrite");yield Se.objectStore(Ce).put($,ui(S)),yield Se.done}catch(le){if(le instanceof oe.g)xr.warn(le.message);else{const Se=wr.create("idb-set",{originalErrorMessage:le?.message});xr.warn(Se.message)}}})).apply(this,arguments)}function ui(S){return`${S.name}!${S.options.appId}`}class ca{constructor($){this.container=$,this._heartbeatsCache=null;const le=this.container.getProvider("app").getImmediate();this._storage=new Ui(le),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var $=this;return(0,A.A)(function*(){var le,Se;try{const ut=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=Jo();return null==(null===(le=$._heartbeatsCache)||void 0===le?void 0:le.heartbeats)&&($._heartbeatsCache=yield $._heartbeatsCachePromise,null==(null===(Se=$._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats))||$._heartbeatsCache.lastSentHeartbeatDate===ht||$._heartbeatsCache.heartbeats.some(Ut=>Ut.date===ht)?void 0:($._heartbeatsCache.heartbeats.push({date:ht,agent:ut}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(Ut=>{const Xt=new Date(Ut.date).valueOf();return Date.now()-Xt<=2592e6}),$._storage.overwrite($._heartbeatsCache))}catch(rt){xr.warn(rt)}})()}getHeartbeatsHeader(){var $=this;return(0,A.A)(function*(){var le;try{if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(le=$._heartbeatsCache)||void 0===le?void 0:le.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const Se=Jo(),{heartbeatsToSend:rt,unsentEntries:ut}=function Gl(S,$=1024){const le=[];let Se=S.slice();for(const rt of S){const ut=le.find(ht=>ht.agent===rt.agent);if(ut){if(ut.dates.push(rt.date),la(le)>$){ut.dates.pop();break}}else if(le.push({agent:rt.agent,dates:[rt.date]}),la(le)>$){le.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:le,unsentEntries:Se}}($._heartbeatsCache.heartbeats),ht=(0,oe.Uj)(JSON.stringify({version:2,heartbeats:rt}));return $._heartbeatsCache.lastSentHeartbeatDate=Se,ut.length>0?($._heartbeatsCache.heartbeats=ut,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),ht}catch(Se){return xr.warn(Se),""}})()}}function Jo(){return(new Date).toISOString().substring(0,10)}class Ui{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,A.A)(function*(){return!!(0,oe.zW)()&&(0,oe.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,A.A)(function*(){if(yield $._canUseIndexedDBPromise){const Se=yield function ke(S){return sn.apply(this,arguments)}($.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var le=this;return(0,A.A)(function*(){var Se;if(yield le._canUseIndexedDBPromise){const ut=yield le.read();return Jt(le.app,{lastSentHeartbeatDate:null!==(Se=$.lastSentHeartbeatDate)&&void 0!==Se?Se:ut.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var le=this;return(0,A.A)(function*(){var Se;if(yield le._canUseIndexedDBPromise){const ut=yield le.read();return Jt(le.app,{lastSentHeartbeatDate:null!==(Se=$.lastSentHeartbeatDate)&&void 0!==Se?Se:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...$.heartbeats]})}})()}}function la(S){return(0,oe.Uj)(JSON.stringify({version:2,heartbeats:S})).length}!function Wl(S){si(new Le.uA("platform-logger",$=>new wn($),"PRIVATE")),si(new Le.uA("heartbeat",$=>new ca($),"PRIVATE")),x(ri,Xi,S),x(ri,Xi,"esm2017"),x("fire-js","")}("")},779:(Go,Pr,dt)=>{dt.d(Pr,{h1:()=>Ir,uA:()=>Ne});var A=dt(467),Le=dt(401);class Ne{constructor(he,ve,Be){this.name=he,this.instanceFactory=ve,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const oe="[DEFAULT]";class Zt{constructor(he,ve){this.name=he,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const ve=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(ve)){const Be=new Le.cY;if(this.instancesDeferred.set(ve,Be),this.isInitialized(ve)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:ve});mt&&Be.resolve(mt)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(he){var ve;const Be=this.normalizeInstanceIdentifier(he?.identifier),mt=null!==(ve=he?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(At){if(mt)return null;throw At}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Rn(zt){return"EAGER"===zt.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[ve,Be]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(ve);try{const At=this.getOrInitializeService({instanceIdentifier:mt});Be.resolve(At)}catch{}}}}clearInstance(he=oe){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,A.A)(function*(){const ve=Array.from(he.instances.values());yield Promise.all([...ve.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...ve.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=oe){return this.instances.has(he)}getOptions(he=oe){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:ve={}}=he,Be=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:Be,options:ve});for(const[At,fr]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(At)&&fr.resolve(mt);return mt}onInit(he,ve){var Be;const mt=this.normalizeInstanceIdentifier(ve),At=null!==(Be=this.onInitCallbacks.get(mt))&&void 0!==Be?Be:new Set;At.add(he),this.onInitCallbacks.set(mt,At);const fr=this.instances.get(mt);return fr&&he(fr,mt),()=>{At.delete(he)}}invokeOnInitCallbacks(he,ve){const Be=this.onInitCallbacks.get(ve);if(Be)for(const mt of Be)try{mt(he,ve)}catch{}}getOrInitializeService({instanceIdentifier:he,options:ve={}}){let Be=this.instances.get(he);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(zt=he,zt===oe?void 0:zt),options:ve}),this.instances.set(he,Be),this.instancesOptions.set(he,ve),this.invokeOnInitCallbacks(Be,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Be)}catch{}var zt;return Be||null}normalizeInstanceIdentifier(he=oe){return this.component?this.component.multipleInstances?he:oe:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ir{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const ve=this.getProvider(he.name);if(ve.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);ve.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const ve=new Zt(he,this);return this.providers.set(he,ve),ve}getProviders(){return Array.from(this.providers.values())}}},398:(Go,Pr,dt)=>{dt.d(Pr,{$b:()=>Le,Ey:()=>zt,He:()=>Ir,Vy:()=>Rn});const A=[];var Le=function(he){return he[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",he}(Le||{});const Ne={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},oe=Le.INFO,Zt={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},$e=(he,ve,...Be)=>{if(ve<he.logLevel)return;const mt=(new Date).toISOString(),At=Zt[ve];if(!At)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[At](`[${mt}]  ${he.name}:`,...Be)};class Rn{constructor(ve){this.name=ve,this._logLevel=oe,this._logHandler=$e,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in Le))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?Ne[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...ve),this._logHandler(this,Le.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...ve),this._logHandler(this,Le.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...ve),this._logHandler(this,Le.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...ve),this._logHandler(this,Le.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...ve),this._logHandler(this,Le.ERROR,...ve)}}function Ir(he){A.forEach(ve=>{ve.setLogLevel(he)})}function zt(he,ve){for(const Be of A){let mt=null;ve&&ve.level&&(mt=Ne[ve.level]),Be.userLogHandler=null===he?null:(At,fr,...Ht)=>{const tt=Ht.map(_t=>{if(null==_t)return null;if("string"==typeof _t)return _t;if("number"==typeof _t||"boolean"==typeof _t)return _t.toString();if(_t instanceof Error)return _t.message;try{return JSON.stringify(_t)}catch{return null}}).filter(_t=>_t).join(" ");fr>=(mt??At.logLevel)&&he({level:Le[fr].toLowerCase(),message:tt,args:Ht,type:At.name})}}}},324:(Go,Pr,dt)=>{var A=dt(467),Le=dt(574),Ne=dt(979),oe=dt(401),Zt=dt(398),$e=dt(635),Rn=dt(779);const zt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const fr=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ht=function At(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new oe.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),er=new Zt.Vy("@firebase/auth");function mn(f,...c){er.logLevel<=Zt.$b.ERROR&&er.error(`Auth (${Ne.SDK_VERSION}): ${f}`,...c)}function Vt(f,...c){throw dn(f,...c)}function Lt(f,...c){return dn(f,...c)}function ni(f,c,l){const g=Object.assign(Object.assign({},Ht()),{[c]:l});return new oe.FA("auth","Firebase",g).create(c,{appName:f.name})}function Ye(f){return ni(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Un(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&Vt(f,"argument-error"),ni(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dn(f,...c){if("string"!=typeof f){const l=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=f.name),f._errorFactory.create(l,...g)}return tt.create(f,...c)}function pe(f,c,...l){if(!f)throw dn(c,...l)}function wn(f){const c="INTERNAL ASSERTION FAILED: "+f;throw mn(c),new Error(c)}function Gn(f,c){f||wn(c)}function ri(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Xi(){return"http:"===xr()||"https:"===xr()}function xr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Ci{constructor(c,l){this.shortDelay=c,this.longDelay=l,Gn(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,oe.jZ)()||(0,oe.lV)()}get(){return function ms(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xi()||(0,oe.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _s(f,c){Gn(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class J{static initialize(c,l,g){this.fetchImpl=c,l&&(this.headersImpl=l),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new Ci(3e4,6e4);function Y(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function de(f,c,l,g){return _e.apply(this,arguments)}function _e(){return(_e=(0,A.A)(function*(f,c,l,g,v={}){return ze(f,v,(0,A.A)(function*(){let w={},M={};g&&("GET"===c?M=g:w={body:JSON.stringify(g)});const z=(0,oe.Am)(Object.assign({key:f.config.apiKey},M)).slice(1),X=yield f._getAdditionalHeaders();X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode);const be=Object.assign({method:c,headers:X},w);return(0,oe.c1)()||(be.referrerPolicy="no-referrer"),J.fetch()(Gt(f,f.config.apiHost,l,z),be)}))})).apply(this,arguments)}function ze(f,c,l){return St.apply(this,arguments)}function St(){return(St=(0,A.A)(function*(f,c,l){f._canInitEmulator=!1;const g=Object.assign(Object.assign({},ne),c);try{const v=new Fi(f),w=yield Promise.race([l(),v.promise]);v.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw Ct(f,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const z=w.ok?M.errorMessage:M.error.message,[X,be]=z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Ct(f,"credential-already-in-use",M);if("EMAIL_EXISTS"===X)throw Ct(f,"email-already-in-use",M);if("USER_DISABLED"===X)throw Ct(f,"user-disabled",M);const Fe=g[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(be)throw ni(f,Fe,be);Vt(f,Fe)}}catch(v){if(v instanceof oe.g)throw v;Vt(f,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function qt(f,c,l,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,A.A)(function*(f,c,l,g,v={}){const w=yield de(f,c,l,g,v);return"mfaPendingCredential"in w&&Vt(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Gt(f,c,l,g){const v=`${c}${l}?${g}`;return f.config.emulator?_s(f.config,v):`${f.config.apiScheme}://${v}`}function nt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fi{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,g)=>{this.timer=setTimeout(()=>g(Lt(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ct(f,c,l){const g={appName:f.name};l.email&&(g.email=l.email),l.phoneNumber&&(g.phoneNumber=l.phoneNumber);const v=Lt(f,c,g);return v.customData._tokenResponse=l,v}function Bn(f){return void 0!==f&&void 0!==f.getResponse}function Pt(f){return void 0!==f&&void 0!==f.enterprise}class Nr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return nt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function oa(){return(oa=(0,A.A)(function*(f){return(yield de(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bi(f,c){return eo.apply(this,arguments)}function eo(){return(eo=(0,A.A)(function*(f,c){return de(f,"GET","/v2/recaptchaConfig",Y(f,c))})).apply(this,arguments)}function Wo(){return(Wo=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function sa(){return(sa=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Vi(f,c){return oi.apply(this,arguments)}function oi(){return(oi=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Kn(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function si(){return(si=(0,A.A)(function*(f,c=!1){const l=(0,oe.Ku)(f),g=yield l.getIdToken(c),v=Li(g);pe(v&&v.exp&&v.auth_time&&v.iat,l.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,M=w?.sign_in_provider;return{claims:v,token:g,authTime:Kn(aa(v.auth_time)),issuedAtTime:Kn(aa(v.iat)),expirationTime:Kn(aa(v.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function aa(f){return 1e3*Number(f)}function Li(f){const[c,l,g]=f.split(".");if(void 0===c||void 0===l||void 0===g)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,oe.u)(l);return v?JSON.parse(v):(mn("Failed to decode base64 JWT payload"),null)}catch(v){return mn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function nu(f){const c=Li(f);return pe(c,"internal-error"),pe(typeof c.exp<"u","internal-error"),pe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Or(f,c){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,A.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(g){throw g instanceof oe.g&&function ql({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(g)&&f.auth.currentUser===f&&(yield f.auth.signOut()),g}})).apply(this,arguments)}class wr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,A.A)(function*(){yield l.iteration()}),g)}iteration(){var c=this;return(0,A.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class ua{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kn(this.lastLoginAt),this.creationTime=Kn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function to(f){return ai.apply(this,arguments)}function ai(){return(ai=(0,A.A)(function*(f){var c;const l=f.auth,g=yield f.getIdToken(),v=yield Or(f,Vi(l,{idToken:g}));pe(v?.users.length,l,"internal-error");const w=v.users[0];f._notifyReloadListener(w);const M=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?iu(w.providerUserInfo):[],z=function xt(f,c){return[...f.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(f.providerData,M),Fe=!!f.isAnonymous&&!(f.email&&w.passwordHash||z?.length),Oe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:z,metadata:new ua(w.createdAt,w.lastLoginAt),isAnonymous:Fe};Object.assign(f,Oe)})).apply(this,arguments)}function vs(){return(vs=(0,A.A)(function*(f){const c=(0,oe.Ku)(f);yield to(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function iu(f){return f.map(c=>{var{providerId:l}=c,g=(0,$e.Tt)(c,["providerId"]);return{providerId:l,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function Yo(){return(Yo=(0,A.A)(function*(f,c){const l=yield ze(f,{},(0,A.A)(function*(){const g=(0,oe.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:w}=f.config,M=Gt(f,v,"/v1/token",`key=${w}`),z=yield f._getAdditionalHeaders();return z["Content-Type"]="application/x-www-form-urlencoded",J.fetch()(M,{method:"POST",headers:z,body:g})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function R(){return(R=(0,A.A)(function*(f,c){return de(f,"POST","/v2/accounts:revokeToken",Y(f,c))})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){pe(c.idToken,"internal-error"),pe(typeof c.idToken<"u","internal-error"),pe(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):nu(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){pe(0!==c.length,"internal-error");const l=nu(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var g=this;return(0,A.A)(function*(){return l||!g.accessToken||g.isExpired?(pe(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var g=this;return(0,A.A)(function*(){const{accessToken:v,refreshToken:w,expiresIn:M}=yield function ou(f,c){return Yo.apply(this,arguments)}(c,l);g.updateTokensAndExpiration(v,w,Number(M))})()}updateTokensAndExpiration(c,l,g){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,l){const{refreshToken:g,accessToken:v,expirationTime:w}=l,M=new B;return g&&(pe("string"==typeof g,"internal-error",{appName:c}),M.refreshToken=g),v&&(pe("string"==typeof v,"internal-error",{appName:c}),M.accessToken=v),w&&(pe("number"==typeof w,"internal-error",{appName:c}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return wn("not implemented")}}function se(f,c){pe("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class Q{constructor(c){var{uid:l,auth:g,stsTokenManager:v}=c,w=(0,$e.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new ua(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,A.A)(function*(){const g=yield Or(l,l.stsTokenManager.getToken(l.auth,c));return pe(g,l.auth,"internal-error"),l.accessToken!==g&&(l.accessToken=g,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),g})()}getIdTokenResult(c){return function mc(f){return si.apply(this,arguments)}(this,c)}reload(){return function ru(f){return vs.apply(this,arguments)}(this)}_assign(c){this!==c&&(pe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new Q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var g=this;return(0,A.A)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),l&&(yield to(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,A.A)(function*(){if((0,Ne._isFirebaseServerApp)(c.auth.app))return Promise.reject(Ye(c.auth));const l=yield c.getIdToken();return yield Or(c,function gc(f,c){return Wo.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var g,v,w,M,z,X,be,Fe;const Oe=null!==(g=l.displayName)&&void 0!==g?g:void 0,un=null!==(v=l.email)&&void 0!==v?v:void 0,fo=null!==(w=l.phoneNumber)&&void 0!==w?w:void 0,jc=null!==(M=l.photoURL)&&void 0!==M?M:void 0,qd=null!==(z=l.tenantId)&&void 0!==z?z:void 0,Au=null!==(X=l._redirectEventId)&&void 0!==X?X:void 0,ig=null!==(be=l.createdAt)&&void 0!==be?be:void 0,nv=null!==(Fe=l.lastLoginAt)&&void 0!==Fe?Fe:void 0,{uid:og,emailVerified:rv,isAnonymous:sg,providerData:ag,stsTokenManager:ug}=l;pe(og&&ug,c,"internal-error");const $C=B.fromJSON(this.name,ug);pe("string"==typeof og,c,"internal-error"),se(Oe,c.name),se(un,c.name),pe("boolean"==typeof rv,c,"internal-error"),pe("boolean"==typeof sg,c,"internal-error"),se(fo,c.name),se(jc,c.name),se(qd,c.name),se(Au,c.name),se(ig,c.name),se(nv,c.name);const cg=new Q({uid:og,auth:c,email:un,emailVerified:rv,displayName:Oe,isAnonymous:sg,photoURL:jc,phoneNumber:fo,tenantId:qd,stsTokenManager:$C,createdAt:ig,lastLoginAt:nv});return ag&&Array.isArray(ag)&&(cg.providerData=ag.map(vR=>Object.assign({},vR))),Au&&(cg._redirectEventId=Au),cg}static _fromIdTokenResponse(c,l,g=!1){return(0,A.A)(function*(){const v=new B;v.updateFromServerResponse(l);const w=new Q({uid:l.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield to(w),w})()}static _fromGetAccountInfoResponse(c,l,g){return(0,A.A)(function*(){const v=l.users[0];pe(void 0!==v.localId,"internal-error");const w=void 0!==v.providerUserInfo?iu(v.providerUserInfo):[],M=!(v.email&&v.passwordHash||w?.length),z=new B;z.updateFromIdToken(g);const X=new Q({uid:v.localId,auth:c,stsTokenManager:z,isAnonymous:M}),be={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:w,metadata:new ua(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||w?.length)};return Object.assign(X,be),X})()}}const Ce=new Map;function Pe(f){Gn(f instanceof Function,"Expected a class definition");let c=Ce.get(f);return c?(Gn(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Ce.set(f,c),c)}const ke=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,A.A)(function*(){return!0})()}_set(l,g){var v=this;return(0,A.A)(function*(){v.storage[l]=g})()}_get(l){var g=this;return(0,A.A)(function*(){const v=g.storage[l];return void 0===v?null:v})()}_remove(l){var g=this;return(0,A.A)(function*(){delete g.storage[l]})()}_addListener(l,g){}_removeListener(l,g){}}return f.type="NONE",f})();function sn(f,c,l){return`firebase:${f}:${c}:${l}`}class Jt{constructor(c,l,g){this.persistence=c,this.auth=l,this.userKey=g;const{config:v,name:w}=this.auth;this.fullUserKey=sn(this.userKey,v.apiKey,w),this.fullPersistenceKey=sn("persistence",v.apiKey,w),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,A.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?Q._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,A.A)(function*(){if(l.persistence===c)return;const g=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,g?l.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,g="authUser"){return(0,A.A)(function*(){if(!l.length)return new Jt(Pe(ke),c,g);const v=(yield Promise.all(l.map(function(){var be=(0,A.A)(function*(Fe){if(yield Fe._isAvailable())return Fe});return function(Fe){return be.apply(this,arguments)}}()))).filter(be=>be);let w=v[0]||Pe(ke);const M=sn(g,c.config.apiKey,c.name);let z=null;for(const be of l)try{const Fe=yield be._get(M);if(Fe){const Oe=Q._fromJSON(c,Fe);be!==w&&(z=Oe),w=be;break}}catch{}const X=v.filter(be=>be._shouldAllowMigration);return w._shouldAllowMigration&&X.length?(w=X[0],z&&(yield w._set(M,z.toJSON())),yield Promise.all(l.map(function(){var be=(0,A.A)(function*(Fe){if(Fe!==w)try{yield Fe._remove(M)}catch{}});return function(Fe){return be.apply(this,arguments)}}())),new Jt(w,c,g)):new Jt(w,c,g)})()}}function ot(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(ca(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(ui(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Gl(c))return"Blackberry";if(Ui(c))return"Webos";if(Zo(c))return"Safari";if((c.includes("chrome/")||no(c))&&!c.includes("edge/"))return"Chrome";if(Jo(c))return"Android";{const g=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function ui(f=(0,oe.ZQ)()){return/firefox\//i.test(f)}function Zo(f=(0,oe.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function no(f=(0,oe.ZQ)()){return/crios\//i.test(f)}function ca(f=(0,oe.ZQ)()){return/iemobile/i.test(f)}function Jo(f=(0,oe.ZQ)()){return/android/i.test(f)}function Gl(f=(0,oe.ZQ)()){return/blackberry/i.test(f)}function Ui(f=(0,oe.ZQ)()){return/webos/i.test(f)}function la(f=(0,oe.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function le(f=(0,oe.ZQ)()){return la(f)||Jo(f)||Ui(f)||Gl(f)||/windows phone/i.test(f)||ca(f)}function Se(f,c=[]){let l;switch(f){case"Browser":l=ot((0,oe.ZQ)());break;case"Worker":l=`${ot((0,oe.ZQ)())}-${f}`;break;default:l=f}const g=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ne.SDK_VERSION}/${g}`}class rt{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const g=w=>new Promise((M,z)=>{try{M(c(w))}catch(X){z(X)}});g.onAbort=l,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,A.A)(function*(){if(l.auth.currentUser===c)return;const g=[];try{for(const v of l.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const w of g)try{w()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function ht(){return(ht=(0,A.A)(function*(f,c={}){return de(f,"GET","/v2/passwordPolicy",Y(f,c))})).apply(this,arguments)}class Xt{constructor(c){var l,g,v,w;const M=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=M.minPasswordLength)&&void 0!==l?l:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,g,v,w,M,z;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(l=X.meetsMinPasswordLength)||void 0===l||l),X.isValid&&(X.isValid=null===(g=X.meetsMaxPasswordLength)||void 0===g||g),X.isValid&&(X.isValid=null===(v=X.containsLowercaseLetter)||void 0===v||v),X.isValid&&(X.isValid=null===(w=X.containsUppercaseLetter)||void 0===w||w),X.isValid&&(X.isValid=null===(M=X.containsNumericCharacter)||void 0===M||M),X.isValid&&(X.isValid=null===(z=X.containsNonAlphanumericCharacter)||void 0===z||z),X}validatePasswordLengthOptions(c,l){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(l.meetsMinPasswordLength=c.length>=g),v&&(l.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,l){let g;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(l,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,l,g,v,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class pr{constructor(c,l,g,v){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _c(this),this.idTokenSubscription=new _c(this),this.beforeStateQueue=new rt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,l){var g=this;return l&&(this._popupRedirectResolver=Pe(l)),this._initializationPromise=this.queue((0,A.A)(function*(){var v,w;if(!g._deleted&&(g.persistenceManager=yield Jt.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(l),g.lastNotifiedUid=(null===(w=g.currentUser)||void 0===w?void 0:w.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,A.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,A.A)(function*(){try{const g=yield Vi(l,{idToken:c}),v=yield Q._fromGetAccountInfoResponse(l,g,c);yield l.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,A.A)(function*(){var g;if((0,Ne._isFirebaseServerApp)(l.app)){const z=l.app.settings.authIdToken;return z?new Promise(X=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(z).then(X,X))}):l.directlySetCurrentUser(null)}const v=yield l.assertedPersistence.getCurrentUser();let w=v,M=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const z=null===(g=l.redirectUser)||void 0===g?void 0:g._redirectEventId,X=w?._redirectEventId,be=yield l.tryRedirectSignIn(c);(!z||z===X)&&be?.user&&(w=be.user,M=!0)}if(!w)return l.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield l.beforeStateQueue.runMiddleware(w)}catch(z){w=v,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(z))}return w?l.reloadAndSetCurrentUserOrClear(w):l.directlySetCurrentUser(null)}return pe(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===w._redirectEventId?l.directlySetCurrentUser(w):l.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var l=this;return(0,A.A)(function*(){let g=null;try{g=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,A.A)(function*(){try{yield to(c)}catch(g){if("auth/network-request-failed"!==g?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function tu(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,A.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,A.A)(function*(){if((0,Ne._isFirebaseServerApp)(l.app))return Promise.reject(Ye(l));const g=c?(0,oe.Ku)(c):null;return g&&pe(g.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(g&&g._clone(l))})()}_updateCurrentUser(c,l=!1){var g=this;return(0,A.A)(function*(){if(!g._deleted)return c&&pe(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),l||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,A.A)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,A.A)(function*(){return(0,Ne._isFirebaseServerApp)(c.app)?Promise.reject(Ye(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Ne._isFirebaseServerApp)(this.app)?Promise.reject(Ye(this)):this.queue((0,A.A)(function*(){yield l.assertedPersistence.setPersistence(Pe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,A.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const g=l._getPasswordPolicyInternal();return g.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,A.A)(function*(){const l=yield function ut(f){return ht.apply(this,arguments)}(c),g=new Xt(l);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new oe.FA("auth","Firebase",c())}onAuthStateChanged(c,l,g){return this.registerStateListener(this.authStateSubscription,c,l,g)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,g){return this.registerStateListener(this.idTokenSubscription,c,l,g)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,A.A)(function*(){if(l.currentUser){const g=yield l.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=l.tenantId&&(v.tenantId=l.tenantId),yield function x(f,c){return R.apply(this,arguments)}(l,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var g=this;return(0,A.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(l);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,A.A)(function*(){if(!l.redirectPersistenceManager){const g=c&&Pe(c)||l._popupRedirectResolver;pe(g,l,"argument-error"),l.redirectPersistenceManager=yield Jt.create(l,[Pe(g._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,A.A)(function*(){var g,v;return l._isInitialized&&(yield l.queue((0,A.A)(function*(){}))),(null===(g=l._currentUser)||void 0===g?void 0:g._redirectEventId)===c?l._currentUser:(null===(v=l.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,A.A)(function*(){if(c===l.currentUser)return l.queue((0,A.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,g,v){if(this._deleted)return()=>{};const w="function"==typeof l?l:l.next.bind(l);let M=!1;const z=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(z,this,"internal-error"),z.then(()=>{M||w(this.currentUser)}),"function"==typeof l){const X=c.addObserver(l,g,v);return()=>{M=!0,X()}}{const X=c.addObserver(l);return()=>{M=!0,X()}}}directlySetCurrentUser(c){var l=this;return(0,A.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,A.A)(function*(){var l;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const w=yield c._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var c=this;return(0,A.A)(function*(){var l;const g=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return g?.error&&function Er(f,...c){er.logLevel<=Zt.$b.WARN&&er.warn(`Auth (${Ne.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Et(f){return(0,oe.Ku)(f)}class _c{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,oe.tD)(l=>this.observer=l)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let da={loadJS:()=>(0,A.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W_(f){return da.loadJS(f)}function Wt(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Kl{constructor(c){this.type="recaptcha-enterprise",this.auth=Et(c)}verify(c="verify",l=!1){var g=this;return(0,A.A)(function*(){function w(){return w=(0,A.A)(function*(z){if(!l){if(null==z.tenantId&&null!=z._agentRecaptchaConfig)return z._agentRecaptchaConfig.siteKey;if(null!=z.tenantId&&void 0!==z._tenantRecaptchaConfigs[z.tenantId])return z._tenantRecaptchaConfigs[z.tenantId].siteKey}return new Promise(function(){var X=(0,A.A)(function*(be,Fe){bi(z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Oe=>{if(void 0!==Oe.recaptchaKey){const un=new Nr(Oe);return null==z.tenantId?z._agentRecaptchaConfig=un:z._tenantRecaptchaConfigs[z.tenantId]=un,be(un.siteKey)}Fe(new Error("recaptcha Enterprise site key undefined"))}).catch(Oe=>{Fe(Oe)})});return function(be,Fe){return X.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(z,X,be){const Fe=window.grecaptcha;Pt(Fe)?Fe.enterprise.ready(()=>{Fe.enterprise.execute(z,{action:c}).then(Oe=>{X(Oe)}).catch(()=>{X("NO_RECAPTCHA")})}):be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((z,X)=>{(function v(z){return w.apply(this,arguments)})(g.auth).then(be=>{if(!l&&Pt(window.grecaptcha))M(be,z,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));let Fe=function WM(){return da.recaptchaEnterpriseScript}();0!==Fe.length&&(Fe+=be),W_(Fe).then(()=>{M(be,z,X)}).catch(Oe=>{X(Oe)})}}).catch(be=>{X(be)})})})()}}function K_(f,c,l){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,A.A)(function*(f,c,l,g=!1){const v=new Kl(f);let w;try{w=yield v.verify(l)}catch{w=yield v.verify(l,!0)}const M=Object.assign({},c);return Object.assign(M,g?{captchaResp:w}:{captchaResponse:w}),Object.assign(M,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(M,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),M})).apply(this,arguments)}function Kt(f,c,l,g){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,A.A)(function*(f,c,l,g){var v;if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield K_(f,c,l,"getOobCode"===l);return g(f,w)}return g(f,c).catch(function(){var w=(0,A.A)(function*(M){if("auth/missing-recaptcha-token"===M.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const z=yield K_(f,c,l,"getOobCode"===l);return g(f,z)}return Promise.reject(M)});return function(M){return w.apply(this,arguments)}}())}),Qe.apply(this,arguments)}function Xo(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Ww(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class yc{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return wn("not implemented")}_getIdTokenResponse(c){return wn("not implemented")}_linkToIdToken(c,l){return wn("not implemented")}_getReauthenticationResolver(c){return wn("not implemented")}}function Q_(f,c){return Y_.apply(this,arguments)}function Y_(){return(Y_=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:resetPassword",Y(f,c))})).apply(this,arguments)}function Z_(){return(Z_=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ti(f,c){return We.apply(this,arguments)}function We(){return(We=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function J_(){return(J_=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:update",Y(f,c))})).apply(this,arguments)}function XM(f,c){return X_.apply(this,arguments)}function X_(){return(X_=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithPassword",Y(f,c))})).apply(this,arguments)}function Yf(f,c){return Me.apply(this,arguments)}function Me(){return(Me=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:sendOobCode",Y(f,c))})).apply(this,arguments)}function Bi(){return(Bi=(0,A.A)(function*(f,c){return Yf(f,c)})).apply(this,arguments)}function Yl(f,c){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,A.A)(function*(f,c){return Yf(f,c)})).apply(this,arguments)}function ey(f,c){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,A.A)(function*(f,c){return Yf(f,c)})).apply(this,arguments)}function au(){return(au=(0,A.A)(function*(f,c){return Yf(f,c)})).apply(this,arguments)}function Jl(){return(Jl=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithEmailLink",Y(f,c))})).apply(this,arguments)}function ye(){return(ye=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithEmailLink",Y(f,c))})).apply(this,arguments)}class ha extends yc{constructor(c,l,g,v=null){super("password",g),this._email=c,this._password=l,this._tenantId=v}static _fromEmailAndPassword(c,l){return new ha(c,l,"password")}static _fromEmailAndCode(c,l,g=null){return new ha(c,l,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,A.A)(function*(){switch(l.signInMethod){case"password":return Kt(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",XM);case"emailLink":return function Xf(f,c){return Jl.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:Vt(c,"internal-error")}})()}_linkToIdToken(c,l){var g=this;return(0,A.A)(function*(){switch(g.signInMethod){case"password":return Kt(c,{idToken:l,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ti);case"emailLink":return function Qw(f,c){return ye.apply(this,arguments)}(c,{idToken:l,email:g._email,oobCode:g._password});default:Vt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ro(f,c){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithIdp",Y(f,c))})).apply(this,arguments)}class So extends yc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new So(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):Vt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=l,w=(0,$e.Tt)(l,["providerId","signInMethod"]);if(!g||!v)return null;const M=new So(g,v);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(c){return ro(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,ro(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ro(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,oe.Am)(l)}return c}}function ty(){return(ty=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:sendVerificationCode",Y(f,c))})).apply(this,arguments)}function ny(){return(ny=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithPhoneNumber",Y(f,c))})).apply(this,arguments)}function vc(){return(vc=(0,A.A)(function*(f,c){const l=yield qt(f,"POST","/v1/accounts:signInWithPhoneNumber",Y(f,c));if(l.temporaryProof)throw Ct(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const Ic={USER_NOT_FOUND:"user-not-found"};function Ec(){return(Ec=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithPhoneNumber",Y(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ic)})).apply(this,arguments)}class Is extends yc{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new Is({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new Is({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function tR(f,c){return ny.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function nR(f,c){return vc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function np(f,c){return Ec.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:g,verificationCode:v}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:g,phoneNumber:v,temporaryProof:w}=c;return g||l||v||w?new Is({verificationId:l,verificationCode:g,phoneNumber:v,temporaryProof:w}):null}}class uu{constructor(c){var l,g,v,w,M,z;const X=(0,oe.I9)((0,oe.hp)(c)),be=null!==(l=X.apiKey)&&void 0!==l?l:null,Fe=null!==(g=X.oobCode)&&void 0!==g?g:null,Oe=function es(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=X.mode)&&void 0!==v?v:null);pe(be&&Fe&&Oe,"argument-error"),this.apiKey=be,this.operation=Oe,this.code=Fe,this.continueUrl=null!==(w=X.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=X.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(z=X.tenantId)&&void 0!==z?z:null}static parseLink(c){const l=function wc(f){const c=(0,oe.I9)((0,oe.hp)(f)).link,l=c?(0,oe.I9)((0,oe.hp)(c)).deep_link_id:null,g=(0,oe.I9)((0,oe.hp)(f)).deep_link_id;return(g?(0,oe.I9)((0,oe.hp)(g)).link:null)||g||l||c||f}(c);try{return new uu(l)}catch{return null}}}let Nt=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,g){return ha._fromEmailAndPassword(l,g)}static credentialWithLink(l,g){const v=uu.parseLink(g);return pe(v,"argument-error"),ha._fromEmailAndCode(l,v.code,v.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Es{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class cu extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class lu extends cu{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return pe("providerId"in l&&"signInMethod"in l,"argument-error"),So._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return pe(c.idToken||c.accessToken,"argument-error"),So._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return lu.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return lu.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:w,nonce:M,providerId:z}=c;if(!g&&!v&&!l&&!w||!z)return null;try{return new lu(z)._credential({idToken:l,accessToken:g,nonce:M,pendingToken:w})}catch{return null}}}let Yw=(()=>{class f extends cu{constructor(){super("facebook.com")}static credential(l){return So._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),ry=(()=>{class f extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(l,g){return So._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:g})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:g,oauthAccessToken:v}=l;if(!g&&!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),ed=(()=>{class f extends cu{constructor(){super("github.com")}static credential(l){return So._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class ws extends yc{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return ro(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,ro(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ro(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:w}=l;return g&&v&&w&&g===v?new ws(g,w):null}static _create(c,l){return new ws(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cr extends Es{constructor(c){pe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Cr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Cr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=ws.fromJSON(c);return pe(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:g}=c;if(!l||!g)return null;try{return ws._create(g,l)}catch{return null}}}let rp=(()=>{class f extends cu{constructor(){super("twitter.com")}static credential(l,g){return So._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:g})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=l;if(!g||!v)return null;try{return f.credential(g,v)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Zw(f,c){return oy.apply(this,arguments)}function oy(){return(oy=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signUp",Y(f,c))})).apply(this,arguments)}class kr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,g,v=!1){return(0,A.A)(function*(){const w=yield Q._fromIdTokenResponse(c,g,v),M=td(g);return new kr({user:w,providerId:M,_tokenResponse:g,operationType:l})})()}static _forOperation(c,l,g){return(0,A.A)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=td(g);return new kr({user:c,providerId:v,_tokenResponse:g,operationType:l})})()}}function td(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function ip(){return(ip=(0,A.A)(function*(f){var c;if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const l=Et(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new kr({user:l.currentUser,providerId:null,operationType:"signIn"});const g=yield Zw(l,{returnSecureToken:!0}),v=yield kr._fromIdTokenResponse(l,"signIn",g,!0);return yield l._updateCurrentUser(v.user),v})).apply(this,arguments)}class rd extends oe.g{constructor(c,l,g,v){var w;super(l.code,l.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:l.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,l,g,v){return new rd(c,l,g,v)}}function sy(f,c,l,g){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?rd._fromErrorAndOperation(f,w,c,g):w})}function op(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function sp(){return sp=(0,A.A)(function*(f,c){const l=(0,oe.Ku)(f);yield we(!0,l,c);const{providerUserInfo:g}=yield function Ko(f,c){return sa.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),v=op(g||[]);return l.providerData=l.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),sp.apply(this,arguments)}function Mo(f,c){return ap.apply(this,arguments)}function ap(){return(ap=(0,A.A)(function*(f,c,l=!1){const g=yield Or(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return kr._forOperation(f,"link",g)})).apply(this,arguments)}function we(f,c,l){return id.apply(this,arguments)}function id(){return(id=(0,A.A)(function*(f,c,l){yield to(c);const v=!1===f?"provider-already-linked":"no-such-provider";pe(op(c.providerData).has(l)===f,c.auth,v)})).apply(this,arguments)}function G(f,c){return hu.apply(this,arguments)}function hu(){return(hu=(0,A.A)(function*(f,c,l=!1){const{auth:g}=f;if((0,Ne._isFirebaseServerApp)(g.app))return Promise.reject(Ye(g));const v="reauthenticate";try{const w=yield Or(f,sy(g,v,c,f),l);pe(w.idToken,g,"internal-error");const M=Li(w.idToken);pe(M,g,"internal-error");const{sub:z}=M;return pe(f.uid===z,g,"user-mismatch"),kr._forOperation(f,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&Vt(g,"user-mismatch"),w}})).apply(this,arguments)}function od(f,c){return fa.apply(this,arguments)}function fa(){return(fa=(0,A.A)(function*(f,c,l=!1){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g="signIn",v=yield sy(f,g,c),w=yield kr._fromIdTokenResponse(f,g,v);return l||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function sd(f,c){return up.apply(this,arguments)}function up(){return(up=(0,A.A)(function*(f,c){return od(Et(f),c)})).apply(this,arguments)}function ay(f,c){return cp.apply(this,arguments)}function cp(){return(cp=(0,A.A)(function*(f,c){const l=(0,oe.Ku)(f);return yield we(!1,l,c.providerId),Mo(l,c)})).apply(this,arguments)}function fu(f,c){return lp.apply(this,arguments)}function lp(){return(lp=(0,A.A)(function*(f,c){return G((0,oe.Ku)(f),c)})).apply(this,arguments)}function dp(){return(dp=(0,A.A)(function*(f,c){return qt(f,"POST","/v1/accounts:signInWithCustomToken",Y(f,c))})).apply(this,arguments)}function hp(){return hp=(0,A.A)(function*(f,c){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const l=Et(f),g=yield function ad(f,c){return dp.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),v=yield kr._fromIdTokenResponse(l,"signIn",g);return yield l._updateCurrentUser(v.user),v}),hp.apply(this,arguments)}class gr{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Cs._fromServerResponse(c,l):"totpInfo"in l?ud._fromServerResponse(c,l):Vt(c,"internal-error")}}class Cs extends gr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Cs(l)}}class ud extends gr{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new ud(l)}}function ga(f,c,l){var g;pe((null===(g=l.url)||void 0===g?void 0:g.length)>0,f,"invalid-continue-uri"),pe(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(pe(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(pe(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function pu(f){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,A.A)(function*(f){const c=Et(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function cd(){return(cd=(0,A.A)(function*(f,c,l){const g=Et(f),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&ga(g,v,l),yield Kt(g,v,"getOobCode",Yl)})).apply(this,arguments)}function Gr(){return Gr=(0,A.A)(function*(f,c,l){yield Q_((0,oe.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var g=(0,A.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&pu(f),v});return function(v){return g.apply(this,arguments)}}())}),Gr.apply(this,arguments)}function bs(){return bs=(0,A.A)(function*(f,c){yield function JM(f,c){return J_.apply(this,arguments)}((0,oe.Ku)(f),{oobCode:c})}),bs.apply(this,arguments)}function Jw(f,c){return ld.apply(this,arguments)}function ld(){return(ld=(0,A.A)(function*(f,c){const l=(0,oe.Ku)(f),g=yield Q_(l,{oobCode:c}),v=g.requestType;switch(pe(v,l,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(g.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(g.mfaInfo,l,"internal-error");default:pe(g.email,l,"internal-error")}let w=null;return g.mfaInfo&&(w=gr._fromServerResponse(Et(l),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function bt(){return(bt=(0,A.A)(function*(f,c){const{data:l}=yield Jw((0,oe.Ku)(f),c);return l.email})).apply(this,arguments)}function dd(){return(dd=(0,A.A)(function*(f,c,l){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g=Et(f),M=yield Kt(g,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zw).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&pu(f),X}),z=yield kr._fromIdTokenResponse(g,"signIn",M);return yield g._updateCurrentUser(z.user),z})).apply(this,arguments)}function gu(){return(gu=(0,A.A)(function*(f,c,l){const g=Et(f),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(M,z){pe(z.handleCodeInApp,g,"argument-error"),z&&ga(g,M,z)})(v,l),yield Kt(g,v,"getOobCode",ey)})).apply(this,arguments)}function gp(){return(gp=(0,A.A)(function*(f,c,l){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g=(0,oe.Ku)(f),v=Nt.credentialWithLink(c,l||ri());return pe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),sd(g,v)})).apply(this,arguments)}function fd(){return(fd=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:createAuthUri",Y(f,c))})).apply(this,arguments)}function ma(){return ma=(0,A.A)(function*(f,c){const g={identifier:c,continueUri:Xi()?ri():"http://localhost"},{signinMethods:v}=yield function mp(f,c){return fd.apply(this,arguments)}((0,oe.Ku)(f),g);return v||[]}),ma.apply(this,arguments)}function pd(){return pd=(0,A.A)(function*(f,c){const l=(0,oe.Ku)(f),v={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&ga(l.auth,v,c);const{email:w}=yield function eR(f,c){return Bi.apply(this,arguments)}(l.auth,v);w!==f.email&&(yield f.reload())}),pd.apply(this,arguments)}function bc(){return bc=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&ga(g.auth,w,l);const{email:M}=yield function Zl(f,c){return au.apply(this,arguments)}(g.auth,w);M!==f.email&&(yield f.reload())}),bc.apply(this,arguments)}function _p(){return(_p=(0,A.A)(function*(f,c){return de(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function yp(){return yp=(0,A.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const g=(0,oe.Ku)(f),w={idToken:yield g.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},M=yield Or(g,function eC(f,c){return _p.apply(this,arguments)}(g.auth,w));g.displayName=M.displayName||null,g.photoURL=M.photoUrl||null;const z=g.providerData.find(({providerId:X})=>"password"===X);z&&(z.displayName=g.displayName,z.photoURL=g.photoURL),yield g._updateTokensIfNecessary(M)}),yp.apply(this,arguments)}function dy(f,c,l){return vp.apply(this,arguments)}function vp(){return vp=(0,A.A)(function*(f,c,l){const{auth:g}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(w.email=c),l&&(w.password=l);const M=yield Or(f,function Kw(f,c){return Z_.apply(this,arguments)}(g,w));yield f._updateTokensIfNecessary(M,!0)}),vp.apply(this,arguments)}class _a{constructor(c,l,g={}){this.isNewUser=c,this.providerId=l,this.profile=g}}class hy extends _a{constructor(c,l,g,v){super(c,l,g),this.username=v}}class rC extends _a{constructor(c,l){super(c,"facebook.com",l)}}class iC extends hy{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Pn extends _a{constructor(c,l){super(c,"google.com",l)}}class oC extends hy{constructor(c,l,g){super(c,"twitter.com",l,g)}}function sC(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function nC(f){var c,l;if(!f)return null;const{providerId:g}=f,v=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!g&&f?.idToken){const M=null===(l=null===(c=Li(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(M)return new _a(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!g)return null;switch(g){case"facebook.com":return new rC(w,v);case"github.com":return new iC(w,v);case"google.com":return new Pn(w,v);case"twitter.com":return new oC(w,v,f.screenName||null);case"custom":case"anonymous":return new _a(w,null);default:return new _a(w,g,v)}}(l)}class va{constructor(c,l,g){this.type=c,this.credential=l,this.user=g}static _fromIdtoken(c,l){return new va("enroll",c,l)}static _fromMfaPendingCredential(c){return new va("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,g;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return va._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return va._fromIdtoken(c.multiFactorSession.idToken)}return null}}class ts{constructor(c,l,g){this.session=c,this.hints=l,this.signInResolver=g}static _fromError(c,l){const g=Et(c),v=l.customData._serverResponse,w=(v.mfaInfo||[]).map(z=>gr._fromServerResponse(g,z));pe(v.mfaPendingCredential,g,"internal-error");const M=va._fromMfaPendingCredential(v.mfaPendingCredential);return new ts(M,w,function(){var z=(0,A.A)(function*(X){const be=yield X._process(g,M);delete v.mfaInfo,delete v.mfaPendingCredential;const Fe=Object.assign(Object.assign({},v),{idToken:be.idToken,refreshToken:be.refreshToken});switch(l.operationType){case"signIn":const Oe=yield kr._fromIdTokenResponse(g,l.operationType,Fe);return yield g._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return pe(l.user,g,"internal-error"),kr._forOperation(l.user,l.operationType,Fe);default:Vt(g,"internal-error")}});return function(X){return z.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,A.A)(function*(){return l.signInResolver(c)})()}}class Tp{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(g=>gr._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new Tp(c)}getSession(){var c=this;return(0,A.A)(function*(){return va._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var g=this;return(0,A.A)(function*(){const v=c,w=yield g.getSession(),M=yield Or(g.user,v._process(g.user.auth,w,l));return yield g.user._updateTokensIfNecessary(M),g.user.reload()})()}unenroll(c){var l=this;return(0,A.A)(function*(){const g="string"==typeof c?c:c.uid,v=yield l.user.getIdToken();try{const w=yield Or(l.user,function bp(f,c){return de(f,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(f,c))}(l.user.auth,{idToken:v,mfaEnrollmentId:g}));l.enrolledFactors=l.enrolledFactors.filter(({uid:M})=>M!==g),yield l.user._updateTokensIfNecessary(w),yield l.user.reload()}catch(w){throw w}})()}}const Tc=new WeakMap,Dc="__sak";class As{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const gd=(()=>{class f extends As{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,g)=>this.onStorageEvent(l,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=le(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),w=this.localCache[g];v!==w&&l(g,w,v)}}onStorageEvent(l,g=!1){if(!l.key)return void this.forAllChangedKeys((z,X,be)=>{this.notifyListeners(z,be)});const v=l.key;g?this.detachListener():this.stopPolling();const w=()=>{const z=this.storage.getItem(v);!g&&this.localCache[v]===z||this.notifyListeners(v,z)},M=this.storage.getItem(v);!function $(){return(0,oe.lT)()&&10===document.documentMode}()||M===l.newValue||l.newValue===l.oldValue?w():setTimeout(w,10)}notifyListeners(l,g){this.localCache[l]=g;const v=this.listeners[l];if(v)for(const w of Array.from(v))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,g){var v=()=>super._set,w=this;return(0,A.A)(function*(){yield v().call(w,l,g),w.localCache[l]=JSON.stringify(g)})()}_get(l){var g=()=>super._get,v=this;return(0,A.A)(function*(){const w=yield g().call(v,l);return v.localCache[l]=JSON.stringify(w),w})()}_remove(l){var g=()=>super._remove,v=this;return(0,A.A)(function*(){yield g().call(v,l),delete v.localCache[l]})()}}return f.type="LOCAL",f})(),ao=(()=>{class f extends As{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,g){}_removeListener(l,g){}}return f.type="SESSION",f})();let mu=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const g=this.receivers.find(w=>w.isListeningto(l));if(g)return g;const v=new f(l);return this.receivers.push(v),v}isListeningto(l){return this.eventTarget===l}handleEvent(l){var g=this;return(0,A.A)(function*(){const v=l,{eventId:w,eventType:M,data:z}=v.data,X=g.handlersMap[M];if(!X?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const be=Array.from(X).map(function(){var Oe=(0,A.A)(function*(un){return un(v.origin,z)});return function(un){return Oe.apply(this,arguments)}}()),Fe=yield function Kr(f){return Promise.all(f.map(function(){var c=(0,A.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(g){return{fulfilled:!1,reason:g}}});return function(l){return c.apply(this,arguments)}}()))}(be);v.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:Fe})})()}_subscribe(l,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(g)}_unsubscribe(l,g){this.handlersMap[l]&&g&&this.handlersMap[l].delete(g),(!g||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Ia(f="",c=10){let l="";for(let g=0;g<c;g++)l+=Math.floor(10*Math.random());return f+l}class dC{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,g=50){var v=this;return(0,A.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let M,z;return new Promise((X,be)=>{const Fe=Ia("",20);w.port1.start();const Oe=setTimeout(()=>{be(new Error("unsupported_event"))},g);z={messageChannel:w,onMessage(un){const fo=un;if(fo.data.eventId===Fe)switch(fo.data.status){case"ack":clearTimeout(Oe),M=setTimeout(()=>{be(new Error("timeout"))},3e3);break;case"done":clearTimeout(M),X(fo.data.response);break;default:clearTimeout(Oe),clearTimeout(M),be(new Error("invalid_response"))}}},v.handlers.add(z),w.port1.addEventListener("message",z.onMessage),v.target.postMessage({eventType:c,eventId:Fe,data:l},[w.port2])}).finally(()=>{z&&v.removeMessageHandler(z)})})()}}function Qn(){return window}function Ss(){return typeof Qn().WorkerGlobalScope<"u"&&"function"==typeof Qn().importScripts}function Sp(){return(Sp=(0,A.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const uo="firebaseLocalStorageDb",_u="firebaseLocalStorage",Ea="fbase_key";class Ac{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function md(f,c){return f.transaction([_u],c?"readwrite":"readonly").objectStore(_u)}function _d(){const f=indexedDB.open(uo,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const g=f.result;try{g.createObjectStore(_u,{keyPath:Ea})}catch(v){l(v)}}),f.addEventListener("success",(0,A.A)(function*(){const g=f.result;g.objectStoreNames.contains(_u)?c(g):(g.close(),yield function rr(){const f=indexedDB.deleteDatabase(uo);return new Ac(f).toPromise()}(),c(yield _d()))}))})}function vy(f,c,l){return wa.apply(this,arguments)}function wa(){return(wa=(0,A.A)(function*(f,c,l){const g=md(f,!0).put({[Ea]:c,value:l});return new Ac(g).toPromise()})).apply(this,arguments)}function Rp(){return(Rp=(0,A.A)(function*(f,c){const l=md(f,!1).get(c),g=yield new Ac(l).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Iy(f,c){const l=md(f,!0).delete(c);return new Ac(l).toPromise()}const Ms=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,A.A)(function*(){return l.db||(l.db=yield _d()),l.db})()}_withRetries(l){var g=this;return(0,A.A)(function*(){let v=0;for(;;)try{const w=yield g._openDb();return yield l(w)}catch(w){if(v++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,A.A)(function*(){return Ss()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,A.A)(function*(){l.receiver=mu._getInstance(function Mp(){return Ss()?self:null}()),l.receiver._subscribe("keyChanged",function(){var g=(0,A.A)(function*(v,w){return{keyProcessed:(yield l._poll()).includes(w.key)}});return function(v,w){return g.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var g=(0,A.A)(function*(v,w){return["keyChanged"]});return function(v,w){return g.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,A.A)(function*(){var g,v;if(l.activeServiceWorker=yield function hC(){return Sp.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new dC(l.activeServiceWorker);const w=yield l.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var g=this;return(0,A.A)(function*(){if(g.sender&&g.activeServiceWorker&&function fC(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:l},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,A.A)(function*(){try{if(!indexedDB)return!1;const l=yield _d();return yield vy(l,Dc,"1"),yield Iy(l,Dc),!0}catch{}return!1})()}_withPendingWrite(l){var g=this;return(0,A.A)(function*(){g.pendingWrites++;try{yield l()}finally{g.pendingWrites--}})()}_set(l,g){var v=this;return(0,A.A)(function*(){return v._withPendingWrite((0,A.A)(function*(){return yield v._withRetries(w=>vy(w,l,g)),v.localCache[l]=g,v.notifyServiceWorker(l)}))})()}_get(l){var g=this;return(0,A.A)(function*(){const v=yield g._withRetries(w=>function pC(f,c){return Rp.apply(this,arguments)}(w,l));return g.localCache[l]=v,v})()}_remove(l){var g=this;return(0,A.A)(function*(){return g._withPendingWrite((0,A.A)(function*(){return yield g._withRetries(v=>Iy(v,l)),delete g.localCache[l],g.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,A.A)(function*(){const g=yield l._withRetries(M=>{const z=md(M,!1).getAll();return new Ac(z).toPromise()});if(!g)return[];if(0!==l.pendingWrites)return[];const v=[],w=new Set;if(0!==g.length)for(const{fbase_key:M,value:z}of g)w.add(M),JSON.stringify(l.localCache[M])!==JSON.stringify(z)&&(l.notifyListeners(M,z),v.push(M));for(const M of Object.keys(l.localCache))l.localCache[M]&&!w.has(M)&&(l.notifyListeners(M,null),v.push(M));return v})()}notifyListeners(l,g){this.localCache[l]=g;const v=this.listeners[l];if(v)for(const w of Array.from(v))w(g)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,A.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),ci=1e12;class Tr{constructor(c){this.auth=c,this.counter=ci,this._widgets=new Map}render(c,l){const g=this.counter;return this._widgets.set(g,new Qr(c,this.auth.name,l||{})),this.counter++,g}reset(c){var l;const g=c||ci;null===(l=this._widgets.get(g))||void 0===l||l.delete(),this._widgets.delete(g)}getResponse(c){var l;return(null===(l=this._widgets.get(c||ci))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,A.A)(function*(){var g;return null===(g=l._widgets.get(c||ci))||void 0===g||g.execute(),""})()}}class Qr{constructor(c,l,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;pe(v,"argument-error",{appName:l}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yu(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<f;g++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const an=Wt("rcb"),Zn=new Ci(3e4,6e4);class Po{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Qn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return pe(function Xe(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Bn(Qn().grecaptcha)?Promise.resolve(Qn().grecaptcha):new Promise((g,v)=>{const w=Qn().setTimeout(()=>{v(Lt(c,"network-request-failed"))},Zn.get());Qn()[an]=()=>{Qn().clearTimeout(w),delete Qn()[an];const z=Qn().grecaptcha;if(!z||!Bn(z))return void v(Lt(c,"internal-error"));const X=z.render;z.render=(be,Fe)=>{const Oe=X(be,Fe);return this.counter++,Oe},this.hostLanguage=l,g(z)},W_(`${function _n(){return da.recaptchaV2Script}()}?${(0,oe.Am)({onload:an,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(w),v(Lt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Qn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sc{load(c){return(0,A.A)(function*(){return new Tr(c)})()}clearedOneInstance(){}}const Pp="recaptcha",vu={theme:"light",type:"image"};class Tn{constructor(c,l,g=Object.assign({},vu)){this.parameters=g,this.type=Pp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(c),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof l?document.getElementById(l):l;pe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sc:new Po,this.validateStartingState()}verify(){var c=this;return(0,A.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(l)||new Promise(w=>{const M=z=>{z&&(c.tokenChangeListeners.delete(M),w(z))};c.tokenChangeListeners.add(M),c.isInvisible&&g.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(g=>g(l)),"function"==typeof c)c(l);else if("string"==typeof c){const g=Qn()[c];"function"==typeof g&&g(l)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,A.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const g=document.createElement("div");l.appendChild(g),l=g}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,A.A)(function*(){pe(Xi()&&!Ss(),c.auth,"internal-error"),yield function Ca(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function ii(f){return oa.apply(this,arguments)}(c.auth);pe(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rs{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=Is._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function Ps(){return(Ps=(0,A.A)(function*(f,c,l){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g=Et(f),v=yield Ue(g,c,(0,oe.Ku)(l));return new Rs(v,w=>sd(g,w))})).apply(this,arguments)}function xo(){return(xo=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);yield we(!1,g,"phone");const v=yield Ue(g.auth,c,(0,oe.Ku)(l));return new Rs(v,w=>ay(g,w))})).apply(this,arguments)}function li(){return(li=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);if((0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));const v=yield Ue(g.auth,c,(0,oe.Ku)(l));return new Rs(v,w=>fu(g,w))})).apply(this,arguments)}function Ue(f,c,l){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,A.A)(function*(f,c,l){var g;const v=yield l.verify();try{let w;if(pe("string"==typeof v,f,"argument-error"),pe(l.type===Pp,f,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const M=w.session;if("phoneNumber"in w)return pe("enroll"===M.type,f,"internal-error"),(yield function wp(f,c){return de(f,"POST","/v2/accounts/mfaEnrollment:start",Y(f,c))}(f,{idToken:M.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{pe("signin"===M.type,f,"internal-error");const z=(null===(g=w.multiFactorHint)||void 0===g?void 0:g.uid)||w.multiFactorUid;return pe(z,f,"missing-multi-factor-info"),(yield function yd(f,c){return de(f,"POST","/v2/accounts/mfaSignIn:start",Y(f,c))}(f,{mfaPendingCredential:M.credential,mfaEnrollmentId:z,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:M}=yield function tp(f,c){return ty.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:v});return M}}finally{l._reset()}}),Mc.apply(this,arguments)}function ji(){return(ji=(0,A.A)(function*(f,c){const l=(0,oe.Ku)(f);if((0,Ne._isFirebaseServerApp)(l.auth.app))return Promise.reject(Ye(l.auth));yield Mo(l,c)})).apply(this,arguments)}let xs=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Et(l)}verifyPhoneNumber(l,g){return Ue(this.auth,l,(0,oe.Ku)(g))}static credential(l,g){return Is._fromVerification(l,g)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:g,temporaryProof:v}=l;return g&&v?Is._fromTokenResponse(g,v):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function $i(f,c){return c?Pe(c):(pe(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class xn extends yc{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ro(c,this._buildIdpRequest())}_linkToIdToken(c,l){return ro(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return ro(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function Id(f){return od(f.auth,new xn(f),f.bypassAuthState)}function ir(f){const{auth:c,user:l}=f;return pe(l,c,"internal-error"),G(l,new xn(f),f.bypassAuthState)}function Vr(f){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,A.A)(function*(f){const{auth:c,user:l}=f;return pe(l,c,"internal-error"),Mo(l,new xn(f),f.bypassAuthState)})).apply(this,arguments)}class Ns{constructor(c,l,g,v,w=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,A.A)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(g,v){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,A.A)(function*(){const{urlResponse:g,sessionId:v,postBody:w,tenantId:M,error:z,type:X}=c;if(z)return void l.reject(z);const be={auth:l.auth,requestUri:g,sessionId:v,tenantId:M||void 0,postBody:w||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(X)(be))}catch(Fe){l.reject(Fe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Id;case"linkViaPopup":case"linkViaRedirect":return Vr;case"reauthViaPopup":case"reauthViaRedirect":return ir;default:Vt(this.auth,"internal-error")}}resolve(c){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ed=new Ci(2e3,1e4);function ba(){return(ba=(0,A.A)(function*(f,c,l){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Lt(f,"operation-not-supported-in-this-environment"));const g=Et(f);Un(f,c,Es);const v=$i(g,l);return new Op(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function xp(){return(xp=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);if((0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth,"operation-not-supported-in-this-environment"));Un(g.auth,c,Es);const v=$i(g.auth,l);return new Op(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function wd(){return(wd=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);Un(g.auth,c,Es);const v=$i(g.auth,l);return new Op(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let Op=(()=>{class f extends Ns{constructor(l,g,v,w,M){super(l,g,w,M),this.provider=v,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,A.A)(function*(){const g=yield l.execute();return pe(g,l.auth,"internal-error"),g})()}onExecution(){var l=this;return(0,A.A)(function*(){Gn(1===l.filter.length,"Popup operations only handle one event");const g=Ia();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],g),l.authWindow.associatedEvent=g,l.resolver._originValidation(l.auth).catch(v=>{l.reject(v)}),l.resolver._isIframeWebStorageSupported(l.auth,v=>{v||l.reject(Lt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Ed.get())};l()}}return f.currentPopupAction=null,f})();const kp="pendingRedirect",Cd=new Map;class aR extends Ns{constructor(c,l,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,A.A)(function*(){let g=Cd.get(l.auth._key());if(!g){try{const w=(yield function uR(f,c){return Cy.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;g=()=>Promise.resolve(w)}catch(v){g=()=>Promise.reject(v)}Cd.set(l.auth._key(),g)}return l.bypassAuthState||Cd.set(l.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,g=this;return(0,A.A)(function*(){if("signInViaRedirect"===c.type)return l().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,l().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,A.A)(function*(){})()}cleanUp(){}}function Cy(){return(Cy=(0,A.A)(function*(f,c){const l=yC(c),g=_C(f);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(l));return yield g._remove(l),v})).apply(this,arguments)}function by(f,c){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,A.A)(function*(f,c){return _C(f)._set(yC(c),"true")})).apply(this,arguments)}function Dy(f,c){Cd.set(f._key(),c)}function _C(f){return Pe(f._redirectPersistence)}function yC(f){return sn(kp,f.config.apiKey,f.name)}function lR(f,c,l){return function dR(f,c,l){return bd.apply(this,arguments)}(f,c,l)}function bd(){return(bd=(0,A.A)(function*(f,c,l){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g=Et(f);Un(f,c,Es),yield g._initializationPromise;const v=$i(g,l);return yield by(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function Ay(f,c,l){return function hR(f,c,l){return Sy.apply(this,arguments)}(f,c,l)}function Sy(){return(Sy=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);if(Un(g.auth,c,Es),(0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));yield g.auth._initializationPromise;const v=$i(g.auth,l);yield by(v,g.auth);const w=yield Ry(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function fR(f,c,l){return function pR(f,c,l){return Fp.apply(this,arguments)}(f,c,l)}function Fp(){return(Fp=(0,A.A)(function*(f,c,l){const g=(0,oe.Ku)(f);Un(g.auth,c,Es),yield g.auth._initializationPromise;const v=$i(g.auth,l);yield we(!1,g,c.providerId),yield by(v,g.auth);const w=yield Ry(g);return v._openRedirect(g.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function Lr(){return(Lr=(0,A.A)(function*(f,c){return yield Et(f)._initializationPromise,xc(f,c,!1)})).apply(this,arguments)}function xc(f,c){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,A.A)(function*(f,c,l=!1){if((0,Ne._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const g=Et(f),v=$i(g,c),M=yield new aR(g,v,l).execute();return M&&!l&&(delete M.user._redirectEventId,yield g._persistUserIfCurrent(M.user),yield g._setRedirectUser(null,c)),M})).apply(this,arguments)}function Ry(f){return Td.apply(this,arguments)}function Td(){return(Td=(0,A.A)(function*(f){const c=Ia(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class xy{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(l=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function No(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ny(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var g;if(c.error&&!Ny(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";l.onError(Lt(this.auth,v))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const g=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dd(c))}saveEventToCache(c){this.cachedEventUids.add(Dd(c)),this.lastProcessedEventTime=Date.now()}}function Dd(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Ny({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Lp(f){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,A.A)(function*(f,c={}){return de(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Ot=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Up=/^https?/;function Dr(){return(Dr=(0,A.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Lp(f);for(const l of c)try{if(vC(l))return}catch{}Vt(f,"unauthorized-domain")})).apply(this,arguments)}function vC(f){const c=ri(),{protocol:l,hostname:g}=new URL(c);if(f.startsWith("chrome-extension://")){const M=new URL(f);return""===M.hostname&&""===g?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&M.hostname===g}if(!Up.test(l))return!1;if(Ot.test(f))return g===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Oc=new Ci(3e4,6e4);function Os(){const f=Qn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Sd=null;const IC=new Ci(5e3,15e3),zi="__/auth/iframe",Oy="emulator/auth/iframe",ky={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Md(f){const c=f.config;pe(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?_s(c,Oy):`https://${f.config.authDomain}/${zi}`,g={apiKey:c.apiKey,appName:f.name,v:Ne.SDK_VERSION},v=Fy.get(f.config.apiHost);v&&(g.eid=v);const w=f._getFrameworks();return w.length&&(g.fw=w.join(",")),`${l}?${(0,oe.Am)(g).slice(1)}`}function Iu(){return Iu=(0,A.A)(function*(f){const c=yield function Bp(f){return Sd=Sd||function Di(f){return new Promise((c,l)=>{var g,v,w;function M(){Os(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Os(),l(Lt(f,"network-request-failed"))},timeout:Oc.get()})}if(null!==(v=null===(g=Qn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(w=Qn().gapi)||void 0===w||!w.load){const z=Wt("iframefcb");return Qn()[z]=()=>{gapi.load?M():l(Lt(f,"network-request-failed"))},W_(`${function KM(){return da.gapiScript}()}?onload=${z}`).catch(X=>l(X))}M()}}).catch(c=>{throw Sd=null,c})}(f),Sd}(f),l=Qn().gapi;return pe(l,f,"internal-error"),c.open({where:document.body,url:Md(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ky,dontclear:!0},g=>new Promise(function(){var v=(0,A.A)(function*(w,M){yield g.restyle({setHideOnLeave:!1});const z=Lt(f,"network-request-failed"),X=Qn().setTimeout(()=>{M(z)},IC.get());function be(){Qn().clearTimeout(X),w(g)}g.ping(be).then(be,()=>{M(z)})});return function(w,M){return v.apply(this,arguments)}}()))}),Iu.apply(this,arguments)}const Rd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xd{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const EC="__/auth/handler",wC="emulator/auth/handler",CC=encodeURIComponent("fac");function Nd(f,c,l,g,v,w){return is.apply(this,arguments)}function is(){return(is=(0,A.A)(function*(f,c,l,g,v,w){pe(f.config.authDomain,f,"auth-domain-config-required"),pe(f.config.apiKey,f,"invalid-api-key");const M={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:g,v:Ne.SDK_VERSION,eventId:v};if(c instanceof Es){c.setDefaultLanguage(f.languageCode),M.providerId=c.providerId||"",(0,oe.Im)(c.getCustomParameters())||(M.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Fe,Oe]of Object.entries(w||{}))M[Fe]=Oe}if(c instanceof cu){const Fe=c.getScopes().filter(Oe=>""!==Oe);Fe.length>0&&(M.scopes=Fe.join(","))}f.tenantId&&(M.tid=f.tenantId);const z=M;for(const Fe of Object.keys(z))void 0===z[Fe]&&delete z[Fe];const X=yield f._getAppCheckToken(),be=X?`#${CC}=${encodeURIComponent(X)}`:"";return`${function bC({config:f}){return f.emulator?_s(f,wC):`https://${f.authDomain}/${EC}`}(f)}?${(0,oe.Am)(z).slice(1)}${be}`})).apply(this,arguments)}const zp="webStorageSupport",Ly=class TC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ao,this._completeRedirectFn=xc,this._overrideRedirectResult=Dy}_openPopup(c,l,g,v){var w=this;return(0,A.A)(function*(){var M;Gn(null===(M=w.eventManagers[c._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const z=yield Nd(c,l,g,ri(),v);return function Vy(f,c,l,g=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),M=Math.max((window.screen.availWidth-g)/2,0).toString();let z="";const X=Object.assign(Object.assign({},Rd),{width:g.toString(),height:v.toString(),top:w,left:M}),be=(0,oe.ZQ)().toLowerCase();l&&(z=no(be)?"_blank":l),ui(be)&&(c=c||"http://localhost",X.scrollbars="yes");const Fe=Object.entries(X).reduce((un,[fo,jc])=>`${un}${fo}=${jc},`,"");if(function S(f=(0,oe.ZQ)()){var c;return la(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(be)&&"_self"!==z)return function gR(f,c){const l=document.createElement("a");l.href=f,l.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(g)}(c||"",z),new xd(null);const Oe=window.open(c||"",z,Fe);pe(Oe,f,"popup-blocked");try{Oe.focus()}catch{}return new xd(Oe)}(c,z,Ia())})()}_openRedirect(c,l,g,v){var w=this;return(0,A.A)(function*(){return yield w._originValidation(c),function _y(f){Qn().location.href=f}(yield Nd(c,l,g,ri(),v)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:v,promise:w}=this.eventManagers[l];return v?Promise.resolve(v):(Gn(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(c);return this.eventManagers[l]={promise:g},g.catch(()=>{delete this.eventManagers[l]}),g}initAndGetManager(c){var l=this;return(0,A.A)(function*(){const g=yield function jp(f){return Iu.apply(this,arguments)}(c),v=new xy(c);return g.register("authEvent",w=>(pe(w?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:v},l.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(zp,{type:zp},v=>{var w;const M=null===(w=v?.[0])||void 0===w?void 0:w[zp];void 0!==M&&l(!!M),Vt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Nc(f){return Dr.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return le()||Zo()||la()}};class Uy{constructor(c){this.factorId=c}_process(c,l,g){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,g);case"signin":return this._finalizeSignIn(c,l.credential);default:return wn("unexpected MultiFactorSessionType")}}}class ae extends Uy{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new ae(c)}_finalizeEnroll(c,l,g){return function py(f,c){return de(f,"POST","/v2/accounts/mfaEnrollment:finalize",Y(f,c))}(c,{idToken:l,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function bn(f,c){return de(f,"POST","/v2/accounts/mfaSignIn:finalize",Y(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ft=(()=>{class f{constructor(){}static assertion(l){return ae._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var Eu="@firebase/auth";class Hp{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,A.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zr(){return window}(0,oe.XA)("authIdTokenMaxAge"),function su(f){da=f}({loadJS:f=>new Promise((c,l)=>{const g=document.createElement("script");g.setAttribute("src",f),g.onload=c,g.onerror=v=>{const w=Lt("internal-error");w.customData=v,l(w)},g.type="text/javascript",g.charset="UTF-8",function Yr(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function By(f){(0,Ne._registerComponent)(new Rn.uA("auth",(c,{options:l})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:M,authDomain:z}=g.options;pe(M&&!M.includes(":"),"invalid-api-key",{appName:g.name});const X={apiKey:M,authDomain:z,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(f)},be=new pr(g,v,w,X);return function qw(f,c){const l=c?.persistence||[],g=(Array.isArray(l)?l:[l]).map(Pe);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(g,c?.popupRedirectResolver)}(be,l),be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,g)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Rn.uA("auth-internal",c=>{const l=Et(c.getProvider("auth").getImmediate());return new Hp(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(Eu,"1.7.9",function qp(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Ne.registerVersion)(Eu,"1.7.9","esm2017")}("Browser");function ho(){return ho=(0,A.A)(function*(f,c,l){var g;const{BuildInfo:v}=Zr();Gn(c.sessionId,"AuthEvent did not contain a session ID");const w=yield function Kp(f){return wu.apply(this,arguments)}(c.sessionId),M={};return la()?M.ibi=v.packageName:Jo()?M.apn=v.packageName:Vt(f,"operation-not-supported-in-this-environment"),v.displayName&&(M.appDisplayName=v.displayName),M.sessionId=w,Nd(f,l,c.type,void 0,null!==(g=c.eventId)&&void 0!==g?g:void 0,M)}),ho.apply(this,arguments)}function Od(){return(Od=(0,A.A)(function*(f){const{BuildInfo:c}=Zr(),l={};la()?l.iosBundleId=c.packageName:Jo()?l.androidPackageName=c.packageName:Vt(f,"operation-not-supported-in-this-environment"),yield Lp(f,l)})).apply(this,arguments)}function Fc(){return(Fc=(0,A.A)(function*(f,c,l){const{cordova:g}=Zr();let v=()=>{};try{yield new Promise((w,M)=>{let z=null;function X(){var Oe;w();const un=null===(Oe=g.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof un&&un(),"function"==typeof l?.close&&l.close()}function be(){z||(z=window.setTimeout(()=>{M(Lt(f,"redirect-cancelled-by-user"))},2e3))}function Fe(){"visible"===document?.visibilityState&&be()}c.addPassiveListener(X),document.addEventListener("resume",be,!1),Jo()&&document.addEventListener("visibilitychange",Fe,!1),v=()=>{c.removePassiveListener(X),document.removeEventListener("resume",be,!1),document.removeEventListener("visibilitychange",Fe,!1),z&&window.clearTimeout(z)}})}finally{v()}})).apply(this,arguments)}function wu(){return(wu=(0,A.A)(function*(f){const c=function RC(f){if(Gn(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let g=0;g<f.length;g++)l[g]=f.charCodeAt(g);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Qp extends xy{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,A.A)(function*(){yield c.initPromise})()}}function Yp(f){return kd.apply(this,arguments)}function kd(){return(kd=(0,A.A)(function*(f){const c=yield or()._get(os(f));return c&&(yield or()._remove(os(f))),c})).apply(this,arguments)}function PC(){const f=[];for(let l=0;l<20;l++){const g=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return f.join("")}function or(){return Pe(gd)}function os(f){return sn("authEvent",f.config.apiKey,f.name)}function Fd(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,oe.I9)(l.join("?"))}const Gy=class OC{constructor(){this._redirectPersistence=ao,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xc,this._overrideRedirectResult=Dy}_initialize(c){var l=this;return(0,A.A)(function*(){const g=c._key();let v=l.eventManagers.get(g);return v||(v=new Qp(c),l.eventManagers.set(g,v),l.attachCallbackListeners(c,v)),v})()}_openPopup(c){Vt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,g,v){var w=this;return(0,A.A)(function*(){!function Wp(f){var c,l,g,v,w,M,z,X,be,Fe;const Oe=Zr();pe("function"==typeof(null===(c=Oe?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pe(typeof(null===(l=Oe?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pe("function"==typeof(null===(w=null===(v=null===(g=Oe?.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===w?void 0:w.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(X=null===(z=null===(M=Oe?.cordova)||void 0===M?void 0:M.plugins)||void 0===z?void 0:z.browsertab)||void 0===X?void 0:X.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(Fe=null===(be=Oe?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===Fe?void 0:Fe.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const M=yield w._initialize(c);yield M.initialized(),M.resetRedirect(),function cR(){Cd.clear()}(),yield w._originValidation(c);const z=function Hy(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:PC(),postBody:null,tenantId:f.tenantId,error:Lt(f,"no-auth-event")}}(c,g,v);yield function qy(f,c){return or()._set(os(f),c)}(c,z);const X=yield function lo(f,c,l){return ho.apply(this,arguments)}(c,z,l),be=yield function SC(f){const{cordova:c}=Zr();return new Promise(l=>{c.plugins.browsertab.isAvailable(g=>{let v=null;g?c.plugins.browsertab.openUrl(f):v=c.InAppBrowser.open(f,function Wl(f=(0,oe.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(v)})})}(X);return function MC(f,c,l){return Fc.apply(this,arguments)}(c,M,be)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function AC(f){return Od.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:g,handleOpenURL:v,BuildInfo:w}=Zr(),M=setTimeout((0,A.A)(function*(){yield Yp(c),l.onEvent(Jp())}),500),z=function(){var Fe=(0,A.A)(function*(Oe){clearTimeout(M);const un=yield Yp(c);let fo=null;un&&Oe?.url&&(fo=function Zp(f,c){var l,g;const v=function xC(f){const c=Fd(f),l=c.link?decodeURIComponent(c.link):void 0,g=Fd(l).link,v=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Fd(v).link||v||g||l||f}(c);if(v.includes("/__/auth/callback")){const w=Fd(v),M=w.firebaseError?function hn(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,z=null===(g=null===(l=M?.code)||void 0===l?void 0:l.split("auth/"))||void 0===g?void 0:g[1],X=z?Lt(z):null;return X?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:X,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:v,postBody:null}}return null}(un,Oe.url)),l.onEvent(fo||Jp())});return function(un){return Fe.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,z);const X=v,be=`${w.packageName.toLowerCase()}://`;Zr().handleOpenURL=function(){var Fe=(0,A.A)(function*(Oe){if(Oe.toLowerCase().startsWith(be)&&z({url:Oe}),"function"==typeof X)try{X(Oe)}catch(un){console.error(un)}});return function(Oe){return Fe.apply(this,arguments)}}()}};function Jp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lt("no-auth-event")}}function ks(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function Ud(f=(0,oe.ZQ)()){return!("file:"!==ks()&&"ionic:"!==ks()&&"capacitor:"!==ks()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function bu(){try{const f=self.localStorage,c=Ia();if(f)return f.setItem(c,"1"),f.removeItem(c),!function Cu(f=(0,oe.ZQ)()){return function Ky(){return(0,oe.lT)()&&11===document?.documentMode}()||function FC(f=(0,oe.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,oe.zW)()}catch{return Xp()&&(0,oe.zW)()}return!1}function Xp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lc(){return(function Ld(){return"http:"===ks()||"https:"===ks()}()||(0,oe.sr)()||Ud())&&!function Wy(){return(0,oe.lV)()||(0,oe.Ll)()}()&&bu()&&!Xp()}function eg(){return Ud()&&typeof document<"u"}function tg(){return(tg=(0,A.A)(function*(){return!!eg()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const qi={LOCAL:"local",NONE:"none",SESSION:"session"},Bd=pe,jd="persistence";function Uc(f){return Da.apply(this,arguments)}function Da(){return(Da=(0,A.A)(function*(f){yield f._initializationPromise;const c=Tu(),l=sn(jd,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function Tu(){var f;try{return(null===(f=function LC(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const BC=pe;class ko{constructor(){this.browserResolver=Pe(Ly),this.cordovaResolver=Pe(Gy),this.underlyingResolver=null,this._redirectPersistence=ao,this._completeRedirectFn=xc,this._overrideRedirectResult=Dy}_initialize(c){var l=this;return(0,A.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,g,v){var w=this;return(0,A.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(c,l,g,v)})()}_openRedirect(c,l,g,v){var w=this;return(0,A.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(c,l,g,v)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return BC(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,A.A)(function*(){if(c.underlyingResolver)return;const l=yield function VC(){return tg.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Bc(f){return f.unwrap()}function Qy(f){return Zy(f)}function Zy(f){const{_tokenResponse:c}=f instanceof oe.g?f.customData:f;if(!c)return null;if(!(f instanceof oe.g)&&"temporaryProof"in c&&"phoneNumber"in c)return xs.credentialFromResult(f);const l=c.providerId;if(!l||l===zt.PASSWORD)return null;let g;switch(l){case zt.GOOGLE:g=ry;break;case zt.FACEBOOK:g=Yw;break;case zt.GITHUB:g=ed;break;case zt.TWITTER:g=rp;break;default:const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:z,nonce:X}=c;return w||M||v||z?z?l.startsWith("saml.")?ws._create(l,z):So._fromParams({providerId:l,signInMethod:l,pendingToken:z,idToken:v,accessToken:w}):new lu(l).credential({idToken:v,accessToken:w,rawNonce:X}):null}return f instanceof oe.g?g.credentialFromError(f):g.credentialFromResult(f)}function Nn(f,c){return c.catch(l=>{throw l instanceof oe.g&&function Yy(f,c){var l;const g=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new rg(f,function fy(f,c){var l;const g=(0,oe.Ku)(f),v=c;return pe(c.customData.operationType,g,"argument-error"),pe(null===(l=v.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,g,"argument-error"),ts._fromError(g,v)}(f,c));else if(g){const v=Zy(c),w=c;v&&(w.credential=v,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(f,l),l}).then(l=>{const v=l.user;return{operationType:l.operationType,credential:Qy(l),additionalUserInfo:sC(l),user:Fo.getOrCreate(v)}})}function ng(f,c){return Du.apply(this,arguments)}function Du(){return(Du=(0,A.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:g=>Nn(f,l.confirm(g))}})).apply(this,arguments)}class rg{constructor(c,l){this.resolver=l,this.auth=function yR(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Nn(Bc(this.auth),this.resolver.resolveSignIn(c))}}class Fo{constructor(c){this._delegate=c,this.multiFactor=function gy(f){const c=(0,oe.Ku)(f);return Tc.has(c)||Tc.set(c,Tp._fromUser(c)),Tc.get(c)}(c)}static getOrCreate(c){return Fo.USER_MAP.has(c)||Fo.USER_MAP.set(c,new Fo(c)),Fo.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,A.A)(function*(){return Nn(l.auth,ay(l._delegate,c))})()}linkWithPhoneNumber(c,l){var g=this;return(0,A.A)(function*(){return ng(g.auth,function Ey(f,c,l){return xo.apply(this,arguments)}(g._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,A.A)(function*(){return Nn(l.auth,function Np(f,c,l){return wd.apply(this,arguments)}(l._delegate,c,ko))})()}linkWithRedirect(c){var l=this;return(0,A.A)(function*(){return yield Uc(Et(l.auth)),fR(l._delegate,c,ko)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,A.A)(function*(){return Nn(l.auth,fu(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return ng(this.auth,function vd(f,c,l){return li.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Nn(this.auth,function wy(f,c,l){return xp.apply(this,arguments)}(this._delegate,c,ko))}reauthenticateWithRedirect(c){var l=this;return(0,A.A)(function*(){return yield Uc(Et(l.auth)),Ay(l._delegate,c,ko)})()}sendEmailVerification(c){return function cy(f,c){return pd.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,A.A)(function*(){return yield function du(f,c){return sp.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function ly(f,c){const l=(0,oe.Ku)(f);return(0,Ne._isFirebaseServerApp)(l.auth.app)?Promise.reject(Ye(l.auth)):dy(l,c,null)}(this._delegate,c)}updatePassword(c){return function tC(f,c){return dy((0,oe.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Rc(f,c){return ji.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function so(f,c){return yp.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Xw(f,c,l){return bc.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fo.USER_MAP=new WeakMap;const Fs=pe;let $d=(()=>{class f{constructor(l,g){if(this.app=l,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=l.options;Fs(v,"invalid-api-key",{appName:l.name}),Fs(v,"invalid-api-key",{appName:l.name});const w=typeof window<"u"?ko:void 0;this._delegate=g.initialize({options:{persistence:Xy(v,l.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(fr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,g){!function Gw(f,c,l){const g=Et(f);pe(g._canInitEmulator,g,"emulator-config-failed"),pe(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!l?.disableWarnings,w=Xo(c),{host:M,port:z}=function YM(f){const c=Xo(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const g=l[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const w=v[1];return{host:w,port:Ww(g.substr(w.length+1))}}{const[w,M]=g.split(":");return{host:w,port:Ww(M)}}}(c);g.config.emulator={url:`${w}//${M}${null===z?"":`:${z}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:M,port:z,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function ZM(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,g)}applyActionCode(l){return function fp(f,c){return bs.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Jw(this._delegate,l)}confirmPasswordReset(l,g){return function iR(f,c,l){return Gr.apply(this,arguments)}(this._delegate,l,g)}createUserWithEmailAndPassword(l,g){var v=this;return(0,A.A)(function*(){return Nn(v._delegate,function io(f,c,l){return dd.apply(this,arguments)}(v._delegate,l,g))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function uy(f,c){return ma.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function oo(f,c){const l=uu.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,A.A)(function*(){Fs(Lc(),l._delegate,"operation-not-supported-in-this-environment");const g=yield function My(f,c){return Lr.apply(this,arguments)}(l._delegate,ko);return g?Nn(l._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Vc(f,c){Et(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,g,v){const{next:w,error:M,complete:z}=Jy(l,g,v);return this._delegate.onAuthStateChanged(w,M,z)}onIdTokenChanged(l,g,v){const{next:w,error:M,complete:z}=Jy(l,g,v);return this._delegate.onIdTokenChanged(w,M,z)}sendSignInLinkToEmail(l,g){return function hd(f,c,l){return gu.apply(this,arguments)}(this._delegate,l,g)}sendPasswordResetEmail(l,g){return function rR(f,c,l){return cd.apply(this,arguments)}(this._delegate,l,g||void 0)}setPersistence(l){var g=this;return(0,A.A)(function*(){let v;switch(function Ta(f,c){Bd(Object.values(qi).includes(c),f,"invalid-persistence-type"),(0,oe.lV)()?Bd(c!==qi.SESSION,f,"unsupported-persistence-type"):(0,oe.Ll)()?Bd(c===qi.NONE,f,"unsupported-persistence-type"):Xp()?Bd(c===qi.NONE||c===qi.LOCAL&&(0,oe.zW)(),f,"unsupported-persistence-type"):Bd(c===qi.NONE||bu(),f,"unsupported-persistence-type")}(g._delegate,l),l){case qi.SESSION:v=ao;break;case qi.LOCAL:v=(yield Pe(Ms)._isAvailable())?Ms:gd;break;case qi.NONE:v=ke;break;default:return Vt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Nn(this._delegate,function nd(f){return ip.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Nn(this._delegate,sd(this._delegate,l))}signInWithCustomToken(l){return Nn(this._delegate,function pa(f,c){return hp.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,g){return Nn(this._delegate,function pp(f,c,l){return(0,Ne._isFirebaseServerApp)(f.app)?Promise.reject(Ye(f)):sd((0,oe.Ku)(f),Nt.credential(c,l)).catch(function(){var g=(0,A.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&pu(f),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,l,g))}signInWithEmailLink(l,g){return Nn(this._delegate,function Ts(f,c,l){return gp.apply(this,arguments)}(this._delegate,l,g))}signInWithPhoneNumber(l,g){return ng(this._delegate,function ns(f,c,l){return Ps.apply(this,arguments)}(this._delegate,l,g))}signInWithPopup(l){var g=this;return(0,A.A)(function*(){return Fs(Lc(),g._delegate,"operation-not-supported-in-this-environment"),Nn(g._delegate,function co(f,c,l){return ba.apply(this,arguments)}(g._delegate,l,ko))})()}signInWithRedirect(l){var g=this;return(0,A.A)(function*(){return Fs(Lc(),g._delegate,"operation-not-supported-in-this-environment"),yield Uc(g._delegate),lR(g._delegate,l,ko)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Ro(f,c){return bt.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=qi,f})();function Jy(f,c,l){let g=f;"function"!=typeof f&&({next:g,error:c,complete:l}=f);const v=g;return{next:M=>v(M&&Fo.getOrCreate(M)),error:c,complete:l}}function Xy(f,c){const l=function UC(f,c){const l=Tu();if(!l)return[];const g=sn(jd,f,c);switch(l.getItem(g)){case qi.NONE:return[ke];case qi.LOCAL:return[Ms,ao];case qi.SESSION:return[ao];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(Ms)&&l.push(Ms),typeof window<"u")for(const g of[gd,ao])l.includes(g)||l.push(g);return l.includes(ke)||l.push(ke),l}class zd{constructor(){this.providerId="phone",this._delegate=new xs(Bc(Le.A.auth()))}static credential(c,l){return xs.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}zd.PHONE_SIGN_IN_METHOD=xs.PHONE_SIGN_IN_METHOD,zd.PROVIDER_ID=xs.PROVIDER_ID;const ev=pe;class tv{constructor(c,l,g=Le.A.app()){var v;ev(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Tn(g.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hd(f){f.INTERNAL.registerComponent(new Rn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),g=c.getProvider("auth");return new $d(l,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nt,FacebookAuthProvider:Yw,GithubAuthProvider:ed,GoogleAuthProvider:ry,OAuthProvider:lu,SAMLAuthProvider:Cr,PhoneAuthProvider:zd,PhoneMultiFactorGenerator:ft,RecaptchaVerifier:tv,TwitterAuthProvider:rp,Auth:$d,AuthCredential:yc,Error:oe.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}(Le.A)},467:(Go,Pr,dt)=>{function A(Ne,oe,Zt,$e,Rn,Ir,zt){try{var he=Ne[Ir](zt),ve=he.value}catch(Be){return void Zt(Be)}he.done?oe(ve):Promise.resolve(ve).then($e,Rn)}function Le(Ne){return function(){var oe=this,Zt=arguments;return new Promise(function($e,Rn){var Ir=Ne.apply(oe,Zt);function zt(ve){A(Ir,$e,Rn,zt,he,"next",ve)}function he(ve){A(Ir,$e,Rn,zt,he,"throw",ve)}zt(void 0)})}}dt.d(Pr,{A:()=>Le})},635:(Go,Pr,dt)=>{function oe(J,ne){var ue={};for(var Y in J)Object.prototype.hasOwnProperty.call(J,Y)&&ne.indexOf(Y)<0&&(ue[Y]=J[Y]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(Y=Object.getOwnPropertySymbols(J);de<Y.length;de++)ne.indexOf(Y[de])<0&&Object.prototype.propertyIsEnumerable.call(J,Y[de])&&(ue[Y[de]]=J[Y[de]])}return ue}function Be(J,ne,ue,Y){return new(ue||(ue=Promise))(function(_e,ze){function St(Gt){try{Je(Y.next(Gt))}catch(nt){ze(nt)}}function qt(Gt){try{Je(Y.throw(Gt))}catch(nt){ze(nt)}}function Je(Gt){Gt.done?_e(Gt.value):function de(_e){return _e instanceof ue?_e:new ue(function(ze){ze(_e)})}(Gt.value).then(St,qt)}Je((Y=Y.apply(J,ne||[])).next())})}function mn(J){return this instanceof mn?(this.v=J,this):new mn(J)}function Vt(J,ne,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,Y=ue.apply(J,ne||[]),_e=[];return de=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),St("next"),St("throw"),St("return",function ze(Ct){return function(Bn){return Promise.resolve(Bn).then(Ct,nt)}}),de[Symbol.asyncIterator]=function(){return this},de;function St(Ct,Bn){Y[Ct]&&(de[Ct]=function(Pt){return new Promise(function(Nr,ii){_e.push([Ct,Pt,Nr,ii])>1||qt(Ct,Pt)})},Bn&&(de[Ct]=Bn(de[Ct])))}function qt(Ct,Bn){try{!function Je(Ct){Ct.value instanceof mn?Promise.resolve(Ct.value.v).then(Gt,nt):Fi(_e[0][2],Ct)}(Y[Ct](Bn))}catch(Pt){Fi(_e[0][3],Pt)}}function Gt(Ct){qt("next",Ct)}function nt(Ct){qt("throw",Ct)}function Fi(Ct,Bn){Ct(Bn),_e.shift(),_e.length&&qt(_e[0][0],_e[0][1])}}function ni(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ne=J[Symbol.asyncIterator];return ne?ne.call(J):(J=function Ht(J){var ne="function"==typeof Symbol&&Symbol.iterator,ue=ne&&J[ne],Y=0;if(ue)return ue.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Y>=J.length&&(J=void 0),{value:J&&J[Y++],done:!J}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ue={},Y("next"),Y("throw"),Y("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function Y(_e){ue[_e]=J[_e]&&function(ze){return new Promise(function(St,qt){!function de(_e,ze,St,qt){Promise.resolve(qt).then(function(Je){_e({value:Je,done:St})},ze)}(St,qt,(ze=J[_e](ze)).done,ze.value)})}}}dt.d(Pr,{AQ:()=>Vt,N3:()=>mn,Tt:()=>oe,sH:()=>Be,xN:()=>ni}),"function"==typeof SuppressedError&&SuppressedError}},Go=>{Go(Go.s=834)}]);