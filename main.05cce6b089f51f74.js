"use strict";(self.webpackChunkFitnessPlaner=self.webpackChunkFitnessPlaner||[]).push([[792],{401:(zo,ii,_t)=>{_t.d(ii,{Am:()=>$o,Bd:()=>oe,FA:()=>we,Fy:()=>jr,I9:()=>Qu,Im:()=>as,Ku:()=>ge,Ll:()=>Le,T9:()=>Br,Uj:()=>jt,XA:()=>dn,ZQ:()=>ot,bD:()=>bs,c1:()=>Yt,cY:()=>Qt,eX:()=>ce,g:()=>pe,gR:()=>Jt,hp:()=>ao,jZ:()=>Pe,lT:()=>lr,lV:()=>Gn,mS:()=>zt,nr:()=>Xa,p7:()=>Dt,sr:()=>cr,tD:()=>la,u:()=>fe,zW:()=>ie,zw:()=>Je});const le=function(F){const V=[];let H=0;for(let Z=0;Z<F.length;Z++){let K=F.charCodeAt(Z);K<128?V[H++]=K:K<2048?(V[H++]=K>>6|192,V[H++]=63&K|128):55296==(64512&K)&&Z+1<F.length&&56320==(64512&F.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&F.charCodeAt(++Z)),V[H++]=K>>18|240,V[H++]=K>>12&63|128,V[H++]=K>>6&63|128,V[H++]=63&K|128):(V[H++]=K>>12|224,V[H++]=K>>6&63|128,V[H++]=63&K|128)}return V},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,V){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<F.length;K+=3){const Ce=F[K],ke=K+1<F.length,Ln=ke?F[K+1]:0,$e=K+2<F.length,Un=$e?F[K+2]:0;let lo=(15&Ln)<<2|Un>>6,Xu=63&Un;$e||(Xu=64,ke||(lo=64)),Z.push(H[Ce>>2],H[(3&Ce)<<4|Ln>>4],H[lo],H[Xu])}return Z.join("")},encodeString(F,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(F):this.encodeByteArray(le(F),V)},decodeString(F,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(F):function(F){const V=[];let H=0,Z=0;for(;H<F.length;){const K=F[H++];if(K<128)V[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ce=F[H++];V[Z++]=String.fromCharCode((31&K)<<6|63&Ce)}else if(K>239&&K<365){const $e=((7&K)<<18|(63&F[H++])<<12|(63&F[H++])<<6|63&F[H++])-65536;V[Z++]=String.fromCharCode(55296+($e>>10)),V[Z++]=String.fromCharCode(56320+(1023&$e))}else{const Ce=F[H++],ke=F[H++];V[Z++]=String.fromCharCode((15&K)<<12|(63&Ce)<<6|63&ke)}}return V.join("")}(this.decodeStringToByteArray(F,V))},decodeStringToByteArray(F,V){this.init_();const H=V?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<F.length;){const Ce=H[F.charAt(K++)],Ln=K<F.length?H[F.charAt(K)]:0;++K;const Un=K<F.length?H[F.charAt(K)]:64;++K;const Rt=K<F.length?H[F.charAt(K)]:64;if(++K,null==Ce||null==Ln||null==Un||null==Rt)throw new qn;Z.push(Ce<<2|Ln>>4),64!==Un&&(Z.push(Ln<<4&240|Un>>2),64!==Rt&&Z.push(Un<<6&192|Rt))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}};class qn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jt=function(F){return function(F){const V=le(F);return Ze.encodeByteArray(V,!0)}(F).replace(/\./g,"")},fe=function(F){try{return Ze.decodeString(F,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Je(F,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return V}for(const H in V)!V.hasOwnProperty(H)||!Nt(H)||(F[H]=Je(F[H],V[H]));return F}function Nt(F){return"__proto__"!==F}function zt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pt=()=>{try{return zt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const F=process.env.__FIREBASE_DEFAULTS__;return F?JSON.parse(F):void 0})()||(()=>{if(typeof document>"u")return;let F;try{F=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=F&&fe(F[1]);return V&&JSON.parse(V)})()}catch(F){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${F}`)}},Br=()=>{var F;return null===(F=pt())||void 0===F?void 0:F.config},dn=F=>{var V;return null===(V=pt())||void 0===V?void 0:V[`_${F}`]};class Qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,H)=>{this.resolve=V,this.reject=H})}wrapCallback(V){return(H,Z)=>{H?this.reject(H):this.resolve(Z),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(H):V(H,Z))}}}function jr(F,V){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=V||"demo-project",K=F.iat||0,Ce=F.sub||F.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},F);return[jt(JSON.stringify({alg:"none",type:"JWT"})),jt(JSON.stringify(ke)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Le(){var F;const V=null===(F=pt())||void 0===F?void 0:F.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function oe(){return typeof window<"u"||Dt()}function Dt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Yt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function cr(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function Gn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lr(){const F=ot();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function Xa(){return!Le()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((F,V)=>{try{let H=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(Z),F(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Ce;V((null===(Ce=K.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(H){V(H)}})}class pe extends Error{constructor(V,H,Z){super(H),this.code=V,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}}class we{constructor(V,H,Z){this.service=V,this.serviceName=H,this.errors=Z}create(V,...H){const Z=H[0]||{},K=`${this.service}/${V}`,Ce=this.errors[V],ke=Ce?function nt(F,V){return F.replace(Ut,(H,Z)=>{const K=V[Z];return null!=K?String(K):`<${Z}?>`})}(Ce,Z):"Error";return new pe(K,`${this.serviceName}: ${ke} (${K}).`,Z)}}const Ut=/\{\$([^}]+)}/g;function Jt(F,V){return Object.prototype.hasOwnProperty.call(F,V)}function as(F){for(const V in F)if(Object.prototype.hasOwnProperty.call(F,V))return!1;return!0}function bs(F,V){if(F===V)return!0;const H=Object.keys(F),Z=Object.keys(V);for(const K of H){if(!Z.includes(K))return!1;const Ce=F[K],ke=V[K];if(oo(Ce)&&oo(ke)){if(!bs(Ce,ke))return!1}else if(Ce!==ke)return!1}for(const K of Z)if(!H.includes(K))return!1;return!0}function oo(F){return null!==F&&"object"==typeof F}function $o(F){const V=[];for(const[H,Z]of Object.entries(F))Array.isArray(Z)?Z.forEach(K=>{V.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):V.push(encodeURIComponent(H)+"="+encodeURIComponent(Z));return V.length?"&"+V.join("&"):""}function Qu(F){const V={};return F.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Ce]=Z.split("=");V[decodeURIComponent(K)]=decodeURIComponent(Ce)}}),V}function ao(F){const V=F.indexOf("?");if(!V)return"";const H=F.indexOf("#",V);return F.substring(V,H>0?H:void 0)}function la(F,V){const H=new ji(F,V);return H.subscribe.bind(H)}class ji{constructor(V,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{V(this)}).catch(Z=>{this.error(Z)})}next(V){this.forEachObserver(H=>{H.next(V)})}error(V){this.forEachObserver(H=>{H.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,H,Z){let K;if(void 0===V&&void 0===H&&void 0===Z)throw new Error("Missing Observer.");K=function da(F,V){if("object"!=typeof F||null===F)return!1;for(const H of V)if(H in F&&"function"==typeof F[H])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:H,complete:Z},void 0===K.next&&(K.next=As),void 0===K.error&&(K.error=As),void 0===K.complete&&(K.complete=As);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ce}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,V)}sendOne(V,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{H(this.observers[V])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function As(){}function ge(F){return F&&F._delegate?F._delegate:F}},775:(zo,ii,_t)=>{function z(n,e){return Object.is(n,e)}let He=null,ze=!1,le=1;const gn=Symbol("SIGNAL");function Ze(n){const e=He;return He=n,e}const fe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function be(n){if(ze)throw new Error("");if(null===He)return;He.consumerOnSignalRead(n);const e=He.nextProducerIndex++;jr(He),e<He.producerNode.length&&He.producerNode[e]!==n&&Qt(He)&&dn(He.producerNode[e],He.producerIndexOfThis[e]),He.producerNode[e]!==n&&(He.producerNode[e]=n,He.producerIndexOfThis[e]=Qt(He)?Br(n,He,e):0),He.producerLastReadVersion[e]=n.version}function Nt(n){if((!Qt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==le)){if(!n.producerMustRecompute(n)&&!ur(n))return n.dirty=!1,void(n.lastCleanEpoch=le);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=le}}function zt(n){if(void 0===n.liveConsumerNode)return;const e=ze;ze=!0;try{for(const t of n.liveConsumerNode)t.dirty||rn(t)}finally{ze=e}}function Mr(){return!1!==He?.consumerAllowSignalWrites}function rn(n){n.dirty=!0,zt(n),n.consumerMarkedDirty?.(n)}function yt(n){return n&&(n.nextProducerIndex=0),Ze(n)}function pt(n,e){if(Ze(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Qt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)dn(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ur(n){jr(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Nt(t),r!==t.version))return!0}return!1}function Ur(n){if(jr(n),Qt(n))for(let e=0;e<n.producerNode.length;e++)dn(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Br(n,e,t){if(ot(n),0===n.liveConsumerNode.length&&Pe(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Br(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function dn(n,e){if(ot(n),1===n.liveConsumerNode.length&&Pe(n))for(let r=0;r<n.producerNode.length;r++)dn(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jr(i),i.producerIndexOfThis[r]=e}}function Qt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jr(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ot(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Pe(n){return void 0!==n.producerNode}const oe=Symbol("UNSET"),Dt=Symbol("COMPUTING"),Yt=Symbol("ERRORED"),cr={...fe,value:oe,dirty:!0,error:null,equal:z,producerMustRecompute:n=>n.value===oe||n.value===Dt,producerRecomputeValue(n){if(n.value===Dt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=Dt;const t=yt(n);let r;try{r=n.computation()}catch(i){r=Yt,n.error=i}finally{pt(n,t)}e!==oe&&e!==Yt&&r!==Yt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let os=function Gn(){throw new Error};function lr(){os()}let di=null;function de(n,e){Mr()||lr(),n.equal(n.value,e)||(n.value=e,function nt(n){n.version++,function Je(){le++}(),zt(n),di?.()}(n))}const we={...fe,equal:z,value:void 0};function vt(n){return"function"==typeof n}function Us(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const qt=Us(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function sn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Jt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(vt(r))try{r()}catch(s){e=s instanceof qt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Za(s)}catch(o){e=e??[],o instanceof qt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new qt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Za(e);else{if(e instanceof Jt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&sn(t,e)}remove(e){const{_finalizers:t}=this;t&&sn(t,e),e instanceof Jt&&e._removeParent(this)}}Jt.EMPTY=(()=>{const n=new Jt;return n.closed=!0,n})();const Ci=Jt.EMPTY;function as(n){return n instanceof Jt||n&&"closed"in n&&vt(n.remove)&&vt(n.add)&&vt(n.unsubscribe)}function Za(n){vt(n)?n():n.unsubscribe()}const bs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oo={setTimeout(n,e,...t){const{delegate:r}=oo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zd(n){oo.setTimeout(()=>{const{onUnhandledError:e}=bs;if(!e)throw n;e(n)})}function $o(){}const Qu=la("C",void 0,void 0);function la(n,e,t){return{kind:n,value:e,error:t}}let ji=null;function El(n){if(bs.useDeprecatedSynchronousErrorHandling){const e=!ji;if(e&&(ji={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ji;if(ji=null,t)throw r}}else n()}class As extends Jt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,as(e)&&e.add(this)):this.destination=wl}static create(e,t,r){return new hi(e,t,r)}next(e){this.isStopped?Tl(function eh(n){return la("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Tl(function ao(n){return la("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Tl(Qu,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yu=Function.prototype.bind;function Bs(n,e){return Yu.call(n,e)}class Ju{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){uo(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){uo(r)}else uo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){uo(t)}}}class hi extends As{constructor(e,t,r){let i;if(super(),vt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&bs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bs(e.next,s),error:e.error&&Bs(e.error,s),complete:e.complete&&Bs(e.complete,s)}):i=e}this.destination=new Ju(i)}}function uo(n){bs.useDeprecatedSynchronousErrorHandling?function da(n){bs.useDeprecatedSynchronousErrorHandling&&ji&&(ji.errorThrown=!0,ji.error=n)}(n):Zd(n)}function Tl(n,e){const{onStoppedNotification:t}=bs;t&&oo.setTimeout(()=>t(n,e))}const wl={closed:!0,next:$o,error:function th(n){throw n},complete:$o},co="function"==typeof Symbol&&Symbol.observable||"@@observable";function zi(n){return n}function eu(n){return 0===n.length?zi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Bt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ge(n){return n&&n instanceof As||function Be(n){return n&&vt(n.next)&&vt(n.error)&&vt(n.complete)}(n)&&as(n)}(t)?t:new hi(t,r,i);return El(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=bl(r))((i,s)=>{const o=new hi({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[co](){return this}pipe(...t){return eu(t)(this)}toPromise(t){return new(t=bl(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function bl(n){var e;return null!==(e=n??bs.Promise)&&void 0!==e?e:Promise}const F=Us(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let V=(()=>{class n extends Bt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new H(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new F}next(t){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Ci:(this.currentObservers=null,s.push(t),new Jt(()=>{this.currentObservers=null,sn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Bt;return t.source=this,t}}return n.create=(e,t)=>new H(e,t),n})();class H extends V{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Ci}}class Z extends V{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function K(n){return vt(n?.lift)}function Ce(n){return e=>{if(K(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new Ln(n,e,t,r,i)}class Ln extends As{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(n,e){return Ce((t,r)=>{let i=0;t.subscribe(ke(r,s=>{r.next(n.call(e,s,i++))}))})}const Un=Us(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bn(n,e){return Ce((t,r)=>{let i=0;t.subscribe(ke(r,s=>n.call(e,s,i++)&&r.next(s)))})}const Rt=new Bt(n=>n.complete());function ha(n){return n<=0?()=>Rt:Ce((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rh(n){return Ce((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Al(n=tw){return Ce((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tw(){return new Un}function qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,s)=>n(i,s,r)):zi,ha(1),t?rh(e):Al(()=>new Un))}const nw="https://g.co/ng/security#xss";class ye extends Error{constructor(e,t){super(function tu(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function fa(n){return{toString:n}.toString()}const Dl="__parameters__";function Sl(n,e,t){return fa(()=>{const r=function Zu(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(Dl)?u[Dl]:Object.defineProperty(u,Dl,{value:[]})[Dl];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Hn=globalThis;function wn(n){for(let e in n)if(n[e]===wn)return e;throw Error("Could not find renamed property on target object.")}function cR(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(zr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Dp(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const my=wn({__forward_ref__:wn});function bn(n){return n.__forward_ref__=bn,n.toString=function(){return zr(this())},n}function lt(n){return Sp(n)?n():n}function Sp(n){return"function"==typeof n&&n.hasOwnProperty(my)&&n.__forward_ref__===bn}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function js(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rp(n){return lw(n,Rl)||lw(n,xp)}function lw(n,e){return n.hasOwnProperty(e)?n[e]:null}function Pp(n){return n&&(n.hasOwnProperty(Iy)||n.hasOwnProperty(pR))?n[Iy]:null}const Rl=wn({\u0275prov:wn}),Iy=wn({\u0275inj:wn}),xp=wn({ngInjectableDef:wn}),pR=wn({ngInjectorDef:wn});class Ae{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function oh(n){return n&&!!n.\u0275providers}const ah=wn({\u0275cmp:wn}),wy=wn({\u0275dir:wn}),uh=wn({\u0275pipe:wn}),nu=wn({\u0275mod:wn}),ga=wn({\u0275fac:wn}),ch=wn({__NG_ELEMENT_ID__:wn}),Pl=wn({__NG_ENV_ID__:wn});function bt(n){return"string"==typeof n?n:null==n?"":String(n)}function Np(n,e){throw new ye(-201,!1)}var Lt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Lt||{});let iu;function pw(){return iu}function fi(n){const e=iu;return iu=n,e}function by(n,e,t){const r=Rp(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Lt.Optional?null:void 0!==e?e:void Np()}const Di={},kp="__NG_DI_FLAG__",Op="ngTempTokenPath",Vp=/\n/gm,Cy="__source";let Nl;function Ho(n){const e=Nl;return Nl=n,e}function Sy(n,e=Lt.Default){if(void 0===Nl)throw new ye(-203,!1);return null===Nl?by(n,void 0,e):Nl.get(n,e&Lt.Optional?null:void 0,e)}function Se(n,e=Lt.Default){return(pw()||Sy)(lt(n),e)}function Y(n,e=Lt.Default){return Se(n,kl(e))}function kl(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Lp(n){const e=[];for(let t=0;t<n.length;t++){const r=lt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ye(900,!1);let i,s=Lt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Up(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Se(i,s))}else e.push(Se(r))}return e}function tc(n,e){return n[kp]=e,n.prototype[kp]=e,n}function Up(n){return n[kp]}const Ol=tc(Sl("Optional"),8),Bp=tc(Sl("SkipSelf"),4);function nc(n,e){return n.hasOwnProperty(ga)?n[ga]:null}function su(n,e){n.forEach(t=>Array.isArray(t)?su(t,e):e(t))}function jp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qi(n,e,t){let r=ou(n,e);return r>=0?n[1|r]=t:(r=~r,function zp(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ky(n,e){const t=ou(n,e);if(t>=0)return n[1|t]}function ou(n,e){return function $p(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Wo={},Gt=[],fo=new Ae(""),qp=new Ae("",-1),Oy=new Ae("");class Gp{get(e,t=Di){if(t===Di){const r=new Error(`NullInjectorError: No provider for ${zr(e)}!`);throw r.name="NullInjectorError",r}return t}}var Fl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fl||{}),po=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(po||{}),au=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(au||{});function Vy(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Fy(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];yw(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Hp(n){return 3===n||4===n||6===n}function yw(n){return 64===n.charCodeAt(0)}function ic(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||vw(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function vw(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Wp="ng-template";function yR(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==Vy(e[i+1].toLowerCase(),t,0))return!0}else if(dh(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function dh(n){return 4===n.type&&n.value!==Wp}function vR(n,e,t){return e===(4!==n.type||t?n.value:Wp)}function Ly(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Ew(n){for(let e=0;e<n.length;e++)if(Hp(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!vR(n,u,t)||""===u&&1===e.length){if(go(r))return!1;o=!0}}else if(8&r){if(null===i||!yR(n,i,u,t)){if(go(r))return!1;o=!0}}else{const l=e[++a],h=Uy(u,i,dh(n),t);if(-1===h){if(go(r))return!1;o=!0;continue}if(""!==l){let g;if(g=h>s?"":i[h+1].toLowerCase(),2&r&&l!==g){if(go(r))return!1;o=!0}}}}else{if(!o&&!go(r)&&!go(u))return!1;if(o&&go(u))continue;o=!1,r=u|1&r}}return go(r)||o}function go(n){return!(1&n)}function Uy(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function By(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Iw(n,e,t=!1){for(let r=0;r<e.length;r++)if(Ly(n,e[r],t))return!0;return!1}function sc(n,e){return n?":not("+e.trim()+")":e}function Tw(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!go(o)&&(e+=sc(s,i),i=""),r=o,s=s||!go(r);t++}return""!==i&&(e+=sc(s,i)),e}function er(n){return fa(()=>{const e=DR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||po.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""};SR(t);const r=n.dependencies;return t.directiveDefs=jy(r,!1),t.pipeDefs=jy(r,!0),t.id=function ac(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function bR(n){return kt(n)||$r(n)}function AR(n){return null!==n}function uu(n){return fa(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function CR(n,e){if(null==n)return Wo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=au.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==au.None?[r,a]:r,e[s]=o):t[s]=r}return t}function It(n){return fa(()=>{const e=DR(n);return SR(e),e})}function pi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function kt(n){return n[ah]||null}function $r(n){return n[wy]||null}function Si(n){return n[uh]||null}function Gi(n,e){const t=n[nu]||null;if(!t&&!0===e)throw new Error(`Type ${zr(n)} does not have '\u0275mod' property.`);return t}function DR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Wo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:CR(n.inputs,e),outputs:CR(n.outputs),debugInfo:null}}function SR(n){n.features?.forEach(e=>e(n))}function jy(n,e){if(!n)return null;const t=e?Si:bR;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(AR)}function ma(n){return{\u0275providers:n}}function ww(...n){return{\u0275providers:$y(0,n),\u0275fromNgModule:!0}}function $y(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return su(e,o=>{const a=o;qy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&bw(i,s),t}function bw(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Gy(i,s=>{e(s,r)})}}function qy(n,e,t,r){if(!(n=lt(n)))return!1;let i=null,s=Pp(n);const o=!s&&kt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Pp(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)qy(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{su(s.imports,h=>{qy(h,e,t,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&bw(l,e)}if(!a){const l=nc(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:Oy,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>Se(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;Gy(u,h=>{e(h,l)})}}}return i!==n&&void 0!==n.providers}function Gy(n,e){for(let t of n)oh(t)&&(t=t.\u0275providers),Array.isArray(t)?Gy(t,e):e(t)}const Hy=wn({provide:String,useValue:wn});function hh(n){return null!==n&&"object"==typeof n&&Hy in n}function cu(n){return"function"==typeof n}const Wy=new Ae(""),Ky={},Kp={};let Cw;function mo(){return void 0===Cw&&(Cw=new Gp),Cw}class Hi{}class Ll extends Hi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yy(e,o=>this.processProvider(o)),this.records.set(qp,lu(void 0,this)),i.has("environment")&&this.records.set(Hi,lu(void 0,this));const s=this.records.get(Wy);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Oy,Gt,Lt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ze(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ho(this),r=fi(void 0);try{return e()}finally{Ho(t),fi(r)}}get(e,t=Di,r=Lt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Pl))return e[Pl](this);r=kl(r);const s=Ho(this),o=fi(void 0);try{if(!(r&Lt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function MR(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ae}(e)&&Rp(e);u=l&&this.injectableDefInScope(l)?lu(uc(e),Ky):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Lt.Self?mo():this.parent).get(e,t=r&Lt.Optional&&t===Di?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Op]=a[Op]||[]).unshift(zr(e)),s)throw a;return function Ry(n,e,t,r){const i=n[Op];throw e[Cy]&&i.unshift(e[Cy]),n.message=function _w(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=zr(e);if(Array.isArray(e))i=e.map(zr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):zr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Vp,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Op]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{fi(o),Ho(s)}}resolveInjectorInitializers(){const e=Ze(null),t=Ho(this),r=fi(void 0);try{const s=this.get(fo,Gt,Lt.Self);for(const o of s)o()}finally{Ho(t),fi(r),Ze(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(zr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(e){let t=cu(e=lt(e))?e:lt(e&&e.provide);const r=function Nr(n){return hh(n)?lu(void 0,n.useValue):lu(Dw(n),Ky)}(e);if(!cu(e)&&!0===e.multi){let i=this.records.get(t);i||(i=lu(void 0,Ky,!0),i.factory=()=>Lp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Ze(null);try{return t.value===Ky&&(t.value=Kp,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Qy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ze(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=lt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function uc(n){const e=Rp(n),t=null!==e?e.factory:nc(n);if(null!==t)return t;if(n instanceof Ae)throw new ye(204,!1);if(n instanceof Function)return function PR(n){if(n.length>0)throw new ye(204,!1);const t=function vy(n){return n&&(n[Rl]||n[xp])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ye(204,!1)}function Dw(n,e,t){let r;if(cu(n)){const i=lt(n);return nc(i)||uc(i)}if(hh(n))r=()=>lt(n.useValue);else if(function fh(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Lp(n.deps||[]));else if(function Aw(n){return!(!n||!n.useExisting)}(n))r=()=>Se(lt(n.useExisting));else{const i=lt(n&&(n.useClass||n.provide));if(!function xR(n){return!!n.deps}(n))return nc(i)||uc(i);r=()=>new i(...Lp(n.deps))}return r}function lu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Yy(n,e){for(const t of n)Array.isArray(t)?Yy(t,e):t&&oh(t)?Yy(t.\u0275providers,e):e(t)}function _o(n,e){n instanceof Ll&&n.assertNotDestroyed();const r=Ho(n),i=fi(void 0);try{return e()}finally{Ho(r),fi(i)}}function Sw(){return void 0!==pw()||null!=function Dy(){return Nl}()}const tr=0,Re=1,st=2,kr=3,us=4,gi=5,Wi=6,Bl=7,xn=8,Or=9,Ko=10,gt=11,gh=12,Xy=13,jl=14,nr=15,dc=16,hu=17,_a=18,fu=19,xw=20,Qo=21,Xp=22,cs=23,Ye=25,mh=1,_h=6,zs=7,$s=9,dr=10;var Zp=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Zp||{});function Gr(n){return Array.isArray(n)&&"object"==typeof n[mh]}function Ri(n){return Array.isArray(n)&&!0===n[mh]}function yh(n){return!!(4&n.flags)}function gu(n){return n.componentOffset>-1}function eg(n){return!(1&~n.flags)}function yo(n){return!!n.template}function hc(n){return!!(512&n[st])}class rv{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Uw(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Pi(){return vh}function vh(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bw),iv}function iv(){const n=jw(this),e=n?.current;if(e){const t=n.previous;if(t===Wo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Bw(n,e,t,r,i){const s=this.declaredInputs[r],o=jw(n)||function zw(n,e){return n[ig]=e}(n,{previous:Wo,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new rv(l&&l.currentValue,t,u===Wo),Uw(n,e,i,t)}Pi.ngInherit=!0;const ig="__ngSimpleChanges__";function jw(n){return n[ig]||null}const Yo=function(n,e,t){};function an(n){for(;Array.isArray(n);)n=n[tr];return n}function Ih(n,e){return an(e[n])}function mi(n,e){return an(e[n.index])}function Eh(n,e){return n.data[e]}function mu(n,e){return n[e]}function Ds(n,e){const t=e[n];return Gr(t)?t:t[tr]}function av(n){return!(128&~n[st])}function qs(n,e){return null==e?null:n[e]}function qw(n){n[hu]=0}function Gw(n){1024&n[st]||(n[st]|=1024,av(n)&&zl(n))}function ug(n){return!!(9216&n[st]||n[cs]?.dirty)}function uv(n){n[Ko].changeDetectionScheduler?.notify(8),64&n[st]&&(n[st]|=1024),ug(n)&&zl(n)}function zl(n){n[Ko].changeDetectionScheduler?.notify(0);let e=ya(n);for(;null!==e&&!(8192&e[st])&&(e[st]|=8192,av(e));)e=ya(e)}function cg(n,e){if(!(256&~n[st]))throw new ye(911,!1);null===n[Qo]&&(n[Qo]=[]),n[Qo].push(e)}function ya(n){const e=n[kr];return Ri(e)?e[kr]:e}const mt={lFrame:tb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ww=!1;function hg(){return mt.bindingsEnabled}function va(){return null!==mt.skipHydrationRootTNode}function he(){return mt.lFrame.lView}function Pt(){return mt.lFrame.tView}function Et(n){return mt.lFrame.contextLView=n,n[xn]}function ht(n){return mt.lFrame.contextLView=null,n}function An(){let n=Th();for(;null!==n&&64===n.type;)n=n.parent;return n}function Th(){return mt.lFrame.currentTNode}function Gs(n,e){const t=mt.lFrame;t.currentTNode=n,t.isParent=e}function dv(){return mt.lFrame.isParent}function Jw(){return Ww}function GR(n){Ww=n}function Ki(){const n=mt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qi(){return mt.lFrame.bindingIndex}function vo(){return mt.lFrame.bindingIndex++}function Io(n){const e=mt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WR(n,e){const t=mt.lFrame;t.bindingIndex=t.bindingRootIndex=n,wh(e)}function wh(n){mt.lFrame.currentDirectiveIndex=n}function ql(n){mt.lFrame.currentQueryIndex=n}function QR(n){const e=n[Re];return 2===e.type?e.declTNode:1===e.type?n[gi]:null}function Zw(n,e,t){if(t&Lt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Lt.Host||(i=QR(s),null===i||(s=s[jl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=mt.lFrame=eb();return r.currentTNode=e,r.lView=n,!0}function mv(n){const e=eb(),t=n[Re];mt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function eb(){const n=mt.lFrame,e=null===n?null:n.child;return null===e?tb(n):e}function tb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _v(){const n=mt.lFrame;return mt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const pg=_v;function yv(){const n=_v();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hr(){return mt.lFrame.selectedIndex}function Ia(n){mt.lFrame.selectedIndex=n}function jn(){const n=mt.lFrame;return Eh(n.tView,n.selectedIndex)}function nb(){return mt.lFrame.currentNamespace}let vv=!0;function bh(){return vv}function Jo(n){vv=n}function mg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function _u(n,e,t){rb(n,e,3,t)}function _g(n,e,t,r){(3&n[st])===t&&rb(n,e,t,r)}function yg(n,e){let t=n[st];(3&t)===e&&(t&=16383,t+=1,n[st]=t)}function rb(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[hu]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[hu]+=65536),(a<s||-1==s)&&(tP(n,t,e,u),n[hu]=(4294901760&n[hu])+u+2),u++}function ib(n,e){Yo(4,n,e);const t=Ze(null);try{e.call(n)}finally{Ze(t),Yo(5,n,e)}}function tP(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[st]>>14<n[hu]>>16&&(3&n[st])===e&&(n[st]+=16384,ib(a,s)):ib(a,s)}const Gl=-1;class Hl{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const Ig={};class fc{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kl(r);const i=this.injector.get(e,Ig,r);return i!==Ig||t===Ig?i:this.parentInjector.get(e,t,r)}}function Ch(n){return n!==Gl}function pc(n){return 32767&n}function Wl(n,e){let t=function iP(n){return n>>16}(n),r=e;for(;t>0;)r=r[jl],t--;return r}let Xo=!0;function Dh(n){const e=Xo;return Xo=n,e}const sb=255,ob=5;let ab=0;const hr={};function Kl(n,e){const t=Zo(n,e);if(-1!==t)return t;const r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,bv(r.data,n),bv(e,null),bv(r.blueprint,null));const i=yu(n,e),s=n.injectorIndex;if(Ch(i)){const o=pc(i),a=Wl(i,e),u=a[Re].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function bv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Zo(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function yu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=qe(i),null===r)return Gl;if(t++,i=i[jl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Gl}function Eg(n,e,t){!function wv(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ch)&&(r=t[ch]),null==r&&(r=t[ch]=ab++);const i=r&sb;e.data[n+(i>>ob)]|=1<<i}(n,e,t)}function cb(n,e,t){if(t&Lt.Optional||void 0!==n)return n;Np()}function Tg(n,e,t,r){if(t&Lt.Optional&&void 0===r&&(r=null),!(t&(Lt.Self|Lt.Host))){const i=n[Or],s=fi(void 0);try{return i?i.get(e,r,t&Lt.Optional):by(e,r,t&Lt.Optional)}finally{fi(s)}}return cb(r,0,t)}function lb(n,e,t,r=Lt.Default,i){if(null!==n){if(2048&e[st]&&!(r&Lt.Self)){const o=function Ge(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[st]&&!(512&o[st]);){const a=db(s,o,t,r|Lt.Self,hr);if(a!==hr)return a;let u=s.parent;if(!u){const l=o[xw];if(l){const h=l.get(t,hr,r);if(h!==hr)return h}u=qe(o),o=o[jl]}s=u}return i}(n,e,t,r,hr);if(o!==hr)return o}const s=db(n,e,t,r,hr);if(s!==hr)return s}return Tg(e,t,r,i)}function db(n,e,t,r,i){const s=function d(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ch)?n[ch]:void 0;return"number"==typeof e?e>=0?e&sb:Q:e}(t);if("function"==typeof s){if(!Zw(e,n,r))return r&Lt.Host?cb(i,0,r):Tg(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Lt.Optional)return o;Np()}finally{pg()}}else if("number"==typeof s){let o=null,a=Zo(n,e),u=Gl,l=r&Lt.Host?e[nr][gi]:null;for((-1===a||r&Lt.SkipSelf)&&(u=-1===a?yu(n,e):e[a+8],u!==Gl&&y(r,!1)?(o=e[Re],a=pc(u),e=Wl(u,e)):a=-1);-1!==a;){const h=e[Re];if(f(s,a,h.data)){const g=oP(a,e,t,o,r,l);if(g!==hr)return g}u=e[a+8],u!==Gl&&y(r,e[Re].data[a+8]===l)&&f(s,a,e)?(o=h,a=pc(u),e=Wl(u,e)):a=-1}}return i}function oP(n,e,t,r,i,s){const o=e[Re],a=o.data[n+8],h=function wg(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,h=s>>20,v=i?a+h:n.directiveEnd;for(let E=r?a:a+h;E<v;E++){const w=o[E];if(E<u&&t===w||E>=u&&w.type===t)return E}if(i){const E=o[u];if(E&&yo(E)&&E.type===t)return u}return null}(a,o,t,null==r?gu(a)&&Xo:r!=o&&!!(3&a.type),i&Lt.Host&&s===a);return null!==h?m(e,o,h,a):hr}function m(n,e,t,r){let i=n[t];const s=e.data;if(function Iv(n){return n instanceof Hl}(i)){const o=i;o.resolving&&function Ml(n,e){throw e&&e.join(" > "),new ye(-200,n)}(function on(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():bt(n)}(s[t]));const a=Dh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?fi(o.injectImpl):null;Zw(n,r,Lt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function eP(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=vh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&fi(l),Dh(a),o.resolving=!1,pg()}}return i}function f(n,e,t){return!!(t[e+(n>>ob)]&1<<n)}function y(n,e){return!(n&Lt.Self||n&Lt.Host&&e)}class ${constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return lb(this._tNode,this._lView,e,kl(r),t)}}function Q(){return new $(An(),he())}function se(n){return fa(()=>{const e=n.prototype.constructor,t=e[ga]||Me(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ga]||Me(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Me(n){return Sp(n)?()=>{const e=Me(lt(n));return e&&e()}:nc(n)}function qe(n){const e=n[Re],t=e.type;return 2===t?e.declTNode:1===t?n[gi]:null}function FB(n,e=null,t=null,r){const i=LB(n,e,t,r);return i.resolveInjectorInitializers(),i}function LB(n,e=null,t=null,r,i=new Set){const s=[t||Gt,ww(n)];return r=r||("object"==typeof n?void 0:zr(n)),new Ll(s,e||mo(),r||null,i)}class xi{static{this.THROW_IF_NOT_FOUND=Di}static{this.NULL=new Gp}static create(e,t){if(Array.isArray(e))return FB({name:""},t,e,"");{const r=e.name??"";return FB({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Ne({token:xi,providedIn:"any",factory:()=>Se(qp)})}static{this.__NG_ELEMENT_ID__=-1}}new Ae("").__NG_ELEMENT_ID__=n=>{const e=An();if(null===e)throw new ye(204,!1);if(2&e.type)return e.value;if(n&Lt.Optional)return null;throw new ye(204,!1)};function uP(n){return n.ngOriginalError}const BB=!0;let xv=(()=>{class n{static{this.__NG_ELEMENT_ID__=jZ}static{this.__NG_ENV_ID__=t=>t}}return n})();class BZ extends xv{constructor(e){super(),this._lView=e}onDestroy(e){return cg(this._lView,e),()=>function cv(n,e){if(null===n[Qo])return;const t=n[Qo].indexOf(e);-1!==t&&n[Qo].splice(t,1)}(this._lView,e)}}function jZ(){return new BZ(he())}let Yl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Z(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();const Ht=class zZ extends V{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Sw()&&(this.destroyRef=Y(xv,{optional:!0})??void 0,this.pendingTasks=Y(Yl,{optional:!0})??void 0)}emit(e){const t=Ze(null);try{super.next(e)}finally{Ze(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Jt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function pb(...n){}function jB(n){let e,t;function r(){n=pb;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function zB(n){return queueMicrotask(()=>n()),()=>{n=pb}}const cP="isAngularZone",gb=cP+"_ID";let $Z=0;class Wt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ht(!1),this.onMicrotaskEmpty=new Ht(!1),this.onStable=new Ht(!1),this.onError=new Ht(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=BB}=e;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function HZ(n){const e=()=>{!function GZ(n){function e(){jB(()=>{n.callbackScheduled=!1,dP(n),n.isCheckStableRunning=!0,lP(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dP(n))}(n)},t=$Z++;n._inner=n._inner.fork({name:"angular",properties:{[cP]:!0,[gb]:t,[gb+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(function WZ(n){return GB(n,"__ignore_ng_zone__")}(u))return r.invokeTask(s,o,a,u);try{return $B(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),qB(n)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return $B(n),r.invoke(s,o,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function KZ(n){return GB(n,"__scheduler_tick__")}(u)&&e(),qB(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,dP(n),lP(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(cP)}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new ye(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,qZ,pb,pb);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const qZ={};function lP(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dP(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function $B(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qB(n){n._nesting--,lP(n)}class hP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ht,this.onMicrotaskEmpty=new Ht,this.onStable=new Ht,this.onError=new Ht}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function GB(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class vu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&uP(e);for(;t&&uP(t);)t=uP(t);return t||null}}const YZ=new Ae("",{providedIn:"root",factory:()=>{const n=Y(Wt),e=Y(vu);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function JZ(){return Ag(An(),he())}function Ag(n,e){return new To(mi(n,e))}let To=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=JZ}}return n})();const Mv="ngSkipHydration",ZZ="ngskiphydration";function pP(n){const e=n.mergedAttrs;if(null===e)return!1;for(let t=0;t<e.length;t+=2){const r=e[t];if("number"==typeof r)return!1;if("string"==typeof r&&r.toLowerCase()===ZZ)return!0}return!1}function KB(n){return n.hasAttribute(Mv)}function Nv(n){return!(128&~n.flags)}const gP=new Map;let eee=0;function mP(n){gP.delete(n[fu])}const mb="__ngContext__";function ls(n,e){Gr(e)?(n[mb]=e[fu],function nee(n){gP.set(n[fu],n)}(e)):n[mb]=e}function rj(n){return sj(n[gh])}function ij(n){return sj(n[us])}function sj(n){for(;null!==n&&!Ri(n);)n=n[us];return n}let yP;function Jl(){if(void 0!==yP)return yP;if(typeof document<"u")return document;throw new ye(210,!1)}const Ov=new Ae("",{providedIn:"root",factory:()=>vee}),vee="ng",fj=new Ae(""),wo=new Ae("",{providedIn:"platform",factory:()=>"unknown"}),pj=new Ae("",{providedIn:"root",factory:()=>Jl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Tee(){const n=new Dg;return"browser"===Y(wo)&&(n.store=function wee(n,e){const t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(Jl(),Y(Ov))),n}let Dg=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:Tee})}get(t,r){return void 0!==this.store[t]?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();const vP="h",IP="b";var Sg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Sg||{});const yb="e",EP="t",Vv="c",vb="x",Rg="r",TP="i",Ib="n",Fv="d",bP="__nghData__",Lv="ngh";let gj=()=>null;function Aee(n,e,t=!1){let r=n.getAttribute(Lv);if(null==r)return null;const[i,s]=r.split("|");if(r=t?s:i,!r)return null;const a=t?i:s?`|${s}`:"";let u={};if(""!==r){const h=e.get(Dg,null,{optional:!0});null!==h&&(u=h.get(bP,[])[Number(r)])}const l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Eb(l,0,n.nextSibling)),a?n.setAttribute(Lv,a):n.removeAttribute(Lv),l}function AP(n,e,t=!1){return gj(n,e,t)}function mj(n){let e=n._lView;return 2===e[Re].type?null:(hc(e)&&(e=e[Ye]),e)}function Eb(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function DP(n,e){return n.segmentHeads?.[e]??null}function vj(n,e){return n.data[Vv]?.[e]??null}function SP(n,e){const t=vj(n,e)??[];let r=0;for(let i of t)r+=i[Rg]*(i[vb]??1);return r}function Rh(n,e){if(typeof n.disconnectedNodes>"u"){const t=n.data[Fv];n.disconnectedNodes=t?new Set(t):null}return!!function Ij(n){if(typeof n.disconnectedNodes>"u"){const e=n.data[Fv];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}(n)?.has(e)}const Tb=new Ae(""),wj=new Ae("",{providedIn:"root",factory:()=>!1});let wb,bb;function Pg(n){return function PP(){if(void 0===wb&&(wb=null,Hn.trustedTypes))try{wb=Hn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wb}()?.createHTML(n)||n}function Sj(n){return function xP(){if(void 0===bb&&(bb=null,Hn.trustedTypes))try{bb=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bb}()?.createScriptURL(n)||n}class Ph{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nw})`}}class kee extends Ph{getTypeName(){return"HTML"}}class Oee extends Ph{getTypeName(){return"Style"}}class Vee extends Ph{getTypeName(){return"Script"}}class Fee extends Ph{getTypeName(){return"URL"}}class Lee extends Ph{getTypeName(){return"ResourceURL"}}function bo(n){return n instanceof Ph?n.changingThisBreaksApplicationSecurity:n}function Iu(n,e){const t=function Uee(n){return n instanceof Ph&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${nw})`)}return t===e}class Gee{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Pg(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Hee{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Pg(e),t}}const Kee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ab(n){return(n=String(n)).match(Kee)?n:"unsafe:"+n}function gc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function jv(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const Pj=gc("area,br,col,hr,img,wbr"),xj=gc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mj=gc("rp,rt"),MP=jv(Pj,jv(xj,gc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jv(Mj,gc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jv(Mj,xj)),NP=gc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nj=jv(NP,gc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),gc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qee=gc("script,style,template");class Yee{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=Zee(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Xee(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=kj(e).toLowerCase();if(!MP.hasOwnProperty(t))return this.sanitizedSomething=!0,!Qee.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!Nj.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;NP[a]&&(u=Ab(u)),this.buf.push(" ",o,'="',Vj(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=kj(e).toLowerCase();MP.hasOwnProperty(t)&&!Pj.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Vj(e))}}function Xee(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw Oj(e);return e}function Zee(n){const e=n.firstChild;if(e&&function Jee(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw Oj(e);return e}function kj(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function Oj(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ete=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tte=/([^\#-~ |!])/g;function Vj(n){return n.replace(/&/g,"&amp;").replace(ete,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(tte,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cb;function Fj(n,e){let t=null;try{Cb=Cb||function Rj(n){const e=new Hee(n);return function Wee(){try{return!!(new window.DOMParser).parseFromString(Pg(""),"text/html")}catch{return!1}}()?new Gee(e):e}(n);let r=e?String(e):"";t=Cb.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Cb.getInertBodyElement(r)}while(r!==s);return Pg((new Yee).sanitizeChildren(kP(t)||t))}finally{if(t){const r=kP(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function kP(n){return"content"in n&&function nte(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ea=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ea||{});function OP(n){const e=zv();return e?e.sanitize(ea.URL,n)||"":Iu(n,"URL")?bo(n):Ab(bt(n))}function Db(n){const e=zv();if(e)return Sj(e.sanitize(ea.RESOURCE_URL,n)||"");if(Iu(n,"ResourceURL"))return Sj(bo(n));throw new ye(904,!1)}function zv(){const n=he();return n&&n[Ko].sanitizer}const cte=/^>|^->|<!--|-->|--!>|<!-$/g,lte=/(<|>)/g,dte="\u200b$1\u200b";function Ao(n){return n instanceof Function?n():n}function Co(n){return"browser"===(n??Y(xi)).get(wo)}var Xl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xl||{});let LP;function UP(n,e){return LP(n,e)}function Mg(n,e,t,r,i){if(null!=r){let s,o=!1;Ri(r)?s=r:Gr(r)&&(o=!0,r=r[tr]);const a=an(r);0===n&&null!==t?null==i?Jj(e,t,a):xh(e,t,a,i||null,!0):1===n&&null!==t?xh(e,t,a,i||null,!0):2===n?qv(e,a,o):3===n&&e.destroyNode(a),null!=s&&function xte(n,e,t,r,i){const s=t[zs];s!==an(t)&&Mg(e,n,r,s,i);for(let a=dr;a<t.length;a++){const u=t[a];Nb(u[Re],u,n,e,r,s)}}(e,n,s,t,i)}}function BP(n,e){return n.createText(e)}function jP(n,e){return n.createComment(function Uj(n){return n.replace(cte,e=>e.replace(lte,dte))}(e))}function Pb(n,e,t){return n.createElement(e,t)}function Kj(n,e){e[Ko].changeDetectionScheduler?.notify(9),Nb(n,e,e[gt],2,null,null)}function Qj(n,e){const t=n[$s],r=e[kr];(Gr(r)||e[nr]!==r[kr][nr])&&(n[st]|=Zp.HasTransplantedViews),null===t?n[$s]=[e]:t.push(e)}function zP(n,e){const t=n[$s],r=t.indexOf(e);t.splice(r,1)}function $v(n,e){if(n.length<=dr)return;const t=dr+e,r=n[t];if(r){const i=r[dc];null!==i&&i!==n&&zP(i,r),e>0&&(n[t-1][us]=r[us]);const s=rc(n,dr+e);!function wte(n,e){Kj(n,e),e[tr]=null,e[gi]=null}(r[Re],r);const o=s[_a];null!==o&&o.detachView(s[Re]),r[kr]=null,r[us]=null,r[st]&=-129}return r}function xb(n,e){if(!(256&e[st])){const t=e[gt];t.destroyNode&&Nb(n,e,t,3,null,null),function Ate(n){let e=n[gh];if(!e)return $P(n[Re],n);for(;e;){let t=null;if(Gr(e))t=e[gh];else{const r=e[dr];r&&(t=r)}if(!t){for(;e&&!e[us]&&e!==n;)Gr(e)&&$P(e[Re],e),e=e[kr];null===e&&(e=n),Gr(e)&&$P(e[Re],e),t=e&&e[us]}e=t}}(e)}}function $P(n,e){if(256&e[st])return;const t=Ze(null);try{e[st]&=-129,e[st]|=256,e[cs]&&Ur(e[cs]),function Ste(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Hl)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Yo(4,a,u);try{u.call(a)}finally{Yo(5,a,u)}}else{Yo(4,i,s);try{s.call(i)}finally{Yo(5,i,s)}}}}}(n,e),function Dte(n,e){const t=n.cleanup,r=e[Bl];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Bl]=null);const i=e[Qo];if(null!==i){e[Qo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Re].type&&e[gt].destroy();const r=e[dc];if(null!==r&&Ri(e[kr])){r!==e[kr]&&zP(r,e);const i=e[_a];null!==i&&i.detachView(n)}mP(e)}finally{Ze(t)}}function qP(n,e,t){return function Yj(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[tr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===po.None||s===po.Emulated)return null}return mi(r,t)}}(n,e.parent,t)}function xh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Jj(n,e,t){n.appendChild(e,t)}function Xj(n,e,t,r,i){null!==r?xh(n,e,t,r,i):Jj(n,e,t)}function GP(n,e){return n.parentNode(e)}let HP,t4=function e4(n,e,t){return 40&n.type?mi(n,t):null};function Mb(n,e,t,r){const i=qP(n,r,e),s=e[gt],a=function Zj(n,e,t){return t4(n,e,t)}(r.parent||e[gi],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Xj(s,i,t[u],a,!1);else Xj(s,i,t,a,!1);void 0!==HP&&HP(s,r,e,t,i)}function Mh(n,e){if(null!==e){const t=e.type;if(3&t)return mi(e,n);if(4&t)return WP(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Mh(n,r);{const i=n[e.index];return Ri(i)?WP(-1,i):an(i)}}if(128&t)return Mh(n,e.next);if(32&t)return UP(e,n)()||an(n[e.index]);{const r=r4(n,e);return null!==r?Array.isArray(r)?r[0]:Mh(ya(n[nr]),r):Mh(n,e.next)}}return null}function r4(n,e){return null!==e?n[nr][gi].projection[e.projection]:null}function WP(n,e){const t=dr+n+1;if(t<e.length){const r=e[t],i=r[Re].firstChild;if(null!==i)return Mh(r,i)}return e[zs]}function qv(n,e,t){n.removeChild(null,e,t)}function i4(n){n.textContent=""}function KP(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],u=t.type;if(o&&0===e&&(a&&ls(an(a),r),t.flags|=2),32&~t.flags)if(8&u)KP(n,e,t.child,r,i,s,!1),Mg(e,n,i,a,s);else if(32&u){const l=UP(t,r);let h;for(;h=l();)Mg(e,n,i,h,s);Mg(e,n,i,a,s)}else 16&u?s4(n,e,r,t,i,s):Mg(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Nb(n,e,t,r,i,s){KP(t,r,n.firstChild,e,i,s,!1)}function s4(n,e,t,r,i,s){const o=t[nr],u=o[gi].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Mg(e,n,i,u[l],s);else{let l=u;const h=o[kr];Nv(r)&&(l.flags|=128),KP(n,e,l,h,i,s,!0)}}function o4(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function a4(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Fy(n,e,r),null!==i&&o4(n,e,i),null!==s&&function Nte(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const At={};function ne(n=1){u4(Pt(),he(),Hr()+n,!1)}function u4(n,e,t,r){if(!r)if(3&~e[st]){const s=n.preOrderHooks;null!==s&&_g(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&_u(e,s,t)}Ia(t)}function De(n,e=Lt.Default){const t=he();return null===t?Se(n,e):lb(An(),t,lt(n),e)}function l4(n,e,t,r,i,s){const o=Ze(null);try{let a=null;i&au.SignalBased&&(a=e[r][gn]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&au.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):Uw(e,a,r,s)}finally{Ze(o)}}function kb(n,e,t,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[tr]=i,g[st]=204|r,(null!==l||n&&2048&n[st])&&(g[st]|=2048),qw(g),g[kr]=g[jl]=n,g[xn]=t,g[Ko]=o||n&&n[Ko],g[gt]=a||n&&n[gt],g[Or]=u||n&&n[Or]||null,g[gi]=s,g[fu]=function tee(){return eee++}(),g[Wi]=h,g[xw]=l,g[nr]=2==e.type?n[nr]:g,g}function Nh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function QP(n,e,t,r,i){const s=Th(),o=dv(),u=n.data[e]=function jte(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return va()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function HR(){return mt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function $l(){const n=mt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Gs(s,!0),s}function Gv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function d4(n,e,t,r,i){const s=Hr(),o=2&r;try{Ia(-1),o&&e.length>Ye&&u4(n,e,Ye,!1),Yo(o?2:0,i),t(r,i)}finally{Ia(s),Yo(o?3:1,i)}}function YP(n,e,t){if(yh(e)){const r=Ze(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ze(r)}}}function JP(n,e,t){hg()&&(function Kte(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;gu(t)&&function tne(n,e,t){const r=mi(e,n),i=h4(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Ob(n,kb(n,i,null,o,r,e,null,n[Ko].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Kl(t,e),ls(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=m(e,n,a,t);ls(l,e),null!==o&&nne(0,a-i,l,u,0,o),yo(u)&&(Ds(t.index,e)[xn]=m(e,n,a,t))}}(n,e,t,mi(t,e)),!(64&~t.flags)&&_4(n,e,t))}function XP(n,e,t=mi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function h4(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ZP(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ZP(n,e,t,r,i,s,o,a,u,l,h){const g=Ye+r,v=g+i,E=function Ote(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:At);return t}(g,v),w="function"==typeof l?l():l;return E[Re]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}let f4=()=>null;function Lte(n){KB(n)?i4(n):function See(n){const e=Jl(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){const o=function Dee(n){return n.textContent?.replace(/\s/gm,"")}(s);return"ngetn"===o||"ngtns"===o?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=t.nextNode();)i.push(r);for(const s of i)"ngetn"===s.textContent?s.replaceWith(e.createTextNode("")):s.remove()}(n)}function p4(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,u=au.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(null!==i){if(!i.hasOwnProperty(s))continue;l=i[s]}0===n?g4(r,t,l,a,u):g4(r,t,l,a)}return r}function g4(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function Ks(n,e,t,r,i,s,o,a){const u=mi(e,t);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(ix(n,t,h,r,i),gu(e)&&function qte(n,e){const t=Ds(e,n);16&t[st]||(t[st]|=64)}(t,e.index)):3&e.type&&(r=function $te(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function ex(n,e,t,r){if(hg()){const i=null===r?null:{"":-1},s=function Yte(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Iw(e,o.selectors,!1))if(r||(r=[]),yo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),tx(n,e,a.length)}else r.unshift(o),tx(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&m4(n,e,t,o,i,a),i&&function Jte(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ye(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ic(t.mergedAttrs,t.attrs)}function m4(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Eg(Kl(t,e),n,r[l].type);!function Zte(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Gv(n,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];t.mergedAttrs=ic(t.mergedAttrs,h.hostAttrs),ene(n,t,e,u,h),Xte(u,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function zte(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],v=t?t.get(g):null,w=v?v.outputs:null;u=p4(0,g.inputs,h,u,v?v.inputs:null),l=p4(1,g.outputs,h,l,w);const R=null===u||null===o||dh(e)?null:rne(u,h,o);a.push(R)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function _4(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function KR(){return mt.lFrame.currentDirectiveIndex}();try{Ia(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];wh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Qte(u,l)}}finally{Ia(-1),wh(o)}}function Qte(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function tx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Xte(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;yo(e)&&(t[""]=n)}}function ene(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=nc(i.type)),o=new Hl(s,yo(i),De);n.blueprint[r]=o,t[r]=o,function Hte(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Wte(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Gv(n,t,i.hostVars,At),i)}function Eu(n,e,t,r,i,s){const o=mi(n,e);!function nx(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?bt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[gt],o,s,n.value,t,r,i)}function nne(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)l4(r,t,o[a++],o[a++],o[a++],o[a++])}function rne(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function y4(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function v4(n,e){const t=n.contentQueries;if(null!==t){const r=Ze(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];ql(t[i]),a.contentQueries(2,e[o],o)}}}finally{Ze(r)}}}function Ob(n,e){return n[gh]?n[Xy][us]=e:n[gh]=e,n[Xy]=e,e}function rx(n,e,t){ql(0);const r=Ze(null);try{e(n,t)}finally{Ze(r)}}function Vb(n,e){const t=n[Or],r=t?t.get(vu,null):null;r&&r.handleError(e)}function ix(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=t[s++];l4(n.data[o],e[o],r,a,u,i)}}function mc(n,e,t){const r=Ih(e,n);!function Wj(n,e,t){n.setValue(e,t)}(n[gt],r,t)}function ine(n,e){const t=Ds(e,n),r=t[Re];!function sne(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[tr];null!==i&&null===t[Wi]&&(t[Wi]=AP(i,t[Or])),sx(r,t,t[xn])}function sx(n,e,t){mv(e);try{const r=n.viewQuery;null!==r&&rx(1,r,t);const i=n.template;null!==i&&d4(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_a]?.finishViewCreation(n),n.staticContentQueries&&v4(n,e),n.staticViewQueries&&rx(2,n.viewQuery,t);const s=n.components;null!==s&&function one(n,e){for(let t=0;t<e.length;t++)ine(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[st]&=-5,yv()}}function Ng(n,e,t,r){const i=Ze(null);try{const s=e.tView,u=kb(n,s,t,4096&n[st]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[dc]=n[e.index];const h=n[_a];return null!==h&&(u[_a]=h.createEmbeddedView(s)),sx(s,u,t),u}finally{Ze(i)}}function w4(n,e){const t=dr+e;if(t<n.length)return n[t]}function kh(n,e){return!e||null===e.firstChild||Nv(n)}function kg(n,e,t,r=!0){const i=e[Re];if(function Cte(n,e,t,r){const i=dr+r,s=t.length;r>0&&(t[i-1][us]=e),r<s-dr?(e[us]=t[i],jp(t,dr+r,e)):(t.push(e),e[us]=null),e[kr]=t;const o=e[dc];null!==o&&t!==o&&Qj(o,e);const a=e[_a];null!==a&&a.insertView(n),uv(e),e[st]|=128}(i,e,n,t),r){const o=WP(t,n),a=e[gt],u=GP(a,n[zs]);null!==u&&function bte(n,e,t,r,i,s){r[tr]=i,r[gi]=e,Nb(n,r,t,1,i,s)}(i,n[gi],a,e,u,o)}const s=e[Wi];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function ox(n,e){const t=$v(n,e);return void 0!==t&&xb(t[Re],t),t}function Hv(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(an(s)),Ri(s)&&b4(s,r);const o=t.type;if(8&o)Hv(n,e,t.child,r);else if(32&o){const a=UP(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=r4(e,t);if(Array.isArray(a))r.push(...a);else{const u=ya(e[nr]);Hv(u[Re],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function b4(n,e){for(let t=dr;t<n.length;t++){const r=n[t],i=r[Re].firstChild;null!==i&&Hv(r[Re],r,i,e)}n[zs]!==n[tr]&&e.push(n[zs])}let A4=[];const lne={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zl(n.lView)},consumerOnSignalRead(){this.lView[cs]=this}},hne={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ya(n.lView);for(;e&&!C4(e[Re]);)e=ya(e);e&&Gw(e)},consumerOnSignalRead(){this.lView[cs]=this}};function C4(n){return 2!==n.type}const fne=100;function Fb(n,e=!0,t=0){const r=n[Ko],i=r.rendererFactory;i.begin?.();try{!function pne(n,e){const t=Jw();try{GR(!0),ax(n,e);let r=0;for(;ug(n);){if(r===fne)throw new ye(103,!1);r++,ax(n,1)}}finally{GR(t)}}(n,t)}catch(o){throw e&&Vb(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function gne(n,e,t,r){const i=e[st];if(!(256&~i))return;e[Ko].inlineEffectRunner?.flush(),mv(e);let a=!0,u=null,l=null;C4(n)?(l=function ane(n){return n[cs]??function une(n){const e=A4.pop()??Object.create(lne);return e.lView=n,e}(n)}(e),u=yt(l)):null===function qn(){return He}()?(a=!1,l=function dne(n){const e=n[cs]??Object.create(hne);return e.lView=n,e}(e),u=yt(l)):e[cs]&&(Ur(e[cs]),e[cs]=null);try{qw(e),function Xw(n){return mt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&d4(n,e,t,2,r);const h=!(3&~i);if(h){const E=n.preOrderCheckHooks;null!==E&&_u(e,E,null)}else{const E=n.preOrderHooks;null!==E&&_g(e,E,0,null),yg(e,0)}if(function mne(n){for(let e=rj(n);null!==e;e=ij(e)){if(!(e[st]&Zp.HasTransplantedViews))continue;const t=e[$s];for(let r=0;r<t.length;r++)Gw(t[r])}}(e),S4(e,0),null!==n.contentQueries&&v4(n,e),h){const E=n.contentCheckHooks;null!==E&&_u(e,E)}else{const E=n.contentHooks;null!==E&&_g(e,E,1),yg(e,1)}!function kte(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ia(~i);else{const s=i,o=t[++r],a=t[++r];WR(o,s),a(2,e[s])}}}finally{Ia(-1)}}(n,e);const g=n.components;null!==g&&P4(e,g,0);const v=n.viewQuery;if(null!==v&&rx(2,v,r),h){const E=n.viewCheckHooks;null!==E&&_u(e,E)}else{const E=n.viewHooks;null!==E&&_g(e,E,2),yg(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Xp]){for(const E of e[Xp])E();e[Xp]=null}e[st]&=-73}catch(h){throw zl(e),h}finally{null!==l&&(pt(l,u),a&&function cne(n){n.lView[cs]!==n&&(n.lView=null,A4.push(n))}(l)),yv()}}function S4(n,e){for(let t=rj(n);null!==t;t=ij(t))for(let r=dr;r<t.length;r++)R4(t[r],e)}function _ne(n,e,t){R4(Ds(e,n),t)}function R4(n,e){av(n)&&ax(n,e)}function ax(n,e){const r=n[Re],i=n[st],s=n[cs];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!ur(s)),o||=!1,s&&(s.dirty=!1),n[st]&=-9217,o)gne(r,n,r.template,n[xn]);else if(8192&i){S4(n,1);const a=r.components;null!==a&&P4(n,a,1)}}function P4(n,e,t){for(let r=0;r<e.length;r++)_ne(n,e[r],t)}function Wv(n,e){const t=Jw()?64:1088;for(n[Ko].changeDetectionScheduler?.notify(e);n;){n[st]|=t;const r=ya(n);if(hc(n)&&!r)return n;n=r}return null}class Kv{get rootNodes(){const e=this._lView,t=e[Re];return Hv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(e){this._lView[xn]=e}get destroyed(){return!(256&~this._lView[st])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[kr];if(Ri(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&($v(e,r),rc(t,r))}this._attachedToViewContainer=!1}xb(this._lView[Re],this._lView)}onDestroy(e){cg(this._lView,e)}markForCheck(){Wv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[st]&=-129}reattach(){uv(this._lView),this._lView[st]|=128}detectChanges(){this._lView[st]|=1024,Fb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=hc(this._lView),t=this._lView[dc];null!==t&&!e&&zP(t,this._lView),Kj(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=e;const t=hc(this._lView),r=this._lView[dc];null!==r&&!t&&Qj(r,this._lView),uv(this._lView)}}let _c=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ine}}return n})();const yne=_c,vne=class extends yne{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Ng(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Kv(i)}};function Ine(){return function Lb(n,e){return 4&n.type?new vne(e,n,Ag(n,e)):null}(An(),he())}const Lne=new RegExp(`^(\\d+)*(${IP}|${vP})*(.*)`);function hx(n){return n.index-Ye}function eI(n,e,t,r){const i=hx(r);let s=function z4(n,e){const t=n.i18nNodes;if(t)return t.get(e)}(n,i);if(void 0===s){const o=n.data[Ib];if(o?.[i])s=function $4(n,e){const[t,...r]=function Bne(n){const e=n.match(Lne),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(const[u,l,h]of s.matchAll(/(f|n)(\d*)/g)){const g=parseInt(h,10)||1;a.push(l,g)}return[o,...a]}(n);let i;i=t===vP?e[nr][tr]:t===IP?function $j(n){return n.ownerDocument.body}(e[nr][tr]):an(e[Number(t)+Ye]);return function $ne(n,e){let t=n;for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Sg.FirstChild:t=t.firstChild;break;case Sg.NextSibling:t=t.nextSibling}}return t}(i,r)}(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{const a=null===r.prev,u=r.prev??r.parent;if(function jne(n){return!n.prev&&8===n.parent?.type}(r))s=DP(n,hx(r.parent));else{let l=mi(u,t);if(a)s=l.firstChild;else{const h=hx(u),g=DP(n,h);s=2===u.type&&g?zb(SP(n,h)+1,g):l.nextSibling}}}}return s}function zb(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}let G4=!1;function ore(n,e,t){for(const r of t.node.cases[t.case]){const i=e.get(r.index-Ye);i&&qv(n,i,!1)}}function Q4(n){const e=n[_h]??[],r=n[kr][gt];for(const i of e)are(i,r);n[_h]=Gt}function are(n,e){let t=0,r=n.firstChild;if(r){const i=n.data[Rg];for(;t<i;){const s=r.nextSibling;qv(e,r,!1),r=s,t++}}}function Y4(n){Q4(n);const e=n[tr];Gr(e)&&$b(e);for(let t=dr;t<n.length;t++)$b(n[t])}function $b(n){!function sre(n){const e=n[Wi];if(e){const{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){const i=n[gt];for(const s of r.values())ore(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}(n);const e=n[Re];for(let t=Ye;t<e.bindingStartIndex;t++)Ri(n[t])?Y4(n[t]):Gr(n[t])&&$b(n[t])}let J4=()=>null;function lre(n,e){const t=n[_h];return e&&null!==t&&0!==t.length?t[0].data[TP]===e?t.shift():(Q4(n),null):null}function Vh(n,e){return J4(n,e)}class Vg{}const Fg=new Ae("",{providedIn:"root",factory:()=>!1}),X4=new Ae(""),yx=new Ae("");class hre{}class Z4{}class pre{resolveComponentFactory(e){throw function fre(n){const e=Error(`No component factory found for ${zr(n)}.`);return e.ngComponent=n,e}(e)}}class qb{static{this.NULL=new pre}}class vx{}let yc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function gre(){const n=he(),t=Ds(An().index,n);return(Gr(t)?t:n)[gt]}()}}return n})(),mre=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}}return n})();function Hb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Dp(i,a):2==s&&(r=Dp(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class r3 extends qb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=kt(e);return new iI(t,this.ngModule)}}function i3(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:au.None)&au.SignalBased)}:{propName:o,templateName:r})}return t}class iI extends Z4{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=i3(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return i3(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function TR(n){return n.map(Tw).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=Ze(null);try{let o=(i=i||this.ngModule)instanceof Hi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new fc(e,o):e,u=a.get(vx,null);if(null===u)throw new ye(407,!1);const g={rendererFactory:u,sanitizer:a.get(mre,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Vg,null)},v=u.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",w=r?function Vte(n,e,t,r){const s=r.get(wj,!1)||t===po.ShadowDom,o=n.selectRootElement(e,s);return function Fte(n){f4(n)}(o),o}(v,r,this.componentDef.encapsulation,a):Pb(v,E,function vre(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let P=null;null!==w&&(P=AP(w,a,!0));const j=ZP(0,null,null,1,0,null,null,null,null,null,null),U=kb(null,j,null,R,null,null,g,v,a,null,P);mv(U);let G,ee,me=null;try{const _e=this.componentDef;let D,b=null;_e.findHostDirectiveDefs?(D=[],b=new Map,_e.findHostDirectiveDefs(_e,D,b),D.push(_e)):D=[_e];const C=function Ere(n,e){const t=n[Re],r=Ye;return n[r]=e,Nh(t,r,2,"#host",null)}(U,w);me=function Tre(n,e,t,r,i,s,o){const a=i[Re];!function wre(n,e,t,r){for(const i of n)e.mergedAttrs=ic(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Hb(e,e.mergedAttrs,!0),null!==t&&a4(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=AP(e,i[Or]));const l=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=kb(i,h4(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&tx(a,n,r.length-1),Ob(i,g),i[n.index]=g}(C,w,_e,D,U,g,v),ee=Eh(j,Ye),w&&function Are(n,e,t,r){if(r)Fy(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function wR(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!go(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Fy(n,t,i),s&&s.length>0&&o4(n,t,s.join(" "))}}(v,_e,w,r),void 0!==t&&function Cre(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ee,this.ngContentSelectors,t),G=function bre(n,e,t,r,i,s){const o=An(),a=i[Re],u=mi(o,i);m4(a,i,o,t,null,r);for(let h=0;h<t.length;h++)ls(m(i,a,o.directiveStart+h,o),i);_4(a,i,o),u&&ls(u,i);const l=m(i,a,o.directiveStart+o.componentOffset,o);if(n[xn]=i[xn]=l,null!==s)for(const h of s)h(l,e);return YP(a,o,i),l}(me,_e,D,b,U,[Dre]),sx(j,U,null)}catch(_e){throw null!==me&&mP(me),mP(U),_e}finally{yv()}return new Ire(this.componentType,G,Ag(ee,U),U,ee)}finally{Ze(s)}}}class Ire extends hre{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Kv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;ix(s[Re],s,i,e,t),this.previousInputValues.set(e,t),Wv(Ds(this._tNode.index,s),1)}}get injector(){return new $(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Dre(){const n=An();mg(he()[Re],n)}let Ea=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sre}}return n})();function Sre(){return function a3(n,e){let t;const r=e[n.index];return Ri(r)?t=r:(t=y4(r,e,null,n),e[n.index]=t,Ob(e,t)),u3(t,e,n,r),new s3(t,n,e)}(An(),he())}const Rre=Ea,s3=class extends Rre{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ag(this._hostTNode,this._hostLView)}get injector(){return new $(this._hostTNode,this._hostLView)}get parentInjector(){const e=yu(this._hostTNode,this._hostLView);if(Ch(e)){const t=Wl(e,this._hostLView),r=pc(e);return new $(t[Re].data[r+8],t)}return new $(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=o3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Vh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,kh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function lc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?e:new iI(kt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const R=(o?l:this.parentInjector).get(Hi,null);R&&(s=R)}const h=kt(u.componentType??{}),g=Vh(this._lContainer,h?.id??null),E=u.create(l,i,g?.firstChild??null,s);return this.insertImpl(E.hostView,a,kh(this._hostTNode,g)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function UR(n){return Ri(n[kr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[kr],l=new s3(u,u[gi],u[kr]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return kg(o,i,s,r),e.attachToViewContainerRef(),jp(Tx(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=o3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=$v(this._lContainer,t);r&&(rc(Tx(this._lContainer),t),xb(r[Re],r))}detach(e){const t=this._adjustIndex(e,-1),r=$v(this._lContainer,t);return r&&null!=rc(Tx(this._lContainer),t)?new Kv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function o3(n){return n[8]}function Tx(n){return n[8]||(n[8]=[])}let u3=l3,wx=()=>!1;function l3(n,e,t,r){if(n[zs])return;let i;i=8&t.type?an(r):function Pre(n,e){const t=n[gt],r=t.createComment(""),i=mi(e,n);return xh(t,GP(t,i),r,function Rte(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[zs]=i}function xre(n,e,t){if(n[zs]&&n[_h])return!0;const r=t[Wi],i=e.index-Ye;if(!r||function kv(n){if(Nv(n))return!0;let e=n.parent;for(;e;){if(Nv(n)||pP(e))return!0;e=e.parent}return!1}(e)||Rh(r,i))return!1;const o=DP(r,i),a=r.data[Vv]?.[i],[u,l]=function cre(n,e){const t=[];for(const r of e)for(let i=0;i<(r[vb]??1);i++){const s={data:r,firstChild:null};r[Rg]>0&&(s.firstChild=n,n=zb(r[Rg],n)),t.push(s)}return[n,t]}(o,a);return n[zs]=u,n[_h]=l,!0}function Mre(n,e,t,r){wx(n,t,e)||l3(n,e,t,r)}const y3=new Set;function ds(n){y3.has(n)||(y3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Qs(n,e){ds("NgSignals");const t=function Xa(n){const e=Object.create(we);e.value=n;const t=()=>(be(e),e.value);return t[gn]=e,t}(n),r=t[gn];return e?.equal&&(r.equal=e.equal),t.set=i=>de(r,i),t.update=i=>function re(n,e){Mr()||lr(),de(n,e(n.value))}(r,i),t.asReadonly=I3.bind(t),t}function I3(){const n=this[gn];if(void 0===n.readonlyFn){const e=()=>this();e[gn]=n,n.readonlyFn=e}return n.readonlyFn}function E3(n){return function v3(n){return"function"==typeof n&&void 0!==n[gn]}(n)&&"function"==typeof n.set}function Nn(n){let e=function M3(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(yo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ye(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Kb(n.inputs),o.inputTransforms=Kb(n.inputTransforms),o.declaredInputs=Kb(n.declaredInputs),o.outputs=Kb(n.outputs);const a=i.hostBindings;a&&Zre(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&Jre(n,u),l&&Xre(n,l),Qre(n,i),cR(n.outputs,i.outputs),yo(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Nn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Yre(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ic(i.hostAttrs,t=ic(t,i.hostAttrs))}}(r)}function Qre(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Kb(n){return n===Wo?{}:n===Gt?[]:n}function Jre(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Xre(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Zre(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function F3(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Fh{}class L3{}class Nx extends Fh{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new r3(this);const s=Gi(e);this._bootstrapComponents=Ao(s.bootstrap),this._r3Injector=LB(e,t,[{provide:Fh,useValue:this},{provide:qb,useValue:this.componentFactoryResolver},...r],zr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class kx extends L3{constructor(e){super(),this.moduleType=e}create(e){return new Nx(this.moduleType,e,[])}}class U3 extends Fh{constructor(e){super(),this.componentFactoryResolver=new r3(this),this.instance=null;const t=new Ll([...e.providers,{provide:Fh,useValue:this},{provide:qb,useValue:this.componentFactoryResolver}],e.parent||mo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Qb(n,e,t=null){return new U3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Ox(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Tu(n,e,t){return n[e]=t}function Wr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Lh(n,e,t,r){const i=Wr(n,e,t);return Wr(n,e+1,r)||i}function Jb(n,e,t,r,i){const s=Lh(n,e,t,r);return Wr(n,e+2,i)||s}function Ug(n){return!(32&~n.flags)}function aI(n,e,t,r,i,s,o,a,u,l){const h=t+Ye,g=e.firstCreatePass?function die(n,e,t,r,i,s,o,a,u){const l=e.consts,h=Nh(e,n,4,o||null,a||null);ex(e,t,h,qs(l,u)),mg(e,h);const g=h.tView=ZP(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,s,o,a,u):e.data[h];Gs(g,!1);const v=B3(e,n,g,t);bh()&&Mb(e,n,v,g),ls(v,n);const E=y4(v,n,v,g);return n[h]=E,Ob(n,E),function c3(n,e,t){return wx(n,e,t)}(E,g,n),eg(g)&&JP(e,n,g),null!=u&&XP(n,g,l),g}function Wn(n,e,t,r,i,s,o,a){const u=he(),l=Pt();return aI(u,l,n,e,t,r,i,qs(l.consts,s),o,a),Wn}let B3=j3;function j3(n,e,t,r){return Jo(!0),e[gt].createComment("")}function hie(n,e,t,r){const i=e[Wi],s=!i||va()||Ug(t)||Rh(i,r);if(Jo(s),s)return j3(0,e);const o=i.data[EP]?.[r]??null;null!==o&&null!==t.tView&&null===t.tView.ssrId&&(t.tView.ssrId=o);const a=eI(i,n,e,t);return Eb(i,r,a),zb(SP(i,r),a)}var jg=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jg||{});let W3=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();class lI{constructor(){this.ngZone=Y(Wt),this.scheduler=Y(Vg),this.errorHandler=Y(vu,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[jg.EarlyRead,jg.Write,jg.MixedReadWrite,jg.Read]}execute(){this.executing=!0;for(const e of lI.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Ne({token:lI,providedIn:"root",factory:()=>new lI})}}class gie{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function tA(n,e){!e?.injector&&function Ul(n){if(!Sw())throw new ye(-203,!1)}();const t=e?.injector??Y(xi);return Co(t)?(ds("NgAfterNextRender"),function K3(n,e,t,r){const i=e.get(W3);i.impl??=e.get(lI);const s=t?.phase??jg.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(xv):null,a=new gie(i.impl,function _ie(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}(n,t,e,!0)):Q3}const Q3={destroy(){}};function wu(n,e,t,r){const i=he();return Wr(i,vo(),e)&&(Pt(),Eu(jn(),i,n,e,t,r)),wu}function Kg(n,e,t,r){return Wr(n,vo(),t)?e+bt(t)+r:At}function iA(n,e){return n<<17|e<<2}function nd(n){return n>>17&32767}function Hx(n){return 2|n}function Bh(n){return(131068&n)>>2}function Wx(n,e){return-131069&n|e<<2}function Kx(n){return 1|n}function Ez(n,e,t,r){const i=n[t+1],s=null===e;let o=r?nd(i):Bh(i),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];Zie(n[o],e)&&(a=!0,n[o+1]=r?Kx(l):Hx(l)),o=r?nd(l):Bh(l)}a&&(n[t+1]=r?Hx(i):Kx(i))}function Zie(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ou(n,e)>=0}function _n(n,e,t){const r=he();return Wr(r,vo(),e)&&Ks(Pt(),jn(),r,n,e,r[gt],t,!1),_n}function Qx(n,e,t,r,i){const o=i?"class":"style";ix(n,t,e.inputs[o],o,r)}function rm(n,e){return function Ta(n,e,t,r){const i=he(),s=Pt(),o=Io(2);s.firstUpdatePass&&function Pz(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Hr()],o=function Rz(n,e){return e>=n.expandoStartIndex}(n,t);(function kz(n,e){return!!(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function use(n,e,t,r){const i=function pv(n){const e=mt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=hI(t=Yx(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Yx(i,n,e,t,r),null===s){let u=function cse(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Bh(r))return n[nd(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Yx(null,n,e,u[1],r),u=hI(u,e.attrs,r),function lse(n,e,t,r){n[nd(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function dse(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=hI(r,n[s].hostAttrs,t);return hI(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Jie(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=nd(o),u=Bh(o);n[r]=t;let h,l=!1;if(Array.isArray(t)?(h=t[1],(null===h||ou(t,h)>0)&&(l=!0)):h=t,i)if(0!==u){const v=nd(n[a+1]);n[r+1]=iA(v,a),0!==v&&(n[v+1]=Wx(n[v+1],r)),n[a+1]=function Qie(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=iA(a,0),0!==a&&(n[a+1]=Wx(n[a+1],r)),a=r;else n[r+1]=iA(u,0),0===a?a=r:n[u+1]=Wx(n[u+1],r),u=r;l&&(n[r+1]=Hx(n[r+1])),Ez(n,h,r,!0),Ez(n,h,r,!1),function Xie(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ou(s,e)>=0&&(t[r+1]=Kx(t[r+1]))}(e,h,n,r,s),o=iA(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==At&&Wr(i,o,e)&&function Mz(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],h=function Yie(n){return!(1&~n)}(l)?Nz(u,e,t,i,Bh(l),o):void 0;sA(h)||(sA(s)||function Kie(n){return!(2&~n)}(l)&&(s=Nz(u,null,t,i,a,o)),function Mte(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Xl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xl.Important),n.setStyle(t,r,i,s))}}(r,o,Ih(Hr(),t),i,s))}(s,s.data[Hr()],i,i[gt],n,i[o+1]=function gse(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=zr(bo(n)))),n}(e,t),r,o)}(n,e,null,!0),rm}function Yx(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=hI(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function hI(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qi(n,o,!!t||e[++s]))}return void 0===n?null:n}function Nz(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let v=t[i+1];v===At&&(v=g?Gt:void 0);let E=g?ky(v,r):h===r?v:void 0;if(l&&!sA(E)&&(E=ky(u,r)),sA(E)&&(a=E,o))return a;const w=n[i+1];i=o?nd(w):Bh(w)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=ky(u,r))}return a}function sA(n){return void 0!==n}class Cse{destroy(e){}updateValue(e,t){}swap(e,t){const r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){const o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}}function Jx(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Xx(n,e,t,r){return!(void 0===e||!e.has(r)||(n.attach(t,e.get(r)),e.delete(r),0))}function Oz(n,e,t,r,i){if(Xx(n,e,r,t(r,i)))n.updateValue(r,i);else{const s=n.create(r,i);n.attach(r,s)}}function Vz(n,e,t,r){const i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}class Fz{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}}function un(n,e){ds("NgControlFlow");const t=he(),r=vo(),i=t[r]!==At?t[r]:-1,s=-1!==i?oA(t,Ye+i):void 0;if(Wr(t,r,n)){const a=Ze(null);try{if(void 0!==s&&ox(s,0),-1!==n){const u=Ye+n,l=oA(t,u),h=Zx(t[Re],u),g=Vh(l,h.tView.ssrId);kg(l,Ng(t,h,e,{dehydratedView:g}),0,kh(h,g))}}finally{Ze(a)}}else if(void 0!==s){const a=w4(s,0);void 0!==a&&(a[xn]=e)}}class Sse{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-dr}}function ba(n,e){return e}class Pse{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}}function Ys(n,e,t,r,i,s,o,a,u,l,h,g,v){ds("NgControlFlow");const E=he(),w=Pt(),R=void 0!==u,P=he(),j=a?o.bind(P[nr][xn]):o,U=new Pse(R,j);P[Ye+n]=U,aI(E,w,n+1,e,t,r,i,qs(w.consts,s)),R&&aI(E,w,n+2,u,l,h,g,qs(w.consts,v))}class xse extends Cse{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-dr}at(e){return this.getLView(e)[xn].$implicit}attach(e,t){const r=t[Wi];this.needsIndexUpdate||=e!==this.length,kg(this.lContainer,t,e,kh(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function Mse(n,e){return $v(n,e)}(this.lContainer,e)}create(e,t){const r=Vh(this.lContainer,this.templateTNode.tView.ssrId),i=Ng(this.hostLView,this.templateTNode,new Sse(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){xb(e[Re],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[xn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xn].$index=e}getLView(e){return function Nse(n,e){return w4(n,e)}(this.lContainer,e)}}function Js(n){const e=Ze(null),t=Hr();try{const r=he(),i=r[Re],s=r[t],o=t+1,a=oA(r,o);if(void 0===s.liveCollection){const l=Zx(i,o);s.liveCollection=new xse(a,r,l)}else s.liveCollection.reset();const u=s.liveCollection;if(function Dse(n,e,t){let r,i,s=0,o=n.length-1;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){const l=n.at(s),h=e[s],g=Jx(s,l,s,h,t);if(0!==g){g<0&&n.updateValue(s,h),s++;continue}const v=n.at(o),E=e[u],w=Jx(o,v,u,E,t);if(0!==w){w<0&&n.updateValue(o,E),o--,u--;continue}const R=t(s,l),P=t(o,v),j=t(s,h);if(Object.is(j,P)){const U=t(u,E);Object.is(U,R)?(n.swap(s,o),n.updateValue(o,E),u--,o--):n.move(o,s),n.updateValue(s,h),s++}else if(r??=new Fz,i??=Vz(n,s,o,t),Xx(n,r,s,j))n.updateValue(s,h),s++,o++;else if(i.has(j))r.set(R,n.detach(s)),o--;else{const U=n.create(s,e[s]);n.attach(s,U),s++,o++}}for(;s<=u;)Oz(n,r,t,s,e[s]),s++}else if(null!=e){const u=e[Symbol.iterator]();let l=u.next();for(;!l.done&&s<=o;){const h=n.at(s),g=l.value,v=Jx(s,h,s,g,t);if(0!==v)v<0&&n.updateValue(s,g),s++,l=u.next();else{r??=new Fz,i??=Vz(n,s,o,t);const E=t(s,g);if(Xx(n,r,s,E))n.updateValue(s,g),s++,o++,l=u.next();else if(i.has(E)){const w=t(s,h);r.set(w,n.detach(s)),o--}else n.attach(s,n.create(s,g)),s++,o++,l=u.next()}}for(;!l.done;)Oz(n,r,t,n.length,l.value),l=u.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(u=>{n.destroy(u)})}(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){const l=vo(),h=0===u.length;if(Wr(r,l,h)){const g=t+2,v=oA(r,g);if(h){const E=Zx(i,g),w=Vh(v,E.tView.ssrId);kg(v,Ng(r,E,void 0,{dehydratedView:w}),0,kh(E,w))}else ox(v,0)}}}finally{Ze(e)}}function oA(n,e){return n[e]}function Zx(n,e){return Eh(n,e)}function q(n,e,t,r){const i=he(),s=Pt(),o=Ye+n,a=i[gt],u=s.firstCreatePass?function kse(n,e,t,r,i,s){const o=e.consts,u=Nh(e,n,2,r,qs(o,i));return ex(e,t,u,qs(o,s)),null!==u.attrs&&Hb(u,u.attrs,!1),null!==u.mergedAttrs&&Hb(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=Lz(s,i,u,a,e,n);i[o]=l;const h=eg(u);return Gs(u,!0),a4(a,l,u),!Ug(u)&&bh()&&Mb(s,i,l,u),0===function BR(){return mt.lFrame.elementDepthCount}()&&ls(l,i),function jR(){mt.lFrame.elementDepthCount++}(),h&&(JP(s,i,u),YP(s,u,i)),null!==r&&XP(i,u),q}function B(){let n=An();dv()?function hv(){mt.lFrame.isParent=!1}():(n=n.parent,Gs(n,!1));const e=n;(function $R(n){return mt.skipHydrationRootTNode===n})(e)&&function Qw(){mt.skipHydrationRootTNode=null}(),function zR(){mt.lFrame.elementDepthCount--}();const t=Pt();return t.firstCreatePass&&(mg(t,n),yh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Tv(n){return!!(8&n.flags)}(e)&&Qx(t,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function rP(n){return!!(16&n.flags)}(e)&&Qx(t,e,he(),e.stylesWithoutHost,!1),B}function Xs(n,e,t,r){return q(n,e,t,r),B(),Xs}let Lz=(n,e,t,r,i,s)=>(Jo(!0),Pb(r,i,nb()));function Ose(n,e,t,r,i,s){const o=e[Wi],a=!o||va()||Ug(t)||Rh(o,s);if(Jo(a),a)return Pb(r,i,nb());const u=eI(o,n,e,t);return vj(o,s)&&Eb(o,s,u.nextSibling),o&&(pP(t)||KB(u))&&gu(t)&&(function qR(n){mt.skipHydrationRootTNode=n}(t),i4(u)),u}let Bz=(n,e,t,r)=>(Jo(!0),jP(e[gt],""));function Lse(n,e,t,r){let i;const s=e[Wi],o=!s||va()||Rh(s,r)||Ug(t);if(Jo(o),o)return jP(e[gt],"");const a=eI(s,n,e,t),u=function yj(n,e){const t=n.data;let r=t[yb]?.[e]??null;return null===r&&t[Vv]?.[e]&&(r=SP(n,e)),r}(s,r);return Eb(s,r,a),i=zb(u,a),i}function Vr(){return he()}const jh=void 0;var jse=["en",[["a","p"],["AM","PM"],jh],[["AM","PM"],jh,jh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jh,"{1} 'at' {0}",jh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bse(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let im={};function Ss(n){const e=function $se(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=qz(e);if(t)return t;const r=e.split("-")[0];if(t=qz(r),t)return t;if("en"===r)return jse;throw new ye(701,!1)}function qz(n){return n in im||(im[n]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[n]),im[n]}var rr=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(rr||{});const aA="en-US";let Gz=aA,c7=(n,e,t)=>{};function je(n,e,t,r){const i=he(),s=Pt(),o=An();return i1(s,i,i[gt],o,n,e,r),je}function i1(n,e,t,r,i,s,o){const a=eg(r),l=n.firstCreatePass&&function E4(n){return n.cleanup??=[]}(n),h=e[xn],g=function I4(n){return n[Bl]??=[]}(e);let v=!0;if(3&r.type||o){const R=mi(r,e),P=o?o(R):R,j=g.length,U=o?ee=>o(an(ee[r.index])):r.index;let G=null;if(!o&&a&&(G=function xoe(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Bl],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,v=!1;else{s=f7(r,e,h,s),c7(R,i,s);const ee=t.listen(P,i,s);g.push(s,ee),l&&l.push(i,U,j,j+1)}}else s=f7(r,e,h,s);const E=r.outputs;let w;if(v&&null!==E&&(w=E[i])){const R=w.length;if(R)for(let P=0;P<R;P+=2){const me=e[w[P]][w[P+1]].subscribe(s),_e=g.length;g.push(s,me),l&&l.push(i,r.index,_e,-(_e+1))}}}function h7(n,e,t,r){const i=Ze(null);try{return Yo(6,e,t),!1!==t(r)}catch(s){return Vb(n,s),!1}finally{Yo(7,e,t),Ze(i)}}function f7(n,e,t,r){return function i(s){if(s===Function)return r;Wv(n.componentOffset>-1?Ds(n.index,e):e,5);let a=h7(e,t,r,s),u=i.__ngNextListenerFn__;for(;u;)a=h7(e,t,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Qe(n=1){return function YR(n){return(mt.lFrame.contextLView=function Hw(n,e){for(;n>0;)e=e[jl],n--;return e}(n,mt.lFrame.contextLView))[xn]}(n)}function vc(n,e,t,r,i){const s=he(),o=Kg(s,e,t,r);return o!==At&&Ks(Pt(),jn(),s,n,o,s[gt],i,!1),vc}function Cu(n){return mu(function Yw(){return mt.lFrame.contextLView}(),Ye+n)}function W(n,e=""){const t=he(),r=Pt(),i=n+Ye,s=r.firstCreatePass?Nh(r,i,1,e,null):r.data[i],o=O7(r,t,s,e,n);t[i]=o,bh()&&Mb(r,t,o,s),Gs(s,!1)}let O7=(n,e,t,r,i)=>(Jo(!0),BP(e[gt],r));function Qoe(n,e,t,r,i){const s=e[Wi],o=!s||va()||Ug(t)||Rh(s,i);return Jo(o),o?BP(e[gt],r):eI(s,n,e,t)}function kn(n){return fr("",n,""),kn}function fr(n,e,t){const r=he(),i=Kg(r,n,e,t);return i!==At&&mc(r,Hr(),i),fr}function o1(n,e,t,r,i){const s=he(),o=function Qg(n,e,t,r,i,s){const a=Lh(n,Qi(),t,i);return Io(2),a?e+bt(t)+r+bt(i)+s:At}(s,n,e,t,r,i);return o!==At&&mc(s,Hr(),o),o1}function dA(n,e,t,r,i,s,o){const a=he(),u=function Yg(n,e,t,r,i,s,o,a){const l=Jb(n,Qi(),t,i,o);return Io(3),l?e+bt(t)+r+bt(i)+s+bt(o)+a:At}(a,n,e,t,r,i,s,o);return u!==At&&mc(a,Hr(),u),dA}function Ot(n,e,t){E3(e)&&(e=e());const r=he();return Wr(r,vo(),e)&&Ks(Pt(),jn(),r,n,e,r[gt],t,!1),Ot}function St(n,e){const t=E3(n);return t&&n.set(e),t}function Vt(n,e){const t=he(),r=Pt(),i=An();return i1(r,t,t[gt],i,n,e),Vt}function a1(n,e,t,r,i){if(n=lt(n),Array.isArray(n))for(let s=0;s<n.length;s++)a1(n[s],e,t,r,i);else{const s=Pt(),o=he(),a=An();let u=cu(n)?n:lt(n.provide);const l=Dw(n),h=1048575&a.providerIndexes,g=a.directiveStart,v=a.providerIndexes>>20;if(cu(n)||!n.multi){const E=new Hl(l,i,De),w=c1(u,e,i?h:h+v,g);-1===w?(Eg(Kl(a,o),s,u),u1(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[w]=E,o[w]=E)}else{const E=c1(u,e,h+v,g),w=c1(u,e,h,h+v),P=w>=0&&t[w];if(i&&!P||!i&&!(E>=0&&t[E])){Eg(Kl(a,o),s,u);const j=function nae(n,e,t,r,i){const s=new Hl(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,q7(s,i,r&&!t),s}(i?tae:eae,t.length,i,r,l);!i&&P&&(t[w].providerFactory=j),u1(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),o.push(j)}else u1(s,n,E>-1?E:w,q7(t[i?w:E],l,!i&&r));!i&&r&&P&&t[w].componentProviders++}}}function u1(n,e,t,r){const i=cu(e),s=function RR(n){return!!n.useClass}(e);if(i||s){const u=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(t);-1===h?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function q7(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function c1(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eae(n,e,t,r){return l1(this.multi,[])}function tae(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=m(t,t[Re],this.providerFactory.index,r);s=a.slice(0,o),l1(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],l1(i,s);return s}function l1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function pr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Zoe(n,e,t){const r=Pt();if(r.firstCreatePass){const i=yo(n);a1(t,r.data,r.blueprint,i,!0),a1(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let rae=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=$y(0,t.type),i=r.length>0?Qb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(Se(Hi))})}}return n})();function Er(n){ds("NgStandalone"),n.getStandaloneInjector=e=>e.get(rae).getOrCreateStandaloneInjector(n)}function zh(n,e,t){const r=Ki()+n,i=he();return i[r]===At?Tu(i,r,t?e.call(t):e()):function oI(n,e){return n[e]}(i,r)}function d1(n,e,t,r){return W7(he(),Ki(),n,e,t,r)}function yI(n,e){const t=n[e];return t===At?void 0:t}function W7(n,e,t,r,i,s){const o=e+t;return Wr(n,o,i)?Tu(n,o+1,s?r.call(s,i):r(i)):yI(n,o+1)}function So(n,e){const t=Pt();let r;const i=n+Ye;t.firstCreatePass?(r=function gae(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=nc(r.type)),a=fi(De);try{const u=Dh(!1),l=s();return Dh(u),function s1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,he(),i,l),l}finally{fi(a)}}function pA(n,e,t){const r=n+Ye,i=he(),s=mu(i,r);return vI(i,r)?W7(i,Ki(),e,s.transform,t,s):s.transform(t)}function rd(n,e,t,r){const i=n+Ye,s=he(),o=mu(s,i);return vI(s,i)?function K7(n,e,t,r,i,s,o){const a=e+t;return Lh(n,a,i,s)?Tu(n,a+2,o?r.call(o,i,s):r(i,s)):yI(n,a+2)}(s,Ki(),e,o.transform,t,r,o):o.transform(t,r)}function h1(n,e,t,r,i){const s=n+Ye,o=he(),a=mu(o,s);return vI(o,s)?function Q7(n,e,t,r,i,s,o,a){const u=e+t;return Jb(n,u,i,s,o)?Tu(n,u+3,a?r.call(a,i,s,o):r(i,s,o)):yI(n,u+3)}(o,Ki(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function vI(n,e){return n[Re].data[e].pure}class am{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const Bae=new am("18.2.13");let _1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const _$=new Ae("");function TI(n){return!!n&&"function"==typeof n.then}function y$(n){return!!n&&"function"==typeof n.subscribe}const T1=new Ae("");let v$=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Y(T1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(TI(s))t.push(s);else if(y$(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const um=new Ae("");let vA,Aa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Y(YZ),this.afterRenderManager=Y(W3),this.zonelessEnabled=Y(Fg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new V,this.afterTick=new V,this.componentTypes=[],this.components=[],this.isStable=Y(Yl).hasPendingTasks.pipe($e(t=>!t)),this._injector=Y(Hi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Z4;if(!this._injector.get(v$).done)throw!i&&function oc(n){const e=kt(n)||$r(n)||Si(n);return null!==e&&e.standalone}(t),new ye(405,!1);let o;o=i?t:this._injector.get(qb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function fue(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Fh),l=o.create(xi.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(_$,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),yA(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ye(101,!1);const t=Ze(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ze(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(vx,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)mue(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>ug(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;yA(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(um,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yA(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ye(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function w1(n){vA??=new WeakMap;const e=vA.get(n);if(e)return e;const t=n.isStable.pipe(qo(r=>r)).toPromise().then(()=>{});return vA.set(n,t),n.onDestroy(()=>vA?.delete(n)),t}function mue(n,e,t,r){(t||ug(n))&&Fb(n,e,t&&!r?0:1)}class _ue{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let T$=(()=>{class n{compileModuleSync(t){return new kx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ao(Gi(t).declarations).reduce((o,a)=>{const u=kt(a);return u&&o.push(new iI(u)),o},[]);return new _ue(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iue=(()=>{class n{constructor(){this.zone=Y(Wt),this.changeDetectionScheduler=Y(Vg),this.applicationRef=Y(Aa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Wt({...A1(),scheduleInRootZone:t}),[{provide:Wt,useFactory:n},{provide:fo,multi:!0,useFactory:()=>{const r=Y(Iue,{optional:!0});return()=>r.initialize()}},{provide:fo,multi:!0,useFactory:()=>{const r=Y(Tue);return()=>{r.initialize()}}},!0===e?{provide:X4,useValue:!0}:[],{provide:yx,useValue:t??BB}]}function A1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let Tue=(()=>{class n{constructor(){this.subscription=new Jt,this.initialized=!1,this.zone=Y(Wt),this.pendingTasks=Y(Yl)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wI=(()=>{class n{constructor(){this.appRef=Y(Aa),this.taskService=Y(Yl),this.ngZone=Y(Wt),this.zonelessEnabled=Y(Fg),this.disableScheduling=Y(X4,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Jt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gb):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Y(yx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hP||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?zB:jB;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zB(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ic=new Ae("",{providedIn:"root",factory:()=>Y(Ic,Lt.Optional|Lt.SkipSelf)||function wue(){return typeof $localize<"u"&&$localize.locale||aA}()}),IA=new Ae("");function EA(n){return!n.moduleRef}let id=null;let $h=(()=>{class n{static{this.__NG_ELEMENT_ID__=Nue}}return n})();function Nue(n){return function kue(n,e,t){if(gu(n)&&!t){const r=Ds(n.index,e);return new Kv(r,r)}return 175&n.type?new Kv(e[nr],e):null}(An(),he(),!(16&~n))}class B${constructor(){}supports(e){return e instanceof Map||Ox(e)}create(){return new zue}}class zue{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ox(e)))throw new ye(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new $ue(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class $ue{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function z$(){return new bA([new B$])}let bA=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:z$})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||z$()),deps:[[n,new Bp,new Ol]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ye(901,!1)}}return n})();function rce(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function Mue(n=[]){if(id)return id;const e=function P$(n=[],e){return xi.create({name:e,providers:[{provide:Wy,useValue:"platform"},{provide:IA,useValue:new Set([()=>id=null])},...n]})}(n);return id=e,function I$(){!function ws(n){os=n}(()=>{throw new ye(600,!1)})}(),function x$(n){n.get(fj,null)?.forEach(t=>t())}(e),e}(r),s=[b1({}),{provide:Vg,useExisting:wI},...t||[]];return function D$(n){const e=EA(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Wt);return t.run(()=>{EA(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(vu,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),EA(n)){const s=()=>e.destroy(),o=n.platformInjector.get(IA);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(IA);o.add(s),n.moduleRef.onDestroy(()=>{yA(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function gue(n,e,t){try{const r=t();return TI(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(v$);return s.runInitializers(),s.donePromise.then(()=>{if(function Wse(n){"string"==typeof n&&(Gz=n.toLowerCase().replace(/_/g,"-"))}(e.get(Ic,aA)||aA),EA(n)){const a=e.get(Aa);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function Rue(n,e){const t=n.injector.get(Aa);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new ye(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new U3({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}let cq=!1;function Tce(){return ma([{provide:Tb,useFactory:()=>{let n=!0;return Co()&&(n=!!Y(Dg,{optional:!0})?.get(bP,null)),n&&ds("NgHydration"),n}},{provide:fo,useValue:()=>{(function W4(n){G4=n})(!1),Co()&&Y(Tb)&&(function wce(){const n=Jl();let e;for(const t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&"nghm"===t.textContent?.trim()){e=t;break}if(!e)throw new ye(-507,!1)}(),function vce(){cq||(cq=!0,function Cee(){gj=Aee}(),function Vse(){Lz=Ose}(),function Yoe(){O7=Qoe}(),function Use(){Bz=Lse}(),function fie(){B3=hie}(),function Nre(){u3=Mre,wx=xre}(),function dre(){J4=lre}(),function Ute(){f4=Lte}())}())},multi:!0},{provide:wj,useFactory:()=>Co()&&Y(Tb)},{provide:um,useFactory:()=>{if(Co()&&Y(Tb)){const n=Y(Aa);return Y(xi),()=>{(function Ece(n){return w1(n)})(n).then(()=>{!function ure(n){const e=n._views;for(const t of e){const r=mj(t);null!==r&&null!==r[tr]&&(Gr(r)?$b(r):Y4(r))}}(n)})}}return()=>{}},multi:!0}])}function cm(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function DI(n,e){ds("NgSignals");const t=function Le(n){const e=Object.create(cr);e.computation=n;const t=()=>{if(Nt(e),be(e),e.value===Yt)throw e.error;return e.value};return t[gn]=e,t}(n);return e?.equal&&(t[gn].equal=e.equal),t}function Du(n){const e=Ze(null);try{return n()}finally{Ze(e)}}let dq=null;function sd(){return dq}class Mce{}const eo=new Ae("");let O1=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(kce),providedIn:"platform"})}}return n})();const Nce=new Ae("");let kce=(()=>{class n extends O1{constructor(){super(),this._doc=Y(eo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sd().getBaseHref(this._doc)}onPopState(t){const r=sd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=sd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function V1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hq(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ec(n){return n&&"?"!==n[0]?"?"+n:n}let Gh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(pq),providedIn:"root"})}}return n})();const fq=new Ae("");let pq=(()=>{class n extends Gh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Y(eo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ec(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ec(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ec(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(O1),Se(fq,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Oce=(()=>{class n extends Gh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ec(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ec(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(O1),Se(fq,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),SI=(()=>{class n{constructor(t){this._subject=new Ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Lce(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hq(gq(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ec(r))}normalize(t){return n.stripTrailingSlash(function Fce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gq(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ec(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ec(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ec}static{this.joinWithSlash=V1}static{this.stripTrailingSlash=hq}static{this.\u0275fac=function(r){return new(r||n)(Se(Gh))}}static{this.\u0275prov=Ne({token:n,factory:()=>function Vce(){return new SI(Se(Gh))}(),providedIn:"root"})}}return n})();function gq(n){return n.replace(/\/index.html$/,"")}var xA=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(xA||{}),Ps=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ps||{}),Kn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Kn||{}),Ro=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ro||{});const oi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function MA(n,e){return ra(Ss(n)[rr.DateFormat],e)}function NA(n,e){return ra(Ss(n)[rr.TimeFormat],e)}function kA(n,e){return ra(Ss(n)[rr.DateTimeFormat],e)}function na(n,e){const t=Ss(n),r=t[rr.NumberSymbols][e];if(typeof r>"u"){if(e===oi.CurrencyDecimal)return t[rr.NumberSymbols][oi.Decimal];if(e===oi.CurrencyGroup)return t[rr.NumberSymbols][oi.Group]}return r}function _q(n){if(!n[rr.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[rr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ra(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function L1(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Xce=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,OA={},Zce=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Tc=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Tc||{}),Cn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Cn||{}),Dn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Dn||{});function ele(n,e,t,r){let i=function cle(n){if(Iq(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return VA(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Xce))return function lle(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,u,l),e}(r)}const e=new Date(n);if(!Iq(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=wc(t,e)||e;let a,o=[];for(;e;){if(a=Zce.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let u=i.getTimezoneOffset();r&&(u=vq(r,u),i=function ule(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function ale(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(vq(e,i)-i))}(i,r,!0));let l="";return o.forEach(h=>{const g=function ole(n){if(B1[n])return B1[n];let e;switch(n){case"G":case"GG":case"GGG":e=ir(Dn.Eras,Kn.Abbreviated);break;case"GGGG":e=ir(Dn.Eras,Kn.Wide);break;case"GGGGG":e=ir(Dn.Eras,Kn.Narrow);break;case"y":e=ai(Cn.FullYear,1,0,!1,!0);break;case"yy":e=ai(Cn.FullYear,2,0,!0,!0);break;case"yyy":e=ai(Cn.FullYear,3,0,!1,!0);break;case"yyyy":e=ai(Cn.FullYear,4,0,!1,!0);break;case"Y":e=BA(1);break;case"YY":e=BA(2,!0);break;case"YYY":e=BA(3);break;case"YYYY":e=BA(4);break;case"M":case"L":e=ai(Cn.Month,1,1);break;case"MM":case"LL":e=ai(Cn.Month,2,1);break;case"MMM":e=ir(Dn.Months,Kn.Abbreviated);break;case"MMMM":e=ir(Dn.Months,Kn.Wide);break;case"MMMMM":e=ir(Dn.Months,Kn.Narrow);break;case"LLL":e=ir(Dn.Months,Kn.Abbreviated,Ps.Standalone);break;case"LLLL":e=ir(Dn.Months,Kn.Wide,Ps.Standalone);break;case"LLLLL":e=ir(Dn.Months,Kn.Narrow,Ps.Standalone);break;case"w":e=U1(1);break;case"ww":e=U1(2);break;case"W":e=U1(1,!0);break;case"d":e=ai(Cn.Date,1);break;case"dd":e=ai(Cn.Date,2);break;case"c":case"cc":e=ai(Cn.Day,1);break;case"ccc":e=ir(Dn.Days,Kn.Abbreviated,Ps.Standalone);break;case"cccc":e=ir(Dn.Days,Kn.Wide,Ps.Standalone);break;case"ccccc":e=ir(Dn.Days,Kn.Narrow,Ps.Standalone);break;case"cccccc":e=ir(Dn.Days,Kn.Short,Ps.Standalone);break;case"E":case"EE":case"EEE":e=ir(Dn.Days,Kn.Abbreviated);break;case"EEEE":e=ir(Dn.Days,Kn.Wide);break;case"EEEEE":e=ir(Dn.Days,Kn.Narrow);break;case"EEEEEE":e=ir(Dn.Days,Kn.Short);break;case"a":case"aa":case"aaa":e=ir(Dn.DayPeriods,Kn.Abbreviated);break;case"aaaa":e=ir(Dn.DayPeriods,Kn.Wide);break;case"aaaaa":e=ir(Dn.DayPeriods,Kn.Narrow);break;case"b":case"bb":case"bbb":e=ir(Dn.DayPeriods,Kn.Abbreviated,Ps.Standalone,!0);break;case"bbbb":e=ir(Dn.DayPeriods,Kn.Wide,Ps.Standalone,!0);break;case"bbbbb":e=ir(Dn.DayPeriods,Kn.Narrow,Ps.Standalone,!0);break;case"B":case"BB":case"BBB":e=ir(Dn.DayPeriods,Kn.Abbreviated,Ps.Format,!0);break;case"BBBB":e=ir(Dn.DayPeriods,Kn.Wide,Ps.Format,!0);break;case"BBBBB":e=ir(Dn.DayPeriods,Kn.Narrow,Ps.Format,!0);break;case"h":e=ai(Cn.Hours,1,-12);break;case"hh":e=ai(Cn.Hours,2,-12);break;case"H":e=ai(Cn.Hours,1);break;case"HH":e=ai(Cn.Hours,2);break;case"m":e=ai(Cn.Minutes,1);break;case"mm":e=ai(Cn.Minutes,2);break;case"s":e=ai(Cn.Seconds,1);break;case"ss":e=ai(Cn.Seconds,2);break;case"S":e=ai(Cn.FractionalSeconds,1);break;case"SS":e=ai(Cn.FractionalSeconds,2);break;case"SSS":e=ai(Cn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=LA(Tc.Short);break;case"ZZZZZ":e=LA(Tc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=LA(Tc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=LA(Tc.Long);break;default:return null}return B1[n]=e,e}(h);l+=g?g(i,t,u):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function VA(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function wc(n,e){const t=function Bce(n){return Ss(n)[rr.LocaleId]}(n);if(OA[t]??={},OA[t][e])return OA[t][e];let r="";switch(e){case"shortDate":r=MA(n,Ro.Short);break;case"mediumDate":r=MA(n,Ro.Medium);break;case"longDate":r=MA(n,Ro.Long);break;case"fullDate":r=MA(n,Ro.Full);break;case"shortTime":r=NA(n,Ro.Short);break;case"mediumTime":r=NA(n,Ro.Medium);break;case"longTime":r=NA(n,Ro.Long);break;case"fullTime":r=NA(n,Ro.Full);break;case"short":const i=wc(n,"shortTime"),s=wc(n,"shortDate");r=FA(kA(n,Ro.Short),[i,s]);break;case"medium":const o=wc(n,"mediumTime"),a=wc(n,"mediumDate");r=FA(kA(n,Ro.Medium),[o,a]);break;case"long":const u=wc(n,"longTime"),l=wc(n,"longDate");r=FA(kA(n,Ro.Long),[u,l]);break;case"full":const h=wc(n,"fullTime"),g=wc(n,"fullDate");r=FA(kA(n,Ro.Full),[h,g])}return r&&(OA[t][e]=r),r}function FA(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ca(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function ai(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function nle(n,e){switch(n){case Cn.FullYear:return e.getFullYear();case Cn.Month:return e.getMonth();case Cn.Date:return e.getDate();case Cn.Hours:return e.getHours();case Cn.Minutes:return e.getMinutes();case Cn.Seconds:return e.getSeconds();case Cn.FractionalSeconds:return e.getMilliseconds();case Cn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Cn.Hours)0===a&&-12===t&&(a=12);else if(n===Cn.FractionalSeconds)return function tle(n,e){return Ca(n,3).substring(0,e)}(a,e);const u=na(o,oi.MinusSign);return Ca(a,e,u,r,i)}}function ir(n,e,t=Ps.Format,r=!1){return function(i,s){return function rle(n,e,t,r,i,s){switch(t){case Dn.Months:return function $ce(n,e,t){const r=Ss(n),s=ra([r[rr.MonthsFormat],r[rr.MonthsStandalone]],e);return ra(s,t)}(e,i,r)[n.getMonth()];case Dn.Days:return function zce(n,e,t){const r=Ss(n),s=ra([r[rr.DaysFormat],r[rr.DaysStandalone]],e);return ra(s,t)}(e,i,r)[n.getDay()];case Dn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function Wce(n){const e=Ss(n);return _q(e),(e[rr.ExtraData][2]||[]).map(r=>"string"==typeof r?L1(r):[L1(r[0]),L1(r[1])])}(e),h=function Kce(n,e,t){const r=Ss(n);_q(r);const s=ra([r[rr.ExtraData][0],r[rr.ExtraData][1]],e)||[];return ra(s,t)||[]}(e,i,r),g=l.findIndex(v=>{if(Array.isArray(v)){const[E,w]=v,R=o>=E.hours&&a>=E.minutes,P=o<w.hours||o===w.hours&&a<w.minutes;if(E.hours<w.hours){if(R&&P)return!0}else if(R||P)return!0}else if(v.hours===o&&v.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function jce(n,e,t){const r=Ss(n),s=ra([r[rr.DayPeriodsFormat],r[rr.DayPeriodsStandalone]],e);return ra(s,t)}(e,i,r)[o<12?0:1];case Dn.Eras:return function qce(n,e){return ra(Ss(n)[rr.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function LA(n){return function(e,t,r){const i=-1*r,s=na(t,oi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Tc.Short:return(i>=0?"+":"")+Ca(o,2,s)+Ca(Math.abs(i%60),2,s);case Tc.ShortGMT:return"GMT"+(i>=0?"+":"")+Ca(o,1,s);case Tc.Long:return"GMT"+(i>=0?"+":"")+Ca(o,2,s)+":"+Ca(Math.abs(i%60),2,s);case Tc.Extended:return 0===r?"Z":(i>=0?"+":"")+Ca(o,2,s)+":"+Ca(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const ile=0,UA=4;function yq(n){const e=n.getDay(),t=0===e?-3:UA-e;return VA(n.getFullYear(),n.getMonth(),n.getDate()+t)}function U1(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=yq(t),o=function sle(n){const e=VA(n,ile,1).getDay();return VA(n,0,1+(e<=UA?UA:UA+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Ca(i,n,na(r,oi.MinusSign))}}function BA(n,e=!1){return function(t,r){return Ca(yq(t).getFullYear(),n,na(r,oi.MinusSign),e)}}const B1={};function vq(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Iq(n){return n instanceof Date&&!isNaN(n.valueOf())}const dle=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function q1(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function bq(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let Sq=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dle,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Rq("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Rq("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(Ea),De(_c))}}static{this.\u0275dir=It({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Dle{constructor(){this.$implicit=null,this.ngIf=null}}function Rq(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${zr(e)}'.`)}let xq=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Xl.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(De(To),De(bA),De(yc))}}static{this.\u0275dir=It({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function Da(n,e){return new ye(2100,!1)}class xle{createSubscription(e,t){return Du(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Du(()=>e.unsubscribe())}}class Mle{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Nle=new Mle,kle=new xle;let Mq=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(TI(t))return Nle;if(y$(t))return kle;throw Da()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(De($h,16))}}static{this.\u0275pipe=pi({name:"async",type:n,pure:!1,standalone:!0})}}return n})();const Ble=new Ae(""),jle=new Ae("");let dm=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return ele(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Da()}}static{this.\u0275fac=function(r){return new(r||n)(De(Ic,16),De(Ble,24),De(jle,24))}}static{this.\u0275pipe=pi({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),Q1=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Y1(n){return!(null==n||""===n||n!=n)}(t))return null;i||=this._locale;try{return function _le(n,e,t){return function z1(n,e,t,r,i,s,o=!1){let a="",u=!1;if(isFinite(n)){let l=function vle(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(l=function yle(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let h=e.minInt,g=e.minFrac,v=e.maxFrac;if(s){const U=s.match(dle);if(null===U)throw new Error(`${s} is not a valid digit info`);const G=U[1],ee=U[3],me=U[5];null!=G&&(h=q1(G)),null!=ee&&(g=q1(ee)),null!=me?v=q1(me):null!=ee&&g>v&&(v=g)}!function Ile(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let g=o;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let g=1;g<o;g++)r[g]=0}if(a>=5)if(o-1<0){for(let g=0;g>o;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const l=e+n.integerLen,h=r.reduceRight(function(g,v,E,w){return w[E]=(v+=g)<10?v:v-10,u&&(0===w[E]&&E>=l?w.pop():u=!1),v>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}(l,g,v);let E=l.digits,w=l.integerLen;const R=l.exponent;let P=[];for(u=E.every(U=>!U);w<h;w++)E.unshift(0);for(;w<0;w++)E.unshift(0);w>0?P=E.splice(w,E.length):(P=E,E=[0]);const j=[];for(E.length>=e.lgSize&&j.unshift(E.splice(-e.lgSize,E.length).join(""));E.length>e.gSize;)j.unshift(E.splice(-e.gSize,E.length).join(""));E.length&&j.unshift(E.join("")),a=j.join(na(t,r)),P.length&&(a+=na(t,i)+P.join("")),R&&(a+=na(t,oi.Exponential)+"+"+R)}else a=na(t,oi.Infinity);return a=n<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function $1(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let h=0;h<u.length;h++){const g=u.charAt(h);"0"===g?t.minFrac=t.maxFrac=h+1:"#"===g?t.maxFrac=h+1:t.posSuf+=g}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const h=i.length-t.posPre.length-t.posSuf.length,g=s.indexOf("#");t.negPre=s.substring(0,g).replace(/'/g,""),t.negSuf=s.slice(g+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function F1(n,e){return Ss(n)[rr.NumberFormats][e]}(e,xA.Decimal),na(e,oi.MinusSign)),e,oi.Group,oi.Decimal,t)}(function J1(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw Da()}}static{this.\u0275fac=function(r){return new(r||n)(De(Ic,16))}}static{this.\u0275pipe=pi({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let bc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=uu({type:n})}static{this.\u0275inj=js({})}}return n})();const kq="browser",Yle="server";function PI(n){return n===Yle}let Xle=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>function Jle(n){return n===kq}(Y(wo))?new Zle(Y(eo),window):new tde})}}return n})();class Zle{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function ede(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class tde{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Oq{}var M=_t(467);function tM(n){return n[n.length-1]}function Hq(n){return vt(tM(n))?n.pop():void 0}function NI(n){return function Rde(n){return n&&vt(n.schedule)}(tM(n))?n.pop():void 0}var Ac=_t(635);const Wq=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Kq(n){return vt(n?.then)}function Qq(n){return vt(n[co])}function Yq(n){return Symbol.asyncIterator&&vt(n?.[Symbol.asyncIterator])}function Jq(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Xq=function xde(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zq(n){return vt(n?.[Xq])}function eG(n){return(0,Ac.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ac.N3)(t.read());if(i)return yield(0,Ac.N3)(void 0);yield yield(0,Ac.N3)(r)}}finally{t.releaseLock()}})}function tG(n){return vt(n?.getReader)}function Po(n){if(n instanceof Bt)return n;if(null!=n){if(Qq(n))return function Mde(n){return new Bt(e=>{const t=n[co]();if(vt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Wq(n))return function Nde(n){return new Bt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Kq(n))return function kde(n){return new Bt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zd)})}(n);if(Yq(n))return nG(n);if(Zq(n))return function Ode(n){return new Bt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(tG(n))return function Vde(n){return nG(eG(n))}(n)}throw Jq(n)}function nG(n){return new Bt(e=>{(function Fde(n,e){var t,r,i,s;return(0,Ac.sH)(this,void 0,void 0,function*(){try{for(t=(0,Ac.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Cc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Hh(n,e=0){return Ce((t,r)=>{t.subscribe(ke(r,i=>Cc(r,n,()=>r.next(i),e),()=>Cc(r,n,()=>r.complete(),e),i=>Cc(r,n,()=>r.error(i),e)))})}function fm(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rG(n,e){if(!n)throw new Error("Iterable cannot be null");return new Bt(t=>{Cc(t,e,()=>{const r=n[Symbol.asyncIterator]();Cc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function sr(n,e){return e?function $de(n,e){if(null!=n){if(Qq(n))return function Lde(n,e){return Po(n).pipe(fm(e),Hh(e))}(n,e);if(Wq(n))return function Bde(n,e){return new Bt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Kq(n))return function Ude(n,e){return Po(n).pipe(fm(e),Hh(e))}(n,e);if(Yq(n))return rG(n,e);if(Zq(n))return function jde(n,e){return new Bt(t=>{let r;return Cc(t,e,()=>{r=n[Xq](),Cc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>vt(r?.return)&&r.return()})}(n,e);if(tG(n))return function zde(n,e){return rG(eG(n),e)}(n,e)}throw Jq(n)}(n,e):Po(n)}function ut(...n){return sr(n,NI(n))}function hs(n,e,t=1/0){return vt(e)?hs((r,i)=>$e((s,o)=>e(r,s,i,o))(Po(n(r,i))),t):("number"==typeof e&&(t=e),Ce((r,i)=>function qde(n,e,t,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const v=()=>{g&&!u.length&&!l&&e.complete()},E=R=>l<r?w(R):u.push(R),w=R=>{s&&e.next(R),l++;let P=!1;Po(t(R,h++)).subscribe(ke(e,j=>{i?.(j),s?E(j):e.next(j)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){const j=u.shift();o?Cc(e,o,()=>w(j)):w(j)}v()}catch(j){e.error(j)}}))};return n.subscribe(ke(e,E,()=>{g=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function pm(n,e){return vt(e)?hs(n,e,1):hs(n,1)}function GA(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vi(n,e){return Ce((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ke(r,u=>{i?.unsubscribe();let l=0;const h=s++;Po(n(u,h)).subscribe(i=ke(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Mi(n,e,t){const r=vt(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ke(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):zi}class HA{}class WA{}class ia{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ia?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ia;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ia?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Gde{encodeKey(e){return iG(e)}encodeValue(e){return iG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Wde=/%(\d[a-f0-9])/gi,Kde={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iG(n){return encodeURIComponent(n).replace(Wde,(e,t)=>Kde[t]??e)}function KA(n){return`${n}`}class od{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gde,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Hde(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(KA):[KA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new od({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(KA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(KA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Qde{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function sG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function oG(n){return typeof Blob<"u"&&n instanceof Blob}function aG(n){return typeof FormData<"u"&&n instanceof FormData}class kI{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yde(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ia,this.context??=new Qde,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new od,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||sG(this.body)||oG(this.body)||aG(this.body)||function Jde(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof od?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aG(this.body)?null:oG(this.body)?this.body.type||null:sG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof od?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,h=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((v,E)=>v.set(E,e.setHeaders[E]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((v,E)=>v.set(E,e.setParams[E]),h)),new kI(t,r,o,{params:h,headers:l,context:g,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}}var ad=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ad||{});class nM{constructor(e,t=200,r="OK"){this.headers=e.headers||new ia,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class QA extends nM{constructor(e={}){super(e),this.type=ad.ResponseHeader}clone(e={}){return new QA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wh extends nM{constructor(e={}){super(e),this.type=ad.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gm extends nM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let cG=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof kI)s=t;else{let u,l;u=i.headers instanceof ia?i.headers:new ia(i.headers),i.params&&(l=i.params instanceof od?i.params:new od({fromObject:i.params})),s=new kI(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=ut(s).pipe(pm(u=>this.handler.handle(u)));if(t instanceof kI||"events"===i.observe)return o;const a=o.pipe(Bn(u=>u instanceof Wh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($e(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe($e(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe($e(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe($e(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new od).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,rM(i,r))}post(t,r,i={}){return this.request("POST",t,rM(i,r))}put(t,r,i={}){return this.request("PUT",t,rM(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Se(HA))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const ehe=/^\)\]\}',?\n/;function lG(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let iM=(()=>{class n{constructor(){this.fetchImpl=Y(nhe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Y(Wt)}handle(t){return new Bt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(sM,s=>r.error(new gm({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,M.A)(function*(){const o=s.createRequestInit(t);let a;try{const w=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function rhe(n){n.then(sM,sM)})(w),i.next({type:ad.Sent}),a=yield w}catch(w){return void i.error(new gm({error:w,status:w.status??0,statusText:w.statusText,url:t.urlWithParams,headers:w.headers}))}const u=new ia(a.headers),l=a.statusText,h=lG(a)??t.urlWithParams;let g=a.status,v=null;if(t.reportProgress&&i.next(new QA({headers:u,status:g,statusText:l,url:h})),a.body){const w=a.headers.get("content-length"),R=[],P=a.body.getReader();let U,G,j=0;const ee=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,M.A)(function*(){for(;;){const{done:_e,value:D}=yield P.read();if(_e)break;if(R.push(D),j+=D.length,t.reportProgress){G="text"===t.responseType?(G??"")+(U??=new TextDecoder).decode(D,{stream:!0}):void 0;const b=()=>i.next({type:ad.DownloadProgress,total:w?+w:void 0,loaded:j,partialText:G});ee?ee.run(b):b()}}}));const me=s.concatChunks(R,j);try{const _e=a.headers.get("Content-Type")??"";v=s.parseBody(t,me,_e)}catch(_e){return void i.error(new gm({error:_e,headers:new ia(a.headers),status:a.status,statusText:a.statusText,url:lG(a)??t.urlWithParams}))}}0===g&&(g=v?200:0),g>=200&&g<300?(i.next(new Wh({body:v,headers:u,status:g,statusText:l,url:h})),i.complete()):i.error(new gm({error:v,headers:u,status:g,statusText:l,url:h}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(ehe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class nhe{}function sM(){}function dG(n,e){return e(n)}const OI=new Ae(""),hG=new Ae(""),fG=new Ae("",{providedIn:"root",factory:()=>!0});let pG=(()=>{class n extends HA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Y(Yl),this.contributeToStability=Y(fG)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(OI),...this.injector.get(hG,[])]));this.chain=r.reduceRight((i,s)=>function she(n,e,t){return(r,i)=>_o(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),dG)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(GA(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Se(WA),Se(Hi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const hhe=/^\)\]\}',?\n/;let mG=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ye(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?sr(r.\u0275loadImpl()):ut(null)).pipe(vi(()=>new Bt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((R,P)=>o.setRequestHeader(R,P.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const R=t.detectContentTypeHeader();null!==R&&o.setRequestHeader("Content-Type",R)}if(t.responseType){const R=t.responseType.toLowerCase();o.responseType="json"!==R?R:"text"}const a=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const R=o.statusText||"OK",P=new ia(o.getAllResponseHeaders()),j=function fhe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new QA({headers:P,status:o.status,statusText:R,url:j}),u},h=()=>{let{headers:R,status:P,statusText:j,url:U}=l(),G=null;204!==P&&(G=typeof o.response>"u"?o.responseText:o.response),0===P&&(P=G?200:0);let ee=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof G){const me=G;G=G.replace(hhe,"");try{G=""!==G?JSON.parse(G):null}catch(_e){G=me,ee&&(ee=!1,G={error:_e,text:G})}}ee?(s.next(new Wh({body:G,headers:R,status:P,statusText:j,url:U||void 0})),s.complete()):s.error(new gm({error:G,headers:R,status:P,statusText:j,url:U||void 0}))},g=R=>{const{url:P}=l(),j=new gm({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(j)};let v=!1;const E=R=>{v||(s.next(l()),v=!0);let P={type:ad.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),"text"===t.responseType&&o.responseText&&(P.partialText=o.responseText),s.next(P)},w=R=>{let P={type:ad.UploadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),s.next(P)};return o.addEventListener("load",h),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",E),null!==a&&o.upload&&o.upload.addEventListener("progress",w)),o.send(a),s.next({type:ad.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",h),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",E),null!==a&&o.upload&&o.upload.removeEventListener("progress",w)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Se(Oq))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const oM=new Ae(""),_G=new Ae("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),yG=new Ae("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class vG{}let mhe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bq(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Se(eo),Se(wo),Se(_G))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function _he(n,e){const t=n.url.toLowerCase();if(!Y(oM)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Y(vG).getToken(),i=Y(yG);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}const vhe=new Ae(""),EG="b",TG="h",wG="s",bG="st",AG="u",CG="rt",YA=new Ae(""),Ihe=["GET","HEAD"];function Ehe(n,e){const{isCacheActive:t,...r}=Y(YA),{transferCache:i,method:s}=n;if(!t||!1===i||"POST"===s&&!r.includePostRequests&&!i||"POST"!==s&&!Ihe.includes(s)||!r.includeRequestsWithAuthHeaders&&function The(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}(n)||!1===r.filter?.(n))return e(n);const o=Y(Dg),a=Y(vhe,{optional:!0}),u=PI(Y(wo));if(a&&!u)throw new ye(2803,!1);const l=u&&a?function Dhe(n,e){const t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}(n.url,a):n.url,h=function bhe(n,e){const{params:t,method:r,responseType:i}=n,s=DG(t);let o=n.serializeBody();o instanceof URLSearchParams?o=DG(o):"string"!=typeof o&&(o="");const u=function Ahe(n){let e=0;for(const t of n)e=Math.imul(31,e)+t.charCodeAt(0)|0;return e+=2147483648,e.toString()}([r,i,e,o,s].join("|"));return u}(n,l),g=o.get(h,null);let v=r.includeHeaders;if("object"==typeof i&&i.includeHeaders&&(v=i.includeHeaders),g){const{[EG]:E,[CG]:w,[TG]:R,[wG]:P,[bG]:j,[AG]:U}=g;let G=E;switch(w){case"arraybuffer":G=(new TextEncoder).encode(E).buffer;break;case"blob":G=new Blob([E])}let ee=new ia(R);return ut(new Wh({body:G,headers:ee,status:P,statusText:j,url:U}))}return e(n).pipe(Mi(E=>{E instanceof Wh&&u&&o.set(h,{[EG]:E.body,[TG]:whe(E.headers,v),[wG]:E.status,[bG]:E.statusText,[AG]:l,[CG]:n.responseType})}))}function whe(n,e){if(!e)return{};const t={};for(const r of e){const i=n.getAll(r);null!==i&&(t[r]=i)}return t}function DG(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Che(n){return[{provide:YA,useFactory:()=>(ds("NgHttpTransferCache"),{isCacheActive:!0,...n})},{provide:hG,useValue:Ehe,multi:!0,deps:[Dg,YA]},{provide:um,multi:!0,useFactory:()=>{const e=Y(Aa),t=Y(YA);return()=>{w1(e).then(()=>{t.isCacheActive=!1})}}}]}class She extends Mce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class aM extends She{static makeCurrent(){!function xce(n){dq??=n}(new aM)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rhe(){return VI=VI||document.querySelector("base"),VI?VI.getAttribute("href"):null}();return null==t?null:function Phe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){VI=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bq(document.cookie,e)}}let VI=null,Mhe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const uM=new Ae("");let SG=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ye(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Se(uM),Se(Wt))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class RG{constructor(e){this._doc=e}}const cM="ng-app-id";let PG=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=PI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${cM}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(cM),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(cM,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo),Se(Ov),Se(pj,8),Se(wo))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const lM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dM=/%COMP%/g,Vhe=new Ae("",{providedIn:"root",factory:()=>!0});function MG(n,e){return e.map(t=>t.replace(dM,n))}let NG=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=PI(a),this.defaultRenderer=new hM(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===po.ShadowDom&&(r={...r,encapsulation:po.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof OG?i.applyToHost(t):i instanceof fM&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case po.Emulated:s=new OG(u,l,r,this.appId,h,o,a,g);break;case po.ShadowDom:return new Bhe(u,l,t,r,o,a,this.nonce,g);default:s=new fM(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Se(SG),Se(PG),Se(Ov),Se(Vhe),Se(eo),Se(wo),Se(Wt),Se(pj))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class hM{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(lM[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kG(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kG(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ye(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=lM[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=lM[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xl.DashCase|Xl.Important)?e.style.setProperty(t,r,i&Xl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=sd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function kG(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bhe extends hM{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=MG(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fM extends hM{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?MG(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class OG extends fM{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function Fhe(n){return"_ngcontent-%COMP%".replace(dM,n)}(l),this.hostAttr=function Lhe(n){return"_nghost-%COMP%".replace(dM,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}const VG=["alt","control","meta","shift"],zhe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$he={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function FG(n){return{appProviders:[...Jhe,...n?.providers??[]],platformProviders:Qhe}}const Qhe=[{provide:wo,useValue:kq},{provide:fj,useValue:function Hhe(){aM.makeCurrent()},multi:!0},{provide:eo,useFactory:function Khe(){return function yee(n){yP=n}(document),document},deps:[]}],Jhe=[{provide:Wy,useValue:"root"},{provide:vu,useFactory:function Whe(){return new vu},deps:[]},{provide:uM,useClass:(()=>{class n extends RG{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[eo,Wt,wo]},{provide:uM,useClass:(()=>{class n extends RG{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),VG.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=zhe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),VG.forEach(o=>{o!==i&&(0,$he[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[eo]},NG,PG,SG,{provide:vx,useExisting:NG},{provide:Oq,useClass:Mhe,deps:[]},[]];let Xhe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:function(r){let i=null;return i=r?new(r||n):Se(nfe),i},providedIn:"root"})}}return n})(),nfe=(()=>{class n extends pM{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ea.NONE:return r;case ea.HTML:return Iu(r,"HTML")?bo(r):Fj(this._doc,String(r)).toString();case ea.STYLE:return Iu(r,"Style")?bo(r):r;case ea.SCRIPT:if(Iu(r,"Script"))return bo(r);throw new ye(5200,!1);case ea.URL:return Iu(r,"URL")?bo(r):Ab(String(r));case ea.RESOURCE_URL:if(Iu(r,"ResourceURL"))return bo(r);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(t){return function Bee(n){return new kee(n)}(t)}bypassSecurityTrustStyle(t){return function jee(n){return new Oee(n)}(t)}bypassSecurityTrustScript(t){return function zee(n){return new Vee(n)}(t)}bypassSecurityTrustUrl(t){return function $ee(n){return new Fee(n)}(t)}bypassSecurityTrustResourceUrl(t){return function qee(n){return new Lee(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qh=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Qh||{});const{isArray:sfe}=Array,{getPrototypeOf:ofe,prototype:afe,keys:ufe}=Object;function BG(n){if(1===n.length){const e=n[0];if(sfe(e))return{args:e,keys:null};if(function cfe(n){return n&&"object"==typeof n&&ofe(n)===afe}(e)){const t=ufe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:lfe}=Array;function jG(n){return $e(e=>function dfe(n,e){return lfe(e)?n(...e):n(e)}(n,e))}function zG(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function gM(...n){const e=NI(n),t=Hq(n),{args:r,keys:i}=BG(n);if(0===r.length)return sr([],e);const s=new Bt(function hfe(n,e,t=zi){return r=>{$G(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)$G(e,()=>{const l=sr(n[u],e);let h=!1;l.subscribe(ke(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>zG(i,o):zi));return t?s.pipe(jG(t)):s}function $G(n,e,t){n?Cc(t,n,e):e()}function mm(n=1/0){return hs(zi,n)}function mM(...n){return function ffe(){return mm(1)}()(sr(n,NI(n)))}function qG(n){return new Bt(e=>{Po(n()).subscribe(e)})}function XA(n,e){const t=vt(n)?n:()=>n,r=i=>i.error(t());return new Bt(e?i=>e.schedule(r,0,i):r)}function _M(){return Ce((n,e)=>{let t=null;n._refCount++;const r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class GG extends Bt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,K(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jt;const t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jt.EMPTY)}return e}refCount(){return _M()(this)}}function ZA(...n){const e=NI(n);return Ce((t,r)=>{(e?mM(n,t,e):mM(n,t)).subscribe(r)})}function _m(n){return Ce((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ke(t,void 0,void 0,o=>{s=Po(n(o,_m(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function eC(n,e){return Ce(function pfe(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(ke(o,h=>{const g=l++;u=a?n(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function yM(n){return n<=0?()=>Rt:Ce((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const Ft="primary",FI=Symbol("RouteTitle");class yfe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ym(n){return new yfe(n)}function vfe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Su(n,e){const t=n?vM(n):void 0,r=e?vM(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!HG(n[i],e[i]))return!1;return!0}function vM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function HG(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function WG(n){return n.length>0?n[n.length-1]:null}function cd(n){return function ife(n){return!!n&&(n instanceof Bt||vt(n.lift)&&vt(n.subscribe))}(n)?n:TI(n)?sr(Promise.resolve(n)):ut(n)}const Efe={exact:function YG(n,e,t){if(!Jh(n.segments,e.segments)||!tC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!YG(n.children[r],e.children[r],t))return!1;return!0},subset:JG},KG={exact:function Tfe(n,e){return Su(n,e)},subset:function wfe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>HG(n[t],e[t]))},ignored:()=>!0};function QG(n,e,t){return Efe[t.paths](n.root,e.root,t.matrixParams)&&KG[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JG(n,e,t){return XG(n,e,e.segments,t)}function XG(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Jh(i,t)||e.hasChildren()||!tC(i,t,r))}if(n.segments.length===t.length){if(!Jh(n.segments,t)||!tC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!JG(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Jh(n.segments,i)&&tC(n.segments,i,r)&&n.children[Ft])&&XG(n.children[Ft],e,s,r)}}function tC(n,e,t){return e.every((r,i)=>KG[t](n[i].parameters,r.parameters))}class Yh{constructor(e=new zn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ym(this.queryParams),this._queryParamMap}toString(){return Cfe.serialize(this)}}class zn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rC(this)}}class LI{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ym(this.parameters),this._parameterMap}toString(){return t5(this)}}function Jh(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new nC,providedIn:"root"})}}return n})();class nC{parse(e){const t=new Ffe(e);return new Yh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${UI(e.root,!0)}`,r=function Rfe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${iC(t)}=${iC(i)}`).join("&"):`${iC(t)}=${iC(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Dfe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Cfe=new nC;function rC(n){return n.segments.map(e=>t5(e)).join("/")}function UI(n,e){if(!n.hasChildren())return rC(n);if(e){const t=n.children[Ft]?UI(n.children[Ft],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ft&&r.push(`${i}:${UI(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Afe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ft&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ft&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ft?[UI(n.children[Ft],!1)]:[`${i}:${UI(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${rC(n)}/${t[0]}`:`${rC(n)}/(${t.join("//")})`}}function ZG(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iC(n){return ZG(n).replace(/%3B/gi,";")}function IM(n){return ZG(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sC(n){return decodeURIComponent(n)}function e5(n){return sC(n.replace(/\+/g,"%20"))}function t5(n){return`${IM(n.path)}${function Sfe(n){return Object.entries(n).map(([e,t])=>`;${IM(e)}=${IM(t)}`).join("")}(n.parameters)}`}const Pfe=/^[^\/()?;#]+/;function EM(n){const e=n.match(Pfe);return e?e[0]:""}const xfe=/^[^\/()?;=#]+/,Nfe=/^[^=?&#]+/,Ofe=/^[^&#]+/;class Ffe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zn([],{}):new zn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new zn(e,t)),r}parseSegment(){const e=EM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new LI(sC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mfe(n){const e=n.match(xfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=EM(this.remaining);i&&(r=i,this.capture(r))}e[sC(t)]=sC(r)}parseQueryParam(e){const t=function kfe(n){const e=n.match(Nfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Vfe(n){const e=n.match(Ofe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=e5(t),s=e5(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=EM(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ye(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ft);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Ft]:new zn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}}function n5(n){return n.segments.length>0?new zn([],{[Ft]:n}):n}function r5(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=r5(i);if(r===Ft&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Lfe(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new zn(n.segments.concat(e.segments),e.children)}return n}(new zn(n.segments,e))}function Xh(n){return n instanceof Yh}function i5(n){let e;const i=n5(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new zn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function s5(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return TM(i,i,i,t,r);const s=function Bfe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new a5(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new a5(t,e,r)}(e);if(s.toRoot())return TM(i,i,new zn([],{}),t,r);const o=function jfe(n,e,t){if(n.isAbsolute)return new aC(e,!0,0);if(!t)return new aC(e,!1,NaN);if(null===t.parent)return new aC(t,!0,0);const r=oC(n.commands[0])?0:1;return function zfe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ye(4005,!1);i=r.segments.length}return new aC(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?jI(o.segmentGroup,o.index,s.commands):u5(o.segmentGroup,o.index,s.commands);return TM(i,o.segmentGroup,a,t,r)}function oC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function BI(n){return"object"==typeof n&&null!=n&&n.outlets}function TM(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=n===e?t:o5(n,e,t);const a=n5(r5(o));return new Yh(a,s,i)}function o5(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:o5(s,e,t)}),new zn(n.segments,r)}class a5{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oC(r[0]))throw new ye(4003,!1);const i=r.find(BI);if(i&&i!==WG(r))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class aC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function u5(n,e,t){if(n??=new zn([],{}),0===n.segments.length&&n.hasChildren())return jI(n,e,t);const r=function qfe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(BI(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!l5(u,l,o))return s;r+=2}else{if(!l5(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new zn(n.segments.slice(0,r.pathIndex),{});return s.children[Ft]=new zn(n.segments.slice(r.pathIndex),n.children),jI(s,0,i)}return r.match&&0===i.length?new zn(n.segments,{}):r.match&&!n.hasChildren()?wM(n,e,t):r.match?jI(n,0,i):wM(n,e,t)}function jI(n,e,t){if(0===t.length)return new zn(n.segments,{});{const r=function $fe(n){return BI(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Ft)&&n.children[Ft]&&1===n.numberOfChildren&&0===n.children[Ft].segments.length){const s=jI(n.children[Ft],e,t);return new zn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=u5(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new zn(n.segments,i)}}function wM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(BI(s)){const u=Gfe(s.outlets);return new zn(r,u)}if(0===i&&oC(t[0])){r.push(new LI(n.segments[e].path,c5(t[0]))),i++;continue}const o=BI(s)?s.outlets[Ft]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&oC(a)?(r.push(new LI(o,c5(a))),i+=2):(r.push(new LI(o,{})),i++)}return new zn(r,{})}function Gfe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=wM(new zn([],{}),0,r))}),e}function c5(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function l5(n,e,t){return n==t.path&&Su(e,t.parameters)}const zI="imperative";var cn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(cn||{});class Ru{constructor(e,t){this.id=e,this.url=t}}class uC extends Ru{constructor(e,t,r="imperative",i=null){super(e,t),this.type=cn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dc extends Ru{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=cn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var xo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(xo||{}),cC=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(cC||{});class Zh extends Ru{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=cn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Im extends Ru{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=cn.NavigationSkipped}}class bM extends Ru{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=cn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class d5 extends Ru{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=cn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hfe extends Ru{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=cn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wfe extends Ru{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=cn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kfe extends Ru{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=cn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qfe extends Ru{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=cn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yfe{constructor(e){this.route=e,this.type=cn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jfe{constructor(e){this.route=e,this.type=cn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xfe{constructor(e){this.snapshot=e,this.type=cn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zfe{constructor(e){this.snapshot=e,this.type=cn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class epe{constructor(e){this.snapshot=e,this.type=cn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tpe{constructor(e){this.snapshot=e,this.type=cn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h5{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=cn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class AM{}class lC{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function Sa(n){return n.outlet||Ft}function $I(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ape{get injector(){return $I(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new qI(this.rootInjector),this.attachRef=null}}let qI=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ape(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Se(Hi))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class f5{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=CM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=CM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=DM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return DM(e,this._root).map(t=>t.value)}}function CM(n,e){if(n===e.value)return e;for(const t of e.children){const r=CM(n,t);if(r)return r}return null}function DM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=DM(n,t);if(r.length)return r.unshift(e),r}return[]}class Ra{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Em(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class p5 extends f5{constructor(e,t){super(e),this.snapshot=t,SM(this,e)}toString(){return this.snapshot.toString()}}function g5(n){const e=function upe(n){const s=new hC([],{},{},"",{},Ft,n,null,{});return new m5("",new Ra(s,[]))}(n),t=new Z([new LI("",{})]),r=new Z({}),i=new Z({}),s=new Z({}),o=new Z(""),a=new ld(t,r,s,o,i,Ft,n,e.root);return a.snapshot=e.root,new p5(new Ra(a,[]),e)}class ld{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe($e(l=>l[FI]))??ut(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($e(e=>ym(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($e(e=>ym(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dC(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&y5(i)&&(r.resolve[FI]=i.title),r}class hC{get title(){return this.data?.[FI]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ym(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ym(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class m5 extends f5{constructor(e,t){super(t),this.url=e,SM(this,t)}toString(){return _5(this._root)}}function SM(n,e){e.value._routerState=n,e.children.forEach(t=>SM(n,t))}function _5(n){const e=n.children.length>0?` { ${n.children.map(_5).join(", ")} } `:"";return`${n.value}${e}`}function RM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Su(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Su(e.params,t.params)||n.paramsSubject.next(t.params),function Ife(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Su(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Su(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function PM(n,e){const t=Su(n.params,e.params)&&function bfe(n,e){return Jh(n,e)&&n.every((t,r)=>Su(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||PM(n.parent,e.parent))}function y5(n){return"string"==typeof n.title||null===n.title}let xM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ft,this.activateEvents=new Ht,this.deactivateEvents=new Ht,this.attachEvents=new Ht,this.detachEvents=new Ht,this.parentContexts=Y(qI),this.location=Y(Ea),this.changeDetector=Y($h),this.inputBinder=Y(fC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new MM(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]})}}return n})();class MM{__ngOutletInjector(e){return new MM(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ld?this.route:e===qI?this.childContexts:this.parent.get(e,t)}}const fC=new Ae("");let v5=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=gM([r.queryParams,r.params,r.data]).pipe(vi(([s,o,a],u)=>(a={...s,...o,...a},0===u?ut(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function Pce(n){const e=kt(n);if(!e)return null;const t=new iI(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function GI(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lpe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return GI(n,r,i);return GI(n,r)})}(n,e,t);return new Ra(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>GI(n,a)),o}}const r=function dpe(n){return new ld(new Z(n.url),new Z(n.params),new Z(n.queryParams),new Z(n.fragment),new Z(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>GI(n,s));return new Ra(r,i)}}class NM{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const I5="ngNavigationCancelingError";function pC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Xh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=E5(!1,xo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function E5(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[I5]=!0,t.cancellationCode=e,t}function T5(n){return!!n&&n[I5]}class ppe{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),RM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Em(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Em(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Em(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Em(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tpe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zfe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(RM(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),RM(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class w5{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gC{constructor(e,t){this.component=e,this.route=t}}function gpe(n,e,t){const r=n._root;return HI(r,e?e._root:null,t,[r.value])}function Tm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function yy(n){return null!==Rp(n)}(n)?e.get(n):n:r}function HI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Em(e);return n.children.forEach(o=>{(function _pe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function ype(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Jh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jh(n.url,e.url)||!Su(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PM(n,e)||!Su(n.queryParams,e.queryParams);default:return!PM(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new w5(r)):(s.data=o.data,s._resolvedData=o._resolvedData),HI(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gC(a.outlet.component,o))}else o&&WI(e,a,i),i.canActivateChecks.push(new w5(r)),HI(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>WI(a,t.getContext(o),i)),i}function WI(n,e,t){const r=Em(n),i=n.value;Object.entries(r).forEach(([s,o])=>{WI(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new gC(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function KI(n){return"function"==typeof n}function b5(n){return n instanceof Un||"EmptyError"===n?.name}const mC=Symbol("INITIAL_VALUE");function wm(){return vi(n=>gM(n.map(e=>e.pipe(ha(1),ZA(mC)))).pipe($e(e=>{for(const t of e)if(!0!==t){if(t===mC)return mC;if(!1===t||Ape(t))return t}return!0}),Bn(e=>e!==mC),ha(1)))}function Ape(n){return Xh(n)||n instanceof NM}function A5(n){return function nh(...n){return eu(n)}(Mi(e=>{if("boolean"!=typeof e)throw pC(0,e)}),$e(e=>!0===e))}class kM{constructor(e){this.segmentGroup=e||null}}class _C extends Error{constructor(e){super(),this.urlTree=e}}function bm(n){return XA(new kM(n))}class Lpe{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[Ft])return XA(new ye(4e3,!1));i=i.children[Ft]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:u,fragment:l,routeConfig:h,url:g,outlet:v,params:E,data:w,title:R}=i,P=_o(s,()=>a({params:E,data:w,queryParams:u,fragment:l,routeConfig:h,url:g,outlet:v,title:R}));if(P instanceof Yh)throw new _C(P);t=P}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new _C(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Yh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new zn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const OM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Upe(n,e,t,r,i){const s=C5(n,e,t);return s.matched?(r=function npe(n,e){return n.providers&&!n._injector&&(n._injector=Qb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Ope(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(o=>{const a=Tm(o,n);return cd(function bpe(n){return n&&KI(n.canMatch)}(a)?a.canMatch(e,t):_o(n,()=>a(e,t)))})).pipe(wm(),A5()):ut(!0)}(r,e,t).pipe($e(o=>!0===o?s:{...OM}))):ut(s)}function C5(n,e,t){if("**"===e.path)return function Bpe(n){return{matched:!0,parameters:n.length>0?WG(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...OM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||vfe)(t,n,e);if(!i)return{...OM};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function D5(n,e,t,r){return t.length>0&&function $pe(n,e,t){return t.some(r=>yC(n,e,r)&&Sa(r)!==Ft)}(n,t,r)?{segmentGroup:new zn(e,zpe(r,new zn(t,n.children))),slicedSegments:[]}:0===t.length&&function qpe(n,e,t){return t.some(r=>yC(n,e,r))}(n,t,r)?{segmentGroup:new zn(n.segments,jpe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new zn(n.segments,n.children),slicedSegments:t}}function jpe(n,e,t,r){const i={};for(const s of t)if(yC(n,e,s)&&!r[Sa(s)]){const o=new zn([],{});i[Sa(s)]=o}return{...r,...i}}function zpe(n,e){const t={};t[Ft]=e;for(const r of n)if(""===r.path&&Sa(r)!==Ft){const i=new zn([],{});t[Sa(r)]=i}return t}function yC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Hpe{}class Qpe{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Lpe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){const e=D5(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($e(({children:t,rootSnapshot:r})=>{const i=new Ra(r,t),s=new m5("",i),o=function Ufe(n,e,t=null,r=null){return s5(i5(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new hC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ft,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ft,t).pipe($e(r=>({children:r,rootSnapshot:t})),_m(r=>{if(r instanceof _C)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kM?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe($e(o=>o instanceof Ra?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return sr(s).pipe(pm(o=>{const a=r.children[o],u=function ope(n,e){const t=n.filter(r=>Sa(r)===e);return t.push(...n.filter(r=>Sa(r)!==e)),t}(t,o);return this.processSegmentGroup(e,u,a,o,i)}),eC((o,a)=>(o.push(...a),o)),rh(null),function gfe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,s)=>n(i,s,r)):zi,yM(1),t?rh(e):Al(()=>new Un))}(),hs(o=>{if(null===o)return bm(r);const a=S5(o);return function Ype(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(a),ut(a)}))}processSegment(e,t,r,i,s,o,a){return sr(t).pipe(pm(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a).pipe(_m(l=>{if(l instanceof kM)return ut(null);throw l}))),qo(u=>!!u),_m(u=>{if(b5(u))return function Gpe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?ut(new Hpe):bm(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,u){return Sa(r)===o||o!==Ft&&yC(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):bm(i):bm(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:g,remainingSegments:v}=C5(t,i,s);if(!u)return bm(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new hC(s,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R5(i),Sa(i),i.component??i._loadedComponent??null,i,P5(i)),w=dC(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(w.params),E.data=Object.freeze(w.data);const R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(hs(P=>this.processSegment(e,r,t,P.concat(v),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=Upe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(vi(u=>u.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(vi(({routes:l})=>{const h=r._loadedInjector??e,{parameters:g,consumedSegments:v,remainingSegments:E}=u,w=new hC(v,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R5(r),Sa(r),r.component??r._loadedComponent??null,r,P5(r)),R=dC(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);const{segmentGroup:P,slicedSegments:j}=D5(t,v,E,l);if(0===j.length&&P.hasChildren())return this.processChildren(h,l,P,w).pipe($e(G=>new Ra(w,G)));if(0===l.length&&0===j.length)return ut(new Ra(w,[]));const U=Sa(r)===s;return this.processSegment(h,l,P,j,U?Ft:s,!0,w).pipe($e(G=>new Ra(w,G instanceof Ra?[G]:[])))})):bm(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function kpe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(o=>{const a=Tm(o,n);return cd(function Ipe(n){return n&&KI(n.canLoad)}(a)?a.canLoad(e,t):_o(n,()=>a(e,t)))})).pipe(wm(),A5())}(e,t,r).pipe(hs(i=>i?this.configLoader.loadChildren(e,t).pipe(Mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Fpe(){return XA(E5(!1,xo.GuardRejected))}())):ut({routes:[],injector:e})}}function Jpe(n){const e=n.value.routeConfig;return e&&""===e.path}function S5(n){const e=[],t=new Set;for(const r of n){if(!Jpe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=S5(r.children);e.push(new Ra(r.value,i))}return e.filter(r=>!t.has(r))}function R5(n){return n.data||{}}function P5(n){return n.resolve||{}}function x5(n){const e=n.children.map(t=>x5(t)).flat();return[n,...e]}function VM(n){return vi(e=>{const t=n(e);return t?sr(t).pipe($e(()=>e)):ut(e)})}let M5=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ft);return r}getResolvedTitleForRoute(t){return t.data[FI]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(rge),providedIn:"root"})}}return n})(),rge=(()=>{class n extends M5{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Se(Xhe))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Am=new Ae("",{providedIn:"root",factory:()=>({})});let N5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["ng-component"]],standalone:!0,features:[Er],decls:1,vars:0,template:function(r,i){1&r&&Xs(0,"router-outlet")},dependencies:[xM],encapsulation:2})}}return n})();function FM(n){const e=n.children&&n.children.map(FM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=N5),t}const Cm=new Ae("");let LM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Y(T$)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=cd(t.loadComponent()).pipe($e(k5),Mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),GA(()=>{this.componentLoaders.delete(t)})),i=new GG(r,()=>new V).pipe(_M());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function ige(n,e,t,r){return cd(n.loadChildren()).pipe($e(k5),hs(i=>i instanceof L3||Array.isArray(i)?ut(i):sr(e.compileModuleAsync(i))),$e(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Cm,[],{optional:!0,self:!0}).flat()),{routes:o.map(FM),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(GA(()=>{this.childrenLoaders.delete(r)})),o=new GG(s,()=>new V).pipe(_M());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k5(n){return function sge(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let UM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(oge),providedIn:"root"})}}return n})(),oge=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const O5=new Ae(""),V5=new Ae("");function age(n,e,t){const r=n.get(V5),i=n.get(eo);return n.get(Wt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),function uge(n){return new Promise(e=>{tA({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:u}=r;return u&&_o(n,()=>u({transition:a,from:e,to:t})),o})}const F5=new Ae("");let vC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new V,this.transitionAbortSubject=new V,this.configLoader=Y(LM),this.environmentInjector=Y(Hi),this.urlSerializer=Y(vm),this.rootContexts=Y(qI),this.location=Y(SI),this.inputBindingEnabled=null!==Y(fC,{optional:!0}),this.titleStrategy=Y(M5),this.options=Y(Am,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Y(UM),this.createViewTransition=Y(O5,{optional:!0}),this.navigationErrorHandler=Y(F5,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Jfe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Yfe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Z({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:zI,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Bn(s=>0!==s.id),$e(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),vi(s=>{let o=!1,a=!1;return ut(s).pipe(vi(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",xo.SupersededByNewNavigation),Rt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:"string"==typeof u.extras.browserUrl?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Im(u.id,this.urlSerializer.serialize(u.rawUrl),g,cC.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ut(u).pipe(vi(g=>{const v=this.transitions?.getValue();return this.events.next(new uC(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?Rt:Promise.resolve(g)}),function Xpe(n,e,t,r,i,s){return hs(o=>function Wpe(n,e,t,r,i,s,o="emptyOnly"){return new Qpe(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe($e(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Mi(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const v=new d5(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:g,extractedUrl:v,source:E,restoredState:w,extras:R}=u,P=new uC(g,this.urlSerializer.serialize(v),E,w);this.events.next(P);const j=g5(this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:j,urlAfterRedirects:v,extras:{...R,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=v,ut(s)}{const g="";return this.events.next(new Im(u.id,this.urlSerializer.serialize(u.extractedUrl),g,cC.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),Mi(u=>{const l=new Hfe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),$e(u=>(this.currentTransition=s={...u,guards:gpe(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function Cpe(n,e){return hs(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ut({...t,guardsResult:!0}):function Dpe(n,e,t,r){return sr(n).pipe(hs(i=>function Npe(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ut(s.map(a=>{const u=$I(e)??i,l=Tm(a,u);return cd(function wpe(n){return n&&KI(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):_o(u,()=>l(n,e,t,r))).pipe(qo())})).pipe(wm()):ut(!0)}(i.component,i.route,t,e,r)),qo(i=>!0!==i,!0))}(o,r,i,n).pipe(hs(a=>a&&function vpe(n){return"boolean"==typeof n}(a)?function Spe(n,e,t,r){return sr(e).pipe(pm(i=>mM(function Ppe(n,e){return null!==n&&e&&e(new Xfe(n)),ut(!0)}(i.route.parent,r),function Rpe(n,e){return null!==n&&e&&e(new epe(n)),ut(!0)}(i.route,r),function Mpe(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function mpe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>qG(()=>ut(o.guards.map(u=>{const l=$I(o.node)??t,h=Tm(u,l);return cd(function Tpe(n){return n&&KI(n.canActivateChild)}(h)?h.canActivateChild(r,n):_o(l,()=>h(r,n))).pipe(qo())})).pipe(wm())));return ut(s).pipe(wm())}(n,i.path,t),function xpe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(s=>qG(()=>{const o=$I(e)??t,a=Tm(s,o);return cd(function Epe(n){return n&&KI(n.canActivate)}(a)?a.canActivate(e,n):_o(o,()=>a(e,n))).pipe(qo())}));return ut(i).pipe(wm())}(n,i.route,t))),qo(i=>!0!==i,!0))}(r,s,n,e):ut(a)),$e(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Mi(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&"boolean"!=typeof u.guardsResult)throw pC(0,u.guardsResult);const l=new Wfe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Bn(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",xo.GuardRejected),!1)),VM(u=>{if(u.guards.canActivateChecks.length)return ut(u).pipe(Mi(l=>{const h=new Kfe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),vi(l=>{let h=!1;return ut(l).pipe(function Zpe(n,e){return hs(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);const s=new Set(i.map(u=>u.route)),o=new Set;for(const u of s)if(!o.has(u))for(const l of x5(u))o.add(l);let a=0;return sr(o).pipe(pm(u=>s.has(u)?function ege(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!y5(i)&&(s[FI]=i.title),function tge(n,e,t,r){const i=vM(n);if(0===i.length)return ut({});const s={};return sr(i).pipe(hs(o=>function nge(n,e,t,r){const i=$I(e)??r,s=Tm(n,i);return cd(s.resolve?s.resolve(e,t):_o(i,()=>s(e,t)))}(n[o],e,t,r).pipe(qo(),Mi(a=>{if(a instanceof NM)throw pC(new nC,a);s[o]=a}))),yM(1),function mfe(n){return $e(()=>n)}(s),_m(o=>b5(o)?Rt:XA(o)))}(s,n,e,r).pipe($e(o=>(n._resolvedData=o,n.data=dC(n,n.parent,t).resolve,null)))}(u,r,n,e):(u.data=dC(u,u.parent,n).resolve,ut(void 0))),Mi(()=>a++),yM(1),hs(u=>a===o.size?ut(t):Rt))})}(this.paramsInheritanceStrategy,this.environmentInjector),Mi({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",xo.NoDataFromResolver)}}))}),Mi(l=>{const h=new Qfe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),VM(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Mi(v=>{h.component=v}),$e(()=>{})));for(const v of h.children)g.push(...l(v));return g};return gM(l(u.targetSnapshot.root)).pipe(rh(null),ha(1))}),VM(()=>this.afterPreactivation()),vi(()=>{const{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?sr(h).pipe($e(()=>s)):ut(s)}),$e(u=>{const l=function cpe(n,e,t){const r=GI(n,e._root,t?t._root:void 0);return new p5(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},this.currentNavigation.targetRouterState=l,s}),Mi(()=>{this.events.next(new AM)}),((n,e,t,r)=>$e(i=>(new ppe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ha(1),Mi({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function _fe(n){return Ce((e,t)=>{Po(n).subscribe(ke(t,()=>t.complete(),$o)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Mi(u=>{throw u}))),GA(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",xo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),_m(u=>{if(a=!0,T5(u))this.events.next(new Zh(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function hpe(n){return T5(n)&&Xh(n.url)}(u)?this.events.next(new lC(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{const l=new bM(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{const h=_o(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof NM){const{message:g,cancellationCode:v}=pC(0,h);this.events.next(new Zh(s.id,this.urlSerializer.serialize(s.extractedUrl),g,v)),this.events.next(new lC(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);const g=t.errorHandler(u);s.resolve(!!g)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Rt}))}))}cancelNavigationTransition(t,r,i){const s=new Zh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cge(n){return n!==zI}let lge=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(hge),providedIn:"root"})}}return n})();class dge{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let hge=(()=>{class n extends dge{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),L5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>Y(fge),providedIn:"root"})}}return n})(),fge=(()=>{class n extends L5{constructor(){super(...arguments),this.location=Y(SI),this.urlSerializer=Y(vm),this.options=Y(Am,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Y(UM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yh,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=g5(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof uC)this.stateMemento=this.createStateMemento();else if(t instanceof Im)this.rawUrlTree=r.initialUrl;else if(t instanceof d5){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof AM?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Zh&&(t.code===xo.GuardRejected||t.code===xo.NoDataFromResolver)?this.restoreHistory(r):t instanceof bM?this.restoreHistory(r,!0):t instanceof Dc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof Yh?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var QI=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(QI||{});function U5(n,e){n.events.pipe(Bn(t=>t instanceof Dc||t instanceof Zh||t instanceof bM||t instanceof Im),$e(t=>t instanceof Dc||t instanceof Im?QI.COMPLETE:t instanceof Zh&&(t.code===xo.Redirect||t.code===xo.SupersededByNewNavigation)?QI.REDIRECTING:QI.FAILED),Bn(t=>t!==QI.REDIRECTING),ha(1)).subscribe(()=>{e()})}function pge(n){throw n}const gge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ni=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Y(_1),this.stateManager=Y(L5),this.options=Y(Am,{optional:!0})||{},this.pendingTasks=Y(Yl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Y(vC),this.urlSerializer=Y(vm),this.location=Y(SI),this.urlHandlingStrategy=Y(UM),this._events=new V,this.errorHandler=this.options.errorHandler||pge,this.navigated=!1,this.routeReuseStrategy=Y(lge),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Y(Cm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Y(fC,{optional:!0}),this.eventsSubscription=new Jt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof Zh&&r.code!==xo.Redirect&&r.code!==xo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dc)this.navigated=!0;else if(r instanceof lC){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||cge(i.source),...o};this.scheduleNavigation(a,zI,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function yge(n){return!(n instanceof AM||n instanceof lC)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zI,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(FM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=i5(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),g=this.currentUrlTree.root}return s5(g,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xh(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,zI,null,r)}navigate(t,r={skipLocationChange:!1}){return function _ge(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ye(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...gge}:!1===r?{...mge}:r,Xh(t))return QG(this.currentUrlTree,t,i);const s=this.parseUrl(t);return QG(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,v)=>{a=g,u=v});const h=this.pendingTasks.add();return U5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dm=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new V,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Dc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Xh(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function Lj(n,e,t){return function ute(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Db:OP}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.routerLinkInput?null:Xh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(De(Ni),De(ld),function Mn(n){return function ub(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Hp(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(An(),n)}("tabindex"),De(yc),De(To),De(Gh))}}static{this.\u0275dir=It({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&je("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&wu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cm],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cm],replaceUrl:[2,"replaceUrl","replaceUrl",cm],routerLink:"routerLink"},standalone:!0,features:[F3,Pi]})}}return n})();class B5{}let Ege=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof Dc),pm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Qb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return sr(i).pipe(mm())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const s=i.pipe(hs(o=>null===o?ut(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?sr([s,this.loader.loadComponent(r)]).pipe(mm()):s})}static{this.\u0275fac=function(r){return new(r||n)(Se(Ni),Se(T$),Se(Hi),Se(B5),Se(LM))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const BM=new Ae("");let j5=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Im&&t.code===cC.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof h5&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new h5(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function c4(){throw new Error("invalid")}()}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function z5(n){return n.routerState.root}function Pu(n,e){return{\u0275kind:n,\u0275providers:e}}function $5(){const n=Y(xi);return e=>{const t=n.get(Aa);if(e!==t.components[0])return;const r=n.get(Ni),i=n.get(q5);1===n.get(jM)&&r.initialNavigation(),n.get(G5,null,Lt.Optional)?.setUpPreloading(),n.get(BM,null,Lt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const q5=new Ae("",{factory:()=>new V}),jM=new Ae("",{providedIn:"root",factory:()=>1}),G5=new Ae("");function Cge(n){return Pu(0,[{provide:G5,useExisting:Ege},{provide:B5,useExisting:n}])}function Sge(n){return Pu(9,[{provide:O5,useValue:age},{provide:V5,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const H5=new Ae("ROUTER_FORROOT_GUARD"),Rge=[SI,{provide:vm,useClass:nC},Ni,qI,{provide:ld,useFactory:z5,deps:[Ni]},LM,[]];let zM=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Rge,[],{provide:Cm,multi:!0,useValue:t},{provide:H5,useFactory:Nge,deps:[[Ni,new Ol,new Bp]]},{provide:Am,useValue:r||{}},r?.useHash?{provide:Gh,useClass:Oce}:{provide:Gh,useClass:pq},{provide:BM,useFactory:()=>{const n=Y(Xle),e=Y(Wt),t=Y(Am),r=Y(vC),i=Y(vm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new j5(i,r,n,e,t)}},r?.preloadingStrategy?Cge(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?kge(r):[],r?.bindToComponentInputs?Pu(8,[v5,{provide:fC,useExisting:v5}]).\u0275providers:[],r?.enableViewTransitions?Sge().\u0275providers:[],[{provide:W5,useFactory:$5},{provide:um,multi:!0,useExisting:W5}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Cm,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(H5,8))}}static{this.\u0275mod=uu({type:n})}static{this.\u0275inj=js({})}}return n})();function Nge(n){return"guarded"}function kge(n){return["disabled"===n.initialNavigation?Pu(3,[{provide:T1,multi:!0,useFactory:()=>{const e=Y(Ni);return()=>{e.setUpLocationChangeListener()}}},{provide:jM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Pu(2,[{provide:jM,useValue:0},{provide:T1,multi:!0,deps:[xi],useFactory:e=>{const t=e.get(Nce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ni),s=e.get(q5);U5(i,()=>{r(!0)}),e.get(vC).afterPreactivation=()=>(r(!0),s.closed?ut(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const W5=new Ae("");var Sm=_t(631);(0,Sm.registerVersion)("firebase","10.14.1","app");class Lge extends Jt{constructor(e,t){super()}schedule(e,t=0){return this}}const IC={setInterval(n,e,...t){const{delegate:r}=IC;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=IC;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class K5 extends Lge{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return IC.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&IC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,sn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const $M={now:()=>($M.delegate||Date).now(),delegate:void 0};class YI{constructor(e,t=YI.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}YI.now=$M.now;class Q5 extends YI{constructor(e,t=YI.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const jge=new class Bge extends Q5{}(class Uge extends K5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Y5=new Q5(K5),EC=new am("ANGULARFIRE2_VERSION");class J5{constructor(){return(n=>{const t=(0,Sm.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})($ge)}}const $ge="app-check";function Rm(){}class X5{zone;delegate;constructor(e,t=jge){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class qge{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rm,{},Rm,Rm)),t.pipe(Mi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Z5=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new X5(Zone.current)),this.insideAngular=t.run(()=>new X5(Zone.current,Y5)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Se(Wt))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mo(n){return function Hge(n){return function(t){return(t=t.lift(new qge(n.ngZone))).pipe(fm(n.outsideAngular),Hh(n.insideAngular))}}(function Pm(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Sc=_t(574);Sc.A.registerVersion("firebase","10.14.1","app-compat");const Yge=["ngOnDestroy"];class e6{constructor(e){return e}}const TC=new Ae("angularfire2.app.options"),wC=new Ae("angularfire2.app.name");function qM(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Sc.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Sc.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Zge("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new e6(o)}const Zge=(n,...e)=>{},eme={provide:e6,useFactory:qM,deps:[TC,Wt,[new Ol,wC]]};let tme=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:TC,useValue:t},{provide:wC,useValue:r}]}}constructor(t){Sc.A.registerVersion("angularfire",EC.full,"core"),Sc.A.registerVersion("angularfire",EC.full,"app-compat"),Sc.A.registerVersion("angular",Bae.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Se(wo))};static \u0275mod=uu({type:n});static \u0275inj=js({providers:[eme]})}return n})();function t6(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function nme(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(n6("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rme?" You may need to reload as Firebase is not HMR aware.":""}`),n6("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rme=typeof module<"u"&&!!module.hot,n6=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],_t(324);class sme extends V{constructor(e=1/0,t=1/0,r=$M){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function GM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new hi({next:()=>{r.unsubscribe(),n()}});return Po(e(...t)).subscribe(r)}function r6(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function ome(n={}){const{connector:e=()=>new V,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,h=!1,g=!1;const v=()=>{a?.unsubscribe(),a=void 0},E=()=>{v(),o=u=void 0,h=g=!1},w=()=>{const R=o;E(),R?.unsubscribe()};return Ce((R,P)=>{l++,!g&&!h&&v();const j=u=u??e();P.add(()=>{l--,0===l&&!g&&!h&&(a=GM(w,i))}),j.subscribe(P),!o&&l>0&&(o=new hi({next:U=>j.next(U),error:U=>{g=!0,v(),a=GM(E,t,U),j.error(U)},complete:()=>{h=!0,v(),a=GM(E,r),j.complete()}}),Po(R).subscribe(o))})(s)}}({connector:()=>new sme(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function i6(n,e){return vt(e)?vi(()=>n,e):vi(()=>n)}const s6=new Ae("angularfire2.auth.use-emulator"),o6=new Ae("angularfire2.auth.settings"),a6=new Ae("angularfire2.auth.tenant-id"),u6=new Ae("angularfire2.auth.langugage-code"),c6=new Ae("angularfire2.auth.use-device-language"),l6=new Ae("angularfire.auth.persistence"),d6=(n,e,t,r,i,s,o,a)=>t6(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let Pa=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,h,g,v,E){const w=new V,R=ut(void 0).pipe(Hh(o.outsideAngular),vi(()=>s.runOutsideAngular(()=>Promise.resolve().then(_t.bind(_t,324)))),$e(()=>qM(t,s,r)),$e(P=>d6(P,s,a,l,h,g,u,v)),r6({bufferSize:1,refCount:!1}));if(PI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{R.pipe(qo()).subscribe();const P=R.pipe(vi(G=>G.getRedirectResult().then(ee=>ee,()=>null)),Mo,r6({bufferSize:1,refCount:!1})),j=R.pipe(vi(G=>new Bt(ee=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(me=>ee.next(me),me=>ee.error(me),()=>ee.complete()))})))),U=R.pipe(vi(G=>new Bt(ee=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(me=>ee.next(me),me=>ee.error(me),()=>ee.complete()))}))));this.authState=P.pipe(i6(j),fm(o.outsideAngular),Hh(o.insideAngular)),this.user=P.pipe(i6(U),fm(o.outsideAngular),Hh(o.insideAngular)),this.idToken=this.user.pipe(vi(G=>G?sr(G.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(vi(G=>G?sr(G.getIdTokenResult()):ut(null))),this.credential=function ime(...n){const e=NI(n),t=function Pde(n,e){return"number"==typeof tM(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Po(r[0]):mm(t)(sr(r,e)):Rt}(P,w,this.authState.pipe(Bn(G=>!G))).pipe($e(G=>G?.user?G:null),fm(o.outsideAngular),Hh(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Yge.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,R,s,{spy:{apply:(P,j,U)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&U.then(G=>w.next(G))}}})}static \u0275fac=function(r){return new(r||n)(Se(TC),Se(wC,8),Se(wo),Se(Wt),Se(Z5),Se(s6,8),Se(o6,8),Se(a6,8),Se(u6,8),Se(c6,8),Se(l6,8),Se(J5,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ume=(()=>{class n{constructor(){Sc.A.registerVersion("angularfire",EC.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=uu({type:n});static \u0275inj=js({providers:[Pa]})}return n})();function HM(){return Ce((n,e)=>{let t,r=!1;n.subscribe(ke(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function lme(n,e){return n===e}var tf,g6,h6=_t(779),xu=_t(398),Sn=_t(401),f6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p6={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(D,b,C){C||(C=0);var x=Array(16);if("string"==typeof b)for(var N=0;16>N;++N)x[N]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(N=0;16>N;++N)x[N]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;var O=D.g[3],A=(b=D.g[0])+(O^(C=D.g[1])&((N=D.g[2])^O))+x[0]+3614090360&4294967295;A=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=C+(A<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[1]+3905402710&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[2]+606105819&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[3]+3250441966&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[4]+4118548399&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[5]+1200080426&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[6]+2821735955&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[7]+4249261313&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[8]+1770035416&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[9]+2336552879&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[10]+4294925233&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[11]+2304563134&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[12]+1804603682&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[13]+4254626195&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[14]+2792965006&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[15]+1236535329&4294967295)<<22&4294967295|A>>>10))+((A=b+(N^O&(C^N))+x[1]+4129170786&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[6]+3225465664&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[11]+643717713&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[0]+3921069994&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[5]+3593408605&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[10]+38016083&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[15]+3634488961&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[4]+3889429448&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[9]+568446438&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[14]+3275163606&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[3]+4107603335&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[8]+1163531501&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[13]+2850285829&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[2]+4243563512&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[7]+1735328473&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[12]+2368359562&4294967295)<<20&4294967295|A>>>12))+((A=b+(C^N^O)+x[5]+4294588738&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[8]+2272392833&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[11]+1839030562&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[14]+4259657740&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[1]+2763975236&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[4]+1272893353&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[7]+4139469664&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[10]+3200236656&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[13]+681279174&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[0]+3936430074&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[3]+3572445317&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[6]+76029189&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[9]+3654602809&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[12]+3873151461&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[15]+530742520&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[2]+3299628645&4294967295)<<23&4294967295|A>>>9))+((A=b+(N^(C|~O))+x[0]+4096336452&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[7]+1126891415&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[14]+2878612391&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[5]+4237533241&4294967295)<<21&4294967295|A>>>11))+((A=b+(N^(C|~O))+x[12]+1700485571&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[3]+2399980690&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[10]+4293915773&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[1]+2240044497&4294967295)<<21&4294967295|A>>>11))+((A=b+(N^(C|~O))+x[8]+1873313359&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[15]+4264355552&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[6]+2734768916&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[13]+1309151649&4294967295)<<21&4294967295|A>>>11))+((O=(b=C+((A=b+(N^(C|~O))+x[4]+4149444226&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[11]+3174756917&4294967295)<<10&4294967295|A>>>22))^((N=O+((A=N+(b^(O|~C))+x[2]+718787259&4294967295)<<15&4294967295|A>>>17))|~b))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+O&4294967295}function o(D,b){this.h=b;for(var C=[],x=!0,N=D.length-1;0<=N;N--){var O=0|D[N];x&&O==b||(C[N]=O,x=!1)}this.g=C}(function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,N,O){for(var A=Array(arguments.length-2),wi=2;wi<arguments.length;wi++)A[wi-2]=arguments[wi];return b.prototype[N].apply(x,A)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(D,b){void 0===b&&(b=D.length);for(var C=b-this.blockSize,x=this.B,N=this.h,O=0;O<b;){if(0==N)for(;O<=C;)i(this,D,O),O+=this.blockSize;if("string"==typeof D){for(;O<b;)if(x[N++]=D.charCodeAt(O++),N==this.blockSize){i(this,x),N=0;break}}else for(;O<b;)if(x[N++]=D[O++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=255&C,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var x=0;32>x;x+=8)D[C++]=this.g[b]>>>x&255;return D};var a={};function u(D){return-128<=D&&128>D?function s(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}(D,function(b){return new o([0|b],0>b?-1:0)}):new o([0|D],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return P(l(-D));for(var b=[],C=1,x=0;D>=C;x++)b[x]=D/C|0,C*=4294967296;return new o(b,0)}var g=u(0),v=u(1),E=u(16777216);function w(D){if(0!=D.h)return!1;for(var b=0;b<D.g.length;b++)if(0!=D.g[b])return!1;return!0}function R(D){return-1==D.h}function P(D){for(var b=D.g.length,C=[],x=0;x<b;x++)C[x]=~D.g[x];return new o(C,~D.h).add(v)}function j(D,b){return D.add(P(b))}function U(D,b){for(;(65535&D[b])!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function G(D,b){this.g=D,this.h=b}function ee(D,b){if(w(b))throw Error("division by zero");if(w(D))return new G(g,g);if(R(D))return b=ee(P(D),b),new G(P(b.g),P(b.h));if(R(b))return b=ee(D,P(b)),new G(P(b.g),b.h);if(30<D.g.length){if(R(D)||R(b))throw Error("slowDivide_ only works with positive integers.");for(var C=v,x=b;0>=x.l(D);)C=me(C),x=me(x);var N=_e(C,1),O=_e(x,1);for(x=_e(x,2),C=_e(C,2);!w(x);){var A=O.add(x);0>=A.l(D)&&(N=N.add(C),O=A),x=_e(x,1),C=_e(C,1)}return b=j(D,N.j(b)),new G(N,b)}for(N=g;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),x=48>=(x=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,x-48),A=(O=l(C)).j(b);R(A)||0<A.l(D);)A=(O=l(C-=x)).j(b);w(O)&&(O=v),N=N.add(O),D=j(D,A)}return new G(N,D)}function me(D){for(var b=D.g.length+1,C=[],x=0;x<b;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new o(C,D.h)}function _e(D,b){var C=b>>5;b%=32;for(var x=D.g.length-C,N=[],O=0;O<x;O++)N[O]=0<b?D.i(O+C)>>>b|D.i(O+C+1)<<32-b:D.i(O+C);return new o(N,D.h)}(n=o.prototype).m=function(){if(R(this))return-P(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*b,b*=4294967296}return D},n.toString=function(D){if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(R(this))return"-"+P(this).toString(D);for(var b=l(Math.pow(D,6)),C=this,x="";;){var N=ee(C,b).g,O=((0<(C=j(C,N.j(b))).g.length?C.g[0]:C.h)>>>0).toString(D);if(w(C=N))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h},n.l=function(D){return R(D=j(this,D))?-1:w(D)?0:1},n.abs=function(){return R(this)?P(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0,N=0;N<=b;N++){var O=x+(65535&this.i(N))+(65535&D.i(N)),A=(O>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);x=A>>>16,C[N]=(A&=65535)<<16|(O&=65535)}return new o(C,-2147483648&C[C.length-1]?-1:0)},n.j=function(D){if(w(this)||w(D))return g;if(R(this))return R(D)?P(this).j(P(D)):P(P(this).j(D));if(R(D))return P(this.j(P(D)));if(0>this.l(E)&&0>D.l(E))return l(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],x=0;x<2*b;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<D.g.length;N++){var O=this.i(x)>>>16,A=65535&this.i(x),wi=D.i(N)>>>16,Na=65535&D.i(N);C[2*x+2*N]+=A*Na,U(C,2*x+2*N),C[2*x+2*N+1]+=O*Na,U(C,2*x+2*N+1),C[2*x+2*N+1]+=A*wi,U(C,2*x+2*N+1),C[2*x+2*N+2]+=O*wi,U(C,2*x+2*N+2)}for(x=0;x<b;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=b;x<2*b;x++)C[x]=0;return new o(C,0)},n.A=function(D){return ee(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)&D.i(x);return new o(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)|D.i(x);return new o(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)^D.i(x);return new o(C,this.h^D.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g6=p6.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function h(D,b){if(0==D.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==D.charAt(0))return P(h(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(b,8)),x=g,N=0;N<D.length;N+=8){var O=Math.min(8,D.length-N),A=parseInt(D.substring(N,N+O),b);8>O?(O=l(Math.pow(b,O)),x=x.j(O).add(l(A))):x=(x=x.j(C)).add(l(A))}return x},tf=p6.Integer=o}).apply(typeof f6<"u"?f6:typeof self<"u"?self:typeof window<"u"?window:{});var m6,JI,_6,AC,WM,y6,v6,I6,bC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c},r=function t(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof bC&&bC];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}(this);!function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var k=c[I];if(!(k in _))break e;_=_[k]}(p=p(I=_[c=c[c.length-1]]))!=I&&null!=p&&e(_,c,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(c){return c||function(){return function s(c,p){c instanceof String&&(c+="");var _=0,I=!1,k={next:function(){if(!I&&_<c.length){var L=_++;return{value:p(L,c[L]),done:!1}}return I=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}(this,function(p,_){return _})}});var o=o||{},a=this||self;function u(c){var p=typeof c;return"array"==(p="object"!=p?p:c?Array.isArray(c)?"array":p:"null")||"object"==p&&"number"==typeof c.length}function l(c){var p=typeof c;return"object"==p&&null!=c||"function"==p}function h(c,p,_){return c.call.apply(c.bind,arguments)}function g(c,p,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,I),c.apply(p,k)}}return function(){return c.apply(p,arguments)}}function v(c,p,_){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function E(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function w(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,k,L){for(var te=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)te[ct-2]=arguments[ct];return p.prototype[k].apply(I,te)}}function R(c){const p=c.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=c[I];return _}return[]}function P(c,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const k=c.length||0,L=I.length||0;c.length=k+L;for(let te=0;te<L;te++)c[k+te]=I[te]}else c.push(I)}}function U(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var me=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function _e(c,p,_){for(const I in c)p.call(_,c[I],I,c)}function b(c){const p={};for(const _ in c)p[_]=c[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,p){let _,I;for(let k=1;k<arguments.length;k++){for(_ in I=arguments[k],I)c[_]=I[_];for(let L=0;L<C.length;L++)_=C[L],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function N(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function O(c){a.setTimeout(()=>{throw c},0)}function A(){var c=ep;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}var Na=new class j{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new SU,c=>c.reset());class SU{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ka,Oa=!1,ep=new class wi{constructor(){this.h=this.g=null}add(p,_){const I=Na.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}},eT=()=>{const c=a.Promise.resolve(void 0);ka=()=>{c.then(RU)}};var RU=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){O(_)}var p=Na;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}Oa=!1};function ns(){this.s=this.s,this.C=this.C}function yn(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ns.prototype.s=!1,ns.prototype.ma=function(){this.s||(this.s=!0,this.N())},ns.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},yn.prototype.h=function(){this.defaultPrevented=!0};var PU=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return c}();function Va(c,p){if(yn.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(me){e:{try{ee(p.nodeName);var k=!0;break e}catch{}k=!1}k||(p=null)}}else"mouseover"==_?p=c.fromElement:"mouseout"==_&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType="string"==typeof c.pointerType?c.pointerType:xU[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Va.aa.h.call(this)}}w(Va,yn);var xU={2:"touch",3:"pen",4:"mouse"};Va.prototype.h=function(){Va.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),MU=0;function NU(c,p,_,I,k){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=k,this.key=++MU,this.da=this.fa=!1}function il(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sl(c){this.src=c,this.g={},this.h=0}function tp(c,p){var _=p.type;if(_ in c.g){var L,I=c.g[_],k=Array.prototype.indexOf.call(I,p,void 0);(L=0<=k)&&Array.prototype.splice.call(I,k,1),L&&(il(p),0==c.g[_].length&&(delete c.g[_],c.h--))}}function np(c,p,_,I){for(var k=0;k<c.length;++k){var L=c[k];if(!L.da&&L.listener==p&&L.capture==!!_&&L.ha==I)return k}return-1}sl.prototype.add=function(c,p,_,I,k){var L=c.toString();(c=this.g[L])||(c=this.g[L]=[],this.h++);var te=np(c,p,I,k);return-1<te?(p=c[te],_||(p.fa=!1)):((p=new NU(p,this.src,L,!!I,k)).fa=_,c.push(p)),p};var rp="closure_lm_"+(1e6*Math.random()|0),ip={};function tT(c,p,_,I,k){if(I&&I.once)return rT(c,p,_,I,k);if(Array.isArray(p)){for(var L=0;L<p.length;L++)tT(c,p[L],_,I,k);return null}return _=up(_),c&&c[Fa]?c.K(p,_,l(I)?!!I.capture:!!I,k):nT(c,p,_,!1,I,k)}function nT(c,p,_,I,k,L){if(!p)throw Error("Invalid event type");var te=l(k)?!!k.capture:!!k,ct=op(c);if(ct||(c[rp]=ct=new sl(c)),(_=ct.add(p,_,I,te,L)).proxy)return _;if(I=function kU(){const p=OU;return function c(_){return p.call(c.src,c.listener,_)}}(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)PU||(k=te),void 0===k&&(k=!1),c.addEventListener(p.toString(),I,k);else if(c.attachEvent)c.attachEvent(sT(p.toString()),I);else{if(!c.addListener||!c.removeListener)throw Error("addEventListener and attachEvent are unavailable.");c.addListener(I)}return _}function rT(c,p,_,I,k){if(Array.isArray(p)){for(var L=0;L<p.length;L++)rT(c,p[L],_,I,k);return null}return _=up(_),c&&c[Fa]?c.L(p,_,l(I)?!!I.capture:!!I,k):nT(c,p,_,!0,I,k)}function iT(c,p,_,I,k){if(Array.isArray(p))for(var L=0;L<p.length;L++)iT(c,p[L],_,I,k);else I=l(I)?!!I.capture:!!I,_=up(_),c&&c[Fa]?(c=c.i,(p=String(p).toString())in c.g&&-1<(_=np(L=c.g[p],_,I,k))&&(il(L[_]),Array.prototype.splice.call(L,_,1),0==L.length&&(delete c.g[p],c.h--))):c&&(c=op(c))&&(p=c.g[p.toString()],c=-1,p&&(c=np(p,_,I,k)),(_=-1<c?p[c]:null)&&sp(_))}function sp(c){if("number"!=typeof c&&c&&!c.da){var p=c.src;if(p&&p[Fa])tp(p.i,c);else{var _=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(_,I,c.capture):p.detachEvent?p.detachEvent(sT(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=op(p))?(tp(_,c),0==_.h&&(_.src=null,p[rp]=null)):il(c)}}}function sT(c){return c in ip?ip[c]:ip[c]="on"+c}function OU(c,p){if(c.da)c=!0;else{p=new Va(p,this);var _=c.listener,I=c.ha||c.src;c.fa&&sp(c),c=_.call(I,p)}return c}function op(c){return(c=c[rp])instanceof sl?c:null}var ap="__closure_events_fn_"+(1e9*Math.random()>>>0);function up(c){return"function"==typeof c?c:(c[ap]||(c[ap]=function(p){return c.handleEvent(p)}),c[ap])}function vn(){ns.call(this),this.i=new sl(this),this.M=this,this.F=null}function Rn(c,p){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=p.type||p,"string"==typeof p)p=new yn(p,c);else if(p instanceof yn)p.target=p.target||c;else{var k=p;x(p=new yn(I,c),k)}if(k=!0,_)for(var L=_.length-1;0<=L;L--){var te=p.g=_[L];k=ol(te,I,!0,p)&&k}if(k=ol(te=p.g=c,I,!0,p)&&k,k=ol(te,I,!1,p)&&k,_)for(L=0;L<_.length;L++)k=ol(te=p.g=_[L],I,!1,p)&&k}function ol(c,p,_,I){if(!(p=c.i.g[String(p)]))return!0;p=p.concat();for(var k=!0,L=0;L<p.length;++L){var te=p[L];if(te&&!te.da&&te.capture==_){var ct=te.listener,ln=te.ha||te.src;te.fa&&tp(c.i,te),k=!1!==ct.call(ln,I)&&k}}return k&&!I.defaultPrevented}function oT(c,p,_){if("function"==typeof c)_&&(c=v(c,_));else{if(!c||"function"!=typeof c.handleEvent)throw Error("Invalid listener argument");c=v(c.handleEvent,c)}return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function aT(c){c.g=oT(()=>{c.g=null,c.i&&(c.i=!1,aT(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}w(vn,ns),vn.prototype[Fa]=!0,vn.prototype.removeEventListener=function(c,p,_,I){iT(this,c,p,_,I)},vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var p,c=this.i;for(p in c.g){for(var _=c.g[p],I=0;I<_.length;I++)il(_[I]);delete c.g[p],c.h--}}this.F=null},vn.prototype.K=function(c,p,_,I){return this.i.add(String(c),p,!1,_,I)},vn.prototype.L=function(c,p,_,I){return this.i.add(String(c),p,!0,_,I)};class VU extends ns{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:aT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(c){ns.call(this),this.h=c,this.g={}}w(La,ns);var uT=[];function cT(c){_e(c.g,function(p,_){this.g.hasOwnProperty(_)&&sp(p)},c),c.g={}}La.prototype.N=function(){La.aa.N.call(this),cT(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cp=a.JSON.stringify,FU=a.JSON.parse,LU=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function lp(){}function dT(){}lp.prototype.h=null;var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dp(){yn.call(this,"d")}function hp(){yn.call(this,"c")}w(dp,yn),w(hp,yn);var Os={},hT=null;function al(){return hT=hT||new vn}function fT(c){yn.call(this,Os.La,c)}function Ba(c){const p=al();Rn(p,new fT(p))}function pT(c,p){yn.call(this,Os.STAT_EVENT,c),this.stat=p}function Pn(c){const p=al();Rn(p,new pT(p,c))}function gT(c,p){yn.call(this,Os.Ma,c),this.size=p}function ja(c,p){if("function"!=typeof c)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function za(){this.g=!0}function Lo(c,p,_,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+function zU(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_)for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var k=I[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if("noop"!=L&&"stop"!=L&&"close"!=L)for(var te=1;te<k.length;te++)k[te]=""}}}return cp(_)}catch{return p}}(c,_)+(I?" "+I:"")})}Os.La="serverreachability",w(fT,yn),Os.STAT_EVENT="statevent",w(pT,yn),Os.Ma="timingevent",w(gT,yn),za.prototype.xa=function(){this.g=!1},za.prototype.info=function(){};var fp,ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cl(){}function rs(c,p,_,I){this.j=c,this.i=p,this.l=_,this.R=I||1,this.U=new La(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _T}function _T(){this.i=null,this.g="",this.h=!1}w(cl,lp),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},fp=new cl;var yT={},pp={};function gp(c,p,_){c.L=1,c.v=fl(bi(p)),c.m=_,c.P=!0,vT(c,null)}function vT(c,p){c.F=Date.now(),ll(c),c.A=bi(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),NT(_.i,"t",I),c.C=0,_=c.j.J,c.h=new _T,c.g=JT(c.j,_?p:null,!c.m),0<c.O&&(c.M=new VU(v(c.Y,c,c.g),c.O)),p=c.U,_=c.g,I=c.ca;var k="readystatechange";Array.isArray(k)||(k&&(uT[0]=k.toString()),k=uT);for(var L=0;L<k.length;L++){var te=tT(_,k[L],I||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Ba(),function UU(c,p,_,I,k,L){c.info(function(){if(c.g)if(L)for(var te="",ct=L.split("&"),ln=0;ln<ct.length;ln++){var Xe=ct[ln].split("=");if(1<Xe.length){var In=Xe[0];Xe=Xe[1];var En=In.split("_");te=2<=En.length&&"type"==En[1]?te+(In+"=")+Xe+"&":te+(In+"=redacted&")}}else te=null;else te=L;return"XMLHTTP REQ ("+I+") [attempt "+k+"]: "+p+"\n"+_+"\n"+te})}(c.i,c.u,c.A,c.l,c.R,c.m)}function IT(c){return!!c.g&&"GET"==c.u&&2!=c.L&&c.j.Ca}function $U(c,p){var _=c.C,I=p.indexOf("\n",_);return-1==I?pp:(_=Number(p.substring(_,I)),isNaN(_)?yT:(I+=1)+_>p.length?pp:(p=p.slice(I,I+_),c.C=I+_,p))}function ll(c){c.S=Date.now()+c.I,ET(c,c.I)}function ET(c,p){if(null!=c.B)throw Error("WatchDog timer not null");c.B=ja(v(c.ba,c),p)}function mp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}function $a(c){0==c.j.G||c.J||WT(c.j,c)}function Vs(c){mp(c);var p=c.M;p&&"function"==typeof p.ma&&p.ma(),c.M=null,cT(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function _p(c,p){try{var _=c.j;if(0!=_.G&&(_.g==c||yp(_.h,c)))if(!c.K&&yp(_.h,c)&&3==_.G){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&3==I.length){var k=I;if(0==k[0]){e:if(!_.u){if(_.g){if(!(_.g.F+3e3<c.F))break e;yl(_),ml(_)}Tp(_),Pn(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&0==_.v&&!_.C&&(_.C=ja(v(_.Za,_),6e3));if(1>=bT(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ls(_,11)}else if((c.K||_.g==c)&&yl(_),!U(p))for(k=_.Da.g.parse(p),p=0;p<k.length;p++){let Xe=k[p];if(_.T=Xe[0],Xe=Xe[1],2==_.G)if("c"==Xe[0]){_.K=Xe[1],_.ia=Xe[2];const In=Xe[3];null!=In&&(_.la=In,_.j.info("VER="+_.la));const En=Xe[4];null!=En&&(_.Aa=En,_.j.info("SVER="+_.Aa));const jo=Xe[5];null!=jo&&"number"==typeof jo&&0<jo&&(_.L=I=1.5*jo,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const xr=c.g;if(xr){const Il=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var L=I.h;L.g||-1==Il.indexOf("spdy")&&-1==Il.indexOf("quic")&&-1==Il.indexOf("h2")||(L.j=L.l,L.g=new Set,L.h&&(vp(L,L.h),L.h=null))}if(I.D){const bp=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;bp&&(I.ya=bp,ft(I.I,I.D,bp))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms"));var te=c;if((I=_).qa=YT(I,I.J?I.ia:null,I.W),te.K){AT(I.h,te);var ct=te,ln=I.L;ln&&(ct.I=ln),ct.B&&(mp(ct),ll(ct)),I.g=te}else GT(I);0<_.i.length&&_l(_)}else"stop"!=Xe[0]&&"close"!=Xe[0]||Ls(_,7);else 3==_.G&&("stop"==Xe[0]||"close"==Xe[0]?"stop"==Xe[0]?Ls(_,7):Ep(_):"noop"!=Xe[0]&&_.l&&_.l.ta(Xe),_.v=0)}Ba()}catch{}}rs.prototype.ca=function(c){c=c.target;const p=this.M;p&&3==Ai(c)?p.j():this.Y(c)},rs.prototype.Y=function(c){try{if(c==this.g)e:{const En=Ai(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>En)&&(3!=En||this.g&&(this.h.h||this.g.oa()||BT(this.g)))){this.J||4!=En||7==p||Ba(),mp(this);var _=this.g.Z();this.X=_;t:if(IT(this)){var I=BT(this.g);c="";var k=I.length,L=4==Ai(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),$a(this);var te="";break t}this.h.i=new a.TextDecoder}for(p=0;p<k;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(L&&p==k-1)});I.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=200==_,function BU(c,p,_,I,k,L,te){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+k+"]: "+p+"\n"+_+"\n"+L+" "+te})}(this.i,this.u,this.A,this.l,this.R,En,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,ln=this.g;if((ct=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(ct)){var Xe=ct;break t}}Xe=null}if(!(_=Xe)){this.o=!1,this.s=3,Pn(12),Vs(this),$a(this);break e}Lo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_p(this,_)}if(this.P){let xr;for(_=!0;!this.J&&this.C<te.length;){if(xr=$U(this,te),xr==pp){4==En&&(this.s=4,Pn(14),_=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}if(xr==yT){this.s=4,Pn(15),Lo(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}Lo(this.i,this.l,xr,null),_p(this,xr)}if(IT(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=En||0!=te.length||this.h.h||(this.s=1,Pn(16),_=!1),this.o=this.o&&_,_){if(0<te.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),wp(In),In.M=!0,Pn(11))}}else Lo(this.i,this.l,te,"[Invalid Chunked Response]"),Vs(this),$a(this)}else Lo(this.i,this.l,te,null),_p(this,te);4==En&&Vs(this),this.o&&!this.J&&(4==En?WT(this.j,this):(this.o=!1,ll(this)))}else(function oB(c){const p={};c=(c.g&&2<=Ai(c)&&c.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<c.length;I++){if(U(c[I]))continue;var _=N(c[I]);const k=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();const L=p[k]||[];p[k]=L,L.push(_)}!function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}(p,function(I){return I.join(", ")})})(this.g),400==_&&0<te.indexOf("Unknown SID")?(this.s=3,Pn(12)):(this.s=0,Pn(13)),Vs(this),$a(this)}}}catch{}},rs.prototype.cancel=function(){this.J=!0,Vs(this)},rs.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(function jU(c,p){c.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(Ba(),Pn(17)),Vs(this),this.s=2,$a(this)):ET(this,this.S-c)};var qU=class{constructor(c,p){this.g=c,this.map=p}};function TT(c){this.l=c||10,c=a.PerformanceNavigationTiming?0<(c=a.performance.getEntriesByType("navigation")).length&&("hq"==c[0].nextHopProtocol||"h2"==c[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wT(c){return!!c.h||!!c.g&&c.g.size>=c.j}function bT(c){return c.h?1:c.g?c.g.size:0}function yp(c,p){return c.h?c.h==p:!!c.g&&c.g.has(p)}function vp(c,p){c.g?c.g.add(p):c.h=p}function AT(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}function CT(c){if(null!=c.h)return c.i.concat(c.h.D);if(null!=c.g&&0!==c.g.size){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return R(c.i)}function DT(c,p){if(c.forEach&&"function"==typeof c.forEach)c.forEach(p,void 0);else if(u(c)||"string"==typeof c)Array.prototype.forEach.call(c,p,void 0);else for(var _=function HU(c){if(c.na&&"function"==typeof c.na)return c.na();if(!c.V||"function"!=typeof c.V){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||"string"==typeof c){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const I in c)p[_++]=I;return p}}}(c),I=function GU(c){if(c.V&&"function"==typeof c.V)return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if("string"==typeof c)return c.split("");if(u(c)){for(var p=[],_=c.length,I=0;I<_;I++)p.push(c[I]);return p}for(I in p=[],_=0,c)p[_++]=c[I];return p}(c),k=I.length,L=0;L<k;L++)p.call(void 0,I[L],_&&_[L],c)}TT.prototype.cancel=function(){if(this.i=CT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const c of this.g.values())c.cancel();this.g.clear()}};var ST=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fs){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var p=c.i,_=new Ha;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),RT(this,_),this.m=c.m}else c&&(p=String(c).match(ST))?(this.h=!1,dl(this,p[1]||"",!0),this.o=qa(p[2]||""),this.g=qa(p[3]||"",!0),hl(this,p[4]),this.l=qa(p[5]||"",!0),RT(this,p[6]||"",!0),this.m=qa(p[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}function bi(c){return new Fs(c)}function dl(c,p,_){c.j=_?qa(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function RT(c,p,_){p instanceof Ha?(c.i=p,function ZU(c,p){p&&!c.j&&(is(c),c.i=null,c.g.forEach(function(_,I){var k=I.toLowerCase();I!=k&&(xT(this,I),NT(this,k,_))},c)),c.j=p}(c.i,c.h)):(_||(p=Ga(p,JU)),c.i=new Ha(p,c.h))}function ft(c,p,_){c.i.set(p,_)}function fl(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qa(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ga(c,p,_){return"string"==typeof c?(c=encodeURI(c).replace(p,KU),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function KU(c){return"%"+((c=c.charCodeAt(0))>>4&15).toString(16)+(15&c).toString(16)}Fs.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ga(p,PT,!0),":");var _=this.g;return(_||"file"==p)&&(c.push("//"),(p=this.o)&&c.push(Ga(p,PT,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.s)&&c.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&c.push("/"),c.push(Ga(_,"/"==_.charAt(0)?YU:QU,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ga(_,XU)),c.join("")};var PT=/[#\/\?@]/g,QU=/[#\?:]/g,YU=/[#\?]/g,JU=/[#\?@]/g,XU=/#/g;function Ha(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function is(c){c.g||(c.g=new Map,c.h=0,c.i&&function WU(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),k=null;if(0<=I){var L=c[_].substring(0,I);k=c[_].substring(I+1)}else L=c[_];p(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}function xT(c,p){is(c),p=Uo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function MT(c,p){return is(c),p=Uo(c,p),c.g.has(p)}function NT(c,p,_){xT(c,p),0<_.length&&(c.i=null,c.g.set(Uo(c,p),R(_)),c.h+=_.length)}function Uo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function ss(c,p,_,I,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),I(_)}catch{}}function nB(){this.g=new LU}function rB(c,p,_){const I=_||"";try{DT(c,function(k,L){let te=k;l(k)&&(te=cp(k)),p.push(I+L+"="+encodeURIComponent(te))})}catch(k){throw p.push(I+"type="+encodeURIComponent("_badmap")),k}}function Wa(c){this.l=c.Ub||null,this.j=c.eb||!1}function pl(c,p){vn.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function kT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}function Ka(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qa(c)}function Qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}function OT(c){let p="";return _e(c,function(_,I){p+=I,p+=":",p+=_,p+="\r\n"}),p}function Ip(c,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=OT(_),"string"==typeof c?null!=_&&encodeURIComponent(String(_)):ft(c,p,_))}function Ct(c){vn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ha.prototype).add=function(c,p){is(this),this.i=null,c=Uo(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this},n.forEach=function(c,p){is(this),this.g.forEach(function(_,I){_.forEach(function(k){c.call(p,k,I,this)},this)},this)},n.na=function(){is(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const k=c[I];for(let L=0;L<k.length;L++)_.push(p[I])}return _},n.V=function(c){is(this);let p=[];if("string"==typeof c)MT(this,c)&&(p=p.concat(this.g.get(Uo(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return is(this),this.i=null,MT(this,c=Uo(this,c))&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c&&0<(c=this.V(c)).length?String(c[0]):p},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const L=encodeURIComponent(String(I)),te=this.V(I);for(I=0;I<te.length;I++){var k=L;""!==te[I]&&(k+="="+encodeURIComponent(String(te[I]))),c.push(k)}}return this.i=c.join("&")},w(Wa,lp),Wa.prototype.g=function(){return new pl(this.l,this.j)},Wa.prototype.i=function(c){return function(){return c}}({}),w(pl,vn),(n=pl.prototype).open=function(c,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Qa(this)},n.send=function(c){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ka(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if("arraybuffer"===this.responseType)c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ka(this):Qa(this),3==this.readyState&&kT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ka(this))},n.Qa=function(c){this.g&&(this.response=c,Ka(this))},n.ga=function(){this.g&&Ka(this)},n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)c.push((_=_.value)[0]+": "+_[1]),_=p.next();return c.join("\r\n")},Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(c){this.m=c?"include":"same-origin"}}),w(Ct,vn);var iB=/^https?$/i,sB=["POST","PUT"];function VT(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,FT(c),gl(c)}function FT(c){c.A||(c.A=!0,Rn(c,"complete"),Rn(c,"error"))}function LT(c){if(c.h&&typeof o<"u"&&(!c.v[1]||4!=Ai(c)||2!=c.Z()))if(c.u&&4==Ai(c))oT(c.Ea,0,c);else if(Rn(c,"readystatechange"),4==Ai(c)){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=0===te){var k=String(c.D).match(ST)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),I=!iB.test(k?k.toLowerCase():"")}_=I}if(_)Rn(c,"complete"),Rn(c,"success");else{c.m=6;try{var L=2<Ai(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",FT(c)}}finally{gl(c)}}}function gl(c,p){if(c.g){UT(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Rn(c,"ready");try{_.onreadystatechange=I}catch{}}}function UT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}function Ai(c){return c.g?c.g.readyState:0}function BT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function jT(c){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,c),this.cb=Ya("retryDelaySeedMs",1e4,c),this.Wa=Ya("forwardChannelMaxRetries",2,c),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new TT(c&&c.concurrentRequestLimit),this.Da=new nB,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ep(c){if(zT(c),3==c.G){var p=c.U++,_=bi(c.I);if(ft(_,"SID",c.K),ft(_,"RID",p),ft(_,"TYPE","terminate"),Ja(c,_),(p=new rs(c,c.j,p)).L=2,p.v=fl(bi(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&((new Image).src=p.v,_=!0),_||(p.g=JT(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ll(p)}QT(c)}function ml(c){c.g&&(wp(c),c.g.cancel(),c.g=null)}function zT(c){ml(c),c.u&&(a.clearTimeout(c.u),c.u=null),yl(c),c.h.cancel(),c.s&&("number"==typeof c.s&&a.clearTimeout(c.s),c.s=null)}function _l(c){if(!wT(c.h)&&!c.s){c.s=!0;var p=c.Ga;ka||eT(),Oa||(ka(),Oa=!0),ep.add(p,c),c.B=0}}function $T(c,p){var _;_=p?p.l:c.U++;const I=bi(c.I);ft(I,"SID",c.K),ft(I,"RID",_),ft(I,"AID",c.T),Ja(c,I),c.m&&c.o&&Ip(I,c.m,c.o),_=new rs(c,c.j,_,c.B+1),null===c.m&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=qT(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vp(c.h,_),gp(_,I,p)}function Ja(c,p){c.H&&_e(c.H,function(_,I){ft(p,I,_)}),c.l&&DT({},function(_,I){ft(p,I,_)})}function qT(c,p,_){_=Math.min(c.i.length,_);var I=c.l?v(c.l.Na,c.l,c):null;e:{var k=c.i;let L=-1;for(;;){const te=["count="+_];-1==L?0<_?(L=k[0].g,te.push("ofs="+L)):L=0:te.push("ofs="+L);let ct=!0;for(let ln=0;ln<_;ln++){let Xe=k[ln].g;const In=k[ln].map;if(Xe-=L,0>Xe)L=Math.max(0,k[ln].g-100),ct=!1;else try{rB(In,te,"req"+Xe+"_")}catch{I&&I(In)}}if(ct){I=te.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,I}function GT(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ka||eT(),Oa||(ka(),Oa=!0),ep.add(p,c),c.v=0}}function Tp(c){return!(c.g||c.u||3<=c.v||(c.Y++,c.u=ja(v(c.Fa,c),KT(c,c.v)),c.v++,0))}function wp(c){null!=c.A&&(a.clearTimeout(c.A),c.A=null)}function HT(c){c.g=new rs(c,c.j,"rpc",c.Y),null===c.m&&(c.g.H=c.o),c.g.O=0;var p=bi(c.qa);ft(p,"RID","rpc"),ft(p,"SID",c.K),ft(p,"AID",c.T),ft(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(p,"TO",c.ja),ft(p,"TYPE","xmlhttp"),Ja(c,p),c.m&&c.o&&Ip(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=fl(bi(p)),_.m=null,_.P=!0,vT(_,c)}function yl(c){null!=c.C&&(a.clearTimeout(c.C),c.C=null)}function WT(c,p){var _=null;if(c.g==p){yl(c),wp(c),c.g=null;var I=2}else{if(!yp(c.h,p))return;_=p.D,AT(c.h,p),I=1}if(0!=c.G)if(p.o)if(1==I){_=p.m?p.m.length:0,p=Date.now()-p.F;var k=c.B;Rn(I=al(),new gT(I,_)),_l(c)}else GT(c);else if(3==(k=p.s)||0==k&&0<p.X||!(1==I&&function aB(c,p){return!(bT(c.h)>=c.h.j-(c.s?1:0)||(c.s?(c.i=p.D.concat(c.i),0):1==c.G||2==c.G||c.B>=(c.Va?0:c.Wa)||(c.s=ja(v(c.Ga,c,p),KT(c,c.B)),c.B++,0)))}(c,p)||2==I&&Tp(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),k){case 1:Ls(c,5);break;case 4:Ls(c,10);break;case 3:Ls(c,6);break;default:Ls(c,2)}}function KT(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Ls(c,p){if(c.j.info("Error code "+p),2==p){var _=v(c.fb,c),I=c.Xa;const k=!I;I=new Fs(I||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dl(I,"https"),fl(I),k?function eB(c,p){const _=new za;if(a.Image){const I=new Image;I.onload=E(ss,_,"TestLoadImage: loaded",!0,p,I),I.onerror=E(ss,_,"TestLoadImage: error",!1,p,I),I.onabort=E(ss,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(ss,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}(I.toString(),_):function tB(c,p){new za;const I=new AbortController,k=setTimeout(()=>{I.abort(),ss(0,0,!1,p)},1e4);fetch(c,{signal:I.signal}).then(L=>{clearTimeout(k),ss(0,0,!!L.ok,p)}).catch(()=>{clearTimeout(k),ss(0,0,!1,p)})}(I.toString(),_)}else Pn(2);c.G=0,c.l&&c.l.sa(p),QT(c),zT(c)}function QT(c){if(c.G=0,c.ka=[],c.l){const p=CT(c.h);(0!=p.length||0!=c.i.length)&&(P(c.ka,p),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function YT(c,p,_){var I=_ instanceof Fs?bi(_):new Fs(_);if(""!=I.g)p&&(I.g=p+"."+I.g),hl(I,I.s);else{var k=a.location;I=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;var L=new Fs(null);I&&dl(L,I),p&&(L.g=p),k&&hl(L,k),_&&(L.l=_),I=L}return p=c.ya,(_=c.D)&&p&&ft(I,_,p),ft(I,"VER",c.la),Ja(c,I),I}function JT(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Ct(c.Ca&&!c.pa?new Wa({eb:_}):c.pa)).Ha(c.J),p}function XT(){}function vl(){}function Xn(c,p){vn.call(this),this.g=new jT(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!U(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!U(p)&&(this.g.D=p,null!==(c=this.h)&&p in c&&p in(c=this.h)&&delete c[p]),this.j=new Bo(this)}function ZT(c){dp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=null!==p&&c in p?p[c]:void 0),this.data=p}else this.data=c}function ew(){hp.call(this),this.status=1}function Bo(c){this.g=c}(n=Ct.prototype).Ha=function(c){this.J=c},n.ea=function(c,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fp.g(),this.v=function lT(c){return c.h||(c.h=c.i())}(this.o?this.o:fp),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(L){return void VT(this,L)}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var k in I)_.set(k,I[k]);else{if("function"!=typeof I.keys||"function"!=typeof I.get)throw Error("Unknown input type for opt_headers: "+String(I));for(const L of I.keys())_.set(L,I.get(L))}I=Array.from(_.keys()).find(L=>"content-type"==L.toLowerCase()),k=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sB,p,void 0))||I||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,te]of _)this.g.setRequestHeader(L,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UT(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){VT(this,L)}},n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rn(this,"complete"),Rn(this,"abort"),gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?LT(this):this.bb())},n.bb=function(){LT(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&0==p.indexOf(c)&&(p=p.substring(c.length)),FU(p)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=jT.prototype).la=8,n.G=1,n.connect=function(c,p,_,I){Pn(0),this.W=c,this.H=p||{},_&&void 0!==I&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=YT(this,null,this.W),_l(this)},n.Ga=function(c){if(this.s)if(this.s=null,1==this.G){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const k=new rs(this,this.j,c);let L=this.o;if(this.S&&(L?(L=b(L),x(L,this.S)):L=this.S),null!==this.m||this.O||(k.H=L,L=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){var I=this.i[_];if(void 0===(I="__data__"in I.map&&"string"==typeof(I=I.map.__data__)?I.length:void 0))break;if(4096<(p+=I)){p=_;break e}if(4096===p||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=qT(this,k,p),ft(_=bi(this.I),"RID",c),ft(_,"CVER",22),this.D&&ft(_,"X-HTTP-Session-Id",this.D),Ja(this,_),L&&(this.O?p="headers="+encodeURIComponent(String(OT(L)))+"&"+p:this.m&&Ip(_,this.m,L)),vp(this.h,k),this.Ua&&ft(_,"TYPE","init"),this.P?(ft(_,"$req",p),ft(_,"SID","null"),k.T=!0,gp(k,_,null)):gp(k,_,p),this.G=2}}else 3==this.G&&(c?$T(this,c):0==this.i.length||wT(this.h)||$T(this))},n.Fa=function(){if(this.u=null,HT(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ja(v(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pn(10),ml(this),HT(this))},n.Za=function(){null!=this.C&&(this.C=null,ml(this),Tp(this),Pn(19))},n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Pn(2)):(this.j.info("Failed to ping google.com"),Pn(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=XT.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},vl.prototype.g=function(c,p){return new Xn(c,p)},w(Xn,vn),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Ep(this.g)},Xn.prototype.o=function(c){var p=this.g;if("string"==typeof c){var _={};_.__data__=c,c=_}else this.u&&((_={}).__data__=cp(c),c=_);p.i.push(new qU(p.Ya++,c)),3==p.G&&_l(p)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Ep(this.g),delete this.g,Xn.aa.N.call(this)},w(ZT,dp),w(ew,hp),w(Bo,XT),Bo.prototype.ua=function(){Rn(this.g,"a")},Bo.prototype.ta=function(c){Rn(this.g,new ZT(c))},Bo.prototype.sa=function(c){Rn(this.g,new ew)},Bo.prototype.ra=function(){Rn(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,I6=Rc.createWebChannelTransport=function(){return new vl},v6=Rc.getStatEventTarget=function(){return al()},y6=Rc.Event=Os,WM=Rc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,AC=Rc.ErrorCode=ul,mT.COMPLETE="complete",_6=Rc.EventType=mT,dT.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",vn.prototype.listen=vn.prototype.K,JI=Rc.WebChannel=dT,Rc.FetchXmlHttpFactory=Wa,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,m6=Rc.XhrIo=Ct}).apply(typeof bC<"u"?bC:typeof self<"u"?self:typeof window<"u"?window:{});const E6="@firebase/firestore";class ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");let xm="10.14.0";const dd=new xu.Vy("@firebase/firestore");function Mm(){return dd.logLevel}function Ie(n,...e){if(dd.logLevel<=xu.$b.DEBUG){const t=e.map(KM);dd.debug(`Firestore (${xm}): ${n}`,...t)}}function Yr(n,...e){if(dd.logLevel<=xu.$b.ERROR){const t=e.map(KM);dd.error(`Firestore (${xm}): ${n}`,...t)}}function No(n,...e){if(dd.logLevel<=xu.$b.WARN){const t=e.map(KM);dd.warn(`Firestore (${xm}): ${n}`,...t)}}function KM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function We(n="Unexpected state"){const e=`FIRESTORE (${xm}) INTERNAL ASSERTION FAILED: `+n;throw Yr(e),new Error(e)}function et(n,e){n||We()}function Oe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Sn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class T6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pme{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ki.UNAUTHENTICATED))}shutdown(){}}class gme{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mme{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;et(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,M.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et("string"==typeof r.accessToken),new T6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(null===e||"string"==typeof e),new ki(e)}}class _me{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ki.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yme{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _me(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vme{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){et(void 0===this.o);const r=s=>{null!=s.error&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et("string"==typeof t.token),this.R=t.token,new w6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ime(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class b6{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Ime(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function wt(n,e){return n<e?-1:n>e?1:0}function Nm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function A6(n){return n+"\0"}class Tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wt(this.nanoseconds,e.nanoseconds):wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Tr(0,0))}static max(){return new rt(new Tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class XI{constructor(e,t,r){void 0===t?t=0:t>e.length&&We(),void 0===r?r=e.length-t:r>e.length-t&&We(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===XI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof XI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends XI{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const Eme=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gr extends XI{construct(e,t,r){return new gr(e,t,r)}static isValidIdentifier(e){return Eme.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gr(t)}static emptyPath(){return new gr([])}}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Xt.fromString(e))}static fromName(e){return new Fe(Xt.fromString(e).popFirst(5))}static empty(){return new Fe(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Xt(e.slice()))}}class km{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function QM(n){return n.fields.find(e=>2===e.kind)}function nf(n){return n.fields.filter(e=>2!==e.kind)}km.UNKNOWN_ID=-1;class rf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Om{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Om(0,ko.min())}}function C6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(1e9===r?new Tr(t+1,0):new Tr(t,r));return new ko(i,Fe.empty(),e)}function D6(n){return new ko(n.readTime,n.key,-1)}class ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ko(rt.min(),Fe.empty(),-1)}static max(){return new ko(rt.max(),Fe.empty(),-1)}}function YM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fe.comparator(n.documentKey,e.documentKey),0!==t?t:wt(n.largestBatchId,e.largestBatchId))}const S6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hd(n){return JM.apply(this,arguments)}function JM(){return(JM=(0,M.A)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==S6)throw n;Ie("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class CC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Oi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ZI(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=XM(r.target.error);this.V.reject(new ZI(e,i))}}static open(e,t,r,i){try{return new CC(t,e.transaction(i,r))}catch(s){throw new ZI(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ame(t)}}class Mu{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Mu.S((0,Sn.ZQ)())&&Yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ie("SimpleDb","Removing database:",e),sf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Sn.zW)())return!1;if(Mu.v())return!0;const e=(0,Sn.ZQ)(),t=Mu.S(e),r=0<t&&t<10,i=P6(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,M.A)(function*(){return t.db||(Ie("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new ZI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ve(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ve(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new ZI(e,a))},s.onupgradeneeded=o=>{Ie("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ie("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,M.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=CC.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),J.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(Ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function P6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bme{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return sf(this.B.delete())}}class ZI extends ve{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fd(n){return"IndexedDbTransactionError"===n.name}class Ame{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sf(r)}add(e){return Ie("SimpleDb","ADD",this.store.name,e,e),sf(this.store.add(e))}get(e){return sf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ie("SimpleDb","DELETE",this.store.name,e),sf(this.store.delete(e))}count(){return Ie("SimpleDb","COUNT",this.store.name),sf(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new J((r,i)=>{t.onerror=s=>{const o=XM(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new bme(a),l=t(a.primaryKey,a.value,u);if(l instanceof J){const h=l.catch(g=>(u.done(),J.reject(g)));r.push(h)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sf(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=XM(r.target.error);t(i)}})}let x6=!1;function XM(n){const e=Mu.S((0,Sn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x6||(x6=!0,setTimeout(()=>{throw r},0)),r}}return n}class Cme{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,M.A)(function*(){t.task=null;try{Ie("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){fd(r)?Ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield hd(r)}yield t.X(6e4)}))}}class Dme{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,M.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return J.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ie("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=D6(s);YM(o,r)>0&&(r=o)}),new ko(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Oo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function eE(n){return null==n}function tE(n){return 0===n&&1/n==-1/0}function M6(n){return"number"==typeof n&&Number.isInteger(n)&&!tE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=N6(e)),e=Sme(n.get(t),e);return N6(e)}function Sme(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function N6(n){return n+"\x01\x01"}function Nu(n){const e=n.length;if(et(e>=2),2===e)return et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&We(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:We()}s=o+2}return new Xt(r)}const k6=["userId","batchId"];function DC(n,e){return[n,fs(e)]}function O6(n,e,t){return[n,fs(e),t]}const Rme={},Pme=["prefixPath","collectionGroup","readTime","documentId"],xme=["prefixPath","collectionGroup","documentId"],Mme=["collectionGroup","readTime","prefixPath","documentId"],Nme=["canonicalId","targetId"],kme=["targetId","path"],Ome=["path","targetId"],Vme=["collectionId","parent"],Fme=["indexId","uid"],Lme=["uid","sequenceNumber"],Ume=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bme=["indexId","uid","orderedDocumentKey"],jme=["userId","collectionPath","documentId"],zme=["userId","collectionPath","largestBatchId"],$me=["userId","collectionGroup","largestBatchId"],V6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qme=[...V6,"documentOverlays"],F6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L6=F6,ZM=[...L6,"indexConfiguration","indexState","indexEntries"],Gme=ZM,Hme=[...ZM,"globals"];class eN extends R6{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=Oe(n);return Mu.F(t._e,e)}function U6(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function j6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class or{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SC(this.root,e,this.comparator,!1)}getReverseIterator(){return new SC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SC(this.root,e,this.comparator,!0)}}class SC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yi.RED,this.left=i??Yi.EMPTY,this.right=s??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw We();const e=this.left.check();if(e!==this.right.check())throw We();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw We()}get value(){throw We()}get color(){throw We()}get left(){throw We()}get right(){throw We()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z6(this.data.getIterator())}getIteratorFrom(e){return new z6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class z6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vm(n){return n.hasNext()?n.getNext():void 0}class to{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new to([])}unionWith(e){let t=new $n(gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new to(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $6("Invalid base64 string: "+s):s}}(e);return new Fr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const Kme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pc(n){if(et(!!n),"string"==typeof n){let e=0;const t=Kme.exec(n);if(et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wr(n.seconds),nanos:wr(n.nanos)}}function wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xc(n){return"string"==typeof n?Fr.fromBase64String(n):Fr.fromUint8Array(n)}function RC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PC(n){const e=n.mapValue.fields.__previous_value__;return RC(e)?PC(e):e}function nE(n){const e=Pc(n.mapValue.fields.__local_write_time__.timestampValue);return new Tr(e.seconds,e.nanos)}class Qme{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class gd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gd&&e.projectId===this.projectId&&e.database===this.database}}const md={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xC={nullValue:"NULL_VALUE"};function _d(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RC(n)?4:K6(n)?9007199254740991:kC(n)?10:11:We()}function ku(n,e){if(n===e)return!0;const t=_d(n);if(t!==_d(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nE(n).isEqual(nE(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Pc(i.timestampValue),a=Pc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,xc(n.bytesValue).isEqual(xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return wr(i.geoPointValue.latitude)===wr(s.geoPointValue.latitude)&&wr(i.geoPointValue.longitude)===wr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wr(i.integerValue)===wr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wr(i.doubleValue),a=wr(s.doubleValue);return o===a?tE(o)===tE(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Nm(n.arrayValue.values||[],e.arrayValue.values||[],ku);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(U6(o)!==U6(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!ku(o[u],a[u])))return!1;return!0}(n,e);default:return We()}var s}function rE(n,e){return void 0!==(n.values||[]).find(t=>ku(t,e))}function yd(n,e){if(n===e)return 0;const t=_d(n),r=_d(e);if(t!==r)return wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return wt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wr(s.integerValue||s.doubleValue),u=wr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return q6(n.timestampValue,e.timestampValue);case 4:return q6(nE(n),nE(e));case 5:return wt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=xc(s),u=xc(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=wt(a[l],u[l]);if(0!==h)return h}return wt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=wt(wr(s.latitude),wr(o.latitude));return 0!==a?a:wt(wr(s.longitude),wr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return G6(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,w=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,R=wt((null===(l=E?.values)||void 0===l?void 0:l.length)||0,(null===(h=w?.values)||void 0===h?void 0:h.length)||0);return 0!==R?R:G6(E,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===md.mapValue&&o===md.mapValue)return 0;if(s===md.mapValue)return 1;if(o===md.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const v=wt(u[g],h[g]);if(0!==v)return v;const E=yd(a[u[g]],l[h[g]]);if(0!==E)return E}return wt(u.length,h.length)}(n.mapValue,e.mapValue);default:throw We()}}function q6(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return wt(n,e);const t=Pc(n),r=Pc(e),i=wt(t.seconds,r.seconds);return 0!==i?i:wt(t.nanos,r.nanos)}function G6(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=yd(t[i],r[i]);if(s)return s}return wt(t.length,r.length)}function Fm(n){return tN(n)}function tN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Pc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xc(n.bytesValue).toBase64():"referenceValue"in n?Fe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=tN(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${tN(t.fields[o])}`;return i+"}"}(n.mapValue):We()}function af(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nN(n){return!!n&&"integerValue"in n}function iE(n){return!!n&&"arrayValue"in n}function H6(n){return!!n&&"nullValue"in n}function W6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function NC(n){return!!n&&"mapValue"in n}function kC(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K6(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const Q6={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Yme(n){return"nullValue"in n?xC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?af(gd.empty(),Fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?kC(n)?Q6:{mapValue:{}}:We()}function Jme(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?af(gd.empty(),Fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Q6:"mapValue"in n?kC(n)?{mapValue:{}}:md:We()}function Y6(n,e){const t=yd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function J6(n,e){const t=yd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!NC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sE(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sE(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());NC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ku(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];NC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ji(sE(this.value))}}function X6(n){const e=[];return pd(n.fields,(t,r)=>{const i=new gr([t]);if(NC(r)){const s=X6(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new to(e)}class mr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mr(e,0,rt.min(),rt.min(),rt.min(),Ji.empty(),0)}static newFoundDocument(e,t,r,i){return new mr(e,1,t,rt.min(),r,i,0)}static newNoDocument(e,t){return new mr(e,2,t,rt.min(),rt.min(),Ji.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,rt.min(),rt.min(),Ji.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vd{constructor(e,t){this.position=e,this.inclusive=t}}function Z6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Fe.comparator(Fe.fromName(o.referenceValue),t.key):yd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function e9(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ku(n.position[t],e.position[t]))return!1;return!0}class oE{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xme(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class t9{}class Zt extends t9{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Zme(e,t,r):"array-contains"===t?new n_e(e,r):"in"===t?new a9(e,r):"not-in"===t?new r_e(e,r):"array-contains-any"===t?new i_e(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new e_e(e,r):new t_e(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yd(t,this.value)):null!==t&&_d(this.value)===_d(t)&&this.matchesComparison(yd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return We()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends t9{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new On(e,t)}matches(e){return Lm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Lm(n){return"and"===n.op}function rN(n){return"or"===n.op}function iN(n){return n9(n)&&Lm(n)}function n9(n){for(const e of n.filters)if(e instanceof On)return!1;return!0}function sN(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Fm(n.value);if(iN(n))return n.filters.map(e=>sN(e)).join(",");{const e=n.filters.map(t=>sN(t)).join(",");return`${n.op}(${e})`}}function r9(n,e){return n instanceof Zt?(r=n,(i=e)instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&ku(r.value,i.value)):n instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&r9(o,i.filters[a]),!0)}(n,e):void We();var r,i}function i9(n,e){const t=n.filters.concat(e);return On.create(t,n.op)}function s9(n){return n instanceof Zt?`${(t=n).field.canonicalString()} ${t.op} ${Fm(t.value)}`:n instanceof On?function(t){return t.op.toString()+" {"+t.getFilters().map(s9).join(" ,")+"}"}(n):"Filter";var t}class Zme extends Zt{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class e_e extends Zt{constructor(e,t){super(e,"in",t),this.keys=o9(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class t_e extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=o9(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function o9(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class n_e extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return iE(t)&&rE(t.arrayValue,this.value)}}class a9 extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rE(this.value.arrayValue,t)}}class r_e extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(rE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rE(this.value.arrayValue,t)}}class i_e extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!iE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rE(this.value.arrayValue,r))}}class s_e{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function oN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new s_e(n,e,t,r,i,s,o)}function uf(n){const e=Oe(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),eE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fm(r)).join(",")),e.ue=t}return e.ue}function aE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xme(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!r9(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!e9(n.startAt,e.startAt)&&e9(n.endAt,e.endAt)}function OC(n){return Fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function VC(n,e){return n.filters.filter(t=>t instanceof Zt&&t.field.isEqual(e))}function u9(n,e,t){let r=xC,i=!0;for(const s of VC(n,e)){let o=xC,a=!0;switch(s.op){case"<":case"<=":o=Yme(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=xC}Y6({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Y6({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function c9(n,e,t){let r=md,i=!0;for(const s of VC(n,e)){let o=md,a=!0;switch(s.op){case">=":case">":o=Jme(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=md}J6({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];J6({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Mc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function l9(n,e,t,r,i,s,o,a){return new Mc(n,e,t,r,i,s,o,a)}function Um(n){return new Mc(n)}function d9(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function aN(n){return null!==n.collectionGroup}function Bm(n){const e=Oe(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $n(gr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new oE(s,r))}),t.has(gr.keyField().canonicalString())||e.ce.push(new oE(gr.keyField(),r))}return e.ce}function ps(n){const e=Oe(n);return e.le||(e.le=function f9(n,e){if("F"===n.limitType)return oN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new oE(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new vd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vd(n.startAt.position,n.startAt.inclusive):null;return oN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Bm(n))),e.le}function uN(n,e){const t=n.filters.concat([e]);return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function FC(n,e,t){return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uE(n,e){return aE(ps(n),ps(e))&&n.limitType===e.limitType}function p9(n){return`${uf(ps(n))}|lt:${n.limitType}`}function jm(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>s9(i)).join(", ")}]`),eE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fm(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fm(i)).join(",")),`Target(${r})`}(ps(n))}; limitType=${n.limitType})`}function cE(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Bm(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=Z6(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Bm(r),i)||r.endAt&&!function(o,a,u){const l=Z6(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Bm(r),i)));var r,i}function g9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function m9(n){return(e,t)=>{let r=!1;for(const i of Bm(n)){const s=o_e(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function o_e(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?yd(u,l):We()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return We()}}class Nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return j6(this.inner)}size(){return this.innerSize}}const a_e=new or(Fe.comparator);function no(){return a_e}const _9=new or(Fe.comparator);function lE(...n){let e=_9;for(const t of n)e=e.insert(t.key,t);return e}function y9(n){let e=_9;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ou(){return dE()}function v9(){return dE()}function dE(){return new Nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const u_e=new or(Fe.comparator),c_e=new $n(Fe.comparator);function xt(...n){let e=c_e;for(const t of n)e=e.add(t);return e}const l_e=new $n(wt);function cN(){return l_e}function lN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tE(e)?"-0":e}}function I9(n){return{integerValue:""+n}}function E9(n,e){return M6(e)?I9(e):lN(n,e)}class LC{constructor(){this._=void 0}}function d_e(n,e,t){return n instanceof zm?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&RC(s)&&(s=PC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof cf?w9(n,e):n instanceof lf?b9(n,e):function(i,s){const o=T9(i,s),a=A9(o)+A9(i.Pe);return nN(o)&&nN(i.Pe)?I9(a):lN(i.serializer,a)}(n,e)}function h_e(n,e,t){return n instanceof cf?w9(n,e):n instanceof lf?b9(n,e):t}function T9(n,e){return n instanceof $m?nN(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class zm extends LC{}class cf extends LC{constructor(e){super(),this.elements=e}}function w9(n,e){const t=C9(e);for(const r of n.elements)t.some(i=>ku(i,r))||t.push(r);return{arrayValue:{values:t}}}class lf extends LC{constructor(e){super(),this.elements=e}}function b9(n,e){let t=C9(e);for(const r of n.elements)t=t.filter(i=>!ku(i,r));return{arrayValue:{values:t}}}class $m extends LC{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function A9(n){return wr(n.integerValue||n.doubleValue)}function C9(n){return iE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hE{constructor(e,t){this.field=e,this.transform=t}}class p_e{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class BC{}function D9(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gm(n.key,br.none()):new qm(n.key,n.data,br.none());{const t=n.data,r=Ji.empty();let i=new $n(gr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new kc(n.key,r,new to(i.toArray()),br.none())}}function g_e(n,e,t){n instanceof qm?function(i,s,o){const a=i.value.clone(),u=P9(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kc?function(i,s,o){if(!UC(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=P9(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(R9(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fE(n,e,t,r){return n instanceof qm?function(s,o,a,u){if(!UC(s.precondition,o))return a;const l=s.value.clone(),h=x9(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof kc?function(s,o,a,u){if(!UC(s.precondition,o))return a;const l=x9(s.fieldTransforms,u,o),h=o.data;return h.setAll(R9(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,UC(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function m_e(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=T9(r.transform,i||null);null!=s&&(null===t&&(t=Ji.empty()),t.set(r.field,s))}return t||null}function S9(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Nm(r,i,(s,o)=>function f_e(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof cf&&i instanceof cf||r instanceof lf&&i instanceof lf?Nm(r.elements,i.elements,ku):r instanceof $m&&i instanceof $m?ku(r.Pe,i.Pe):r instanceof zm&&i instanceof zm);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class qm extends BC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kc extends BC{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function R9(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function P9(n,e,t){const r=new Map;et(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,h_e(o,a,t[i]))}return r}function x9(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,d_e(s,o,e))}return r}class Gm extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dN extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g_e(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=v9();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=D9(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xt())}isEqual(e){return this.batchId===e.batchId&&Nm(this.mutations,e.mutations,(t,r)=>S9(t,r))&&Nm(this.baseMutations,e.baseMutations,(t,r)=>S9(t,r))}}class fN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){et(e.mutations.length===r.length);let i=function(){return u_e}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fN(e,t,r,i)}}class pN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class __e{constructor(e,t){this.count=e,this.unchangedNames=t}}var ui,fn;function N9(n){switch(n){default:return We();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function k9(n){if(void 0===n)return Yr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case ui.OK:return ae.OK;case ui.CANCELLED:return ae.CANCELLED;case ui.UNKNOWN:return ae.UNKNOWN;case ui.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case ui.INTERNAL:return ae.INTERNAL;case ui.UNAVAILABLE:return ae.UNAVAILABLE;case ui.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case ui.NOT_FOUND:return ae.NOT_FOUND;case ui.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case ui.ABORTED:return ae.ABORTED;case ui.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case ui.DATA_LOSS:return ae.DATA_LOSS;default:return We()}}(fn=ui||(ui={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";function O9(){return new TextEncoder}const y_e=new tf([4294967295,4294967295],0);function V9(n){const e=O9().encode(n),t=new g6;return t.update(e),new Uint8Array(t.digest())}function F9(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tf([t,r],0),new tf([i,s],0)]}class gN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pE(`Invalid padding: ${t}`);if(r<0)throw new pE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new pE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new pE(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(tf.fromNumber(r)));return 1===i.compare(y_e)&&(i=new tf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=V9(e),[r,i]=F9(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gN(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=V9(e),[r,i]=F9(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class pE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gE(rt.min(),i,new or(wt),no(),xt())}}class mE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mE(r,t,xt(),xt(),xt())}}class zC{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class L9{constructor(e,t){this.targetId=e,this.me=t}}class U9{constructor(e,t,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class B9{constructor(){this.fe=0,this.ge=z9(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xt(),t=xt(),r=xt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:We()}}),new mE(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=z9()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class v_e{constructor(e){this.Le=e,this.Be=new Map,this.ke=no(),this.qe=j9(),this.Qe=new or(wt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:We()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(OC(s))if(0===r){const o=new Fe(s.path);this.Ue(t,o,mr.newNoDocument(o,rt.min()))}else et(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=xc(r).toUint8Array()}catch(u){if(u instanceof $6)return No("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new gN(o,i,s)}catch(u){return No(u instanceof pE?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&OC(a.target)){const u=new Fe(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,mr.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=xt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new gE(e,t,this.Qe,this.ke,r);return this.ke=no(),this.qe=j9(),this.Qe=new or(wt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new B9,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $n(wt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new B9),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function j9(){return new or(Fe.comparator)}function z9(){return new or(Fe.comparator)}const I_e={asc:"ASCENDING",desc:"DESCENDING"},E_e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T_e={and:"AND",or:"OR"};class w_e{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mN(n,e){return n.useProto3Json||eE(e)?e:{value:e}}function Hm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $9(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function b_e(n,e){return Hm(n,e.toTimestamp())}function Jr(n){return et(!!n),rt.fromTimestamp(function(t){const r=Pc(t);return new Tr(r.seconds,r.nanos)}(n))}function _N(n,e){return yN(n,e).canonicalString()}function yN(n,e){const t=(i=n,new Xt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function q9(n){const e=Xt.fromString(n);return et(tH(e)),e}function _E(n,e){return _N(n.databaseId,e.path)}function Vu(n,e){const t=q9(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(W9(t))}function G9(n,e){return _N(n.databaseId,e)}function H9(n){const e=q9(n);return 4===e.length?Xt.emptyPath():W9(e)}function vN(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function W9(n){return et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function K9(n,e,t){return{name:_E(n,e),fields:t.value.mapValue.fields}}function Q9(n,e,t){const r=Vu(n,e.name),i=Jr(e.updateTime),s=e.createTime?Jr(e.createTime):rt.min(),o=new Ji({mapValue:{fields:e.fields}}),a=mr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function yE(n,e){let t;if(e instanceof qm)t={update:K9(n,e.key,e.value)};else if(e instanceof Gm)t={delete:_E(n,e.key)};else if(e instanceof kc)t={update:K9(n,e.key,e.data),updateMask:M_e(e.fieldMask)};else{if(!(e instanceof dN))return We();t={verify:_E(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof zm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $m)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw We()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:b_e(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:We()),t;var s}function IN(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?br.updateTime(Jr(s.updateTime)):void 0!==s.exists?br.exists(s.exists):br.none():br.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(et("REQUEST_TIME"===a.setToServerValue),u=new zm):"appendMissingElements"in a?u=new cf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new lf(a.removeAllFromArray.values||[]):"increment"in a?u=new $m(o,a.increment):We();const l=gr.fromServerFormat(a.fieldPath);return new hE(l,u)}(n,i)):[];var s;if(e.update){const i=Vu(n,e.update.name),s=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new to((e.updateMask.fieldPaths||[]).map(h=>gr.fromServerFormat(h)));return new kc(i,s,o,t,r)}return new qm(i,s,t,r)}if(e.delete){const i=Vu(n,e.delete);return new Gm(i,t)}if(e.verify){const i=Vu(n,e.verify);return new dN(i,t)}return We()}function Y9(n,e){return{documents:[G9(n,e.path)]}}function $C(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=G9(n,i);const s=function(l){if(0!==l.length)return eH(On.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:Id((v=h).field),direction:R_e(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=mN(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function X9(n){let e=H9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){et(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const v=Z9(g);return v instanceof On&&iN(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new oE(Wm((w=v).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;t.limit&&(a=function(g){let v;return v="object"==typeof g?g.value:g,eE(v)?null:v}(t.limit));let u=null;var g;t.startAt&&(u=new vd((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new vd(g.values||[],!g.before)}(t.endAt)),l9(e,i,o,s,a,"F",u,l)}function Z9(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Wm(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wm(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wm(t.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wm(t.unaryFilter.field);return Zt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return We()}}(n):void 0!==n.fieldFilter?Zt.create(Wm((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return We()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return On.create(t.compositeFilter.filters.map(r=>Z9(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return We()}}(t.compositeFilter.op))}(n):We();var t}function R_e(n){return I_e[n]}function P_e(n){return E_e[n]}function x_e(n){return T_e[n]}function Id(n){return{fieldPath:n.canonicalString()}}function Wm(n){return gr.fromServerFormat(n.fieldPath)}function eH(n){return n instanceof Zt?function(t){if("=="===t.op){if(W6(t.value))return{unaryFilter:{field:Id(t.field),op:"IS_NAN"}};if(H6(t.value))return{unaryFilter:{field:Id(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(W6(t.value))return{unaryFilter:{field:Id(t.field),op:"IS_NOT_NAN"}};if(H6(t.value))return{unaryFilter:{field:Id(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Id(t.field),op:P_e(t.op),value:t.value}}}(n):n instanceof On?function(t){const r=t.getFilters().map(i=>eH(i));return 1===r.length?r[0]:{compositeFilter:{op:x_e(t.op),filters:r}}}(n):We()}function M_e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Oc{constructor(e,t,r,i,s=rt.min(),o=rt.min(),a=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Oc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nH{constructor(e){this.ct=e}}function rH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:_E(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Hm(s,o.version.toTimestamp()),createTime:Hm(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:df(e.version)};else{if(!e.isUnknownDocument())return We();r.unknownDocument={path:t.path.toArray(),version:df(e.version)}}var s,o;return r}function qC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function df(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hf(n){const e=new Tr(n.seconds,n.nanoseconds);return rt.fromTimestamp(e)}function ff(n,e){const t=(e.baseMutations||[]).map(s=>IN(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>IN(n.ct,s)),i=Tr.fromMillis(e.localWriteTimeMs);return new hN(e.batchId,i,t,r)}function vE(n){const e=hf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hf(n.lastLimboFreeSnapshotVersion):rt.min();let r;return r=void 0!==n.query.documents?(et(1===(s=n.query).documents.length),ps(Um(H9(s.documents[0])))):function(s){return ps(X9(s))}(n.query),new Oc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fr.fromBase64String(n.resumeToken));var s}function iH(n,e){const t=df(e.snapshotVersion),r=df(e.lastLimboFreeSnapshotVersion);let i;i=OC(e.target)?Y9(n.ct,e.target):$C(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function EN(n){const e=X9({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?FC(e,e.limit,"L"):e}function TN(n,e){return new pN(e.largestBatchId,IN(n.ct,e.overlayMutation))}function sH(n,e){const t=e.path.lastSegment();return[n,fs(e.path.popLast()),t]}function oH(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:df(r.readTime),documentKey:fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class k_e{getBundleMetadata(e,t){return aH(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:hf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return aH(e).put({bundleId:(i=t).id,createTime:df(Jr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return uH(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:EN(s.bundledQuery),readTime:hf(s.readTime)};var s})}saveNamedQuery(e,t){return uH(e).put({name:(i=t).name,readTime:df(Jr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function aH(n){return Ii(n,"bundles")}function uH(n){return Ii(n,"namedQueries")}class GC{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new GC(e,t.uid||"")}getOverlay(e,t){return IE(e).get(sH(this.userId,t)).next(r=>r?TN(this.serializer,r):null)}getOverlays(e,t){const r=Ou();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new pN(t,o);i.push(this.ht(e,a))}),J.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(fs(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(IE(e).j("collectionPathOverlayIndex",a))}),J.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ou(),s=fs(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return IE(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=TN(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ou();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return IE(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=TN(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return IE(e).put(function(i,s,o){const[a,u,l]=sH(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yE(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function IE(n){return Ii(n,"documentOverlays")}class O_e{Pt(e){return Ii(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Fr.fromUint8Array(r):Fr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class pf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(wr(e.integerValue));else if("doubleValue"in e){const r=wr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),tE(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Pc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?K6(e)?this.dt(t,Number.MAX_SAFE_INTEGER):kC(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):We()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(wr(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Fe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function V_e(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cH(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=V_e(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}pf.vt=new pf;class F_e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=cH(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=cH(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class L_e{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class U_e{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class EE{constructor(){this.jt=new F_e,this.Ht=new L_e(this.jt),this.Jt=new U_e(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class gf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gf(this.indexId,this.documentKey,this.arrayValue,r)}}function Ed(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lH(n.arrayValue,e.arrayValue),0!==t?t:(t=lH(n.directionalValue,e.directionalValue),0!==t?t:Fe.comparator(n.documentKey,e.documentKey)))}function lH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dH{constructor(e){this.Xt=new $n((t,r)=>gr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(et(e.collectionGroup===this.collectionId),this.nn)return!1;const t=QM(e);if(void 0!==t&&!this.sn(t))return!1;const r=nf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new $n(gr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new rf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rf(r.field,"asc"===r.dir?0:1)));return new km(km.UNKNOWN_ID,this.collectionId,t,Om.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hH(n){var e,t;if(et(n instanceof Zt||n instanceof On),n instanceof Zt){if(n instanceof a9){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Zt.create(n.field,"==",s)))||[];return On.create(i,"or")}return n}const r=n.filters.map(i=>hH(i));return On.create(r,n.op)}function B_e(n){if(0===n.getFilters().length)return[];const e=AN(hH(n));return et(fH(e)),wN(e)||bN(e)?[e]:e.getFilters()}function wN(n){return n instanceof Zt}function bN(n){return n instanceof On&&iN(n)}function fH(n){return wN(n)||bN(n)||function(t){if(t instanceof On&&rN(t)){for(const r of t.getFilters())if(!wN(r)&&!bN(r))return!1;return!0}return!1}(n)}function AN(n){if(et(n instanceof Zt||n instanceof On),n instanceof Zt)return n;if(1===n.filters.length)return AN(n.filters[0]);const e=n.filters.map(r=>AN(r));let t=On.create(e,n.op);return t=HC(t),fH(t)?t:(et(t instanceof On),et(Lm(t)),et(t.filters.length>1),t.filters.reduce((r,i)=>CN(r,i)))}function CN(n,e){let t;return et(n instanceof Zt||n instanceof On),et(e instanceof Zt||e instanceof On),t=n instanceof Zt?e instanceof Zt?On.create([n,e],"and"):pH(n,e):e instanceof Zt?pH(e,n):function(i,s){if(et(i.filters.length>0&&s.filters.length>0),Lm(i)&&Lm(s))return i9(i,s.getFilters());const o=rN(i)?i:s,a=rN(i)?s:i,u=o.filters.map(l=>CN(l,a));return On.create(u,"or")}(n,e),HC(t)}function pH(n,e){if(Lm(e))return i9(e,n.getFilters());{const t=e.filters.map(r=>CN(n,r));return On.create(t,"or")}}function HC(n){if(et(n instanceof Zt||n instanceof On),n instanceof Zt)return n;const e=n.getFilters();if(1===e.length)return HC(e[0]);if(n9(n))return n;const t=e.map(i=>HC(i)),r=[];return t.forEach(i=>{i instanceof Zt?r.push(i):i instanceof On&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:On.create(r,n.op)}class j_e{constructor(){this.un=new DN}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(ko.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class DN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(Xt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Xt.comparator)).toArray()}}const WC=new Uint8Array(0);class z_e{constructor(e,t){this.databaseId=t,this.cn=new DN,this.ln=new Nc(r=>uf(r),(r,i)=>aE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:fs(i)};return gH(e).put(s)}return J.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[A6(t),""],!1,!0);return gH(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Nu(o.parent))}return r})}addFieldIndex(e,t){const r=TE(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Qm(e);return s.next(a=>{o.put(oH(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=TE(e),i=Qm(e),s=Km(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=TE(e),r=Km(e),i=Qm(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return J.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new dH(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Km(e);let i=!0;const s=new Map;return J.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=xt();const a=[];return J.forEach(s,(u,l)=>{var G;Ie("IndexedDbIndexManager",`Using index ${G=u,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${uf(t)}`);const h=function(G,ee){const me=QM(ee);if(void 0===me)return null;for(const _e of VC(G,me.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null}(l,u),g=function(G,ee){const me=new Map;for(const _e of nf(ee))for(const D of VC(G,_e.fieldPath))switch(D.op){case"==":case"in":me.set(_e.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return me.set(_e.fieldPath.canonicalString(),D.value),Array.from(me.values())}return null}(l,u),v=function(G,ee){const me=[];let _e=!0;for(const D of nf(ee)){const b=0===D.kind?u9(G,D.fieldPath,G.startAt):c9(G,D.fieldPath,G.startAt);me.push(b.value),_e&&(_e=b.inclusive)}return new vd(me,_e)}(l,u),E=function(G,ee){const me=[];let _e=!0;for(const D of nf(ee)){const b=0===D.kind?c9(G,D.fieldPath,G.endAt):u9(G,D.fieldPath,G.endAt);me.push(b.value),_e&&(_e=b.inclusive)}return new vd(me,_e)}(l,u),w=this.In(u,l,v),R=this.In(u,l,E),P=this.Tn(u,l,g),j=this.En(u.indexId,h,w,v.inclusive,R,E.inclusive,P);return J.forEach(j,U=>r.G(U,t.limit).next(G=>{G.forEach(ee=>{const me=Fe.fromSegments(ee.documentKey);o.has(me)||(o=o.add(me),a.push(me))})}))}).next(()=>a)}return J.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:B_e(On.create(e.filters,"and")).map(r=>oN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),h=[];for(let g=0;g<u;++g){const v=t?this.dn(t[g/l]):WC,E=this.An(e,v,r[g%l],i),w=this.Rn(e,v,s[g%l],o),R=a.map(P=>this.An(e,v,P,!0));h.push(...this.createRange(E,w,R))}return h}An(e,t,r,i){const s=new gf(e,Fe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new gf(e,Fe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new dH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return J.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new $n(gr.comparator),h=!1;for(const g of u.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?h=!0:l=l.add(v.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new EE;for(const i of nf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);pf.vt.It(s,o)}return r.zt()}dn(e){const t=new EE;return pf.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new EE;return pf.vt.It(af(this.databaseId,t),r.Yt(function(s){const o=nf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new EE);let s=0;for(const o of nf(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&iE(a))i=this.gn(i,o,a);else{const l=u.Yt(o.kind);pf.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new EE;u.seed(a.zt()),pf.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Zt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TE(e),i=Qm(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return J.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const v=g?new Om(g.sequenceNumber,new ko(hf(g.readTime),new Fe(Nu(g.documentKey)),g.largestBatchId)):Om.empty(),E=h.fields.map(([w,R])=>new rf(gr.fromServerFormat(w),R));return new km(h.indexId,h.collectionGroup,E,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TE(e),s=Qm(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>J.forEach(a,u=>s.put(oH(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?J.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),J.forEach(a,u=>this.wn(e,i,u).next(l=>{const h=this.Sn(s,u);return l.isEqual(h)?J.resolve():this.bn(e,s,u,l,h)}))))})}Dn(e,t,r,i){return Km(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Km(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Km(e);let s=new $n(Ed);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new gf(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new $n(Ed);const i=this.Vn(t,e);if(null==i)return r;const s=QM(t);if(null!=s){const o=e.data.field(s.fieldPath);if(iE(o))for(const a of o.arrayValue.values||[])r=r.add(new gf(t.indexId,e.key,this.dn(a),i))}else r=r.add(new gf(t.indexId,e.key,WC,i));return r}bn(e,t,r,i,s){Ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,h,g,v){const E=u.getIterator(),w=l.getIterator();let R=Vm(E),P=Vm(w);for(;R||P;){let j=!1,U=!1;if(R&&P){const G=h(R,P);G<0?U=!0:G>0&&(j=!0)}else null!=R?U=!0:j=!0;j?(g(P),P=Vm(w)):U?(v(R),R=Vm(E)):(R=Vm(E),P=Vm(w))}}(i,s,Ed,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),J.waitFor(o)}yn(e){let t=1;return Qm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ed(o,a)).filter((o,a,u)=>!a||0!==Ed(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ed(o,e),u=Ed(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,WC,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,WC,[]]))}return s}Cn(e,t){return Ed(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mH)}getMinOffset(e,t){return J.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||We())).next(mH)}}function gH(n){return Ii(n,"collectionParents")}function Km(n){return Ii(n,"indexEntries")}function TE(n){return Ii(n,"indexConfiguration")}function Qm(n){return Ii(n,"indexState")}function mH(n){et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;YM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ko(e.readTime,e.documentKey,t)}const _H={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(h,g,v)=>(a++,v.delete()));s.push(u.next(()=>{et(1===a)}));const l=[];for(const h of t.mutations){const g=O6(e,h.key.path,t.batchId);s.push(i.delete(g)),l.push(h.key)}return J.waitFor(s).next(()=>l)}function KC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw We();e=n.noDocument}return JSON.stringify(e).length}gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(41943040,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);class QC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){et(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new QC(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Td(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Ym(e),o=Td(e);return o.add({}).next(a=>{et("number"==typeof a);const u=new hN(a,t,r,i),l=function(E,w,R){const P=R.baseMutations.map(U=>yE(E.ct,U)),j=R.mutations.map(U=>yE(E.ct,U));return{userId:w,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:j}}(this.serializer,this.userId,u),h=[];let g=new $n((v,E)=>wt(v.canonicalString(),E.canonicalString()));for(const v of i){const E=O6(this.userId,v.key.path,a);g=g.add(v.key.path.popLast()),h.push(o.put(l)),h.push(s.put(E,Rme))}return g.forEach(v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),J.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Td(e).get(t).next(r=>r?(et(r.userId===this.userId),ff(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?J.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Td(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(et(a.batchId>=r),s=ff(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Td(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Td(e).U("userMutationsIndex",t).next(r=>r.map(i=>ff(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=DC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ym(e).J({range:i},(o,a,u)=>{const[l,h,g]=o,v=Nu(h);if(l===this.userId&&t.path.isEqual(v))return Td(e).get(g).next(E=>{if(!E)throw We();et(E.userId===this.userId),s.push(ff(this.serializer,E))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(wt);const i=[];return t.forEach(s=>{const o=DC(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ym(e).J({range:a},(l,h,g)=>{const[v,E,w]=l,R=Nu(E);v===this.userId&&s.path.isEqual(R)?r=r.add(w):g.done()});i.push(u)}),J.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=DC(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new $n(wt);return Ym(e).J({range:o},(u,l,h)=>{const[g,v,E]=u,w=Nu(v);g===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(E)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Td(e).get(s).next(o=>{if(null===o)throw We();et(o.userId===this.userId),r.push(ff(this.serializer,o))}))}),J.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yH(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),J.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ym(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Nu(s[1]);i.push(u)}else a.done()}).next(()=>{et(0===i.length)})})}containsKey(e,t){return vH(e,this.userId,t)}Nn(e){return IH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vH(n,e,t){const r=DC(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ym(n).J({range:s,H:!0},(a,u,l)=>{const[h,g,v]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function Td(n){return Ii(n,"mutations")}function Ym(n){return Ii(n,"documentMutations")}function IH(n){return Ii(n,"mutationQueues")}class mf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mf(0)}static kn(){return new mf(-1)}}class $_e{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new mf(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>rt.fromTimestamp(new Tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jm(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(et(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Jm(e).J((o,a)=>{const u=vE(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>J.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Jm(e).J((r,i)=>{const s=vE(i);t(s)})}qn(e){return EH(e).get("targetGlobalKey").next(t=>(et(null!==t),t))}Qn(e,t){return EH(e).put("targetGlobalKey",t)}Kn(e,t){return Jm(e).put(iH(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Jm(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=vE(a);aE(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=wd(e);return t.forEach(o=>{const a=fs(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),J.waitFor(i)}removeMatchingKeys(e,t,r){const i=wd(e);return J.forEach(t,s=>{const o=fs(s.path);return J.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=wd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wd(e);let s=xt();return i.J({range:r,H:!0},(o,a,u)=>{const l=Nu(o[1]),h=new Fe(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=fs(t.path),i=IDBKeyRange.bound([r],[A6(r)],!1,!0);let s=0;return wd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Jm(e).get(t).next(r=>r?vE(r):null)}}function Jm(n){return Ii(n,"targets")}function EH(n){return Ii(n,"targetGlobal")}function wd(n){return Ii(n,"targetDocuments")}function TH([n,e],[t,r]){const i=wt(n,t);return 0===i?wt(e,r):i}class q_e{constructor(e){this.Un=e,this.buffer=new $n(TH),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,M.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fd(r)?Ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hd(r)}yield t.Hn(3e5)}))}}class G_e{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(Oo.oe);const r=new q_e(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(_H)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_H):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Mm()<=xu.$b.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class H_e{constructor(e,t){this.db=e,this.garbageCollector=function bH(n,e){return new G_e(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return YC(e,r)}removeReference(e,t,r){return YC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return YC(e,t)}nr(e,t){return function(i,s){let o=!1;return IH(i).Y(a=>vH(i,a,s).next(u=>(u&&(o=!0),J.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,rt.min()),wd(e).delete([0,fs(o.path)])))});i.push(u)}}).next(()=>J.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return YC(e,t)}tr(e,t){const r=wd(e);let i,s=Oo.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Oo.oe&&t(new Fe(Nu(i)),s),s=l,i=u):s=Oo.oe}).next(()=>{s!==Oo.oe&&t(new Fe(Nu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YC(n,e){return wd(n).put((i=n.currentSequenceNumber,{targetId:0,path:fs(e.path),sequenceNumber:i}));var i}class AH{constructor(){this.changes=new Nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class W_e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _f(e).put(r)}removeEntry(e,t,r){return _f(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qC(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=mr.newInvalidDocument(t);return _f(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wE(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:mr.newInvalidDocument(t)};return _f(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wE(t))},(i,s)=>{r={document:this.ir(t,s),size:KC(s)}}).next(()=>r)}getEntries(e,t){let r=no();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=no(),i=new or(Fe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,KC(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return J.resolve();let i=new $n(RH);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(wE(i.first()),wE(i.last())),o=i.getIterator();let a=o.getNext();return _f(e).J({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=Fe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&RH(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(wE(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),qC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _f(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=no();for(const g of l){const v=this.ir(Fe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(cE(t,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=no();const o=SH(t,r),a=SH(t,ko.max());return _f(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.ir(Fe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new K_e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return DH(e).get("remoteDocumentGlobalKey").next(t=>(et(!!t),t))}rr(e,t){return DH(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function N_e(n,e){let t;if(e.document)t=Q9(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Fe.fromSegments(e.noDocument.path),i=hf(e.noDocument.readTime);t=mr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return We();{const r=Fe.fromSegments(e.unknownDocument.path),i=hf(e.unknownDocument.version);t=mr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Tr(i[0],i[1]);return rt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(rt.min()))return r}return mr.newInvalidDocument(e)}}function CH(n){return new W_e(n)}class K_e extends AH{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((s,o)=>wt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=rH(this.cr.serializer,o);i=i.add(s.path.popLast());const l=KC(u);r+=l-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=rH(this.cr.serializer,o.convertToNoDocument(rt.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function DH(n){return Ii(n,"remoteDocumentGlobal")}function _f(n){return Ii(n,"remoteDocumentsV14")}function wE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SH(n,e){const t=e.documentKey.path.toArray();return[n,qC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=wt(t[s],r[s]),i)return i;return i=wt(t.length,r.length),i||(i=wt(t[t.length-2],r[r.length-2]),i||wt(t[t.length-1],r[r.length-1]))}class Q_e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&fE(r.mutation,i,to.empty(),Tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xt()){const i=Ou();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=lE();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ou();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=no();const o=dE(),a=dE();return t.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof kc)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),fE(h.mutation,l,h.mutation.getFieldMask(),Tr.now())):o.set(l.key,to.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new Q_e(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=dE();let i=new or((o,a)=>o-a),s=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let h=r.get(u)||to.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||xt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=v9();h.forEach(v=>{if(!s.has(v)){const E=D9(t.get(v),r.get(v));null!==E&&g.set(v,E),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Fe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):aN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(Ou());let a=-1,u=s;return o.next(l=>J.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{u=u.insert(h,v)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,xt())).next(h=>({batchId:a,changes:y9(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next(r=>{let i=lE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=lE();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,u=>{const l=(g=t,v=u.child(s),new Mc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,v;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,mr.newInvalidDocument(h)))});let a=lE();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&fE(h.mutation,l,to.empty(),Tr.now()),cE(t,l)&&(a=a.insert(u,l))}),a})}}class Y_e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Jr(i.createTime)}),J.resolve();var i}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:EN(i.bundledQuery),readTime:Jr(i.readTime)}),J.resolve();var i}}class J_e{constructor(){this.overlays=new or(Fe.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ou();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=Ou(),s=t.length+1,o=new Fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new or((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Ou(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Ou(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return J.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pN(t,r));let s=this.Ir.get(t);void 0===s&&(s=xt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class X_e{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}class SN{constructor(){this.Tr=new $n(Vi.Er),this.dr=new $n(Vi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Vi(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Fe(new Xt([])),r=new Vi(t,e),i=new Vi(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Fe(new Xt([])),r=new Vi(t,e),i=new Vi(t,e+1);let s=xt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Vi(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Fe.comparator(e.key,t.key)||wt(e.wr,t.wr)}static Ar(e,t){return wt(e.wr,t.wr)||Fe.comparator(e.key,t.key)}}class Z_e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $n(Vi.Er)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new hN(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Vi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),i=new Vi(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(wt);return t.forEach(i=>{const s=new Vi(i,0),o=new Vi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Fe.isDocumentKey(s)||(s=s.child(""));const o=new Vi(new Fe(s),0);let a=new $n(wt);return this.br.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){et(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return J.forEach(t.mutations,i=>{const s=new Vi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Vi(t,0),i=this.br.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eye{constructor(e){this.Mr=e,this.docs=new or(Fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mr.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=no();const o=t.path,a=new Fe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||YM(D6(h),r)<=0||(i.has(h.key)||cE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){We()}Or(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tye(this)}getSize(e){return J.resolve(this.size)}}class tye extends AH{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class nye{constructor(e){this.persistence=e,this.Nr=new Nc(t=>uf(t),aE),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new SN,this.targetCount=0,this.kr=mf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new mf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}class RN{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Oo(0),this.Kr=!1,this.Kr=!0,this.$r=new X_e,this.referenceDelegate=e(this),this.Ur=new nye(this),this.indexManager=new j_e,this.remoteDocumentCache=new eye(r=>this.referenceDelegate.Wr(r)),this.serializer=new nH(t),this.Gr=new Y_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J_e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Z_e(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new rye(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class rye extends R6{constructor(e){super(),this.currentSequenceNumber=e}}class JC{constructor(e){this.persistence=e,this.Jr=new SN,this.Yr=null}static Zr(e){return new JC(e)}get Xr(){if(this.Yr)return this.Yr;throw We()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=Fe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,rt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class iye{constructor(e){this.serializer=e}O(e,t,r,i){const s=new CC("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k6,{unique:!0}),u.createObjectStore("documentMutations"),xH(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=J.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),xH(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rt.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k6,{unique:!0});const g=l.store("mutations"),v=h.map(E=>g.put(E));return J.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:jme});l.createIndex("collectionPathOverlayIndex",zme,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",$me,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:Pme});l.createIndex("documentKeyIndex",xme),l.createIndex("collectionGroupIndex",Mme)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Fme}).createIndex("sequenceNumberIndex",Lme,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Ume}).createIndex("documentKeyIndex",Bme,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=KC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>J.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>J.forEach(a,u=>{et(u.userId===s.userId);const l=ff(this.serializer,u);return yH(e,s.userId,l).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Xt(o),l=[0,fs(u)];s.push(t.get(l).next(h=>h?J.resolve():t.put({targetId:0,path:fs(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>J.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Vme});const r=t.store("collectionParents"),i=new DN,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:fs(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Xt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{const h=Nu(a);return s(h.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=vE(i),o=iH(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(g=o,g.document?new Fe(Xt.fromString(g.document.name).popFirst(5)):g.noDocument?Fe.fromSegments(g.noDocument.path):g.unknownDocument?Fe.fromSegments(g.unknownDocument.path):We()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>J.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=CH(this.serializer),s=new RN(JC.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:xt();ff(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),J.forEach(a,(u,l)=>{const h=new ki(l),g=GC.lt(this.serializer,h),v=s.getIndexManager(h),E=QC.lt(h,this.serializer,v,s.referenceDelegate);return new PH(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new eN(t,Oo.oe),u).next()})})}}function xH(n){n.createObjectStore("targetDocuments",{keyPath:kme}).createIndex("documentTargetsIndex",Ome,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nme,{unique:!0}),n.createObjectStore("targetGlobal")}const PN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xN{constructor(e,t,r,i,s,o,a,u,l,h,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!xN.D())throw new ve(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H_e(this,i),this.Ai=t+"main",this.serializer=new nH(u),this.Ri=new Mu(this.Ai,this.hi,new iye(this.serializer)),this.$r=new O_e,this.Ur=new $_e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CH(this.serializer),this.Gr=new k_e,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===h&&Yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,PN);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Oo(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,M.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,M.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,M.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ZC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(fd(e))return Ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return bE(e).get("owner").next(t=>J.resolve(this.vi(t)))}Ci(e){return ZC(e).delete(this.clientId)}Fi(){var e=this;return(0,M.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return J.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?J.resolve(!0):bE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,PN);return!1}}return!(!this.networkEnabled||!this.inForeground)||ZC(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,M.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eN(t,Oo.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ZC(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return QC.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z_e(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return GC.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ie("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?Hme:16===u?Gme:15===u?ZM:14===u?L6:13===u?F6:12===u?qme:11===u?V6:void We();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new eN(a,this.Qr?this.Qr.next():Oo.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ae.FAILED_PRECONDITION,S6);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return bE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ae.FAILED_PRECONDITION,PN)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bE(e).put("owner",t)}static D(){return Mu.D()}bi(e){const t=bE(e);return t.get("owner").next(r=>this.vi(r)?(Ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Sn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Yr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bE(n){return Ii(n,"owner")}function ZC(n){return Ii(n,"clientMetadata")}function MN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class NN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=xt(),i=xt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new NN(e,t.fromCache,r,i)}}class sye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MH{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Sn.nr)()?8:P6((0,Sn.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new sye;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Mm()<=xu.$b.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",jm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Mm()<=xu.$b.DEBUG&&Ie("QueryEngine","Query:",jm(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mm()<=xu.$b.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",jm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):J.resolve())}Yi(e,t){if(d9(t))return J.resolve(null);let r=ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=FC(t,null,"F"),r=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,FC(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return d9(t)||i.isEqual(rt.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?J.resolve(null):(Mm()<=xu.$b.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jm(t)),this.rs(e,o,t,C6(i,-1)).next(a=>a))})}ts(e,t){let r=new $n(m9(e));return t.forEach((i,s)=>{cE(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Mm()<=xu.$b.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",jm(t)),this.Ji.getDocumentsMatchingQuery(e,t,ko.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class oye{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new or(wt),this._s=new Nc(s=>uf(s),aE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function NH(n,e,t,r){return new oye(n,e,t,r)}function kH(n,e){return kN.apply(this,arguments)}function kN(){return(kN=(0,M.A)(function*(n,e){const t=Oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=xt();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function OH(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function VH(n,e,t){let r=xt(),i=xt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=no();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(rt.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function cye(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xm(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Oc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Zm(n,e,t){return ON.apply(this,arguments)}function ON(){return(ON=(0,M.A)(function*(n,e,t){const r=Oe(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fd(o))throw o;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function eD(n,e,t){const r=Oe(n);let i=rt.min(),s=xt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=Oe(u),v=g._s.get(h);return void 0!==v?J.resolve(g.os.get(v)):g.Ur.getTargetData(l,h)}(r,o,ps(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:rt.min(),t?s:xt())).next(a=>(UH(r,g9(e),a),{documents:a,Ts:s})))}function FH(n,e){const t=Oe(n),r=Oe(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function LH(n,e){const t=Oe(n),r=t.us.get(e)||rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,C6(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(UH(t,e,i),i))}function UH(n,e,t){let r=n.us.get(e)||rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function VN(){return(VN=(0,M.A)(function*(n,e,t,r){const i=Oe(n);let s=xt(),o=no();for(const l of t){const h=e.Es(l.metadata.name);l.document&&(s=s.add(h));const g=e.ds(l);g.setReadTime(e.As(l.metadata.readTime)),o=o.insert(h,g)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Xm(i,(h=r,ps(Um(Xt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>VH(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})).apply(this,arguments)}function dye(n,e){return FN.apply(this,arguments)}function FN(){return(FN=(0,M.A)(function*(n,e,t=xt()){const r=yield Xm(n,ps(EN(e.bundledQuery))),i=Oe(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Jr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Fr.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function BH(n,e){return`firestore_clients_${n}_${e}`}function jH(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function LN(n,e){return`firestore_targets_${n}_${e}`}class tD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ve(i.error.code,i.error.message))),o?new tD(e,t,i.state,s):(Yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ve(r.error.code,r.error.message))),s?new AE(e,r.state,i):(Yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=cN();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=M6(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new nD(e,s):(Yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class UN{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UN(t.clientId,t.onlineState):(Yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BN{constructor(){this.activeTargetIds=cN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jN{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new or(wt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=BH(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new BN),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,M.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(BH(e.persistenceKey,i));if(s){const o=nD.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(LN(this.persistenceKey,e));if(i){const s=AE.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(LN(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ie("SharedClientState","READ",e,t),t}setItem(e,t){Ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,M.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Oo.oe;if(null!=o)try{const u=JSON.parse(o);et("number"==typeof u),a=u}catch(u){Yr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Oo.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new tD(this.currentUser,e,t,r),s=jH(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=jH(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=LN(this.persistenceKey,e),s=new AE(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return nD.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return tD.Rs(new ki(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return AE.Rs(i,t)}Ls(e){return UN.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,M.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=cN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class zH{constructor(){this.so=new BN,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new BN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hye{_o(e){}shutdown(){}}class $H{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rD=null;function zN(){return null===rD?rD=268435456+Math.round(2147483648*Math.random()):rD++,"0x"+rD.toString(16)}const fye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pye{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ms="WebChannelConnection";class gye extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=zN(),u=this.xo(t,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>(Ie("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw No("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${fye[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=zN();return new Promise((o,a)=>{const u=new m6;u.setWithCredentials(!0),u.listenOnce(_6.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case AC.NO_ERROR:const h=u.getResponseJson();Ie(ms,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case AC.TIMEOUT:Ie(ms,`RPC '${e}' ${s} timed out`),a(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case AC.HTTP_ERROR:const g=u.getStatus();if(Ie(ms,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v?.error;if(E&&E.status&&E.message){const w=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(j)>=0?j:ae.UNKNOWN}(E.status);a(new ve(w,E.message))}else a(new ve(ae.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:We()}}finally{Ie(ms,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ie(ms,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){const i=zN(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I6(),a=v6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Ie(ms,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let v=!1,E=!1;const w=new pye({Io:P=>{E?Ie(ms,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(Ie(ms,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Ie(ms,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},To:()=>g.close()}),R=(P,j,U)=>{P.listen(j,G=>{try{U(G)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(g,JI.EventType.OPEN,()=>{E||(Ie(ms,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),R(g,JI.EventType.CLOSE,()=>{E||(E=!0,Ie(ms,`RPC '${e}' stream ${i} transport closed`),w.So())}),R(g,JI.EventType.ERROR,P=>{E||(E=!0,No(ms,`RPC '${e}' stream ${i} transport errored:`,P),w.So(new ve(ae.UNAVAILABLE,"The operation could not be completed")))}),R(g,JI.EventType.MESSAGE,P=>{var j;if(!E){const U=P.data[0];et(!!U);const ee=U.error||(null===(j=U[0])||void 0===j?void 0:j.error);if(ee){Ie(ms,`RPC '${e}' stream ${i} received error:`,ee);const me=ee.status;let _e=function(C){const x=ui[C];if(void 0!==x)return k9(x)}(me),D=ee.message;void 0===_e&&(_e=ae.INTERNAL,D="Unknown error status: "+me+" with message "+ee.message),E=!0,w.So(new ve(_e,D)),g.close()}else Ie(ms,`RPC '${e}' stream ${i} received:`,U),w.bo(U)}}),R(a,y6.STAT_EVENT,P=>{P.stat===WM.PROXY?Ie(ms,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===WM.NOPROXY&&Ie(ms,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function qH(){return typeof window<"u"?window:null}function iD(){return typeof document<"u"?document:null}function CE(n){return new w_e(n,!0)}class $N{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class GH{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $N(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,M.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,M.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,M.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Yr(t.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,M.A)(function*(){e.state=0,e.start()}))}I_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mye extends GH{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function C_e(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:We(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(et(void 0===h||"string"==typeof h),Fr.fromBase64String(h||"")):(et(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Fr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ae.UNKNOWN:k9(l.code);return new ve(h,l.message||"")}(o);t=new U9(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Vu(n,r.document.name),s=Jr(r.document.updateTime),o=r.document.createTime?Jr(r.document.createTime):rt.min(),a=new Ji({mapValue:{fields:r.document.fields}}),u=mr.newFoundDocument(i,s,o,a);t=new zC(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Vu(n,r.document),s=r.readTime?Jr(r.readTime):rt.min(),o=mr.newNoDocument(i,s);t=new zC([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Vu(n,r.document);t=new zC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return We();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new __e(i,s);t=new L9(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return rt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?rt.min():o.readTime?Jr(o.readTime):rt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=vN(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=OC(u)?{documents:Y9(s,u)}:{query:$C(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$9(s,o.resumeToken);const l=mN(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(rt.min())>0){a.readTime=Hm(s,o.snapshotVersion.toTimestamp());const l=mN(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function S_e(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=vN(this.serializer),t.removeTarget=e,this.a_(t)}}class _ye extends GH{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function D_e(n,e){return n&&n.length>0?(et(void 0!==e),n.map(t=>function(i,s){let o=Jr(i.updateTime?i.updateTime:s);return o.isEqual(rt.min())&&(o=Jr(s)),new p_e(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=vN(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yE(this.serializer,r))};this.a_(t)}}class yye extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yN(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ae.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,yN(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vye{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yr(t),this.D_=!1):Ie("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Iye{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,M.A)(function*(){var u;bd(o)&&(Ie("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,M.A)(function*(h){const g=Oe(h);g.L_.add(4),yield e_(g),g.q_.set("Unknown"),g.L_.delete(4),yield DE(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.q_=new vye(r,i)}}function DE(n){return qN.apply(this,arguments)}function qN(){return(qN=(0,M.A)(function*(n){if(bd(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function e_(n){return GN.apply(this,arguments)}function GN(){return(GN=(0,M.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function sD(n,e){const t=Oe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),KN(t)?WN(t):r_(t).r_()&&HN(t,e))}function t_(n,e){const t=Oe(n),r=r_(t);t.N_.delete(e),r.r_()&&HH(t,e),0===t.N_.size&&(r.r_()?r.o_():bd(t)&&t.q_.set("Unknown"))}function HN(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}r_(n).A_(e)}function HH(n,e){n.Q_.xe(e),r_(n).R_(e)}function WN(n){n.Q_=new v_e({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),r_(n).start(),n.q_.v_()}function KN(n){return bd(n)&&!r_(n).n_()&&n.N_.size>0}function bd(n){return 0===Oe(n).L_.size}function WH(n){n.Q_=void 0}function Eye(n){return QN.apply(this,arguments)}function QN(){return(QN=(0,M.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function Tye(n){return YN.apply(this,arguments)}function YN(){return(YN=(0,M.A)(function*(n){n.N_.forEach((e,t)=>{HN(n,e)})})).apply(this,arguments)}function wye(n,e){return JN.apply(this,arguments)}function JN(){return(JN=(0,M.A)(function*(n,e){WH(n),KN(n)?(n.q_.M_(e),WN(n)):n.q_.set("Unknown")})).apply(this,arguments)}function bye(n,e,t){return XN.apply(this,arguments)}function XN(){return XN=(0,M.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof U9&&2===e.state&&e.cause)try{yield(r=(0,M.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oD(n,r)}else if(e instanceof zC?n.Q_.Ke(e):e instanceof L9?n.Q_.He(e):n.Q_.We(e),!t.isEqual(rt.min()))try{const r=yield OH(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Fr.EMPTY_BYTE_STRING,h.snapshotVersion)),HH(s,u);const g=new Oc(h.target,u,l,h.sequenceNumber);HN(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),yield oD(n,r)}var r}),XN.apply(this,arguments)}function oD(n,e,t){return ZN.apply(this,arguments)}function ZN(){return(ZN=(0,M.A)(function*(n,e,t){if(!fd(e))throw e;n.L_.add(1),yield e_(n),n.q_.set("Offline"),t||(t=()=>OH(n.localStore)),n.asyncQueue.enqueueRetryable((0,M.A)(function*(){Ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield DE(n)}))})).apply(this,arguments)}function KH(n,e){return e().catch(t=>oD(n,t,e))}function n_(n){return ek.apply(this,arguments)}function ek(){return(ek=(0,M.A)(function*(n){const e=Oe(n),t=Ad(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Aye(e);)try{const i=yield cye(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,Cye(e,i)}catch(i){yield oD(e,i)}QH(e)&&YH(e)})).apply(this,arguments)}function Aye(n){return bd(n)&&n.O_.length<10}function Cye(n,e){n.O_.push(e);const t=Ad(n);t.r_()&&t.V_&&t.m_(e.mutations)}function QH(n){return bd(n)&&!Ad(n).n_()&&n.O_.length>0}function YH(n){Ad(n).start()}function Dye(n){return tk.apply(this,arguments)}function tk(){return(tk=(0,M.A)(function*(n){Ad(n).p_()})).apply(this,arguments)}function Sye(n){return nk.apply(this,arguments)}function nk(){return(nk=(0,M.A)(function*(n){const e=Ad(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Rye(n,e,t){return rk.apply(this,arguments)}function rk(){return(rk=(0,M.A)(function*(n,e,t){const r=n.O_.shift(),i=fN.from(r,e,t);yield KH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield n_(n)})).apply(this,arguments)}function Pye(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,M.A)(function*(n,e){var t;e&&Ad(n).V_&&(yield(t=(0,M.A)(function*(i,s){if(N9(a=s.code)&&a!==ae.ABORTED){const o=i.O_.shift();Ad(i).s_(),yield KH(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield n_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),QH(n)&&YH(n)}),ik.apply(this,arguments)}function JH(n,e){return sk.apply(this,arguments)}function sk(){return(sk=(0,M.A)(function*(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=bd(t);t.L_.add(3),yield e_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield DE(t)})).apply(this,arguments)}function ok(n,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,M.A)(function*(n,e){const t=Oe(n);e?(t.L_.delete(2),yield DE(t)):e||(t.L_.add(2),yield e_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function r_(n){return n.K_||(n.K_=function(t,r,i){const s=Oe(t);return s.w_(),new mye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Eye.bind(null,n),Ro:Tye.bind(null,n),mo:wye.bind(null,n),d_:bye.bind(null,n)}),n.B_.push(function(){var e=(0,M.A)(function*(t){t?(n.K_.s_(),KN(n)?WN(n):n.q_.set("Unknown")):(yield n.K_.stop(),WH(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Ad(n){return n.U_||(n.U_=function(t,r,i){const s=Oe(t);return s.w_(),new _ye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Dye.bind(null,n),mo:Pye.bind(null,n),f_:Sye.bind(null,n),g_:Rye.bind(null,n)}),n.B_.push(function(){var e=(0,M.A)(function*(t){t?(n.U_.s_(),yield n_(n)):(yield n.U_.stop(),n.O_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class uk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new uk(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i_(n,e){if(Yr("AsyncQueue",`${e}: ${n}`),fd(n))return new ve(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class s_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=lE(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new s_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof s_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new s_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class XH{constructor(){this.W_=new or(Fe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):We():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class o_{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new o_(e,t,s_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xye{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mye{constructor(){this.queries=ZH(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Oe(t),s=i.queries;i.queries=ZH(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function ZH(){return new Nc(n=>p9(n),uE)}function ck(n,e){return lk.apply(this,arguments)}function lk(){return(lk=(0,M.A)(function*(n,e){const t=Oe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xye,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=i_(o,`Initialization of query '${jm(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&fk(t)})).apply(this,arguments)}function dk(n,e){return hk.apply(this,arguments)}function hk(){return(hk=(0,M.A)(function*(n,e){const t=Oe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Nye(n,e){const t=Oe(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&fk(t)}function kye(n,e,t){const r=Oe(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function fk(n){n.Y_.forEach(e=>{e.next()})}var pk,eW;(eW=pk||(pk={})).ea="default",eW.Cache="cache";class gk{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new o_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=o_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pk.Cache}}class Oye{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class tW{constructor(e){this.serializer=e}Es(e){return Vu(this.serializer,e)}ds(e){return e.metadata.exists?Q9(this.serializer,e.document,!1):mr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Jr(e)}}class Vye{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nW(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Xt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new tW(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||xt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,M.A)(function*(){const t=yield function lye(n,e,t,r){return VN.apply(this,arguments)}(e.localStore,new tW(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield dye(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function nW(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rW{constructor(e){this.key=e}}class iW{constructor(e){this.key=e}}class sW{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xt(),this.mutatedKeys=xt(),this.Aa=m9(e),this.Ra=new s_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new XH,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const v=i.get(h),E=cE(this.query,g)?g:null,w=!!v&&this.mutatedKeys.has(v.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;v&&E?v.data.isEqual(E.data)?w!==R&&(r.track({type:3,doc:E}),P=!0):this.ga(v,E)||(r.track({type:2,doc:E}),P=!0,(u&&this.Aa(E,u)>0||l&&this.Aa(E,l)<0)&&(a=!0)):!v&&E?(r.track({type:0,doc:E}),P=!0):v&&!E&&(r.track({type:1,doc:v}),P=!0,(u||l)&&(a=!0)),P&&(E?(o=o.add(E),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(E,w){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We()}};return R(E)-R(w)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,0!==o.length||l?{snapshot:new o_(this.query,e.Ra,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new XH,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new iW(r))}),this.da.forEach(r=>{e.has(r)||t.push(new rW(r))}),t}ba(e){this.Ta=e.Ts,this.da=xt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return o_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Fye{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Lye{constructor(e){this.key=e,this.va=!1}}class Uye{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nc(a=>p9(a),uE),this.Ma=new Map,this.xa=new Set,this.Oa=new or(Fe.comparator),this.Na=new Map,this.La=new SN,this.Ba={},this.ka=new Map,this.qa=mf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Bye(n,e){return mk.apply(this,arguments)}function mk(){return(mk=(0,M.A)(function*(n,e,t=!0){const r=aD(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield oW(r,e,t,!0),i})).apply(this,arguments)}function jye(n,e){return _k.apply(this,arguments)}function _k(){return(_k=(0,M.A)(function*(n,e){const t=aD(n);yield oW(t,e,!0,!1)})).apply(this,arguments)}function oW(n,e,t,r){return yk.apply(this,arguments)}function yk(){return(yk=(0,M.A)(function*(n,e,t,r){const i=yield Xm(n.localStore,ps(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield vk(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&sD(n.remoteStore,i),a})).apply(this,arguments)}function vk(n,e,t,r,i){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,M.A)(function*(n,e,t,r,i){n.Ka=(g,v,E)=>{return(w=(0,M.A)(function*(P,j,U,G){let ee=j.view.ma(U);ee.ns&&(ee=yield eD(P.localStore,j.query,!1).then(({documents:b})=>j.view.ma(b,ee)));const me=G&&G.targetChanges.get(j.targetId),_e=G&&null!=G.targetMismatches.get(j.targetId),D=j.view.applyChanges(ee,P.isPrimaryClient,me,_e);return xk(P,j.targetId,D.wa),D.snapshot}),function R(P,j,U,G){return w.apply(this,arguments)})(n,g,v,E);var w};const s=yield eD(n.localStore,e,!0),o=new sW(e,s.Ts),a=o.ma(s.documents),u=mE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);xk(n,t,l.wa);const h=new Fye(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot}),Ik.apply(this,arguments)}function zye(n,e,t){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,M.A)(function*(n,e,t){const r=Oe(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!uE(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&t_(r.remoteStore,i.targetId),a_(r,i.targetId)}).catch(hd))):(a_(r,i.targetId),yield Zm(r.localStore,i.targetId,!0))})).apply(this,arguments)}function $ye(n,e){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,M.A)(function*(n,e){const t=Oe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),t_(t.remoteStore,r.targetId))})).apply(this,arguments)}function wk(){return(wk=(0,M.A)(function*(n,e,t){const r=zk(n);try{const i=yield function(o,a){const u=Oe(o),l=Tr.now(),h=a.reduce((E,w)=>E.add(w.key),xt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let w=no(),R=xt();return u.cs.getEntries(E,h).next(P=>{w=P,w.forEach((j,U)=>{U.isValidDocument()||(R=R.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,w)).next(P=>{g=P;const j=[];for(const U of a){const G=m_e(U,g.get(U.key).overlayedDocument);null!=G&&j.push(new kc(U.key,G,X6(G.value.mapValue),br.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,j,a)}).next(P=>{v=P;const j=P.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(E,P.batchId,j)})}).then(()=>({batchId:v.batchId,changes:y9(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new or(wt)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Vc(r,i.changes),yield n_(r.remoteStore)}catch(i){const s=i_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function aW(n,e){return bk.apply(this,arguments)}function bk(){return(bk=(0,M.A)(function*(n,e){const t=Oe(n);try{const r=yield function uye(n,e){const t=Oe(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,g)=>{const v=i.get(g);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,g)));let E=v.withSequenceNumber(s.currentSequenceNumber);var R,P,j;null!==e.targetMismatches.get(g)?E=E.withResumeToken(Fr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),P=E,j=h,(0===(R=v).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,E))});let u=no(),l=xt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(VH(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(rt.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?et(o.va):i.removedDocuments.size>0&&(et(o.va),o.va=!1))}),yield Vc(t,r,e)}catch(r){yield hd(r)}})).apply(this,arguments)}function uW(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Oe(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const v of g.j_)v.Z_(a)&&(l=!0)}),l&&fk(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gye(n,e,t){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,M.A)(function*(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new or(Fe.comparator);o=o.insert(s,mr.newNoDocument(s,rt.min()));const a=xt().add(s),u=new gE(rt.min(),new Map,new or(wt),o,a);yield aW(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Mk(r)}else yield Zm(r.localStore,e,!1).then(()=>a_(r,e,t)).catch(hd)})).apply(this,arguments)}function Hye(n,e){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,M.A)(function*(n,e){const t=Oe(n),r=e.batch.batchId;try{const i=yield function aye(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,v=g.keys();let E=J.resolve();return v.forEach(w=>{E=E.next(()=>h.getEntry(u,w)).next(R=>{const P=l.docVersions.get(w);et(null!==P),R.version.compareTo(P)<0&&(g.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Pk(t,r,null),Rk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vc(t,i)}catch(i){yield hd(i)}})).apply(this,arguments)}function Wye(n,e,t){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,M.A)(function*(n,e,t){const r=Oe(n);try{const i=yield function(o,a){const u=Oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(et(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Pk(r,e,t),Rk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vc(r,i)}catch(i){yield hd(i)}})).apply(this,arguments)}function Sk(){return(Sk=(0,M.A)(function*(n,e){const t=Oe(n);bd(t.remoteStore)||Ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Oe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=i_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function Rk(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Pk(n,e,t){const r=Oe(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function a_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cW(n,r)})}function cW(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(t_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Mk(n))}function xk(n,e,t){for(const r of t)r instanceof rW?(n.La.addReference(r.key,e),Qye(n,r)):r instanceof iW?(Ie("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cW(n,r.key)):We()}function Qye(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ie("SyncEngine","New document in limbo: "+t),n.xa.add(r),Mk(n))}function Mk(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Fe(Xt.fromString(e)),r=n.qa.next();n.Na.set(r,new Lye(t)),n.Oa=n.Oa.insert(t,r),sD(n.remoteStore,new Oc(ps(Um(t.path)),r,"TargetPurposeLimboResolution",Oo.oe))}}function Vc(n,e,t){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,M.A)(function*(n,e,t){const r=Oe(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(u.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(l){i.push(l);const g=NN.Wi(u.targetId,l);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,M.A)(function*(l,h){const g=Oe(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>J.forEach(h,E=>J.forEach(E.$i,w=>g.persistence.referenceDelegate.addReference(v,E.targetId,w)).next(()=>J.forEach(E.Ui,w=>g.persistence.referenceDelegate.removeReference(v,E.targetId,w)))))}catch(v){if(!fd(v))throw v;Ie("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const w=g.os.get(E),P=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);g.os=g.os.insert(E,P)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),Nk.apply(this,arguments)}function Yye(n,e){return kk.apply(this,arguments)}function kk(){return(kk=(0,M.A)(function*(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=yield kH(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ve(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vc(t,r.hs)}var s})).apply(this,arguments)}function Jye(n,e){const t=Oe(n),r=t.Na.get(e);if(r&&r.va)return xt().add(r.key);{let i=xt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Xye(n,e){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,M.A)(function*(n,e){const t=Oe(n),r=yield eD(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&xk(t,e.targetId,i.wa),i})).apply(this,arguments)}function Zye(n,e){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,M.A)(function*(n,e){const t=Oe(n);return LH(t.localStore,e).then(r=>Vc(t,r))})).apply(this,arguments)}function eve(n,e,t,r){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,M.A)(function*(n,e,t,r){const i=Oe(n),s=yield function(a,u){const l=Oe(a),h=Oe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Mn(g,u).next(v=>v?l.localDocuments.getDocuments(g,v):J.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield n_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Pk(i,e,r||null),Rk(i,e),u=e,Oe(Oe(i.localStore).mutationQueue).On(u)):We(),yield Vc(i,s)):Ie("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Lk(){return(Lk=(0,M.A)(function*(n,e){const t=Oe(n);if(aD(t),zk(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield lW(t,r.toArray());t.Qa=!0,yield ok(t.remoteStore,!0);for(const s of i)sD(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(a_(t,o),Zm(t.localStore,o,!0))),t_(t.remoteStore,o)}),yield i,yield lW(t,r),function(o){const a=Oe(o);a.Na.forEach((u,l)=>{t_(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new or(Fe.comparator)}(t),t.Qa=!1,yield ok(t.remoteStore,!1)}})).apply(this,arguments)}function lW(n,e,t){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,M.A)(function*(n,e,t){const r=Oe(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield Xm(r.localStore,ps(u[0]));for(const l of u){const h=r.Fa.get(l),g=yield Xye(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield FH(r.localStore,o);a=yield Xm(r.localStore,l),yield vk(r,dW(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function dW(n){return l9(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nve(n){return t=Oe(n).localStore,Oe(Oe(t).persistence).Qi();var t}function rve(n,e,t,r){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,M.A)(function*(n,e,t,r){const i=Oe(n);if(i.Qa)return void Ie("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield LH(i.localStore,g9(s[0])),a=gE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fr.EMPTY_BYTE_STRING);yield Vc(i,o,a);break}case"rejected":yield Zm(i.localStore,e,!0),a_(i,e,r);break;default:We()}})).apply(this,arguments)}function ive(n,e,t){return jk.apply(this,arguments)}function jk(){return(jk=(0,M.A)(function*(n,e,t){const r=aD(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ie("SyncEngine","Adding an already active target "+i);continue}const s=yield FH(r.localStore,i),o=yield Xm(r.localStore,s);yield vk(r,dW(s),o.targetId,!1,o.resumeToken),sD(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Zm(r.localStore,i,!1).then(()=>{t_(r.remoteStore,i),a_(r,i)}).catch(hd))}})).apply(this,arguments)}function aD(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gye.bind(null,e),e.Ca.d_=Nye.bind(null,e.eventManager),e.Ca.$a=kye.bind(null,e.eventManager),e}function zk(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wye.bind(null,e),e}let u_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,M.A)(function*(){r.serializer=CE(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return NH(this.persistence,new MH,t.initialUser,this.serializer)}Ga(t){return new RN(JC.Zr,this.serializer)}Wa(t){return new zH}terminate(){var t=this;return(0,M.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class $k extends u_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,M.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield zk(r.Ja.syncEngine),yield n_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return NH(this.persistence,new MH,e.initialUser,this.serializer)}ja(e,t){return new wH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new Dme(t,this.persistence);return new Cme(e.asyncQueue,r)}Ga(e){const t=MN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new xN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qH(),iD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new zH}}class hW extends $k{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,M.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof jN&&(r.sharedClientState.syncEngine={no:eve.bind(null,i),ro:rve.bind(null,i),io:ive.bind(null,i),Qi:nve.bind(null,i),eo:Zye.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,M.A)(function*(o){yield function tve(n,e){return Lk.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=qH();if(!jN.D(t))throw new ve(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=MN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let c_=(()=>{class n{initialize(t,r){var i=this;return(0,M.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>uW(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=Yye.bind(null,i.syncEngine),yield ok(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Mye}createDatastore(t){const r=CE(t.databaseInfo.databaseId),i=new gye(t.databaseInfo);return new yye(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>uW(this.syncEngine,r,0),u=$H.D()?new $H:new hye,new Iye(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,l,h,g){const v=new Uye(s,o,a,u,l,h);return g&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,M.A)(function*(){var r,i,s;yield(s=(0,M.A)(function*(a){const u=Oe(a);Ie("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield e_(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function fW(n,e=10240){let t=0;return{read:()=>(0,M.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,M.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ave{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,M.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,M.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,M.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new Oye(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,M.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,M.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,M.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class uve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,M.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ve(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,M.A)(function*(o,a){const u=Oe(o),l={documents:a.map(E=>_E(u.serializer,E))},h=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Xt.emptyPath(),l,a.length),g=new Map;h.forEach(E=>{const w=function A_e(n,e){return"found"in e?function(r,i){et(!!i.found);const s=Vu(r,i.found.name),o=Jr(i.found.updateTime),a=i.found.createTime?Jr(i.found.createTime):rt.min(),u=new Ji({mapValue:{fields:i.found.fields}});return mr.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){et(!!i.missing),et(!!i.readTime);const s=Vu(r,i.missing),o=Jr(i.readTime);return mr.newNoDocument(s,o)}(n,e):We()}(u.serializer,E);g.set(w.key.toString(),w)});const v=[];return a.forEach(E=>{const w=g.get(E.toString());et(!!w),v.push(w)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,M.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Fe.fromPath(i);e.mutations.push(new dN(s,e.precondition(s)))}),yield(r=(0,M.A)(function*(s,o){const a=Oe(s),u={writes:o.map(l=>yE(a.serializer,l))};yield a.Mo("Commit",a.serializer.databaseId,Xt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw We();t=rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ve(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rt.min())?br.exists(!1):br.updateTime(t):br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rt.min()))throw new ve(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return br.updateTime(t)}return br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cve{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new $N(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,M.A)(function*(){const t=new uve(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!eE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!N9(t)}return!1}}class lve{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ki.UNAUTHENTICATED,this.clientId=b6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,M.A)(function*(u){Ie("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ie("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=i_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function qk(n,e){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,M.A)(function*(s){r.isEqual(s)||(yield kH(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Gk.apply(this,arguments)}function pW(n,e){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Wk(n);Ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JH(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JH(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function Wk(n){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,M.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qk(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;No("Error using user provided cache. Falling back to memory cache: "+e),yield qk(n,new u_)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),yield qk(n,new u_);var i;return n._offlineComponents})).apply(this,arguments)}function cD(n){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,M.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield pW(n,n._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),yield pW(n,new c_))),n._onlineComponents})).apply(this,arguments)}function gW(n){return Wk(n).then(e=>e.persistence)}function l_(n){return Wk(n).then(e=>e.localStore)}function mW(n){return cD(n).then(e=>e.remoteStore)}function Yk(n){return cD(n).then(e=>e.syncEngine)}function d_(n){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,M.A)(function*(n){const e=yield cD(n),t=e.eventManager;return t.onListen=Bye.bind(null,e.syncEngine),t.onUnlisten=zye.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jye.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$ye.bind(null,e.syncEngine),t})).apply(this,arguments)}function yW(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new uD({next:v=>{h.Za(),o.enqueueAndForget(()=>dk(s,g));const E=v.docs.has(a);!E&&v.fromCache?l.reject(new ve(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&u&&"server"===u.source?l.reject(new ve(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new gk(Um(a.path),h,{includeMetadataChanges:!0,_a:!0});return ck(s,g)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function vW(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new uD({next:v=>{h.Za(),o.enqueueAndForget(()=>dk(s,g)),v.fromCache&&"server"===u.source?l.reject(new ve(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new gk(a,h,{includeMetadataChanges:!0,_a:!0});return ck(s,g)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function IW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const EW=new Map;function Xk(n,e,t){if(!t)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TW(n,e,t,r){if(!0===e&&!0===r)throw new ve(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wW(n){if(!Fe.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bW(n){if(Fe.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":We()}function $t(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lD(n);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AW(n,e){if(e<=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CW{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=IW(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class SE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CW({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CW(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new pme;switch(r.type){case"firstParty":return new yme(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,M.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=EW.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),EW.delete(t),r.terminate())}(this),Promise.resolve()}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class _r{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _r(this.firestore,e,this._key)}}class Fu extends Xi{constructor(e,t,r){super(e,t,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _r(this.firestore,null,new Fe(e))}withConverter(e){return new Fu(this.firestore,e,this._path)}}function SW(n,e,...t){if(n=(0,Sn.Ku)(n),Xk("collection","path",e),n instanceof SE){const r=Xt.fromString(e,...t);return bW(r),new Fu(n,null,r)}{if(!(n instanceof _r||n instanceof Fu))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return bW(r),new Fu(n.firestore,null,r)}}function dD(n,e,...t){if(n=(0,Sn.Ku)(n),1===arguments.length&&(e=b6.newId()),Xk("doc","path",e),n instanceof SE){const r=Xt.fromString(e,...t);return wW(r),new _r(n,null,new Fe(r))}{if(!(n instanceof _r||n instanceof Fu))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return wW(r),new _r(n.firestore,n instanceof Fu?n.converter:null,new Fe(r))}}function RW(n,e){return n=(0,Sn.Ku)(n),e=(0,Sn.Ku)(e),(n instanceof _r||n instanceof Fu)&&(e instanceof _r||e instanceof Fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Zk(n,e){return n=(0,Sn.Ku)(n),e=(0,Sn.Ku)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&uE(n._query,e._query)&&n.converter===e.converter}class PW{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $N(this,"async_queue_retry"),this.Vu=()=>{const r=iD();r&&Ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=iD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=iD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,M.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!fd(t))throw t;Ie("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Yr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=uk.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&We()}verifyOperationInProgress(){}wu(){var e=this;return(0,M.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function eO(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class wve{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends SE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new PW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,M.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new PW(t),e._firestoreClient=void 0,yield t}})()}}function Ar(n){if(n._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xW(n),n._firestoreClient}function xW(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qme(n._databaseId,u,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IW(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lve(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function tO(){return(tO=(0,M.A)(function*(n){No("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();MW(n,c_.provider,{build:t=>new hW(t,e.cacheSizeBytes)})})).apply(this,arguments)}function MW(n,e,t){if((n=$t(n,Yn))._firestoreClient||n._terminated)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ve(ae.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xW(n)}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(Fr.fromBase64String(e))}catch(t){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yf{constructor(e){this._methodName=e}}class hD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wt(this._lat,e._lat)||wt(this._long,e._long)}}class fD{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const kve=/^__.*__$/;class Ove{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new qm(e,this.data,t,this.fieldTransforms)}}class NW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We()}}class pD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _D(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(kW(this.Cu)&&kve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vve{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||CE(e)}Qu(e,t,r,i=!1){return new pD({Cu:e,methodName:t,qu:r,path:gr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vf(n){const e=n._freezeSettings(),t=CE(n._databaseId);return new Vve(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gD(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);uO("Data must be an object, but it was:",o,r);const a=FW(r,o);let u,l;if(s.merge)u=new to(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const v=xE(e,g,t);if(!o.contains(v))throw new ve(ae.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);UW(h,v)||h.push(v)}u=new to(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new Ove(new Ji(a),u,l)}class PE extends yf{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof PE}}function OW(n,e,t){return new pD({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nO extends yf{_toFieldTransform(e){return new hE(e.path,new zm)}isEqual(e){return e instanceof nO}}class rO extends yf{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=OW(this,e,!0),r=this.Ku.map(s=>If(s,t)),i=new cf(r);return new hE(e.path,i)}isEqual(e){return e instanceof rO&&(0,Sn.bD)(this.Ku,e.Ku)}}class iO extends yf{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=OW(this,e,!0),r=this.Ku.map(s=>If(s,t)),i=new lf(r);return new hE(e.path,i)}isEqual(e){return e instanceof iO&&(0,Sn.bD)(this.Ku,e.Ku)}}class sO extends yf{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new $m(e.serializer,E9(e.serializer,this.$u));return new hE(e.path,t)}isEqual(e){return e instanceof sO&&this.$u===e.$u}}function oO(n,e,t,r){const i=n.Qu(1,e,t);uO("Data must be an object, but it was:",i,r);const s=[],o=Ji.empty();pd(r,(u,l)=>{const h=mD(e,u,t);l=(0,Sn.Ku)(l);const g=i.Nu(h);if(l instanceof PE)s.push(h);else{const v=If(l,g);null!=v&&(s.push(h),o.set(h,v))}});const a=new to(s);return new NW(o,a,i.fieldTransforms)}function aO(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[xE(e,r,t)],u=[i];if(s.length%2!=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(xE(e,s[v])),u.push(s[v+1]);const l=[],h=Ji.empty();for(let v=a.length-1;v>=0;--v)if(!UW(l,a[v])){const E=a[v];let w=u[v];w=(0,Sn.Ku)(w);const R=o.Nu(E);if(w instanceof PE)l.push(E);else{const P=If(w,R);null!=P&&(l.push(E),h.set(E,P))}}const g=new to(l);return new NW(h,g,o.fieldTransforms)}function VW(n,e,t,r=!1){return If(t,n.Qu(r?4:3,e))}function If(n,e){if(LW(n=(0,Sn.Ku)(n)))return uO("Unsupported field value:",e,n),FW(n,e);if(n instanceof yf)return function(r,i){if(!kW(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=If(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Sn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return E9(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Tr.fromDate(r);return{timestampValue:Hm(i.serializer,s)}}if(r instanceof Tr){const s=new Tr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hm(i.serializer,s)}}if(r instanceof hD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lu)return{bytesValue:$9(i.serializer,r._byteString)};if(r instanceof _r){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_N(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fD)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return lN(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${lD(r)}`)}(n,e)}function FW(n,e){const t={};return j6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(r,i)=>{const s=If(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function LW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Tr||n instanceof hD||n instanceof Lu||n instanceof _r||n instanceof yf||n instanceof fD)}function uO(n,e,t){if(!LW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=lD(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function xE(n,e,t){if((e=(0,Sn.Ku)(e))instanceof Fc)return e._internalPath;if("string"==typeof e)return mD(n,e);throw _D("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fve=new RegExp("[~\\*/\\[\\]]");function mD(n,e,t){if(e.search(Fve)>=0)throw _D(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fc(...e.split("."))._internalPath}catch{throw _D(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _D(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ve(ae.INVALID_ARGUMENT,a+n+u)}function UW(n,e){return n.some(t=>t.isEqual(e))}class ME{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lve extends ME{data(){return super.data()}}function yD(n,e){return"string"==typeof e?mD(n,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}function BW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ve(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cO{}class NE extends cO{}function Cd(n,e,...t){let r=[];e instanceof cO&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof h_).length,a=s.filter(u=>u instanceof kE).length;if(o>1||o>0&&a>0)throw new ve(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class kE extends NE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kE(e,t,r)}_apply(e){const t=this._parse(e);return qW(e._query,t),new Xi(e.firestore,e.converter,uN(e._query,t))}_parse(e){const t=vf(e.firestore);return function(s,o,a,u,l,h,g){let v;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){$W(g,h);const E=[];for(const w of g)E.push(zW(u,s,w));v={arrayValue:{values:E}}}else v=zW(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||$W(g,h),v=VW(a,"where",g,"in"===h||"not-in"===h);return Zt.create(l,h,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class h_ extends cO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new h_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:On.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)qW(o,u),o=uN(o,u)}(e._query,t),new Xi(e.firestore,e.converter,uN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lO extends NE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lO(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oE(s,o)}(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Mc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class vD extends NE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new vD(e,t,r)}_apply(e){return new Xi(e.firestore,e.converter,FC(e._query,this._limit,this._limitType))}}class ID extends NE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ID(e,t,r)}_apply(e){const t=jW(e,this.type,this._docOrFields,this._inclusive);return new Xi(e.firestore,e.converter,(s=t,new Mc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class ED extends NE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ED(e,t,r)}_apply(e){const t=jW(e,this.type,this._docOrFields,this._inclusive);return new Xi(e.firestore,e.converter,(s=t,new Mc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function jW(n,e,t,r){if(t[0]=(0,Sn.Ku)(t[0]),t[0]instanceof ME)return function(s,o,a,u,l){if(!u)throw new ve(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Bm(s))if(g.field.isKeyField())h.push(af(o,u.key));else{const v=u.data.field(g.field);if(RC(v))throw new ve(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const E=g.field.canonicalString();throw new ve(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new vd(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=vf(n.firestore);return function(o,a,u,l,h,g){const v=o.explicitOrderBy;if(h.length>v.length)throw new ve(ae.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let w=0;w<h.length;w++){const R=h[w];if(v[w].field.isKeyField()){if("string"!=typeof R)throw new ve(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!aN(o)&&-1!==R.indexOf("/"))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);const P=o.path.child(Xt.fromString(R));if(!Fe.isDocumentKey(P))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const j=new Fe(P);E.push(af(a,j))}else{const P=VW(u,l,R);E.push(P)}}return new vd(E,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zW(n,e,t){if("string"==typeof(t=(0,Sn.Ku)(t))){if(""===t)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aN(e)&&-1!==t.indexOf("/"))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!Fe.isDocumentKey(r))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return af(n,new Fe(r))}if(t instanceof _r)return af(n,t._key);throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lD(t)}.`)}function $W(n,e){if(!Array.isArray(n)||0===n.length)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qW(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ve(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dO{convertValue(e,t="none"){switch(_d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>wr(o.doubleValue));return new fD(s)}convertGeoPoint(e){return new hD(wr(e.latitude),wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nE(e));default:return null}}convertTimestamp(e){const t=Pc(e);return new Tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);et(tH(r));const i=new gd(r.get(1),r.get(3)),s=new Fe(r.popFirst(5));return i.isEqual(t)||Yr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function TD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Wve extends dO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _r(this.firestore,null,t)}}class Ef{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lc extends ME{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new OE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class OE extends Lc{data(e={}){return super.data(e)}}class Dd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ef(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new OE(this._firestore,this._userDataWriter,r.key,r,new Ef(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new OE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ef(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new OE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ef(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Qve(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qve(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We()}}function HW(n,e){return n instanceof Lc&&e instanceof Lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dd&&e instanceof Dd&&n._firestore===e._firestore&&Zk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Sd extends dO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _r(this.firestore,null,t)}}function WW(n,e,t){n=$t(n,_r);const r=$t(n.firestore,Yn),i=TD(n.converter,e,t);return f_(r,[gD(vf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,br.none())])}function KW(n,e,t,...r){n=$t(n,_r);const i=$t(n.firestore,Yn),s=vf(i);let o;return o="string"==typeof(e=(0,Sn.Ku)(e))||e instanceof Fc?aO(s,"updateDoc",n._key,e,t,r):oO(s,"updateDoc",n._key,e),f_(i,[o.toMutation(n._key,br.exists(!0))])}function QW(n,...e){var t,r,i;n=(0,Sn.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||eO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(eO(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(n instanceof _r)l=$t(n.firestore,Yn),h=Um(n._key.path),u={next:g=>{e[o]&&e[o](hO(l,n,g))},error:e[o+1],complete:e[o+2]};else{const g=$t(n,Xi);l=$t(g.firestore,Yn),h=g._query;const v=new Sd(l);u={next:E=>{e[o]&&e[o](new Dd(l,v,g,E))},error:e[o+1],complete:e[o+2]},BW(n._query)}return function(v,E,w,R){const P=new uD(R),j=new gk(E,P,w);return v.asyncQueue.enqueueAndForget((0,M.A)(function*(){return ck(yield d_(v),j)})),()=>{P.Za(),v.asyncQueue.enqueueAndForget((0,M.A)(function*(){return dk(yield d_(v),j)}))}}(Ar(l),h,a,u)}function f_(n,e){return function(r,i){const s=new Oi;return r.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function qye(n,e,t){return wk.apply(this,arguments)}(yield Yk(r),i,s)})),s.promise}(Ar(n),e)}function hO(n,e,t){const r=t.docs.get(e._key),i=new Sd(n);return new Lc(n,i,e._key,r,new Ef(t.hasPendingWrites,t.fromCache),e.converter)}const fIe={maxAttempts:5};class YW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vf(e)}set(e,t,r){this._verifyNotCommitted();const i=Rd(e,this._firestore),s=TD(i.converter,t,r),o=gD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,br.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Rd(e,this._firestore);let o;return o="string"==typeof(t=(0,Sn.Ku)(t))||t instanceof Fc?aO(this._dataReader,"WriteBatch.update",s._key,t,r,i):oO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rd(e,this._firestore);return this._mutations=this._mutations.concat(new Gm(t._key,br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rd(n,e){if((n=(0,Sn.Ku)(n)).firestore!==e)throw new ve(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pIe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=vf(t)}get(t){const r=Rd(t,this._firestore),i=new Wve(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return We();const o=s[0];if(o.isFoundDocument())return new ME(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ME(this._firestore,i,r._key,null,r.converter);throw We()})}set(t,r,i){const s=Rd(t,this._firestore),o=TD(s.converter,r,i),a=gD(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Rd(t,this._firestore);let a;return a="string"==typeof(r=(0,Sn.Ku)(r))||r instanceof Fc?aO(this._dataReader,"Transaction.update",o._key,r,i,s):oO(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Rd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rd(e,this._firestore),r=new Sd(this._firestore);return super.get(e).then(i=>new Lc(this._firestore,r,t._key,i._document,new Ef(!1,!1),t.converter))}}function pO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function e8(){if(typeof Uint8Array>"u")throw new ve("unimplemented","Uint8Arrays are not available in this environment.")}function t8(){if(!function Wme(){return typeof atob<"u"}())throw new ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){xm=Sm.SDK_VERSION,(0,Sm._registerComponent)(new h6.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Yn(new mme(r.getProvider("auth-internal")),new vme(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Sm.registerVersion)(E6,"4.7.3",e),(0,Sm.registerVersion)(E6,"4.7.3","esm2017")}();class VE{constructor(e){this._delegate=e}static fromBase64String(e){return t8(),new VE(Lu.fromBase64String(e))}static fromUint8Array(e){return e8(),new VE(Lu.fromUint8Array(e))}toBase64(){return t8(),this._delegate.toBase64()}toUint8Array(){return e8(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gO(n){return function bIe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class AIe{enableIndexedDbPersistence(e,t){return function Ave(n,e){No("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return MW(n,c_.provider,{build:r=>new $k(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Cve(n){return tO.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Dve(n){if(n._initialized&&!n._terminated)throw new ve(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{yield(t=(0,M.A)(function*(i){if(!Mu.D())return Promise.resolve();const s=i+"main";yield Mu.delete(s)}),function r(i){return t.apply(this,arguments)})(MN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class n8{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&No("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function DW(n,e,t,r={}){var i;const s=(n=$t(n,SE))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ki.MOCK_USER;else{a=(0,Sn.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ve(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ki(l)}n._authCredentials=new gme(new T6(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function Rve(n){return function dve(n){return n.asyncQueue.enqueue((0,M.A)(function*(){const e=yield gW(n),t=yield mW(n);return e.setNetworkEnabled(!0),function(i){const s=Oe(i);return s.L_.delete(0),DE(s)}(t)}))}(Ar(n=$t(n,Yn)))}(this._delegate)}disableNetwork(){return function Pve(n){return function hve(n){return n.asyncQueue.enqueue((0,M.A)(function*(){const e=yield gW(n),t=yield mW(n);return e.setNetworkEnabled(!1),(r=(0,M.A)(function*(s){const o=Oe(s);o.L_.add(0),yield e_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Ar(n=$t(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TW("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sve(n){return function(t){const r=new Oi;return t.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function Kye(n,e){return Sk.apply(this,arguments)}(yield Yk(t),r)})),r.promise}(Ar(n=$t(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function iIe(n,e){return function mve(n,e){const t=new uD(e);return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return i=yield d_(n),s=t,Oe(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return i=yield d_(n),s=t,void Oe(i).Y_.delete(s);var i,s}))}}(Ar(n=$t(n,Yn)),eO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new p_(this,SW(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,dD(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function Tve(n,e){if(n=$t(n,SE),Xk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(r=e,new Mc(Xt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gIe(n,e,t){n=$t(n,Yn);const r=Object.assign(Object.assign({},fIe),t);return function(s){if(s.maxAttempts<1)throw new ve(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Oi;return s.asyncQueue.enqueueAndForget((0,M.A)(function*(){const l=yield function _W(n){return cD(n).then(e=>e.datastore)}(s);new cve(s.asyncQueue,l,a,o,u).au()})),u.promise}(Ar(n),i=>e(new pIe(n,i)),r)}(this._delegate,t=>e(new r8(this,t)))}batch(){return Ar(this._delegate),new i8(new YW(this._delegate,e=>f_(this._delegate,e)))}loadBundle(e){return function xve(n,e){const t=Ar(n=$t(n,Yn)),r=new wve;return function _ve(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?O9().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return fW(h,g);if(h instanceof ArrayBuffer)return fW(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new ave(h,a);var h}(t,CE(e));n.asyncQueue.enqueueAndForget((0,M.A)(function*(){!function sve(n,e,t){const r=Oe(n);var i;(i=(0,M.A)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(w,R){const P=Oe(w),j=Jr(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",U=>P.Gr.getBundleMetadata(U,R.id)).then(U=>!!U&&U.createTime.compareTo(j)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(w=l).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);u._updateProgress(nW(l));const h=new Vye(l,o.localStore,a.serializer);let g=yield a.Ua();for(;g;){const E=yield h.la(g);E&&u._updateProgress(E),g=yield a.Ua()}const v=yield h.complete();return yield Vc(o,v.Ia,void 0),yield function(w,R){const P=Oe(w);return P.persistence.runTransaction("Save bundle","readwrite",j=>P.Gr.saveBundleMetadata(j,R))}(o.localStore,l),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(l){return No("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var w}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Yk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mve(n,e){return function yve(n,e){return n.asyncQueue.enqueue((0,M.A)(function*(){return function(r,i){const s=Oe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield l_(n),e)}))}(Ar(n=$t(n,Yn)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class bD extends dO{constructor(e){super(),this.firestore=e}convertBytes(e){return new VE(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class r8{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}get(e){const t=wf(e);return this._delegate.get(t).then(r=>new FE(this._firestore,new Lc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wf(e);return r?(pO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=wf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=wf(e);return this._delegate.delete(t),this}}class i8{constructor(e){this._delegate=e}set(e,t,r){const i=wf(e);return r?(pO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=wf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=wf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new OE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new LE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Tf(e,new bD(e),t),i.set(t,s)),s}}Tf.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new _r(t._delegate,r,new Fe(e)))}static forKey(e,t,r){return new sa(t,new _r(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new p_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new p_(this.firestore,SW(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Sn.Ku)(e))instanceof _r&&RW(this._delegate,e)}set(e,t){t=pO("DocumentReference.set",t);try{return t?WW(this._delegate,e,t):WW(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?KW(this._delegate,e):KW(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nIe(n){return f_($t(n.firestore,Yn),[new Gm(n._key,br.none())])}(this._delegate)}onSnapshot(...e){const t=s8(e),r=o8(e,i=>new FE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return QW(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Jve(n){n=$t(n,_r);const e=$t(n.firestore,Yn),t=Ar(e),r=new Sd(e);return function fve(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return(r=(0,M.A)(function*(s,o,a){try{const u=yield function(h,g){const v=Oe(h);return v.persistence.runTransaction("read document","readonly",E=>v.localDocuments.getDocument(E,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ve(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=i_(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield l_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Lc(e,r,n._key,i,new Ef(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Xve(n){n=$t(n,_r);const e=$t(n.firestore,Yn);return yW(Ar(e),n._key,{source:"server"}).then(t=>hO(e,n,t))}(this._delegate):function Yve(n){n=$t(n,_r);const e=$t(n.firestore,Yn);return yW(Ar(e),n._key).then(t=>hO(e,n,t))}(this._delegate),t.then(r=>new FE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function s8(n){for(const e of n)if("object"==typeof e&&!gO(e))return e;return{}}function o8(n,e){var t,r;let i;return i=gO(n[0])?n[0]:gO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class FE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HW(this._delegate,e._delegate)}}class LE extends FE{data(e){const t=this._delegate.data(e);return this._delegate._converter||function fme(n){n||We()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}where(e,t,r){try{return new Ms(this.firestore,Cd(this._delegate,function Uve(n,e,t){const r=e,i=yD("where",n);return kE._create(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,Cd(this._delegate,function Bve(n,e="asc"){const t=e,r=yD("orderBy",n);return lO._create(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,Cd(this._delegate,function jve(n){return AW("limit",n),vD._create("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,Cd(this._delegate,function zve(n){return AW("limitToLast",n),vD._create("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,Cd(this._delegate,function $ve(...n){return ID._create("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,Cd(this._delegate,function qve(...n){return ID._create("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,Cd(this._delegate,function Gve(...n){return ED._create("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,Cd(this._delegate,function Hve(...n){return ED._create("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return Zk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eIe(n){n=$t(n,Xi);const e=$t(n.firestore,Yn),t=Ar(e),r=new Sd(e);return function pve(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return(r=(0,M.A)(function*(s,o,a){try{const u=yield eD(s,o,!0),l=new sW(o,u.Ts),h=l.ma(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=i_(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield l_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Dd(e,r,n,i))}(this._delegate):"server"===e?.source?function tIe(n){n=$t(n,Xi);const e=$t(n.firestore,Yn),t=Ar(e),r=new Sd(e);return vW(t,n._query,{source:"server"}).then(i=>new Dd(e,r,n,i))}(this._delegate):function Zve(n){n=$t(n,Xi);const e=$t(n.firestore,Yn),t=Ar(e),r=new Sd(e);return BW(n._query),vW(t,n._query).then(i=>new Dd(e,r,n,i))}(this._delegate),t.then(r=>new mO(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=s8(e),r=o8(e,i=>new mO(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return QW(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}class DIe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new LE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new LE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DIe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new LE(this._firestore,r))})}isEqual(e){return HW(this._delegate,e._delegate)}}class p_ extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?dD(this._delegate):dD(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function rIe(n,e){const t=$t(n.firestore,Yn),r=dD(n),i=TD(n.converter,e);return f_(t,[gD(vf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return RW(this._delegate,e._delegate)}withConverter(e){return new p_(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function wf(n){return $t(n,_r)}class _O{constructor(...e){this._delegate=new Fc(...e)}static documentId(){return new _O(gr.keyField().canonicalString())}isEqual(e){return(e=(0,Sn.Ku)(e))instanceof Fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class bf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _Ie(){return new nO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bf(e)}static delete(){const e=function mIe(){return new PE("deleteField")}();return e._methodName="FieldValue.delete",new bf(e)}static arrayUnion(...e){const t=function yIe(...n){return new rO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bf(t)}static arrayRemove(...e){const t=function vIe(...n){return new iO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bf(t)}static increment(e){const t=function IIe(n){return new sO("increment",n)}(e);return t._methodName="FieldValue.increment",new bf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SIe={Firestore:n8,GeoPoint:hD,Timestamp:Tr,Blob:VE,Transaction:r8,WriteBatch:i8,DocumentReference:sa,DocumentSnapshot:FE,Query:Ms,QueryDocumentSnapshot:LE,QuerySnapshot:mO,CollectionReference:p_,FieldPath:_O,FieldValue:bf,setLogLevel:function CIe(n){!function hme(n){dd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function a8(n,e){return function xIe(n,e=Y5){return new Bt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function yO(n,e){return a8(n,e).pipe($e(t=>({payload:t,type:"query"})))}!function PIe(n){(function RIe(n,e){n.INTERNAL.registerComponent(new h6.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SIe)))})(n,(e,t)=>new n8(e,t,new AIe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Sc.A);class u8{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=p8(r,t);return new d8(i,s,this.afs)}snapshotChanges(){return function MIe(n,e){return a8(n,e).pipe(ZA(void 0),HM(),$e(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mo)}valueChanges(e={}){return this.snapshotChanges().pipe($e(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return sr(this.ref.get(e)).pipe(Mo)}}function AD(n,e){return yO(n,e).pipe(ZA(void 0),HM(),$e(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function c8(n,e,t){return AD(n,t).pipe(eC((r,i)=>function NIe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function kIe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function cme(n,e=zi){return n=n??lme,Ce((t,r)=>{let i,s=!0;t.subscribe(ke(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),$e(r=>r.map(i=>({type:i.type,payload:i}))))}function vO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function l8(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class d8{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=AD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe($e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ZA(void 0),HM(),Bn(([r,i])=>i.length>0||!r),$e(([,r])=>r),Mo)}auditTrail(e){return this.stateChanges(e).pipe(eC((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l8(e);return c8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mo)}valueChanges(e={}){return yO(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Mo)}get(e){return sr(this.query.get(e)).pipe(Mo)}add(e){return this.ref.add(e)}doc(e){return new u8(this.ref.doc(e),this.afs)}}class OIe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AD(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bn(t=>t.length>0),Mo):AD(this.query,this.afs.schedulers.outsideAngular).pipe(Mo)}auditTrail(e){return this.stateChanges(e).pipe(eC((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l8(e);return c8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mo)}valueChanges(e={}){return yO(this.query,this.afs.schedulers.outsideAngular).pipe($e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Mo)}get(e){return sr(this.query.get(e)).pipe(Mo)}}const h8=new Ae("angularfire2.enableFirestorePersistence"),f8=new Ae("angularfire2.firestore.persistenceSettings"),VIe=new Ae("angularfire2.firestore.settings"),FIe=new Ae("angularfire2.firestore.use-emulator");function p8(n,e=t=>t){return{query:e(n),ref:n}}let Uc=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,h,g,v,E,w,R,P,j,U){this.schedulers=u;const G=qM(t,a,r),ee=h;g&&d6(G,a,v,w,R,P,E,j),[this.firestore,this.persistenceEnabled$]=t6(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const me=a.runOutsideAngular(()=>G.firestore());if(s&&me.settings(s),ee&&me.useEmulator(...ee),i&&!PI(o)){const _e=()=>{try{return sr(me.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(D){return typeof console<"u"&&console.warn(D),ut(!1)}};return[me,a.runOutsideAngular(_e)]}return[me,ut(!1)]},[s,ee,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=p8(i,r),a=this.schedulers.ngZone.run(()=>s);return new d8(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new OIe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new u8(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Se(TC),Se(wC,8),Se(h8,8),Se(VIe,8),Se(wo),Se(Wt),Se(Z5),Se(f8,8),Se(FIe,8),Se(Pa,8),Se(s6,8),Se(o6,8),Se(a6,8),Se(u6,8),Se(c6,8),Se(l6,8),Se(J5,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),LIe=(()=>{class n{constructor(){Sc.A.registerVersion("angularfire",EC.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:h8,useValue:!0},{provide:f8,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=uu({type:n});static \u0275inj=js({providers:[Uc]})}return n})(),g_=(()=>{class n{constructor(){this.client=Y(Uc),this.afAuth=Y(Pa)}getTrainings(){return new Bt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Training",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{t.next(s)}):t.next([])}).catch(()=>t.next([]))})}getMeals(){return new Bt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Meal",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{console.log("Pobrane posi\u0142ki:",s),t.next(s)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",r),t.next([])})})}addTraining(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{const i=r?.uid;i&&this.client.collection("Training").doc(t.id).set({...t,uid:i,date:t.date.toISOString()}).then(()=>console.log("Training added/updated successfully")).catch(s=>console.error("Error adding/updating training:",s))}).catch(r=>console.error("Error getting user:",r))}addMeal(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){const i=t.id||this.client.createId();this.client.collection("Meal").doc(i).set({...t,uid:r.uid,date:t.date.toISOString()}).then(()=>console.log("Meal added/updated successfully")).catch(s=>console.error("Error adding/updating meal:",s))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}updateTraining(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}getTrainingsByDate(t){return console.log("Pobieranie trening\xf3w dla daty:",t),new Bt(r=>{this.afAuth.currentUser.then(i=>{const s=i?.uid;if(s){const o=new Date(t);o.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",o),console.log("Koniec dnia:",a),this.client.collection("Training",u=>u.where("uid","==",s).where("date",">=",o.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane treningi:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(t){return console.log("Pobieranie posi\u0142k\xf3w dla daty:",t),new Bt(r=>{this.afAuth.currentUser.then(i=>{const s=i?.uid;if(s){const o=new Date(t);o.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",o),console.log("Koniec dnia:",a),this.client.collection("Meal",u=>u.where("uid","==",s).where("date",">=",o.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane posi\u0142ki:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(t,r){return new Bt(i=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("Meal",a=>a.where("uid","==",o).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(t,r){return new Bt(i=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("Training",a=>a.where("uid","==",o).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(t).delete().then(()=>console.log("Training deleted successfully")).catch(s=>console.error("Error deleting training:",s)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(t).delete().then(()=>console.log("Meal deleted successfully")).catch(s=>console.error("Error deleting meal:",s)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Xr=void 0,BIe=["pl",[["a","p"],["AM","PM"],Xr],Xr,[["n","p","w","\u015b","c","p","s"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["N","P","W","\u015a","C","P","S"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],Xr,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",Xr,"{1} {0}",Xr],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[Xr,"$"],CAD:[Xr,"$"],CNY:[Xr,"\xa5"],GBP:[Xr,"\xa3"],HKD:[Xr,"$"],ILS:[Xr,"\u20aa"],INR:[Xr,"\u20b9"],JPY:[Xr,"\xa5"],KRW:[Xr,"\u20a9"],MXN:[Xr,"$"],NZD:[Xr,"$"],PHP:[Xr,"\u20b1"],PLN:["z\u0142"],RON:[Xr,"lej"],TWD:[Xr,"NT$"],USD:[Xr,"$"],VND:[Xr,"\u20ab"]},"ltr",function UIe(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:0===r&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:0===r&&1!==t&&t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||0===r&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===r&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14?4:5}];let g8=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(yc),De(To))}}static{this.\u0275dir=It({type:n})}}return n})(),Af=(()=>{class n extends g8{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,features:[Nn]})}}return n})();const Uu=new Ae(""),$Ie={provide:Uu,useExisting:bn(()=>oa),multi:!0},GIe=new Ae("");let oa=(()=>{class n extends g8{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qIe(){const n=sd()?sd().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(yc),De(To),De(GIe,8))}}static{this.\u0275dir=It({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&je("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[pr([$Ie]),Nn]})}}return n})();function Pd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const _s=new Ae(""),xd=new Ae("");function I8(n){return Pd(n.value)?{required:!0}:null}function CD(n){return null}function C8(n){return null!=n}function D8(n){return TI(n)?sr(n):n}function S8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function R8(n,e){return e.map(t=>t(n))}function P8(n){return n.map(e=>function WIe(n){return!n.validate}(e)?e:t=>e.validate(t))}function IO(n){return null!=n?function x8(n){if(!n)return null;const e=n.filter(C8);return 0==e.length?null:function(t){return S8(R8(t,e))}}(P8(n)):null}function EO(n){return null!=n?function M8(n){if(!n)return null;const e=n.filter(C8);return 0==e.length?null:function(t){return function jIe(...n){const e=Hq(n),{args:t,keys:r}=BG(n),i=new Bt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;Po(t[h]).subscribe(ke(s,v=>{g||(g=!0,l--),a[h]=v},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?zG(r,a):a),s.complete())}))}});return e?i.pipe(jG(e)):i}(R8(t,e).map(D8)).pipe($e(S8))}}(P8(n)):null}function N8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TO(n){return n?Array.isArray(n)?n:[n]:[]}function DD(n,e){return Array.isArray(n)?n.includes(e):n===e}function V8(n,e){const t=TO(e);return TO(n).forEach(i=>{DD(t,i)||t.push(i)}),t}function F8(n,e){return TO(e).filter(t=>!DD(n,t))}class L8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=IO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ns extends L8{get formDirective(){return null}get path(){return null}}class Md extends L8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class U8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Bu=(()=>{class n extends U8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Md,2))}}static{this.\u0275dir=It({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&rm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nn]})}}return n})(),m_=(()=>{class n extends U8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Ns,10))}}static{this.\u0275dir=It({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&rm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Nn]})}}return n})();const UE="VALID",RD="INVALID",__="PENDING",BE="DISABLED";class y_{}class j8 extends y_{constructor(e,t){super(),this.value=e,this.source=t}}class AO extends y_{constructor(e,t){super(),this.pristine=e,this.source=t}}class CO extends y_{constructor(e,t){super(),this.touched=e,this.source=t}}class PD extends y_{constructor(e,t){super(),this.status=e,this.source=t}}function DO(n){return(xD(n)?n.validators:n)||null}function SO(n,e){return(xD(e)?e.asyncValidators:n)||null}function xD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class RO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=DI(()=>this.statusReactive()),this.statusReactive=Qs(void 0),this._pristine=DI(()=>this.pristineReactive()),this.pristineReactive=Qs(!0),this._touched=DI(()=>this.touchedReactive()),this.touchedReactive=Qs(!1),this._events=new V,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Du(this.statusReactive)}set status(e){Du(()=>this.statusReactive.set(e))}get valid(){return this.status===UE}get invalid(){return this.status===RD}get pending(){return this.status==__}get disabled(){return this.status===BE}get enabled(){return this.status!==BE}get pristine(){return Du(this.pristineReactive)}set pristine(e){Du(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Du(this.touchedReactive)}set touched(e){Du(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(V8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(V8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F8(e,this._rawAsyncValidators))}hasValidator(e){return DD(this._rawValidators,e)}hasAsyncValidator(e){return DD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new CO(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new CO(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new AO(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new AO(!0,r))}markAsPending(e={}){this.status=__;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new PD(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=BE,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new j8(this.value,r)),this._events.next(new PD(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=UE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===UE||this.status===__)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new j8(this.value,t)),this._events.next(new PD(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?BE:UE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=__,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=D8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new PD(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ht,this.statusChanges=new Ht}_calculateStatus(){return this._allControlsDisabled()?BE:this.errors?RD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(__)?__:this._anyControlsHaveStatus(RD)?RD:UE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new AO(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new CO(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function eEe(n){return Array.isArray(n)?IO(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tEe(n){return Array.isArray(n)?EO(n):n||null}(this._rawAsyncValidators)}}class PO extends RO{constructor(e,t,r){super(DO(t),SO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $8(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new ye(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function z8(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new ye(1e3,"");if(!r[t])throw new ye(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const v_=new Ae("CallSetDisabledState",{providedIn:"root",factory:()=>MD}),MD="always";function jE(n,e,t=MD){xO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function iEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&q8(n,e)})}(n,e),function oEe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&q8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rEe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function OD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xO(n,e){const t=function k8(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(N8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function O8(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(N8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();OD(e._rawValidators,i),OD(e._rawAsyncValidators,i)}function q8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const dEe={provide:Ns,useExisting:bn(()=>Nd)},zE=Promise.resolve();let Nd=(()=>{class n extends Ns{get submitted(){return Du(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=DI(()=>this.submittedReactive()),this.submittedReactive=Qs(!1),this._directives=new Set,this.ngSubmit=new Ht,this.form=new PO({},IO(t),EO(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){zE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){zE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){zE.then(()=>{const r=this._findContainer(t.path),i=new PO({});(function G8(n,e){xO(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){zE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){zE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),function H8(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(De(_s,10),De(xd,10),De(v_,8))}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&je("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pr([dEe]),Nn]})}}return n})();function W8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function K8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Q8=class extends RO{constructor(e=null,t,r){super(DO(t),SO(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=K8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){W8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){W8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){K8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},pEe={provide:Md,useExisting:bn(()=>xa)},X8=Promise.resolve();let xa=(()=>{class n extends Md{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Q8,this._registered=!1,this.name="",this.update=new Ht,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function kO(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===oa?t=s:function cEe(n){return Object.getPrototypeOf(n.constructor)===Af}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function NO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){X8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&cm(r);X8.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ND(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(Ns,9),De(_s,10),De(xd,10),De(Uu,10),De($h,8),De(v_,8))}}static{this.\u0275dir=It({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pr([pEe]),Nn,Pi]})}}return n})(),I_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const gEe={provide:Uu,useExisting:bn(()=>Cf),multi:!0};let Cf=(()=>{class n extends Af{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&je("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[pr([gEe]),Nn]})}}return n})();const bEe={provide:Uu,useExisting:bn(()=>FD),multi:!0};function sK(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let FD=(()=>{class n extends Af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=sK(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function AEe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&je("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pr([bEe]),Nn]})}}return n})(),oK=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(sK(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(De(To),De(yc),De(FD,9))}}static{this.\u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const CEe={provide:Uu,useExisting:bn(()=>LO),multi:!0};function aK(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let LO=(()=>{class n extends Af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function DEe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&je("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[pr([CEe]),Nn]})}}return n})(),uK=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(aK(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(aK(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(De(To),De(yc),De(LO,9))}}static{this.\u0275dir=It({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Df=(()=>{class n{constructor(){this._validator=CD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):CD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=It({type:n,features:[Pi]})}}return n})();const PEe={provide:_s,useExisting:bn(()=>kd),multi:!0};let kd=(()=>{class n extends Df{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=cm,this.createValidator=t=>I8}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&wu("required",i._enabled?"":null)},inputs:{required:"required"},features:[pr([PEe]),Nn]})}}return n})();const OEe={provide:_s,useExisting:bn(()=>UO),multi:!0};let UO=(()=>{class n extends Df{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function A8(n){if(!n)return CD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Pd(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=It({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&wu("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[pr([OEe]),Nn]})}}return n})(),VEe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=uu({type:n})}static{this.\u0275inj=js({})}}return n})(),ys=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:v_,useValue:t.callSetDisabledState??MD}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=uu({type:n})}static{this.\u0275inj=js({imports:[VEe]})}}return n})();function LEe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",9),W(2),B(),q(3,"input",10),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.calories,i)||(s.model.calories=i),ht(i)}),B()()}if(2&n){const t=Qe();ne(2),kn(t.caloriesLabel),ne(),Ot("ngModel",t.model.calories)}}function UEe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",11),W(2),B(),q(3,"input",12),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.burnedKcal,i)||(s.model.burnedKcal=i),ht(i)}),B()()}if(2&n){const t=Qe();ne(2),kn(t.burnedCalories),ne(),Ot("ngModel",t.model.burnedKcal)}}function BEe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",13),W(2),B(),q(3,"input",14),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.videoLink,i)||(s.model.videoLink=i),ht(i)}),B()()}if(2&n){const t=Qe();ne(2),kn(t.videoLinkLabel),ne(),Ot("ngModel",t.model.videoLink)}}function jEe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",15),W(2),B(),q(3,"input",16),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.weight,i)||(s.model.weight=i),ht(i)}),B()()}if(2&n){const t=Qe();ne(2),kn(t.weightLabel),ne(),Ot("ngModel",t.model.weight)}}function zEe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",17),W(2),B(),q(3,"input",18),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.time,i)||(s.model.time=i),ht(i)}),B()()}if(2&n){const t=Qe();ne(2),kn(t.timeLabel),ne(),Ot("ngModel",t.model.time)}}function $Ee(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"label",19),W(2),B(),q(3,"input",20),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.model.date,i)||(s.model.date=i),ht(i)}),je("ngModelChange",function(i){return Et(t),ht(Qe().onDateChange(i))}),B()()}if(2&n){const t=Qe();ne(2),kn(t.dateLabel),ne(),Ot("ngModel",t.model.date)}}let qEe=(()=>{class n{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.videoLinkLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.save=new Ht}onSubmit(){this.save.emit(this.model)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",videoLinkLabel:"videoLinkLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Er],decls:18,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoLink",1,"form-label"],["type","string","id","videoLink","name","videoLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h5",1),W(2),B(),Xs(3,"button",2),B(),q(4,"div",3)(5,"form",4),je("ngSubmit",function(){return i.onSubmit()}),q(6,"div",5)(7,"label",6),W(8),B(),q(9,"input",7),Vt("ngModelChange",function(o){return St(i.model.name,o)||(i.model.name=o),o}),B()(),Wn(10,LEe,4,2,"div",5)(11,UEe,4,2,"div",5)(12,BEe,4,2,"div",5)(13,jEe,4,2,"div",5)(14,zEe,4,2,"div",5)(15,$Ee,4,2,"div",5),q(16,"button",8),W(17," Zapisz zmiany "),B()()()),2&r&&(ne(2),kn(i.title),ne(6),kn(i.nameLabel),ne(),Ot("ngModel",i.model.name),ne(),un(i.caloriesLabel?10:-1),ne(),un(i.burnedCalories?11:-1),ne(),un(i.videoLinkLabel?12:-1),ne(),un(i.weightLabel?13:-1),ne(),un(i.timeLabel?14:-1),ne(),un(i.dateLabel?15:-1))},dependencies:[ys,I_,oa,Cf,Bu,m_,kd,xa,Nd],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:12px}label[_ngcontent-%COMP%]{font-size:14px}input.form-control[_ngcontent-%COMP%]{font-size:14px;padding:8px;border-radius:4px}button[type=submit][_ngcontent-%COMP%]{font-size:14px;padding:10px 20px}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#254636}}"]})}}return n})(),LD=(()=>{class n{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.videoLinkLabel="",this.dateLabel="",this.model={},this.save=new Ht}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",videoLinkLabel:"videoLinkLabel",dateLabel:"dateLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Er],decls:5,vars:10,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),je("save",function(o){return i.save.emit(o)}),B()()()()()),2&r&&(_n("id",i.modalId),ne(4),_n("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("videoLinkLabel",i.videoLinkLabel)("model",i.model))},dependencies:[qEe],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:90%;margin:20px auto}.modal-content[_ngcontent-%COMP%]{padding:15px}.modal-header[_ngcontent-%COMP%]{padding-bottom:8px}.modal-title[_ngcontent-%COMP%], .btn-close[_ngcontent-%COMP%]{font-size:20px}.modal-body[_ngcontent-%COMP%]{padding:12px 0}}"]})}}return n})(),GEe=(()=>{class n{constructor(){this.trainingAndMealService=Y(g_),this.meals=[],this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}addMeal(t){this.trainingAndMealService.addMeal(t),this.meals.push(t),console.log("Meal added:",t),this.resetForm()}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}resetForm(){this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-meal-modal"]],standalone:!0,features:[Er],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","dateLabel","model"]],template:function(r,i){1&r&&(q(0,"app-modal",0),je("save",function(o){return i.addMeal(o)}),B()),2&r&&_n("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("dateLabel","Data")("model",i.model)},dependencies:[ys,LD]})}}return n})(),HEe=(()=>{class n{constructor(){this.trainingAndMealService=Y(g_),this.router=Y(Ni),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:""}}addMeal(t){throw new Error("Method not implemented.")}addTraining(t){this.trainingAndMealService.addTraining(t),this.training.push(t),console.log("Meal added:",t),this.router.navigate(["/home"]),this.resetForm()}onDateChange(t){this.model.date=new Date(`${t}T00:00:00`)}resetForm(){this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:""}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-training-modal"]],standalone:!0,features:[Er],decls:1,vars:8,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(q(0,"app-modal",0),je("save",function(o){return i.addTraining(o)}),B()),2&r&&_n("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[ys,LD]})}}return n})(),WEe=(()=>{class n{constructor(){this.meal=null,this.Save=new Ht,this.close=new Ht,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}ngOnChanges(t){t.meal&&this.meal&&(this.model={...this.meal,date:new Date(this.meal.date)})}saveMeal(t){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Pi,Er],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){1&r&&(q(0,"app-modal",0),je("save",function(o){return i.saveMeal(o)}),B()),2&r&&_n("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[ys,LD]})}}return n})(),KEe=(()=>{class n{constructor(){this.training=null,this.Save=new Ht,this.close=new Ht,this.model={name:"",isDone:!1,burnedKcal:0,time:"",videoLink:"",date:new Date,id:""}}ngOnChanges(t){t.training&&this.training&&(this.model={...this.training,date:new Date(this.training.date)})}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Pi,Er],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(q(0,"app-modal",0),je("save",function(){return i.saveTraining()}),B()),2&r&&_n("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[ys,LD]})}}return n})(),QEe=(()=>{class n{constructor(){this.client=Y(Uc)}getQuotes(){return this.client.collection("quotes").valueChanges()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const YEe=n=>["/day-details",n];function JEe(n,e){if(1&n&&(q(0,"h2"),W(1),B()),2&n){const t=Qe();ne(),kn(t.currentQuote.name)}}function XEe(n,e){if(1&n&&(q(0,"span"),W(1),B()),2&n){const t=e.$implicit;ne(),kn(t)}}function ZEe(n,e){if(1&n){const t=Vr();q(0,"div",7),je("click",function(){const i=Et(t).$implicit;return ht(Qe().selectDay(i.date))}),W(1),B()}if(2&n){const t=e.$implicit,r=Qe();rm("other-month",t.isOtherMonth)("has-events",r.hasEventsForDay(t.date)),ne(),fr(" ",t.date.getDate()," ")}}function e0e(n,e){if(1&n){const t=Vr();q(0,"div"),W(1),B(),q(2,"div",18)(3,"button",19),je("click",function(){const i=Et(t).$implicit;return ht(Qe(2).editTraining(i))}),W(4," Edytuj "),B(),q(5,"button",20),je("click",function(){const i=Et(t).$implicit;return ht(Qe(2).deleteTraining(i.id))}),W(6," Usu\u0144 "),B(),q(7,"label",21)(8,"input",22),je("change",function(){const i=Et(t).$implicit;return ht(Qe(2).toggleTrainingDone(i))}),B(),W(9," Zrobiony "),B()()}if(2&n){const t=e.$implicit;ne(),dA(" ",t.name," - ",t.burnedKcal," kcal ",t.time,"min "),ne(7),_n("checked",t.isDone)}}function t0e(n,e){if(1&n){const t=Vr();q(0,"div"),W(1),B(),q(2,"div",18)(3,"button",23),je("click",function(){const i=Et(t).$implicit;return ht(Qe(2).editMeal(i))}),W(4," Edytuj "),B(),q(5,"button",20),je("click",function(){const i=Et(t).$implicit;return ht(Qe(2).deleteMeal(i.id))}),W(6," Usu\u0144 "),B()()}if(2&n){const t=e.$implicit;ne(),dA(" ",t.name," - ",t.calories," kcal (",t.weight," g) ")}}function n0e(n,e){if(1&n&&(q(0,"div",14)(1,"h4",17),So(2,"date"),W(3),So(4,"date"),B(),q(5,"div")(6,"h4"),W(7,"Treningi"),B(),Ys(8,e0e,10,4,null,null,ba),B(),q(10,"div")(11,"h4"),W(12,"Posi\u0142ki"),B(),Ys(13,t0e,7,3,null,null,ba),B()()),2&n){const t=e.$implicit,r=Qe();ne(),_n("routerLink",d1(8,YEe,rd(2,2,t.date,"yyyy-MM-dd"))),ne(2),fr(" ",rd(4,5,t.date,"EEEE, d MMMM")," "),ne(5),Js(r.getTrainingsForDay(t.date)),ne(5),Js(r.getMealsForDay(t.date))}}!function Tle(n,e,t){(function zse(n,e,t){"string"!=typeof e&&(t=e,e=n[rr.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),im[e]=n,t&&(im[e][rr.ExtraData]=t)})(n,e,t)}(BIe);let r0e=(()=>{class n{constructor(){this.TrainingAndMealService=Y(g_),this.quotesService=Y(QEe),this.meals=Qs([]),this.trainings=Qs([]),this.calendarDays=[],this.currentWeek=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.quotes=[],this.currentIndex=0,this.showModal=Qs(!1),this.selectedDay=null,this.dayNames=["Pn","Wt","\u015ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar(),this.generateWeek(new Date)}loadData(){this.TrainingAndMealService.getTrainings().subscribe(t=>{const r=t.map((i,s)=>({...i,id:i.id||`training-${s}-${(new Date).getTime()}`,date:new Date(i.date)}));this.trainings.set(r),this.quotesService.getQuotes().subscribe(i=>{this.quotes=i,this.quotes.length>0&&(this.currentQuote=this.quotes[0]),this.rotateQuotes()})}),this.TrainingAndMealService.getMeals().subscribe(t=>{const r=t.map((i,s)=>({...i,id:i.id||`meal-${s}-${(new Date).getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}rotateQuotes(){setInterval(()=>{this.quotes.length>0&&(this.currentIndex=(this.currentIndex+1)%this.quotes.length,this.currentQuote=this.quotes[this.currentIndex])},1e4)}generateWeek(t){const r=new Date(t.setDate(t.getDate()-t.getDay()+1));this.currentWeek=[];for(let i=0;i<7;i++){const s=new Date(r);s.setDate(r.getDate()+i),this.currentWeek.push({date:s,isOtherMonth:!1})}}generateCalendar(){const t=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),o=(t.getDay()||7)-1,u=7-(r.getDay()||7);this.calendarDays=[];for(let l=o;l>0;l--){const h=new Date(this.currentYear,this.currentMonth,1-l);this.calendarDays.push({date:h,isOtherMonth:!0})}for(let l=1;l<=i;l++){const h=new Date(this.currentYear,this.currentMonth,l);this.calendarDays.push({date:h,isOtherMonth:!1})}for(let l=1;l<=u;l++){const h=new Date(this.currentYear,this.currentMonth+1,l);this.calendarDays.push({date:h,isOtherMonth:!0})}}prevWeek(){const t=this.currentWeek[0].date,r=new Date(t.setDate(t.getDate()-7));this.generateWeek(r)}nextWeek(){const t=this.currentWeek[6].date,r=new Date(t.setDate(t.getDate()+1));this.generateWeek(r)}getWeekRange(){const r=this.currentWeek[6].date;return`${this.currentWeek[0].date.toLocaleDateString()} - ${r.toLocaleDateString()}`}selectDay(t){this.selectedDay=t,console.log("Wybrano dzie\u0144:",this.selectedDay),this.generateWeek(t)}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}getMealsForDay(t){return this.meals().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}getTrainingsForDay(t){return this.trainings().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}hasEventsForDay(t){return this.getMealsForDay(t).length>0||this.getTrainingsForDay(t).length>0}closeModal(){this.showModal.set(!1)}editMeal(t){this.selectedMeal={...t}}toggleTrainingDone(t){const r={...t,isDone:!t.isDone};this.saveEditedTraining(r)}saveEditedMeal(t){this.TrainingAndMealService.updateMeal(t).then(()=>{this.meals.set(this.meals().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}deleteMeal(t){this.TrainingAndMealService.deleteMeal(t).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}editTraining(t){this.selectedTraining={...t}}saveEditedTraining(t){this.TrainingAndMealService.updateTraining(t).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited training:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 treningu. Spr\xf3buj ponownie.")})}deleteTraining(t){this.TrainingAndMealService.deleteTraining(t).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xf3buj ponownie.")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-calendar"]],standalone:!0,features:[pr([{provide:Ic,useValue:"pl"}]),Er],decls:37,vars:6,consts:[[1,"quote-container"],[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"layout-container"],[1,"monthly-calendar"],[1,"calendar-navigation"],[3,"click"],[1,"day-names"],[1,"calendar-days"],[3,"other-month","has-events"],[1,"weekly-view"],[1,"week-header"],[1,"week-days"],[1,"day-details"],[3,"Save","close","meal"],[3,"Save","close","training"],[3,"routerLink"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"change","checked"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){1&r&&(q(0,"div",0),Wn(1,JEe,2,1,"h2"),B(),q(2,"div",1)(3,"button",2),W(4," Dodaj Posi\u0142ek "),B(),q(5,"button",3),W(6," Dodaj Trening "),B()(),q(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),je("click",function(){return i.prevMonth()}),W(11,"Poprzedni"),B(),q(12,"span"),W(13),B(),q(14,"button",7),je("click",function(){return i.nextMonth()}),W(15,"Nast\u0119pny"),B()(),q(16,"div",8),Ys(17,XEe,2,1,"span",null,ba),B(),q(19,"div",9),Ys(20,ZEe,2,5,"div",10,ba),B()(),q(22,"div",11)(23,"div",12)(24,"button",7),je("click",function(){return i.prevWeek()}),W(25,"Poprzedni tydzie\u0144"),B(),q(26,"span"),W(27),B(),q(28,"button",7),je("click",function(){return i.nextWeek()}),W(29,"Nast\u0119pny tydzie\u0144"),B()(),q(30,"div",13),Ys(31,n0e,15,10,"div",14,ba),B()()(),Xs(33,"app-meal-modal")(34,"app-training-modal"),q(35,"app-edit",15),je("Save",function(o){return i.saveEditedMeal(o)})("close",function(){return i.closeModal()}),B(),q(36,"app-edit-training",16),je("Save",function(o){return i.saveEditedTraining(o)})("close",function(){return i.closeModal()}),B()),2&r&&(ne(),un(i.currentQuote?1:-1),ne(12),o1("",i.months[i.currentMonth]," ",i.currentYear,""),ne(4),Js(i.dayNames),ne(3),Js(i.calendarDays),ne(7),fr(" ",i.getWeekRange()," "),ne(4),Js(i.currentWeek),ne(4),_n("meal",i.selectedMeal),ne(),_n("training",i.selectedTraining))},dependencies:[bc,dm,GEe,zM,Dm,HEe,WEe,KEe,ys],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#f4f4f4;margin:0;padding:0}.layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;color:#333;width:80%;justify-content:center;margin:0 auto}.calendar-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;color:#333}.monthly-calendar[_ngcontent-%COMP%]{flex:0 1 350px;max-height:400px;overflow:hidden;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;display:flex;flex-direction:column;justify-content:space-between;background:var(--background-gradient)}.calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.day-names[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day-names[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;transition:background-color .3s}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.calendar-days[_ngcontent-%COMP%]   div.other-month[_ngcontent-%COMP%]{color:#aaa}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:1px solid #0056b3}.weekly-view[_ngcontent-%COMP%]{flex:2;padding:20px;background:#f8f8f8;height:900px;overflow-y:auto;border-radius:10px;box-shadow:0 2px 10px #0000001a}.week-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.day-details[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:8px;box-shadow:0 1px 5px #0000001a}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.day-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]{background-color:#d0e6e6}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]:hover{background-color:#b0d0d0}.btn-link[_ngcontent-%COMP%]{color:#000}.form-check-input[_ngcontent-%COMP%]{background-color:#000;border-color:#000}.form-check-label[_ngcontent-%COMP%]{color:#000}.quote-container[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;margin:20px 0;text-align:center}@media screen and (max-width: 768px){.layout-container[_ngcontent-%COMP%]{flex-direction:column;width:100%}.monthly-calendar[_ngcontent-%COMP%], .weekly-view[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%;margin-bottom:20px}.calendar-container[_ngcontent-%COMP%]{flex-direction:column;padding:15px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.week-days[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.day-details[_ngcontent-%COMP%]{padding:8px;font-size:14px}.buttons-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{font-size:14px}.quote-container[_ngcontent-%COMP%]{font-size:18px;margin:15px 0}}@media screen and (max-width: 480px){.calendar-container[_ngcontent-%COMP%]{padding:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:10px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px}.monthly-calendar[_ngcontent-%COMP%], .weekly-view[_ngcontent-%COMP%]{flex:1 1 100%;margin-bottom:15px}.buttons-container[_ngcontent-%COMP%]{gap:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:none}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.btn-success[_ngcontent-%COMP%]{padding:8px 16px}.quote-container[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),_K=(()=>{class n{constructor(){this.afAuth=Y(Pa),this.firestore=Y(Uc)}setGradient(t){const r=document.documentElement;switch(t){case"green":default:r.style.setProperty("--background-gradient","linear-gradient(135deg, #e0f7fa, #254636)"),r.style.setProperty("--button-background","#254636");break;case"pastel-lavender":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6E6FA, #F4F0FF)"),r.style.setProperty("--button-background","#D8BFD8");break;case"powder-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #D6ECFA, #B3D9FF)"),r.style.setProperty("--button-background","#A9CCE3");break;case"emerald-gold":r.style.setProperty("--background-gradient","linear-gradient(135deg, #50C878, #FFD700)"),r.style.setProperty("--button-background","#468847");break;case"cloud":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F0F4FF, #E1E9FF)"),r.style.setProperty("--button-background","#CBD7FF");break;case"dusty-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F5E3E0, #EAC0C1)"),r.style.setProperty("--button-background","#E8AFAF");break;case"powder-mint":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6F9F4, #D0F0E8)"),r.style.setProperty("--button-background","#B2E4D8");break;case"navy-ivory":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F9F8F6, #2C3E50)"),r.style.setProperty("--button-background","#34495E");break;case"cashmere-graphite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EFE1CE, #2F2F2F)"),r.style.setProperty("--button-background","#3C3C3C");break;case"pearl-ink":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F2F1F0, #1F2933)"),r.style.setProperty("--button-background","#20232A");break;case"beige-espresso":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F7F4ED, #4A332D)"),r.style.setProperty("--button-background","#3C2E2A");break;case"graphite-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FDE9E8, #3D3D3D)"),r.style.setProperty("--button-background","#7A6C6C");break;case"turquoise-alabaster":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EDF6F8, #005960)"),r.style.setProperty("--button-background","#003F45");break;case"burgundy-cream":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F8ECE5, #641E16)"),r.style.setProperty("--button-background","#922B21");break;case"platinum-coal":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E5E5E5, #222222)"),r.style.setProperty("--button-background","#333333");break;case"pearl-pink-anthracite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FCE4EC, #2B2B2B)"),r.style.setProperty("--button-background","#4C4C4C");break;case"opal-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E0E5EC, #5C87A3)"),r.style.setProperty("--button-background","#3B647A");break;case"mustard-caramel":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FFF5E1, #A67B5B)"),r.style.setProperty("--button-background","#8C6239")}this.saveUserTheme(t)}saveUserTheme(t){this.afAuth.currentUser.then(i=>{i&&this.firestore.collection("users-theme").doc(i.uid).set({theme:t},{merge:!0})})}loadUserTheme(t){this.firestore.collection("users-theme").doc(t).get().subscribe(r=>{if(r.exists){const s=r.data().theme;s&&this.setGradient(s)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const yK=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},vK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let v=(15&a)<<2|l>>6,E=63&l;u||(E=64,o||(v=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yK(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==g)throw new a0e;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==g&&r.push(l<<6&192|g))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class a0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UD=function(n){return function(n){const e=yK(n);return vK.encodeByteArray(e,!0)}(n).replace(/\./g,"")},BD=function(n){try{return vK.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},jD=()=>{try{return function l0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&BD(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},EK=n=>{var e,t;return null===(t=null===(e=jD())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},TK=()=>{var n;return null===(n=jD())||void 0===n?void 0:n.config},wK=n=>{var e;return null===(e=jD())||void 0===e?void 0:e[`_${n}`]};class bK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Zr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class Bc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Bc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$E.prototype.create)}}class $E{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function A0e(n,e){return n.replace(C0e,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Bc(i,`${this.serviceName}: ${o} (${i}).`,r)}}const C0e=/\{\$([^}]+)}/g;function E_(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(SK(s)&&SK(o)){if(!E_(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function SK(n){return null!==n&&"object"==typeof n}function qE(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GE(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function HE(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class R0e{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function P0e(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=jO),void 0===i.error&&(i.error=jO),void 0===i.complete&&(i.complete=jO);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jO(){}function Ei(n){return n&&n._delegate?n._delegate:n}class Sf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rf="[DEFAULT]";class V0e{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new bK;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function L0e(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,M.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Rf){return this.instances.has(e)}getOptions(e=Rf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Rf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Rf){return this.component?this.component.multipleInstances?e:Rf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new V0e(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $O=[];var en=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(en||{});const RK={debug:en.DEBUG,verbose:en.VERBOSE,info:en.INFO,warn:en.WARN,error:en.ERROR,silent:en.SILENT},B0e=en.INFO,j0e={[en.DEBUG]:"log",[en.VERBOSE]:"log",[en.INFO]:"info",[en.WARN]:"warn",[en.ERROR]:"error"},z0e=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=j0e[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class qO{constructor(e){this.name=e,this._logLevel=B0e,this._logHandler=z0e,this._userLogHandler=null,$O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in en))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?RK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,en.DEBUG,...e),this._logHandler(this,en.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,en.VERBOSE,...e),this._logHandler(this,en.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,en.INFO,...e),this._logHandler(this,en.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,en.WARN,...e),this._logHandler(this,en.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,en.ERROR,...e),this._logHandler(this,en.ERROR,...e)}}var $0e=_t(749);class q0e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function G0e(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const $D="@firebase/app",GO="0.10.17",jc=new qO("@firebase/app"),H0e="@firebase/app-compat",W0e="@firebase/analytics-compat",K0e="@firebase/analytics",Q0e="@firebase/app-check-compat",Y0e="@firebase/app-check",J0e="@firebase/auth",X0e="@firebase/auth-compat",Z0e="@firebase/database",eTe="@firebase/data-connect",tTe="@firebase/database-compat",nTe="@firebase/functions",rTe="@firebase/functions-compat",iTe="@firebase/installations",sTe="@firebase/installations-compat",oTe="@firebase/messaging",aTe="@firebase/messaging-compat",uTe="@firebase/performance",cTe="@firebase/performance-compat",lTe="@firebase/remote-config",dTe="@firebase/remote-config-compat",hTe="@firebase/storage",fTe="@firebase/storage-compat",pTe="@firebase/firestore",gTe="@firebase/vertexai",mTe="@firebase/firestore-compat",_Te="firebase",qD="[DEFAULT]",vTe={[$D]:"fire-core",[H0e]:"fire-core-compat",[K0e]:"fire-analytics",[W0e]:"fire-analytics-compat",[Y0e]:"fire-app-check",[Q0e]:"fire-app-check-compat",[J0e]:"fire-auth",[X0e]:"fire-auth-compat",[Z0e]:"fire-rtdb",[eTe]:"fire-data-connect",[tTe]:"fire-rtdb-compat",[nTe]:"fire-fn",[rTe]:"fire-fn-compat",[iTe]:"fire-iid",[sTe]:"fire-iid-compat",[oTe]:"fire-fcm",[aTe]:"fire-fcm-compat",[uTe]:"fire-perf",[cTe]:"fire-perf-compat",[lTe]:"fire-rc",[dTe]:"fire-rc-compat",[hTe]:"fire-gcs",[fTe]:"fire-gcs-compat",[pTe]:"fire-fst",[mTe]:"fire-fst-compat",[gTe]:"fire-vertex","fire-js":"fire-js",[_Te]:"fire-js-all"},Pf=new Map,WE=new Map,KE=new Map;function PK(n,e){try{n.container.addComponent(e)}catch(t){jc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function T_(n){const e=n.name;if(KE.has(e))return jc.debug(`There were multiple attempts to register component ${e}.`),!1;KE.set(e,n);for(const t of Pf.values())PK(t,n);for(const t of WE.values())PK(t,n);return!0}function GD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ma(n){return void 0!==n.settings}const aa=new $E("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xK{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}const w_="11.1.0";function MK(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:qD,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw aa.create("bad-app-name",{appName:String(i)});if(t||(t=TK()),!t)throw aa.create("no-options");const s=Pf.get(i);if(s){if(E_(t,s.options)&&E_(r,s.config))return s;throw aa.create("duplicate-app",{appName:i})}const o=new U0e(i);for(const u of KE.values())o.addComponent(u);const a=new xK(t,r,o);return Pf.set(i,a),a}function NK(n=qD){const e=Pf.get(n);if(!e&&n===qD&&TK())return MK();if(!e)throw aa.create("no-app",{appName:n});return e}function zc(n,e,t){var r;let i=null!==(r=vTe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void jc.warn(a.join(" "))}T_(new Sf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const bTe="firebase-heartbeat-database",ATe=1,QE="firebase-heartbeat-store";let WO=null;function kK(){return WO||(WO=(0,$0e.P2)(bTe,ATe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(QE)}catch(t){console.warn(t)}}}).catch(n=>{throw aa.create("idb-open",{originalErrorMessage:n.message})})),WO}function KO(){return(KO=(0,M.A)(function*(n){try{const t=(yield kK()).transaction(QE),r=yield t.objectStore(QE).get(VK(n));return yield t.done,r}catch(e){if(e instanceof Bc)jc.warn(e.message);else{const t=aa.create("idb-get",{originalErrorMessage:e?.message});jc.warn(t.message)}}})).apply(this,arguments)}function OK(n,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,M.A)(function*(n,e){try{const r=(yield kK()).transaction(QE,"readwrite");yield r.objectStore(QE).put(e,VK(n)),yield r.done}catch(t){if(t instanceof Bc)jc.warn(t.message);else{const r=aa.create("idb-set",{originalErrorMessage:t?.message});jc.warn(r.message)}}})).apply(this,arguments)}function VK(n){return`${n.name}!${n.options.appId}`}class RTe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xTe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,M.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=FK();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){jc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,M.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=FK(),{heartbeatsToSend:i,unsentEntries:s}=function PTe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LK(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LK(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=UD(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return jc.warn(r),""}})()}}function FK(){return(new Date).toISOString().substring(0,10)}class xTe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.A)(function*(){return!!function CK(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function w0e(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,M.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function CTe(n){return KO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,M.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OK(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,M.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OK(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function LK(n){return UD(JSON.stringify({version:2,heartbeats:n})).length}!function MTe(n){T_(new Sf("platform-logger",e=>new q0e(e),"PRIVATE")),T_(new Sf("heartbeat",e=>new RTe(e),"PRIVATE")),zc($D,GO,n),zc($D,GO,"esm2017"),zc("fire-js","")}("");const NTe=function UK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},BK=new $E("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),HD=new qO("@firebase/auth");function WD(n,...e){HD.logLevel<=en.ERROR&&HD.error(`Auth (${w_}): ${n}`,...e)}function ro(n,...e){throw JO(n,...e)}function ks(n,...e){return JO(n,...e)}function YO(n,e,t){const r=Object.assign(Object.assign({},NTe()),{[e]:t});return new $E("auth","Firebase",r).create(e,{appName:n.name})}function Fi(n){return YO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JO(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BK.create(n,...e)}function xe(n,e,...t){if(!n)throw JO(e,...t)}function ju(n){const e="INTERNAL ASSERTION FAILED: "+n;throw WD(e),new Error(e)}function $c(n,e){n||ju(e)}function YE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function jK(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function OTe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function XO(){return"http:"===jK()||"https:"===jK()}()||function I0e(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class JE{constructor(e,t){this.shortDelay=e,this.longDelay=t,$c(t>e,"Short delay should be less than long delay!"),this.isMobile=function m0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zr())}()||function E0e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return OTe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ZO(n,e){$c(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class zK{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ju("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ju("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ju("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FTe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},LTe=new JE(3e4,6e4);function yr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vr(n,e,t,r){return eV.apply(this,arguments)}function eV(){return(eV=(0,M.A)(function*(n,e,t,r,i={}){return $K(n,i,(0,M.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=qE(Object.assign({key:n.config.apiKey},o)).slice(1),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const l=Object.assign({method:e,headers:u},s);return function v0e(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(l.referrerPolicy="no-referrer"),zK.fetch()(qK(n,n.config.apiHost,t,a),l)}))})).apply(this,arguments)}function $K(n,e,t){return tV.apply(this,arguments)}function tV(){return(tV=(0,M.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},FTe),e);try{const i=new BTe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw XE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw XE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw XE(n,"email-already-in-use",o);if("USER_DISABLED"===u)throw XE(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw YO(n,h,l);ro(n,h)}}catch(i){if(i instanceof Bc)throw i;ro(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function qc(n,e,t,r){return nV.apply(this,arguments)}function nV(){return(nV=(0,M.A)(function*(n,e,t,r,i={}){const s=yield vr(n,e,t,r,i);return"mfaPendingCredential"in s&&ro(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function qK(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ZO(n.config,i):`${n.config.apiScheme}://${i}`}function UTe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BTe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),LTe.get())})}}function XE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ks(n,e,r);return i.customData._tokenResponse=t,i}function HK(n){return void 0!==n&&void 0!==n.enterprise}class WK{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UTe(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function KK(n,e){return iV.apply(this,arguments)}function iV(){return(iV=(0,M.A)(function*(n,e){return vr(n,"GET","/v2/recaptchaConfig",yr(n,e))})).apply(this,arguments)}function sV(){return(sV=(0,M.A)(function*(n,e){return vr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function QK(n,e){return aV.apply(this,arguments)}function aV(){return(aV=(0,M.A)(function*(n,e){return vr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ZE(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function uV(){return(uV=(0,M.A)(function*(n,e=!1){const t=Ei(n),r=yield t.getIdToken(e),i=KD(r);xe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ZE(cV(i.auth_time)),issuedAtTime:ZE(cV(i.iat)),expirationTime:ZE(cV(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function cV(n){return 1e3*Number(n)}function KD(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return WD("JWT malformed, contained fewer than 3 sections"),null;try{const i=BD(t);return i?JSON.parse(i):(WD("Failed to decode base64 JWT payload"),null)}catch(i){return WD("Caught error parsing JWT payload as JSON",i?.toString()),null}}function YK(n){const e=KD(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gc(n,e){return lV.apply(this,arguments)}function lV(){return(lV=(0,M.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Bc&&function GTe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class HTe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,M.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,M.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class dV{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ZE(this.lastLoginAt),this.creationTime=ZE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function e0(n){return hV.apply(this,arguments)}function hV(){return(hV=(0,M.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Gc(n,QK(t,{idToken:r}));xe(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?JK(s.providerUserInfo):[],a=function KTe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),h=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dV(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})).apply(this,arguments)}function fV(){return(fV=(0,M.A)(function*(n){const e=Ei(n);yield e0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function JK(n){return n.map(e=>{var{providerId:t}=e,r=(0,Ac.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function pV(){return(pV=(0,M.A)(function*(n,e){const t=yield $K(n,{},(0,M.A)(function*(){const r=qE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=qK(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zK.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function gV(){return(gV=(0,M.A)(function*(n,e){return vr(n,"POST","/v2/accounts:revokeToken",yr(n,e))})).apply(this,arguments)}class A_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(0!==e.length,"internal-error");const t=YK(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,M.A)(function*(){return t||!r.accessToken||r.isExpired?(xe(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,M.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function QTe(n,e){return pV.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new A_;return r&&(xe("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(xe("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(xe("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new A_,this.toJSON())}_performRefresh(){return ju("not implemented")}}function Od(n,e){xe("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Hc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Ac.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HTe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dV(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,M.A)(function*(){const r=yield Gc(t,t.stsTokenManager.getToken(t.auth,e));return xe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function qTe(n){return uV.apply(this,arguments)}(this,e)}reload(){return function WTe(n){return fV.apply(this,arguments)}(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,M.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield e0(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,M.A)(function*(){if(Ma(e.auth.app))return Promise.reject(Fi(e.auth));const t=yield e.getIdToken();return yield Gc(e,function zTe(n,e){return sV.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;const g=null!==(r=t.displayName)&&void 0!==r?r:void 0,v=null!==(i=t.email)&&void 0!==i?i:void 0,E=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,w=null!==(o=t.photoURL)&&void 0!==o?o:void 0,R=null!==(a=t.tenantId)&&void 0!==a?a:void 0,P=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,j=null!==(l=t.createdAt)&&void 0!==l?l:void 0,U=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:G,emailVerified:ee,isAnonymous:me,providerData:_e,stsTokenManager:D}=t;xe(G&&D,e,"internal-error");const b=A_.fromJSON(this.name,D);xe("string"==typeof G,e,"internal-error"),Od(g,e.name),Od(v,e.name),xe("boolean"==typeof ee,e,"internal-error"),xe("boolean"==typeof me,e,"internal-error"),Od(E,e.name),Od(w,e.name),Od(R,e.name),Od(P,e.name),Od(j,e.name),Od(U,e.name);const C=new Hc({uid:G,auth:e,email:v,emailVerified:ee,displayName:g,isAnonymous:me,photoURL:w,phoneNumber:E,tenantId:R,stsTokenManager:b,createdAt:j,lastLoginAt:U});return _e&&Array.isArray(_e)&&(C.providerData=_e.map(x=>Object.assign({},x))),P&&(C._redirectEventId=P),C}static _fromIdTokenResponse(e,t,r=!1){return(0,M.A)(function*(){const i=new A_;i.updateFromServerResponse(t);const s=new Hc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield e0(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,M.A)(function*(){const i=t.users[0];xe(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?JK(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new A_;a.updateFromIdToken(r);const u=new Hc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(u,l),u})()}}const XK=new Map;function Wc(n){$c(n instanceof Function,"Expected a class definition");let e=XK.get(n);return e?($c(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,XK.set(n,e),e)}const ZK=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,M.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,M.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,M.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function QD(n,e,t){return`firebase:${n}:${e}:${t}`}class C_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=QD(this.userKey,i.apiKey,s),this.fullPersistenceKey=QD("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,M.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Hc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,M.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,M.A)(function*(){if(!t.length)return new C_(Wc(ZK),e,r);const i=(yield Promise.all(t.map(function(){var l=(0,M.A)(function*(h){if(yield h._isAvailable())return h});return function(h){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||Wc(ZK);const o=QD(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const h=yield l._get(o);if(h){const g=Hc._fromJSON(e,h);l!==s&&(a=g),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=(0,M.A)(function*(h){if(h!==s)try{yield h._remove(o)}catch{}});return function(h){return l.apply(this,arguments)}}())),new C_(s,e,r)):new C_(s,e,r)})()}}function eQ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oQ(e))return"Blackberry";if(aQ(e))return"Webos";if(nQ(e))return"Safari";if((e.includes("chrome/")||rQ(e))&&!e.includes("edge/"))return"Chrome";if(sQ(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function tQ(n=Zr()){return/firefox\//i.test(n)}function nQ(n=Zr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rQ(n=Zr()){return/crios\//i.test(n)}function iQ(n=Zr()){return/iemobile/i.test(n)}function sQ(n=Zr()){return/android/i.test(n)}function oQ(n=Zr()){return/blackberry/i.test(n)}function aQ(n=Zr()){return/webos/i.test(n)}function mV(n=Zr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uQ(n=Zr()){return mV(n)||sQ(n)||aQ(n)||oQ(n)||/windows phone/i.test(n)||iQ(n)}function cQ(n,e=[]){let t;switch(n){case"Browser":t=eQ(Zr());break;case"Worker":t=`${eQ(Zr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${w_}/${r}`}class ZTe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,M.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function _V(){return(_V=(0,M.A)(function*(n,e={}){return vr(n,"GET","/v2/passwordPolicy",yr(n,e))})).apply(this,arguments)}class nwe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(s=u.containsUppercaseLetter)||void 0===s||s),u.isValid&&(u.isValid=null===(o=u.containsNumericCharacter)||void 0===o||o),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class rwe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lQ(this),this.idTokenSubscription=new lQ(this),this.beforeStateQueue=new ZTe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Wc(t)),this._initializationPromise=this.queue((0,M.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield C_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,M.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,M.A)(function*(){try{const r=yield QK(t,{idToken:e}),i=yield Hc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,M.A)(function*(){var r;if(Ma(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(u,u))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return xe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,M.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,M.A)(function*(){try{yield e0(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function VTe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,M.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,M.A)(function*(){if(Ma(t.app))return Promise.reject(Fi(t));const r=e?Ei(e):null;return r&&xe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,M.A)(function*(){if(!r._deleted)return e&&xe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,M.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,M.A)(function*(){return Ma(e.app)?Promise.reject(Fi(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return Ma(this.app)?Promise.reject(Fi(this)):this.queue((0,M.A)(function*(){yield t.assertedPersistence.setPersistence(Wc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,M.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,M.A)(function*(){const t=yield function ewe(n){return _V.apply(this,arguments)}(e),r=new nwe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $E("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,M.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function YTe(n,e){return gV.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,M.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,M.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Wc(e)||t._popupRedirectResolver;xe(r,t,"argument-error"),t.redirectPersistenceManager=yield C_.create(t,[Wc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,M.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,M.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,M.A)(function*(){if(e===t.currentUser)return t.queue((0,M.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}{const u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){var t=this;return(0,M.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cQ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,M.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,M.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function kTe(n,...e){HD.logLevel<=en.WARN&&HD.warn(`Auth (${w_}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ei(n){return Ei(n)}class lQ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function S0e(n,e){const t=new R0e(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let t0={loadJS:()=>(0,M.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yV(n){return t0.loadJS(n)}function dQ(n){return`__${n}${Math.floor(1e6*Math.random())}`}class dwe{constructor(){this.enterprise=new hwe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hwe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const n0="NO_RECAPTCHA";class hQ{constructor(e){this.type="recaptcha-enterprise",this.auth=ei(e)}verify(e="verify",t=!1){var r=this;return(0,M.A)(function*(){function s(){return s=(0,M.A)(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=(0,M.A)(function*(l,h){KK(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(void 0!==g.recaptchaKey){const v=new WK(g);return null==a.tenantId?a._agentRecaptchaConfig=v:a._tenantRecaptchaConfigs[a.tenantId]=v,l(v.siteKey)}h(new Error("recaptcha Enterprise site key undefined"))}).catch(g=>{h(g)})});return function(l,h){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,l){const h=window.grecaptcha;HK(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u(n0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return r.auth.settings.appVerificationDisabledForTesting?(new dwe).execute("siteKey",{action:"verify"}):new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(l=>{if(!t&&HK(window.grecaptcha))o(l,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));let h=function owe(){return t0.recaptchaEnterpriseScript}();0!==h.length&&(h+=l),yV(h).then(()=>{o(l,a,u)}).catch(g=>{u(g)})}}).catch(l=>{u(l)})})})()}}function r0(n,e,t){return vV.apply(this,arguments)}function vV(){return(vV=(0,M.A)(function*(n,e,t,r=!1,i=!1){const s=new hQ(n);let o;if(i)o=n0;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}const a=Object.assign({},e);return"mfaSmsEnrollment"===t||"mfaSmsSignIn"===t?("phoneEnrollmentInfo"in a?Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:a.phoneEnrollmentInfo.phoneNumber,recaptchaToken:a.phoneEnrollmentInfo.recaptchaToken,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in a&&Object.assign(a,{phoneSignInInfo:{recaptchaToken:a.phoneSignInInfo.recaptchaToken,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),a):(Object.assign(a,r?{captchaResp:o}:{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a)})).apply(this,arguments)}function Vd(n,e,t,r,i){return IV.apply(this,arguments)}function IV(){return IV=(0,M.A)(function*(n,e,t,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null!==(s=n._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=yield r0(n,e,t,"getOobCode"===t);return r(n,a)}return r(n,e).catch(function(){var a=(0,M.A)(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=yield r0(n,e,t,"getOobCode"===t);return r(n,l)}return Promise.reject(u)});return function(u){return a.apply(this,arguments)}}())}if("PHONE_PROVIDER"===i){if(null!==(o=n._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const a=yield r0(n,e,t);return r(n,a).catch(function(){var u=(0,M.A)(function*(l){var h;if("AUDIT"===(null===(h=n._getRecaptchaConfig())||void 0===h?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===l.code||"auth/invalid-app-credential"===l.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const g=yield r0(n,e,t,!1,!0);return r(n,g)}return Promise.reject(l)});return function(l){return u.apply(this,arguments)}}())}{const a=yield r0(n,e,t,!1,!0);return r(n,a)}}return Promise.reject(i+" provider is not supported.")}),IV.apply(this,arguments)}function pQ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gQ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class s0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ju("not implemented")}_getIdTokenResponse(e){return ju("not implemented")}_linkToIdToken(e,t){return ju("not implemented")}_getReauthenticationResolver(e){return ju("not implemented")}}function Twe(n,e){return bV.apply(this,arguments)}function bV(){return(bV=(0,M.A)(function*(n,e){return vr(n,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function bwe(n,e){return CV.apply(this,arguments)}function CV(){return(CV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithPassword",yr(n,e))})).apply(this,arguments)}function MV(){return(MV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithEmailLink",yr(n,e))})).apply(this,arguments)}function NV(){return(NV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithEmailLink",yr(n,e))})).apply(this,arguments)}class o0 extends s0{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new o0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new o0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,M.A)(function*(){switch(t.signInMethod){case"password":return Vd(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bwe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function Rwe(n,e){return MV.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:ro(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,M.A)(function*(){switch(r.signInMethod){case"password":return Vd(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Twe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function Pwe(n,e){return NV.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:ro(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Kc(n,e){return kV.apply(this,arguments)}function kV(){return(kV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithIdp",yr(n,e))})).apply(this,arguments)}class D_ extends s0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new D_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ro("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,Ac.Tt)(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new D_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Kc(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qE(t)}return e}}class u0{constructor(e){var t,r,i,s,o,a;const u=GE(HE(e)),l=null!==(t=u.apiKey)&&void 0!==t?t:null,h=null!==(r=u.oobCode)&&void 0!==r?r:null,g=function Vwe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);xe(l&&h&&g,"argument-error"),this.apiKey=l,this.operation=g,this.code=h,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function Fwe(n){const e=GE(HE(n)).link,t=e?GE(HE(e)).deep_link_id:null,r=GE(HE(n)).deep_link_id;return(r?GE(HE(r)).link:null)||r||t||e||n}(e);try{return new u0(t)}catch{return null}}}let yQ=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return o0._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=u0.parseLink(r);return xe(i,"argument-error"),o0._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Qc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vQ extends Qc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Lwe=(()=>{class n extends vQ{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return D_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function IQ(n,e){return BV.apply(this,arguments)}function BV(){return(BV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signUp",yr(n,e))})).apply(this,arguments)}class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,M.A)(function*(){const s=yield Hc._fromIdTokenResponse(e,r,i),o=EQ(r);return new ua({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,M.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=EQ(r);return new ua({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function EQ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class ZD extends Bc{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ZD.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ZD(e,t,r,i)}}function TQ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?ZD._fromErrorAndOperation(n,s,e,r):s})}function qV(){return(qV=(0,M.A)(function*(n,e,t=!1){const r=yield Gc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ua._forOperation(n,"link",r)})).apply(this,arguments)}function HV(){return(HV=(0,M.A)(function*(n,e,t=!1){const{auth:r}=n;if(Ma(r.app))return Promise.reject(Fi(r));const i="reauthenticate";try{const s=yield Gc(n,TQ(r,i,e,n),t);xe(s.idToken,r,"internal-error");const o=KD(s.idToken);xe(o,r,"internal-error");const{sub:a}=o;return xe(n.uid===a,r,"user-mismatch"),ua._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&ro(r,"user-mismatch"),s}})).apply(this,arguments)}function AQ(n,e){return WV.apply(this,arguments)}function WV(){return(WV=(0,M.A)(function*(n,e,t=!1){if(Ma(n.app))return Promise.reject(Fi(n));const r="signIn",i=yield TQ(n,r,e),s=yield ua._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function KV(n,e){return QV.apply(this,arguments)}function QV(){return(QV=(0,M.A)(function*(n,e){return AQ(ei(n),e)})).apply(this,arguments)}function nF(n){return rF.apply(this,arguments)}function rF(){return(rF=(0,M.A)(function*(n){const e=ei(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function cF(){return(cF=(0,M.A)(function*(n,e,t){if(Ma(n.app))return Promise.reject(Fi(n));const r=ei(n),o=yield Vd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IQ,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw"auth/password-does-not-meet-requirements"===u.code&&nF(n),u}),a=yield ua._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})).apply(this,arguments)}function mF(){return(mF=(0,M.A)(function*(n,e){return vr(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function _F(){return _F=(0,M.A)(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const r=Ei(n),s={idToken:yield r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=yield Gc(r,function Kwe(n,e){return mF.apply(this,arguments)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>"password"===u);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)}),_F.apply(this,arguments)}const nS="__sak";class RQ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nS,"1"),this.storage.removeItem(nS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cbe=(()=>{class n extends RQ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uQ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function XTe(){return function T0e(){const n=Zr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,M.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,M.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,M.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),PQ=(()=>{class n extends RQ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let dbe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,M.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(u).map(function(){var g=(0,M.A)(function*(v){return v(i.origin,a)});return function(v){return g.apply(this,arguments)}}()),h=yield function lbe(n){return Promise.all(n.map(function(){var e=(0,M.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:h})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function rS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class hbe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,M.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{const h=rS("",20);s.port1.start();const g=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(g),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function ci(){return window}function bF(){return typeof ci().WorkerGlobalScope<"u"&&"function"==typeof ci().importScripts}function AF(){return(AF=(0,M.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xQ="firebaseLocalStorageDb",iS="firebaseLocalStorage",MQ="fbase_key";class d0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sS(n,e){return n.transaction([iS],e?"readwrite":"readonly").objectStore(iS)}function CF(){const n=indexedDB.open(xQ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(iS,{keyPath:MQ})}catch(i){t(i)}}),n.addEventListener("success",(0,M.A)(function*(){const r=n.result;r.objectStoreNames.contains(iS)?e(r):(r.close(),yield function ybe(){const n=indexedDB.deleteDatabase(xQ);return new d0(n).toPromise()}(),e(yield CF()))}))})}function NQ(n,e,t){return DF.apply(this,arguments)}function DF(){return(DF=(0,M.A)(function*(n,e,t){const r=sS(n,!0).put({[MQ]:e,value:t});return new d0(r).toPromise()})).apply(this,arguments)}function SF(){return(SF=(0,M.A)(function*(n,e){const t=sS(n,!1).get(e),r=yield new d0(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function kQ(n,e){const t=sS(n,!0).delete(e);return new d0(t).toPromise()}const Tbe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,M.A)(function*(){return t.db||(t.db=yield CF()),t.db})()}_withRetries(t){var r=this;return(0,M.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,M.A)(function*(){return bF()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,M.A)(function*(){t.receiver=dbe._getInstance(function mbe(){return bF()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,M.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,M.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,M.A)(function*(){var r,i;if(t.activeServiceWorker=yield function pbe(){return AF.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new hbe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,M.A)(function*(){if(r.sender&&r.activeServiceWorker&&function gbe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.A)(function*(){try{if(!indexedDB)return!1;const t=yield CF();return yield NQ(t,nS,"1"),yield kQ(t,nS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,M.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,M.A)(function*(){return i._withPendingWrite((0,M.A)(function*(){return yield i._withRetries(s=>NQ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,M.A)(function*(){const i=yield r._withRetries(s=>function vbe(n,e){return SF.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,M.A)(function*(){return r._withPendingWrite((0,M.A)(function*(){return yield r._withRetries(i=>kQ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,M.A)(function*(){const r=yield t._withRetries(o=>{const a=sS(o,!1).getAll();return new d0(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,M.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Mf(n,e){return e?Wc(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}dQ("rcb"),new JE(3e4,6e4);class UF extends s0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xbe(n){return AQ(n.auth,new UF(n),n.bypassAuthState)}function Mbe(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),function bQ(n,e){return HV.apply(this,arguments)}(t,new UF(n),n.bypassAuthState)}function Nbe(n){return BF.apply(this,arguments)}function BF(){return(BF=(0,M.A)(function*(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),function $V(n,e){return qV.apply(this,arguments)}(t,new UF(n),n.bypassAuthState)})).apply(this,arguments)}class VQ{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,M.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,M.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(l))}catch(h){t.reject(h)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xbe;case"linkViaPopup":case"linkViaRedirect":return Nbe;case"reauthViaPopup":case"reauthViaRedirect":return Mbe;default:ro(this.auth,"internal-error")}}resolve(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kbe=new JE(2e3,1e4);function jF(){return(jF=(0,M.A)(function*(n,e,t){if(Ma(n.app))return Promise.reject(ks(n,"operation-not-supported-in-this-environment"));const r=ei(n);!function b_(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&ro(n,"argument-error"),YO(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,Qc);const i=Mf(r,t);return new qF(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let qF=(()=>{class n extends VQ{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,M.A)(function*(){const r=yield t.execute();return xe(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,M.A)(function*(){$c(1===t.filter.length,"Popup operations only handle one event");const r=rS();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(ks(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,kbe.get())};t()}}return n.currentPopupAction=null,n})();const Vbe="pendingRedirect",f0=new Map;class Fbe extends VQ{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,M.A)(function*(){let r=f0.get(t.auth._key());if(!r){try{const s=(yield function Lbe(n,e){return GF.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}f0.set(t.auth._key(),r)}return t.bypassAuthState||f0.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,M.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,M.A)(function*(){})()}cleanUp(){}}function GF(){return(GF=(0,M.A)(function*(n,e){const t=function LQ(n){return QD(Vbe,n.config.apiKey,n.name)}(e),r=function FQ(n){return Wc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Ube(n,e){f0.set(n._key(),e)}function UQ(n,e){return XF.apply(this,arguments)}function XF(){return(XF=(0,M.A)(function*(n,e,t=!1){if(Ma(n.app))return Promise.reject(Fi(n));const r=ei(n),i=Mf(r,e),o=yield new Fbe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class qbe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Gbe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zQ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!zQ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ks(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jQ(e))}saveEventToCache(e){this.cachedEventUids.add(jQ(e)),this.lastProcessedEventTime=Date.now()}}function jQ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zQ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function eL(){return(eL=(0,M.A)(function*(n,e={}){return vr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Wbe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kbe=/^https?/;function tL(){return tL=(0,M.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function Hbe(n){return eL.apply(this,arguments)}(n);for(const t of e)try{if(Ybe(t))return}catch{}ro(n,"unauthorized-domain")}),tL.apply(this,arguments)}function Ybe(n){const e=YE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!Kbe.test(t))return!1;if(Wbe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Jbe=new JE(3e4,6e4);function $Q(){const n=ci().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let oS=null;const eAe=new JE(5e3,15e3),tAe="__/auth/iframe",nAe="emulator/auth/iframe",rAe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iAe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sAe(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ZO(e,nAe):`https://${n.config.authDomain}/${tAe}`,r={apiKey:e.apiKey,appName:n.name,v:w_},i=iAe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${qE(r).slice(1)}`}function nL(){return nL=(0,M.A)(function*(n){const e=yield function Zbe(n){return oS=oS||function Xbe(n){return new Promise((e,t)=>{var r,i,s;function o(){$Q(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$Q(),t(ks(n,"network-request-failed"))},timeout:Jbe.get()})}if(null!==(i=null===(r=ci().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=ci().gapi)||void 0===s||!s.load){const a=dQ("iframefcb");return ci()[a]=()=>{gapi.load?o():t(ks(n,"network-request-failed"))},yV(`${function awe(){return t0.gapiScript}()}?onload=${a}`).catch(u=>t(u))}o()}}).catch(e=>{throw oS=null,e})}(n),oS}(n),t=ci().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:sAe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rAe,dontclear:!0},r=>new Promise(function(){var i=(0,M.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=ks(n,"network-request-failed"),u=ci().setTimeout(()=>{o(a)},eAe.get());function l(){ci().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),nL.apply(this,arguments)}const aAe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qQ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pAe="__/auth/handler",gAe="emulator/auth/handler",mAe=encodeURIComponent("fac");function GQ(n,e,t,r,i,s){return rL.apply(this,arguments)}function rL(){return(rL=(0,M.A)(function*(n,e,t,r,i,s){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:w_,eventId:i};if(e instanceof Qc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",function D0e(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof vQ){const h=e.getScopes().filter(g=>""!==g);h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))void 0===a[h]&&delete a[h];const u=yield n._getAppCheckToken(),l=u?`#${mAe}=${encodeURIComponent(u)}`:"";return`${function _Ae({config:n}){return n.emulator?ZO(n,gAe):`https://${n.authDomain}/${pAe}`}(n)}?${qE(a).slice(1)}${l}`})).apply(this,arguments)}const iL="webStorageSupport",vAe=class yAe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PQ,this._completeRedirectFn=UQ,this._overrideRedirectResult=Ube}_openPopup(e,t,r,i){var s=this;return(0,M.A)(function*(){var o;$c(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield GQ(e,t,r,YE(),i);return function hAe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},aAe),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Zr().toLowerCase();t&&(a=rQ(l)?"_blank":t),tQ(l)&&(e=e||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((v,[E,w])=>`${v}${E}=${w},`,"");if(function JTe(n=Zr()){var e;return mV(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function fAe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new qQ(null);const g=window.open(e||"",a,h);xe(g,n,"popup-blocked");try{g.focus()}catch{}return new qQ(g)}(e,a,rS())})()}_openRedirect(e,t,r,i){var s=this;return(0,M.A)(function*(){return yield s._originValidation(e),function fbe(n){ci().location.href=n}(yield GQ(e,t,r,YE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):($c(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,M.A)(function*(){const r=yield function oAe(n){return nL.apply(this,arguments)}(e),i=new qbe(e);return r.register("authEvent",s=>(xe(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(iL,{type:iL},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[iL];void 0!==o&&t(!!o),ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Qbe(n){return tL.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uQ()||nQ()||mV()}};var QQ="@firebase/auth";class IAe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,M.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const bAe=wK("authIdTokenMaxAge")||300;let JQ=null;const AAe=n=>function(){var e=(0,M.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>bAe)return;const s=r?.token;JQ!==s&&(JQ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function p0(n=NK()){const e=GD(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function mwe(n,e){const t=GD(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(E_(t.getOptions(),e??{}))return i;ro(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:vAe,persistence:[Tbe,cbe,PQ]}),r=wK("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=AAe(s.toString());(function nbe(n,e,t){Ei(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function tbe(n,e,t,r){Ei(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=EK("auth");return i&&function ywe(n,e,t){const r=ei(n);xe(r._canInitEmulator,r,"emulator-config-failed"),xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=pQ(e),{host:o,port:a}=function vwe(n){const e=pQ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gQ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:gQ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Iwe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function iwe(n){t0=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ks("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function CAe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function TAe(n){T_(new Sf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cQ(n)},l=new rwe(r,i,s,u);return function _we(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),T_(new Sf("auth-internal",e=>{const t=ei(e.getProvider("auth").getImmediate());return new IAe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zc(QQ,"1.8.1",function EAe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),zc(QQ,"1.8.1","esm2017")}("Browser");var Nf,eY,XQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZQ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(D,b,C){C||(C=0);var x=Array(16);if("string"==typeof b)for(var N=0;16>N;++N)x[N]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(N=0;16>N;++N)x[N]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;var O=D.g[3],A=(b=D.g[0])+(O^(C=D.g[1])&((N=D.g[2])^O))+x[0]+3614090360&4294967295;A=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=(C=(N=(O=(b=C+(A<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[1]+3905402710&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[2]+606105819&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[3]+3250441966&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[4]+4118548399&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[5]+1200080426&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[6]+2821735955&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[7]+4249261313&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[8]+1770035416&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[9]+2336552879&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[10]+4294925233&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[11]+2304563134&4294967295)<<22&4294967295|A>>>10))+((A=b+(O^C&(N^O))+x[12]+1804603682&4294967295)<<7&4294967295|A>>>25))+((A=O+(N^b&(C^N))+x[13]+4254626195&4294967295)<<12&4294967295|A>>>20))+((A=N+(C^O&(b^C))+x[14]+2792965006&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^N&(O^b))+x[15]+1236535329&4294967295)<<22&4294967295|A>>>10))+((A=b+(N^O&(C^N))+x[1]+4129170786&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[6]+3225465664&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[11]+643717713&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[0]+3921069994&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[5]+3593408605&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[10]+38016083&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[15]+3634488961&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[4]+3889429448&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[9]+568446438&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[14]+3275163606&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[3]+4107603335&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[8]+1163531501&4294967295)<<20&4294967295|A>>>12))+((A=b+(N^O&(C^N))+x[13]+2850285829&4294967295)<<5&4294967295|A>>>27))+((A=O+(C^N&(b^C))+x[2]+4243563512&4294967295)<<9&4294967295|A>>>23))+((A=N+(b^C&(O^b))+x[7]+1735328473&4294967295)<<14&4294967295|A>>>18))+((A=C+(O^b&(N^O))+x[12]+2368359562&4294967295)<<20&4294967295|A>>>12))+((A=b+(C^N^O)+x[5]+4294588738&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[8]+2272392833&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[11]+1839030562&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[14]+4259657740&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[1]+2763975236&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[4]+1272893353&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[7]+4139469664&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[10]+3200236656&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[13]+681279174&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[0]+3936430074&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[3]+3572445317&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[6]+76029189&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^N^O)+x[9]+3654602809&4294967295)<<4&4294967295|A>>>28))+((A=O+(b^C^N)+x[12]+3873151461&4294967295)<<11&4294967295|A>>>21))+((A=N+(O^b^C)+x[15]+530742520&4294967295)<<16&4294967295|A>>>16))+((A=C+(N^O^b)+x[2]+3299628645&4294967295)<<23&4294967295|A>>>9))+((A=b+(N^(C|~O))+x[0]+4096336452&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[7]+1126891415&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[14]+2878612391&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[5]+4237533241&4294967295)<<21&4294967295|A>>>11))+((A=b+(N^(C|~O))+x[12]+1700485571&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[3]+2399980690&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[10]+4293915773&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[1]+2240044497&4294967295)<<21&4294967295|A>>>11))+((A=b+(N^(C|~O))+x[8]+1873313359&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[15]+4264355552&4294967295)<<10&4294967295|A>>>22))+((A=N+(b^(O|~C))+x[6]+2734768916&4294967295)<<15&4294967295|A>>>17))+((A=C+(O^(N|~b))+x[13]+1309151649&4294967295)<<21&4294967295|A>>>11))+((O=(b=C+((A=b+(N^(C|~O))+x[4]+4149444226&4294967295)<<6&4294967295|A>>>26))+((A=O+(C^(b|~N))+x[11]+3174756917&4294967295)<<10&4294967295|A>>>22))^((N=O+((A=N+(b^(O|~C))+x[2]+718787259&4294967295)<<15&4294967295|A>>>17))|~b))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+O&4294967295}function o(D,b){this.h=b;for(var C=[],x=!0,N=D.length-1;0<=N;N--){var O=0|D[N];x&&O==b||(C[N]=O,x=!1)}this.g=C}(function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,N,O){for(var A=Array(arguments.length-2),wi=2;wi<arguments.length;wi++)A[wi-2]=arguments[wi];return b.prototype[N].apply(x,A)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(D,b){void 0===b&&(b=D.length);for(var C=b-this.blockSize,x=this.B,N=this.h,O=0;O<b;){if(0==N)for(;O<=C;)i(this,D,O),O+=this.blockSize;if("string"==typeof D){for(;O<b;)if(x[N++]=D.charCodeAt(O++),N==this.blockSize){i(this,x),N=0;break}}else for(;O<b;)if(x[N++]=D[O++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=255&C,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var x=0;32>x;x+=8)D[C++]=this.g[b]>>>x&255;return D};var a={};function u(D){return-128<=D&&128>D?function s(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}(D,function(b){return new o([0|b],0>b?-1:0)}):new o([0|D],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return P(l(-D));for(var b=[],C=1,x=0;D>=C;x++)b[x]=D/C|0,C*=4294967296;return new o(b,0)}var g=u(0),v=u(1),E=u(16777216);function w(D){if(0!=D.h)return!1;for(var b=0;b<D.g.length;b++)if(0!=D.g[b])return!1;return!0}function R(D){return-1==D.h}function P(D){for(var b=D.g.length,C=[],x=0;x<b;x++)C[x]=~D.g[x];return new o(C,~D.h).add(v)}function j(D,b){return D.add(P(b))}function U(D,b){for(;(65535&D[b])!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function G(D,b){this.g=D,this.h=b}function ee(D,b){if(w(b))throw Error("division by zero");if(w(D))return new G(g,g);if(R(D))return b=ee(P(D),b),new G(P(b.g),P(b.h));if(R(b))return b=ee(D,P(b)),new G(P(b.g),b.h);if(30<D.g.length){if(R(D)||R(b))throw Error("slowDivide_ only works with positive integers.");for(var C=v,x=b;0>=x.l(D);)C=me(C),x=me(x);var N=_e(C,1),O=_e(x,1);for(x=_e(x,2),C=_e(C,2);!w(x);){var A=O.add(x);0>=A.l(D)&&(N=N.add(C),O=A),x=_e(x,1),C=_e(C,1)}return b=j(D,N.j(b)),new G(N,b)}for(N=g;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),x=48>=(x=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,x-48),A=(O=l(C)).j(b);R(A)||0<A.l(D);)A=(O=l(C-=x)).j(b);w(O)&&(O=v),N=N.add(O),D=j(D,A)}return new G(N,D)}function me(D){for(var b=D.g.length+1,C=[],x=0;x<b;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new o(C,D.h)}function _e(D,b){var C=b>>5;b%=32;for(var x=D.g.length-C,N=[],O=0;O<x;O++)N[O]=0<b?D.i(O+C)>>>b|D.i(O+C+1)<<32-b:D.i(O+C);return new o(N,D.h)}(n=o.prototype).m=function(){if(R(this))return-P(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*b,b*=4294967296}return D},n.toString=function(D){if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(R(this))return"-"+P(this).toString(D);for(var b=l(Math.pow(D,6)),C=this,x="";;){var N=ee(C,b).g,O=((0<(C=j(C,N.j(b))).g.length?C.g[0]:C.h)>>>0).toString(D);if(w(C=N))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h},n.l=function(D){return R(D=j(this,D))?-1:w(D)?0:1},n.abs=function(){return R(this)?P(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0,N=0;N<=b;N++){var O=x+(65535&this.i(N))+(65535&D.i(N)),A=(O>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);x=A>>>16,C[N]=(A&=65535)<<16|(O&=65535)}return new o(C,-2147483648&C[C.length-1]?-1:0)},n.j=function(D){if(w(this)||w(D))return g;if(R(this))return R(D)?P(this).j(P(D)):P(P(this).j(D));if(R(D))return P(this.j(P(D)));if(0>this.l(E)&&0>D.l(E))return l(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],x=0;x<2*b;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<D.g.length;N++){var O=this.i(x)>>>16,A=65535&this.i(x),wi=D.i(N)>>>16,Na=65535&D.i(N);C[2*x+2*N]+=A*Na,U(C,2*x+2*N),C[2*x+2*N+1]+=O*Na,U(C,2*x+2*N+1),C[2*x+2*N+1]+=A*wi,U(C,2*x+2*N+1),C[2*x+2*N+2]+=O*wi,U(C,2*x+2*N+2)}for(x=0;x<b;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=b;x<2*b;x++)C[x]=0;return new o(C,0)},n.A=function(D){return ee(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)&D.i(x);return new o(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)|D.i(x);return new o(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)^D.i(x);return new o(C,this.h^D.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eY=ZQ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function h(D,b){if(0==D.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==D.charAt(0))return P(h(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(b,8)),x=g,N=0;N<D.length;N+=8){var O=Math.min(8,D.length-N),A=parseInt(D.substring(N,N+O),b);8>O?(O=l(Math.pow(b,O)),x=x.j(O).add(l(A))):x=(x=x.j(C)).add(l(A))}return x},Nf=ZQ.Integer=o}).apply(typeof XQ<"u"?XQ:typeof self<"u"?self:typeof window<"u"?window:{});var tY,g0,nY,cS,oL,rY,iY,sY,uS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c},r=function t(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof uS&&uS];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}(this);!function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var k=c[I];if(!(k in _))break e;_=_[k]}(p=p(I=_[c=c[c.length-1]]))!=I&&null!=p&&e(_,c,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(c){return c||function(){return function s(c,p){c instanceof String&&(c+="");var _=0,I=!1,k={next:function(){if(!I&&_<c.length){var L=_++;return{value:p(L,c[L]),done:!1}}return I=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}(this,function(p,_){return _})}});var o=o||{},a=this||self;function u(c){var p=typeof c;return"array"==(p="object"!=p?p:c?Array.isArray(c)?"array":p:"null")||"object"==p&&"number"==typeof c.length}function l(c){var p=typeof c;return"object"==p&&null!=c||"function"==p}function h(c,p,_){return c.call.apply(c.bind,arguments)}function g(c,p,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,I),c.apply(p,k)}}return function(){return c.apply(p,arguments)}}function v(c,p,_){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function E(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function w(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,k,L){for(var te=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)te[ct-2]=arguments[ct];return p.prototype[k].apply(I,te)}}function R(c){const p=c.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=c[I];return _}return[]}function P(c,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const k=c.length||0,L=I.length||0;c.length=k+L;for(let te=0;te<L;te++)c[k+te]=I[te]}else c.push(I)}}function U(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var me=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function _e(c,p,_){for(const I in c)p.call(_,c[I],I,c)}function b(c){const p={};for(const _ in c)p[_]=c[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,p){let _,I;for(let k=1;k<arguments.length;k++){for(_ in I=arguments[k],I)c[_]=I[_];for(let L=0;L<C.length;L++)_=C[L],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function N(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function O(c){a.setTimeout(()=>{throw c},0)}function A(){var c=ep;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}var Na=new class j{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new SU,c=>c.reset());class SU{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ka,Oa=!1,ep=new class wi{constructor(){this.h=this.g=null}add(p,_){const I=Na.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}},eT=()=>{const c=a.Promise.resolve(void 0);ka=()=>{c.then(RU)}};var RU=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){O(_)}var p=Na;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}Oa=!1};function ns(){this.s=this.s,this.C=this.C}function yn(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ns.prototype.s=!1,ns.prototype.ma=function(){this.s||(this.s=!0,this.N())},ns.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},yn.prototype.h=function(){this.defaultPrevented=!0};var PU=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return c}();function Va(c,p){if(yn.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(me){e:{try{ee(p.nodeName);var k=!0;break e}catch{}k=!1}k||(p=null)}}else"mouseover"==_?p=c.fromElement:"mouseout"==_&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType="string"==typeof c.pointerType?c.pointerType:xU[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Va.aa.h.call(this)}}w(Va,yn);var xU={2:"touch",3:"pen",4:"mouse"};Va.prototype.h=function(){Va.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),MU=0;function NU(c,p,_,I,k){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=k,this.key=++MU,this.da=this.fa=!1}function il(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sl(c){this.src=c,this.g={},this.h=0}function tp(c,p){var _=p.type;if(_ in c.g){var L,I=c.g[_],k=Array.prototype.indexOf.call(I,p,void 0);(L=0<=k)&&Array.prototype.splice.call(I,k,1),L&&(il(p),0==c.g[_].length&&(delete c.g[_],c.h--))}}function np(c,p,_,I){for(var k=0;k<c.length;++k){var L=c[k];if(!L.da&&L.listener==p&&L.capture==!!_&&L.ha==I)return k}return-1}sl.prototype.add=function(c,p,_,I,k){var L=c.toString();(c=this.g[L])||(c=this.g[L]=[],this.h++);var te=np(c,p,I,k);return-1<te?(p=c[te],_||(p.fa=!1)):((p=new NU(p,this.src,L,!!I,k)).fa=_,c.push(p)),p};var rp="closure_lm_"+(1e6*Math.random()|0),ip={};function tT(c,p,_,I,k){if(I&&I.once)return rT(c,p,_,I,k);if(Array.isArray(p)){for(var L=0;L<p.length;L++)tT(c,p[L],_,I,k);return null}return _=up(_),c&&c[Fa]?c.K(p,_,l(I)?!!I.capture:!!I,k):nT(c,p,_,!1,I,k)}function nT(c,p,_,I,k,L){if(!p)throw Error("Invalid event type");var te=l(k)?!!k.capture:!!k,ct=op(c);if(ct||(c[rp]=ct=new sl(c)),(_=ct.add(p,_,I,te,L)).proxy)return _;if(I=function kU(){const p=OU;return function c(_){return p.call(c.src,c.listener,_)}}(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)PU||(k=te),void 0===k&&(k=!1),c.addEventListener(p.toString(),I,k);else if(c.attachEvent)c.attachEvent(sT(p.toString()),I);else{if(!c.addListener||!c.removeListener)throw Error("addEventListener and attachEvent are unavailable.");c.addListener(I)}return _}function rT(c,p,_,I,k){if(Array.isArray(p)){for(var L=0;L<p.length;L++)rT(c,p[L],_,I,k);return null}return _=up(_),c&&c[Fa]?c.L(p,_,l(I)?!!I.capture:!!I,k):nT(c,p,_,!0,I,k)}function iT(c,p,_,I,k){if(Array.isArray(p))for(var L=0;L<p.length;L++)iT(c,p[L],_,I,k);else I=l(I)?!!I.capture:!!I,_=up(_),c&&c[Fa]?(c=c.i,(p=String(p).toString())in c.g&&-1<(_=np(L=c.g[p],_,I,k))&&(il(L[_]),Array.prototype.splice.call(L,_,1),0==L.length&&(delete c.g[p],c.h--))):c&&(c=op(c))&&(p=c.g[p.toString()],c=-1,p&&(c=np(p,_,I,k)),(_=-1<c?p[c]:null)&&sp(_))}function sp(c){if("number"!=typeof c&&c&&!c.da){var p=c.src;if(p&&p[Fa])tp(p.i,c);else{var _=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(_,I,c.capture):p.detachEvent?p.detachEvent(sT(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=op(p))?(tp(_,c),0==_.h&&(_.src=null,p[rp]=null)):il(c)}}}function sT(c){return c in ip?ip[c]:ip[c]="on"+c}function OU(c,p){if(c.da)c=!0;else{p=new Va(p,this);var _=c.listener,I=c.ha||c.src;c.fa&&sp(c),c=_.call(I,p)}return c}function op(c){return(c=c[rp])instanceof sl?c:null}var ap="__closure_events_fn_"+(1e9*Math.random()>>>0);function up(c){return"function"==typeof c?c:(c[ap]||(c[ap]=function(p){return c.handleEvent(p)}),c[ap])}function vn(){ns.call(this),this.i=new sl(this),this.M=this,this.F=null}function Rn(c,p){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=p.type||p,"string"==typeof p)p=new yn(p,c);else if(p instanceof yn)p.target=p.target||c;else{var k=p;x(p=new yn(I,c),k)}if(k=!0,_)for(var L=_.length-1;0<=L;L--){var te=p.g=_[L];k=ol(te,I,!0,p)&&k}if(k=ol(te=p.g=c,I,!0,p)&&k,k=ol(te,I,!1,p)&&k,_)for(L=0;L<_.length;L++)k=ol(te=p.g=_[L],I,!1,p)&&k}function ol(c,p,_,I){if(!(p=c.i.g[String(p)]))return!0;p=p.concat();for(var k=!0,L=0;L<p.length;++L){var te=p[L];if(te&&!te.da&&te.capture==_){var ct=te.listener,ln=te.ha||te.src;te.fa&&tp(c.i,te),k=!1!==ct.call(ln,I)&&k}}return k&&!I.defaultPrevented}function oT(c,p,_){if("function"==typeof c)_&&(c=v(c,_));else{if(!c||"function"!=typeof c.handleEvent)throw Error("Invalid listener argument");c=v(c.handleEvent,c)}return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function aT(c){c.g=oT(()=>{c.g=null,c.i&&(c.i=!1,aT(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}w(vn,ns),vn.prototype[Fa]=!0,vn.prototype.removeEventListener=function(c,p,_,I){iT(this,c,p,_,I)},vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var p,c=this.i;for(p in c.g){for(var _=c.g[p],I=0;I<_.length;I++)il(_[I]);delete c.g[p],c.h--}}this.F=null},vn.prototype.K=function(c,p,_,I){return this.i.add(String(c),p,!1,_,I)},vn.prototype.L=function(c,p,_,I){return this.i.add(String(c),p,!0,_,I)};class VU extends ns{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:aT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(c){ns.call(this),this.h=c,this.g={}}w(La,ns);var uT=[];function cT(c){_e(c.g,function(p,_){this.g.hasOwnProperty(_)&&sp(p)},c),c.g={}}La.prototype.N=function(){La.aa.N.call(this),cT(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cp=a.JSON.stringify,FU=a.JSON.parse,LU=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function lp(){}function dT(){}lp.prototype.h=null;var Ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dp(){yn.call(this,"d")}function hp(){yn.call(this,"c")}w(dp,yn),w(hp,yn);var Os={},hT=null;function al(){return hT=hT||new vn}function fT(c){yn.call(this,Os.La,c)}function Ba(c){const p=al();Rn(p,new fT(p))}function pT(c,p){yn.call(this,Os.STAT_EVENT,c),this.stat=p}function Pn(c){const p=al();Rn(p,new pT(p,c))}function gT(c,p){yn.call(this,Os.Ma,c),this.size=p}function ja(c,p){if("function"!=typeof c)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function za(){this.g=!0}function Lo(c,p,_,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+function zU(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_)for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var k=I[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if("noop"!=L&&"stop"!=L&&"close"!=L)for(var te=1;te<k.length;te++)k[te]=""}}}return cp(_)}catch{return p}}(c,_)+(I?" "+I:"")})}Os.La="serverreachability",w(fT,yn),Os.STAT_EVENT="statevent",w(pT,yn),Os.Ma="timingevent",w(gT,yn),za.prototype.xa=function(){this.g=!1},za.prototype.info=function(){};var fp,ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cl(){}function rs(c,p,_,I){this.j=c,this.i=p,this.l=_,this.R=I||1,this.U=new La(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _T}function _T(){this.i=null,this.g="",this.h=!1}w(cl,lp),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},fp=new cl;var yT={},pp={};function gp(c,p,_){c.L=1,c.v=fl(bi(p)),c.m=_,c.P=!0,vT(c,null)}function vT(c,p){c.F=Date.now(),ll(c),c.A=bi(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),NT(_.i,"t",I),c.C=0,_=c.j.J,c.h=new _T,c.g=JT(c.j,_?p:null,!c.m),0<c.O&&(c.M=new VU(v(c.Y,c,c.g),c.O)),p=c.U,_=c.g,I=c.ca;var k="readystatechange";Array.isArray(k)||(k&&(uT[0]=k.toString()),k=uT);for(var L=0;L<k.length;L++){var te=tT(_,k[L],I||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Ba(),function UU(c,p,_,I,k,L){c.info(function(){if(c.g)if(L)for(var te="",ct=L.split("&"),ln=0;ln<ct.length;ln++){var Xe=ct[ln].split("=");if(1<Xe.length){var In=Xe[0];Xe=Xe[1];var En=In.split("_");te=2<=En.length&&"type"==En[1]?te+(In+"=")+Xe+"&":te+(In+"=redacted&")}}else te=null;else te=L;return"XMLHTTP REQ ("+I+") [attempt "+k+"]: "+p+"\n"+_+"\n"+te})}(c.i,c.u,c.A,c.l,c.R,c.m)}function IT(c){return!!c.g&&"GET"==c.u&&2!=c.L&&c.j.Ca}function $U(c,p){var _=c.C,I=p.indexOf("\n",_);return-1==I?pp:(_=Number(p.substring(_,I)),isNaN(_)?yT:(I+=1)+_>p.length?pp:(p=p.slice(I,I+_),c.C=I+_,p))}function ll(c){c.S=Date.now()+c.I,ET(c,c.I)}function ET(c,p){if(null!=c.B)throw Error("WatchDog timer not null");c.B=ja(v(c.ba,c),p)}function mp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}function $a(c){0==c.j.G||c.J||WT(c.j,c)}function Vs(c){mp(c);var p=c.M;p&&"function"==typeof p.ma&&p.ma(),c.M=null,cT(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function _p(c,p){try{var _=c.j;if(0!=_.G&&(_.g==c||yp(_.h,c)))if(!c.K&&yp(_.h,c)&&3==_.G){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&3==I.length){var k=I;if(0==k[0]){e:if(!_.u){if(_.g){if(!(_.g.F+3e3<c.F))break e;yl(_),ml(_)}Tp(_),Pn(18)}}else _.za=k[1],0<_.za-_.T&&37500>k[2]&&_.F&&0==_.v&&!_.C&&(_.C=ja(v(_.Za,_),6e3));if(1>=bT(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ls(_,11)}else if((c.K||_.g==c)&&yl(_),!U(p))for(k=_.Da.g.parse(p),p=0;p<k.length;p++){let Xe=k[p];if(_.T=Xe[0],Xe=Xe[1],2==_.G)if("c"==Xe[0]){_.K=Xe[1],_.ia=Xe[2];const In=Xe[3];null!=In&&(_.la=In,_.j.info("VER="+_.la));const En=Xe[4];null!=En&&(_.Aa=En,_.j.info("SVER="+_.Aa));const jo=Xe[5];null!=jo&&"number"==typeof jo&&0<jo&&(_.L=I=1.5*jo,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const xr=c.g;if(xr){const Il=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var L=I.h;L.g||-1==Il.indexOf("spdy")&&-1==Il.indexOf("quic")&&-1==Il.indexOf("h2")||(L.j=L.l,L.g=new Set,L.h&&(vp(L,L.h),L.h=null))}if(I.D){const bp=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;bp&&(I.ya=bp,ft(I.I,I.D,bp))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms"));var te=c;if((I=_).qa=YT(I,I.J?I.ia:null,I.W),te.K){AT(I.h,te);var ct=te,ln=I.L;ln&&(ct.I=ln),ct.B&&(mp(ct),ll(ct)),I.g=te}else GT(I);0<_.i.length&&_l(_)}else"stop"!=Xe[0]&&"close"!=Xe[0]||Ls(_,7);else 3==_.G&&("stop"==Xe[0]||"close"==Xe[0]?"stop"==Xe[0]?Ls(_,7):Ep(_):"noop"!=Xe[0]&&_.l&&_.l.ta(Xe),_.v=0)}Ba()}catch{}}rs.prototype.ca=function(c){c=c.target;const p=this.M;p&&3==Ai(c)?p.j():this.Y(c)},rs.prototype.Y=function(c){try{if(c==this.g)e:{const En=Ai(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>En)&&(3!=En||this.g&&(this.h.h||this.g.oa()||BT(this.g)))){this.J||4!=En||7==p||Ba(),mp(this);var _=this.g.Z();this.X=_;t:if(IT(this)){var I=BT(this.g);c="";var k=I.length,L=4==Ai(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),$a(this);var te="";break t}this.h.i=new a.TextDecoder}for(p=0;p<k;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(L&&p==k-1)});I.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=200==_,function BU(c,p,_,I,k,L,te){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+k+"]: "+p+"\n"+_+"\n"+L+" "+te})}(this.i,this.u,this.A,this.l,this.R,En,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,ln=this.g;if((ct=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(ct)){var Xe=ct;break t}}Xe=null}if(!(_=Xe)){this.o=!1,this.s=3,Pn(12),Vs(this),$a(this);break e}Lo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_p(this,_)}if(this.P){let xr;for(_=!0;!this.J&&this.C<te.length;){if(xr=$U(this,te),xr==pp){4==En&&(this.s=4,Pn(14),_=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}if(xr==yT){this.s=4,Pn(15),Lo(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}Lo(this.i,this.l,xr,null),_p(this,xr)}if(IT(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=En||0!=te.length||this.h.h||(this.s=1,Pn(16),_=!1),this.o=this.o&&_,_){if(0<te.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),wp(In),In.M=!0,Pn(11))}}else Lo(this.i,this.l,te,"[Invalid Chunked Response]"),Vs(this),$a(this)}else Lo(this.i,this.l,te,null),_p(this,te);4==En&&Vs(this),this.o&&!this.J&&(4==En?WT(this.j,this):(this.o=!1,ll(this)))}else(function oB(c){const p={};c=(c.g&&2<=Ai(c)&&c.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<c.length;I++){if(U(c[I]))continue;var _=N(c[I]);const k=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();const L=p[k]||[];p[k]=L,L.push(_)}!function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}(p,function(I){return I.join(", ")})})(this.g),400==_&&0<te.indexOf("Unknown SID")?(this.s=3,Pn(12)):(this.s=0,Pn(13)),Vs(this),$a(this)}}}catch{}},rs.prototype.cancel=function(){this.J=!0,Vs(this)},rs.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(function jU(c,p){c.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(Ba(),Pn(17)),Vs(this),this.s=2,$a(this)):ET(this,this.S-c)};var qU=class{constructor(c,p){this.g=c,this.map=p}};function TT(c){this.l=c||10,c=a.PerformanceNavigationTiming?0<(c=a.performance.getEntriesByType("navigation")).length&&("hq"==c[0].nextHopProtocol||"h2"==c[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wT(c){return!!c.h||!!c.g&&c.g.size>=c.j}function bT(c){return c.h?1:c.g?c.g.size:0}function yp(c,p){return c.h?c.h==p:!!c.g&&c.g.has(p)}function vp(c,p){c.g?c.g.add(p):c.h=p}function AT(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}function CT(c){if(null!=c.h)return c.i.concat(c.h.D);if(null!=c.g&&0!==c.g.size){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return R(c.i)}function DT(c,p){if(c.forEach&&"function"==typeof c.forEach)c.forEach(p,void 0);else if(u(c)||"string"==typeof c)Array.prototype.forEach.call(c,p,void 0);else for(var _=function HU(c){if(c.na&&"function"==typeof c.na)return c.na();if(!c.V||"function"!=typeof c.V){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||"string"==typeof c){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const I in c)p[_++]=I;return p}}}(c),I=function GU(c){if(c.V&&"function"==typeof c.V)return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if("string"==typeof c)return c.split("");if(u(c)){for(var p=[],_=c.length,I=0;I<_;I++)p.push(c[I]);return p}for(I in p=[],_=0,c)p[_++]=c[I];return p}(c),k=I.length,L=0;L<k;L++)p.call(void 0,I[L],_&&_[L],c)}TT.prototype.cancel=function(){if(this.i=CT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const c of this.g.values())c.cancel();this.g.clear()}};var ST=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fs){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var p=c.i,_=new Ha;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),RT(this,_),this.m=c.m}else c&&(p=String(c).match(ST))?(this.h=!1,dl(this,p[1]||"",!0),this.o=qa(p[2]||""),this.g=qa(p[3]||"",!0),hl(this,p[4]),this.l=qa(p[5]||"",!0),RT(this,p[6]||"",!0),this.m=qa(p[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}function bi(c){return new Fs(c)}function dl(c,p,_){c.j=_?qa(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function RT(c,p,_){p instanceof Ha?(c.i=p,function ZU(c,p){p&&!c.j&&(is(c),c.i=null,c.g.forEach(function(_,I){var k=I.toLowerCase();I!=k&&(xT(this,I),NT(this,k,_))},c)),c.j=p}(c.i,c.h)):(_||(p=Ga(p,JU)),c.i=new Ha(p,c.h))}function ft(c,p,_){c.i.set(p,_)}function fl(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qa(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ga(c,p,_){return"string"==typeof c?(c=encodeURI(c).replace(p,KU),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function KU(c){return"%"+((c=c.charCodeAt(0))>>4&15).toString(16)+(15&c).toString(16)}Fs.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ga(p,PT,!0),":");var _=this.g;return(_||"file"==p)&&(c.push("//"),(p=this.o)&&c.push(Ga(p,PT,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.s)&&c.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&c.push("/"),c.push(Ga(_,"/"==_.charAt(0)?YU:QU,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ga(_,XU)),c.join("")};var PT=/[#\/\?@]/g,QU=/[#\?:]/g,YU=/[#\?]/g,JU=/[#\?@]/g,XU=/#/g;function Ha(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function is(c){c.g||(c.g=new Map,c.h=0,c.i&&function WU(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),k=null;if(0<=I){var L=c[_].substring(0,I);k=c[_].substring(I+1)}else L=c[_];p(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}function xT(c,p){is(c),p=Uo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function MT(c,p){return is(c),p=Uo(c,p),c.g.has(p)}function NT(c,p,_){xT(c,p),0<_.length&&(c.i=null,c.g.set(Uo(c,p),R(_)),c.h+=_.length)}function Uo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function ss(c,p,_,I,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),I(_)}catch{}}function nB(){this.g=new LU}function rB(c,p,_){const I=_||"";try{DT(c,function(k,L){let te=k;l(k)&&(te=cp(k)),p.push(I+L+"="+encodeURIComponent(te))})}catch(k){throw p.push(I+"type="+encodeURIComponent("_badmap")),k}}function Wa(c){this.l=c.Ub||null,this.j=c.eb||!1}function pl(c,p){vn.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function kT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}function Ka(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qa(c)}function Qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}function OT(c){let p="";return _e(c,function(_,I){p+=I,p+=":",p+=_,p+="\r\n"}),p}function Ip(c,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=OT(_),"string"==typeof c?null!=_&&encodeURIComponent(String(_)):ft(c,p,_))}function Ct(c){vn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ha.prototype).add=function(c,p){is(this),this.i=null,c=Uo(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this},n.forEach=function(c,p){is(this),this.g.forEach(function(_,I){_.forEach(function(k){c.call(p,k,I,this)},this)},this)},n.na=function(){is(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const k=c[I];for(let L=0;L<k.length;L++)_.push(p[I])}return _},n.V=function(c){is(this);let p=[];if("string"==typeof c)MT(this,c)&&(p=p.concat(this.g.get(Uo(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return is(this),this.i=null,MT(this,c=Uo(this,c))&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c&&0<(c=this.V(c)).length?String(c[0]):p},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const L=encodeURIComponent(String(I)),te=this.V(I);for(I=0;I<te.length;I++){var k=L;""!==te[I]&&(k+="="+encodeURIComponent(String(te[I]))),c.push(k)}}return this.i=c.join("&")},w(Wa,lp),Wa.prototype.g=function(){return new pl(this.l,this.j)},Wa.prototype.i=function(c){return function(){return c}}({}),w(pl,vn),(n=pl.prototype).open=function(c,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Qa(this)},n.send=function(c){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ka(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if("arraybuffer"===this.responseType)c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ka(this):Qa(this),3==this.readyState&&kT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ka(this))},n.Qa=function(c){this.g&&(this.response=c,Ka(this))},n.ga=function(){this.g&&Ka(this)},n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)c.push((_=_.value)[0]+": "+_[1]),_=p.next();return c.join("\r\n")},Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(c){this.m=c?"include":"same-origin"}}),w(Ct,vn);var iB=/^https?$/i,sB=["POST","PUT"];function VT(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,FT(c),gl(c)}function FT(c){c.A||(c.A=!0,Rn(c,"complete"),Rn(c,"error"))}function LT(c){if(c.h&&typeof o<"u"&&(!c.v[1]||4!=Ai(c)||2!=c.Z()))if(c.u&&4==Ai(c))oT(c.Ea,0,c);else if(Rn(c,"readystatechange"),4==Ai(c)){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=0===te){var k=String(c.D).match(ST)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),I=!iB.test(k?k.toLowerCase():"")}_=I}if(_)Rn(c,"complete"),Rn(c,"success");else{c.m=6;try{var L=2<Ai(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",FT(c)}}finally{gl(c)}}}function gl(c,p){if(c.g){UT(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Rn(c,"ready");try{_.onreadystatechange=I}catch{}}}function UT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}function Ai(c){return c.g?c.g.readyState:0}function BT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function jT(c){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ya("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ya("baseRetryDelayMs",5e3,c),this.cb=Ya("retryDelaySeedMs",1e4,c),this.Wa=Ya("forwardChannelMaxRetries",2,c),this.wa=Ya("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new TT(c&&c.concurrentRequestLimit),this.Da=new nB,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ep(c){if(zT(c),3==c.G){var p=c.U++,_=bi(c.I);if(ft(_,"SID",c.K),ft(_,"RID",p),ft(_,"TYPE","terminate"),Ja(c,_),(p=new rs(c,c.j,p)).L=2,p.v=fl(bi(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&((new Image).src=p.v,_=!0),_||(p.g=JT(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ll(p)}QT(c)}function ml(c){c.g&&(wp(c),c.g.cancel(),c.g=null)}function zT(c){ml(c),c.u&&(a.clearTimeout(c.u),c.u=null),yl(c),c.h.cancel(),c.s&&("number"==typeof c.s&&a.clearTimeout(c.s),c.s=null)}function _l(c){if(!wT(c.h)&&!c.s){c.s=!0;var p=c.Ga;ka||eT(),Oa||(ka(),Oa=!0),ep.add(p,c),c.B=0}}function $T(c,p){var _;_=p?p.l:c.U++;const I=bi(c.I);ft(I,"SID",c.K),ft(I,"RID",_),ft(I,"AID",c.T),Ja(c,I),c.m&&c.o&&Ip(I,c.m,c.o),_=new rs(c,c.j,_,c.B+1),null===c.m&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=qT(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vp(c.h,_),gp(_,I,p)}function Ja(c,p){c.H&&_e(c.H,function(_,I){ft(p,I,_)}),c.l&&DT({},function(_,I){ft(p,I,_)})}function qT(c,p,_){_=Math.min(c.i.length,_);var I=c.l?v(c.l.Na,c.l,c):null;e:{var k=c.i;let L=-1;for(;;){const te=["count="+_];-1==L?0<_?(L=k[0].g,te.push("ofs="+L)):L=0:te.push("ofs="+L);let ct=!0;for(let ln=0;ln<_;ln++){let Xe=k[ln].g;const In=k[ln].map;if(Xe-=L,0>Xe)L=Math.max(0,k[ln].g-100),ct=!1;else try{rB(In,te,"req"+Xe+"_")}catch{I&&I(In)}}if(ct){I=te.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,I}function GT(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ka||eT(),Oa||(ka(),Oa=!0),ep.add(p,c),c.v=0}}function Tp(c){return!(c.g||c.u||3<=c.v||(c.Y++,c.u=ja(v(c.Fa,c),KT(c,c.v)),c.v++,0))}function wp(c){null!=c.A&&(a.clearTimeout(c.A),c.A=null)}function HT(c){c.g=new rs(c,c.j,"rpc",c.Y),null===c.m&&(c.g.H=c.o),c.g.O=0;var p=bi(c.qa);ft(p,"RID","rpc"),ft(p,"SID",c.K),ft(p,"AID",c.T),ft(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(p,"TO",c.ja),ft(p,"TYPE","xmlhttp"),Ja(c,p),c.m&&c.o&&Ip(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=fl(bi(p)),_.m=null,_.P=!0,vT(_,c)}function yl(c){null!=c.C&&(a.clearTimeout(c.C),c.C=null)}function WT(c,p){var _=null;if(c.g==p){yl(c),wp(c),c.g=null;var I=2}else{if(!yp(c.h,p))return;_=p.D,AT(c.h,p),I=1}if(0!=c.G)if(p.o)if(1==I){_=p.m?p.m.length:0,p=Date.now()-p.F;var k=c.B;Rn(I=al(),new gT(I,_)),_l(c)}else GT(c);else if(3==(k=p.s)||0==k&&0<p.X||!(1==I&&function aB(c,p){return!(bT(c.h)>=c.h.j-(c.s?1:0)||(c.s?(c.i=p.D.concat(c.i),0):1==c.G||2==c.G||c.B>=(c.Va?0:c.Wa)||(c.s=ja(v(c.Ga,c,p),KT(c,c.B)),c.B++,0)))}(c,p)||2==I&&Tp(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),k){case 1:Ls(c,5);break;case 4:Ls(c,10);break;case 3:Ls(c,6);break;default:Ls(c,2)}}function KT(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Ls(c,p){if(c.j.info("Error code "+p),2==p){var _=v(c.fb,c),I=c.Xa;const k=!I;I=new Fs(I||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dl(I,"https"),fl(I),k?function eB(c,p){const _=new za;if(a.Image){const I=new Image;I.onload=E(ss,_,"TestLoadImage: loaded",!0,p,I),I.onerror=E(ss,_,"TestLoadImage: error",!1,p,I),I.onabort=E(ss,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(ss,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}(I.toString(),_):function tB(c,p){new za;const I=new AbortController,k=setTimeout(()=>{I.abort(),ss(0,0,!1,p)},1e4);fetch(c,{signal:I.signal}).then(L=>{clearTimeout(k),ss(0,0,!!L.ok,p)}).catch(()=>{clearTimeout(k),ss(0,0,!1,p)})}(I.toString(),_)}else Pn(2);c.G=0,c.l&&c.l.sa(p),QT(c),zT(c)}function QT(c){if(c.G=0,c.ka=[],c.l){const p=CT(c.h);(0!=p.length||0!=c.i.length)&&(P(c.ka,p),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function YT(c,p,_){var I=_ instanceof Fs?bi(_):new Fs(_);if(""!=I.g)p&&(I.g=p+"."+I.g),hl(I,I.s);else{var k=a.location;I=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;var L=new Fs(null);I&&dl(L,I),p&&(L.g=p),k&&hl(L,k),_&&(L.l=_),I=L}return p=c.ya,(_=c.D)&&p&&ft(I,_,p),ft(I,"VER",c.la),Ja(c,I),I}function JT(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Ct(c.Ca&&!c.pa?new Wa({eb:_}):c.pa)).Ha(c.J),p}function XT(){}function vl(){}function Xn(c,p){vn.call(this),this.g=new jT(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!U(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!U(p)&&(this.g.D=p,null!==(c=this.h)&&p in c&&p in(c=this.h)&&delete c[p]),this.j=new Bo(this)}function ZT(c){dp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=null!==p&&c in p?p[c]:void 0),this.data=p}else this.data=c}function ew(){hp.call(this),this.status=1}function Bo(c){this.g=c}(n=Ct.prototype).Ha=function(c){this.J=c},n.ea=function(c,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fp.g(),this.v=function lT(c){return c.h||(c.h=c.i())}(this.o?this.o:fp),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(L){return void VT(this,L)}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var k in I)_.set(k,I[k]);else{if("function"!=typeof I.keys||"function"!=typeof I.get)throw Error("Unknown input type for opt_headers: "+String(I));for(const L of I.keys())_.set(L,I.get(L))}I=Array.from(_.keys()).find(L=>"content-type"==L.toLowerCase()),k=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sB,p,void 0))||I||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,te]of _)this.g.setRequestHeader(L,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UT(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){VT(this,L)}},n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rn(this,"complete"),Rn(this,"abort"),gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?LT(this):this.bb())},n.bb=function(){LT(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&0==p.indexOf(c)&&(p=p.substring(c.length)),FU(p)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=jT.prototype).la=8,n.G=1,n.connect=function(c,p,_,I){Pn(0),this.W=c,this.H=p||{},_&&void 0!==I&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=YT(this,null,this.W),_l(this)},n.Ga=function(c){if(this.s)if(this.s=null,1==this.G){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const k=new rs(this,this.j,c);let L=this.o;if(this.S&&(L?(L=b(L),x(L,this.S)):L=this.S),null!==this.m||this.O||(k.H=L,L=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){var I=this.i[_];if(void 0===(I="__data__"in I.map&&"string"==typeof(I=I.map.__data__)?I.length:void 0))break;if(4096<(p+=I)){p=_;break e}if(4096===p||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=qT(this,k,p),ft(_=bi(this.I),"RID",c),ft(_,"CVER",22),this.D&&ft(_,"X-HTTP-Session-Id",this.D),Ja(this,_),L&&(this.O?p="headers="+encodeURIComponent(String(OT(L)))+"&"+p:this.m&&Ip(_,this.m,L)),vp(this.h,k),this.Ua&&ft(_,"TYPE","init"),this.P?(ft(_,"$req",p),ft(_,"SID","null"),k.T=!0,gp(k,_,null)):gp(k,_,p),this.G=2}}else 3==this.G&&(c?$T(this,c):0==this.i.length||wT(this.h)||$T(this))},n.Fa=function(){if(this.u=null,HT(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ja(v(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pn(10),ml(this),HT(this))},n.Za=function(){null!=this.C&&(this.C=null,ml(this),Tp(this),Pn(19))},n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Pn(2)):(this.j.info("Failed to ping google.com"),Pn(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=XT.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},vl.prototype.g=function(c,p){return new Xn(c,p)},w(Xn,vn),Xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Ep(this.g)},Xn.prototype.o=function(c){var p=this.g;if("string"==typeof c){var _={};_.__data__=c,c=_}else this.u&&((_={}).__data__=cp(c),c=_);p.i.push(new qU(p.Ya++,c)),3==p.G&&_l(p)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Ep(this.g),delete this.g,Xn.aa.N.call(this)},w(ZT,dp),w(ew,hp),w(Bo,XT),Bo.prototype.ua=function(){Rn(this.g,"a")},Bo.prototype.ta=function(c){Rn(this.g,new ZT(c))},Bo.prototype.sa=function(c){Rn(this.g,new ew)},Bo.prototype.ra=function(){Rn(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,sY=Yc.createWebChannelTransport=function(){return new vl},iY=Yc.getStatEventTarget=function(){return al()},rY=Yc.Event=Os,oL=Yc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,cS=Yc.ErrorCode=ul,mT.COMPLETE="complete",nY=Yc.EventType=mT,dT.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",vn.prototype.listen=vn.prototype.K,g0=Yc.WebChannel=dT,Yc.FetchXmlHttpFactory=Wa,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,tY=Yc.XhrIo=Ct}).apply(typeof uS<"u"?uS:typeof self<"u"?self:typeof window<"u"?window:{});const oY="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let R_="11.0.2";const Fd=new qO("@firebase/firestore");function P_(){return Fd.logLevel}function Ee(n,...e){if(Fd.logLevel<=en.DEBUG){const t=e.map(aL);Fd.debug(`Firestore (${R_}): ${n}`,...t)}}function ti(n,...e){if(Fd.logLevel<=en.ERROR){const t=e.map(aL);Fd.error(`Firestore (${R_}): ${n}`,...t)}}function ca(n,...e){if(Fd.logLevel<=en.WARN){const t=e.map(aL);Fd.warn(`Firestore (${R_}): ${n}`,...t)}}function aL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ke(n="Unexpected state"){const e=`FIRESTORE (${R_}) INTERNAL ASSERTION FAILED: `+n;throw ti(e),new Error(e)}function tt(n,e){n||Ke()}function Ve(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Bc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class aY{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SAe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Li.UNAUTHENTICATED))}shutdown(){}}class RAe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PAe{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;tt(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ui,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,M.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ui)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt("string"==typeof r.accessToken),new aY(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(null===e||"string"==typeof e),new Li(e)}}class xAe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class MAe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new xAe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uY{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NAe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){tt(void 0===this.o);const r=s=>{null!=s.error&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt("string"==typeof t.token),this.R=t.token,new uY(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kAe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class cY{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=kAe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function x_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Rr{static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new Rr(0,0))}static max(){return new it(new Rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class m0{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ke(),void 0===r?r=e.length-t:r>e.length-t&&Ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===m0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof m0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends m0{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const OAe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cr extends m0{construct(e,t,r){return new Cr(e,t,r)}static isValidIdentifier(e){return OAe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cr(t)}static emptyPath(){return new Cr([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(tn.fromString(e))}static fromName(e){return new Ue(tn.fromString(e).popFirst(5))}static empty(){return new Ue(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new tn(e.slice()))}}class Vo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vo(it.min(),Ue.empty(),-1)}static max(){return new Vo(it.max(),Ue.empty(),-1)}}function cL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const fY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ld(n){return lL.apply(this,arguments)}function lL(){return(lL=(0,M.A)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==fY)throw n;Ee("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(i=>i?X.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new X((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new X((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Ud(n){return"IndexedDbTransactionError"===n.name}let Fo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function y0(n){return null==n}function v0(n){return 0===n&&1/n==-1/0}function zAe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function yY(n){return n+"\x01\x01"}function bY(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CY(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hS(this.root,e,this.comparator,!1)}getReverseIterator(){return new hS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hS(this.root,e,this.comparator,!0)}}class hS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Zi.RED,this.left=i??Zi.EMPTY,this.right=s??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DY(this.data.getIterator())}getIteratorFrom(e){return new DY(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class DY{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class io{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new io([])}unionWith(e){let t=new Vn(Cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return x_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class SY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SY("Invalid base64 string: "+s):s}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const aCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jc(n){if(tt(!!n),"string"==typeof n){let e=0;const t=aCe.exec(n);if(tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function fS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pS(n){const e=n.mapValue.fields.__previous_value__;return fS(e)?pS(e):e}function I0(n){const e=Jc(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class uCe{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ff{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ff("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ff&&e.projectId===this.projectId&&e.database===this.database}}const jd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fS(n)?4:NY(n)?9007199254740991:yS(n)?10:11:Ke()}function qu(n,e){if(n===e)return!0;const t=zd(n);if(t!==zd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return I0(n).isEqual(I0(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jc(i.timestampValue),a=Jc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Xc(n.bytesValue).isEqual(Xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Dr(i.geoPointValue.latitude)===Dr(s.geoPointValue.latitude)&&Dr(i.geoPointValue.longitude)===Dr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dr(i.integerValue)===Dr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dr(i.doubleValue),a=Dr(s.doubleValue);return o===a?v0(o)===v0(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return x_(n.arrayValue.values||[],e.arrayValue.values||[],qu);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bY(o)!==bY(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!qu(o[u],a[u])))return!1;return!0}(n,e);default:return Ke()}var s}function E0(n,e){return void 0!==(n.values||[]).find(t=>qu(t,e))}function $d(n,e){if(n===e)return 0;const t=zd(n),r=zd(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dr(s.integerValue||s.doubleValue),u=Dr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RY(n.timestampValue,e.timestampValue);case 4:return RY(I0(n),I0(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Xc(s),u=Xc(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=Tt(a[l],u[l]);if(0!==h)return h}return Tt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(Dr(s.latitude),Dr(o.latitude));return 0!==a?a:Tt(Dr(s.longitude),Dr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PY(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,w=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,R=Tt((null===(l=E?.values)||void 0===l?void 0:l.length)||0,(null===(h=w?.values)||void 0===h?void 0:h.length)||0);return 0!==R?R:PY(E,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===jd.mapValue&&o===jd.mapValue)return 0;if(s===jd.mapValue)return 1;if(o===jd.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const v=Tt(u[g],h[g]);if(0!==v)return v;const E=$d(a[u[g]],l[h[g]]);if(0!==E)return E}return Tt(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Ke()}}function RY(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=Jc(n),r=Jc(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function PY(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=$d(t[i],r[i]);if(s)return s}return Tt(t.length,r.length)}function O_(n){return pL(n)}function pL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Jc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=pL(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${pL(t.fields[o])}`;return i+"}"}(n.mapValue):Ke()}function mS(n){switch(zd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pS(n);return e?16+mS(e):16;case 5:return 2*n.stringValue.length;case 6:return Xc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((i,s)=>i+mS(s),0);case 10:case 11:return function(r){let i=0;return Bd(r.fields,(s,o)=>{i+=s.length+mS(o)}),i}(n.mapValue);default:throw Ke()}}function gL(n){return!!n&&"integerValue"in n}function T0(n){return!!n&&"arrayValue"in n}function xY(n){return!!n&&"nullValue"in n}function MY(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _S(n){return!!n&&"mapValue"in n}function yS(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function w0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=w0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=w0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NY(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_S(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=w0(t)}setAll(e){let t=Cr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=w0(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());_S(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_S(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new es(w0(this.value))}}function FY(n){const e=[];return Bd(n.fields,(t,r)=>{const i=new Cr([t]);if(_S(r)){const s=FY(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new io(e)}class Ir{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ir(e,0,it.min(),it.min(),it.min(),es.empty(),0)}static newFoundDocument(e,t,r,i){return new Ir(e,1,t,it.min(),r,i,0)}static newNoDocument(e,t){return new Ir(e,2,t,it.min(),it.min(),es.empty(),0)}static newUnknownDocument(e,t){return new Ir(e,3,t,it.min(),it.min(),es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qd{constructor(e,t){this.position=e,this.inclusive=t}}function LY(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ue.comparator(Ue.fromName(o.referenceValue),t.key):$d(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function UY(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qu(n.position[t],e.position[t]))return!1;return!0}class b0{constructor(e,t="asc"){this.field=e,this.dir=t}}function dCe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class BY{}class nn extends BY{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new hCe(e,t,r):"array-contains"===t?new gCe(e,r):"in"===t?new HY(e,r):"not-in"===t?new mCe(e,r):"array-contains-any"===t?new _Ce(e,r):new nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new fCe(e,r):new pCe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($d(t,this.value)):null!==t&&zd(this.value)===zd(t)&&this.matchesComparison($d(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends BY{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Fn(e,t)}matches(e){return V_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function V_(n){return"and"===n.op}function _L(n){return function jY(n){for(const e of n.filters)if(e instanceof Fn)return!1;return!0}(n)&&V_(n)}function yL(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+O_(n.value);if(_L(n))return n.filters.map(e=>yL(e)).join(",");{const e=n.filters.map(t=>yL(t)).join(",");return`${n.op}(${e})`}}function zY(n,e){return n instanceof nn?(r=n,(i=e)instanceof nn&&r.op===i.op&&r.field.isEqual(i.field)&&qu(r.value,i.value)):n instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&zY(o,i.filters[a]),!0)}(n,e):void Ke();var r,i}function qY(n){return n instanceof nn?`${(t=n).field.canonicalString()} ${t.op} ${O_(t.value)}`:n instanceof Fn?function(t){return t.op.toString()+" {"+t.getFilters().map(qY).join(" ,")+"}"}(n):"Filter";var t}class hCe extends nn{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class fCe extends nn{constructor(e,t){super(e,"in",t),this.keys=GY(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pCe extends nn{constructor(e,t){super(e,"not-in",t),this.keys=GY(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GY(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class gCe extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return T0(t)&&E0(t.arrayValue,this.value)}}class HY extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&E0(this.value.arrayValue,t)}}class mCe extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(E0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!E0(this.value.arrayValue,t)}}class _Ce extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!T0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>E0(this.value.arrayValue,r))}}class yCe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function vL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new yCe(n,e,t,r,i,s,o)}function Uf(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yL(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),y0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>O_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>O_(r)).join(",")),e.ue=t}return e.ue}function A0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dCe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zY(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UY(n.startAt,e.startAt)&&UY(n.endAt,e.endAt)}function vS(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Zc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function F_(n){return new Zc(n)}function YY(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function L_(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vn(Cr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new b0(s,r))}),t.has(Cr.keyField().canonicalString())||e.ce.push(new b0(Cr.keyField(),r))}return e.ce}function Is(n){const e=Ve(n);return e.le||(e.le=function XY(n,e){if("F"===n.limitType)return vL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new b0(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new qd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qd(n.startAt.position,n.startAt.inclusive):null;return vL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,L_(n))),e.le}function ES(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function C0(n,e){return A0(Is(n),Is(e))&&n.limitType===e.limitType}function ZY(n){return`${Uf(Is(n))}|lt:${n.limitType}`}function U_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qY(i)).join(", ")}]`),y0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>O_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>O_(i)).join(",")),`Target(${r})`}(Is(n))}; limitType=${n.limitType})`}function D0(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of L_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=LY(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,L_(r),i)||r.endAt&&!function(o,a,u){const l=LY(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,L_(r),i)));var r,i}function tJ(n){return(e,t)=>{let r=!1;for(const i of L_(n)){const s=vCe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function vCe(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?$d(u,l):Ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}class el{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CY(this.inner)}size(){return this.innerSize}}const ICe=new ar(Ue.comparator);function so(){return ICe}const nJ=new ar(Ue.comparator);function S0(...n){let e=nJ;for(const t of n)e=e.insert(t.key,t);return e}function rJ(n){let e=nJ;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Gu(){return R0()}function iJ(){return R0()}function R0(){return new el(n=>n.toString(),(n,e)=>n.isEqual(e))}const ECe=new ar(Ue.comparator),TCe=new Vn(Ue.comparator);function Mt(...n){let e=TCe;for(const t of n)e=e.add(t);return e}const wCe=new Vn(Tt);function wL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:v0(e)?"-0":e}}function sJ(n){return{integerValue:""+n}}function oJ(n,e){return function _Y(n){return"number"==typeof n&&Number.isInteger(n)&&!v0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?sJ(e):wL(n,e)}class TS{constructor(){this._=void 0}}function bCe(n,e,t){return n instanceof B_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fS(s)&&(s=pS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Bf?uJ(n,e):n instanceof jf?cJ(n,e):function(i,s){const o=aJ(i,s),a=lJ(o)+lJ(i.Pe);return gL(o)&&gL(i.Pe)?sJ(a):wL(i.serializer,a)}(n,e)}function ACe(n,e,t){return n instanceof Bf?uJ(n,e):n instanceof jf?cJ(n,e):t}function aJ(n,e){return n instanceof j_?gL(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class B_ extends TS{}class Bf extends TS{constructor(e){super(),this.elements=e}}function uJ(n,e){const t=dJ(e);for(const r of n.elements)t.some(i=>qu(i,r))||t.push(r);return{arrayValue:{values:t}}}class jf extends TS{constructor(e){super(),this.elements=e}}function cJ(n,e){let t=dJ(e);for(const r of n.elements)t=t.filter(i=>!qu(i,r));return{arrayValue:{values:t}}}class j_ extends TS{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lJ(n){return Dr(n.integerValue||n.doubleValue)}function dJ(n){return T0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class DCe{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bS{}function hJ(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $_(n.key,Sr.none()):new z_(n.key,n.data,Sr.none());{const t=n.data,r=es.empty();let i=new Vn(Cr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new tl(n.key,r,new io(i.toArray()),Sr.none())}}function SCe(n,e,t){n instanceof z_?function(i,s,o){const a=i.value.clone(),u=gJ(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof tl?function(i,s,o){if(!wS(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gJ(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(pJ(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function x0(n,e,t,r){return n instanceof z_?function(s,o,a,u){if(!wS(s.precondition,o))return a;const l=s.value.clone(),h=mJ(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof tl?function(s,o,a,u){if(!wS(s.precondition,o))return a;const l=mJ(s.fieldTransforms,u,o),h=o.data;return h.setAll(pJ(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,wS(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function RCe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=aJ(r.transform,i||null);null!=s&&(null===t&&(t=es.empty()),t.set(r.field,s))}return t||null}function fJ(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&x_(r,i,(s,o)=>function CCe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Bf&&i instanceof Bf||r instanceof jf&&i instanceof jf?x_(r.elements,i.elements,qu):r instanceof j_&&i instanceof j_?qu(r.Pe,i.Pe):r instanceof B_&&i instanceof B_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class z_ extends bS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tl extends bS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pJ(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gJ(n,e,t){const r=new Map;tt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ACe(o,a,t[i]))}return r}function mJ(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,bCe(s,o,e))}return r}class $_ extends bS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bL extends bS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AL{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&SCe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iJ();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=hJ(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mt())}isEqual(e){return this.batchId===e.batchId&&x_(this.mutations,e.mutations,(t,r)=>fJ(t,r))&&x_(this.baseMutations,e.baseMutations,(t,r)=>fJ(t,r))}}class CL{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tt(e.mutations.length===r.length);let i=function(){return ECe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CL(e,t,r,i)}}class DL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class PCe{constructor(e,t){this.count=e,this.unchangedNames=t}}var li,pn;function vJ(n){if(void 0===n)return ti("GRPC error has no .code"),ue.UNKNOWN;switch(n){case li.OK:return ue.OK;case li.CANCELLED:return ue.CANCELLED;case li.UNKNOWN:return ue.UNKNOWN;case li.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case li.INTERNAL:return ue.INTERNAL;case li.UNAVAILABLE:return ue.UNAVAILABLE;case li.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case li.NOT_FOUND:return ue.NOT_FOUND;case li.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case li.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case li.ABORTED:return ue.ABORTED;case li.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case li.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case li.DATA_LOSS:return ue.DATA_LOSS;default:return Ke()}}(pn=li||(li={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";const xCe=new Nf([4294967295,4294967295],0);function EJ(n){const e=function IJ(){return new TextEncoder}().encode(n),t=new eY;return t.update(e),new Uint8Array(t.digest())}function TJ(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nf([t,r],0),new Nf([i,s],0)]}class SL{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new M0(`Invalid padding: ${t}`);if(r<0)throw new M0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new M0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new M0(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Nf.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Nf.fromNumber(r)));return 1===i.compare(xCe)&&(i=new Nf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=EJ(e),[r,i]=TJ(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new SL(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=EJ(e),[r,i]=TJ(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class M0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class N0{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,k0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new N0(it.min(),i,new ar(Tt),so(),Mt())}}class k0{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new k0(r,t,Mt(),Mt(),Mt())}}class CS{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class wJ{constructor(e,t){this.targetId=e,this.me=t}}class bJ{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AJ{constructor(){this.fe=0,this.ge=CJ(),this.pe=Lr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Mt(),t=Mt(),r=Mt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ke()}}),new k0(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=CJ()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class MCe{constructor(e){this.Le=e,this.Be=new Map,this.ke=so(),this.qe=DS(),this.Qe=DS(),this.Ke=new ar(Tt)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(vS(s))if(0===r){const o=new Ue(s.path);this.We(t,o,Ir.newNoDocument(o,it.min()))}else tt(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Xc(r).toUint8Array()}catch(u){if(u instanceof SY)return ca("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new SL(o,i,s)}catch(u){return ca(u instanceof M0?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&vS(a.target)){const u=new Ue(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,Ir.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Mt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new N0(e,t,this.Ke,this.ke,r);return this.ke=so(),this.qe=DS(),this.Qe=DS(),this.Ke=new ar(Tt),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new AJ,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Vn(Tt),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Vn(Tt),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new AJ),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function DS(){return new ar(Ue.comparator)}function CJ(){return new ar(Ue.comparator)}const NCe={asc:"ASCENDING",desc:"DESCENDING"},kCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OCe={and:"AND",or:"OR"};class VCe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RL(n,e){return n.useProto3Json||y0(e)?e:{value:e}}function q_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DJ(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FCe(n,e){return q_(n,e.toTimestamp())}function ni(n){return tt(!!n),it.fromTimestamp(function(t){const r=Jc(t);return new Rr(r.seconds,r.nanos)}(n))}function PL(n,e){return xL(n,e).canonicalString()}function xL(n,e){const t=(i=n,new tn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function SJ(n){const e=tn.fromString(n);return tt(UJ(e)),e}function O0(n,e){return PL(n.databaseId,e.path)}function Hu(n,e){const t=SJ(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(xJ(t))}function RJ(n,e){return PL(n.databaseId,e)}function ML(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xJ(n){return tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function MJ(n,e,t){return{name:O0(n,e),fields:t.value.mapValue.fields}}function kJ(n,e){return{documents:[RJ(n,e.path)]}}function SS(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=RJ(n,i);const s=function(l){if(0!==l.length)return LJ(Fn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:Gd((v=h).field),direction:zCe(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=RL(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i};var l}function VJ(n){let e=function PJ(n){const e=SJ(n);return 4===e.length?tn.emptyPath():xJ(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tt(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const v=FJ(g);return v instanceof Fn&&_L(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new b0(G_((w=v).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;t.limit&&(a=function(g){let v;return v="object"==typeof g?g.value:g,y0(v)?null:v}(t.limit));let u=null;var g;t.startAt&&(u=new qd((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new qd(g.values||[],!g.before)}(t.endAt)),function QY(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",u,l)}function FJ(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=G_(t.unaryFilter.field);return nn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=G_(t.unaryFilter.field);return nn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=G_(t.unaryFilter.field);return nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=G_(t.unaryFilter.field);return nn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(n):void 0!==n.fieldFilter?nn.create(G_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Fn.create(t.compositeFilter.filters.map(r=>FJ(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ke()}}(t.compositeFilter.op))}(n):Ke();var t}function zCe(n){return NCe[n]}function $Ce(n){return kCe[n]}function qCe(n){return OCe[n]}function Gd(n){return{fieldPath:n.canonicalString()}}function G_(n){return Cr.fromServerFormat(n.fieldPath)}function LJ(n){return n instanceof nn?function(t){if("=="===t.op){if(MY(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NAN"}};if(xY(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(MY(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NOT_NAN"}};if(xY(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gd(t.field),op:$Ce(t.op),value:t.value}}}(n):n instanceof Fn?function(t){const r=t.getFilters().map(i=>LJ(i));return 1===r.length?r[0]:{compositeFilter:{op:qCe(t.op),filters:r}}}(n):Ke()}function GCe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UJ(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class nl{constructor(e,t,r,i,s=it.min(),o=it.min(),a=Lr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BJ{constructor(e){this.ht=e}}function kL(n){const e=VJ({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ES(e,e.limit,"L"):e}class Gf{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),v0(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),"string"==typeof r&&(r=Jc(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Xc(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?NY(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):yS(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):Ke()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;const s=e.fields||{};this.Rt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Rt(t,15),t.Vt(Dr(a)),this.gt(o,t),this.dt(s[o],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),Ue.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Gf.Ft=new Gf;class eDe{constructor(){this.ln=new BL}addToCollectionParentIndex(e,t){return this.ln.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Vo.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class BL{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(tn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(tn.comparator)).toArray()}}new Uint8Array(0);const tX={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Es{static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(41943040,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class Wf{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Wf(0)}static Qn(){return new Wf(-1)}}function oX([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class rDe{constructor(e){this.Gn=e,this.buffer=new Vn(oX),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oX(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aX{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){var t=this;Ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,M.A)(function*(){t.Jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ud(r)?Ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ld(r)}yield t.Yn(3e5)}))}}class iDe{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return X.resolve(Fo.oe);const r=new rDe(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(tX)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tX):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),P_()<=en.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class cX{constructor(){this.changes=new el(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uDe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pX{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&x0(r.mutation,i,io.empty(),Rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Mt()){const i=Gu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=S0();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=so();const o=R0(),a=R0();return t.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof tl)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),x0(h.mutation,l,h.mutation.getFieldMask(),Rr.now())):o.set(l.key,io.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new uDe(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=R0();let i=new ar((o,a)=>o-a),s=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let h=r.get(u)||io.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Mt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=iJ();h.forEach(v=>{if(!s.has(v)){const E=hJ(t.get(v),r.get(v));null!==E&&g.set(v,E),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function IL(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):X.resolve(Gu());let a=-1,u=s;return o.next(l=>X.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{u=u.insert(h,v)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Mt())).next(h=>({batchId:a,changes:rJ(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(r=>{let i=S0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=S0();return this.indexManager.getCollectionParents(e,s).next(a=>X.forEach(a,u=>{const l=(g=t,v=u.child(s),new Zc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,v;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,Ir.newInvalidDocument(h)))});let a=S0();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&x0(h.mutation,l,io.empty(),Rr.now()),D0(t,l)&&(a=a.insert(u,l))}),a})}}class cDe{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return X.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,{id:(i=t).id,version:i.version,createTime:ni(i.createTime)}),X.resolve();var i}getNamedQuery(e,t){return X.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,{name:(i=t).name,query:kL(i.bundledQuery),readTime:ni(i.readTime)}),X.resolve();var i}}class lDe{constructor(){this.overlays=new ar(Ue.comparator),this.Er=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Gu();return X.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const i=Gu(),s=t.length+1,o=new Ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ar((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Gu(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Gu(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return X.resolve(a)}Tt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DL(t,r));let s=this.Er.get(t);void 0===s&&(s=Mt(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}class dDe{constructor(){this.sessionToken=Lr.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class jL{constructor(){this.dr=new Vn(Bi.Ar),this.Rr=new Vn(Bi.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Bi(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Bi(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Ue(new tn([])),r=new Bi(t,e),i=new Bi(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Ue(new tn([])),r=new Bi(t,e),i=new Bi(t,e+1);let s=Mt();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Bi(e,0),r=this.dr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Bi{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Ue.comparator(e.key,t.key)||Tt(e.br,t.br)}static Vr(e,t){return Tt(e.br,t.br)||Ue.comparator(e.key,t.key)}}class hDe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Vn(Bi.Ar)}checkEmpty(e){return X.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++;const o=new AL(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Bi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,t){return X.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Fr(t+1),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bi(t,0),i=new Bi(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Tt);return t.forEach(i=>{const s=new Bi(i,0),o=new Bi(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),X.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ue.isDocumentKey(s)||(s=s.child(""));const o=new Bi(new Ue(s),0);let a=new Vn(Tt);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),X.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){tt(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let r=this.vr;return X.forEach(t.mutations,i=>{const s=new Bi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Bi(t,0),i=this.vr.firstAfterOrEqual(r);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return X.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fDe{constructor(e){this.Nr=e,this.docs=new ar(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(t))}getEntries(e,t){let r=so();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ir.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=so();const o=t.path,a=new Ue(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||cL(new Vo((n=h).readTime,n.key,-1),r)<=0||(i.has(h.key)||D0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}var n;return X.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ke()}Lr(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pDe(this)}getSize(e){return X.resolve(this.size)}}class pDe extends cX{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class gDe{constructor(e){this.persistence=e,this.Br=new el(t=>Uf(t),A0),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.kr=0,this.qr=new jL,this.targetCount=0,this.Qr=Wf.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),X.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Wf(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Un(t),X.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.qr.containsKey(t))}}class zL{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Fo(0),this.Ur=!1,this.Ur=!0,this.Wr=new dDe,this.referenceDelegate=e(this),this.Gr=new gDe(this),this.indexManager=new eDe,this.remoteDocumentCache=new fDe(r=>this.referenceDelegate.zr(r)),this.serializer=new BJ(t),this.jr=new cDe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lDe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new hDe(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new mDe(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return X.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class mDe extends pY{constructor(e){super(),this.currentSequenceNumber=e}}class VS{constructor(e){this.persistence=e,this.Zr=new jL,this.Xr=null}static ei(e){return new VS(e)}get ti(){if(this.Xr)return this.Xr;throw Ke()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),X.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ti,r=>{const i=Ue.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,it.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return X.or([()=>X.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class FS{constructor(e,t){this.persistence=e,this.ri=new el(r=>function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yY(e)),e=zAe(n.get(t),e);return yY(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function uX(n,e){return new iDe(n,e)}(this,t)}static ei(e,t){return new FS(e,t)}Hr(){}Jr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return X.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?X.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,s.removeEntry(o,it.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mS(e.data.value)),t}ir(e,t,r){return X.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return X.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class HL{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Mt(),i=Mt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new HL(e,t.fromCache,r,i)}}class yDe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mX{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function AK(){return!function _0e(){var n;const e=null===(n=jD())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function gY(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(Zr())>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yDe;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(P_()<=en.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",U_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),X.resolve()):(P_()<=en.DEBUG&&Ee("QueryEngine","Query:",U_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(P_()<=en.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",U_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Is(t))):X.resolve())}Xi(e,t){if(YY(t))return X.resolve(null);let r=Is(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ES(t,null,"F"),r=Is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Mt(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.rs(t,a);return this.ss(t,l,o,u.readTime)?this.Xi(e,ES(t,null,"F")):this.os(e,l,t,u)}))})))}es(e,t,r,i){return YY(t)||i.isEqual(it.min())?X.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?X.resolve(null):(P_()<=en.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),U_(t)),this.os(e,o,t,function dY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=it.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new Vo(i,Ue.empty(),e)}(i,-1)).next(a=>a))})}rs(e,t){let r=new Vn(tJ(e));return t.forEach((i,s)=>{D0(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return P_()<=en.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",U_(t)),this.Zi.getDocumentsMatchingQuery(e,t,Vo.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vDe{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new ar(Tt),this.cs=new el(s=>Uf(s),A0),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pX(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function yX(n,e){return WL.apply(this,arguments)}function WL(){return(WL=(0,M.A)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Mt();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function vX(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function TDe(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J_(n,e,t){return KL.apply(this,arguments)}function KL(){return(KL=(0,M.A)(function*(n,e,t){const r=Ve(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ud(o))throw o;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})).apply(this,arguments)}function US(n,e,t){const r=Ve(n);let i=it.min(),s=Mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=Ve(u),v=g.cs.get(h);return void 0!==v?X.resolve(g.us.get(v)):g.Gr.getTargetData(l,h)}(r,o,Is(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:it.min(),t?s:Mt())).next(a=>(function wX(n,e,t){let r=n.ls.get(e)||it.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}(r,function eJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ds:s})))}class ZL{constructor(){this.activeTargetIds=function TL(){return wCe}()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CX{constructor(){this._o=new ZL,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new ZL,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ADe{uo(e){}shutdown(){}}class DX{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zS=null;function t2(){return null===zS?zS=268435456+Math.round(2147483648*Math.random()):zS++,"0x"+zS.toString(16)}const CDe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DDe{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const Ts="WebChannelConnection";class SDe extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const a=t2(),u=this.No(t,r.toUriEncodedString());Ee("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(l,s,o),this.Bo(t,u,l,i).then(h=>(Ee("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ca("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(t,r,i,s,o,a){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+R_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){return`${this.Fo}/v1/${r}:${CDe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=t2();return new Promise((o,a)=>{const u=new tY;u.setWithCredentials(!0),u.listenOnce(nY.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cS.NO_ERROR:const h=u.getResponseJson();Ee(Ts,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case cS.TIMEOUT:Ee(Ts,`RPC '${e}' ${s} timed out`),a(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case cS.HTTP_ERROR:const g=u.getStatus();if(Ee(Ts,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v?.error;if(E&&E.status&&E.message){const w=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN}(E.status);a(new Te(w,E.message))}else a(new Te(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Ee(Ts,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ee(Ts,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}qo(e,t,r){const i=t2(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sY(),a=iY(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Ee(Ts,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let v=!1,E=!1;const w=new DDe({Eo:P=>{E?Ee(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(Ee(Ts,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Ee(Ts,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Ao:()=>g.close()}),R=(P,j,U)=>{P.listen(j,G=>{try{U(G)}catch(ee){setTimeout(()=>{throw ee},0)}})};return R(g,g0.EventType.OPEN,()=>{E||(Ee(Ts,`RPC '${e}' stream ${i} transport opened.`),w.So())}),R(g,g0.EventType.CLOSE,()=>{E||(E=!0,Ee(Ts,`RPC '${e}' stream ${i} transport closed`),w.Do())}),R(g,g0.EventType.ERROR,P=>{E||(E=!0,ca(Ts,`RPC '${e}' stream ${i} transport errored:`,P),w.Do(new Te(ue.UNAVAILABLE,"The operation could not be completed")))}),R(g,g0.EventType.MESSAGE,P=>{var j;if(!E){const U=P.data[0];tt(!!U);const G=U,ee=G?.error||(null===(j=G[0])||void 0===j?void 0:j.error);if(ee){Ee(Ts,`RPC '${e}' stream ${i} received error:`,ee);const me=ee.status;let _e=function(C){const x=li[C];if(void 0!==x)return vJ(x)}(me),D=ee.message;void 0===_e&&(_e=ue.INTERNAL,D="Unknown error status: "+me+" with message "+ee.message),E=!0,w.Do(new Te(_e,D)),g.close()}else Ee(Ts,`RPC '${e}' stream ${i} received:`,U),w.vo(U)}}),R(a,rY.STAT_EVENT,P=>{P.stat===oL.PROXY?Ee(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===oL.NOPROXY&&Ee(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}}function $S(){return typeof document<"u"?document:null}function q0(n){return new VCe(n,!0)}class n2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class RX{constructor(e,t,r,i,s,o,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new n2(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}stop(){var e=this;return(0,M.A)(function*(){e.i_()&&(yield e.close(0))})()}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){var e=this;return(0,M.A)(function*(){if(e.s_())return e.close(0)})()}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){var r=this;return(0,M.A)(function*(){r.l_(),r.h_(),r.r_.cancel(),r.Xo++,4!==e?r.r_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ti(t.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),r.r_.zo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.P_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.po(t)})()}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new Te(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.n_?this.A_(i):this.onNext(i))})}o_(){var e=this;this.state=5,this.r_.jo((0,M.A)(function*(){e.state=0,e.start()}))}E_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RDe extends RX{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function UCe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ke(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(tt(void 0===h||"string"==typeof h),Lr.fromBase64String(h||"")):(tt(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Lr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ue.UNKNOWN:vJ(l.code);return new Te(h,l.message||"")}(o);t=new bJ(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Hu(n,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):it.min(),a=new es({mapValue:{fields:r.document.fields}}),u=Ir.newFoundDocument(i,s,o,a);t=new CS(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Hu(n,r.document),s=r.readTime?ni(r.readTime):it.min(),o=Ir.newNoDocument(i,s);t=new CS([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Hu(n,r.document);t=new CS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new PCe(i,s);t=new wJ(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return it.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?it.min():o.readTime?ni(o.readTime):it.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=ML(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=vS(u)?{documents:kJ(s,u)}:{query:SS(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DJ(s,o.resumeToken);const l=RL(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(it.min())>0){a.readTime=q_(s,o.snapshotVersion.toTimestamp());const l=RL(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function jCe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=ML(this.serializer),t.removeTarget=e,this.c_(t)}}class PDe extends RX{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||0===e.writeResults.length),this.listener.p_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=function BCe(n,e){return n&&n.length>0?(tt(void 0!==e),n.map(t=>function(i,s){let o=ni(i.updateTime?i.updateTime:s);return o.isEqual(it.min())&&(o=ni(s)),new DCe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=ML(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function V0(n,e){let t;if(e instanceof z_)t={update:MJ(n,e.key,e.value)};else if(e instanceof $_)t={delete:O0(n,e.key)};else if(e instanceof tl)t={update:MJ(n,e.key,e.data),updateMask:GCe(e.fieldMask)};else{if(!(e instanceof bL))return Ke();t={verify:O0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof B_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof j_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:FCe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ke()),t;var s}(this.serializer,r))};this.c_(t)}}class xDe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,xL(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ue.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,xL(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ue.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class MDe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ti(t),this.C_=!1):Ee("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class NDe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{r.enqueueAndForget((0,M.A)(function*(){var u;Qd(o)&&(Ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,M.A)(function*(h){const g=Ve(h);g.k_.add(4),yield X_(g),g.K_.set("Unknown"),g.k_.delete(4),yield G0(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.K_=new MDe(r,i)}}function G0(n){return r2.apply(this,arguments)}function r2(){return(r2=(0,M.A)(function*(n){if(Qd(n))for(const e of n.q_)yield e(!0)})).apply(this,arguments)}function X_(n){return i2.apply(this,arguments)}function i2(){return(i2=(0,M.A)(function*(n){for(const e of n.q_)yield e(!1)})).apply(this,arguments)}function qS(n,e){const t=Ve(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),a2(t)?o2(t):ty(t).s_()&&s2(t,e))}function Z_(n,e){const t=Ve(n),r=ty(t);t.B_.delete(e),r.s_()&&PX(t,e),0===t.B_.size&&(r.s_()?r.a_():Qd(t)&&t.K_.set("Unknown"))}function s2(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ty(n).V_(e)}function PX(n,e){n.U_.xe(e),ty(n).m_(e)}function o2(n){n.U_=new MCe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),ty(n).start(),n.K_.F_()}function a2(n){return Qd(n)&&!ty(n).i_()&&n.B_.size>0}function Qd(n){return 0===Ve(n).k_.size}function xX(n){n.U_=void 0}function kDe(n){return u2.apply(this,arguments)}function u2(){return(u2=(0,M.A)(function*(n){n.K_.set("Online")})).apply(this,arguments)}function ODe(n){return c2.apply(this,arguments)}function c2(){return(c2=(0,M.A)(function*(n){n.B_.forEach((e,t)=>{s2(n,e)})})).apply(this,arguments)}function VDe(n,e){return l2.apply(this,arguments)}function l2(){return(l2=(0,M.A)(function*(n,e){xX(n),a2(n)?(n.K_.O_(e),o2(n)):n.K_.set("Unknown")})).apply(this,arguments)}function FDe(n,e,t){return d2.apply(this,arguments)}function d2(){return d2=(0,M.A)(function*(n,e,t){if(n.K_.set("Online"),e instanceof bJ&&2===e.state&&e.cause)try{yield(r=(0,M.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.B_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.B_.delete(u),s.U_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield GS(n,r)}else if(e instanceof CS?n.U_.$e(e):e instanceof wJ?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(it.min()))try{const r=yield vX(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.B_.get(l);h&&s.B_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.B_.get(u);if(!h)return;s.B_.set(u,h.withResumeToken(Lr.EMPTY_BYTE_STRING,h.snapshotVersion)),PX(s,u);const g=new nl(h.target,u,l,h.sequenceNumber);s2(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ee("RemoteStore","Failed to raise snapshot:",r),yield GS(n,r)}var r}),d2.apply(this,arguments)}function GS(n,e,t){return h2.apply(this,arguments)}function h2(){return(h2=(0,M.A)(function*(n,e,t){if(!Ud(e))throw e;n.k_.add(1),yield X_(n),n.K_.set("Offline"),t||(t=()=>vX(n.localStore)),n.asyncQueue.enqueueRetryable((0,M.A)(function*(){Ee("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield G0(n)}))})).apply(this,arguments)}function MX(n,e){return e().catch(t=>GS(n,t,e))}function ey(n){return f2.apply(this,arguments)}function f2(){return(f2=(0,M.A)(function*(n){const e=Ve(n),t=Yd(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;LDe(e);)try{const i=yield TDe(e.localStore,r);if(null===i){0===e.L_.length&&t.a_();break}r=i.batchId,UDe(e,i)}catch(i){yield GS(e,i)}NX(e)&&kX(e)})).apply(this,arguments)}function LDe(n){return Qd(n)&&n.L_.length<10}function UDe(n,e){n.L_.push(e);const t=Yd(n);t.s_()&&t.f_&&t.g_(e.mutations)}function NX(n){return Qd(n)&&!Yd(n).i_()&&n.L_.length>0}function kX(n){Yd(n).start()}function BDe(n){return p2.apply(this,arguments)}function p2(){return(p2=(0,M.A)(function*(n){Yd(n).w_()})).apply(this,arguments)}function jDe(n){return g2.apply(this,arguments)}function g2(){return(g2=(0,M.A)(function*(n){const e=Yd(n);for(const t of n.L_)e.g_(t.mutations)})).apply(this,arguments)}function zDe(n,e,t){return m2.apply(this,arguments)}function m2(){return(m2=(0,M.A)(function*(n,e,t){const r=n.L_.shift(),i=CL.from(r,e,t);yield MX(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ey(n)})).apply(this,arguments)}function $De(n,e){return _2.apply(this,arguments)}function _2(){return _2=(0,M.A)(function*(n,e){var t;e&&Yd(n).f_&&(yield(t=(0,M.A)(function*(i,s){if(function yJ(n){switch(n){default:return Ke();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}(a=s.code)&&a!==ue.ABORTED){const o=i.L_.shift();Yd(i).__(),yield MX(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ey(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),NX(n)&&kX(n)}),_2.apply(this,arguments)}function OX(n,e){return y2.apply(this,arguments)}function y2(){return(y2=(0,M.A)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t.k_.add(3),yield X_(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield G0(t)})).apply(this,arguments)}function v2(n,e){return I2.apply(this,arguments)}function I2(){return(I2=(0,M.A)(function*(n,e){const t=Ve(n);e?(t.k_.delete(2),yield G0(t)):e||(t.k_.add(2),yield X_(t),t.K_.set("Unknown"))})).apply(this,arguments)}function ty(n){return n.W_||(n.W_=function(t,r,i){const s=Ve(t);return s.b_(),new RDe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:kDe.bind(null,n),mo:ODe.bind(null,n),po:VDe.bind(null,n),R_:FDe.bind(null,n)}),n.q_.push(function(){var e=(0,M.A)(function*(t){t?(n.W_.__(),a2(n)?o2(n):n.K_.set("Unknown")):(yield n.W_.stop(),xX(n))});return function(t){return e.apply(this,arguments)}}())),n.W_}function Yd(n){return n.G_||(n.G_=function(t,r,i){const s=Ve(t);return s.b_(),new PDe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:BDe.bind(null,n),po:$De.bind(null,n),p_:jDe.bind(null,n),y_:zDe.bind(null,n)}),n.q_.push(function(){var e=(0,M.A)(function*(t){t?(n.G_.__(),yield ey(n)):(yield n.G_.stop(),n.L_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))});return function(t){return e.apply(this,arguments)}}())),n.G_}class E2{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new E2(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(ti("AsyncQueue",`${e}: ${n}`),Ud(n))return new Te(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class ry{static emptySet(e){return new ry(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=S0(),this.sortedSet=new ar(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VX{constructor(){this.z_=new ar(Ue.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?0!==e.type&&3===r.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==r.type?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.z_=this.z_.remove(t):1===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ke():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class iy{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new iy(e,t,ry.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&C0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qDe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class GDe{constructor(){this.queries=FX(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,r){const i=Ve(t),s=i.queries;i.queries=FX(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})}(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function FX(){return new el(n=>ZY(n),C0)}function w2(){return(w2=(0,M.A)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new qDe,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=yield t.onListen(i,!0);break;case 1:s.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=ny(o,`Initialization of query '${U_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&C2(t)})).apply(this,arguments)}function A2(){return(A2=(0,M.A)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),0===s.J_.length?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function HDe(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&C2(t)}function WDe(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function C2(n){n.X_.forEach(e=>{e.next()})}var D2,LX;(LX=D2||(D2={})).na="default",LX.Cache="cache";class S2{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){return!e.fromCache||!this.Z_()||(!this.options.ua||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}aa(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==D2.Cache}}class jX{constructor(e){this.key=e}}class zX{constructor(e){this.key=e}}class $X{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Mt(),this.mutatedKeys=Mt(),this.Va=tJ(e),this.ma=new ry(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new VX,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const v=i.get(h),E=D0(this.query,g)?g:null,w=!!v&&this.mutatedKeys.has(v.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;v&&E?v.data.isEqual(E.data)?w!==R&&(r.track({type:3,doc:E}),P=!0):this.ya(v,E)||(r.track({type:2,doc:E}),P=!0,(u&&this.Va(E,u)>0||l&&this.Va(E,l)<0)&&(a=!0)):!v&&E?(r.track({type:0,doc:E}),P=!0):v&&!E&&(r.track({type:1,doc:v}),P=!0,(u||l)&&(a=!0)),P&&(E?(o=o.add(E),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,g)=>function(E,w){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return R(E)-R(w)}(h.type,g.type)||this.Va(h.doc,g.doc)),this.wa(r),i=null!=i&&i;const a=t&&!i?this.Sa():[],u=0===this.Ra.size&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,0!==o.length||l?{snapshot:new iy(this.query,e.ma,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new VX,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Mt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new zX(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new jX(r))}),t}va(e){this.da=e.ds,this.Ra=Mt();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return iy.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class YDe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JDe{constructor(e){this.key=e,this.Fa=!1}}class XDe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new el(a=>ZY(a),C0),this.Oa=new Map,this.Na=new Set,this.La=new ar(Ue.comparator),this.Ba=new Map,this.ka=new jL,this.qa={},this.Qa=new Map,this.Ka=Wf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}function ZDe(n,e){return R2.apply(this,arguments)}function R2(){return(R2=(0,M.A)(function*(n,e,t=!0){const r=HS(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=yield qX(r,e,t,!0),i})).apply(this,arguments)}function eSe(n,e){return P2.apply(this,arguments)}function P2(){return(P2=(0,M.A)(function*(n,e){const t=HS(n);yield qX(t,e,!0,!1)})).apply(this,arguments)}function qX(n,e,t,r){return x2.apply(this,arguments)}function x2(){return(x2=(0,M.A)(function*(n,e,t,r){const i=yield function Y_(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new nl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}(n.localStore,Is(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield function M2(n,e,t,r,i){return N2.apply(this,arguments)}(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&qS(n.remoteStore,i),a})).apply(this,arguments)}function N2(){return N2=(0,M.A)(function*(n,e,t,r,i){n.Ua=(g,v,E)=>{return(w=(0,M.A)(function*(P,j,U,G){let ee=j.view.ga(U);ee.ss&&(ee=yield US(P.localStore,j.query,!1).then(({documents:b})=>j.view.ga(b,ee)));const me=G&&G.targetChanges.get(j.targetId),_e=G&&null!=G.targetMismatches.get(j.targetId),D=j.view.applyChanges(ee,P.isPrimaryClient,me,_e);return q2(P,j.targetId,D.ba),D.snapshot}),function R(P,j,U,G){return w.apply(this,arguments)})(n,g,v,E);var w};const s=yield US(n.localStore,e,!0),o=new $X(e,s.ds),a=o.ga(s.documents),u=k0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);q2(n,t,l.ba);const h=new YDe(e,t,o);return n.xa.set(e,h),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot}),N2.apply(this,arguments)}function tSe(n,e,t){return k2.apply(this,arguments)}function k2(){return(k2=(0,M.A)(function*(n,e,t){const r=Ve(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!C0(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield J_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Z_(r.remoteStore,i.targetId),sy(r,i.targetId)}).catch(Ld))):(sy(r,i.targetId),yield J_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function nSe(n,e){return O2.apply(this,arguments)}function O2(){return(O2=(0,M.A)(function*(n,e){const t=Ve(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Z_(t.remoteStore,r.targetId))})).apply(this,arguments)}function V2(){return(V2=(0,M.A)(function*(n,e,t){const r=function tU(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sSe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oSe.bind(null,e),e}(n);try{const i=yield function(o,a){const u=Ve(o),l=Rr.now(),h=a.reduce((E,w)=>E.add(w.key),Mt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let w=so(),R=Mt();return u.hs.getEntries(E,h).next(P=>{w=P,w.forEach((j,U)=>{U.isValidDocument()||(R=R.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,w)).next(P=>{g=P;const j=[];for(const U of a){const G=RCe(U,g.get(U.key).overlayedDocument);null!=G&&j.push(new tl(U.key,G,FY(G.value.mapValue),Sr.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,j,a)}).next(P=>{v=P;const j=P.applyToLocalDocumentSet(g,R);return u.documentOverlayCache.saveOverlays(E,P.batchId,j)})}).then(()=>({batchId:v.batchId,changes:rJ(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new ar(Tt)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield rl(r,i.changes),yield ey(r.remoteStore)}catch(i){const s=ny(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function GX(n,e){return F2.apply(this,arguments)}function F2(){return(F2=(0,M.A)(function*(n,e){const t=Ve(n);try{const r=yield function EDe(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const a=[];e.targetChanges.forEach((h,g)=>{const v=i.get(g);if(!v)return;a.push(t.Gr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Gr.addMatchingKeys(s,h.addedDocuments,g)));let E=v.withSequenceNumber(s.currentSequenceNumber);var R,P,j;null!==e.targetMismatches.get(g)?E=E.withResumeToken(Lr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),P=E,j=h,(0===(R=v).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&a.push(t.Gr.updateTargetData(s,E))});let u=so(),l=Mt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(function IX(n,e,t){let r=Mt(),i=Mt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=so();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(it.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,Es:i}})}(s,o,e.documentUpdates).next(h=>{u=h.Is,l=h.Es})),!r.isEqual(it.min())){const h=t.Gr.getLastRemoteSnapshotVersion(s).next(g=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return X.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.us=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ba.get(s);o&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?tt(o.Fa):i.removedDocuments.size>0&&(tt(o.Fa),o.Fa=!1))}),yield rl(t,r,e)}catch(r){yield Ld(r)}})).apply(this,arguments)}function HX(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ve(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const v of g.J_)v.ea(a)&&(l=!0)}),l&&C2(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iSe(n,e,t){return L2.apply(this,arguments)}function L2(){return(L2=(0,M.A)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new ar(Ue.comparator);o=o.insert(s,Ir.newNoDocument(s,it.min()));const a=Mt().add(s),u=new N0(it.min(),new Map,new ar(Tt),o,a);yield GX(r,u),r.La=r.La.remove(s),r.Ba.delete(e),G2(r)}else yield J_(r.localStore,e,!1).then(()=>sy(r,e,t)).catch(Ld)})).apply(this,arguments)}function sSe(n,e){return U2.apply(this,arguments)}function U2(){return(U2=(0,M.A)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function IDe(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,v=g.keys();let E=X.resolve();return v.forEach(w=>{E=E.next(()=>h.getEntry(u,w)).next(R=>{const P=l.docVersions.get(w);tt(null!==P),R.version.compareTo(P)<0&&(g.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Mt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);$2(t,r,null),z2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rl(t,i)}catch(i){yield Ld(i)}})).apply(this,arguments)}function oSe(n,e,t){return B2.apply(this,arguments)}function B2(){return(B2=(0,M.A)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const u=Ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(tt(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);$2(r,e,t),z2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rl(r,i)}catch(i){yield Ld(i)}})).apply(this,arguments)}function z2(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function $2(n,e,t){const r=Ve(n);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||WX(n,r)})}function WX(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);null!==t&&(Z_(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),G2(n))}function q2(n,e,t){for(const r of t)r instanceof jX?(n.ka.addReference(r.key,e),uSe(n,r)):r instanceof zX?(Ee("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||WX(n,r.key)):Ke()}function uSe(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(Ee("SyncEngine","New document in limbo: "+t),n.Na.add(r),G2(n))}function G2(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Ue(tn.fromString(e)),r=n.Ka.next();n.Ba.set(r,new JDe(t)),n.La=n.La.insert(t,r),qS(n.remoteStore,new nl(Is(F_(t.path)),r,"TargetPurposeLimboResolution",Fo.oe))}}function rl(n,e,t){return H2.apply(this,arguments)}function H2(){return H2=(0,M.A)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(u.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(l){i.push(l);const g=HL.zi(u.targetId,l);s.push(g)}}))}),yield Promise.all(o),r.Ma.R_(i),yield(a=(0,M.A)(function*(l,h){const g=Ve(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>X.forEach(h,E=>X.forEach(E.Wi,w=>g.persistence.referenceDelegate.addReference(v,E.targetId,w)).next(()=>X.forEach(E.Gi,w=>g.persistence.referenceDelegate.removeReference(v,E.targetId,w)))))}catch(v){if(!Ud(v))throw v;Ee("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const w=g.us.get(E),P=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);g.us=g.us.insert(E,P)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),H2.apply(this,arguments)}function cSe(n,e){return W2.apply(this,arguments)}function W2(){return(W2=(0,M.A)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const r=yield yX(t.localStore,e);t.currentUser=e,(s=t).Qa.forEach(a=>{a.forEach(u=>{u.reject(new Te(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Qa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rl(t,r.Ts)}var s})).apply(this,arguments)}function lSe(n,e){const t=Ve(n),r=t.Ba.get(e);if(r&&r.Fa)return Mt().add(r.key);{let i=Mt();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const a=t.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function HS(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GX.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lSe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iSe.bind(null,e),e.Ma.R_=HDe.bind(null,e.eventManager),e.Ma.Wa=WDe.bind(null,e.eventManager),e}let WS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,M.A)(function*(){r.serializer=q0(t.databaseInfo.databaseId),r.sharedClientState=r.za(t),r.persistence=r.ja(t),yield r.persistence.start(),r.localStore=r.Ha(t),r.gcScheduler=r.Ja(t,r.localStore),r.indexBackfillerScheduler=r.Ya(t,r.localStore)})()}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return function _X(n,e,t,r){return new vDe(n,e,t,r)}(this.persistence,new mX,t.initialUser,this.serializer)}ja(t){return new zL(VS.ei,this.serializer)}za(t){return new CX}terminate(){var t=this;return(0,M.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class nU extends WS{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){return tt(this.persistence.referenceDelegate instanceof FS),new aX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new zL(r=>FS.ei(r,t),this.serializer)}}let oy=(()=>{class n{initialize(t,r){var i=this;return(0,M.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>HX(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=cSe.bind(null,i.syncEngine),yield v2(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new GDe}createDatastore(t){const r=q0(t.databaseInfo.databaseId),i=new SDe(t.databaseInfo);return new xDe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>HX(this.syncEngine,r,0),u=DX.p()?new DX:new ADe,new NDe(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,l,h,g){const v=new XDe(s,o,a,u,l,h);return g&&(v.$a=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,M.A)(function*(){var r,i,s;yield(s=(0,M.A)(function*(a){const u=Ve(a);Ee("RemoteStore","RemoteStore shutting down."),u.k_.add(5),yield X_(u),u.Q_.shutdown(),u.K_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();class KS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class TSe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Li.UNAUTHENTICATED,this.clientId=cY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,M.A)(function*(u){Ee("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ee("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ny(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function iU(n,e){return sU.apply(this,arguments)}function sU(){return sU=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,M.A)(function*(s){r.isEqual(s)||(yield yX(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),sU.apply(this,arguments)}function XX(n,e){return oU.apply(this,arguments)}function oU(){return(oU=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function aU(n){return uU.apply(this,arguments)}(n);Ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OX(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OX(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function uU(){return(uU=(0,M.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iU(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;ca("Error using user provided cache. Falling back to memory cache: "+e),yield iU(n,new WS)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),yield iU(n,new nU(void 0));var i;return n._offlineComponents})).apply(this,arguments)}function QS(n){return cU.apply(this,arguments)}function cU(){return(cU=(0,M.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield XX(n,n._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),yield XX(n,new oy))),n._onlineComponents})).apply(this,arguments)}function dU(){return(dU=(0,M.A)(function*(n){const e=yield QS(n),t=e.eventManager;return t.onListen=ZDe.bind(null,e.syncEngine),t.onUnlisten=tSe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eSe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nSe.bind(null,e.syncEngine),t})).apply(this,arguments)}function nZ(n,e,t={}){const r=new Ui;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new KS({next:v=>{h.eu(),o.enqueueAndForget(()=>function b2(n,e){return A2.apply(this,arguments)}(s,g));const E=v.docs.has(a);!E&&v.fromCache?l.reject(new Te(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&u&&"server"===u.source?l.reject(new Te(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new S2(F_(a.path),h,{includeMetadataChanges:!0,ua:!0});return function T2(n,e){return w2.apply(this,arguments)}(s,g)}(yield function uy(n){return dU.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function iZ(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const sZ=new Map;function oZ(n){if(!Ue.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ke()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YS(n);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class cZ{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function kSe(n,e,t,r){if(!0===e&&!0===r)throw new Te(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iZ(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cZ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cZ(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new SAe;switch(r.type){case"firstParty":return new MAe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,M.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sZ.get(t);r&&(Ee("ComponentProvider","Removing Datastore"),sZ.delete(t),r.terminate())}(this),Promise.resolve()}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class ri{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}}class Wu extends ts{constructor(e,t,r){super(e,t,F_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new Ue(e))}withConverter(e){return new Wu(this.firestore,e,this._path)}}function lZ(n,e,...t){if(n=Ei(n),1===arguments.length&&(e=cY.newId()),function hU(n,e,t){if(!t)throw new Te(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("doc","path",e),n instanceof H0){const r=tn.fromString(e,...t);return oZ(r),new ri(n,null,new Ue(r))}{if(!(n instanceof ri||n instanceof Wu))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return oZ(r),new ri(n.firestore,n instanceof Wu?n.converter:null,new Ue(r))}}class hZ{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new n2(this,"async_queue_retry"),this.fu=()=>{const r=$S();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=$S();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=$S();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ui;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){var e=this;return(0,M.A)(function*(){if(0!==e.Iu.length){try{yield e.Iu[0](),e.Iu.shift(),e.r_.reset()}catch(t){if(!Ud(t))throw t;Ee("AsyncQueue","Operation failed with retryable error: "+t)}e.Iu.length>0&&e.r_.jo(()=>e.wu())}})()}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{throw this.Au=r,this.Ru=!1,ti("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=E2.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&Ke()}verifyOperationInProgress(){}bu(){var e=this;return(0,M.A)(function*(){let t;do{t=e.gu,yield t}while(t!==e.gu)})()}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Jn extends H0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,M.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new hZ(t),e._firestoreClient=void 0,yield t}})()}}function fZ(n,e){const r="string"==typeof n?n:e||"(default)",i=GD("object"==typeof n?n:NK(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(()=>{const e=EK("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();s&&function OSe(n,e,t,r={}){var i;const s=(n=Kt(n,H0))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Li.MOCK_USER;else{a=function g0e(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[UD(JSON.stringify({alg:"none",type:"JWT"})),UD(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Li(l)}n._authCredentials=new RAe(new aY(a,u))}}(i,...s)}return i}function Pr(n){if(n._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function pZ(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uCe(n._databaseId,u,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iZ(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TSe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}(n),n._firestoreClient}class Qf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qf(Lr.fromBase64String(e))}catch(t){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qf(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cy{constructor(e){this._methodName=e}}class gU{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}class JS{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const LSe=/^__.*__$/;class USe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new z_(e,this.data,t,this.fieldTransforms)}}function _Z(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class XS{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new XS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return tR(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(0===e.length)throw this.qu("Document fields must not be empty");if(_Z(this.Mu)&&LSe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class BSe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||q0(e)}$u(e,t,r,i=!1){return new XS({Mu:e,methodName:t,Ku:r,path:Cr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jf(n){const e=n._freezeSettings(),t=q0(n._databaseId);return new BSe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ZS(n,e,t,r,i,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,e,t,i);TU("Data must be an object, but it was:",o,r);const a=IZ(r,o);let u,l;if(s.merge)u=new io(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const v=Q0(e,g,t);if(!o.contains(v))throw new Te(ue.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);TZ(h,v)||h.push(v)}u=new io(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new USe(new es(a),u,l)}function Xf(n,e){if(EZ(n=Ei(n)))return TU("Unsupported field value:",e,n),IZ(n,e);if(n instanceof cy)return function(r,i){if(!_Z(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&4!==e.Mu)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Xf(a,i.ku(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=Ei(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oJ(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Rr.fromDate(r);return{timestampValue:q_(i.serializer,s)}}if(r instanceof Rr){const s=new Rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:q_(i.serializer,s)}}if(r instanceof gU)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qf)return{bytesValue:DJ(i.serializer,r._byteString)};if(r instanceof ri){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:PL(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof JS)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.qu("VectorValues must only contain numeric values.");return wL(a.serializer,u)})}}}}};var a;throw i.qu(`Unsupported field value: ${YS(r)}`)}(n,e)}function IZ(n,e){const t={};return CY(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bd(n,(r,i)=>{const s=Xf(i,e.Ou(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function EZ(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof gU||n instanceof Qf||n instanceof ri||n instanceof cy||n instanceof JS)}function TU(n,e,t){if(!EZ(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=YS(t);throw e.qu("an object"===r?n+" a custom object":n+" "+r)}var i}function Q0(n,e,t){if((e=Ei(e))instanceof Yf)return e._internalPath;if("string"==typeof e)return eR(n,e);throw tR("Field path arguments must be of type string or ",n,!1,void 0,t)}const jSe=new RegExp("[~\\*/\\[\\]]");function eR(n,e,t){if(e.search(jSe)>=0)throw tR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yf(...e.split("."))._internalPath}catch{throw tR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tR(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Te(ue.INVALID_ARGUMENT,a+n+u)}function TZ(n,e){return n.some(t=>t.isEqual(e))}class Y0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zSe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zSe extends Y0{data(){return super.data()}}function nR(n,e){return"string"==typeof e?eR(n,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}class RZ{convertValue(e,t="none"){switch(zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Dr(o.doubleValue));return new JS(s)}convertGeoPoint(e){return new gU(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(I0(e));default:return null}}convertTimestamp(e){const t=Jc(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);tt(UJ(r));const i=new Ff(r.get(1),r.get(3)),s=new Ue(r.popFirst(5));return i.isEqual(t)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Zf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dy extends Y0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nR("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class aR extends dy{data(e={}){return super.data(e)}}class Jd extends RZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,t)}}function Z0(n,e){return function(r,i){const s=new Ui;return r.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function rSe(n,e,t){return V2.apply(this,arguments)}(yield function lU(n){return QS(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(Pr(n),e)}!function(e,t=!0){R_=w_,T_(new Sf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Jn(new PAe(r.getProvider("auth-internal")),new NAe(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ff(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zc(oY,"4.7.5",e),zc(oY,"4.7.5","esm2017")}();let fy=(()=>{class n{constructor(){this.currentUserSubject=new Z(null),this.themeService=Y(_K),this.db=fZ(),p0().onAuthStateChanged(r=>{r?(this.saveUserToFirestore(r),this.currentUserSubject.next({uid:r.uid,email:r.email,displayName:r.displayName}),this.themeService.loadUserTheme(r.uid)):this.currentUserSubject.next(null)})}register(t,r,i){return function Gwe(n,e,t){return cF.apply(this,arguments)}(p0(),t,r).then(o=>{if(o.user)return function Qwe(n,e){return _F.apply(this,arguments)}(o.user,{displayName:i}).then(()=>(this.saveUserToFirestore(o.user),o))}).catch(o=>{throw console.error("B\u0142\u0105d rejestracji u\u017cytkownika:",o),o})}login(t,r){return function Hwe(n,e,t){return Ma(n.app)?Promise.reject(Fi(n)):KV(Ei(n),yQ.credential(e,t)).catch(function(){var r=(0,M.A)(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&nF(n),i});return function(i){return r.apply(this,arguments)}}())}(p0(),t,r).then(s=>{s.user&&this.saveUserToFirestore(s.user)})}loginWithGoogle(){return function Obe(n,e,t){return jF.apply(this,arguments)}(p0(),new Lwe).then(i=>{const s=i.user;s&&(this.saveUserToFirestore(s),this.themeService.loadUserTheme(s.uid),this.currentUserSubject.next({uid:s.uid,email:s.email,displayName:s.displayName}))})}isAuthenticated(){return null!==this.currentUserSubject.value}logout(){return function rbe(n){return Ei(n).signOut()}(p0())}getCurrentUser(){return this.currentUserSubject.asObservable()}saveUserToFirestore(t){const i=lZ(fZ(),"users",t.uid);(function HSe(n){n=Kt(n,ri);const e=Kt(n.firestore,Jn);return nZ(Pr(e),n._key).then(t=>function AU(n,e,t){const r=t.docs.get(e._key),i=new Jd(n);return new dy(n,i,e._key,r,new Zf(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))})(i).then(s=>{s.exists()||function WSe(n,e,t){n=Kt(n,ri);const r=Kt(n.firestore,Jn),i=function oR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return Z0(r,[ZS(Jf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Sr.none())])}(i,{uid:t.uid,email:t.email,displayName:t.displayName||"",photoURL:t.photoURL||"",createdAt:(new Date).toISOString()},{merge:!0}).catch(o=>{console.error("B\u0142\u0105d zapisu u\u017cytkownika do Firestore:",o)})}).catch(s=>{console.error("B\u0142\u0105d podczas sprawdzania istnienia dokumentu:",s)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oRe(n,e){1&n&&(q(0,"p"),W(1,"Nazwa u\u017cytkownika jest wymagana."),B())}function aRe(n,e){1&n&&(q(0,"p"),W(1," Nazwa u\u017cytkownika mo\u017ce zawiera\u0107 tylko ma\u0142e litery i cyfry oraz musi zaczyna\u0107 si\u0119 od litery. "),B())}function uRe(n,e){if(1&n&&(q(0,"div",10),Wn(1,oRe,2,0,"p")(2,aRe,2,0,"p"),B()),2&n){Qe();const t=Cu(4);ne(),un(null!=t.errors&&t.errors.required?1:-1),ne(),un(null!=t.errors&&t.errors.pattern?2:-1)}}function cRe(n,e){if(1&n){const t=Vr();q(0,"div",7)(1,"label",15),W(2,"Nazwa u\u017cytkownika"),B(),q(3,"input",16,3),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.displayName,i)||(s.displayName=i),ht(i)}),B(),Wn(5,uRe,3,2,"div",10),B()}if(2&n){const t=Cu(4),r=Qe();ne(3),Ot("ngModel",r.displayName),ne(2),un(null!=t&&t.touched&&null!=t&&t.invalid?5:-1)}}function lRe(n,e){1&n&&(q(0,"p"),W(1,"E-mail jest wymagany."),B())}function dRe(n,e){if(1&n&&(q(0,"div",10),Wn(1,lRe,2,0,"p"),B()),2&n){Qe();const t=Cu(10);ne(),un(null!=t.errors&&t.errors.required?1:-1)}}function hRe(n,e){1&n&&(q(0,"p"),W(1,"Has\u0142o jest wymagane."),B())}function fRe(n,e){1&n&&(q(0,"p"),W(1," Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 ma\u0142\u0105 liter\u0119, jedn\u0105 wielk\u0105 liter\u0119, jedn\u0105 cyfr\u0119, jeden znak specjalny i musi mie\u0107 co najmniej 6 znak\xf3w d\u0142ugo\u015bci. "),B())}function pRe(n,e){if(1&n&&(q(0,"div",10),Wn(1,hRe,2,0,"p")(2,fRe,2,0,"p"),B()),2&n){Qe();const t=Cu(16);ne(),un(null!=t.errors&&t.errors.required?1:-1),ne(),un(null!=t.errors&&t.errors.pattern?2:-1)}}function gRe(n,e){1&n&&(q(0,"p"),W(1,"Potwierdzenie has\u0142a jest wymagane."),B())}function mRe(n,e){if(1&n&&(q(0,"div",10),Wn(1,gRe,2,0,"p"),B()),2&n){Qe();const t=Cu(4);ne(),un(null!=t.errors&&t.errors.required?1:-1)}}function _Re(n,e){1&n&&(q(0,"div",10)(1,"p"),W(2,"Has\u0142a nie s\u0105 zgodne."),B()())}function yRe(n,e){if(1&n){const t=Vr();q(0,"div",7)(1,"label",17),W(2,"Potwierd\u017a has\u0142o"),B(),q(3,"input",18,4),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.confirmPassword,i)||(s.confirmPassword=i),ht(i)}),B(),Wn(5,mRe,2,1,"div",10)(6,_Re,3,0,"div",10),B()}if(2&n){const t=Cu(4),r=Qe();ne(3),Ot("ngModel",r.confirmPassword),ne(2),un(t.touched&&t.invalid?5:-1),ne(),un(r.password!==r.confirmPassword&&t.touched?6:-1)}}let NZ=(()=>{class n{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.confirmPassword="",this.displayName="",this.emailChange=new Ht,this.displayNameChange=new Ht,this.passwordChange=new Ht,this.confirmPasswordChange=new Ht,this.usernameChange=new Ht,this.googleLogin=new Ht,this.formSubmit=new Ht}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onConfirmPasswordChange(){this.confirmPasswordChange.emit(this.confirmPassword)}onUsernameChange(){this.usernameChange.emit(this.displayName)}onSubmit(){this.isLogin?this.email&&this.password?this.formSubmit.emit({email:this.email,displayName:this.displayName,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o."):this.email&&this.displayName&&this.password&&this.password===this.confirmPassword?this.formSubmit.emit({email:this.email,displayName:this.displayName,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}onGoogleLogin(){this.googleLogin.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password",confirmPassword:"confirmPassword",displayName:"displayName"},outputs:{emailChange:"emailChange",displayNameChange:"displayNameChange",passwordChange:"passwordChange",confirmPasswordChange:"confirmPasswordChange",usernameChange:"usernameChange",googleLogin:"googleLogin",formSubmit:"formSubmit"},standalone:!0,features:[Er],decls:23,vars:9,consts:[["authForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],["displayNameField","ngModel"],["confirmPasswordField","ngModel"],[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-]).{6,}$",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"disabled"],["type","button",1,"btn","google-login",3,"click"],["for","displayName"],["id","displayName","type","text","name","displayName","required","","pattern","^[a-z][a-z0-9]*$","placeholder","Wpisz nazw\u0119 u\u017cytkownika",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","","placeholder","Potwierd\u017a has\u0142o",3,"ngModelChange","ngModel"]],template:function(r,i){if(1&r){const s=Vr();q(0,"div",5)(1,"h2"),W(2),B(),q(3,"form",6,0),je("ngSubmit",function(){return Et(s),ht(i.onSubmit())}),Wn(5,cRe,6,2,"div",7),q(6,"div",7)(7,"label",8),W(8,"E-mail"),B(),q(9,"input",9,1),Vt("ngModelChange",function(a){return Et(s),St(i.email,a)||(i.email=a),ht(a)}),B(),Wn(11,dRe,2,1,"div",10),B(),q(12,"div",7)(13,"label",11),W(14,"Has\u0142o"),B(),q(15,"input",12,2),Vt("ngModelChange",function(a){return Et(s),St(i.password,a)||(i.password=a),ht(a)}),B(),Wn(17,pRe,3,2,"div",10),B(),Wn(18,yRe,7,3,"div",7),q(19,"button",13),W(20),B(),q(21,"button",14),je("click",function(){return Et(s),ht(i.onGoogleLogin())}),W(22," Zaloguj przez Google "),B()()()}if(2&r){const s=Cu(4),o=Cu(10),a=Cu(16);ne(2),kn(i.isLogin?"Logowanie":"Rejestracja"),ne(3),un(i.isLogin?-1:5),ne(4),Ot("ngModel",i.email),ne(2),un(o.touched&&o.invalid?11:-1),ne(4),Ot("ngModel",i.password),ne(2),un(a.touched&&a.invalid?17:-1),ne(),un(i.isLogin?-1:18),ne(),_n("disabled",s.invalid),ne(),fr(" ",i.buttonText," ")}},dependencies:[ys,I_,oa,Bu,m_,kd,UO,xa,Nd],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:20px auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:var(--background-gradient);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:var(--button-background, #254636);color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return n})(),vRe=(()=>{class n{constructor(){this.router=Y(Ni),this.authService=Y(fy),this.cdr=Y($h),this.email="",this.password="",this.isLogin=!0}login({email:t,password:r}){console.log("Attempting to log in with email:",t),t&&r?this.authService.login(t,r).then(()=>{console.log("Login successful, navigating to /home"),this.router.navigate(["/home"]),this.cdr.detectChanges()}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}loginWithGoogle(){this.authService.loginWithGoogle().then(()=>{console.log("Zalogowano za pomoc\u0105 Google")}).catch(t=>{console.error("B\u0142\u0105d logowania przez Google: ",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-login"]],standalone:!0,features:[Er],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","googleLogin","isLogin","buttonText","email","password"]],template:function(r,i){1&r&&(q(0,"app-auth-form",0),Vt("emailChange",function(o){return St(i.email,o)||(i.email=o),o})("passwordChange",function(o){return St(i.password,o)||(i.password=o),o}),je("formSubmit",function(o){return i.login(o)})("googleLogin",function(){return i.loginWithGoogle()}),B()),2&r&&(_n("isLogin",!0)("buttonText","Zaloguj si\u0119"),Ot("email",i.email)("password",i.password))},dependencies:[ys,NZ]})}}return n})(),IRe=(()=>{class n{constructor(){this.email="",this.password="",this.confirmPassword="",this.displayName="",this.authService=Y(fy),this.router=Y(Ni)}register({email:t,password:r,confirmPassword:i,displayName:s}){t&&r&&s?r===i?this.authService.register(t,r,s).then(()=>{this.router.navigate(["/home"]),console.log(`Zarejestrowano pomy\u015blnie u\u017cytkownika: ${s}`)}).catch(o=>{console.error("B\u0142\u0105d rejestracji:",o.message)}):console.error("Has\u0142a nie s\u0105 zgodne."):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-register"]],standalone:!0,features:[Er],decls:1,vars:6,consts:[[3,"emailChange","passwordChange","confirmPasswordChange","displayNameChange","formSubmit","isLogin","buttonText","email","password","confirmPassword","displayName"]],template:function(r,i){1&r&&(q(0,"app-auth-form",0),Vt("emailChange",function(o){return St(i.email,o)||(i.email=o),o})("passwordChange",function(o){return St(i.password,o)||(i.password=o),o})("confirmPasswordChange",function(o){return St(i.confirmPassword,o)||(i.confirmPassword=o),o})("displayNameChange",function(o){return St(i.displayName,o)||(i.displayName=o),o}),je("formSubmit",function(o){return i.register(o)}),B()),2&r&&(_n("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Ot("email",i.email)("password",i.password)("confirmPassword",i.confirmPassword)("displayName",i.displayName))},dependencies:[ys,NZ]})}}return n})();const Ku=()=>{const n=Y(fy),e=Y(Ni);return console.log("AuthGuard: Checking authentication status"),n.isAuthenticated()?(console.log("AuthGuard: User is authenticated"),!0):(console.log("AuthGuard: User is not authenticated, redirecting to /login"),e.navigate(["/login"]),!1)},kZ_firebaseConfig={apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"};let ERe=(()=>{class n{constructor(){this.http=Y(cG),this.apiUrl="https://www.googleapis.com/youtube/v3"}getVideoDetails(t){return this.http.get(`https://www.googleapis.com/youtube/v3/videos?id=${t}&part=snippet,contentDetails,statistics&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}searchVideos(t,r=10){return this.http.get(`${this.apiUrl}/search?part=snippet&q=${t}&maxResults=${r}&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VZ=(()=>{class n{constructor(){this.client=Y(Uc),this.afAuth=Y(Pa)}saveTdee(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("calorie-calculations").add({...t,uid:r.uid,date:(new Date).toISOString()}).then(()=>console.log("Calorie calculation saved")).catch(i=>console.error("Error saving calorie calculation:",i)):Promise.reject("User not authenticated"))}loadTdee(){return new Bt(t=>{this.afAuth.currentUser.then(r=>{r?this.client.collection("calorie-calculations",i=>i.where("uid","==",r.uid).orderBy("date","desc").limit(1)).get().subscribe(i=>{if(i.empty)t.next(null);else{const s=i.docs[0].data();t.next(s)}}):t.error("User not authenticated")})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TRe=(()=>{class n{transform(t,r,i){return i-t.reduce((a,u)=>a+(u.calories||0),0)+r.reduce((a,u)=>a+(u.burnedKcal||0),0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=pi({name:"caloriesBalance",type:n,pure:!0,standalone:!0})}}return n})();const wRe=(n,e)=>e.id;function bRe(n,e){1&n&&(q(0,"p"),W(1,"Nie przekroczy\u0142e\u015b zapotrzebowania kalorycznego"),B())}function ARe(n,e){1&n&&(q(0,"p",7),W(1,"Przekroczy\u0142e\u015b zapotrzebowanie kaloryczne"),B())}function CRe(n,e){if(1&n&&(q(0,"div",2)(1,"h3"),W(2,"Balans kaloryczny:"),B(),q(3,"p",6),W(4),So(5,"caloriesBalance"),So(6,"number"),B(),Wn(7,bRe,2,0,"p"),So(8,"caloriesBalance"),Wn(9,ARe,2,0,"p",7),B()),2&n){const t=Qe();ne(4),fr(" ",rd(6,6,h1(5,2,t.meals(),t.trainings(),t.tdee),"1.0-0")," kcal "),ne(3),un(h1(8,9,t.meals(),t.trainings(),t.tdee)>0?7:9)}}function DRe(n,e){if(1&n&&(q(0,"li",9)(1,"span",10),W(2),B(),W(3," - "),q(4,"span",11),W(5),B(),W(6),B()),2&n){const t=e.$implicit;ne(2),kn(t.name),ne(3),fr("",t.calories," kcal"),ne(),fr(" (",t.weight," g) ")}}function SRe(n,e){if(1&n&&(q(0,"div",3)(1,"h3"),W(2,"Meals:"),B(),q(3,"ul",8),Ys(4,DRe,7,3,"li",9,ba),B()()),2&n){const t=Qe();ne(4),Js(t.meals())}}function RRe(n,e){if(1&n&&(q(0,"li",13)(1,"span",14),W(2),B(),W(3," - "),q(4,"span",15),W(5),B(),W(6),B()),2&n){const t=e.$implicit;ne(2),kn(t.name),ne(3),fr("",t.burnedKcal," kcal"),ne(),fr(" (",t.time," min) ")}}function PRe(n,e){if(1&n&&(q(0,"div",4)(1,"h3"),W(2,"Trainings:"),B(),q(3,"ul",12),Ys(4,RRe,7,3,"li",13,wRe),B()()),2&n){const t=Qe();ne(4),Js(t.trainings())}}function xRe(n,e){if(1&n&&(q(0,"div",5)(1,"h3"),W(2,"Watch the video:"),B(),Xs(3,"iframe",16),B()),2&n){const t=Qe();ne(3),_n("src",t.videoUrl,Db)}}function MRe(n,e){1&n&&(q(0,"p"),W(1,"No video available for this training."),B())}let NRe=(()=>{class n{constructor(){this.day=Qs(null),this.meals=Qs([]),this.trainings=Qs([]),this.tdee=0,this.calorieService=Y(VZ),this.youtubeService=Y(ERe),this.route=Y(ld),this.trainingAndMealService=Y(g_),this.videoDetails=null,this.videoId=null,this.sanitizer=Y(pM),this.videoUrl=null,this.calorieData={tdee:0},this.route.paramMap.subscribe(t=>{const r=t.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){const i=new Date(r);this.day.set(i),this.loadDetails(i)}}),this.loadTdeeFromFirebase()}loadDetails(t){this.trainingAndMealService.getMealsByDate(t).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(t).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r),this.checkForVideo(r)})}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}checkForVideo(t){const r=t.find(i=>i.videoLink);r?(console.log("Training with video link found:",r),this.videoId=this.extractVideoId(r.videoLink),this.videoId?this.loadVideoDetails(this.videoId):(console.error("Brak ID wideo w linku"),this.videoUrl=null)):(console.log("Brak linku do wideo"),this.videoId=null,this.videoDetails=null,this.videoUrl=null)}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}loadVideoDetails(t){t&&this.youtubeService.getVideoDetails(t).subscribe(r=>{console.log("Odpowied\u017a z YouTube:",r),r.items&&r.items.length>0?(this.videoDetails=r.items[0],this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${t}`)):(console.error("Brak wynik\xf3w dla wideo"),this.videoDetails=null,this.videoUrl=null)},r=>{console.error("B\u0142\u0105d \u0142adowania wideo:",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-day-details"]],standalone:!0,features:[Er],decls:9,vars:8,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"meals"],[1,"trainings"],[1,"youtube-video"],[1,"balance-value"],[1,"text-danger"],[1,"meal-list"],[1,"meal-item"],[1,"meal-name"],[1,"meal-calories"],[1,"training-list"],[1,"training-item"],[1,"training-name"],[1,"training-burned"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h2",1),W(2),So(3,"date"),B(),Wn(4,CRe,10,13,"div",2)(5,SRe,6,0,"div",3)(6,PRe,6,0,"div",4)(7,xRe,4,1,"div",5)(8,MRe,2,0,"p"),B()),2&r&&(ne(2),fr("Details for ",rd(3,5,i.day(),"fullDate"),""),ne(2),un(i.tdee?4:-1),ne(),un(i.meals().length>0?5:-1),ne(),un(i.trainings().length>0?6:-1),ne(),un(i.videoUrl?7:8))},dependencies:[dm,TRe,bc,Q1],styles:[".day-details[_ngcontent-%COMP%]{background:var(--background-gradient);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:800px;margin:30px auto;color:#fff}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.meals[_ngcontent-%COMP%], .trainings[_ngcontent-%COMP%]{background-color:#fffc;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d}.meal-list[_ngcontent-%COMP%], .training-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0;color:#333}.meal-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.meal-name[_ngcontent-%COMP%], .training-name[_ngcontent-%COMP%]{color:#006400}.meal-calories[_ngcontent-%COMP%], .training-burned[_ngcontent-%COMP%]{color:#d32f2f}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1rem}.youtube-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;margin:0 auto}}"]})}}return n})(),kRe=(()=>{class n{constructor(){this.client=Y(Uc),this.afAuth=Y(Pa)}addMeasurement(t){return new Promise((r,i)=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("measurements").add({...t,uid:o,date:t.date.toString()}).then(()=>{console.log("Measurement added successfully"),r()}).catch(a=>{console.error("Error adding measurement:",a),i(a)}):i(new Error("No user found"))}).catch(s=>{console.error("Error getting user:",s),i(s)})})}getMeasurements(){return new Bt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("measurements",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{t.next(s)}):t.next([])}).catch(()=>t.next([]))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ORe(n,e){if(1&n&&(q(0,"tr")(1,"td"),W(2),B(),q(3,"td"),W(4),B(),q(5,"td",8),W(6),B(),q(7,"td",8),W(8),B(),q(9,"td",8),W(10),B(),q(11,"td",8),W(12),B(),q(13,"td",8),W(14),B(),q(15,"td",8),W(16),B()()),2&n){const t=e.$implicit,r=e.$index,i=Qe(2);ne(2),kn(t.date),ne(2),kn(t.weight),ne(),_n("ngStyle",i.getStyle(t,r,"waist")),ne(),kn(t.waist),ne(),_n("ngStyle",i.getStyle(t,r,"hips")),ne(),kn(t.hips),ne(),_n("ngStyle",i.getStyle(t,r,"thigh")),ne(),kn(t.thigh),ne(),_n("ngStyle",i.getStyle(t,r,"buttocks")),ne(),kn(t.buttocks),ne(),_n("ngStyle",i.getStyle(t,r,"arms")),ne(),kn(t.arms),ne(),_n("ngStyle",i.getStyle(t,r,"chest")),ne(),kn(t.chest)}}function VRe(n,e){if(1&n&&(q(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),W(5,"Data"),B(),q(6,"th"),W(7,"Waga (kg)"),B(),q(8,"th"),W(9,"Talia (cm)"),B(),q(10,"th"),W(11,"Biodra (cm)"),B(),q(12,"th"),W(13,"Uda (cm)"),B(),q(14,"th"),W(15,"Po\u015bladki (cm)"),B(),q(16,"th"),W(17,"Ramiona (cm)"),B(),q(18,"th"),W(19,"Klatka piersiowa (cm)"),B()()(),q(20,"tbody"),Ys(21,ORe,17,14,"tr",null,ba),B()()()),2&n){const t=Qe();ne(21),Js(t.measurements)}}function FRe(n,e){if(1&n){const t=Vr();q(0,"div",7)(1,"form",9),je("ngSubmit",function(){return Et(t),ht(Qe().addMeasurement())}),q(2,"div",10)(3,"label",11),W(4,"Data:"),B(),q(5,"input",12),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.date,i)||(s.newMeasurement.date=i),ht(i)}),B()(),q(6,"div",10)(7,"label",13),W(8,"Talia:"),B(),q(9,"input",14),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.waist,i)||(s.newMeasurement.waist=i),ht(i)}),B()(),q(10,"div",10)(11,"label",15),W(12,"Biodra:"),B(),q(13,"input",16),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.hips,i)||(s.newMeasurement.hips=i),ht(i)}),B()(),q(14,"div",10)(15,"label",17),W(16,"Po\u015bladki:"),B(),q(17,"input",18),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.buttocks,i)||(s.newMeasurement.buttocks=i),ht(i)}),B()(),q(18,"div",10)(19,"label",19),W(20,"Uda:"),B(),q(21,"input",20),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.thigh,i)||(s.newMeasurement.thigh=i),ht(i)}),B()(),q(22,"div",10)(23,"label",21),W(24,"Ramiona:"),B(),q(25,"input",22),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.arms,i)||(s.newMeasurement.arms=i),ht(i)}),B()(),q(26,"div",10)(27,"label",23),W(28,"Klatka piersiowa:"),B(),q(29,"input",24),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.chest,i)||(s.newMeasurement.chest=i),ht(i)}),B()(),q(30,"div",10)(31,"label",25),W(32,"Waga:"),B(),q(33,"input",26),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newMeasurement.weight,i)||(s.newMeasurement.weight=i),ht(i)}),B()(),q(34,"div",10)(35,"button",27),W(36,"Dodaj pomiar"),B()()()()}if(2&n){const t=Qe();ne(5),Ot("ngModel",t.newMeasurement.date),ne(4),Ot("ngModel",t.newMeasurement.waist),ne(4),Ot("ngModel",t.newMeasurement.hips),ne(4),Ot("ngModel",t.newMeasurement.buttocks),ne(4),Ot("ngModel",t.newMeasurement.thigh),ne(4),Ot("ngModel",t.newMeasurement.arms),ne(4),Ot("ngModel",t.newMeasurement.chest),ne(4),Ot("ngModel",t.newMeasurement.weight)}}let FZ=(()=>{class n{constructor(t){this.measurementsService=t,this.measurements=[],this.isFormVisible=!1,this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}ngOnInit(){this.loadMeasurements()}loadMeasurements(){this.measurementsService.getMeasurements().subscribe(t=>{this.measurements=t})}addMeasurement(){this.measurementsService.addMeasurement(this.newMeasurement).then(()=>{this.loadMeasurements()}),this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}calculateChange(t,r){return 0===r?"-":(t.weight-this.measurements[r-1].weight).toFixed(2)}getStyle(t,r,i){if(0===r)return{};const o=t[i],a=this.measurements[r-1][i];if("number"==typeof o&&"number"==typeof a){const u=o-a;return u>0?{color:"red"}:u<0?{color:"green"}:{color:"black"}}return{}}toggleForm(){this.isFormVisible=!this.isFormVisible}static{this.\u0275fac=function(r){return new(r||n)(De(kRe))}}static{this.\u0275cmp=er({type:n,selectors:[["app-weight-control"]],standalone:!0,features:[Er],decls:10,vars:2,consts:[[1,"measurements-summary"],[1,"justify-content-center"],[1,"measurements-content"],[1,"measurements-table"],[4,"ngIf"],[1,"btn-container"],[1,"btn-toggle",3,"click"],[1,"measurement-form-container"],[3,"ngStyle"],[1,"measurement-form",3,"ngSubmit"],[1,"form-group"],["for","date"],["type","date","id","date","name","date","required","",3,"ngModelChange","ngModel"],["for","waist"],["type","number","id","waist","name","waist","required","",3,"ngModelChange","ngModel"],["for","hips"],["type","number","id","hips","name","hips","required","",3,"ngModelChange","ngModel"],["for","buttocks"],["type","number","id","buttocks","name","buttocks","required","",3,"ngModelChange","ngModel"],["for","thigh"],["type","number","id","thigh","name","thigh","required","",3,"ngModelChange","ngModel"],["for","arms"],["type","number","id","arms","name","arms","required","",3,"ngModelChange","ngModel"],["for","chest"],["type","number","id","chest","name","chest","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h3",1),W(2,"Zestawienie Pomiar\xf3w cia\u0142a:"),B(),q(3,"div",2)(4,"div",3),Wn(5,VRe,23,0,"div",4),B(),q(6,"div",5)(7,"button",6),je("click",function(){return i.toggleForm()}),W(8,"Dodaj pomiar"),B()(),Wn(9,FRe,37,8,"div",7),B()()),2&r&&(ne(5),_n("ngIf",i.measurements.length>1),ne(4),un(i.isFormVisible?9:-1))},dependencies:[ys,I_,oa,Cf,Bu,m_,kd,xa,Nd,bc,Sq,xq],styles:[".measurements-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.measurements-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.measurements-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.measurement-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .measurement-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}@media (max-width: 768px){.measurement-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.justify-content-center[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{text-align:center;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .btn-toggle[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:auto;margin:0 auto}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}"]})}}return n})(),LRe=(()=>{class n{constructor(){this.meals=Qs([]),this.trainings=Qs([]),this.currentMonth=new Date,this.trainingAndMealService=Y(g_),this.cdr=Y($h),this.loadMonthlyDetails()}changeMonth(t){const r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+t),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){const t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(t,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(t,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().filter(i=>!0===i.isDone).reduce((i,s)=>i+(s.burnedKcal?Number(s.burnedKcal):0),0)}totalTrainingTime(){const r=this.trainings().filter(i=>!0===i.isDone);return console.log("Completed Trainings:",r),r.reduce((i,s)=>{const o=s.time?Number(s.time):0;return console.log("Training Time:",o),i+(isNaN(o)?0:o)},0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-monthly-summary"]],standalone:!0,features:[Er],decls:24,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),je("click",function(){return i.changeMonth(-1)}),W(4," \u2190 Poprzedni miesi\u0105c "),B(),q(5,"h2",4),W(6),So(7,"date"),B(),q(8,"button",3),je("click",function(){return i.changeMonth(1)}),W(9," Nast\u0119pny miesi\u0105c \u2192 "),B()(),q(10,"div",5)(11,"p")(12,"strong"),W(13,"\u0141\u0105czna liczba kalorii:"),B(),W(14),B(),q(15,"p")(16,"strong"),W(17,"\u0141\u0105czna liczba spalonych kalorii:"),B(),W(18),B(),q(19,"p")(20,"strong"),W(21,"\u0141\u0105czny czas trening\xf3w:"),B(),W(22),B()()()(),Xs(23,"app-weight-control")),2&r&&(ne(6),fr(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",rd(7,4,i.currentMonth,"MMMM yyyy")," "),ne(8),fr(" ",i.totalCalories()," kcal"),ne(4),fr(" ",i.totalBurnedCalories()," kcal "),ne(4),fr(" ",i.totalTrainingTime()," min "))},dependencies:[dm,FZ],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.monthly-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.monthly-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.monthly-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .monthly-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:8px 16px;border-radius:5px;font-size:14px;cursor:pointer;width:auto;margin:0 auto}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636);transform:scale(1.05)}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px;font-size:16px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333;margin:0 20px}@media (max-width: 768px){.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:22px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{padding:10px 18px;font-size:16px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin:0 10px}}"]})}}return n})(),DU=(()=>{class n{constructor(){this.client=Y(Uc),this.afAuth=Y(Pa)}getAllFitnessPlans(){return this.client.collection("FitnessPlans").valueChanges()}createFitnessPlan(t){const r={...t};this.client.collection("FitnessPlans").add(r).then(()=>console.log("Plan fitness dodany")).catch(i=>console.error("B\u0142\u0105d przy dodawaniu planu fitness",i))}getFitnessPlanById(t){return this.client.collection("FitnessPlans",r=>r.where("id","==",t)).valueChanges().pipe($e(r=>r.length>0?r[0]:void 0),Mi(r=>{console.log("Fetched Plan Data from Firestore:",r)}),$e(r=>{if(r)return r;console.log("Brak planu dla podanego ID:",t)}))}updateFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t.id)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).update(t).then(()=>console.log("Plan fitness zaktualizowany")).catch(s=>console.error("B\u0142\u0105d przy aktualizacji planu fitness",s))})})}deleteFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).delete().then(()=>console.log("Plan fitness usuni\u0119ty")).catch(s=>console.error("B\u0142\u0105d przy usuwaniu planu fitness",s))})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function URe(n,e){if(1&n){const t=Vr();q(0,"div",5)(1,"div",7)(2,"input",8),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.videoLink,i)||(s.videoLink=i),ht(i)}),B(),q(3,"input",9),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.time,i)||(s.time=i),ht(i)}),B(),q(4,"input",10),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.burnedKcal,i)||(s.burnedKcal=i),ht(i)}),B(),q(5,"button",11),je("click",function(){const i=Et(t).$index;return ht(Qe().removeDay(i))}),W(6,"Usu\u0144 dzie\u0144"),B()()()}if(2&n){const t=e.$implicit;ne(2),Ot("ngModel",t.videoLink),ne(),Ot("ngModel",t.time),ne(),Ot("ngModel",t.burnedKcal)}}let BRe=(()=>{class n{constructor(){this.fitnessPlanService=Y(DU),this.router=Y(Ni),this.plans=[],this.planName="",this.days=[],this.planDescription="",this.loadAllPlans()}loadAllPlans(){this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Wszystkie plany:",t),this.plans=t})}addDay(){this.days.push({date:"",videoLink:"",time:"",burnedKcal:0})}removeDay(t){this.days.splice(t,1)}savePlan(){const t={id:this.fitnessPlanService.client.createId(),name:this.planName,description:this.planDescription,days:this.days,uid:""};this.fitnessPlanService.createFitnessPlan(t),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-training-plans"]],standalone:!0,features:[Er],decls:11,vars:2,consts:[[1,"plan-form"],[1,"image-container"],["src","assets/foto.jpg","alt","Fitness Plan Image",1,"plan-image"],["placeholder","Nazwa planu",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Opis planu",1,"form-control",3,"ngModelChange","ngModel"],[1,"day-card"],[1,"btn-primary",3,"click"],[1,"day-form"],["placeholder","Link do YouTube",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Czas trwania (min)","type","number",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Spalone kcal","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-danger",3,"click"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"div",1),Xs(2,"img",2),B(),q(3,"input",3),Vt("ngModelChange",function(o){return St(i.planName,o)||(i.planName=o),o}),B(),q(4,"input",4),Vt("ngModelChange",function(o){return St(i.planDescription,o)||(i.planDescription=o),o}),B(),Ys(5,URe,7,3,"div",5,ba),q(7,"button",6),je("click",function(){return i.addDay()}),W(8,"Dodaj dzie\u0144"),B(),q(9,"button",6),je("click",function(){return i.savePlan()}),W(10,"Zapisz plan"),B()()),2&r&&(ne(3),Ot("ngModel",i.planName),ne(),Ot("ngModel",i.planDescription),ne(),Js(i.days))},dependencies:[ys,oa,Cf,Bu,xa],styles:[".plan-form[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0 auto;padding:20px;max-width:900px;width:100%;display:flex;flex-direction:column;align-items:center}.input-container[_ngcontent-%COMP%]{width:100%}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:60%;margin-top:10px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}.day-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;padding:15px;margin-bottom:15px;width:60%}.day-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:60%;text-align:center;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:10px}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-bottom:20px}.plan-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:10px}@media (max-width: 768px){.plan-form[_ngcontent-%COMP%]{width:100%;padding:15px}.input-container[_ngcontent-%COMP%]{width:100%}input.form-control[_ngcontent-%COMP%]{width:100%;font-size:14px}.day-card[_ngcontent-%COMP%]{width:100%;padding:10px}button.btn-primary[_ngcontent-%COMP%], button.btn-danger[_ngcontent-%COMP%]{width:100%;font-size:14px;padding:10px}.image-container[_ngcontent-%COMP%]{width:100%}.plan-image[_ngcontent-%COMP%]{max-width:100%;height:auto}}"]})}}return n})();const jRe=n=>["/plan",n];function zRe(n,e){if(1&n){const t=Vr();q(0,"div",8),je("click",function(){const i=Et(t).$implicit;return ht(Qe().selectPlan(i))}),q(1,"h4",9),W(2),B(),q(3,"p"),W(4),B(),q(5,"div",10)(6,"button",11),W(7," Wi\u0119cej "),B(),q(8,"button",12),je("click",function(){const i=Et(t).$implicit;return ht(Qe().deletePlan(i))}),W(9," Usu\u0144 "),B()()()}if(2&n){const t=e.$implicit,r=Qe();rm("selected",t.id===(null==r.selectedPlan?null:r.selectedPlan.id)),ne(2),kn(t.name),ne(2),kn(t.description),ne(2),_n("routerLink",d1(5,jRe,t.id))}}let $Re=(()=>{class n{constructor(){this.fitnessPlanService=Y(DU),this.calendarService=Y(g_),this.fitnessPlans=[],this.selectedPlan=null,this.startDate=new Date,this.router=Y(Ni),this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Plany w komponencie:",t),this.fitnessPlans=t})}selectPlan(t){console.log("Wybrano plan:",t),this.selectedPlan=t}goToPlanDetails(t){this.router.navigate([`/plan/${t}`])}startPlan(){if(console.log("Rozpoczynanie planu:",this.selectedPlan),this.selectedPlan){let t=this.startDate;t instanceof Date||(t=new Date(t)),this.selectedPlan.days.forEach((r,i)=>{const s=new Date(t);s.setDate(t.getDate()+i),this.calendarService.addTraining({name:r.name?`Trening: ${r.name}`:`Trening: Dzie\u0144 ${i+1}`,date:s,burnedKcal:r.burnedKcal||0,time:r.time||0,videoLink:r.videoLink}),this.router.navigate(["/home"]),console.log(`Dodano trening dnia ${s.toISOString()}: ${r.videoLink}`)})}}deletePlan(t){this.fitnessPlanService.deleteFitnessPlan(t.id),this.fitnessPlans=this.fitnessPlans.filter(r=>r.id!==t.id),console.log("Plan usuni\u0119ty",t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-training-plans-select"]],standalone:!0,features:[Er],decls:13,vars:1,consts:[["src","assets/foto2.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"fitness-plan-select"],[1,"plan-cards-container"],[1,"plan-card",3,"selected"],[1,"form-group"],["for","startDate"],["id","startDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"plan-card",3,"click"],[1,"plan-title"],[1,"button-group"],[1,"btn","btn-link","btn-sm",3,"routerLink"],[1,"btn","btn-link","btn-sm",3,"click"]],template:function(r,i){1&r&&(Xs(0,"img",0),q(1,"div",1)(2,"h3"),W(3,"Fitness Plans:"),B(),q(4,"div",2),Ys(5,zRe,10,7,"div",3,ba),B(),q(7,"div",4)(8,"label",5),W(9,"Wybierz dat\u0119 rozpocz\u0119cia "),B(),q(10,"input",6),Vt("ngModelChange",function(o){return St(i.startDate,o)||(i.startDate=o),o}),B()(),q(11,"button",7),je("click",function(){return i.startPlan()}),W(12,"Rozpocznij Plan"),B()()),2&r&&(ne(5),Js(i.fitnessPlans),ne(5),Ot("ngModel",i.startDate))},dependencies:[ys,oa,Bu,xa,bc,zM,Dm],styles:[".plan-image[_ngcontent-%COMP%]{width:50%;max-width:900px;height:auto;margin:0 auto 20px;display:block;border-radius:8px;padding:20px}.fitness-plan-select[_ngcontent-%COMP%]{padding:20px;background:var(--background-gradient);border-radius:10px;color:#333;max-width:900px;margin:0 auto;text-align:center}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px}.plan-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;margin:0 auto;max-width:780px}.plan-card[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:20px;width:250px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease}.plan-card.selected[_ngcontent-%COMP%]{background:#dcdcdc}.plan-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin-bottom:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;border-radius:5px;padding:8px 12px}.form-group[_ngcontent-%COMP%]{margin-top:20px}#startDate[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{margin-top:20px;background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#254636}"]})}}return n})();function qRe(n,e){if(1&n&&(q(0,"div"),Xs(1,"iframe",10),B()),2&n){const t=Qe().$implicit,r=Qe();ne(),_n("src",r.getVideoUrl(t.videoLink),Db)}}function GRe(n,e){if(1&n){const t=Vr();q(0,"div",2)(1,"div",4)(2,"h5",5),W(3),B(),q(4,"div",6)(5,"label",7),W(6,"Spalone kalorie"),B(),q(7,"input",8),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.burnedKcal,i)||(s.burnedKcal=i),ht(i)}),B()(),q(8,"div",6)(9,"label",7),W(10,"Czas treningu (w minutach)"),B(),q(11,"input",8),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.time,i)||(s.time=i),ht(i)}),B()(),q(12,"div",6)(13,"label",7),W(14,"Link wideo"),B(),q(15,"input",9),Vt("ngModelChange",function(i){const s=Et(t).$implicit;return St(s.videoLink,i)||(s.videoLink=i),ht(i)}),B()(),q(16,"div",6)(17,"label"),W(18,"Filmik z YouTube"),B(),Wn(19,qRe,2,1,"div"),B()()()}if(2&n){const t=e.$implicit,r=e.$index;ne(3),fr("Dzie\u0144 ",r+1,""),ne(2),vc("for","burnedKcal",r,""),ne(2),vc("id","burnedKcal",r,""),Ot("ngModel",t.burnedKcal),ne(2),vc("for","duration",r,""),ne(2),vc("id","duration",r,""),Ot("ngModel",t.time),ne(2),vc("for","videoLink",r,""),ne(2),vc("id","videoLink",r,""),Ot("ngModel",t.videoLink),ne(4),un(t.videoLink?19:-1)}}let HRe=(()=>{class n{constructor(){this.fitnessPlanService=Y(DU),this.route=Y(ld),this.planId=null,this.plan=void 0,this.sanitizer=Y(pM)}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");console.log("Fetched Plan ID:",t),t&&this.fitnessPlanService.getFitnessPlanById(t).subscribe(r=>{r?this.plan=r:console.log("Brak planu dla ID:",t)})}savePlanEdits(){this.plan&&(this.fitnessPlanService.updateFitnessPlan(this.plan),console.log("Zmiany zapisane dla planu:",this.plan))}getVideoUrl(t){if(t){const i=`https://www.youtube.com/embed/${this.extractVideoId(t)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}return""}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-training-plan-detail"]],standalone:!0,features:[Er],decls:8,vars:1,consts:[[1,"plan-details"],[1,"card-container"],[1,"card","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[3,"for"],["type","number",1,"form-control",3,"ngModelChange","ngModel","id"],["type","text",1,"form-control",3,"ngModelChange","ngModel","id"],["width","100%","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h4"),W(2),B(),q(3,"div",1),Ys(4,GRe,20,17,"div",2,ba),B(),q(6,"button",3),je("click",function(){return i.savePlanEdits()}),W(7," Zapisz zmiany "),B()()),2&r&&(ne(2),fr("Szczeg\xf3\u0142y planu: ",null==i.plan?null:i.plan.name,""),ne(2),Js(null==i.plan?null:i.plan.days))},dependencies:[ys,oa,Cf,Bu,xa],styles:[".plan-details[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-radius:10px;color:#333}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}.card[_ngcontent-%COMP%]{width:30%;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;padding:20px;color:#333}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}.card-body[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}iframe[_ngcontent-%COMP%]{border-radius:10px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.card[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:15px}.card-title[_ngcontent-%COMP%]{font-size:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px}iframe[_ngcontent-%COMP%]{width:100%;height:auto}.btn-primary[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px}}"]})}}return n})(),WRe=(()=>{class n{constructor(){this.router=Y(Ni)}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-welcome"]],standalone:!0,features:[Er],decls:13,vars:0,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-images"],["src","assets/welcome.jpg","alt","Fitness Image 1",1,"welcome-image"],["src","assets/welcome2.jpeg","alt","Fitness Image 2",1,"welcome-image"],[1,"welcome-description"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h1",1),W(2,"Witaj w swoim kalendarzu fitness!"),B(),q(3,"p",2),W(4,"U nas mo\u017cesz \u015bledzi\u0107 swoje plany treningowe, spalone kalorie i wiele wi\u0119cej."),B(),q(5,"div",3),Xs(6,"img",4)(7,"img",5),B(),q(8,"div",6)(9,"p"),W(10,"Wybierz jeden z naszych plan\xf3w treningowych, aby rozpocz\u0105\u0107 swoj\u0105 fitnessow\u0105 podr\xf3\u017c!"),B()(),q(11,"button",7),je("click",function(){return i.goToLogin()}),W(12,"Zaloguj si\u0119"),B()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-image:url(/assets/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;color:#fff;text-align:center;position:relative;z-index:1;padding:20px}.welcome-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out;margin-bottom:20px}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin:20px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s 1s forwards}.welcome-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:15px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 3s 1.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease,transform .3s ease;text-transform:uppercase;letter-spacing:1px;margin-top:30px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff);transform:scale(1.05)}.welcome-images[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:30px;flex-wrap:wrap;justify-content:space-evenly}.welcome-image[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;border-radius:10px;opacity:0;animation:_ngcontent-%COMP%_fadeInImage 2s 2s forwards}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0}to{opacity:1}}.welcome-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}"]})}}return n})(),KRe=(()=>{class n{constructor(){this.client=Y(Uc),this.afAuth=Y(Pa)}getUser(){return new Bt(t=>{this.afAuth.onAuthStateChanged(r=>{r?this.client.collection("users").doc(r.uid).get().subscribe({next:i=>{t.next(i.exists?i.data():null)},error:i=>{t.error(i)}}):t.next(null)})})}updateAvatarInFirestore(t,r){this.client.collection("users").doc(r).update({photoURL:t}).then(()=>{console.log("Avatar updated successfully")}).catch(i=>{console.error("Error updating avatar:",i)})}updateUserData(t,r){return new Bt(i=>{this.client.collection("users").doc(t).update({displayName:r}).then(()=>{i.next()}).catch(s=>{i.error(s)})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QRe(n,e){1&n&&Xs(0,"img",6),2&n&&_n("src",Qe(2).userPhotoURL,OP)}function YRe(n,e){1&n&&Xs(0,"img",7)}function JRe(n,e){if(1&n){const t=Vr();q(0,"div",1)(1,"div",5),Wn(2,QRe,1,1,"img",6)(3,YRe,1,0,"img",7),B(),q(4,"p",1)(5,"strong"),W(6,"Email:"),B(),W(7),B(),q(8,"p",1)(9,"strong"),W(10,"nick:"),B(),W(11),B(),q(12,"input",8),Vt("ngModelChange",function(i){Et(t);const s=Qe();return St(s.newAvatarURL,i)||(s.newAvatarURL=i),ht(i)}),B(),q(13,"button",9),je("click",function(){Et(t);const i=Qe();return ht(i.saveAvatar(i.newAvatarURL))}),W(14," Zaktualizuj Awatar "),B(),q(15,"button",9),je("click",function(){return Et(t),ht(Qe().authService.logout())}),W(16,"Wyloguj"),B()()}if(2&n){const t=Qe();ne(2),un(t.userPhotoURL?2:3),ne(5),fr(" ",t.email,""),ne(4),fr(" ",t.displayName,""),ne(),Ot("ngModel",t.newAvatarURL)}}function XRe(n,e){1&n&&(q(0,"p",1),W(1,"No user is logged in."),B())}let ZRe=(()=>{class n{constructor(){this.userPhotoURL="",this.displayName="",this.email="",this.newAvatarURL="",this.avatarFile=null,this.authService=Y(fy),this.userService=Y(KRe),this.themeService=Y(_K),this.userSignal=this.authService.getCurrentUser(),this.afAuth=Y(Pa),this.authService.getCurrentUser().subscribe(t=>{t?(this.userPhotoURL=t.photoURL||"",this.displayName=t.displayName||"Nieznany u\u017cytkownik",this.email=t.email||"Brak adresu e-mail",this.loadUser()):console.log("Nie ma zalogowanego u\u017cytkownika")})}changeGradient(t){this.themeService.setGradient(t)}loadUser(){this.userService.getUser().subscribe(t=>{t&&(this.userPhotoURL=t.photoURL||"",this.displayName=t.displayName||"Nieznany u\u017cytkownik",this.email=t.email||"Brak adresu e-mail")})}onAvatarChange(t){const r=t.target;r&&r.files&&r.files.length>0&&(this.avatarFile=r.files[0])}saveAvatar(t){this.afAuth.currentUser.then(r=>{r&&r.uid&&(this.userService.updateAvatarInFirestore(t,r.uid),this.userPhotoURL=t,console.log("Awatar zapisany pomy\u015blnie!"))}).catch(r=>{console.error("B\u0142\u0105d przy zapisywaniu awatara:",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-user"]],standalone:!0,features:[Er],decls:45,vars:1,consts:[[1,"user-details"],[1,"user-info"],[1,"color-container"],[1,"color-buttons"],[3,"click"],[1,"user-avatar"],["alt","User Avatar",1,"avatar",3,"src"],["src","assets/default-avatar.png","alt","User Avatar",1,"avatar"],["type","text","placeholder","Wprowad\u017a URL awatara",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h2"),W(2,"User Details"),B(),Wn(3,JRe,17,4,"div",1)(4,XRe,2,0,"p",1),B(),q(5,"h1"),W(6,"Wybierz kolor swojej aplikacji"),B(),q(7,"div",2)(8,"div",3)(9,"button",4),je("click",function(){return i.changeGradient("green")}),W(10,"Zielony Gradient"),B(),q(11,"button",4),je("click",function(){return i.changeGradient("pastel-lavender")}),W(12,"Pastel Lavender"),B(),q(13,"button",4),je("click",function(){return i.changeGradient("powder-blue")}),W(14,"Powder Blue"),B(),q(15,"button",4),je("click",function(){return i.changeGradient("cloud")}),W(16,"Cloud"),B(),q(17,"button",4),je("click",function(){return i.changeGradient("dusty-rose")}),W(18,"Dusty Rose"),B(),q(19,"button",4),je("click",function(){return i.changeGradient("powder-mint")}),W(20,"Powder Mint"),B(),q(21,"button",4),je("click",function(){return i.changeGradient("navy-ivory")}),W(22,"Navy Ivory"),B(),q(23,"button",4),je("click",function(){return i.changeGradient("cashmere-graphite")}),W(24," Cashmere Graphite "),B(),q(25,"button",4),je("click",function(){return i.changeGradient("pearl-ink")}),W(26,"Pearl Ink"),B(),q(27,"button",4),je("click",function(){return i.changeGradient("beige-espresso")}),W(28,"Beige Espresso"),B(),q(29,"button",4),je("click",function(){return i.changeGradient("graphite-rose")}),W(30,"Graphite Rose"),B(),q(31,"button",4),je("click",function(){return i.changeGradient("turquoise-alabaster")}),W(32," Turquoise Alabaster "),B(),q(33,"button",4),je("click",function(){return i.changeGradient("burgundy-cream")}),W(34,"Burgundy Cream"),B(),q(35,"button",4),je("click",function(){return i.changeGradient("platinum-coal")}),W(36,"Platinum Coal"),B(),q(37,"button",4),je("click",function(){return i.changeGradient("pearl-pink-anthracite")}),W(38," Pearl Pink Anthracite "),B(),q(39,"button",4),je("click",function(){return i.changeGradient("opal-blue")}),W(40,"Opal Blue"),B(),q(41,"button",4),je("click",function(){return i.changeGradient("mustard-caramel")}),W(42,"Mustard Caramel"),B(),q(43,"button",4),je("click",function(){return i.changeGradient("emerald-gold")}),W(44,"Emerald Gold"),B()()()),2&r&&(ne(3),un(i.displayName&&i.email?3:4))},dependencies:[bc,ys,oa,Bu,xa],styles:[".user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px auto;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a;max-width:500px}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#254636;margin-bottom:15px;text-align:center}.user-info[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;color:#333}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#254636}.user-avatar[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.user-avatar[_ngcontent-%COMP%]   img.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid #254636}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:20px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}p.user-info[_ngcontent-%COMP%]{margin-top:10px}.color-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:30px}.color-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin:0;width:100%;max-width:1000px;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0e0e0);border:1px solid #ccc;border-radius:8px;padding:12px 20px;font-size:14px;color:#333;cursor:pointer;transition:all .3s ease;width:100%;max-width:160px;text-align:center}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f0f0f0,#d0d0d0);border-color:#999;transform:translateY(-2px)}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);background:linear-gradient(135deg,#e0e0e0,silver)}h1[_ngcontent-%COMP%]{text-align:center;font-size:28px;color:#254636;margin:20px 0}input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 15px;font-size:16px;border:2px solid #ccc;border-radius:8px;background-color:#fff;color:#333;margin-top:10px;transition:border-color .3s ease,box-shadow .3s ease}input[type=text][_ngcontent-%COMP%]:focus{border-color:#254636;outline:none;box-shadow:0 0 5px #2546364d}input[type=text][_ngcontent-%COMP%]::placeholder{color:#aaa;font-style:italic}"]})}}return n})(),ePe=(()=>{class n{constructor(){this.calorieService=Y(VZ),this.tdeeCalculated=new Ht,this.calorieData={gender:"male",age:25,height:170,weight:70,activityLevel:1.2,tdee:0}}ngOnInit(){this.loadTdeeFromFirebase()}calculateCalories(){const{gender:t,age:r,height:i,weight:s,activityLevel:o}=this.calorieData;this.calorieData.tdee=("male"===t?10*s+6.25*i-5*r+5:10*s+6.25*i-5*r-161)*o,console.log("TDEE:",this.calorieData.tdee),this.tdeeCalculated.emit(this.calorieData.tdee),this.saveTdeeToFirebase()}saveTdeeToFirebase(){this.calorieService.saveTdee(this.calorieData).catch(t=>{console.error("Error saving calorie calculation:",t)})}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.calorieData.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.calorieData.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-calorie-calculator"]],outputs:{tdeeCalculated:"tdeeCalculated"},standalone:!0,features:[Er],decls:44,vars:9,consts:[[1,"calorie-form-container"],[3,"ngSubmit"],[1,"form-group"],["for","gender"],["id","gender","name","gender",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["for","age"],["type","number","id","age","name","age","required","",3,"ngModelChange","ngModel"],["for","height"],["type","number","id","height","name","height","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["for","activity"],["id","activity","name","activity",3,"ngModelChange","ngModel"],["value","1.2"],["value","1.375"],["value","1.55"],["value","1.725"],["value","1.9"],["type","submit"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"h3"),W(2,"Kalkulator zapotrzebowania kalorycznego"),B(),q(3,"form",1),je("ngSubmit",function(){return i.calculateCalories()}),q(4,"div",2)(5,"label",3),W(6,"P\u0142e\u0107:"),B(),q(7,"select",4),Vt("ngModelChange",function(o){return St(i.calorieData.gender,o)||(i.calorieData.gender=o),o}),q(8,"option",5),W(9,"M\u0119\u017cczyzna"),B(),q(10,"option",6),W(11,"Kobieta"),B()()(),q(12,"div",2)(13,"label",7),W(14,"Wiek:"),B(),q(15,"input",8),Vt("ngModelChange",function(o){return St(i.calorieData.age,o)||(i.calorieData.age=o),o}),B()(),q(16,"div",2)(17,"label",9),W(18,"Wzrost (cm):"),B(),q(19,"input",10),Vt("ngModelChange",function(o){return St(i.calorieData.height,o)||(i.calorieData.height=o),o}),B()(),q(20,"div",2)(21,"label",11),W(22,"Waga (kg):"),B(),q(23,"input",12),Vt("ngModelChange",function(o){return St(i.calorieData.weight,o)||(i.calorieData.weight=o),o}),B()(),q(24,"div",2)(25,"label",13),W(26,"Poziom aktywno\u015bci:"),B(),q(27,"select",14),Vt("ngModelChange",function(o){return St(i.calorieData.activityLevel,o)||(i.calorieData.activityLevel=o),o}),q(28,"option",15),W(29,"Siedz\u0105cy tryb \u017cycia"),B(),q(30,"option",16),W(31,"Lekka aktywno\u015b\u0107"),B(),q(32,"option",17),W(33,"\u015arednia aktywno\u015b\u0107"),B(),q(34,"option",18),W(35,"Du\u017ca aktywno\u015b\u0107"),B(),q(36,"option",19),W(37,"Bardzo du\u017ca aktywno\u015b\u0107"),B()()(),q(38,"button",20),W(39,"Oblicz"),B()(),q(40,"div")(41,"h4"),W(42),So(43,"number"),B()()()),2&r&&(ne(7),Ot("ngModel",i.calorieData.gender),ne(8),Ot("ngModel",i.calorieData.age),ne(4),Ot("ngModel",i.calorieData.height),ne(4),Ot("ngModel",i.calorieData.weight),ne(4),Ot("ngModel",i.calorieData.activityLevel),ne(15),fr(" Twoje dzienne zapotrzebowanie kaloryczne (TDEE): ",rd(43,6,i.calorieData.tdee,"1.0-0")," kcal "))},dependencies:[ys,I_,oK,uK,oa,Cf,FD,Bu,m_,kd,xa,Nd,bc,Q1],styles:[".calorie-form-container[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;text-align:center;margin-bottom:20px}.calorie-form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;gap:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:4px;background-color:#f9f9f9}button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#2f5957}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333;text-align:center;margin-top:20px}@media screen and (max-width: 768px){.calorie-form-container[_ngcontent-%COMP%]{padding:15px;width:90%}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:14px;padding:8px}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}}@media screen and (max-width: 480px){.calorie-form-container[_ngcontent-%COMP%]{padding:10px;width:95%}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px;padding:6px}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px}}"]})}}return n})(),tPe=(()=>{class n{constructor(t,r){this.firestore=t,this.afAuth=r}getThreads(){return this.firestore.collection("threads").valueChanges({idField:"id"})}createThread(t){return this.afAuth.currentUser.then(r=>{if(r){const i=this.firestore.createId();return this.firestore.collection("threads").doc(i).set({...t,authorId:r.uid,createdAt:new Date})}return Promise.reject("User not authenticated")})}addComment(t,r){return this.afAuth.currentUser.then(i=>{if(i){const s=this.firestore.createId();return this.firestore.collection("threads").doc(t).collection("comments").doc(s).set({...r,authorId:i.uid,createdAt:new Date})}return Promise.reject("User not authenticated")})}getComments(t){return this.firestore.collection("threads").doc(t).collection("comments").valueChanges({idField:"id"}).pipe($e(r=>r.map(i=>({id:i.id,content:i.content,authorId:i.authorId,createdAt:i.createdAt?.toDate()||new Date,threadId:t}))))}getUserEmail(t){return this.firestore.collection("users").doc(t).valueChanges()}static{this.\u0275fac=function(r){return new(r||n)(Se(Uc),Se(Pa))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const LZ=(n,e)=>e.id;function nPe(n,e){if(1&n&&(q(0,"div",16)(1,"small"),W(2),So(3,"date"),q(4,"span"),W(5),B()(),q(6,"p"),W(7),B()()),2&n){const t=e.$implicit;ne(2),fr(" ",rd(3,3,t.createdAt,"short")," - Autor: "),ne(3),kn(t.authorEmail||"Nieznany autor"),ne(2),kn(t.content)}}function rPe(n,e){1&n&&Ys(0,nPe,8,6,"div",16,LZ),2&n&&Js(Qe(2).$implicit.comments)}function iPe(n,e){1&n&&(q(0,"p"),W(1,"Brak komentarzy"),B())}function sPe(n,e){if(1&n){const t=Vr();q(0,"div",12)(1,"h4"),W(2,"Komentarze:"),B(),Wn(3,rPe,2,0)(4,iPe,2,0,"p"),q(5,"div",13)(6,"textarea",14),Vt("ngModelChange",function(i){Et(t);const s=Qe().$implicit;return St(s.newComment,i)||(s.newComment=i),ht(i)}),W(7,"                "),B(),q(8,"button",15),je("click",function(){Et(t);const i=Qe().$implicit;return ht(Qe().addComment(i.id))}),W(9," Dodaj komentarz "),B()()()}if(2&n){const t=Qe().$implicit;ne(3),un(t.comments&&t.comments.length>0?3:4),ne(3),Ot("ngModel",t.newComment)}}function oPe(n,e){if(1&n){const t=Vr();q(0,"div",10)(1,"h3"),W(2),B(),q(3,"p"),W(4),B(),q(5,"button",11),je("click",function(){const i=Et(t).$implicit;return ht(Qe().toggleComments(i.id))}),W(6),B(),Wn(7,sPe,10,2,"div",12),B()}if(2&n){const t=e.$implicit;ne(2),kn(t.title),ne(2),kn(t.content),ne(2),fr(" ",t.showComments?"Ukryj komentarze":"Poka\u017c komentarze"," "),ne(),un(t.showComments?7:-1)}}const aPe={providers:[function Tge(n,...e){return ma([{provide:Cm,multi:!0,useValue:n},[],{provide:ld,useFactory:z5,deps:[Ni]},{provide:um,multi:!0,useFactory:$5},e.map(t=>t.\u0275providers)])}([{path:"",component:WRe},{path:"home",component:r0e,canActivate:[Ku]},{path:"login",component:vRe},{path:"register",component:IRe},{path:"day-details/:day",component:NRe,canActivate:[Ku]},{path:"summary",component:LRe,canActivate:[Ku]},{path:"trainig-plans",component:BRe,canActivate:[Ku]},{path:"select-plan",component:$Re,canActivate:[Ku]},{path:"plan/:id",component:HRe,canActivate:[Ku]},{path:"user",component:ZRe,canActivate:[Ku]},{path:"weight",component:FZ,canActivate:[Ku]},{path:"calories-calculator",component:ePe,canActivate:[Ku]},{path:"forum",component:(()=>{class n{constructor(t){this.forumService=t,this.threads=[],this.model={id:"",title:"",content:"",authorId:"",createdAt:new Date},this.authService=Y(fy),this.authorCache=new Map}ngOnInit(){this.loadThreads()}toggleComments(t){const r=this.threads.find(i=>i.id===t);r&&(r.showComments=!r.showComments)}loadThreads(){this.forumService.getThreads().subscribe(t=>{this.threads=t,this.threads.forEach(r=>{this.forumService.getComments(r.id).subscribe(i=>{r.comments=i,r.comments.forEach(s=>{this.loadUserEmail(s)})})})})}loadUserEmail(t){this.authorCache.has(t.authorId)?t.authorEmail=this.authorCache.get(t.authorId):this.forumService.getUserEmail(t.authorId).subscribe(r=>{r?(t.authorEmail=r.email,this.authorCache.set(t.authorId,r.email)):t.authorEmail="Nieznany autor"})}addThread(){this.model.title&&this.model.content&&this.forumService.createThread(this.model).then(()=>{this.model={id:"",title:"",content:"",authorId:"",createdAt:new Date},this.loadThreads()})}showCommentForm(t){const r=this.threads.find(i=>i.id===t);r&&(r.showCommentForm=!r.showCommentForm)}addComment(t){const r=this.threads.find(i=>i.id===t);if(r){const i=r.newComment||"";i&&this.authService.getCurrentUser().subscribe(s=>{s&&this.forumService.addComment(t,{id:"",content:i,authorId:s.uid,createdAt:new Date,threadId:t}).then(()=>{r.newComment="",r.showCommentForm=!1,this.loadThreads()}).catch(a=>{console.error("Error adding comment:",a)})})}}static{this.\u0275fac=function(r){return new(r||n)(De(tPe))}}static{this.\u0275cmp=er({type:n,selectors:[["app-forum"]],standalone:!0,features:[Er],decls:22,vars:2,consts:[[1,"wrapper"],[1,"forum-header"],[1,"forum-container"],[3,"ngSubmit"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","content"],["id","content","name","content","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"threads-list"],[1,"thread-card"],[1,"btn","btn-secondary","add-comment-btn",3,"click"],[1,"comments"],[1,"comment-form"],["placeholder","Wpisz komentarz",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","add-comment-btn",3,"click"],[1,"comment"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"header",1)(2,"h1"),W(3,"Forum Dyskusyjne"),B()(),q(4,"div",2)(5,"h2"),W(6,"Dodaj nowy w\u0105tek"),B(),q(7,"form",3),je("ngSubmit",function(){return i.addThread()}),q(8,"label",4),W(9,"Tytu\u0142"),B(),q(10,"input",5),Vt("ngModelChange",function(o){return St(i.model.title,o)||(i.model.title=o),o}),B(),q(11,"label",6),W(12,"Tre\u015b\u0107"),B(),q(13,"textarea",7),Vt("ngModelChange",function(o){return St(i.model.content,o)||(i.model.content=o),o}),W(14,"      "),B(),q(15,"button",8),W(16,"Dodaj w\u0105tek"),B()(),q(17,"div",9)(18,"h2"),W(19,"W\u0105tki"),B(),Ys(20,oPe,8,4,"div",10,LZ),B()()()),2&r&&(ne(10),Ot("ngModel",i.model.title),ne(3),Ot("ngModel",i.model.content),ne(7),Js(i.threads))},dependencies:[ys,I_,oa,Bu,m_,kd,xa,Nd,bc,dm],styles:[".forum-container{width:100%;max-width:1200px;margin:0 auto;padding:40px;background:var(--background-gradient);border-radius:10px}.forum-header{text-align:center;margin-bottom:40px}.forum-header h1{font-size:36px;color:#fff;font-weight:700;letter-spacing:1px}form{display:flex;flex-direction:column;gap:20px}form label{font-size:18px;color:#000;font-weight:600}.form-control{padding:15px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fff;width:100%}.form-control:focus{border-color:var(--button-background);outline:none}button[type=submit]{background-color:var(--button-background, #254636);color:#fff;padding:15px 25px;font-size:18px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease}button[type=submit]:hover{background-color:darken(var(--button-background, #254636),10%)}.threads-list{margin-top:40px}.threads-list h2{font-size:28px;color:#000;text-align:center;font-weight:600}.thread-card{background-color:#ffffff1a;padding:20px;border-radius:12px;box-shadow:0 4px 12px #0000001a;margin-bottom:25px;transition:transform .3s ease,box-shadow .3s ease}.thread-card:hover{transform:translateY(-10px);box-shadow:0 8px 20px #0003}.thread-card h3{font-size:24px;font-weight:700;color:#000;margin-bottom:15px}.thread-card p{font-size:16px;color:#000;margin-bottom:20px}.add-comment-btn{background-color:var(--button-background, #254636);color:#fff;padding:12px 20px;font-size:16px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease}.add-comment-btn:hover{background-color:darken(var(--button-background, #254636),10%)}.comment-form{display:flex;flex-direction:column;gap:15px;margin-top:20px}.comment-input{padding:12px;font-size:14px;border-radius:8px;border:1px solid #ccc;background-color:#fff;width:100%}.comment-submit{background-color:var(--button-background, #254636);color:#000;padding:12px 20px;font-size:16px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s ease}.comment-submit:hover{background-color:darken(var(--button-background, #254636),10%)}.comments h4{font-size:20px;color:#000;margin-bottom:10px}.comment{background-color:#ffffff1a;padding:15px;margin-bottom:15px;border-radius:8px}.comment small{display:block;color:#000;font-size:12px;margin-bottom:10px}.comment p{color:#000;font-size:16px}.comment-section p{font-size:16px;color:#000;font-style:italic;text-align:center}@media (max-width: 768px){.forum-container{padding:20px}.forum-header h1{font-size:28px}.thread-card{padding:15px}.form-control,.comment-input,button[type=submit],.comment-submit,.add-comment-btn{font-size:14px}}\n"],encapsulation:3})}}return n})(),canActivate:[Ku]}]),function rfe(...n){const e=[],t=new Set,r=t.has(Qh.HttpTransferCacheOptions);for(const{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return ma([[],Tce(),t.has(Qh.NoHttpTransferCache)||r?[]:Che({}),e])}(),function yhe(...n){const e=[cG,mG,pG,{provide:HA,useExisting:pG},{provide:WA,useFactory:()=>Y(iM,{optional:!0})??Y(mG)},{provide:OI,useValue:_he,multi:!0},{provide:oM,useValue:!0},{provide:vG,useClass:mhe}];for(const t of n)e.push(...t.\u0275providers);return ma(e)}(),ww([LIe,ume,tme.initializeApp(kZ_firebaseConfig)]),dm]},uPe=()=>["/summary"],cPe=()=>["/home"],lPe=()=>["/select-plan"],dPe=()=>["/trainig-plans"],hPe=()=>["/calories-calculator"],fPe=()=>["/forum"];function pPe(n,e){1&n&&(q(0,"div",1)(1,"button",4),W(2," Osi\u0105gni\u0119cia "),B(),q(3,"button",4),W(4,"Kalnedarz"),B(),q(5,"button",4),W(6," Fitness Plany "),B(),q(7,"button",4),W(8," Stw\xf3rz Fitness Plan "),B(),q(9,"button",4),W(10," Kalkulator zapotrzebowania kalorycznego "),B(),q(11,"button",4),W(12,"Forum"),B()()),2&n&&(ne(),_n("routerLink",zh(6,uPe)),ne(2),_n("routerLink",zh(7,cPe)),ne(2),_n("routerLink",zh(8,lPe)),ne(2),_n("routerLink",zh(9,dPe)),ne(2),_n("routerLink",zh(10,hPe)),ne(2),_n("routerLink",zh(11,fPe)))}function gPe(n,e){if(1&n){const t=Vr();q(0,"div",2)(1,"button",5),je("click",function(){return Et(t),ht(Qe().navigateToLogin())}),W(2," Zaloguj si\u0119 "),B(),q(3,"button",5),je("click",function(){return Et(t),ht(Qe().navigateToRegister())}),W(4," Zarejestruj si\u0119 "),B()()}}function mPe(n,e){if(1&n){const t=Vr();q(0,"div",3)(1,"p"),W(2),B(),q(3,"button",6),W(4,"Moje konto"),B(),q(5,"button",7),je("click",function(){return Et(t),ht(Qe().logout())}),W(6,"Wyloguj"),B()()}2&n&&(ne(2),fr("Witaj, ",e.email,""),ne(),_n("routerLink","/user"))}let _Pe=(()=>{class n{constructor(){this.authService=Y(fy),this.router=Y(Ni),this.formChange=new Ht,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(t){this.formChange.emit(t)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[Er],decls:7,vars:9,consts:[[1,"navbar"],[1,"nav-links"],[1,"auth-buttons"],[1,"user-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){if(1&r&&(q(0,"div",0),Wn(1,pPe,13,12,"div",1),So(2,"async"),Wn(3,gPe,5,0,"div",2),So(4,"async"),Wn(5,mPe,7,2,"div",3),So(6,"async"),B()),2&r){let s,o;ne(),un((s=pA(2,3,i.user$))?1:-1,s),ne(2),un(pA(4,5,i.user$)?-1:3),ne(2),un((o=pA(6,7,i.user$))?5:-1,o)}},dependencies:[bc,Mq,zM,Dm],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:var(--background-gradient);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return n})(),yPe=(()=>{class n{constructor(){this.currentForm="login"}showForm(t){this.currentForm=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=er({type:n,selectors:[["app-root"]],standalone:!0,features:[Er],decls:3,vars:0,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){1&r&&(q(0,"app-navbar",0),je("formChange",function(o){return i.showForm(o)}),B(),q(1,"div",1),Xs(2,"router-outlet"),B())},dependencies:[xM,bc,_Pe]})}}return n})();zc("firebase","11.1.0","app"),MK(kZ_firebaseConfig),function Ghe(n,e){return rce({rootComponent:n,...FG(e)})}(yPe,aPe).catch(n=>console.error(n))},574:(zo,ii,_t)=>{_t.d(ii,{A:()=>Mr});var z=_t(401),He=_t(779),ze=_t(631),le=_t(398);class gn{constructor(yt,pt){this._delegate=yt,this.firebase=pt,(0,ze._addComponent)(yt,new He.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ze.deleteApp)(this._delegate)))}_getService(yt,pt=ze._DEFAULT_ENTRY_NAME){var ur;this._delegate.checkDestroyed();const Ur=this._delegate.container.getProvider(yt);return!Ur.isInitialized()&&"EXPLICIT"===(null===(ur=Ur.getComponent())||void 0===ur?void 0:ur.instantiationMode)&&Ur.initialize(),Ur.getImmediate({identifier:pt})}_removeServiceInstance(yt,pt=ze._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(pt)}_addComponent(yt){(0,ze._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,ze._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qn=new z.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function jt(){const rn=function Zn(rn){const yt={},pt={__esModule:!0,initializeApp:function Br(ot,Pe={}){const Le=ze.initializeApp(ot,Pe);if((0,z.gR)(yt,Le.name))return yt[Le.name];const oe=new rn(Le,pt);return yt[Le.name]=oe,oe},app:Ur,registerVersion:ze.registerVersion,setLogLevel:ze.setLogLevel,onLog:ze.onLog,apps:null,SDK_VERSION:ze.SDK_VERSION,INTERNAL:{registerComponent:function Qt(ot){const Pe=ot.name,Le=Pe.replace("-compat","");if(ze._registerComponent(ot)&&"PUBLIC"===ot.type){const oe=(Dt=Ur())=>{if("function"!=typeof Dt[Le])throw qn.create("invalid-app-argument",{appName:Pe});return Dt[Le]()};void 0!==ot.serviceProps&&(0,z.zw)(oe,ot.serviceProps),pt[Le]=oe,rn.prototype[Le]=function(...Dt){return this._getService.bind(this,Pe).apply(this,ot.multipleInstances?Dt:[])}}return"PUBLIC"===ot.type?pt[Le]:null},removeApp:function ur(ot){delete yt[ot]},useAsService:function jr(ot,Pe){return"serverAuth"===Pe?null:Pe},modularAPIs:ze}};function Ur(ot){if(!(0,z.gR)(yt,ot=ot||ze._DEFAULT_ENTRY_NAME))throw qn.create("no-app",{appName:ot});return yt[ot]}return pt.default=pt,Object.defineProperty(pt,"apps",{get:function dn(){return Object.keys(yt).map(ot=>yt[ot])}}),Ur.App=rn,pt}(gn);return rn.INTERNAL=Object.assign(Object.assign({},rn.INTERNAL),{createFirebaseNamespace:jt,extendNamespace:function yt(pt){(0,z.zw)(rn,pt)},createSubscribe:z.tD,ErrorFactory:z.FA,deepExtend:z.zw}),rn}(),be=new le.Vy("@firebase/app-compat");try{const rn=(0,z.mS)();if(void 0!==rn.firebase){be.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=rn.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&be.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Mr=fe;!function zt(rn){(0,ze.registerVersion)("@firebase/app-compat","0.2.43",rn)}()},631:(zo,ii,_t)=>{_t.r(ii),_t.d(ii,{FirebaseError:()=>le.g,SDK_VERSION:()=>as,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>we,_addOrOverwriteComponent:()=>nt,_apps:()=>de,_clearComponents:()=>Us,_components:()=>pe,_getProvider:()=>hn,_isFirebaseApp:()=>mn,_isFirebaseServerApp:()=>vt,_registerComponent:()=>Ut,_removeServiceInstance:()=>dt,_serverApps:()=>re,deleteApp:()=>$o,getApp:()=>oo,getApps:()=>Zd,initializeApp:()=>Za,initializeServerApp:()=>bs,onLog:()=>eh,registerVersion:()=>ao,setLogLevel:()=>la});var z=_t(467),He=_t(779),ze=_t(398),le=_t(401),gn=_t(749);class Ze{constructor(ge){this.container=ge}getPlatformInfoString(){return this.container.getProviders().map(F=>{if(function qn(Be){const ge=Be.getComponent();return"VERSION"===ge?.type}(F)){const V=F.getImmediate();return`${V.library}/${V.version}`}return null}).filter(F=>F).join(" ")}}const Zn="@firebase/app",jt="0.10.13",fe=new ze.Vy("@firebase/app"),be="@firebase/app-compat",Je="@firebase/analytics-compat",Nt="@firebase/analytics",zt="@firebase/app-check-compat",Mr="@firebase/app-check",rn="@firebase/auth",yt="@firebase/auth-compat",pt="@firebase/database",ur="@firebase/data-connect",Ur="@firebase/database-compat",Br="@firebase/functions",dn="@firebase/functions-compat",Qt="@firebase/installations",jr="@firebase/installations-compat",ot="@firebase/messaging",Pe="@firebase/messaging-compat",Le="@firebase/performance",oe="@firebase/performance-compat",Dt="@firebase/remote-config",Yt="@firebase/remote-config-compat",cr="@firebase/storage",Gn="@firebase/storage-compat",os="@firebase/firestore",lr="@firebase/vertexai-preview",ws="@firebase/firestore-compat",di="firebase",ie="[DEFAULT]",ce={[Zn]:"fire-core",[be]:"fire-core-compat",[Nt]:"fire-analytics",[Je]:"fire-analytics-compat",[Mr]:"fire-app-check",[zt]:"fire-app-check-compat",[rn]:"fire-auth",[yt]:"fire-auth-compat",[pt]:"fire-rtdb",[ur]:"fire-data-connect",[Ur]:"fire-rtdb-compat",[Br]:"fire-fn",[dn]:"fire-fn-compat",[Qt]:"fire-iid",[jr]:"fire-iid-compat",[ot]:"fire-fcm",[Pe]:"fire-fcm-compat",[Le]:"fire-perf",[oe]:"fire-perf-compat",[Dt]:"fire-rc",[Yt]:"fire-rc-compat",[cr]:"fire-gcs",[Gn]:"fire-gcs-compat",[os]:"fire-fst",[ws]:"fire-fst-compat",[lr]:"fire-vertex","fire-js":"fire-js",[di]:"fire-js-all"},de=new Map,re=new Map,pe=new Map;function we(Be,ge){try{Be.container.addComponent(ge)}catch(F){fe.debug(`Component ${ge.name} failed to register with FirebaseApp ${Be.name}`,F)}}function nt(Be,ge){Be.container.addOrOverwriteComponent(ge)}function Ut(Be){const ge=Be.name;if(pe.has(ge))return fe.debug(`There were multiple attempts to register component ${ge}.`),!1;pe.set(ge,Be);for(const F of de.values())we(F,Be);for(const F of re.values())we(F,Be);return!0}function hn(Be,ge){const F=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return F&&F.triggerHeartbeat(),Be.container.getProvider(ge)}function dt(Be,ge,F=ie){hn(Be,ge).clearInstance(F)}function mn(Be){return void 0!==Be.options}function vt(Be){return void 0!==Be.settings}function Us(){pe.clear()}const sn=new le.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Jt{constructor(ge,F,V){this._isDeleted=!1,this._options=Object.assign({},ge),this._config=Object.assign({},F),this._name=F.name,this._automaticDataCollectionEnabled=F.automaticDataCollectionEnabled,this._container=V,this.container.addComponent(new He.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ge){this._isDeleted=ge}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}class Ci extends Jt{constructor(ge,F,V,H){const Z=void 0!==F.automaticDataCollectionEnabled&&F.automaticDataCollectionEnabled,K={name:V,automaticDataCollectionEnabled:Z};super(void 0!==ge.apiKey?ge:ge.options,K,H),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Z},F),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,F.releaseOnDeref=void 0,ao(Zn,jt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ge){this.isDeleted||(this._refCount++,void 0!==ge&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(ge,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){$o(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw sn.create("server-app-deleted")}}const as="10.14.1";function Za(Be,ge={}){let F=Be;"object"!=typeof ge&&(ge={name:ge});const V=Object.assign({name:ie,automaticDataCollectionEnabled:!1},ge),H=V.name;if("string"!=typeof H||!H)throw sn.create("bad-app-name",{appName:String(H)});if(F||(F=(0,le.T9)()),!F)throw sn.create("no-options");const Z=de.get(H);if(Z){if((0,le.bD)(F,Z.options)&&(0,le.bD)(V,Z.config))return Z;throw sn.create("duplicate-app",{appName:H})}const K=new He.h1(H);for(const ke of pe.values())K.addComponent(ke);const Ce=new Jt(F,V,K);return de.set(H,Ce),Ce}function bs(Be,ge){if((0,le.Bd)()&&!(0,le.p7)())throw sn.create("invalid-server-app-environment");let F;void 0===ge.automaticDataCollectionEnabled&&(ge.automaticDataCollectionEnabled=!1),F=mn(Be)?Be.options:Be;const V=Object.assign(Object.assign({},ge),F);if(void 0!==V.releaseOnDeref&&delete V.releaseOnDeref,void 0!==ge.releaseOnDeref&&typeof FinalizationRegistry>"u")throw sn.create("finalization-registry-not-supported",{});const Z=""+(Ln=JSON.stringify(V),[...Ln].reduce(($e,Un)=>Math.imul(31,$e)+Un.charCodeAt(0)|0,0)),K=re.get(Z);var Ln;if(K)return K.incRefCount(ge.releaseOnDeref),K;const Ce=new He.h1(Z);for(const Ln of pe.values())Ce.addComponent(Ln);const ke=new Ci(F,ge,Z,Ce);return re.set(Z,ke),ke}function oo(Be=ie){const ge=de.get(Be);if(!ge&&Be===ie&&(0,le.T9)())return Za();if(!ge)throw sn.create("no-app",{appName:Be});return ge}function Zd(){return Array.from(de.values())}function $o(Be){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,z.A)(function*(Be){let ge=!1;const F=Be.name;de.has(F)?(ge=!0,de.delete(F)):re.has(F)&&Be.decRefCount()<=0&&(re.delete(F),ge=!0),ge&&(yield Promise.all(Be.container.getProviders().map(V=>V.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function ao(Be,ge,F){var V;let H=null!==(V=ce[Be])&&void 0!==V?V:Be;F&&(H+=`-${F}`);const Z=H.match(/\s|\//),K=ge.match(/\s|\//);if(Z||K){const Ce=[`Unable to register library "${H}" with version "${ge}":`];return Z&&Ce.push(`library name "${H}" contains illegal characters (whitespace or "/")`),Z&&K&&Ce.push("and"),K&&Ce.push(`version name "${ge}" contains illegal characters (whitespace or "/")`),void fe.warn(Ce.join(" "))}Ut(new He.uA(`${H}-version`,()=>({library:H,version:ge}),"VERSION"))}function eh(Be,ge){if(null!==Be&&"function"!=typeof Be)throw sn.create("invalid-log-argument");(0,ze.Ey)(Be,ge)}function la(Be){(0,ze.He)(Be)}const ji="firebase-heartbeat-database",El=1,da="firebase-heartbeat-store";let As=null;function Yu(){return As||(As=(0,gn.P2)(ji,El,{upgrade:(Be,ge)=>{if(0===ge)try{Be.createObjectStore(da)}catch(F){console.warn(F)}}}).catch(Be=>{throw sn.create("idb-open",{originalErrorMessage:Be.message})})),As}function Ju(){return(Ju=(0,z.A)(function*(Be){try{const F=(yield Yu()).transaction(da),V=yield F.objectStore(da).get(th(Be));return yield F.done,V}catch(ge){if(ge instanceof le.g)fe.warn(ge.message);else{const F=sn.create("idb-get",{originalErrorMessage:ge?.message});fe.warn(F.message)}}})).apply(this,arguments)}function hi(Be,ge){return uo.apply(this,arguments)}function uo(){return(uo=(0,z.A)(function*(Be,ge){try{const V=(yield Yu()).transaction(da,"readwrite");yield V.objectStore(da).put(ge,th(Be)),yield V.done}catch(F){if(F instanceof le.g)fe.warn(F.message);else{const V=sn.create("idb-set",{originalErrorMessage:F?.message});fe.warn(V.message)}}})).apply(this,arguments)}function th(Be){return`${Be.name}!${Be.options.appId}`}class co{constructor(ge){this.container=ge,this._heartbeatsCache=null;const F=this.container.getProvider("app").getImmediate();this._storage=new eu(F),this._heartbeatsCachePromise=this._storage.read().then(V=>(this._heartbeatsCache=V,V))}triggerHeartbeat(){var ge=this;return(0,z.A)(function*(){var F,V;try{const Z=ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),K=zi();return null==(null===(F=ge._heartbeatsCache)||void 0===F?void 0:F.heartbeats)&&(ge._heartbeatsCache=yield ge._heartbeatsCachePromise,null==(null===(V=ge._heartbeatsCache)||void 0===V?void 0:V.heartbeats))||ge._heartbeatsCache.lastSentHeartbeatDate===K||ge._heartbeatsCache.heartbeats.some(Ce=>Ce.date===K)?void 0:(ge._heartbeatsCache.heartbeats.push({date:K,agent:Z}),ge._heartbeatsCache.heartbeats=ge._heartbeatsCache.heartbeats.filter(Ce=>{const ke=new Date(Ce.date).valueOf();return Date.now()-ke<=2592e6}),ge._storage.overwrite(ge._heartbeatsCache))}catch(H){fe.warn(H)}})()}getHeartbeatsHeader(){var ge=this;return(0,z.A)(function*(){var F;try{if(null===ge._heartbeatsCache&&(yield ge._heartbeatsCachePromise),null==(null===(F=ge._heartbeatsCache)||void 0===F?void 0:F.heartbeats)||0===ge._heartbeatsCache.heartbeats.length)return"";const V=zi(),{heartbeatsToSend:H,unsentEntries:Z}=function nh(Be,ge=1024){const F=[];let V=Be.slice();for(const H of Be){const Z=F.find(K=>K.agent===H.agent);if(Z){if(Z.dates.push(H.date),Bt(F)>ge){Z.dates.pop();break}}else if(F.push({agent:H.agent,dates:[H.date]}),Bt(F)>ge){F.pop();break}V=V.slice(1)}return{heartbeatsToSend:F,unsentEntries:V}}(ge._heartbeatsCache.heartbeats),K=(0,le.Uj)(JSON.stringify({version:2,heartbeats:H}));return ge._heartbeatsCache.lastSentHeartbeatDate=V,Z.length>0?(ge._heartbeatsCache.heartbeats=Z,yield ge._storage.overwrite(ge._heartbeatsCache)):(ge._heartbeatsCache.heartbeats=[],ge._storage.overwrite(ge._heartbeatsCache)),K}catch(V){return fe.warn(V),""}})()}}function zi(){return(new Date).toISOString().substring(0,10)}class eu{constructor(ge){this.app=ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,z.A)(function*(){return!!(0,le.zW)()&&(0,le.eX)().then(()=>!0).catch(()=>!1)})()}read(){var ge=this;return(0,z.A)(function*(){if(yield ge._canUseIndexedDBPromise){const V=yield function Bs(Be){return Ju.apply(this,arguments)}(ge.app);return V?.heartbeats?V:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ge){var F=this;return(0,z.A)(function*(){var V;if(yield F._canUseIndexedDBPromise){const Z=yield F.read();return hi(F.app,{lastSentHeartbeatDate:null!==(V=ge.lastSentHeartbeatDate)&&void 0!==V?V:Z.lastSentHeartbeatDate,heartbeats:ge.heartbeats})}})()}add(ge){var F=this;return(0,z.A)(function*(){var V;if(yield F._canUseIndexedDBPromise){const Z=yield F.read();return hi(F.app,{lastSentHeartbeatDate:null!==(V=ge.lastSentHeartbeatDate)&&void 0!==V?V:Z.lastSentHeartbeatDate,heartbeats:[...Z.heartbeats,...ge.heartbeats]})}})()}}function Bt(Be){return(0,le.Uj)(JSON.stringify({version:2,heartbeats:Be})).length}!function bl(Be){Ut(new He.uA("platform-logger",ge=>new Ze(ge),"PRIVATE")),Ut(new He.uA("heartbeat",ge=>new co(ge),"PRIVATE")),ao(Zn,jt,Be),ao(Zn,jt,"esm2017"),ao("fire-js","")}("")},779:(zo,ii,_t)=>{_t.d(ii,{h1:()=>Zn,uA:()=>ze});var z=_t(467),He=_t(401);class ze{constructor(fe,be,Je){this.name=fe,this.instanceFactory=be,this.type=Je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const le="[DEFAULT]";class gn{constructor(fe,be){this.name=fe,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const be=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(be)){const Je=new He.cY;if(this.instancesDeferred.set(be,Je),this.isInitialized(be)||this.shouldAutoInitialize())try{const Nt=this.getOrInitializeService({instanceIdentifier:be});Nt&&Je.resolve(Nt)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(fe){var be;const Je=this.normalizeInstanceIdentifier(fe?.identifier),Nt=null!==(be=fe?.optional)&&void 0!==be&&be;if(!this.isInitialized(Je)&&!this.shouldAutoInitialize()){if(Nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Je})}catch(zt){if(Nt)return null;throw zt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function qn(jt){return"EAGER"===jt.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[be,Je]of this.instancesDeferred.entries()){const Nt=this.normalizeInstanceIdentifier(be);try{const zt=this.getOrInitializeService({instanceIdentifier:Nt});Je.resolve(zt)}catch{}}}}clearInstance(fe=le){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,z.A)(function*(){const be=Array.from(fe.instances.values());yield Promise.all([...be.filter(Je=>"INTERNAL"in Je).map(Je=>Je.INTERNAL.delete()),...be.filter(Je=>"_delete"in Je).map(Je=>Je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=le){return this.instances.has(fe)}getOptions(fe=le){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:be={}}=fe,Je=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Je))throw Error(`${this.name}(${Je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Nt=this.getOrInitializeService({instanceIdentifier:Je,options:be});for(const[zt,Mr]of this.instancesDeferred.entries())Je===this.normalizeInstanceIdentifier(zt)&&Mr.resolve(Nt);return Nt}onInit(fe,be){var Je;const Nt=this.normalizeInstanceIdentifier(be),zt=null!==(Je=this.onInitCallbacks.get(Nt))&&void 0!==Je?Je:new Set;zt.add(fe),this.onInitCallbacks.set(Nt,zt);const Mr=this.instances.get(Nt);return Mr&&fe(Mr,Nt),()=>{zt.delete(fe)}}invokeOnInitCallbacks(fe,be){const Je=this.onInitCallbacks.get(be);if(Je)for(const Nt of Je)try{Nt(fe,be)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:be={}}){let Je=this.instances.get(fe);if(!Je&&this.component&&(Je=this.component.instanceFactory(this.container,{instanceIdentifier:(jt=fe,jt===le?void 0:jt),options:be}),this.instances.set(fe,Je),this.instancesOptions.set(fe,be),this.invokeOnInitCallbacks(Je,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Je)}catch{}var jt;return Je||null}normalizeInstanceIdentifier(fe=le){return this.component?this.component.multipleInstances?fe:le:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zn{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const be=this.getProvider(fe.name);if(be.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);be.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const be=new gn(fe,this);return this.providers.set(fe,be),be}getProviders(){return Array.from(this.providers.values())}}},398:(zo,ii,_t)=>{_t.d(ii,{$b:()=>He,Ey:()=>jt,He:()=>Zn,Vy:()=>qn});const z=[];var He=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(He||{});const ze={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},le=He.INFO,gn={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Ze=(fe,be,...Je)=>{if(be<fe.logLevel)return;const Nt=(new Date).toISOString(),zt=gn[be];if(!zt)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[zt](`[${Nt}]  ${fe.name}:`,...Je)};class qn{constructor(be){this.name=be,this._logLevel=le,this._logHandler=Ze,this._userLogHandler=null,z.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in He))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?ze[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...be),this._logHandler(this,He.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...be),this._logHandler(this,He.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,He.INFO,...be),this._logHandler(this,He.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,He.WARN,...be),this._logHandler(this,He.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...be),this._logHandler(this,He.ERROR,...be)}}function Zn(fe){z.forEach(be=>{be.setLogLevel(fe)})}function jt(fe,be){for(const Je of z){let Nt=null;be&&be.level&&(Nt=ze[be.level]),Je.userLogHandler=null===fe?null:(zt,Mr,...rn)=>{const yt=rn.map(pt=>{if(null==pt)return null;if("string"==typeof pt)return pt;if("number"==typeof pt||"boolean"==typeof pt)return pt.toString();if(pt instanceof Error)return pt.message;try{return JSON.stringify(pt)}catch{return null}}).filter(pt=>pt).join(" ");Mr>=(Nt??zt.logLevel)&&fe({level:He[Mr].toLowerCase(),message:yt,args:rn,type:zt.name})}}}},324:(zo,ii,_t)=>{var z=_t(467),He=_t(574),ze=_t(631),le=_t(401),gn=_t(398),Ze=_t(635),qn=_t(779);const jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Mr=function Nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},rn=function zt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new le.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ur=new gn.Vy("@firebase/auth");function Br(m,...d){ur.logLevel<=gn.$b.ERROR&&ur.error(`Auth (${ze.SDK_VERSION}): ${m}`,...d)}function dn(m,...d){throw Le(m,...d)}function Qt(m,...d){return Le(m,...d)}function jr(m,d,f){const y=Object.assign(Object.assign({},rn()),{[d]:f});return new le.FA("auth","Firebase",y).create(d,{appName:m.name})}function ot(m){return jr(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pe(m,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&dn(m,"argument-error"),jr(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(m,...d){if("string"!=typeof m){const f=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(f,...y)}return yt.create(m,...d)}function oe(m,d,...f){if(!m)throw Le(d,...f)}function Dt(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Br(d),new Error(d)}function Yt(m,d){m||Dt(d)}function cr(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Gn(){return"http:"===os()||"https:"===os()}function os(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class di{constructor(d,f){this.shortDelay=d,this.longDelay=f,Yt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,le.jZ)()||(0,le.lV)()}get(){return function lr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gn()||(0,le.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xa(m,d){Yt(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ie{static initialize(d,f,y){this.fetchImpl=d,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},de=new di(3e4,6e4);function re(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function pe(m,d,f,y){return we.apply(this,arguments)}function we(){return(we=(0,z.A)(function*(m,d,f,y,T={}){return nt(m,T,(0,z.A)(function*(){let S={},$={};y&&("GET"===d?$=y:S={body:JSON.stringify(y)});const Q=(0,le.Am)(Object.assign({key:m.config.apiKey},$)).slice(1),se=yield m._getAdditionalHeaders();se["Content-Type"]="application/json",m.languageCode&&(se["X-Firebase-Locale"]=m.languageCode);const Me=Object.assign({method:d,headers:se},S);return(0,le.c1)()||(Me.referrerPolicy="no-referrer"),ie.fetch()(mn(m,m.config.apiHost,f,Q),Me)}))})).apply(this,arguments)}function nt(m,d,f){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,z.A)(function*(m,d,f){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},ce),d);try{const T=new Us(m),S=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const $=yield S.json();if("needConfirmation"in $)throw qt(m,"account-exists-with-different-credential",$);if(S.ok&&!("errorMessage"in $))return $;{const Q=S.ok?$.errorMessage:$.error.message,[se,Me]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw qt(m,"credential-already-in-use",$);if("EMAIL_EXISTS"===se)throw qt(m,"email-already-in-use",$);if("USER_DISABLED"===se)throw qt(m,"user-disabled",$);const Ge=y[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(Me)throw jr(m,Ge,Me);dn(m,Ge)}}catch(T){if(T instanceof le.g)throw T;dn(m,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function hn(m,d,f,y){return dt.apply(this,arguments)}function dt(){return(dt=(0,z.A)(function*(m,d,f,y,T={}){const S=yield pe(m,d,f,y,T);return"mfaPendingCredential"in S&&dn(m,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function mn(m,d,f,y){const T=`${d}${f}?${y}`;return m.config.emulator?Xa(m.config,T):`${m.config.apiScheme}://${T}`}function vt(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Us{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(Qt(this.auth,"network-request-failed")),de.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(m,d,f){const y={appName:m.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const T=Qt(m,d,y);return T.customData._tokenResponse=f,T}function sn(m){return void 0!==m&&void 0!==m.getResponse}function Jt(m){return void 0!==m&&void 0!==m.enterprise}class Ci{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return vt(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Za(){return(Za=(0,z.A)(function*(m){return(yield pe(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bs(m,d){return oo.apply(this,arguments)}function oo(){return(oo=(0,z.A)(function*(m,d){return pe(m,"GET","/v2/recaptchaConfig",re(m,d))})).apply(this,arguments)}function $o(){return($o=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function ao(){return(ao=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function eh(m,d){return la.apply(this,arguments)}function la(){return(la=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ji(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function As(){return(As=(0,z.A)(function*(m,d=!1){const f=(0,le.Ku)(m),y=yield f.getIdToken(d),T=Bs(y);oe(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const S="object"==typeof T.firebase?T.firebase:void 0,$=S?.sign_in_provider;return{claims:T,token:y,authTime:ji(Yu(T.auth_time)),issuedAtTime:ji(Yu(T.iat)),expirationTime:ji(Yu(T.exp)),signInProvider:$||null,signInSecondFactor:S?.sign_in_second_factor||null}})).apply(this,arguments)}function Yu(m){return 1e3*Number(m)}function Bs(m){const[d,f,y]=m.split(".");if(void 0===d||void 0===f||void 0===y)return Br("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,le.u)(f);return T?JSON.parse(T):(Br("Failed to decode base64 JWT payload"),null)}catch(T){return Br("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Ju(m){const d=Bs(m);return oe(d,"internal-error"),oe(typeof d.exp<"u","internal-error"),oe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function hi(m,d){return uo.apply(this,arguments)}function uo(){return(uo=(0,z.A)(function*(m,d,f=!1){if(f)return d;try{return yield d}catch(y){throw y instanceof le.g&&function th({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class Tl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,z.A)(function*(){yield f.iteration()}),y)}iteration(){var d=this;return(0,z.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class wl{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function co(m){return zi.apply(this,arguments)}function zi(){return(zi=(0,z.A)(function*(m){var d;const f=m.auth,y=yield m.getIdToken(),T=yield hi(m,eh(f,{idToken:y}));oe(T?.users.length,f,"internal-error");const S=T.users[0];m._notifyReloadListener(S);const $=null!==(d=S.providerUserInfo)&&void 0!==d&&d.length?bl(S.providerUserInfo):[],Q=function Bt(m,d){return[...m.filter(y=>!d.some(T=>T.providerId===y.providerId)),...d]}(m.providerData,$),Ge=!!m.isAnonymous&&!(m.email&&S.passwordHash||Q?.length),qe={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:Q,metadata:new wl(S.createdAt,S.lastLoginAt),isAnonymous:Ge};Object.assign(m,qe)})).apply(this,arguments)}function eu(){return(eu=(0,z.A)(function*(m){const d=(0,le.Ku)(m);yield co(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function bl(m){return m.map(d=>{var{providerId:f}=d,y=(0,Ze.Tt)(d,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function ge(){return(ge=(0,z.A)(function*(m,d){const f=yield nt(m,{},(0,z.A)(function*(){const y=(0,le.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:T,apiKey:S}=m.config,$=mn(m,T,"/v1/token",`key=${S}`),Q=yield m._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()($,{method:"POST",headers:Q,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function V(){return(V=(0,z.A)(function*(m,d){return pe(m,"POST","/v2/accounts:revokeToken",re(m,d))})).apply(this,arguments)}class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){oe(d.idToken,"internal-error"),oe(typeof d.idToken<"u","internal-error"),oe(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Ju(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){oe(0!==d.length,"internal-error");const f=Ju(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var y=this;return(0,z.A)(function*(){return f||!y.accessToken||y.isExpired?(oe(y.refreshToken,d,"user-token-expired"),y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var y=this;return(0,z.A)(function*(){const{accessToken:T,refreshToken:S,expiresIn:$}=yield function Be(m,d){return ge.apply(this,arguments)}(d,f);y.updateTokensAndExpiration(T,S,Number($))})()}updateTokensAndExpiration(d,f,y){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,f){const{refreshToken:y,accessToken:T,expirationTime:S}=f,$=new H;return y&&(oe("string"==typeof y,"internal-error",{appName:d}),$.refreshToken=y),T&&(oe("string"==typeof T,"internal-error",{appName:d}),$.accessToken=T),S&&(oe("number"==typeof S,"internal-error",{appName:d}),$.expirationTime=S),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return Dt("not implemented")}}function Z(m,d){oe("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class K{constructor(d){var{uid:f,auth:y,stsTokenManager:T}=d,S=(0,Ze.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.providerData=S.providerData?[...S.providerData]:[],this.metadata=new wl(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,z.A)(function*(){const y=yield hi(f,f.stsTokenManager.getToken(f.auth,d));return oe(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(d){return function da(m){return As.apply(this,arguments)}(this,d)}reload(){return function nh(m){return eu.apply(this,arguments)}(this)}_assign(d){this!==d&&(oe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new K(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var y=this;return(0,z.A)(function*(){let T=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),T=!0),f&&(yield co(y)),yield y.auth._persistUserIfCurrent(y),T&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,z.A)(function*(){if((0,ze._isFirebaseServerApp)(d.auth.app))return Promise.reject(ot(d.auth));const f=yield d.getIdToken();return yield hi(d,function Zd(m,d){return $o.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var y,T,S,$,Q,se,Me,Ge;const qe=null!==(y=f.displayName)&&void 0!==y?y:void 0,Mn=null!==(T=f.email)&&void 0!==T?T:void 0,Eo=null!==(S=f.phoneNumber)&&void 0!==S?S:void 0,Sh=null!==($=f.photoURL)&&void 0!==$?$:void 0,bg=null!==(Q=f.tenantId)&&void 0!==Q?Q:void 0,Ql=null!==(se=f._redirectEventId)&&void 0!==se?se:void 0,Av=null!==(Me=f.createdAt)&&void 0!==Me?Me:void 0,hb=null!==(Ge=f.lastLoginAt)&&void 0!==Ge?Ge:void 0,{uid:Cv,emailVerified:fb,isAnonymous:Dv,providerData:Sv,stsTokenManager:Rv}=f;oe(Cv&&Rv,d,"internal-error");const aP=H.fromJSON(this.name,Rv);oe("string"==typeof Cv,d,"internal-error"),Z(qe,d.name),Z(Mn,d.name),oe("boolean"==typeof fb,d,"internal-error"),oe("boolean"==typeof Dv,d,"internal-error"),Z(Eo,d.name),Z(Sh,d.name),Z(bg,d.name),Z(Ql,d.name),Z(Av,d.name),Z(hb,d.name);const Pv=new K({uid:Cv,auth:d,email:Mn,emailVerified:fb,displayName:qe,isAnonymous:Dv,photoURL:Sh,phoneNumber:Eo,tenantId:bg,stsTokenManager:aP,createdAt:Av,lastLoginAt:hb});return Sv&&Array.isArray(Sv)&&(Pv.providerData=Sv.map(VB=>Object.assign({},VB))),Ql&&(Pv._redirectEventId=Ql),Pv}static _fromIdTokenResponse(d,f,y=!1){return(0,z.A)(function*(){const T=new H;T.updateFromServerResponse(f);const S=new K({uid:f.localId,auth:d,stsTokenManager:T,isAnonymous:y});return yield co(S),S})()}static _fromGetAccountInfoResponse(d,f,y){return(0,z.A)(function*(){const T=f.users[0];oe(void 0!==T.localId,"internal-error");const S=void 0!==T.providerUserInfo?bl(T.providerUserInfo):[],$=!(T.email&&T.passwordHash||S?.length),Q=new H;Q.updateFromIdToken(y);const se=new K({uid:T.localId,auth:d,stsTokenManager:Q,isAnonymous:$}),Me={uid:T.localId,displayName:T.displayName||null,photoURL:T.photoUrl||null,email:T.email||null,emailVerified:T.emailVerified||!1,phoneNumber:T.phoneNumber||null,tenantId:T.tenantId||null,providerData:S,metadata:new wl(T.createdAt,T.lastLoginAt),isAnonymous:!(T.email&&T.passwordHash||S?.length)};return Object.assign(se,Me),se})()}}const Ce=new Map;function ke(m){Yt(m instanceof Function,"Expected a class definition");let d=Ce.get(m);return d?(Yt(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Ce.set(m,d),d)}const $e=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,z.A)(function*(){return!0})()}_set(f,y){var T=this;return(0,z.A)(function*(){T.storage[f]=y})()}_get(f){var y=this;return(0,z.A)(function*(){const T=y.storage[f];return void 0===T?null:T})()}_remove(f){var y=this;return(0,z.A)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return m.type="NONE",m})();function Un(m,d,f){return`firebase:${m}:${d}:${f}`}class Bn{constructor(d,f,y){this.persistence=d,this.auth=f,this.userKey=y;const{config:T,name:S}=this.auth;this.fullUserKey=Un(this.userKey,T.apiKey,S),this.fullPersistenceKey=Un("persistence",T.apiKey,S),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,z.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?K._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,z.A)(function*(){if(f.persistence===d)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,y="authUser"){return(0,z.A)(function*(){if(!f.length)return new Bn(ke($e),d,y);const T=(yield Promise.all(f.map(function(){var Me=(0,z.A)(function*(Ge){if(yield Ge._isAvailable())return Ge});return function(Ge){return Me.apply(this,arguments)}}()))).filter(Me=>Me);let S=T[0]||ke($e);const $=Un(y,d.config.apiKey,d.name);let Q=null;for(const Me of f)try{const Ge=yield Me._get($);if(Ge){const qe=K._fromJSON(d,Ge);Me!==S&&(Q=qe),S=Me;break}}catch{}const se=T.filter(Me=>Me._shouldAllowMigration);return S._shouldAllowMigration&&se.length?(S=se[0],Q&&(yield S._set($,Q.toJSON())),yield Promise.all(f.map(function(){var Me=(0,z.A)(function*(Ge){if(Ge!==S)try{yield Ge._remove($)}catch{}});return function(Ge){return Me.apply(this,arguments)}}())),new Bn(S,d,y)):new Bn(S,d,y)})()}}function Rt(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(rh(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(lo(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(tw(d))return"Blackberry";if(qo(d))return"Webos";if(Xu(d))return"Safari";if((d.includes("chrome/")||ha(d))&&!d.includes("edge/"))return"Chrome";if(Al(d))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function lo(m=(0,le.ZQ)()){return/firefox\//i.test(m)}function Xu(m=(0,le.ZQ)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ha(m=(0,le.ZQ)()){return/crios\//i.test(m)}function rh(m=(0,le.ZQ)()){return/iemobile/i.test(m)}function Al(m=(0,le.ZQ)()){return/android/i.test(m)}function tw(m=(0,le.ZQ)()){return/blackberry/i.test(m)}function qo(m=(0,le.ZQ)()){return/webos/i.test(m)}function Ap(m=(0,le.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function ih(m=(0,le.ZQ)()){return Ap(m)||Al(m)||qo(m)||tw(m)||/windows phone/i.test(m)||rh(m)}function py(m,d=[]){let f;switch(m){case"Browser":f=Rt((0,le.ZQ)());break;case"Worker":f=`${Rt((0,le.ZQ)())}-${m}`;break;default:f=m}const y=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ze.SDK_VERSION}/${y}`}class uB{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const y=S=>new Promise(($,Q)=>{try{$(d(S))}catch(se){Q(se)}});y.onAbort=f,this.queue.push(y);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,z.A)(function*(){if(f.auth.currentUser===d)return;const y=[];try{for(const T of f.queue)yield T(d),T.onAbort&&y.push(T.onAbort)}catch(T){y.reverse();for(const S of y)try{S()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}function Cp(){return(Cp=(0,z.A)(function*(m,d={}){return pe(m,"GET","/v2/passwordPolicy",re(m,d))})).apply(this,arguments)}class Cl{constructor(d){var f,y,T,S;const $=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=$.minPasswordLength)&&void 0!==f?f:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(T=null===(y=d.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==T?T:"",this.forceUpgradeOnSignin=null!==(S=d.forceUpgradeOnSignin)&&void 0!==S&&S,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,y,T,S,$,Q;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,se),this.validatePasswordCharacterOptions(d,se),se.isValid&&(se.isValid=null===(f=se.meetsMinPasswordLength)||void 0===f||f),se.isValid&&(se.isValid=null===(y=se.meetsMaxPasswordLength)||void 0===y||y),se.isValid&&(se.isValid=null===(T=se.containsLowercaseLetter)||void 0===T||T),se.isValid&&(se.isValid=null===(S=se.containsUppercaseLetter)||void 0===S||S),se.isValid&&(se.isValid=null===($=se.containsNumericCharacter)||void 0===$||$),se.isValid&&(se.isValid=null===(Q=se.containsNonAlphanumericCharacter)||void 0===Q||Q),se}validatePasswordLengthOptions(d,f){const y=this.customStrengthOptions.minPasswordLength,T=this.customStrengthOptions.maxPasswordLength;y&&(f.meetsMinPasswordLength=d.length>=y),T&&(f.meetsMaxPasswordLength=d.length<=T)}validatePasswordCharacterOptions(d,f){let y;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let T=0;T<d.length;T++)y=d.charAt(T),this.updatePasswordCharacterOptionsStatuses(f,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(d,f,y,T,S){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=T)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=S))}}class Dl{constructor(d,f,y,T){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=y,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gy(this),this.idTokenSubscription=new gy(this),this.beforeStateQueue=new uB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(d,f){var y=this;return f&&(this._popupRedirectResolver=ke(f)),this._initializationPromise=this.queue((0,z.A)(function*(){var T,S;if(!y._deleted&&(y.persistenceManager=yield Bn.create(y,d),!y._deleted)){if(null!==(T=y._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(S=y.currentUser)||void 0===S?void 0:S.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,z.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,z.A)(function*(){try{const y=yield eh(f,{idToken:d}),T=yield K._fromGetAccountInfoResponse(f,y,d);yield f.directlySetCurrentUser(T)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,z.A)(function*(){var y;if((0,ze._isFirebaseServerApp)(f.app)){const Q=f.app.settings.authIdToken;return Q?new Promise(se=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Q).then(se,se))}):f.directlySetCurrentUser(null)}const T=yield f.assertedPersistence.getCurrentUser();let S=T,$=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Q=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,se=S?._redirectEventId,Me=yield f.tryRedirectSignIn(d);(!Q||Q===se)&&Me?.user&&(S=Me.user,$=!0)}if(!S)return f.directlySetCurrentUser(null);if(!S._redirectEventId){if($)try{yield f.beforeStateQueue.runMiddleware(S)}catch(Q){S=T,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Q))}return S?f.reloadAndSetCurrentUserOrClear(S):f.directlySetCurrentUser(null)}return oe(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===S._redirectEventId?f.directlySetCurrentUser(S):f.reloadAndSetCurrentUserOrClear(S)})()}tryRedirectSignIn(d){var f=this;return(0,z.A)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,z.A)(function*(){try{yield co(d)}catch(y){if("auth/network-request-failed"!==y?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ws(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,z.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,z.A)(function*(){if((0,ze._isFirebaseServerApp)(f.app))return Promise.reject(ot(f));const y=d?(0,le.Ku)(d):null;return y&&oe(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(d,f=!1){var y=this;return(0,z.A)(function*(){if(!y._deleted)return d&&oe(y.tenantId===d.tenantId,y,"tenant-id-mismatch"),f||(yield y.beforeStateQueue.runMiddleware(d)),y.queue((0,z.A)(function*(){yield y.directlySetCurrentUser(d),y.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,z.A)(function*(){return(0,ze._isFirebaseServerApp)(d.app)?Promise.reject(ot(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,ze._isFirebaseServerApp)(this.app)?Promise.reject(ot(this)):this.queue((0,z.A)(function*(){yield f.assertedPersistence.setPersistence(ke(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,z.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const y=f._getPasswordPolicyInternal();return y.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,z.A)(function*(){const f=yield function cB(m){return Cp.apply(this,arguments)}(d),y=new Cl(f);null===d.tenantId?d._projectPasswordPolicy=y:d._tenantPasswordPolicies[d.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new le.FA("auth","Firebase",d())}onAuthStateChanged(d,f,y){return this.registerStateListener(this.authStateSubscription,d,f,y)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,y){return this.registerStateListener(this.idTokenSubscription,d,f,y)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const y=this.onAuthStateChanged(()=>{y(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,z.A)(function*(){if(f.currentUser){const y=yield f.currentUser.getIdToken(),T={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:y};null!=f.tenantId&&(T.tenantId=f.tenantId),yield function F(m,d){return V.apply(this,arguments)}(f,T)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var y=this;return(0,z.A)(function*(){const T=yield y.getOrInitRedirectPersistenceManager(f);return null===d?T.removeCurrentUser():T.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,z.A)(function*(){if(!f.redirectPersistenceManager){const y=d&&ke(d)||f._popupRedirectResolver;oe(y,f,"argument-error"),f.redirectPersistenceManager=yield Bn.create(f,[ke(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,z.A)(function*(){var y,T;return f._isInitialized&&(yield f.queue((0,z.A)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===d?f._currentUser:(null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,z.A)(function*(){if(d===f.currentUser)return f.queue((0,z.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,y,T){if(this._deleted)return()=>{};const S="function"==typeof f?f:f.next.bind(f);let $=!1;const Q=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(Q,this,"internal-error"),Q.then(()=>{$||S(this.currentUser)}),"function"==typeof f){const se=d.addObserver(f,y,T);return()=>{$=!0,se()}}{const se=d.addObserver(f);return()=>{$=!0,se()}}}directlySetCurrentUser(d){var f=this;return(0,z.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=py(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,z.A)(function*(){var f;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const T=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();T&&(y["X-Firebase-Client"]=T);const S=yield d._getAppCheckToken();return S&&(y["X-Firebase-AppCheck"]=S),y})()}_getAppCheckToken(){var d=this;return(0,z.A)(function*(){var f;const y=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return y?.error&&function Ur(m,...d){ur.logLevel<=gn.$b.WARN&&ur.warn(`Auth (${ze.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Tn(m){return(0,le.Ku)(m)}class gy{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,le.tD)(f=>this.observer=f)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zu={loadJS:()=>(0,z.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rw(m){return Zu.loadJS(m)}function wn(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Dp{constructor(d){this.type="recaptcha-enterprise",this.auth=Tn(d)}verify(d="verify",f=!1){var y=this;return(0,z.A)(function*(){function S(){return S=(0,z.A)(function*(Q){if(!f){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var se=(0,z.A)(function*(Me,Ge){bs(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(qe=>{if(void 0!==qe.recaptchaKey){const Mn=new Ci(qe);return null==Q.tenantId?Q._agentRecaptchaConfig=Mn:Q._tenantRecaptchaConfigs[Q.tenantId]=Mn,Me(Mn.siteKey)}Ge(new Error("recaptcha Enterprise site key undefined"))}).catch(qe=>{Ge(qe)})});return function(Me,Ge){return se.apply(this,arguments)}}())}),S.apply(this,arguments)}function $(Q,se,Me){const Ge=window.grecaptcha;Jt(Ge)?Ge.enterprise.ready(()=>{Ge.enterprise.execute(Q,{action:d}).then(qe=>{se(qe)}).catch(()=>{se("NO_RECAPTCHA")})}):Me(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,se)=>{(function T(Q){return S.apply(this,arguments)})(y.auth).then(Me=>{if(!f&&Jt(window.grecaptcha))$(Me,Q,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));let Ge=function lB(){return Zu.recaptchaEnterpriseScript}();0!==Ge.length&&(Ge+=Me),rw(Ge).then(()=>{$(Me,Q,se)}).catch(qe=>{se(qe)})}}).catch(Me=>{se(Me)})})})()}}function iw(m,d,f){return my.apply(this,arguments)}function my(){return(my=(0,z.A)(function*(m,d,f,y=!1){const T=new Dp(m);let S;try{S=yield T.verify(f)}catch{S=yield T.verify(f,!0)}const $=Object.assign({},d);return Object.assign($,y?{captchaResp:S}:{captchaResponse:S}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function bn(m,d,f,y){return lt.apply(this,arguments)}function lt(){return lt=(0,z.A)(function*(m,d,f,y){var T;if(null!==(T=m._getRecaptchaConfig())&&void 0!==T&&T.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const S=yield iw(m,d,f,"getOobCode"===f);return y(m,S)}return y(m,d).catch(function(){var S=(0,z.A)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Q=yield iw(m,d,f,"getOobCode"===f);return y(m,Q)}return Promise.reject($)});return function($){return S.apply(this,arguments)}}())}),lt.apply(this,arguments)}function pa(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function hR(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class sh{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Dt("not implemented")}_getIdTokenResponse(d){return Dt("not implemented")}_linkToIdToken(d,f){return Dt("not implemented")}_getReauthenticationResolver(d){return Dt("not implemented")}}function sw(m,d){return ow.apply(this,arguments)}function ow(){return(ow=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:resetPassword",re(m,d))})).apply(this,arguments)}function aw(){return(aw=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Cs(m,d){return at.apply(this,arguments)}function at(){return(at=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function uw(){return(uw=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",re(m,d))})).apply(this,arguments)}function mB(m,d){return cw.apply(this,arguments)}function cw(){return(cw=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithPassword",re(m,d))})).apply(this,arguments)}function _y(m,d){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:sendOobCode",re(m,d))})).apply(this,arguments)}function js(){return(js=(0,z.A)(function*(m,d){return _y(m,d)})).apply(this,arguments)}function Rp(m,d){return yy.apply(this,arguments)}function yy(){return(yy=(0,z.A)(function*(m,d){return _y(m,d)})).apply(this,arguments)}function lw(m,d){return vy.apply(this,arguments)}function vy(){return(vy=(0,z.A)(function*(m,d){return _y(m,d)})).apply(this,arguments)}function Rl(){return(Rl=(0,z.A)(function*(m,d){return _y(m,d)})).apply(this,arguments)}function xp(){return(xp=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithEmailLink",re(m,d))})).apply(this,arguments)}function Ae(){return(Ae=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithEmailLink",re(m,d))})).apply(this,arguments)}class ec extends sh{constructor(d,f,y,T=null){super("password",y),this._email=d,this._password=f,this._tenantId=T}static _fromEmailAndPassword(d,f){return new ec(d,f,"password")}static _fromEmailAndCode(d,f,y=null){return new ec(d,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,z.A)(function*(){switch(f.signInMethod){case"password":return bn(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",mB);case"emailLink":return function Iy(m,d){return xp.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:dn(d,"internal-error")}})()}_linkToIdToken(d,f){var y=this;return(0,z.A)(function*(){switch(y.signInMethod){case"password":return bn(d,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Cs);case"emailLink":return function pR(m,d){return Ae.apply(this,arguments)}(d,{idToken:f,email:y._email,oobCode:y._password});default:dn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ho(m,d){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithIdp",re(m,d))})).apply(this,arguments)}class Go extends sh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Go(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):dn("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:T}=f,S=(0,Ze.Tt)(f,["providerId","signInMethod"]);if(!y||!T)return null;const $=new Go(y,T);return $.idToken=S.idToken||void 0,$.accessToken=S.accessToken||void 0,$.secret=S.secret,$.nonce=S.nonce,$.pendingToken=S.pendingToken||null,$}_getIdTokenResponse(d){return ho(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,ho(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ho(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,le.Am)(f)}return d}}function dw(){return(dw=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:sendVerificationCode",re(m,d))})).apply(this,arguments)}function hw(){return(hw=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,d))})).apply(this,arguments)}function oh(){return(oh=(0,z.A)(function*(m,d){const f=yield hn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,d));if(f.temporaryProof)throw qt(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ah={USER_NOT_FOUND:"user-not-found"};function uh(){return(uh=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ah)})).apply(this,arguments)}class nu extends sh{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new nu({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new nu({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function yB(m,d){return hw.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function vB(m,d){return oh.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function wy(m,d){return uh.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:y,verificationCode:T}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:y,code:T}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:y,phoneNumber:T,temporaryProof:S}=d;return y||f||T||S?new nu({verificationId:f,verificationCode:y,phoneNumber:T,temporaryProof:S}):null}}class Pl{constructor(d){var f,y,T,S,$,Q;const se=(0,le.I9)((0,le.hp)(d)),Me=null!==(f=se.apiKey)&&void 0!==f?f:null,Ge=null!==(y=se.oobCode)&&void 0!==y?y:null,qe=function ga(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=se.mode)&&void 0!==T?T:null);oe(Me&&Ge&&qe,"argument-error"),this.apiKey=Me,this.operation=qe,this.code=Ge,this.continueUrl=null!==(S=se.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==($=se.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(Q=se.tenantId)&&void 0!==Q?Q:null}static parseLink(d){const f=function ch(m){const d=(0,le.I9)((0,le.hp)(m)).link,f=d?(0,le.I9)((0,le.hp)(d)).deep_link_id:null,y=(0,le.I9)((0,le.hp)(m)).deep_link_id;return(y?(0,le.I9)((0,le.hp)(y)).link:null)||y||f||d||m}(d);try{return new Pl(f)}catch{return null}}}let on=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,y){return ec._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const T=Pl.parseLink(y);return oe(T,"argument-error"),ec._fromEmailAndCode(f,T.code,T.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class ru{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class xl extends ru{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ml extends xl{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return oe("providerId"in f&&"signInMethod"in f,"argument-error"),Go._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return oe(d.idToken||d.accessToken,"argument-error"),Go._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ml.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ml.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:T,pendingToken:S,nonce:$,providerId:Q}=d;if(!y&&!T&&!f&&!S||!Q)return null;try{return new Ml(Q)._credential({idToken:f,accessToken:y,nonce:$,pendingToken:S})}catch{return null}}}let gR=(()=>{class m extends xl{constructor(){super("facebook.com")}static credential(f){return Go._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),fw=(()=>{class m extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return Go._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:T}=f;if(!y&&!T)return null;try{return m.credential(y,T)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Np=(()=>{class m extends xl{constructor(){super("github.com")}static credential(f){return Go._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class iu extends sh{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return ho(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,ho(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ho(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:T,pendingToken:S}=f;return y&&T&&S&&y===T?new iu(y,S):null}static _create(d,f){return new iu(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fi extends ru{constructor(d){oe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return fi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return fi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=iu.fromJSON(d);return oe(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:y}=d;if(!f||!y)return null;try{return iu._create(y,f)}catch{return null}}}let by=(()=>{class m extends xl{constructor(){super("twitter.com")}static credential(f,y){return Go._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:T}=f;if(!y||!T)return null;try{return m.credential(y,T)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function mR(m,d){return gw.apply(this,arguments)}function gw(){return(gw=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signUp",re(m,d))})).apply(this,arguments)}class Di{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,y,T=!1){return(0,z.A)(function*(){const S=yield K._fromIdTokenResponse(d,y,T),$=kp(y);return new Di({user:S,providerId:$,_tokenResponse:y,operationType:f})})()}static _forOperation(d,f,y){return(0,z.A)(function*(){yield d._updateTokensIfNecessary(y,!0);const T=kp(y);return new Di({user:d,providerId:T,_tokenResponse:y,operationType:f})})()}}function kp(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Ay(){return(Ay=(0,z.A)(function*(m){var d;if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const f=Tn(m);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Di({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield mR(f,{returnSecureToken:!0}),T=yield Di._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class Vp extends le.g{constructor(d,f,y,T){var S;super(f.code,f.message),this.operationType=y,this.user=T,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:d.name,tenantId:null!==(S=d.tenantId)&&void 0!==S?S:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,f,y,T){return new Vp(d,f,y,T)}}function mw(m,d,f,y){return("reauthenticate"===d?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?Vp._fromErrorAndOperation(m,S,d,y):S})}function Cy(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Dy(){return Dy=(0,z.A)(function*(m,d){const f=(0,le.Ku)(m);yield Se(!0,f,d);const{providerUserInfo:y}=yield function Qu(m,d){return ao.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),T=Cy(y||[]);return f.providerData=f.providerData.filter(S=>T.has(S.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Dy.apply(this,arguments)}function Ho(m,d){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,z.A)(function*(m,d,f=!1){const y=yield hi(m,d._linkToIdToken(m.auth,yield m.getIdToken()),f);return Di._forOperation(m,"link",y)})).apply(this,arguments)}function Se(m,d,f){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,z.A)(function*(m,d,f){yield co(d);const T=!1===m?"provider-already-linked":"no-such-provider";oe(Cy(d.providerData).has(f)===m,d.auth,T)})).apply(this,arguments)}function Y(m,d){return kl.apply(this,arguments)}function kl(){return(kl=(0,z.A)(function*(m,d,f=!1){const{auth:y}=m;if((0,ze._isFirebaseServerApp)(y.app))return Promise.reject(ot(y));const T="reauthenticate";try{const S=yield hi(m,mw(y,T,d,m),f);oe(S.idToken,y,"internal-error");const $=Bs(S.idToken);oe($,y,"internal-error");const{sub:Q}=$;return oe(m.uid===Q,y,"user-mismatch"),Di._forOperation(m,T,S)}catch(S){throw"auth/user-not-found"===S?.code&&dn(y,"user-mismatch"),S}})).apply(this,arguments)}function Lp(m,d){return tc.apply(this,arguments)}function tc(){return(tc=(0,z.A)(function*(m,d,f=!1){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y="signIn",T=yield mw(m,y,d),S=yield Di._fromIdTokenResponse(m,y,T);return f||(yield m._updateCurrentUser(S.user)),S})).apply(this,arguments)}function Up(m,d){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,z.A)(function*(m,d){return Lp(Tn(m),d)})).apply(this,arguments)}function _w(m,d){return Py.apply(this,arguments)}function Py(){return(Py=(0,z.A)(function*(m,d){const f=(0,le.Ku)(m);return yield Se(!1,f,d.providerId),Ho(f,d)})).apply(this,arguments)}function Ol(m,d){return xy.apply(this,arguments)}function xy(){return(xy=(0,z.A)(function*(m,d){return Y((0,le.Ku)(m),d)})).apply(this,arguments)}function My(){return(My=(0,z.A)(function*(m,d){return hn(m,"POST","/v1/accounts:signInWithCustomToken",re(m,d))})).apply(this,arguments)}function Ny(){return Ny=(0,z.A)(function*(m,d){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const f=Tn(m),y=yield function Bp(m,d){return My.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),T=yield Di._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(T.user),T}),Ny.apply(this,arguments)}class si{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?su._fromServerResponse(d,f):"totpInfo"in f?jp._fromServerResponse(d,f):dn(d,"internal-error")}}class su extends si{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new su(f)}}class jp extends si{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new jp(f)}}function rc(m,d,f){var y;oe((null===(y=f.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),oe(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(oe(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(oe(f.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Vl(m){return lh.apply(this,arguments)}function lh(){return(lh=(0,z.A)(function*(m){const d=Tn(m);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function zp(){return(zp=(0,z.A)(function*(m,d,f){const y=Tn(m),T={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&rc(y,T,f),yield bn(y,T,"getOobCode",Rp)})).apply(this,arguments)}function qi(){return qi=(0,z.A)(function*(m,d,f){yield sw((0,le.Ku)(m),{oobCode:d,newPassword:f}).catch(function(){var y=(0,z.A)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Vl(m),T});return function(T){return y.apply(this,arguments)}}())}),qi.apply(this,arguments)}function ou(){return ou=(0,z.A)(function*(m,d){yield function gB(m,d){return uw.apply(this,arguments)}((0,le.Ku)(m),{oobCode:d})}),ou.apply(this,arguments)}function _R(m,d){return $p.apply(this,arguments)}function $p(){return($p=(0,z.A)(function*(m,d){const f=(0,le.Ku)(m),y=yield sw(f,{oobCode:d}),T=y.requestType;switch(oe(T,f,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(y.mfaInfo,f,"internal-error");default:oe(y.email,f,"internal-error")}let S=null;return y.mfaInfo&&(S=si._fromServerResponse(Tn(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:S},operation:T}})).apply(this,arguments)}function Gt(){return(Gt=(0,z.A)(function*(m,d){const{data:f}=yield _R((0,le.Ku)(m),d);return f.email})).apply(this,arguments)}function qp(){return(qp=(0,z.A)(function*(m,d,f){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y=Tn(m),$=yield bn(y,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mR).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&Vl(m),se}),Q=yield Di._fromIdTokenResponse(y,"signIn",$);return yield y._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function Fl(){return(Fl=(0,z.A)(function*(m,d,f){const y=Tn(m),T={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function S($,Q){oe(Q.handleCodeInApp,y,"argument-error"),Q&&rc(y,$,Q)})(T,f),yield bn(y,T,"getOobCode",lw)})).apply(this,arguments)}function Vy(){return(Vy=(0,z.A)(function*(m,d,f){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y=(0,le.Ku)(m),T=on.credentialWithLink(d,f||cr());return oe(T._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Up(y,T)})).apply(this,arguments)}function Hp(){return(Hp=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:createAuthUri",re(m,d))})).apply(this,arguments)}function ic(){return ic=(0,z.A)(function*(m,d){const y={identifier:d,continueUri:Gn()?cr():"http://localhost"},{signinMethods:T}=yield function Fy(m,d){return Hp.apply(this,arguments)}((0,le.Ku)(m),y);return T||[]}),ic.apply(this,arguments)}function Wp(){return Wp=(0,z.A)(function*(m,d){const f=(0,le.Ku)(m),T={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&rc(f.auth,T,d);const{email:S}=yield function _B(m,d){return js.apply(this,arguments)}(f.auth,T);S!==m.email&&(yield m.reload())}),Wp.apply(this,arguments)}function dh(){return dh=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};f&&rc(y.auth,S,f);const{email:$}=yield function Pp(m,d){return Rl.apply(this,arguments)}(y.auth,S);$!==m.email&&(yield m.reload())}),dh.apply(this,arguments)}function Ly(){return(Ly=(0,z.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Uy(){return Uy=(0,z.A)(function*(m,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const y=(0,le.Ku)(m),S={idToken:yield y.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},$=yield hi(y,function vR(m,d){return Ly.apply(this,arguments)}(y.auth,S));y.displayName=$.displayName||null,y.photoURL=$.photoUrl||null;const Q=y.providerData.find(({providerId:se})=>"password"===se);Q&&(Q.displayName=y.displayName,Q.photoURL=y.photoURL),yield y._updateTokensIfNecessary($)}),Uy.apply(this,arguments)}function Ew(m,d,f){return By.apply(this,arguments)}function By(){return By=(0,z.A)(function*(m,d,f){const{auth:y}=m,S={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(S.email=d),f&&(S.password=f);const $=yield hi(m,function fR(m,d){return aw.apply(this,arguments)}(y,S));yield m._updateTokensIfNecessary($,!0)}),By.apply(this,arguments)}class sc{constructor(d,f,y={}){this.isNewUser=d,this.providerId=f,this.profile=y}}class Tw extends sc{constructor(d,f,y,T){super(d,f,y),this.username=T}}class TR extends sc{constructor(d,f){super(d,"facebook.com",f)}}class wR extends Tw{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class er extends sc{constructor(d,f){super(d,"google.com",f)}}class bR extends Tw{constructor(d,f,y){super(d,"twitter.com",f,y)}}function AR(m){const{user:d,_tokenResponse:f}=m;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ER(m){var d,f;if(!m)return null;const{providerId:y}=m,T=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},S=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const $=null===(f=null===(d=Bs(m.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if($)return new sc(S,"anonymous"!==$&&"custom"!==$?$:null)}if(!y)return null;switch(y){case"facebook.com":return new TR(S,T);case"github.com":return new wR(S,T);case"google.com":return new er(S,T);case"twitter.com":return new bR(S,T,m.screenName||null);case"custom":case"anonymous":return new sc(S,null);default:return new sc(S,y,T)}}(f)}class ac{constructor(d,f,y){this.type=d,this.credential=f,this.user=y}static _fromIdtoken(d,f){return new ac("enroll",d,f)}static _fromMfaPendingCredential(d){return new ac("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,y;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return ac._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(y=d.multiFactorSession)&&void 0!==y&&y.idToken)return ac._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ma{constructor(d,f,y){this.session=d,this.hints=f,this.signInResolver=y}static _fromError(d,f){const y=Tn(d),T=f.customData._serverResponse,S=(T.mfaInfo||[]).map(Q=>si._fromServerResponse(y,Q));oe(T.mfaPendingCredential,y,"internal-error");const $=ac._fromMfaPendingCredential(T.mfaPendingCredential);return new ma($,S,function(){var Q=(0,z.A)(function*(se){const Me=yield se._process(y,$);delete T.mfaInfo,delete T.mfaPendingCredential;const Ge=Object.assign(Object.assign({},T),{idToken:Me.idToken,refreshToken:Me.refreshToken});switch(f.operationType){case"signIn":const qe=yield Di._fromIdTokenResponse(y,f.operationType,Ge);return yield y._updateCurrentUser(qe.user),qe;case"reauthenticate":return oe(f.user,y,"internal-error"),Di._forOperation(f.user,f.operationType,Ge);default:dn(y,"internal-error")}});return function(se){return Q.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,z.A)(function*(){return f.signInResolver(d)})()}}class Hy{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>si._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new Hy(d)}getSession(){var d=this;return(0,z.A)(function*(){return ac._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var y=this;return(0,z.A)(function*(){const T=d,S=yield y.getSession(),$=yield hi(y.user,T._process(y.user.auth,S,f));return yield y.user._updateTokensIfNecessary($),y.user.reload()})()}unenroll(d){var f=this;return(0,z.A)(function*(){const y="string"==typeof d?d:d.uid,T=yield f.user.getIdToken();try{const S=yield hi(f.user,function Gy(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:withdraw",re(m,d))}(f.user.auth,{idToken:T,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:$})=>$!==y),yield f.user._updateTokensIfNecessary(S),yield f.user.reload()}catch(S){throw S}})()}}const hh=new WeakMap,fh="__sak";class cu{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kp=(()=>{class m extends cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ih(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const T=this.storage.getItem(y),S=this.localCache[y];T!==S&&f(y,S,T)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((Q,se,Me)=>{this.notifyListeners(Q,Me)});const T=f.key;y?this.detachListener():this.stopPolling();const S=()=>{const Q=this.storage.getItem(T);!y&&this.localCache[T]===Q||this.notifyListeners(T,Q)},$=this.storage.getItem(T);!function tu(){return(0,le.lT)()&&10===document.documentMode}()||$===f.newValue||f.newValue===f.oldValue?S():setTimeout(S,10)}notifyListeners(f,y){this.localCache[f]=y;const T=this.listeners[f];if(T)for(const S of Array.from(T))S(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var T=()=>super._set,S=this;return(0,z.A)(function*(){yield T().call(S,f,y),S.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,T=this;return(0,z.A)(function*(){const S=yield y().call(T,f);return T.localCache[f]=JSON.stringify(S),S})()}_remove(f){var y=()=>super._remove,T=this;return(0,z.A)(function*(){yield y().call(T,f),delete T.localCache[f]})()}}return m.type="LOCAL",m})(),mo=(()=>{class m extends cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return m.type="SESSION",m})();let Ll=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(S=>S.isListeningto(f));if(y)return y;const T=new m(f);return this.receivers.push(T),T}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,z.A)(function*(){const T=f,{eventId:S,eventType:$,data:Q}=T.data,se=y.handlersMap[$];if(!se?.size)return;T.ports[0].postMessage({status:"ack",eventId:S,eventType:$});const Me=Array.from(se).map(function(){var qe=(0,z.A)(function*(Mn){return Mn(T.origin,Q)});return function(Mn){return qe.apply(this,arguments)}}()),Ge=yield function Hi(m){return Promise.all(m.map(function(){var d=(0,z.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return d.apply(this,arguments)}}()))}(Me);T.ports[0].postMessage({status:"done",eventId:S,eventType:$,response:Ge})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function uc(m="",d=10){let f="";for(let y=0;y<d;y++)f+=Math.floor(10*Math.random());return m+f}class PR{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,y=50){var T=this;return(0,z.A)(function*(){const S=typeof MessageChannel<"u"?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let $,Q;return new Promise((se,Me)=>{const Ge=uc("",20);S.port1.start();const qe=setTimeout(()=>{Me(new Error("unsupported_event"))},y);Q={messageChannel:S,onMessage(Mn){const Eo=Mn;if(Eo.data.eventId===Ge)switch(Eo.data.status){case"ack":clearTimeout(qe),$=setTimeout(()=>{Me(new Error("timeout"))},3e3);break;case"done":clearTimeout($),se(Eo.data.response);break;default:clearTimeout(qe),clearTimeout($),Me(new Error("invalid_response"))}}},T.handlers.add(Q),S.port1.addEventListener("message",Q.onMessage),T.target.postMessage({eventType:d,eventId:Ge,data:f},[S.port2])}).finally(()=>{Q&&T.removeMessageHandler(Q)})})()}}function Nr(){return window}function lu(){return typeof Nr().WorkerGlobalScope<"u"&&"function"==typeof Nr().importScripts}function Qy(){return(Qy=(0,z.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _o="firebaseLocalStorageDb",Ul="firebaseLocalStorage",cc="fbase_key";class ph{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Qp(m,d){return m.transaction([Ul],d?"readwrite":"readonly").objectStore(Ul)}function Yp(){const m=indexedDB.open(_o,1);return new Promise((d,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Ul,{keyPath:cc})}catch(T){f(T)}}),m.addEventListener("success",(0,z.A)(function*(){const y=m.result;y.objectStoreNames.contains(Ul)?d(y):(y.close(),yield function qr(){const m=indexedDB.deleteDatabase(_o);return new ph(m).toPromise()}(),d(yield Yp()))}))})}function Rw(m,d,f){return lc.apply(this,arguments)}function lc(){return(lc=(0,z.A)(function*(m,d,f){const y=Qp(m,!0).put({[cc]:d,value:f});return new ph(y).toPromise()})).apply(this,arguments)}function Jy(){return(Jy=(0,z.A)(function*(m,d){const f=Qp(m,!1).get(d),y=yield new ph(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Pw(m,d){const f=Qp(m,!0).delete(d);return new ph(f).toPromise()}const du=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,z.A)(function*(){return f.db||(f.db=yield Yp()),f.db})()}_withRetries(f){var y=this;return(0,z.A)(function*(){let T=0;for(;;)try{const S=yield y._openDb();return yield f(S)}catch(S){if(T++>3)throw S;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,z.A)(function*(){return lu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,z.A)(function*(){f.receiver=Ll._getInstance(function Yy(){return lu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,z.A)(function*(T,S){return{keyProcessed:(yield f._poll()).includes(S.key)}});return function(T,S){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,z.A)(function*(T,S){return["keyChanged"]});return function(T,S){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,z.A)(function*(){var y,T;if(f.activeServiceWorker=yield function xR(){return Qy.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new PR(f.activeServiceWorker);const S=yield f.sender._send("ping",{},800);S&&null!==(y=S[0])&&void 0!==y&&y.fulfilled&&null!==(T=S[0])&&void 0!==T&&T.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,z.A)(function*(){if(y.sender&&y.activeServiceWorker&&function MR(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,z.A)(function*(){try{if(!indexedDB)return!1;const f=yield Yp();return yield Rw(f,fh,"1"),yield Pw(f,fh),!0}catch{}return!1})()}_withPendingWrite(f){var y=this;return(0,z.A)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var T=this;return(0,z.A)(function*(){return T._withPendingWrite((0,z.A)(function*(){return yield T._withRetries(S=>Rw(S,f,y)),T.localCache[f]=y,T.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,z.A)(function*(){const T=yield y._withRetries(S=>function NR(m,d){return Jy.apply(this,arguments)}(S,f));return y.localCache[f]=T,T})()}_remove(f){var y=this;return(0,z.A)(function*(){return y._withPendingWrite((0,z.A)(function*(){return yield y._withRetries(T=>Pw(T,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,z.A)(function*(){const y=yield f._withRetries($=>{const Q=Qp($,!1).getAll();return new ph(Q).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const T=[],S=new Set;if(0!==y.length)for(const{fbase_key:$,value:Q}of y)S.add($),JSON.stringify(f.localCache[$])!==JSON.stringify(Q)&&(f.notifyListeners($,Q),T.push($));for(const $ of Object.keys(f.localCache))f.localCache[$]&&!S.has($)&&(f.notifyListeners($,null),T.push($));return T})()}notifyListeners(f,y){this.localCache[f]=y;const T=this.listeners[f];if(T)for(const S of Array.from(T))S(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,z.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),us=1e12;class gi{constructor(d){this.auth=d,this.counter=us,this._widgets=new Map}render(d,f){const y=this.counter;return this._widgets.set(y,new Wi(d,this.auth.name,f||{})),this.counter++,y}reset(d){var f;const y=d||us;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(d){var f;return(null===(f=this._widgets.get(d||us))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,z.A)(function*(){var y;return null===(y=f._widgets.get(d||us))||void 0===y||y.execute(),""})()}}class Wi{constructor(d,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof d?document.getElementById(d):d;oe(T,"argument-error",{appName:f}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bl(m){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xn=wn("rcb"),Or=new di(3e4,6e4);class Ko{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Nr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return oe(function gt(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&sn(Nr().grecaptcha)?Promise.resolve(Nr().grecaptcha):new Promise((y,T)=>{const S=Nr().setTimeout(()=>{T(Qt(d,"network-request-failed"))},Or.get());Nr()[xn]=()=>{Nr().clearTimeout(S),delete Nr()[xn];const Q=Nr().grecaptcha;if(!Q||!sn(Q))return void T(Qt(d,"internal-error"));const se=Q.render;Q.render=(Me,Ge)=>{const qe=se(Me,Ge);return this.counter++,qe},this.hostLanguage=f,y(Q)},rw(`${function Hn(){return Zu.recaptchaV2Script}()}?${(0,le.Am)({onload:xn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(S),T(Qt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Nr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gh{load(d){return(0,z.A)(function*(){return new gi(d)})()}clearedOneInstance(){}}const Xy="recaptcha",jl={theme:"light",type:"image"};class nr{constructor(d,f,y=Object.assign({},jl)){this.parameters=y,this.type=Xy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tn(d),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;oe(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gh:new Ko,this.validateStartingState()}verify(){var d=this;return(0,z.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(f)||new Promise(S=>{const $=Q=>{Q&&(d.tokenChangeListeners.delete($),S(Q))};d.tokenChangeListeners.add($),d.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof d)d(f);else if("string"==typeof d){const y=Nr()[d];"function"==typeof y&&y(f)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,z.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,z.A)(function*(){oe(Gn()&&!lu(),d.auth,"internal-error"),yield function dc(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function as(m){return Za.apply(this,arguments)}(d.auth);oe(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hu{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=nu._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function fu(){return(fu=(0,z.A)(function*(m,d,f){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y=Tn(m),T=yield Ye(y,d,(0,le.Ku)(f));return new hu(T,S=>Up(y,S))})).apply(this,arguments)}function Qo(){return(Qo=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);yield Se(!1,y,"phone");const T=yield Ye(y.auth,d,(0,le.Ku)(f));return new hu(T,S=>_w(y,S))})).apply(this,arguments)}function cs(){return(cs=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);if((0,ze._isFirebaseServerApp)(y.auth.app))return Promise.reject(ot(y.auth));const T=yield Ye(y.auth,d,(0,le.Ku)(f));return new hu(T,S=>Ol(y,S))})).apply(this,arguments)}function Ye(m,d,f){return mh.apply(this,arguments)}function mh(){return mh=(0,z.A)(function*(m,d,f){var y;const T=yield f.verify();try{let S;if(oe("string"==typeof T,m,"argument-error"),oe(f.type===Xy,m,"argument-error"),S="string"==typeof d?{phoneNumber:d}:d,"session"in S){const $=S.session;if("phoneNumber"in S)return oe("enroll"===$.type,m,"internal-error"),(yield function $y(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:start",re(m,d))}(m,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{oe("signin"===$.type,m,"internal-error");const Q=(null===(y=S.multiFactorHint)||void 0===y?void 0:y.uid)||S.multiFactorUid;return oe(Q,m,"missing-multi-factor-info"),(yield function Jp(m,d){return pe(m,"POST","/v2/accounts/mfaSignIn:start",re(m,d))}(m,{mfaPendingCredential:$.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Ty(m,d){return dw.apply(this,arguments)}(m,{phoneNumber:S.phoneNumber,recaptchaToken:T});return $}}finally{f._reset()}}),mh.apply(this,arguments)}function zs(){return(zs=(0,z.A)(function*(m,d){const f=(0,le.Ku)(m);if((0,ze._isFirebaseServerApp)(f.auth.app))return Promise.reject(ot(f.auth));yield Ho(f,d)})).apply(this,arguments)}let pu=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Tn(f)}verifyPhoneNumber(f,y){return Ye(this.auth,f,(0,le.Ku)(y))}static credential(f,y){return nu._fromVerification(f,y)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:T}=f;return y&&T?nu._fromTokenResponse(y,T):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function $s(m,d){return d?ke(d):(oe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class dr extends sh{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ho(d,this._buildIdpRequest())}_linkToIdToken(d,f){return ho(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return ho(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Zp(m){return Lp(m.auth,new dr(m),m.bypassAuthState)}function Gr(m){const{auth:d,user:f}=m;return oe(f,d,"internal-error"),Y(f,new dr(m),m.bypassAuthState)}function Ri(m){return yh.apply(this,arguments)}function yh(){return(yh=(0,z.A)(function*(m){const{auth:d,user:f}=m;return oe(f,d,"internal-error"),Ho(f,new dr(m),m.bypassAuthState)})).apply(this,arguments)}class gu{constructor(d,f,y,T,S=!1){this.auth=d,this.resolver=y,this.user=T,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,z.A)(function*(y,T){d.pendingPromise={resolve:y,reject:T};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(S){d.reject(S)}});return function(y,T){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,z.A)(function*(){const{urlResponse:y,sessionId:T,postBody:S,tenantId:$,error:Q,type:se}=d;if(Q)return void f.reject(Q);const Me={auth:f.auth,requestUri:y,sessionId:T,tenantId:$||void 0,postBody:S||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(se)(Me))}catch(Ge){f.reject(Ge)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Zp;case"linkViaPopup":case"linkViaRedirect":return Ri;case"reauthViaPopup":case"reauthViaRedirect":return Gr;default:dn(this.auth,"internal-error")}}resolve(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eg=new di(2e3,1e4);function hc(){return(hc=(0,z.A)(function*(m,d,f){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(Qt(m,"operation-not-supported-in-this-environment"));const y=Tn(m);Pe(m,d,ru);const T=$s(y,f);return new tv(y,"signInViaPopup",d,T).executeNotNull()})).apply(this,arguments)}function Zy(){return(Zy=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);if((0,ze._isFirebaseServerApp)(y.auth.app))return Promise.reject(Qt(y.auth,"operation-not-supported-in-this-environment"));Pe(y.auth,d,ru);const T=$s(y.auth,f);return new tv(y.auth,"reauthViaPopup",d,T,y).executeNotNull()})).apply(this,arguments)}function tg(){return(tg=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);Pe(y.auth,d,ru);const T=$s(y.auth,f);return new tv(y.auth,"linkViaPopup",d,T,y).executeNotNull()})).apply(this,arguments)}let tv=(()=>{class m extends gu{constructor(f,y,T,S,$){super(f,y,S,$),this.provider=T,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,z.A)(function*(){const y=yield f.execute();return oe(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,z.A)(function*(){Yt(1===f.filter.length,"Popup operations only handle one event");const y=uc();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(Qt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,T;this.pollId=null!==(T=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,eg.get())};f()}}return m.currentPopupAction=null,m})();const nv="pendingRedirect",ng=new Map;class bB extends gu{constructor(d,f,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,z.A)(function*(){let y=ng.get(f.auth._key());if(!y){try{const S=(yield function AB(m,d){return Nw.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;y=()=>Promise.resolve(S)}catch(T){y=()=>Promise.reject(T)}ng.set(f.auth._key(),y)}return f.bypassAuthState||ng.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,y=this;return(0,z.A)(function*(){if("signInViaRedirect"===d.type)return f().call(y,d);if("unknown"!==d.type){if(d.eventId){const T=yield y.auth._redirectUserForId(d.eventId);if(T)return y.user=T,f().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,z.A)(function*(){})()}cleanUp(){}}function Nw(){return(Nw=(0,z.A)(function*(m,d){const f=FR(d),y=VR(m);if(!(yield y._isAvailable()))return!1;const T="true"===(yield y._get(f));return yield y._remove(f),T})).apply(this,arguments)}function kw(m,d){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,z.A)(function*(m,d){return VR(m)._set(FR(d),"true")})).apply(this,arguments)}function Vw(m,d){ng.set(m._key(),d)}function VR(m){return ke(m._redirectPersistence)}function FR(m){return Un(nv,m.config.apiKey,m.name)}function DB(m,d,f){return function SB(m,d,f){return rg.apply(this,arguments)}(m,d,f)}function rg(){return(rg=(0,z.A)(function*(m,d,f){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y=Tn(m);Pe(m,d,ru),yield y._initializationPromise;const T=$s(y,f);return yield kw(T,y),T._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function Fw(m,d,f){return function RB(m,d,f){return Lw.apply(this,arguments)}(m,d,f)}function Lw(){return(Lw=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);if(Pe(y.auth,d,ru),(0,ze._isFirebaseServerApp)(y.auth.app))return Promise.reject(ot(y.auth));yield y.auth._initializationPromise;const T=$s(y.auth,f);yield kw(T,y.auth);const S=yield Bw(y);return T._openRedirect(y.auth,d,"reauthViaRedirect",S)})).apply(this,arguments)}function PB(m,d,f){return function xB(m,d,f){return rv.apply(this,arguments)}(m,d,f)}function rv(){return(rv=(0,z.A)(function*(m,d,f){const y=(0,le.Ku)(m);Pe(y.auth,d,ru),yield y.auth._initializationPromise;const T=$s(y.auth,f);yield Se(!1,y,d.providerId),yield kw(T,y.auth);const S=yield Bw(y);return T._openRedirect(y.auth,d,"linkViaRedirect",S)})).apply(this,arguments)}function Pi(){return(Pi=(0,z.A)(function*(m,d){return yield Tn(m)._initializationPromise,vh(m,d,!1)})).apply(this,arguments)}function vh(m,d){return iv.apply(this,arguments)}function iv(){return(iv=(0,z.A)(function*(m,d,f=!1){if((0,ze._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const y=Tn(m),T=$s(y,d),$=yield new bB(y,T,f).execute();return $&&!f&&(delete $.user._redirectEventId,yield y._persistUserIfCurrent($.user),yield y._setRedirectUser(null,d)),$})).apply(this,arguments)}function Bw(m){return ig.apply(this,arguments)}function ig(){return(ig=(0,z.A)(function*(m){const d=uc(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class zw{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(f=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Yo(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $w(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var y;if(d.error&&!$w(d)){const T=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(Qt(this.auth,T))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const y=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sg(d))}saveEventToCache(d){this.cachedEventUids.add(sg(d)),this.lastProcessedEventTime=Date.now()}}function sg(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function $w({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function sv(m){return og.apply(this,arguments)}function og(){return(og=(0,z.A)(function*(m,d={}){return pe(m,"GET","/v1/projects",d)})).apply(this,arguments)}const an=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ov=/^https?/;function mi(){return(mi=(0,z.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield sv(m);for(const f of d)try{if(LR(f))return}catch{}dn(m,"unauthorized-domain")})).apply(this,arguments)}function LR(m){const d=cr(),{protocol:f,hostname:y}=new URL(d);if(m.startsWith("chrome-extension://")){const $=new URL(m);return""===$.hostname&&""===y?"chrome-extension:"===f&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&$.hostname===y}if(!ov.test(f))return!1;if(an.test(m))return y===m;const T=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(y)}const Eh=new di(3e4,6e4);function mu(){const m=Nr().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let ag=null;const UR=new di(5e3,15e3),qs="__/auth/iframe",qw="emulator/auth/iframe",Gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ug(m){const d=m.config;oe(d.authDomain,m,"auth-domain-config-required");const f=d.emulator?Xa(d,qw):`https://${m.config.authDomain}/${qs}`,y={apiKey:d.apiKey,appName:m.name,v:ze.SDK_VERSION},T=Hw.get(m.config.apiHost);T&&(y.eid=T);const S=m._getFrameworks();return S.length&&(y.fw=S.join(",")),`${f}?${(0,le.Am)(y).slice(1)}`}function zl(){return zl=(0,z.A)(function*(m){const d=yield function av(m){return ag=ag||function Ds(m){return new Promise((d,f)=>{var y,T,S;function $(){mu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{mu(),f(Qt(m,"network-request-failed"))},timeout:Eh.get()})}if(null!==(T=null===(y=Nr().gapi)||void 0===y?void 0:y.iframes)&&void 0!==T&&T.Iframe)d(gapi.iframes.getContext());else{if(null===(S=Nr().gapi)||void 0===S||!S.load){const Q=wn("iframefcb");return Nr()[Q]=()=>{gapi.load?$():f(Qt(m,"network-request-failed"))},rw(`${function dB(){return Zu.gapiScript}()}?onload=${Q}`).catch(se=>f(se))}$()}}).catch(d=>{throw ag=null,d})}(m),ag}(m),f=Nr().gapi;return oe(f,m,"internal-error"),d.open({where:document.body,url:ug(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gw,dontclear:!0},y=>new Promise(function(){var T=(0,z.A)(function*(S,$){yield y.restyle({setHideOnLeave:!1});const Q=Qt(m,"network-request-failed"),se=Nr().setTimeout(()=>{$(Q)},UR.get());function Me(){Nr().clearTimeout(se),S(y)}y.ping(Me).then(Me,()=>{$(Q)})});return function(S,$){return T.apply(this,arguments)}}()))}),zl.apply(this,arguments)}const cg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dg{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const BR="__/auth/handler",jR="emulator/auth/handler",zR=encodeURIComponent("fac");function hg(m,d,f,y,T,S){return va.apply(this,arguments)}function va(){return(va=(0,z.A)(function*(m,d,f,y,T,S){oe(m.config.authDomain,m,"auth-domain-config-required"),oe(m.config.apiKey,m,"invalid-api-key");const $={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:y,v:ze.SDK_VERSION,eventId:T};if(d instanceof ru){d.setDefaultLanguage(m.languageCode),$.providerId=d.providerId||"",(0,le.Im)(d.getCustomParameters())||($.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ge,qe]of Object.entries(S||{}))$[Ge]=qe}if(d instanceof xl){const Ge=d.getScopes().filter(qe=>""!==qe);Ge.length>0&&($.scopes=Ge.join(","))}m.tenantId&&($.tid=m.tenantId);const Q=$;for(const Ge of Object.keys(Q))void 0===Q[Ge]&&delete Q[Ge];const se=yield m._getAppCheckToken(),Me=se?`#${zR}=${encodeURIComponent(se)}`:"";return`${function $R({config:m}){return m.emulator?Xa(m,jR):`https://${m.authDomain}/${BR}`}(m)}?${(0,le.Am)(Q).slice(1)}${Me}`})).apply(this,arguments)}const lv="webStorageSupport",Kw=class qR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=vh,this._overrideRedirectResult=Vw}_openPopup(d,f,y,T){var S=this;return(0,z.A)(function*(){var $;Yt(null===($=S.eventManagers[d._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const Q=yield hg(d,f,y,cr(),T);return function Ww(m,d,f,y=500,T=600){const S=Math.max((window.screen.availHeight-T)/2,0).toString(),$=Math.max((window.screen.availWidth-y)/2,0).toString();let Q="";const se=Object.assign(Object.assign({},cg),{width:y.toString(),height:T.toString(),top:S,left:$}),Me=(0,le.ZQ)().toLowerCase();f&&(Q=ha(Me)?"_blank":f),lo(Me)&&(d=d||"http://localhost",se.scrollbars="yes");const Ge=Object.entries(se).reduce((Mn,[Eo,Sh])=>`${Mn}${Eo}=${Sh},`,"");if(function ye(m=(0,le.ZQ)()){var d;return Ap(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Me)&&"_self"!==Q)return function MB(m,d){const f=document.createElement("a");f.href=m,f.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(d||"",Q),new dg(null);const qe=window.open(d||"",Q,Ge);oe(qe,m,"popup-blocked");try{qe.focus()}catch{}return new dg(qe)}(d,Q,uc())})()}_openRedirect(d,f,y,T){var S=this;return(0,z.A)(function*(){return yield S._originValidation(d),function Dw(m){Nr().location.href=m}(yield hg(d,f,y,cr(),T)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:T,promise:S}=this.eventManagers[f];return T?Promise.resolve(T):(Yt(S,"If manager is not set, promise should be"),S)}const y=this.initAndGetManager(d);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(d){var f=this;return(0,z.A)(function*(){const y=yield function uv(m){return zl.apply(this,arguments)}(d),T=new zw(d);return y.register("authEvent",S=>(oe(S?.authEvent,d,"invalid-auth-event"),{status:T.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:T},f.iframes[d._key()]=y,T})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(lv,{type:lv},T=>{var S;const $=null===(S=T?.[0])||void 0===S?void 0:S[lv];void 0!==$&&f(!!$),dn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ih(m){return mi.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ih()||Xu()||Ap()}};class Qw{constructor(d){this.factorId=d}_process(d,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,y);case"signin":return this._finalizeSignIn(d,f.credential);default:return Dt("unexpected MultiFactorSessionType")}}}class he extends Qw{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new he(d)}_finalizeEnroll(d,f,y){return function bw(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:finalize",re(m,d))}(d,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function tr(m,d){return pe(m,"POST","/v2/accounts/mfaSignIn:finalize",re(m,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pt=(()=>{class m{constructor(){}static assertion(f){return he._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var $l="@firebase/auth";class dv{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,z.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(y=>{d(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qi(){return window}(0,le.XA)("authIdTokenMaxAge"),function Sl(m){Zu=m}({loadJS:m=>new Promise((d,f)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=d,y.onerror=T=>{const S=Qt("internal-error");S.customData=T,f(S)},y.type="text/javascript",y.charset="UTF-8",function Ki(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Yw(m){(0,ze._registerComponent)(new qn.uA("auth",(d,{options:f})=>{const y=d.getProvider("app").getImmediate(),T=d.getProvider("heartbeat"),S=d.getProvider("app-check-internal"),{apiKey:$,authDomain:Q}=y.options;oe($&&!$.includes(":"),"invalid-api-key",{appName:y.name});const se={apiKey:$,authDomain:Q,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:py(m)},Me=new Dl(y,T,S,se);return function lR(m,d){const f=d?.persistence||[],y=(Array.isArray(f)?f:[f]).map(ke);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(y,d?.popupRedirectResolver)}(Me,f),Me},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,y)=>{d.getProvider("auth-internal").initialize()})),(0,ze._registerComponent)(new qn.uA("auth-internal",d=>{const f=Tn(d.getProvider("auth").getImmediate());return new dv(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ze.registerVersion)($l,"1.7.9",function hv(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,ze.registerVersion)($l,"1.7.9","esm2017")}("Browser");function Io(){return Io=(0,z.A)(function*(m,d,f){var y;const{BuildInfo:T}=Qi();Yt(d.sessionId,"AuthEvent did not contain a session ID");const S=yield function gv(m){return ql.apply(this,arguments)}(d.sessionId),$={};return Ap()?$.ibi=T.packageName:Al()?$.apn=T.packageName:dn(m,"operation-not-supported-in-this-environment"),T.displayName&&($.appDisplayName=T.displayName),$.sessionId=S,hg(m,f,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,$)}),Io.apply(this,arguments)}function fg(){return(fg=(0,z.A)(function*(m){const{BuildInfo:d}=Qi(),f={};Ap()?f.iosBundleId=d.packageName:Al()?f.androidPackageName=d.packageName:dn(m,"operation-not-supported-in-this-environment"),yield sv(m,f)})).apply(this,arguments)}function wh(){return(wh=(0,z.A)(function*(m,d,f){const{cordova:y}=Qi();let T=()=>{};try{yield new Promise((S,$)=>{let Q=null;function se(){var qe;S();const Mn=null===(qe=y.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof Mn&&Mn(),"function"==typeof f?.close&&f.close()}function Me(){Q||(Q=window.setTimeout(()=>{$(Qt(m,"redirect-cancelled-by-user"))},2e3))}function Ge(){"visible"===document?.visibilityState&&Me()}d.addPassiveListener(se),document.addEventListener("resume",Me,!1),Al()&&document.addEventListener("visibilitychange",Ge,!1),T=()=>{d.removePassiveListener(se),document.removeEventListener("resume",Me,!1),document.removeEventListener("visibilitychange",Ge,!1),Q&&window.clearTimeout(Q)}})}finally{T()}})).apply(this,arguments)}function ql(){return(ql=(0,z.A)(function*(m){const d=function QR(m){if(Yt(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),f=new Uint8Array(d);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return f}(m),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class mv extends zw{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInitialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInitialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,z.A)(function*(){yield d.initPromise})()}}function _v(m){return pg.apply(this,arguments)}function pg(){return(pg=(0,z.A)(function*(m){const d=yield Hr()._get(Ia(m));return d&&(yield Hr()._remove(Ia(m))),d})).apply(this,arguments)}function YR(){const m=[];for(let f=0;f<20;f++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function Hr(){return ke(Kp)}function Ia(m){return Un("authEvent",m.config.apiKey,m.name)}function gg(m){if(!m?.includes("?"))return{};const[d,...f]=m.split("?");return(0,le.I9)(f.join("?"))}const nb=class ZR{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vh,this._overrideRedirectResult=Vw}_initialize(d){var f=this;return(0,z.A)(function*(){const y=d._key();let T=f.eventManagers.get(y);return T||(T=new mv(d),f.eventManagers.set(y,T),f.attachCallbackListeners(d,T)),T})()}_openPopup(d){dn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,y,T){var S=this;return(0,z.A)(function*(){!function pv(m){var d,f,y,T,S,$,Q,se,Me,Ge;const qe=Qi();oe("function"==typeof(null===(d=qe?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(f=qe?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(S=null===(T=null===(y=qe?.cordova)||void 0===y?void 0:y.plugins)||void 0===T?void 0:T.browsertab)||void 0===S?void 0:S.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(se=null===(Q=null===($=qe?.cordova)||void 0===$?void 0:$.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===se?void 0:se.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Ge=null===(Me=qe?.cordova)||void 0===Me?void 0:Me.InAppBrowser)||void 0===Ge?void 0:Ge.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const $=yield S._initialize(d);yield $.initialized(),$.resetRedirect(),function CB(){ng.clear()}(),yield S._originValidation(d);const Q=function eb(m,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:YR(),postBody:null,tenantId:m.tenantId,error:Qt(m,"no-auth-event")}}(d,y,T);yield function tb(m,d){return Hr()._set(Ia(m),d)}(d,Q);const se=yield function vo(m,d,f){return Io.apply(this,arguments)}(d,Q,f),Me=yield function WR(m){const{cordova:d}=Qi();return new Promise(f=>{d.plugins.browsertab.isAvailable(y=>{let T=null;y?d.plugins.browsertab.openUrl(m):T=d.InAppBrowser.open(m,function nw(m=(0,le.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(T)})})}(se);return function KR(m,d,f){return wh.apply(this,arguments)}(d,$,Me)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function HR(m){return fg.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:y,handleOpenURL:T,BuildInfo:S}=Qi(),$=setTimeout((0,z.A)(function*(){yield _v(d),f.onEvent(vv())}),500),Q=function(){var Ge=(0,z.A)(function*(qe){clearTimeout($);const Mn=yield _v(d);let Eo=null;Mn&&qe?.url&&(Eo=function yv(m,d){var f,y;const T=function JR(m){const d=gg(m),f=d.link?decodeURIComponent(d.link):void 0,y=gg(f).link,T=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return gg(T).link||T||y||f||m}(d);if(T.includes("/__/auth/callback")){const S=gg(T),$=S.firebaseError?function jn(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(S.firebaseError)):null,Q=null===(y=null===(f=$?.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],se=Q?Qt(Q):null;return se?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:se,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:T,postBody:null}}return null}(Mn,qe.url)),f.onEvent(Eo||vv())});return function(Mn){return Ge.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Q);const se=T,Me=`${S.packageName.toLowerCase()}://`;Qi().handleOpenURL=function(){var Ge=(0,z.A)(function*(qe){if(qe.toLowerCase().startsWith(Me)&&Q({url:qe}),"function"==typeof se)try{se(qe)}catch(Mn){console.error(Mn)}});return function(qe){return Ge.apply(this,arguments)}}()}};function vv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qt("no-auth-event")}}function _u(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function yg(m=(0,le.ZQ)()){return!("file:"!==_u()&&"ionic:"!==_u()&&"capacitor:"!==_u()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hl(){try{const m=self.localStorage,d=uc();if(m)return m.setItem(d,"1"),m.removeItem(d),!function Gl(m=(0,le.ZQ)()){return function ib(){return(0,le.lT)()&&11===document?.documentMode}()||function tP(m=(0,le.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,le.zW)()}catch{return Iv()&&(0,le.zW)()}return!1}function Iv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ah(){return(function _g(){return"http:"===_u()||"https:"===_u()}()||(0,le.sr)()||yg())&&!function rb(){return(0,le.lV)()||(0,le.Ll)()}()&&Hl()&&!Iv()}function Ev(){return yg()&&typeof document<"u"}function Tv(){return(Tv=(0,z.A)(function*(){return!!Ev()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const Hs={LOCAL:"local",NONE:"none",SESSION:"session"},vg=oe,Ig="persistence";function Ch(m){return pc.apply(this,arguments)}function pc(){return(pc=(0,z.A)(function*(m){yield m._initializationPromise;const d=Wl(),f=Un(Ig,m.config.apiKey,m.name);d&&d.setItem(f,m._getPersistence())})).apply(this,arguments)}function Wl(){var m;try{return(null===(m=function rP(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const sP=oe;class Xo{constructor(){this.browserResolver=ke(Kw),this.cordovaResolver=ke(nb),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=vh,this._overrideRedirectResult=Vw}_initialize(d){var f=this;return(0,z.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,y,T){var S=this;return(0,z.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openPopup(d,f,y,T)})()}_openRedirect(d,f,y,T){var S=this;return(0,z.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openRedirect(d,f,y,T)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ev()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sP(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,z.A)(function*(){if(d.underlyingResolver)return;const f=yield function nP(){return Tv.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Dh(m){return m.unwrap()}function sb(m){return ab(m)}function ab(m){const{_tokenResponse:d}=m instanceof le.g?m.customData:m;if(!d)return null;if(!(m instanceof le.g)&&"temporaryProof"in d&&"phoneNumber"in d)return pu.credentialFromResult(m);const f=d.providerId;if(!f||f===jt.PASSWORD)return null;let y;switch(f){case jt.GOOGLE:y=fw;break;case jt.FACEBOOK:y=gR;break;case jt.GITHUB:y=Np;break;case jt.TWITTER:y=by;break;default:const{oauthIdToken:T,oauthAccessToken:S,oauthTokenSecret:$,pendingToken:Q,nonce:se}=d;return S||$||T||Q?Q?f.startsWith("saml.")?iu._create(f,Q):Go._fromParams({providerId:f,signInMethod:f,pendingToken:Q,idToken:T,accessToken:S}):new Ml(f).credential({idToken:T,accessToken:S,rawNonce:se}):null}return m instanceof le.g?y.credentialFromError(m):y.credentialFromResult(m)}function hr(m,d){return d.catch(f=>{throw f instanceof le.g&&function ob(m,d){var f;const y=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new bv(m,function ww(m,d){var f;const y=(0,le.Ku)(m),T=d;return oe(d.customData.operationType,y,"argument-error"),oe(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),ma._fromError(y,T)}(m,d));else if(y){const T=ab(d),S=d;T&&(S.credential=T,S.tenantId=y.tenantId||void 0,S.email=y.email||void 0,S.phoneNumber=y.phoneNumber||void 0)}}(m,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:sb(f),additionalUserInfo:AR(f),user:Zo.getOrCreate(T)}})}function wv(m,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,z.A)(function*(m,d){const f=yield d;return{verificationId:f.verificationId,confirm:y=>hr(m,f.confirm(y))}})).apply(this,arguments)}class bv{constructor(d,f){this.resolver=f,this.auth=function OB(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return hr(Dh(this.auth),this.resolver.resolveSignIn(d))}}class Zo{constructor(d){this._delegate=d,this.multiFactor=function Aw(m){const d=(0,le.Ku)(m);return hh.has(d)||hh.set(d,Hy._fromUser(d)),hh.get(d)}(d)}static getOrCreate(d){return Zo.USER_MAP.has(d)||Zo.USER_MAP.set(d,new Zo(d)),Zo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,z.A)(function*(){return hr(f.auth,_w(f._delegate,d))})()}linkWithPhoneNumber(d,f){var y=this;return(0,z.A)(function*(){return wv(y.auth,function xw(m,d,f){return Qo.apply(this,arguments)}(y._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,z.A)(function*(){return hr(f.auth,function ev(m,d,f){return tg.apply(this,arguments)}(f._delegate,d,Xo))})()}linkWithRedirect(d){var f=this;return(0,z.A)(function*(){return yield Ch(Tn(f.auth)),PB(f._delegate,d,Xo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,z.A)(function*(){return hr(f.auth,Ol(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return wv(this.auth,function Xp(m,d,f){return cs.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return hr(this.auth,function Mw(m,d,f){return Zy.apply(this,arguments)}(this._delegate,d,Xo))}reauthenticateWithRedirect(d){var f=this;return(0,z.A)(function*(){return yield Ch(Tn(f.auth)),Fw(f._delegate,d,Xo)})()}sendEmailVerification(d){return function vw(m,d){return Wp.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,z.A)(function*(){return yield function Nl(m,d){return Dy.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function Iw(m,d){const f=(0,le.Ku)(m);return(0,ze._isFirebaseServerApp)(f.auth.app)?Promise.reject(ot(f.auth)):Ew(f,d,null)}(this._delegate,d)}updatePassword(d){return function IR(m,d){return Ew((0,le.Ku)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function _h(m,d){return zs.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function go(m,d){return Uy.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function yR(m,d,f){return dh.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zo.USER_MAP=new WeakMap;const yu=oe;let Eg=(()=>{class m{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=f.options;yu(T,"invalid-api-key",{appName:f.name}),yu(T,"invalid-api-key",{appName:f.name});const S=typeof window<"u"?Xo:void 0;this._delegate=y.initialize({options:{persistence:cb(T,f.name),popupRedirectResolver:S}}),this._delegate._updateErrorMap(Mr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function dR(m,d,f){const y=Tn(m);oe(y._canInitEmulator,y,"emulator-config-failed"),oe(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const T=!!f?.disableWarnings,S=pa(d),{host:$,port:Q}=function fB(m){const d=pa(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(y);if(T){const S=T[1];return{host:S,port:hR(y.substr(S.length+1))}}{const[S,$]=y.split(":");return{host:S,port:hR($)}}}(d);y.config.emulator={url:`${S}//${$}${null===Q?"":`:${Q}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:$,port:Q,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function pB(){function m(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,y)}applyActionCode(f){return function ky(m,d){return ou.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return _R(this._delegate,f)}confirmPasswordReset(f,y){return function EB(m,d,f){return qi.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var T=this;return(0,z.A)(function*(){return hr(T._delegate,function fo(m,d,f){return qp.apply(this,arguments)}(T._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function yw(m,d){return ic.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function po(m,d){const f=Pl.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,z.A)(function*(){yu(Ah(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function Uw(m,d){return Pi.apply(this,arguments)}(f._delegate,Xo);return y?hr(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function bh(m,d){Tn(m)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,y,T){const{next:S,error:$,complete:Q}=ub(f,y,T);return this._delegate.onAuthStateChanged(S,$,Q)}onIdTokenChanged(f,y,T){const{next:S,error:$,complete:Q}=ub(f,y,T);return this._delegate.onIdTokenChanged(S,$,Q)}sendSignInLinkToEmail(f,y){return function Gp(m,d,f){return Fl.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function IB(m,d,f){return zp.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,z.A)(function*(){let T;switch(function fc(m,d){vg(Object.values(Hs).includes(d),m,"invalid-persistence-type"),(0,le.lV)()?vg(d!==Hs.SESSION,m,"unsupported-persistence-type"):(0,le.Ll)()?vg(d===Hs.NONE,m,"unsupported-persistence-type"):Iv()?vg(d===Hs.NONE||d===Hs.LOCAL&&(0,le.zW)(),m,"unsupported-persistence-type"):vg(d===Hs.NONE||Hl(),m,"unsupported-persistence-type")}(y._delegate,f),f){case Hs.SESSION:T=mo;break;case Hs.LOCAL:T=(yield ke(du)._isAvailable())?du:Kp;break;case Hs.NONE:T=$e;break;default:return dn("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return hr(this._delegate,function Op(m){return Ay.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return hr(this._delegate,Up(this._delegate,f))}signInWithCustomToken(f){return hr(this._delegate,function nc(m,d){return Ny.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return hr(this._delegate,function Oy(m,d,f){return(0,ze._isFirebaseServerApp)(m.app)?Promise.reject(ot(m)):Up((0,le.Ku)(m),on.credential(d,f)).catch(function(){var y=(0,z.A)(function*(T){throw"auth/password-does-not-meet-requirements"===T.code&&Vl(m),T});return function(T){return y.apply(this,arguments)}}())}(this._delegate,f,y))}signInWithEmailLink(f,y){return hr(this._delegate,function au(m,d,f){return Vy.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return wv(this._delegate,function _a(m,d,f){return fu.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,z.A)(function*(){return yu(Ah(),y._delegate,"operation-not-supported-in-this-environment"),hr(y._delegate,function yo(m,d,f){return hc.apply(this,arguments)}(y._delegate,f,Xo))})()}signInWithRedirect(f){var y=this;return(0,z.A)(function*(){return yu(Ah(),y._delegate,"operation-not-supported-in-this-environment"),yield Ch(y._delegate),DB(y._delegate,f,Xo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Wo(m,d){return Gt.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Hs,m})();function ub(m,d,f){let y=m;"function"!=typeof m&&({next:y,error:d,complete:f}=m);const T=y;return{next:$=>T($&&Zo.getOrCreate($)),error:d,complete:f}}function cb(m,d){const f=function iP(m,d){const f=Wl();if(!f)return[];const y=Un(Ig,m,d);switch(f.getItem(y)){case Hs.NONE:return[$e];case Hs.LOCAL:return[du,mo];case Hs.SESSION:return[mo];default:return[]}}(m,d);if(typeof self<"u"&&!f.includes(du)&&f.push(du),typeof window<"u")for(const y of[Kp,mo])f.includes(y)||f.push(y);return f.includes($e)||f.push($e),f}class Tg{constructor(){this.providerId="phone",this._delegate=new pu(Dh(He.A.auth()))}static credential(d,f){return pu.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Tg.PHONE_SIGN_IN_METHOD=pu.PHONE_SIGN_IN_METHOD,Tg.PROVIDER_ID=pu.PROVIDER_ID;const lb=oe;class db{constructor(d,f,y=He.A.app()){var T;lb(null===(T=y.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new nr(y.auth(),d,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wg(m){m.INTERNAL.registerComponent(new qn.uA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new Eg(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:on,FacebookAuthProvider:gR,GithubAuthProvider:Np,GoogleAuthProvider:fw,OAuthProvider:Ml,SAMLAuthProvider:fi,PhoneAuthProvider:Tg,PhoneMultiFactorGenerator:Pt,RecaptchaVerifier:db,TwitterAuthProvider:by,Auth:Eg,AuthCredential:sh,Error:le.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(He.A)},749:(zo,ii,_t)=>{_t.d(ii,{P2:()=>Ur});var z=_t(467);const He=(Pe,Le)=>Le.some(oe=>Pe instanceof oe);let ze,le;const qn=new WeakMap,Zn=new WeakMap,jt=new WeakMap,fe=new WeakMap,be=new WeakMap;let zt={get(Pe,Le,oe){if(Pe instanceof IDBTransaction){if("done"===Le)return Zn.get(Pe);if("objectStoreNames"===Le)return Pe.objectStoreNames||jt.get(Pe);if("store"===Le)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return pt(Pe[Le])},set:(Pe,Le,oe)=>(Pe[Le]=oe,!0),has:(Pe,Le)=>Pe instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in Pe};function yt(Pe){return"function"==typeof Pe?function rn(Pe){return Pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ze(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Pe)?function(...Le){return Pe.apply(ur(this),Le),pt(qn.get(this))}:function(...Le){return pt(Pe.apply(ur(this),Le))}:function(Le,...oe){const Dt=Pe.call(ur(this),Le,...oe);return jt.set(Dt,Le.sort?Le.sort():[Le]),pt(Dt)}}(Pe):(Pe instanceof IDBTransaction&&function Nt(Pe){if(Zn.has(Pe))return;const Le=new Promise((oe,Dt)=>{const Yt=()=>{Pe.removeEventListener("complete",cr),Pe.removeEventListener("error",Gn),Pe.removeEventListener("abort",Gn)},cr=()=>{oe(),Yt()},Gn=()=>{Dt(Pe.error||new DOMException("AbortError","AbortError")),Yt()};Pe.addEventListener("complete",cr),Pe.addEventListener("error",Gn),Pe.addEventListener("abort",Gn)});Zn.set(Pe,Le)}(Pe),He(Pe,function gn(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Pe,zt):Pe)}function pt(Pe){if(Pe instanceof IDBRequest)return function Je(Pe){const Le=new Promise((oe,Dt)=>{const Yt=()=>{Pe.removeEventListener("success",cr),Pe.removeEventListener("error",Gn)},cr=()=>{oe(pt(Pe.result)),Yt()},Gn=()=>{Dt(Pe.error),Yt()};Pe.addEventListener("success",cr),Pe.addEventListener("error",Gn)});return Le.then(oe=>{oe instanceof IDBCursor&&qn.set(oe,Pe)}).catch(()=>{}),be.set(Le,Pe),Le}(Pe);if(fe.has(Pe))return fe.get(Pe);const Le=yt(Pe);return Le!==Pe&&(fe.set(Pe,Le),be.set(Le,Pe)),Le}const ur=Pe=>be.get(Pe);function Ur(Pe,Le,{blocked:oe,upgrade:Dt,blocking:Yt,terminated:cr}={}){const Gn=indexedDB.open(Pe,Le),os=pt(Gn);return Dt&&Gn.addEventListener("upgradeneeded",lr=>{Dt(pt(Gn.result),lr.oldVersion,lr.newVersion,pt(Gn.transaction),lr)}),oe&&Gn.addEventListener("blocked",lr=>oe(lr.oldVersion,lr.newVersion,lr)),os.then(lr=>{cr&&lr.addEventListener("close",()=>cr()),Yt&&lr.addEventListener("versionchange",ws=>Yt(ws.oldVersion,ws.newVersion,ws))}).catch(()=>{}),os}const dn=["get","getKey","getAll","getAllKeys","count"],Qt=["put","add","delete","clear"],jr=new Map;function ot(Pe,Le){if(!(Pe instanceof IDBDatabase)||Le in Pe||"string"!=typeof Le)return;if(jr.get(Le))return jr.get(Le);const oe=Le.replace(/FromIndex$/,""),Dt=Le!==oe,Yt=Qt.includes(oe);if(!(oe in(Dt?IDBIndex:IDBObjectStore).prototype)||!Yt&&!dn.includes(oe))return;const cr=function(){var Gn=(0,z.A)(function*(os,...lr){const ws=this.transaction(os,Yt?"readwrite":"readonly");let di=ws.store;return Dt&&(di=di.index(lr.shift())),(yield Promise.all([di[oe](...lr),Yt&&ws.done]))[0]});return function(lr){return Gn.apply(this,arguments)}}();return jr.set(Le,cr),cr}!function Mr(Pe){zt=Pe(zt)}(Pe=>({...Pe,get:(Le,oe,Dt)=>ot(Le,oe)||Pe.get(Le,oe,Dt),has:(Le,oe)=>!!ot(Le,oe)||Pe.has(Le,oe)}))},467:(zo,ii,_t)=>{function z(ze,le,gn,Ze,qn,Zn,jt){try{var fe=ze[Zn](jt),be=fe.value}catch(Je){return void gn(Je)}fe.done?le(be):Promise.resolve(be).then(Ze,qn)}function He(ze){return function(){var le=this,gn=arguments;return new Promise(function(Ze,qn){var Zn=ze.apply(le,gn);function jt(be){z(Zn,Ze,qn,jt,fe,"next",be)}function fe(be){z(Zn,Ze,qn,jt,fe,"throw",be)}jt(void 0)})}}_t.d(ii,{A:()=>He})},635:(zo,ii,_t)=>{function le(ie,ce){var de={};for(var re in ie)Object.prototype.hasOwnProperty.call(ie,re)&&ce.indexOf(re)<0&&(de[re]=ie[re]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(re=Object.getOwnPropertySymbols(ie);pe<re.length;pe++)ce.indexOf(re[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,re[pe])&&(de[re[pe]]=ie[re[pe]])}return de}function Je(ie,ce,de,re){return new(de||(de=Promise))(function(we,nt){function Ut(mn){try{dt(re.next(mn))}catch(vt){nt(vt)}}function hn(mn){try{dt(re.throw(mn))}catch(vt){nt(vt)}}function dt(mn){mn.done?we(mn.value):function pe(we){return we instanceof de?we:new de(function(nt){nt(we)})}(mn.value).then(Ut,hn)}dt((re=re.apply(ie,ce||[])).next())})}function Br(ie){return this instanceof Br?(this.v=ie,this):new Br(ie)}function dn(ie,ce,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,re=de.apply(ie,ce||[]),we=[];return pe=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Ut("next"),Ut("throw"),Ut("return",function nt(qt){return function(sn){return Promise.resolve(sn).then(qt,vt)}}),pe[Symbol.asyncIterator]=function(){return this},pe;function Ut(qt,sn){re[qt]&&(pe[qt]=function(Jt){return new Promise(function(Ci,as){we.push([qt,Jt,Ci,as])>1||hn(qt,Jt)})},sn&&(pe[qt]=sn(pe[qt])))}function hn(qt,sn){try{!function dt(qt){qt.value instanceof Br?Promise.resolve(qt.value.v).then(mn,vt):Us(we[0][2],qt)}(re[qt](sn))}catch(Jt){Us(we[0][3],Jt)}}function mn(qt){hn("next",qt)}function vt(qt){hn("throw",qt)}function Us(qt,sn){qt(sn),we.shift(),we.length&&hn(we[0][0],we[0][1])}}function jr(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function rn(ie){var ce="function"==typeof Symbol&&Symbol.iterator,de=ce&&ie[ce],re=0;if(de)return de.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&re>=ie.length&&(ie=void 0),{value:ie&&ie[re++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),de={},re("next"),re("throw"),re("return"),de[Symbol.asyncIterator]=function(){return this},de);function re(we){de[we]=ie[we]&&function(nt){return new Promise(function(Ut,hn){!function pe(we,nt,Ut,hn){Promise.resolve(hn).then(function(dt){we({value:dt,done:Ut})},nt)}(Ut,hn,(nt=ie[we](nt)).done,nt.value)})}}}_t.d(ii,{AQ:()=>dn,N3:()=>Br,Tt:()=>le,sH:()=>Je,xN:()=>jr}),"function"==typeof SuppressedError&&SuppressedError}},zo=>{zo(zo.s=775)}]);