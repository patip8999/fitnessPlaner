"use strict";(self.webpackChunkFitnessPlaner=self.webpackChunkFitnessPlaner||[]).push([[792],{401:(Mo,yr,it)=>{it.d(yr,{Am:()=>No,Bd:()=>te,FA:()=>me,Fy:()=>or,I9:()=>ha,Im:()=>ci,Ku:()=>de,Ll:()=>xe,T9:()=>ir,Uj:()=>bt,XA:()=>zt,ZQ:()=>Ye,bD:()=>Ti,c1:()=>xt,cY:()=>Nt,eX:()=>ie,g:()=>le,gR:()=>kt,hp:()=>to,jZ:()=>we,lT:()=>Nn,lV:()=>mn,mS:()=>Tt,nr:()=>ws,p7:()=>ht,sr:()=>Mn,tD:()=>es,u:()=>ue,zW:()=>Z,zw:()=>ze});const oe=function(A){const C=[];let O=0;for(let Y=0;Y<A.length;Y++){let $=A.charCodeAt(Y);$<128?C[O++]=$:$<2048?(C[O++]=$>>6|192,C[O++]=63&$|128):55296==(64512&$)&&Y+1<A.length&&56320==(64512&A.charCodeAt(Y+1))?($=65536+((1023&$)<<10)+(1023&A.charCodeAt(++Y)),C[O++]=$>>18|240,C[O++]=$>>12&63|128,C[O++]=$>>6&63|128,C[O++]=63&$|128):(C[O++]=$>>12|224,C[O++]=$>>6&63|128,C[O++]=63&$|128)}return C},He={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(A,C){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let $=0;$<A.length;$+=3){const ve=A[$],De=$+1<A.length,un=De?A[$+1]:0,Ve=$+2<A.length,ln=Ve?A[$+2]:0;let io=(15&un)<<2|ln>>6,ga=63&ln;Ve||(ga=64,De||(io=64)),Y.push(O[ve>>2],O[(3&ve)<<4|un>>4],O[io],O[ga])}return Y.join("")},encodeString(A,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(A):this.encodeByteArray(oe(A),C)},decodeString(A,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(A):function(A){const C=[];let O=0,Y=0;for(;O<A.length;){const $=A[O++];if($<128)C[Y++]=String.fromCharCode($);else if($>191&&$<224){const ve=A[O++];C[Y++]=String.fromCharCode((31&$)<<6|63&ve)}else if($>239&&$<365){const Ve=((7&$)<<18|(63&A[O++])<<12|(63&A[O++])<<6|63&A[O++])-65536;C[Y++]=String.fromCharCode(55296+(Ve>>10)),C[Y++]=String.fromCharCode(56320+(1023&Ve))}else{const ve=A[O++],De=A[O++];C[Y++]=String.fromCharCode((15&$)<<12|(63&ve)<<6|63&De)}}return C.join("")}(this.decodeStringToByteArray(A,C))},decodeStringToByteArray(A,C){this.init_();const O=C?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let $=0;$<A.length;){const ve=O[A.charAt($++)],un=$<A.length?O[A.charAt($)]:0;++$;const ln=$<A.length?O[A.charAt($)]:64;++$;const ft=$<A.length?O[A.charAt($)]:64;if(++$,null==ve||null==un||null==ln||null==ft)throw new gn;Y.push(ve<<2|un>>4),64!==ln&&(Y.push(un<<4&240|ln>>2),64!==ft&&Y.push(ln<<6&192|ft))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class gn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bt=function(A){return function(A){const C=oe(A);return He.encodeByteArray(C,!0)}(A).replace(/\./g,"")},ue=function(A){try{return He.decodeString(A,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function ze(A,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===A&&(A={});break;case Array:A=[];break;default:return C}for(const O in C)!C.hasOwnProperty(O)||!_t(O)||(A[O]=ze(A[O],C[O]));return A}function _t(A){return"__proto__"!==A}function Tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tt=()=>{try{return Tt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const A=process.env.__FIREBASE_DEFAULTS__;return A?JSON.parse(A):void 0})()||(()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=A&&ue(A[1]);return C&&JSON.parse(C)})()}catch(A){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`)}},ir=()=>{var A;return null===(A=tt())||void 0===A?void 0:A.config},zt=A=>{var C;return null===(C=tt())||void 0===C?void 0:C[`_${A}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,O)=>{this.resolve=C,this.reject=O})}wrapCallback(C){return(O,Y)=>{O?this.reject(O):this.resolve(Y),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(O):C(O,Y))}}}function or(A,C){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=C||"demo-project",$=A.iat||0,ve=A.sub||A.user_id;if(!ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:$,exp:$+3600,auth_time:$,sub:ve,user_id:ve,firebase:{sign_in_provider:"custom",identities:{}}},A);return[bt(JSON.stringify({alg:"none",type:"JWT"})),bt(JSON.stringify(De)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function xe(){var A;const C=null===(A=tt())||void 0===A?void 0:A.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function te(){return typeof window<"u"||ht()}function ht(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function xt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Mn(){const A="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof A&&void 0!==A.id}function mn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Nn(){const A=Ye();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function ws(){return!xe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise((A,C)=>{try{let O=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Y);$.onsuccess=()=>{$.result.close(),O||self.indexedDB.deleteDatabase(Y),A(!0)},$.onupgradeneeded=()=>{O=!1},$.onerror=()=>{var ve;C((null===(ve=$.error)||void 0===ve?void 0:ve.message)||"")}}catch(O){C(O)}})}class le extends Error{constructor(C,O,Y){super(O),this.code=C,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(C,O,Y){this.service=C,this.serviceName=O,this.errors=Y}create(C,...O){const Y=O[0]||{},$=`${this.service}/${C}`,ve=this.errors[C],De=ve?function qe(A,C){return A.replace(wt,(O,Y)=>{const $=C[Y];return null!=$?String($):`<${Y}?>`})}(ve,Y):"Error";return new le($,`${this.serviceName}: ${De} (${$}).`,Y)}}const wt=/\{\$([^}]+)}/g;function kt(A,C){return Object.prototype.hasOwnProperty.call(A,C)}function ci(A){for(const C in A)if(Object.prototype.hasOwnProperty.call(A,C))return!1;return!0}function Ti(A,C){if(A===C)return!0;const O=Object.keys(A),Y=Object.keys(C);for(const $ of O){if(!Y.includes($))return!1;const ve=A[$],De=C[$];if(eo(ve)&&eo(De)){if(!Ti(ve,De))return!1}else if(ve!==De)return!1}for(const $ of Y)if(!O.includes($))return!1;return!0}function eo(A){return null!==A&&"object"==typeof A}function No(A){const C=[];for(const[O,Y]of Object.entries(A))Array.isArray(Y)?Y.forEach($=>{C.push(encodeURIComponent(O)+"="+encodeURIComponent($))}):C.push(encodeURIComponent(O)+"="+encodeURIComponent(Y));return C.length?"&"+C.join("&"):""}function ha(A){const C={};return A.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[$,ve]=Y.split("=");C[decodeURIComponent($)]=decodeURIComponent(ve)}}),C}function to(A){const C=A.indexOf("?");if(!C)return"";const O=A.indexOf("#",C);return A.substring(C,O>0?O:void 0)}function es(A,C){const O=new Wr(A,C);return O.subscribe.bind(O)}class Wr{constructor(C,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{C(this)}).catch(Y=>{this.error(Y)})}next(C){this.forEachObserver(O=>{O.next(C)})}error(C){this.forEachObserver(O=>{O.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,O,Y){let $;if(void 0===C&&void 0===O&&void 0===Y)throw new Error("Missing Observer.");$=function ts(A,C){if("object"!=typeof A||null===A)return!1;for(const O of C)if(O in A&&"function"==typeof A[O])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:O,complete:Y},void 0===$.next&&($.next=Ci),void 0===$.error&&($.error=Ci),void 0===$.complete&&($.complete=Ci);const ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch{}}),this.observers.push($),ve}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,C)}sendOne(C,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{O(this.observers[C])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ci(){}function de(A){return A&&A._delegate?A._delegate:A}},891:(Mo,yr,it)=>{function P(n,e){return Object.is(n,e)}let Be=null,Oe=!1,oe=1;const qt=Symbol("SIGNAL");function He(n){const e=Be;return Be=n,e}const ue={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _e(n){if(Oe)throw new Error("");if(null===Be)return;Be.consumerOnSignalRead(n);const e=Be.nextProducerIndex++;or(Be),e<Be.producerNode.length&&Be.producerNode[e]!==n&&Nt(Be)&&zt(Be.producerNode[e],Be.producerIndexOfThis[e]),Be.producerNode[e]!==n&&(Be.producerNode[e]=n,Be.producerIndexOfThis[e]=Nt(Be)?ir(n,Be,e):0),Be.producerLastReadVersion[e]=n.version}function _t(n){if((!Nt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==oe)){if(!n.producerMustRecompute(n)&&!Pn(n))return n.dirty=!1,void(n.lastCleanEpoch=oe);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=oe}}function Tt(n){if(void 0===n.liveConsumerNode)return;const e=Oe;Oe=!0;try{for(const t of n.liveConsumerNode)t.dirty||Vt(t)}finally{Oe=e}}function Jn(){return!1!==Be?.consumerAllowSignalWrites}function Vt(n){n.dirty=!0,Tt(n),n.consumerMarkedDirty?.(n)}function ot(n){return n&&(n.nextProducerIndex=0),He(n)}function tt(n,e){if(He(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Nt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)zt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pn(n){or(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(_t(t),r!==t.version))return!0}return!1}function rr(n){if(or(n),Nt(n))for(let e=0;e<n.producerNode.length;e++)zt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ir(n,e,t){if(Ye(n),0===n.liveConsumerNode.length&&we(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ir(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function zt(n,e){if(Ye(n),1===n.liveConsumerNode.length&&we(n))for(let r=0;r<n.producerNode.length;r++)zt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];or(i),i.producerIndexOfThis[r]=e}}function Nt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function or(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ye(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function we(n){return void 0!==n.producerNode}const te=Symbol("UNSET"),ht=Symbol("COMPUTING"),xt=Symbol("ERRORED"),Mn={...ue,value:te,dirty:!0,error:null,equal:P,producerMustRecompute:n=>n.value===te||n.value===ht,producerRecomputeValue(n){if(n.value===ht)throw new Error("Detected cycle in computations.");const e=n.value;n.value=ht;const t=ot(n);let r;try{r=n.computation()}catch(i){r=xt,n.error=i}finally{tt(n,t)}e!==te&&e!==xt&&r!==xt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let ai=function mn(){throw new Error};function Nn(){ai()}let Cr=null;function se(n,e){Jn()||Nn(),n.equal(n.value,e)||(n.value=e,function qe(n){n.version++,function ze(){oe++}(),Tt(n),Cr?.()}(n))}const me={...ue,equal:P,value:void 0};function st(n){return"function"==typeof n}function Li(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const At=Li(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ut(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(st(r))try{r()}catch(o){e=o instanceof At?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{bs(o)}catch(s){e=e??[],s instanceof At?e=[...e,...s.errors]:e.push(s)}}if(e)throw new At(e)}}add(e){var t;if(e&&e!==this)if(this.closed)bs(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ut(t,e)}remove(e){const{_finalizers:t}=this;t&&Ut(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const Or=kt.EMPTY;function ci(n){return n instanceof kt||n&&"closed"in n&&st(n.remove)&&st(n.add)&&st(n.unsubscribe)}function bs(n){st(n)?n():n.unsubscribe()}const Ti={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},eo={setTimeout(n,e,...t){const{delegate:r}=eo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=eo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Fu(n){eo.setTimeout(()=>{const{onUnhandledError:e}=Ti;if(!e)throw n;e(n)})}function No(){}const ha=es("C",void 0,void 0);function es(n,e,t){return{kind:n,value:e,error:t}}let Wr=null;function pc(n){if(Ti.useDeprecatedSynchronousErrorHandling){const e=!Wr;if(e&&(Wr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Wr;if(Wr=null,t)throw r}}else n()}class Ci extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ci(e)&&e.add(this)):this.destination=mc}static create(e,t,r){return new Ar(e,t,r)}next(e){this.isStopped?gc(function Lu(n){return es("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?gc(function to(n){return es("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gc(ha,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const fa=Function.prototype.bind;function Vi(n,e){return fa.call(n,e)}class pa{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){no(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){no(r)}else no(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){no(t)}}}class Ar extends Ci{constructor(e,t,r){let i;if(super(),st(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ti.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vi(e.next,o),error:e.error&&Vi(e.error,o),complete:e.complete&&Vi(e.complete,o)}):i=e}this.destination=new pa(i)}}function no(n){Ti.useDeprecatedSynchronousErrorHandling?function ts(n){Ti.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=n)}(n):Fu(n)}function gc(n,e){const{onStoppedNotification:t}=Ti;t&&eo.setTimeout(()=>t(n,e))}const mc={closed:!0,next:No,error:function Vu(n){throw n},complete:No},ro="function"==typeof Symbol&&Symbol.observable||"@@observable";function Kr(n){return n}function Ts(n){return 0===n.length?Kr:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function de(n){return n&&n instanceof Ci||function ke(n){return n&&st(n.next)&&st(n.error)&&st(n.complete)}(n)&&ci(n)}(t)?t:new Ar(t,r,i);return pc(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=_c(r))((i,o)=>{const s=new Ar({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ro](){return this}pipe(...t){return Ts(t)(this)}toPromise(t){return new(t=_c(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _c(n){var e;return null!==(e=n??Ti.Promise)&&void 0!==e?e:Promise}const A=Li(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let C=(()=>{class n extends Dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new O(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new A}next(t){pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Or:(this.currentObservers=null,o.push(t),new kt(()=>{this.currentObservers=null,Ut(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Dt;return t.source=this,t}}return n.create=(e,t)=>new O(e,t),n})();class O extends C{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Or}}class Y extends C{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function $(n){return st(n?.lift)}function ve(n){return e=>{if($(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new un(n,e,t,r,i)}class un extends Ci{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(n,e){return ve((t,r)=>{let i=0;t.subscribe(De(r,o=>{r.next(n.call(e,o,i++))}))})}const ln=Li(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function dn(n,e){return ve((t,r)=>{let i=0;t.subscribe(De(r,o=>n.call(e,o,i++)&&r.next(o)))})}const ft=new Dt(n=>n.complete());function ns(n){return n<=0?()=>ft:ve((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bu(n){return ve((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yc(n=Xy){return ve((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Xy(){return new ln}function xo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,o)=>n(i,o,r)):Kr,ns(1),t?Bu(e):yc(()=>new ln))}const ev="https://g.co/ng/security#xss";class he extends Error{constructor(e,t){super(function Cs(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function rs(n){return{toString:n}.toString()}const Ic="__parameters__";function Ec(n,e,t){return rs(()=>{const r=function ma(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,f){const m=c.hasOwnProperty(Ic)?c[Ic]:Object.defineProperty(c,Ic,{value:[]})[Ic];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const _n=globalThis;function Qt(n){for(let e in n)if(n[e]===Qt)return e;throw Error("Could not find renamed property on target object.")}function wT(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function sr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(sr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function wd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Rp=Qt({__forward_ref__:Qt});function Yt(n){return n.__forward_ref__=Yt,n.toString=function(){return sr(this())},n}function Xe(n){return bd(n)?n():n}function bd(n){return"function"==typeof n&&n.hasOwnProperty(Rp)&&n.__forward_ref__===Yt}function Re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ui(n){return{providers:n.providers||[],imports:n.imports||[]}}function Td(n){return cv(n,wc)||cv(n,Ad)}function cv(n,e){return n.hasOwnProperty(e)?n[e]:null}function Cd(n){return n&&(n.hasOwnProperty(xp)||n.hasOwnProperty(DT))?n[xp]:null}const wc=Qt({\u0275prov:Qt}),xp=Qt({\u0275inj:Qt}),Ad=Qt({ngInjectableDef:Qt}),DT=Qt({ngInjectorDef:Qt});class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zu(n){return n&&!!n.\u0275providers}const Hu=Qt({\u0275cmp:Qt}),Fp=Qt({\u0275dir:Qt}),Gu=Qt({\u0275pipe:Qt}),As=Qt({\u0275mod:Qt}),os=Qt({\u0275fac:Qt}),qu=Qt({__NG_ELEMENT_ID__:Qt}),bc=Qt({__NG_ENV_ID__:Qt});function ut(n){return"string"==typeof n?n:null==n?"":String(n)}function Sd(n,e){throw new he(-201,!1)}var It=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(It||{});let Ss;function hv(){return Ss}function Dr(n){const e=Ss;return Ss=n,e}function Lp(n,e,t){const r=Td(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&It.Optional?null:void 0!==e?e:void Sd()}const Fr={},Rd="__NG_DI_FLAG__",Pd="ngTempTokenPath",Md=/\n/gm,Up="__source";let Ac;function Oo(n){const e=Ac;return Ac=n,e}function jp(n,e=It.Default){if(void 0===Ac)throw new he(-203,!1);return null===Ac?Lp(n,void 0,e):Ac.get(n,e&It.Optional?null:void 0,e)}function be(n,e=It.Default){return(hv()||jp)(Xe(n),e)}function G(n,e=It.Default){return be(n,Dc(e))}function Dc(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xd(n){const e=[];for(let t=0;t<n.length;t++){const r=Xe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new he(900,!1);let i,o=It.Default;for(let s=0;s<r.length;s++){const a=r[s],c=kd(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(be(i,o))}else e.push(be(r))}return e}function ya(n,e){return n[Rd]=e,n.prototype[Rd]=e,n}function kd(n){return n[Rd]}const Sc=ya(Ec("Optional"),8),Od=ya(Ec("SkipSelf"),4);function va(n,e){return n.hasOwnProperty(os)?n[os]:null}function Rs(n,e){n.forEach(t=>Array.isArray(t)?Rs(t,e):e(t))}function Fd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ia(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Yr(n,e,t){let r=Ps(n,e);return r>=0?n[1|r]=t:(r=~r,function Ld(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Wp(n,e){const t=Ps(n,e);if(t>=0)return n[1|t]}function Ps(n,e){return function Vd(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Fo={},St=[],so=new ye(""),Ud=new ye("",-1),Kp=new ye("");class Bd{get(e,t=Fr){if(t===Fr){const r=new Error(`NullInjectorError: No provider for ${sr(e)}!`);throw r.name="NullInjectorError",r}return t}}var Pc=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Pc||{}),ao=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ao||{}),Ms=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ms||{});function Qp(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Yp(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];mv(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jd(n){return 3===n||4===n||6===n}function mv(n){return 64===n.charCodeAt(0)}function Ea(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||_v(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function _v(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const $d="ng-template";function MT(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==Qp(e[i+1].toLowerCase(),t,0))return!0}else if(Ku(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function Ku(n){return 4===n.type&&n.value!==$d}function NT(n,e,t){return e===(4!==n.type||t?n.value:$d)}function Jp(n,e,t){let r=4;const i=n.attrs,o=null!==i?function vv(n){for(let e=0;e<n.length;e++)if(jd(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!NT(n,c,t)||""===c&&1===e.length){if(co(r))return!1;s=!0}}else if(8&r){if(null===i||!MT(n,i,c,t)){if(co(r))return!1;s=!0}}else{const l=e[++a],f=Zp(c,i,Ku(n),t);if(-1===f){if(co(r))return!1;s=!0;continue}if(""!==l){let m;if(m=f>o?"":i[f+1].toLowerCase(),2&r&&l!==m){if(co(r))return!1;s=!0}}}}else{if(!s&&!co(r)&&!co(c))return!1;if(s&&co(c))continue;s=!1,r=c|1&r}}return co(r)||s}function co(n){return!(1&n)}function Zp(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Xp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function yv(n,e,t=!1){for(let r=0;r<e.length;r++)if(Jp(n,e[r],t))return!0;return!1}function wa(n,e){return n?":not("+e.trim()+")":e}function Iv(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!co(s)&&(e+=wa(o,i),i=""),r=s,o=o||!co(r);t++}return""!==i&&(e+=wa(o,i)),e}function xn(n){return rs(()=>{const e=BT(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Pc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ao.Emulated,styles:n.styles||St,_:null,schemas:n.schemas||null,tView:null,id:""};jT(t);const r=n.dependencies;return t.directiveDefs=eg(r,!1),t.pipeDefs=eg(r,!0),t.id=function Ta(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function LT(n){return yt(n)||ar(n)}function VT(n){return null!==n}function Ns(n){return rs(()=>({type:n.type,bootstrap:n.bootstrap||St,declarations:n.declarations||St,imports:n.imports||St,exports:n.exports||St,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function UT(n,e){if(null==n)return Fo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a=Ms.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Ms.None?[r,a]:r,e[o]=s):t[o]=r}return t}function at(n){return rs(()=>{const e=BT(n);return jT(e),e})}function Sr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function yt(n){return n[Hu]||null}function ar(n){return n[Fp]||null}function Lr(n){return n[Gu]||null}function Jr(n,e){const t=n[As]||null;if(!t&&!0===e)throw new Error(`Type ${sr(n)} does not have '\u0275mod' property.`);return t}function BT(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||St,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UT(n.inputs,e),outputs:UT(n.outputs),debugInfo:null}}function jT(n){n.features?.forEach(e=>e(n))}function eg(n,e){if(!n)return null;const t=e?Lr:LT;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(VT)}function ss(n){return{\u0275providers:n}}function Ev(...n){return{\u0275providers:ng(0,n),\u0275fromNgModule:!0}}function ng(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return Rs(e,s=>{const a=s;rg(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&wv(i,o),t}function wv(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];ig(i,o=>{e(o,r)})}}function rg(n,e,t,r){if(!(n=Xe(n)))return!1;let i=null,o=Cd(n);const s=!o&&yt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=Cd(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)rg(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{Rs(o.imports,f=>{rg(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&wv(l,e)}if(!a){const l=va(i)||(()=>new i);e({provide:i,useFactory:l,deps:St},i),e({provide:Kp,useValue:i,multi:!0},i),e({provide:so,useValue:()=>be(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const l=n;ig(c,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function ig(n,e){for(let t of n)zu(t)&&(t=t.\u0275providers),Array.isArray(t)?ig(t,e):e(t)}const og=Qt({provide:String,useValue:Qt});function Qu(n){return null!==n&&"object"==typeof n&&og in n}function xs(n){return"function"==typeof n}const sg=new ye(""),ag={},zd={};let Tv;function uo(){return void 0===Tv&&(Tv=new Bd),Tv}class Zr{}class Mc extends Zr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ug(e,s=>this.processProvider(s)),this.records.set(Ud,ks(void 0,this)),i.has("environment")&&this.records.set(Zr,ks(void 0,this));const o=this.records.get(sg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Kp,St,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=He(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Oo(this),r=Dr(void 0);try{return e()}finally{Oo(t),Dr(r)}}get(e,t=Fr,r=It.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bc))return e[bc](this);r=Dc(r);const o=Oo(this),s=Dr(void 0);try{if(!(r&It.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function GT(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&Td(e);c=l&&this.injectableDefInScope(l)?ks(Ca(e),ag):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&It.Self?uo():this.parent).get(e,t=r&It.Optional&&t===Fr?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Pd]=a[Pd]||[]).unshift(sr(e)),o)throw a;return function $p(n,e,t,r){const i=n[Pd];throw e[Up]&&i.unshift(e[Up]),n.message=function gv(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=sr(e);if(Array.isArray(e))i=e.map(sr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):sr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Md,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Pd]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Dr(s),Oo(o)}}resolveInjectorInitializers(){const e=He(null),t=Oo(this),r=Dr(void 0);try{const o=this.get(so,St,It.Self);for(const s of o)s()}finally{Oo(t),Dr(r),He(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(sr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(e){let t=xs(e=Xe(e))?e:Xe(e&&e.provide);const r=function Zn(n){return Qu(n)?ks(void 0,n.useValue):ks(Cv(n),ag)}(e);if(!xs(e)&&!0===e.multi){let i=this.records.get(t);i||(i=ks(void 0,ag,!0),i.factory=()=>xd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=He(null);try{return t.value===ag&&(t.value=zd,t.value=t.factory()),"object"==typeof t.value&&t.value&&function cg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Xe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Ca(n){const e=Td(n),t=null!==e?e.factory:va(n);if(null!==t)return t;if(n instanceof ye)throw new he(204,!1);if(n instanceof Function)return function zT(n){if(n.length>0)throw new he(204,!1);const t=function Np(n){return n&&(n[wc]||n[Ad])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new he(204,!1)}function Cv(n,e,t){let r;if(xs(n)){const i=Xe(n);return va(i)||Ca(i)}if(Qu(n))r=()=>Xe(n.useValue);else if(function Yu(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...xd(n.deps||[]));else if(function bv(n){return!(!n||!n.useExisting)}(n))r=()=>be(Xe(n.useExisting));else{const i=Xe(n&&(n.useClass||n.provide));if(!function HT(n){return!!n.deps}(n))return va(i)||Ca(i);r=()=>new i(...xd(n.deps))}return r}function ks(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ug(n,e){for(const t of n)Array.isArray(t)?ug(t,e):t&&zu(t)?ug(t.\u0275providers,e):e(t)}function lo(n,e){n instanceof Mc&&n.assertNotDestroyed();const r=Oo(n),i=Dr(void 0);try{return e()}finally{Oo(r),Dr(i)}}function Av(){return void 0!==hv()||null!=function Bp(){return Ac}()}const Tn=0,Ee=1,Ke=2,Xn=3,ui=4,Rr=5,Xr=6,xc=7,on=8,er=9,Lo=10,nt=11,Zu=12,dg=13,kc=14,Cn=15,Sa=16,Fs=17,as=18,Ls=19,Rv=20,Vo=21,Wd=22,li=23,$e=25,Xu=1,el=6,Bi=7,ji=9,kn=10;var Kd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Kd||{});function ur(n){return Array.isArray(n)&&"object"==typeof n[Xu]}function Vr(n){return Array.isArray(n)&&!0===n[Xu]}function tl(n){return!!(4&n.flags)}function Us(n){return n.componentOffset>-1}function Qd(n){return!(1&~n.flags)}function ho(n){return!!n.template}function Ra(n){return!!(512&n[Ke])}class mg{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Lv(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Ur(){return nl}function nl(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vv),_g}function _g(){const n=Uv(this),e=n?.current;if(e){const t=n.previous;if(t===Fo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Vv(n,e,t,r,i){const o=this.declaredInputs[r],s=Uv(n)||function Bv(n,e){return n[Xd]=e}(n,{previous:Fo,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new mg(l&&l.currentValue,t,c===Fo),Lv(n,e,i,t)}Ur.ngInherit=!0;const Xd="__ngSimpleChanges__";function Uv(n){return n[Xd]||null}const Uo=function(n,e,t){};function jt(n){for(;Array.isArray(n);)n=n[Tn];return n}function rl(n,e){return jt(e[n])}function Pr(n,e){return jt(e[n.index])}function il(n,e){return n.data[e]}function Bs(n,e){return n[e]}function Di(n,e){const t=e[n];return ur(t)?t:t[Tn]}function Ig(n){return!(128&~n[Ke])}function $i(n,e){return null==e?null:n[e]}function $v(n){n[Fs]=0}function zv(n){1024&n[Ke]||(n[Ke]|=1024,Ig(n)&&Oc(n))}function rh(n){return!!(9216&n[Ke]||n[li]?.dirty)}function Eg(n){n[Lo].changeDetectionScheduler?.notify(8),64&n[Ke]&&(n[Ke]|=1024),rh(n)&&Oc(n)}function Oc(n){n[Lo].changeDetectionScheduler?.notify(0);let e=cs(n);for(;null!==e&&!(8192&e[Ke])&&(e[Ke]|=8192,Ig(e));)e=cs(e)}function ih(n,e){if(!(256&~n[Ke]))throw new he(911,!1);null===n[Vo]&&(n[Vo]=[]),n[Vo].push(e)}function cs(n){const e=n[Xn];return Vr(e)?e[Xn]:e}const rt={lFrame:Xv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Gv=!1;function ah(){return rt.bindingsEnabled}function us(){return null!==rt.skipHydrationRootTNode}function ce(){return rt.lFrame.lView}function gt(){return rt.lFrame.tView}function pt(n){return rt.lFrame.contextLView=n,n[on]}function lt(n){return rt.lFrame.contextLView=null,n}function Jt(){let n=ol();for(;null!==n&&64===n.type;)n=n.parent;return n}function ol(){return rt.lFrame.currentTNode}function zi(n,e){const t=rt.lFrame;t.currentTNode=n,t.isParent=e}function Tg(){return rt.lFrame.isParent}function Qv(){return Gv}function iC(n){Gv=n}function ei(){const n=rt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ti(){return rt.lFrame.bindingIndex}function fo(){return rt.lFrame.bindingIndex++}function po(n){const e=rt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sC(n,e){const t=rt.lFrame;t.bindingIndex=t.bindingRootIndex=n,sl(e)}function sl(n){rt.lFrame.currentDirectiveIndex=n}function Lc(n){rt.lFrame.currentQueryIndex=n}function cC(n){const e=n[Ee];return 2===e.type?e.declTNode:1===e.type?n[Rr]:null}function Jv(n,e,t){if(t&It.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&It.Host||(i=cC(o),null===i||(o=o[kc],10&i.type))););if(null===i)return!1;e=i,n=o}const r=rt.lFrame=Zv();return r.currentTNode=e,r.lView=n,!0}function Rg(n){const e=Zv(),t=n[Ee];rt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Zv(){const n=rt.lFrame,e=null===n?null:n.child;return null===e?Xv(n):e}function Xv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Pg(){const n=rt.lFrame;return rt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const uh=Pg;function Mg(){const n=Pg();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lr(){return rt.lFrame.selectedIndex}function ls(n){rt.lFrame.selectedIndex=n}function hn(){const n=rt.lFrame;return il(n.tView,n.selectedIndex)}function eI(){return rt.lFrame.currentNamespace}let Ng=!0;function al(){return Ng}function Bo(n){Ng=n}function dh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function js(n,e,t){tI(n,e,3,t)}function hh(n,e,t,r){(3&n[Ke])===t&&tI(n,e,t,r)}function fh(n,e){let t=n[Ke];(3&t)===e&&(t&=16383,t+=1,n[Ke]=t)}function tI(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Fs]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Fs]+=65536),(a<o||-1==o)&&(pC(n,t,e,c),n[Fs]=(4294901760&n[Fs])+c+2),c++}function nI(n,e){Uo(4,n,e);const t=He(null);try{e.call(n)}finally{He(t),Uo(5,n,e)}}function pC(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ke]>>14<n[Fs]>>16&&(3&n[Ke])===e&&(n[Ke]+=16384,nI(a,o)):nI(a,o)}const Vc=-1;class Uc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const gh={};class Pa{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Dc(r);const i=this.injector.get(e,gh,r);return i!==gh||t===gh?i:this.parentInjector.get(e,t,r)}}function ul(n){return n!==Vc}function Ma(n){return 32767&n}function Bc(n,e){let t=function _C(n){return n>>16}(n),r=e;for(;t>0;)r=r[kc],t--;return r}let jo=!0;function ll(n){const e=jo;return jo=n,e}const rI=255,iI=5;let oI=0;const On={};function jc(n,e){const t=$o(n,e);if(-1!==t)return t;const r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,Lg(r.data,n),Lg(e,null),Lg(r.blueprint,null));const i=$s(n,e),o=n.injectorIndex;if(ul(i)){const s=Ma(i),a=Bc(i,e),c=a[Ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Lg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $o(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function $s(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Fe(i),null===r)return Vc;if(t++,i=i[kc],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Vc}function mh(n,e,t){!function Fg(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(qu)&&(r=t[qu]),null==r&&(r=t[qu]=oI++);const i=r&rI;e.data[n+(i>>iI)]|=1<<i}(n,e,t)}function aI(n,e,t){if(t&It.Optional||void 0!==n)return n;Sd()}function _h(n,e,t,r){if(t&It.Optional&&void 0===r&&(r=null),!(t&(It.Self|It.Host))){const i=n[er],o=Dr(void 0);try{return i?i.get(e,r,t&It.Optional):Lp(e,r,t&It.Optional)}finally{Dr(o)}}return aI(r,0,t)}function cI(n,e,t,r=It.Default,i){if(null!==n){if(2048&e[Ke]&&!(r&It.Self)){const s=function Ue(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Ke]&&!(512&s[Ke]);){const a=uI(o,s,t,r|It.Self,On);if(a!==On)return a;let c=o.parent;if(!c){const l=s[Rv];if(l){const f=l.get(t,On,r);if(f!==On)return f}c=Fe(s),s=s[kc]}o=c}return i}(n,e,t,r,On);if(s!==On)return s}const o=uI(n,e,t,r,On);if(o!==On)return o}return _h(e,t,r,i)}function uI(n,e,t,r,i){const o=function u(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(qu)?n[qu]:void 0;return"number"==typeof e?e>=0?e&rI:z:e}(t);if("function"==typeof o){if(!Jv(e,n,r))return r&It.Host?aI(i,0,r):_h(e,t,r,i);try{let s;if(s=o(r),null!=s||r&It.Optional)return s;Sd()}finally{uh()}}else if("number"==typeof o){let s=null,a=$o(n,e),c=Vc,l=r&It.Host?e[Cn][Rr]:null;for((-1===a||r&It.SkipSelf)&&(c=-1===a?$s(n,e):e[a+8],c!==Vc&&g(r,!1)?(s=e[Ee],a=Ma(c),e=Bc(c,e)):a=-1);-1!==a;){const f=e[Ee];if(d(o,a,f.data)){const m=vC(a,e,t,s,r,l);if(m!==On)return m}c=e[a+8],c!==Vc&&g(r,e[Ee].data[a+8]===l)&&d(o,a,e)?(s=f,a=Ma(c),e=Bc(c,e)):a=-1}}return i}function vC(n,e,t,r,i,o){const s=e[Ee],a=s.data[n+8],f=function yh(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,f=o>>20,y=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<y;I++){const b=s[I];if(I<c&&t===b||I>=c&&b.type===t)return I}if(i){const I=s[c];if(I&&ho(I)&&I.type===t)return c}return null}(a,s,t,null==r?Us(a)&&jo:r!=s&&!!(3&a.type),i&It.Host&&o===a);return null!==f?p(e,s,f,a):On}function p(n,e,t,r){let i=n[t];const o=e.data;if(function xg(n){return n instanceof Uc}(i)){const s=i;s.resolving&&function Cc(n,e){throw e&&e.join(" > "),new he(-200,n)}(function Bt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ut(n)}(o[t]));const a=ll(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Dr(s.injectImpl):null;Jv(n,r,It.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function fC(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=nl(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&Dr(l),ll(a),s.resolving=!1,uh()}}return i}function d(n,e,t){return!!(t[e+(n>>iI)]&1<<n)}function g(n,e){return!(n&It.Self||n&It.Host&&e)}class M{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return cI(this._tNode,this._lView,e,Dc(r),t)}}function z(){return new M(Jt(),ce())}function ee(n){return rs(()=>{const e=n.prototype.constructor,t=e[os]||Ae(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[os]||Ae(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ae(n){return bd(n)?()=>{const e=Ae(Xe(n));return e&&e()}:va(n)}function Fe(n){const e=n[Ee],t=e.type;return 2===t?e.declTNode:1===t?n[Rr]:null}function Ek(n,e=null,t=null,r){const i=wk(n,e,t,r);return i.resolveInjectorInitializers(),i}function wk(n,e=null,t=null,r,i=new Set){const o=[t||St,Ev(n)];return r=r||("object"==typeof n?void 0:sr(n)),new Mc(o,e||uo(),r||null,i)}class Br{static{this.THROW_IF_NOT_FOUND=Fr}static{this.NULL=new Bd}static create(e,t){if(Array.isArray(e))return Ek({name:""},t,e,"");{const r=e.name??"";return Ek({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Re({token:Br,providedIn:"any",factory:()=>be(Ud)})}static{this.__NG_ELEMENT_ID__=-1}}new ye("").__NG_ELEMENT_ID__=n=>{const e=Jt();if(null===e)throw new he(204,!1);if(2&e.type)return e.value;if(n&It.Optional)return null;throw new he(204,!1)};function EC(n){return n.ngOriginalError}const Tk=!0;let Hg=(()=>{class n{static{this.__NG_ELEMENT_ID__=$6}static{this.__NG_ENV_ID__=t=>t}}return n})();class j6 extends Hg{constructor(e){super(),this._lView=e}onDestroy(e){return ih(this._lView,e),()=>function wg(n,e){if(null===n[Vo])return;const t=n[Vo].indexOf(e);-1!==t&&n[Vo].splice(t,1)}(this._lView,e)}}function $6(){return new j6(ce())}let zc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Y(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}}return n})();const Ot=class z6 extends C{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Av()&&(this.destroyRef=G(Hg,{optional:!0})??void 0,this.pendingTasks=G(zc,{optional:!0})??void 0)}emit(e){const t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof kt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function hI(...n){}function Ck(n){let e,t;function r(){n=hI;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ak(n){return queueMicrotask(()=>n()),()=>{n=hI}}const wC="isAngularZone",fI=wC+"_ID";let H6=0;class Rt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Tk}=e;if(typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function W6(n){const e=()=>{!function q6(n){function e(){Ck(()=>{n.callbackScheduled=!1,TC(n),n.isCheckStableRunning=!0,bC(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),TC(n))}(n)},t=H6++;n._inner=n._inner.fork({name:"angular",properties:{[wC]:!0,[fI]:t,[fI+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function K6(n){return Rk(n,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return Dk(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Sk(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Dk(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Q6(n){return Rk(n,"__scheduler_tick__")}(c)&&e(),Sk(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,TC(n),bC(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(wC)}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new he(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,G6,hI,hI);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const G6={};function bC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function TC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Dk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Sk(n){n._nesting--,bC(n)}class CC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ot,this.onMicrotaskEmpty=new Ot,this.onStable=new Ot,this.onError=new Ot}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function Rk(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class zs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&EC(e);for(;t&&EC(t);)t=EC(t);return t||null}}const J6=new ye("",{providedIn:"root",factory:()=>{const n=G(Rt),e=G(zs);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Z6(){return Ih(Jt(),ce())}function Ih(n,e){return new mo(Pr(n,e))}let mo=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Z6}}return n})();const Gg="ngSkipHydration",eq="ngskiphydration";function DC(n){const e=n.mergedAttrs;if(null===e)return!1;for(let t=0;t<e.length;t+=2){const r=e[t];if("number"==typeof r)return!1;if("string"==typeof r&&r.toLowerCase()===eq)return!0}return!1}function Nk(n){return n.hasAttribute(Gg)}function qg(n){return!(128&~n.flags)}const SC=new Map;let tq=0;function RC(n){SC.delete(n[Ls])}const pI="__ngContext__";function di(n,e){ur(e)?(n[pI]=e[Ls],function rq(n){SC.set(n[Ls],n)}(e)):n[pI]=e}function jk(n){return zk(n[Zu])}function $k(n){return zk(n[ui])}function zk(n){for(;null!==n&&!Vr(n);)n=n[ui];return n}let MC;function Hc(){if(void 0!==MC)return MC;if(typeof document<"u")return document;throw new he(210,!1)}const Kg=new ye("",{providedIn:"root",factory:()=>Iq}),Iq="ng",Jk=new ye(""),_o=new ye("",{providedIn:"platform",factory:()=>"unknown"}),Zk=new ye("",{providedIn:"root",factory:()=>Hc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function bq(){const n=new wh;return"browser"===G(_o)&&(n.store=function Tq(n,e){const t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(Hc(),G(Kg))),n}let wh=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Re({token:n,providedIn:"root",factory:bq})}get(t,r){return void 0!==this.store[t]?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();const NC="h",xC="b";var bh=function(n){return n.FirstChild="f",n.NextSibling="n",n}(bh||{});const mI="e",kC="t",Qg="c",_I="x",Th="r",OC="i",yI="n",Yg="d",LC="__nghData__",Jg="ngh";let Xk=()=>null;function Aq(n,e,t=!1){let r=n.getAttribute(Jg);if(null==r)return null;const[i,o]=r.split("|");if(r=t?o:i,!r)return null;const a=t?i:o?`|${o}`:"";let c={};if(""!==r){const f=e.get(wh,null,{optional:!0});null!==f&&(c=f.get(LC,[])[Number(r)])}const l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,vI(l,0,n.nextSibling)),a?n.setAttribute(Jg,a):n.removeAttribute(Jg),l}function VC(n,e,t=!1){return Xk(n,e,t)}function eO(n){let e=n._lView;return 2===e[Ee].type?null:(Ra(e)&&(e=e[$e]),e)}function vI(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function BC(n,e){return n.segmentHeads?.[e]??null}function rO(n,e){return n.data[Qg]?.[e]??null}function jC(n,e){const t=rO(n,e)??[];let r=0;for(let i of t)r+=i[Th]*(i[_I]??1);return r}function hl(n,e){if(typeof n.disconnectedNodes>"u"){const t=n.data[Yg];n.disconnectedNodes=t?new Set(t):null}return!!function iO(n){if(typeof n.disconnectedNodes>"u"){const e=n.data[Yg];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}(n)?.has(e)}const II=new ye(""),aO=new ye("",{providedIn:"root",factory:()=>!1});let EI,wI;function Ch(n){return function zC(){if(void 0===EI&&(EI=null,_n.trustedTypes))try{EI=_n.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return EI}()?.createHTML(n)||n}function hO(n){return function HC(){if(void 0===wI&&(wI=null,_n.trustedTypes))try{wI=_n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wI}()?.createScriptURL(n)||n}class fl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ev})`}}class Oq extends fl{getTypeName(){return"HTML"}}class Fq extends fl{getTypeName(){return"Style"}}class Lq extends fl{getTypeName(){return"Script"}}class Vq extends fl{getTypeName(){return"URL"}}class Uq extends fl{getTypeName(){return"ResourceURL"}}function yo(n){return n instanceof fl?n.changingThisBreaksApplicationSecurity:n}function Hs(n,e){const t=function Bq(n){return n instanceof fl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ev})`)}return t===e}class qq{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ch(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Wq{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ch(e),t}}const Qq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bI(n){return(n=String(n)).match(Qq)?n:"unsafe:"+n}function Na(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function em(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const pO=Na("area,br,col,hr,img,wbr"),gO=Na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mO=Na("rp,rt"),GC=em(pO,em(gO,Na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),em(mO,Na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),em(mO,gO)),qC=Na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_O=em(qC,Na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yq=Na("script,style,template");class Jq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=eW(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=Xq(t);if(o){t=o;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=yO(e).toLowerCase();if(!GC.hasOwnProperty(t))return this.sanitizedSomething=!0,!Yq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!_O.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;qC[a]&&(c=bI(c)),this.buf.push(" ",s,'="',IO(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=yO(e).toLowerCase();GC.hasOwnProperty(t)&&!pO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(IO(e))}}function Xq(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw vO(e);return e}function eW(n){const e=n.firstChild;if(e&&function Zq(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw vO(e);return e}function yO(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function vO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const tW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nW=/([^\#-~ |!])/g;function IO(n){return n.replace(/&/g,"&amp;").replace(tW,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(nW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let TI;function EO(n,e){let t=null;try{TI=TI||function fO(n){const e=new Wq(n);return function Kq(){try{return!!(new window.DOMParser).parseFromString(Ch(""),"text/html")}catch{return!1}}()?new qq(e):e}(n);let r=e?String(e):"";t=TI.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=TI.getInertBodyElement(r)}while(r!==o);return Ch((new Jq).sanitizeChildren(WC(t)||t))}finally{if(t){const r=WC(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function WC(n){return"content"in n&&function rW(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var zo=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(zo||{});function wO(n){const e=tm();return e?e.sanitize(zo.URL,n)||"":Hs(n,"URL")?yo(n):bI(ut(n))}function CI(n){const e=tm();if(e)return hO(e.sanitize(zo.RESOURCE_URL,n)||"");if(Hs(n,"ResourceURL"))return hO(yo(n));throw new he(904,!1)}function tm(){const n=ce();return n&&n[Lo].sanitizer}const lW=/^>|^->|<!--|-->|--!>|<!-$/g,dW=/(<|>)/g,hW="\u200b$1\u200b";function vo(n){return n instanceof Function?n():n}function Io(n){return"browser"===(n??G(Br)).get(_o)}var Gc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gc||{});let YC;function JC(n,e){return YC(n,e)}function Dh(n,e,t,r,i){if(null!=r){let o,s=!1;Vr(r)?o=r:ur(r)&&(s=!0,r=r[Tn]);const a=jt(r);0===n&&null!==t?null==i?FO(e,t,a):pl(e,t,a,i||null,!0):1===n&&null!==t?pl(e,t,a,i||null,!0):2===n?rm(e,a,s):3===n&&e.destroyNode(a),null!=o&&function NW(n,e,t,r,i){const o=t[Bi];o!==jt(t)&&Dh(e,n,r,o,i);for(let a=kn;a<t.length;a++){const c=t[a];MI(c[Ee],c,n,e,r,o)}}(e,n,o,t,i)}}function ZC(n,e){return n.createText(e)}function XC(n,e){return n.createComment(function TO(n){return n.replace(lW,e=>e.replace(dW,hW))}(e))}function SI(n,e,t){return n.createElement(e,t)}function xO(n,e){e[Lo].changeDetectionScheduler?.notify(9),MI(n,e,e[nt],2,null,null)}function kO(n,e){const t=n[ji],r=e[Xn];(ur(r)||e[Cn]!==r[Xn][Cn])&&(n[Ke]|=Kd.HasTransplantedViews),null===t?n[ji]=[e]:t.push(e)}function e0(n,e){const t=n[ji],r=t.indexOf(e);t.splice(r,1)}function nm(n,e){if(n.length<=kn)return;const t=kn+e,r=n[t];if(r){const i=r[Sa];null!==i&&i!==n&&e0(i,r),e>0&&(n[t-1][ui]=r[ui]);const o=Ia(n,kn+e);!function TW(n,e){xO(n,e),e[Tn]=null,e[Rr]=null}(r[Ee],r);const s=o[as];null!==s&&s.detachView(o[Ee]),r[Xn]=null,r[ui]=null,r[Ke]&=-129}return r}function RI(n,e){if(!(256&e[Ke])){const t=e[nt];t.destroyNode&&MI(n,e,t,3,null,null),function AW(n){let e=n[Zu];if(!e)return t0(n[Ee],n);for(;e;){let t=null;if(ur(e))t=e[Zu];else{const r=e[kn];r&&(t=r)}if(!t){for(;e&&!e[ui]&&e!==n;)ur(e)&&t0(e[Ee],e),e=e[Xn];null===e&&(e=n),ur(e)&&t0(e[Ee],e),t=e&&e[ui]}e=t}}(e)}}function t0(n,e){if(256&e[Ke])return;const t=He(null);try{e[Ke]&=-129,e[Ke]|=256,e[li]&&rr(e[li]),function RW(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Uc)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Uo(4,a,c);try{c.call(a)}finally{Uo(5,a,c)}}else{Uo(4,i,o);try{o.call(i)}finally{Uo(5,i,o)}}}}}(n,e),function SW(n,e){const t=n.cleanup,r=e[xc];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[xc]=null);const i=e[Vo];if(null!==i){e[Vo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Ee].type&&e[nt].destroy();const r=e[Sa];if(null!==r&&Vr(e[Xn])){r!==e[Xn]&&e0(r,e);const i=e[as];null!==i&&i.detachView(n)}RC(e)}finally{He(t)}}function n0(n,e,t){return function OO(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[Tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===ao.None||o===ao.Emulated)return null}return Pr(r,t)}}(n,e.parent,t)}function pl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FO(n,e,t){n.appendChild(e,t)}function LO(n,e,t,r,i){null!==r?pl(n,e,t,r,i):FO(n,e,t)}function r0(n,e){return n.parentNode(e)}let o0,BO=function UO(n,e,t){return 40&n.type?Pr(n,t):null};function PI(n,e,t,r){const i=n0(n,r,e),o=e[nt],a=function VO(n,e,t){return BO(n,e,t)}(r.parent||e[Rr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)LO(o,i,t[c],a,!1);else LO(o,i,t,a,!1);void 0!==o0&&o0(o,r,e,t,i)}function gl(n,e){if(null!==e){const t=e.type;if(3&t)return Pr(e,n);if(4&t)return s0(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return gl(n,r);{const i=n[e.index];return Vr(i)?s0(-1,i):jt(i)}}if(128&t)return gl(n,e.next);if(32&t)return JC(e,n)()||jt(n[e.index]);{const r=$O(n,e);return null!==r?Array.isArray(r)?r[0]:gl(cs(n[Cn]),r):gl(n,e.next)}}return null}function $O(n,e){return null!==e?n[Cn][Rr].projection[e.projection]:null}function s0(n,e){const t=kn+n+1;if(t<e.length){const r=e[t],i=r[Ee].firstChild;if(null!==i)return gl(r,i)}return e[Bi]}function rm(n,e,t){n.removeChild(null,e,t)}function zO(n){n.textContent=""}function a0(n,e,t,r,i,o,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],c=t.type;if(s&&0===e&&(a&&di(jt(a),r),t.flags|=2),32&~t.flags)if(8&c)a0(n,e,t.child,r,i,o,!1),Dh(e,n,i,a,o);else if(32&c){const l=JC(t,r);let f;for(;f=l();)Dh(e,n,i,f,o);Dh(e,n,i,a,o)}else 16&c?HO(n,e,r,t,i,o):Dh(e,n,i,a,o);t=s?t.projectionNext:t.next}}function MI(n,e,t,r,i,o){a0(t,r,n.firstChild,e,i,o,!1)}function HO(n,e,t,r,i,o){const s=t[Cn],c=s[Rr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Dh(e,n,i,c[l],o);else{let l=c;const f=s[Xn];qg(r)&&(l.flags|=128),a0(n,e,l,f,i,o,!0)}}function GO(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qO(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Yp(n,e,r),null!==i&&GO(n,e,i),null!==o&&function kW(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}const dt={};function ne(n=1){WO(gt(),ce(),lr()+n,!1)}function WO(n,e,t,r){if(!r)if(3&~e[Ke]){const o=n.preOrderHooks;null!==o&&hh(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&js(e,o,t)}ls(t)}function Ie(n,e=It.Default){const t=ce();return null===t?be(n,e):cI(Jt(),t,Xe(n),e)}function QO(n,e,t,r,i,o){const s=He(null);try{let a=null;i&Ms.SignalBased&&(a=e[r][qt]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&Ms.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),null!==n.setInput?n.setInput(e,a,o,t,r):Lv(e,a,r,o)}finally{He(s)}}function NI(n,e,t,r,i,o,s,a,c,l,f){const m=e.blueprint.slice();return m[Tn]=i,m[Ke]=204|r,(null!==l||n&&2048&n[Ke])&&(m[Ke]|=2048),$v(m),m[Xn]=m[kc]=n,m[on]=t,m[Lo]=s||n&&n[Lo],m[nt]=a||n&&n[nt],m[er]=c||n&&n[er]||null,m[Rr]=o,m[Ls]=function nq(){return tq++}(),m[Xr]=f,m[Rv]=l,m[Cn]=2==e.type?n[Cn]:m,m}function ml(n,e,t,r,i){let o=n.data[e];if(null===o)o=function c0(n,e,t,r,i){const o=ol(),s=Tg(),c=n.data[e]=function $W(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return us()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function oC(){return rt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Fc(){const n=rt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return zi(o,!0),o}function im(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YO(n,e,t,r,i){const o=lr(),s=2&r;try{ls(-1),s&&e.length>$e&&WO(n,e,$e,!1),Uo(s?2:0,i),t(r,i)}finally{ls(o),Uo(s?3:1,i)}}function u0(n,e,t){if(tl(e)){const r=He(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{He(r)}}}function l0(n,e,t){ah()&&(function QW(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Us(t)&&function n9(n,e,t){const r=Pr(e,n),i=JO(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=xI(n,NI(n,i,null,s,r,e,null,n[Lo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||jc(t,e),di(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],l=p(e,n,a,t);di(l,e),null!==s&&r9(0,a-i,l,c,0,s),ho(c)&&(Di(t.index,e)[on]=p(e,n,a,t))}}(n,e,t,Pr(t,e)),!(64&~t.flags)&&n1(n,e,t))}function d0(n,e,t=Pr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function JO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=h0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function h0(n,e,t,r,i,o,s,a,c,l,f){const m=$e+r,y=m+i,I=function FW(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:dt);return t}(m,y),b="function"==typeof l?l():l;return I[Ee]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}let ZO=()=>null;function UW(n){Nk(n)?zO(n):function Rq(n){const e=Hc(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){const s=function Sq(n){return n.textContent?.replace(/\s/gm,"")}(o);return"ngetn"===s||"ngtns"===s?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=t.nextNode();)i.push(r);for(const o of i)"ngetn"===o.textContent?o.replaceWith(e.createTextNode("")):o.remove()}(n)}function XO(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,c=Ms.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(null!==i){if(!i.hasOwnProperty(o))continue;l=i[o]}0===n?e1(r,t,l,a,c):e1(r,t,l,a)}return r}function e1(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],void 0!==i&&o.push(i)}function qi(n,e,t,r,i,o,s,a){const c=Pr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(_0(n,t,f,r,i),Us(e)&&function GW(n,e){const t=Di(e,n);16&t[Ke]||(t[Ke]|=64)}(t,e.index)):3&e.type&&(r=function HW(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function f0(n,e,t,r){if(ah()){const i=null===r?null:{"":-1},o=function JW(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(yv(e,s.selectors,!1))if(r||(r=[]),ho(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),p0(n,e,a.length)}else r.unshift(s),p0(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&t1(n,e,t,s,i,a),i&&function ZW(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new he(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Ea(t.mergedAttrs,t.attrs)}function t1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)mh(jc(t,e),n,r[l].type);!function e9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=im(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=Ea(t.mergedAttrs,f.hostAttrs),t9(n,t,e,c,f),XW(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function zW(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=o[f],y=t?t.get(m):null,b=y?y.outputs:null;c=XO(0,m.inputs,f,c,y?y.inputs:null),l=XO(1,m.outputs,f,l,b);const D=null===c||null===s||Ku(e)?null:i9(c,f,s);a.push(D)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function n1(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function aC(){return rt.lFrame.currentDirectiveIndex}();try{ls(o);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];sl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&YW(c,l)}}finally{ls(-1),sl(s)}}function YW(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function p0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function XW(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ho(e)&&(t[""]=n)}}function t9(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=va(i.type)),s=new Uc(o,ho(i),Ie);n.blueprint[r]=s,t[r]=s,function WW(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function KW(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,im(n,t,i.hostVars,dt),i)}function Gs(n,e,t,r,i,o){const s=Pr(n,e);!function g0(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?ut(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[nt],s,o,n.value,t,r,i)}function r9(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)QO(r,t,s[a++],s[a++],s[a++],s[a++])}function i9(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function r1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function i1(n,e){const t=n.contentQueries;if(null!==t){const r=He(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];Lc(t[i]),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function xI(n,e){return n[Zu]?n[dg][ui]=e:n[Zu]=e,n[dg]=e,e}function m0(n,e,t){Lc(0);const r=He(null);try{e(n,t)}finally{He(r)}}function kI(n,e){const t=n[er],r=t?t.get(zs,null):null;r&&r.handleError(e)}function _0(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],c=t[o++];QO(n.data[s],e[s],r,a,c,i)}}function xa(n,e,t){const r=rl(e,n);!function NO(n,e,t){n.setValue(e,t)}(n[nt],r,t)}function o9(n,e){const t=Di(e,n),r=t[Ee];!function s9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Tn];null!==i&&null===t[Xr]&&(t[Xr]=VC(i,t[er])),y0(r,t,t[on])}function y0(n,e,t){Rg(e);try{const r=n.viewQuery;null!==r&&m0(1,r,t);const i=n.template;null!==i&&YO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[as]?.finishViewCreation(n),n.staticContentQueries&&i1(n,e),n.staticViewQueries&&m0(2,n.viewQuery,t);const o=n.components;null!==o&&function a9(n,e){for(let t=0;t<e.length;t++)o9(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ke]&=-5,Mg()}}function Sh(n,e,t,r){const i=He(null);try{const o=e.tView,c=NI(n,o,t,4096&n[Ke]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[Sa]=n[e.index];const f=n[as];return null!==f&&(c[as]=f.createEmbeddedView(o)),y0(o,c,t),c}finally{He(i)}}function c1(n,e){const t=kn+e;if(t<n.length)return n[t]}function _l(n,e){return!e||null===e.firstChild||qg(n)}function Rh(n,e,t,r=!0){const i=e[Ee];if(function DW(n,e,t,r){const i=kn+r,o=t.length;r>0&&(t[i-1][ui]=e),r<o-kn?(e[ui]=t[i],Fd(t,kn+r,e)):(t.push(e),e[ui]=null),e[Xn]=t;const s=e[Sa];null!==s&&t!==s&&kO(s,e);const a=e[as];null!==a&&a.insertView(n),Eg(e),e[Ke]|=128}(i,e,n,t),r){const s=s0(t,n),a=e[nt],c=r0(a,n[Bi]);null!==c&&function CW(n,e,t,r,i,o){r[Tn]=i,r[Rr]=e,MI(n,r,t,1,i,o)}(i,n[Rr],a,e,c,s)}const o=e[Xr];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function v0(n,e){const t=nm(n,e);return void 0!==t&&RI(t[Ee],t),t}function om(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=e[t.index];null!==o&&r.push(jt(o)),Vr(o)&&u1(o,r);const s=t.type;if(8&s)om(n,e,t.child,r);else if(32&s){const a=JC(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=$O(e,t);if(Array.isArray(a))r.push(...a);else{const c=cs(e[Cn]);om(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function u1(n,e){for(let t=kn;t<n.length;t++){const r=n[t],i=r[Ee].firstChild;null!==i&&om(r[Ee],r,i,e)}n[Bi]!==n[Tn]&&e.push(n[Bi])}let l1=[];const d9={...ue,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Oc(n.lView)},consumerOnSignalRead(){this.lView[li]=this}},f9={...ue,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=cs(n.lView);for(;e&&!d1(e[Ee]);)e=cs(e);e&&zv(e)},consumerOnSignalRead(){this.lView[li]=this}};function d1(n){return 2!==n.type}const p9=100;function OI(n,e=!0,t=0){const r=n[Lo],i=r.rendererFactory;i.begin?.();try{!function g9(n,e){const t=Qv();try{iC(!0),I0(n,e);let r=0;for(;rh(n);){if(r===p9)throw new he(103,!1);r++,I0(n,1)}}finally{iC(t)}}(n,t)}catch(s){throw e&&kI(n,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function m9(n,e,t,r){const i=e[Ke];if(!(256&~i))return;e[Lo].inlineEffectRunner?.flush(),Rg(e);let a=!0,c=null,l=null;d1(n)?(l=function c9(n){return n[li]??function u9(n){const e=l1.pop()??Object.create(d9);return e.lView=n,e}(n)}(e),c=ot(l)):null===function gn(){return Be}()?(a=!1,l=function h9(n){const e=n[li]??Object.create(f9);return e.lView=n,e}(e),c=ot(l)):e[li]&&(rr(e[li]),e[li]=null);try{$v(e),function Yv(n){return rt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&YO(n,e,t,2,r);const f=!(3&~i);if(f){const I=n.preOrderCheckHooks;null!==I&&js(e,I,null)}else{const I=n.preOrderHooks;null!==I&&hh(e,I,0,null),fh(e,0)}if(function _9(n){for(let e=jk(n);null!==e;e=$k(e)){if(!(e[Ke]&Kd.HasTransplantedViews))continue;const t=e[ji];for(let r=0;r<t.length;r++)zv(t[r])}}(e),f1(e,0),null!==n.contentQueries&&i1(n,e),f){const I=n.contentCheckHooks;null!==I&&js(e,I)}else{const I=n.contentHooks;null!==I&&hh(e,I,1),fh(e,1)}!function OW(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)ls(~i);else{const o=i,s=t[++r],a=t[++r];sC(s,o),a(2,e[o])}}}finally{ls(-1)}}(n,e);const m=n.components;null!==m&&g1(e,m,0);const y=n.viewQuery;if(null!==y&&m0(2,y,r),f){const I=n.viewCheckHooks;null!==I&&js(e,I)}else{const I=n.viewHooks;null!==I&&hh(e,I,2),fh(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Wd]){for(const I of e[Wd])I();e[Wd]=null}e[Ke]&=-73}catch(f){throw Oc(e),f}finally{null!==l&&(tt(l,c),a&&function l9(n){n.lView[li]!==n&&(n.lView=null,l1.push(n))}(l)),Mg()}}function f1(n,e){for(let t=jk(n);null!==t;t=$k(t))for(let r=kn;r<t.length;r++)p1(t[r],e)}function y9(n,e,t){p1(Di(e,n),t)}function p1(n,e){Ig(n)&&I0(n,e)}function I0(n,e){const r=n[Ee],i=n[Ke],o=n[li];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!Pn(o)),s||=!1,o&&(o.dirty=!1),n[Ke]&=-9217,s)m9(r,n,r.template,n[on]);else if(8192&i){f1(n,1);const a=r.components;null!==a&&g1(n,a,1)}}function g1(n,e,t){for(let r=0;r<e.length;r++)y9(n,e[r],t)}function sm(n,e){const t=Qv()?64:1088;for(n[Lo].changeDetectionScheduler?.notify(e);n;){n[Ke]|=t;const r=cs(n);if(Ra(n)&&!r)return n;n=r}return null}class am{get rootNodes(){const e=this._lView,t=e[Ee];return om(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return!(256&~this._lView[Ke])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Xn];if(Vr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(nm(e,r),Ia(t,r))}this._attachedToViewContainer=!1}RI(this._lView[Ee],this._lView)}onDestroy(e){ih(this._lView,e)}markForCheck(){sm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ke]&=-129}reattach(){Eg(this._lView),this._lView[Ke]|=128}detectChanges(){this._lView[Ke]|=1024,OI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Ra(this._lView),t=this._lView[Sa];null!==t&&!e&&e0(t,this._lView),xO(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=e;const t=Ra(this._lView),r=this._lView[Sa];null!==r&&!t&&kO(r,this._lView),Eg(this._lView)}}let ka=(()=>{class n{static{this.__NG_ELEMENT_ID__=E9}}return n})();const v9=ka,I9=class extends v9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Sh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new am(i)}};function E9(){return function FI(n,e){return 4&n.type?new I9(e,n,Ih(n,e)):null}(Jt(),ce())}const U9=new RegExp(`^(\\d+)*(${xC}|${NC})*(.*)`);function C0(n){return n.index-$e}function fm(n,e,t,r){const i=C0(r);let o=function D1(n,e){const t=n.i18nNodes;if(t)return t.get(e)}(n,i);if(void 0===o){const s=n.data[yI];if(s?.[i])o=function S1(n,e){const[t,...r]=function j9(n){const e=n.match(U9),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(const[c,l,f]of o.matchAll(/(f|n)(\d*)/g)){const m=parseInt(f,10)||1;a.push(l,m)}return[s,...a]}(n);let i;i=t===NC?e[Cn][Tn]:t===xC?function SO(n){return n.ownerDocument.body}(e[Cn][Tn]):jt(e[Number(t)+$e]);return function H9(n,e){let t=n;for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case bh.FirstChild:t=t.firstChild;break;case bh.NextSibling:t=t.nextSibling}}return t}(i,r)}(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{const a=null===r.prev,c=r.prev??r.parent;if(function $9(n){return!n.prev&&8===n.parent?.type}(r))o=BC(n,C0(r.parent));else{let l=Pr(c,t);if(a)o=l.firstChild;else{const f=C0(c),m=BC(n,f);o=2===c.type&&m?BI(jC(n,f)+1,m):l.nextSibling}}}}return o}function BI(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}let P1=!1;function a8(n,e,t){for(const r of t.node.cases[t.case]){const i=e.get(r.index-$e);i&&rm(n,i,!1)}}function k1(n){const e=n[el]??[],r=n[Xn][nt];for(const i of e)c8(i,r);n[el]=St}function c8(n,e){let t=0,r=n.firstChild;if(r){const i=n.data[Th];for(;t<i;){const o=r.nextSibling;rm(e,r,!1),r=o,t++}}}function O1(n){k1(n);const e=n[Tn];ur(e)&&jI(e);for(let t=kn;t<n.length;t++)jI(n[t])}function jI(n){!function s8(n){const e=n[Xr];if(e){const{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){const i=n[nt];for(const o of r.values())a8(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}(n);const e=n[Ee];for(let t=$e;t<e.bindingStartIndex;t++)Vr(n[t])?O1(n[t]):ur(n[t])&&jI(n[t])}let F1=()=>null;function d8(n,e){const t=n[el];return e&&null!==t&&0!==t.length?t[0].data[OC]===e?t.shift():(k1(n),null):null}function vl(n,e){return F1(n,e)}class Mh{}const Nh=new ye("",{providedIn:"root",factory:()=>!1}),L1=new ye(""),M0=new ye("");class f8{}class V1{}class g8{resolveComponentFactory(e){throw function p8(n){const e=Error(`No component factory found for ${sr(n)}.`);return e.ngComponent=n,e}(e)}}class $I{static{this.NULL=new g8}}class N0{}let Oa=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function m8(){const n=ce(),t=Di(Jt().index,n);return(ur(t)?t:n)[nt]}()}}return n})(),_8=(()=>{class n{static{this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>null})}}return n})();function HI(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=wd(i,a):2==o&&(r=wd(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class $1 extends $I{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new _m(t,this.ngModule)}}function z1(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const o=Array.isArray(i),s=o?i[0]:i;t.push(e?{propName:s,templateName:r,isSignal:!!((o?i[1]:Ms.None)&Ms.SignalBased)}:{propName:s,templateName:r})}return t}class _m extends V1{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=z1(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return z1(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function OT(n){return n.map(Iv).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const o=He(null);try{let s=(i=i||this.ngModule)instanceof Zr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Pa(e,s):e,c=a.get(N0,null);if(null===c)throw new he(407,!1);const m={rendererFactory:c,sanitizer:a.get(_8,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Mh,null)},y=c.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",b=r?function LW(n,e,t,r){const o=r.get(aO,!1)||t===ao.ShadowDom,s=n.selectRootElement(e,o);return function VW(n){ZO(n)}(s),s}(y,r,this.componentDef.encapsulation,a):SI(y,I,function I8(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I));let D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let R=null;null!==b&&(R=VC(b,a,!0));const B=h0(0,null,null,1,0,null,null,null,null,null,null),L=NI(null,B,null,D,null,null,m,y,a,null,R);Rg(L);let q,fe,Te=null;try{const Me=this.componentDef;let U,N=null;Me.findHostDirectiveDefs?(U=[],N=new Map,Me.findHostDirectiveDefs(Me,U,N),U.push(Me)):U=[Me];const F=function w8(n,e){const t=n[Ee],r=$e;return n[r]=e,ml(t,r,2,"#host",null)}(L,b);Te=function b8(n,e,t,r,i,o,s){const a=i[Ee];!function T8(n,e,t,r){for(const i of n)e.mergedAttrs=Ea(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(HI(e,e.mergedAttrs,!0),null!==t&&qO(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=VC(e,i[er]));const l=o.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=NI(i,JO(t),null,f,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&p0(a,n,r.length-1),xI(i,m),i[n.index]=m}(F,b,Me,U,L,m,y),fe=il(B,$e),b&&function A8(n,e,t,r){if(r)Yp(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:o}=function FT(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!co(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Yp(n,t,i),o&&o.length>0&&GO(n,t,o.join(" "))}}(y,Me,b,r),void 0!==t&&function D8(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(fe,this.ngContentSelectors,t),q=function C8(n,e,t,r,i,o){const s=Jt(),a=i[Ee],c=Pr(s,i);t1(a,i,s,t,null,r);for(let f=0;f<t.length;f++)di(p(i,a,s.directiveStart+f,s),i);n1(a,i,s),c&&di(c,i);const l=p(i,a,s.directiveStart+s.componentOffset,s);if(n[on]=i[on]=l,null!==o)for(const f of o)f(l,e);return u0(a,s,i),l}(Te,Me,U,N,L,[S8]),y0(B,L,null)}catch(Me){throw null!==Te&&RC(Te),RC(L),Me}finally{Mg()}return new E8(this.componentType,q,Ih(fe,L),L,fe)}finally{He(o)}}}class E8 extends f8{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new am(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;_0(o[Ee],o,i,e,t),this.previousInputValues.set(e,t),sm(Di(this._tNode.index,o),1)}}get injector(){return new M(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function S8(){const n=Jt();dh(ce()[Ee],n)}let ds=(()=>{class n{static{this.__NG_ELEMENT_ID__=R8}}return n})();function R8(){return function q1(n,e){let t;const r=e[n.index];return Vr(r)?t=r:(t=r1(r,e,null,n),e[n.index]=t,xI(e,t)),W1(t,e,n,r),new H1(t,n,e)}(Jt(),ce())}const P8=ds,H1=class extends P8{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ih(this._hostTNode,this._hostLView)}get injector(){return new M(this._hostTNode,this._hostLView)}get parentInjector(){const e=$s(this._hostTNode,this._hostLView);if(ul(e)){const t=Bc(e,this._hostLView),r=Ma(e);return new M(t[Ee].data[r+8],t)}return new M(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=G1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=vl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,_l(this._hostTNode,s)),a}createComponent(e,t,r,i,o){const s=e&&!function Da(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const c=s?e:new _m(yt(e)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?l:this.parentInjector).get(Zr,null);D&&(o=D)}const f=yt(c.componentType??{}),m=vl(this._lContainer,f?.id??null),I=c.create(l,i,m?.firstChild??null,o);return this.insertImpl(I.hostView,a,_l(this._hostTNode,m)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function ZT(n){return Vr(n[Xn])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[Xn],l=new H1(c,c[Rr],c[Xn]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Rh(s,i,o,r),e.attachToViewContainerRef(),Fd(O0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=G1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=nm(this._lContainer,t);r&&(Ia(O0(this._lContainer),t),RI(r[Ee],r))}detach(e){const t=this._adjustIndex(e,-1),r=nm(this._lContainer,t);return r&&null!=Ia(O0(this._lContainer),t)?new am(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function G1(n){return n[8]}function O0(n){return n[8]||(n[8]=[])}let W1=Q1,F0=()=>!1;function Q1(n,e,t,r){if(n[Bi])return;let i;i=8&t.type?jt(r):function M8(n,e){const t=n[nt],r=t.createComment(""),i=Pr(e,n);return pl(t,r0(t,i),r,function PW(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Bi]=i}function N8(n,e,t){if(n[Bi]&&n[el])return!0;const r=t[Xr],i=e.index-$e;if(!r||function Wg(n){if(qg(n))return!0;let e=n.parent;for(;e;){if(qg(n)||DC(e))return!0;e=e.parent}return!1}(e)||hl(r,i))return!1;const s=BC(r,i),a=r.data[Qg]?.[i],[c,l]=function l8(n,e){const t=[];for(const r of e)for(let i=0;i<(r[_I]??1);i++){const o={data:r,firstChild:null};r[Th]>0&&(o.firstChild=n,n=BI(r[Th],n)),t.push(o)}return[n,t]}(s,a);return n[Bi]=c,n[el]=l,!0}function x8(n,e,t,r){F0(n,t,e)||Q1(n,e,t,r)}const rF=new Set;function hi(n){rF.has(n)||(rF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Wi(n,e){hi("NgSignals");const t=function ws(n){const e=Object.create(me);e.value=n;const t=()=>(_e(e),e.value);return t[qt]=e,t}(n),r=t[qt];return e?.equal&&(r.equal=e.equal),t.set=i=>se(r,i),t.update=i=>function J(n,e){Jn()||Nn(),se(n,e(n.value))}(r,i),t.asReadonly=oF.bind(t),t}function oF(){const n=this[qt];if(void 0===n.readonlyFn){const e=()=>this();e[qt]=n,n.readonlyFn=e}return n.readonlyFn}function sF(n){return function iF(n){return"function"==typeof n&&void 0!==n[qt]}(n)&&"function"==typeof n.set}function an(n){let e=function _F(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ho(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new he(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=qI(n.inputs),s.inputTransforms=qI(n.inputTransforms),s.declaredInputs=qI(n.declaredInputs),s.outputs=qI(n.outputs);const a=i.hostBindings;a&&e7(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&Z8(n,c),l&&X8(n,l),Y8(n,i),wT(n.outputs,i.outputs),ho(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===an&&(t=!1)}}e=Object.getPrototypeOf(e)}!function J8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ea(i.hostAttrs,t=Ea(t,i.hostAttrs))}}(r)}function Y8(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function qI(n){return n===Fo?{}:n===St?[]:n}function Z8(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function X8(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function e7(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function wF(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Il{}class bF{}class q0 extends Il{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $1(this);const o=Jr(e);this._bootstrapComponents=vo(o.bootstrap),this._r3Injector=wk(e,t,[{provide:Il,useValue:this},{provide:$I,useValue:this.componentFactoryResolver},...r],sr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class W0 extends bF{constructor(e){super(),this.moduleType=e}create(e){return new q0(this.moduleType,e,[])}}class TF extends Il{constructor(e){super(),this.componentFactoryResolver=new $1(this),this.instance=null;const t=new Mc([...e.providers,{provide:Il,useValue:this},{provide:$I,useValue:this.componentFactoryResolver}],e.parent||uo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WI(n,e,t=null){return new TF({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function K0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qs(n,e,t){return n[e]=t}function dr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function El(n,e,t,r){const i=dr(n,e,t);return dr(n,e+1,r)||i}function QI(n,e,t,r,i){const o=El(n,e,t,r);return dr(n,e+2,i)||o}function kh(n){return!(32&~n.flags)}function Im(n,e,t,r,i,o,s,a,c,l){const f=t+$e,m=e.firstCreatePass?function h7(n,e,t,r,i,o,s,a,c){const l=e.consts,f=ml(e,n,4,s||null,a||null);f0(e,t,f,$i(l,c)),dh(e,f);const m=f.tView=h0(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,e,n,r,i,o,s,a,c):e.data[f];zi(m,!1);const y=CF(e,n,m,t);al()&&PI(e,n,y,m),di(y,n);const I=r1(y,n,y,m);return n[f]=I,xI(n,I),function K1(n,e,t){return F0(n,e,t)}(I,m,n),Qd(m)&&l0(e,n,m),null!=c&&d0(n,m,l),m}function zn(n,e,t,r,i,o,s,a){const c=ce(),l=gt();return Im(c,l,n,e,t,r,i,$i(l.consts,o),s,a),zn}let CF=AF;function AF(n,e,t,r){return Bo(!0),e[nt].createComment("")}function f7(n,e,t,r){const i=e[Xr],o=!i||us()||kh(t)||hl(i,r);if(Bo(o),o)return AF(0,e);const s=i.data[kC]?.[r]??null;null!==s&&null!==t.tView&&null===t.tView.ssrId&&(t.tView.ssrId=s);const a=fm(i,n,e,t);return vI(i,r,a),BI(jC(i,r),a)}var Fh=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Fh||{});let NF=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>new n})}}return n})();class bm{constructor(){this.ngZone=G(Rt),this.scheduler=G(Mh),this.errorHandler=G(zs,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Fh.EarlyRead,Fh.Write,Fh.MixedReadWrite,Fh.Read]}execute(){this.executing=!0;for(const e of bm.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Re({token:bm,providedIn:"root",factory:()=>new bm})}}class m7{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function XI(n,e){!e?.injector&&function Nc(n){if(!Av())throw new he(-203,!1)}();const t=e?.injector??G(Br);return Io(t)?(hi("NgAfterNextRender"),function xF(n,e,t,r){const i=e.get(NF);i.impl??=e.get(bm);const o=t?.phase??Fh.MixedReadWrite,s=!0!==t?.manualCleanup?e.get(Hg):null,a=new m7(i.impl,function y7(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,o),r,s);return i.impl.register(a),a}(n,t,e,!0)):kF}const kF={destroy(){}};function Ws(n,e,t,r){const i=ce();return dr(i,fo(),e)&&(gt(),Gs(hn(),i,n,e,t,r)),Ws}function zh(n,e,t,r){return dr(n,fo(),t)?e+ut(t)+r:dt}function nE(n,e){return n<<17|e<<2}function Qc(n){return n>>17&32767}function oA(n){return 2|n}function bl(n){return(131068&n)>>2}function sA(n,e){return-131069&n|e<<2}function aA(n){return 1|n}function sL(n,e,t,r){const i=n[t+1],o=null===e;let s=r?Qc(i):bl(i),a=!1;for(;0!==s&&(!1===a||o);){const l=n[s+1];eK(n[s],e)&&(a=!0,n[s+1]=r?aA(l):oA(l)),s=r?Qc(l):bl(l)}a&&(n[t+1]=r?oA(i):aA(i))}function eK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ps(n,e)>=0}function Xt(n,e,t){const r=ce();return dr(r,fo(),e)&&qi(gt(),hn(),r,n,e,r[nt],t,!1),Xt}function cA(n,e,t,r,i){const s=i?"class":"style";_0(n,t,e.inputs[s],s,r)}function Zh(n,e){return function hs(n,e,t,r){const i=ce(),o=gt(),s=po(2);o.firstUpdatePass&&function gL(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[lr()],s=function pL(n,e){return e>=n.expandoStartIndex}(n,t);(function vL(n,e){return!!(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function uK(n,e,t,r){const i=function Dg(n){const e=rt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Cm(t=uA(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=uA(i,n,e,t,r),null===o){let c=function lK(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==bl(r))return n[Qc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=uA(null,n,e,c[1],r),c=Cm(c,e.attrs,r),function dK(n,e,t,r){n[Qc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function hK(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Cm(r,n[o].hostAttrs,t);return Cm(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function Z7(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qc(s),c=bl(s);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Ps(t,f)>0)&&(l=!0)):f=t,i)if(0!==c){const y=Qc(n[a+1]);n[r+1]=nE(y,a),0!==y&&(n[y+1]=sA(n[y+1],r)),n[a+1]=function Y7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=nE(a,0),0!==a&&(n[a+1]=sA(n[a+1],r)),a=r;else n[r+1]=nE(c,0),0===a?a=r:n[c+1]=sA(n[c+1],r),c=r;l&&(n[r+1]=oA(n[r+1])),sL(n,f,r,!0),sL(n,f,r,!1),function X7(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ps(o,e)>=0&&(t[r+1]=aA(t[r+1]))}(e,f,n,r,o),s=nE(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==dt&&dr(i,s,e)&&function _L(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],f=function J7(n){return!(1&~n)}(l)?yL(c,e,t,i,bl(l),s):void 0;rE(f)||(rE(o)||function Q7(n){return!(2&~n)}(l)&&(o=yL(c,null,t,i,a,s)),function xW(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Gc.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gc.Important),n.setStyle(t,r,i,o))}}(r,s,rl(lr(),t),i,o))}(o,o.data[lr()],i,i[nt],n,i[s+1]=function mK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=sr(yo(n)))),n}(e,t),r,s)}(n,e,null,!0),Zh}function uA(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Cm(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Cm(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Yr(n,s,!!t||e[++o]))}return void 0===n?null:n}function yL(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),f=l?c[1]:c,m=null===f;let y=t[i+1];y===dt&&(y=m?St:void 0);let I=m?Wp(y,r):f===r?y:void 0;if(l&&!rE(I)&&(I=Wp(c,r)),rE(I)&&(a=I,s))return a;const b=n[i+1];i=s?Qc(b):bl(b)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Wp(c,r))}return a}function rE(n){return void 0!==n}class DK{destroy(e){}updateValue(e,t){}swap(e,t){const r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}}function lA(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function dA(n,e,t,r){return!(void 0===e||!e.has(r)||(n.attach(t,e.get(r)),e.delete(r),0))}function IL(n,e,t,r,i){if(dA(n,e,r,t(r,i)))n.updateValue(r,i);else{const o=n.create(r,i);n.attach(r,o)}}function EL(n,e,t,r){const i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}class wL{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}}function en(n,e){hi("NgControlFlow");const t=ce(),r=fo(),i=t[r]!==dt?t[r]:-1,o=-1!==i?iE(t,$e+i):void 0;if(dr(t,r,n)){const a=He(null);try{if(void 0!==o&&v0(o,0),-1!==n){const c=$e+n,l=iE(t,c),f=hA(t[Ee],c),m=vl(l,f.tView.ssrId);Rh(l,Sh(t,f,e,{dehydratedView:m}),0,_l(f,m))}}finally{He(a)}}else if(void 0!==o){const a=c1(o,0);void 0!==a&&(a[on]=e)}}class RK{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-kn}}function ps(n,e){return e}class MK{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}}function Go(n,e,t,r,i,o,s,a,c,l,f,m,y){hi("NgControlFlow");const I=ce(),b=gt(),D=void 0!==c,R=ce(),B=a?s.bind(R[Cn][on]):s,L=new MK(D,B);R[$e+n]=L,Im(I,b,n+1,e,t,r,i,$i(b.consts,o)),D&&Im(I,b,n+2,c,l,f,m,$i(b.consts,y))}class NK extends DK{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-kn}at(e){return this.getLView(e)[on].$implicit}attach(e,t){const r=t[Xr];this.needsIndexUpdate||=e!==this.length,Rh(this.lContainer,t,e,_l(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function xK(n,e){return nm(n,e)}(this.lContainer,e)}create(e,t){const r=vl(this.lContainer,this.templateTNode.tView.ssrId),i=Sh(this.hostLView,this.templateTNode,new RK(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){RI(e[Ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[on].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[on].$index=e}getLView(e){return function kK(n,e){return c1(n,e)}(this.lContainer,e)}}function qo(n){const e=He(null),t=lr();try{const r=ce(),i=r[Ee],o=r[t],s=t+1,a=iE(r,s);if(void 0===o.liveCollection){const l=hA(i,s);o.liveCollection=new NK(a,r,l)}else o.liveCollection.reset();const c=o.liveCollection;if(function SK(n,e,t){let r,i,o=0,s=n.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const l=n.at(o),f=e[o],m=lA(o,l,o,f,t);if(0!==m){m<0&&n.updateValue(o,f),o++;continue}const y=n.at(s),I=e[c],b=lA(s,y,c,I,t);if(0!==b){b<0&&n.updateValue(s,I),s--,c--;continue}const D=t(o,l),R=t(s,y),B=t(o,f);if(Object.is(B,R)){const L=t(c,I);Object.is(L,D)?(n.swap(o,s),n.updateValue(s,I),c--,s--):n.move(s,o),n.updateValue(o,f),o++}else if(r??=new wL,i??=EL(n,o,s,t),dA(n,r,o,B))n.updateValue(o,f),o++,s++;else if(i.has(B))r.set(D,n.detach(o)),s--;else{const L=n.create(o,e[o]);n.attach(o,L),o++,s++}}for(;o<=c;)IL(n,r,t,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let l=c.next();for(;!l.done&&o<=s;){const f=n.at(o),m=l.value,y=lA(o,f,o,m,t);if(0!==y)y<0&&n.updateValue(o,m),o++,l=c.next();else{r??=new wL,i??=EL(n,o,s,t);const I=t(o,m);if(dA(n,r,o,I))n.updateValue(o,m),o++,s++,l=c.next();else if(i.has(I)){const b=t(o,f);r.set(b,n.detach(o)),s--}else n.attach(o,n.create(o,m)),o++,s++,l=c.next()}}for(;!l.done;)IL(n,r,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const l=fo(),f=0===c.length;if(dr(r,l,f)){const m=t+2,y=iE(r,m);if(f){const I=hA(i,m),b=vl(y,I.tView.ssrId);Rh(y,Sh(r,I,void 0,{dehydratedView:b}),0,_l(I,b))}else v0(y,0)}}}finally{He(e)}}function iE(n,e){return n[e]}function hA(n,e){return il(n,e)}function k(n,e,t,r){const i=ce(),o=gt(),s=$e+n,a=i[nt],c=o.firstCreatePass?function OK(n,e,t,r,i,o){const s=e.consts,c=ml(e,n,2,r,$i(s,i));return f0(e,t,c,$i(s,o)),null!==c.attrs&&HI(c,c.attrs,!1),null!==c.mergedAttrs&&HI(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],l=bL(o,i,c,a,e,n);i[s]=l;const f=Qd(c);return zi(c,!0),qO(a,l,c),!kh(c)&&al()&&PI(o,i,l,c),0===function XT(){return rt.lFrame.elementDepthCount}()&&di(l,i),function eC(){rt.lFrame.elementDepthCount++}(),f&&(l0(o,i,c),u0(o,c,i)),null!==r&&d0(i,c),k}function x(){let n=Jt();Tg()?function Cg(){rt.lFrame.isParent=!1}():(n=n.parent,zi(n,!1));const e=n;(function nC(n){return rt.skipHydrationRootTNode===n})(e)&&function Wv(){rt.skipHydrationRootTNode=null}(),function tC(){rt.lFrame.elementDepthCount--}();const t=gt();return t.firstCreatePass&&(dh(t,n),tl(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Og(n){return!!(8&n.flags)}(e)&&cA(t,e,ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function mC(n){return!!(16&n.flags)}(e)&&cA(t,e,ce(),e.stylesWithoutHost,!1),x}function Wo(n,e,t,r){return k(n,e,t,r),x(),Wo}let bL=(n,e,t,r,i,o)=>(Bo(!0),SI(r,i,eI()));function FK(n,e,t,r,i,o){const s=e[Xr],a=!s||us()||kh(t)||hl(s,o);if(Bo(a),a)return SI(r,i,eI());const c=fm(s,n,e,t);return rO(s,o)&&vI(s,o,c.nextSibling),s&&(DC(t)||Nk(c))&&Us(t)&&(function rC(n){rt.skipHydrationRootTNode=n}(t),zO(c)),c}let CL=(n,e,t,r)=>(Bo(!0),XC(e[nt],""));function UK(n,e,t,r){let i;const o=e[Xr],s=!o||us()||hl(o,r)||kh(t);if(Bo(s),s)return XC(e[nt],"");const a=fm(o,n,e,t),c=function nO(n,e){const t=n.data;let r=t[mI]?.[e]??null;return null===r&&t[Qg]?.[e]&&(r=jC(n,e)),r}(o,r);return vI(o,r,a),i=BI(c,a),i}function Ir(){return ce()}const Tl=void 0;var $K=["en",[["a","p"],["AM","PM"],Tl],[["AM","PM"],Tl,Tl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Tl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Tl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Tl,"{1} 'at' {0}",Tl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jK(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Xh={};function Si(n){const e=function HK(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=RL(e);if(t)return t;const r=e.split("-")[0];if(t=RL(r),t)return t;if("en"===r)return $K;throw new he(701,!1)}function RL(n){return n in Xh||(Xh[n]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[n]),Xh[n]}var An=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(An||{});const oE="en-US";let PL=oE,KL=(n,e,t)=>{};function Le(n,e,t,r){const i=ce(),o=gt(),s=Jt();return _A(o,i,i[nt],s,n,e,r),Le}function _A(n,e,t,r,i,o,s){const a=Qd(r),l=n.firstCreatePass&&function s1(n){return n.cleanup??=[]}(n),f=e[on],m=function o1(n){return n[xc]??=[]}(e);let y=!0;if(3&r.type||s){const D=Pr(r,e),R=s?s(D):D,B=m.length,L=s?fe=>s(jt(fe[r.index])):r.index;let q=null;if(!s&&a&&(q=function NQ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[xc],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,y=!1;else{o=ZL(r,e,f,o),KL(D,i,o);const fe=t.listen(R,i,o);m.push(o,fe),l&&l.push(i,L,B,B+1)}}else o=ZL(r,e,f,o);const I=r.outputs;let b;if(y&&null!==I&&(b=I[i])){const D=b.length;if(D)for(let R=0;R<D;R+=2){const Te=e[b[R]][b[R+1]].subscribe(o),Me=m.length;m.push(o,Te),l&&l.push(i,r.index,Me,-(Me+1))}}}function JL(n,e,t,r){const i=He(null);try{return Uo(6,e,t),!1!==t(r)}catch(o){return kI(n,o),!1}finally{Uo(7,e,t),He(i)}}function ZL(n,e,t,r){return function i(o){if(o===Function)return r;sm(n.componentOffset>-1?Di(n.index,e):e,5);let a=JL(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=JL(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Qe(n=1){return function uC(n){return(rt.lFrame.contextLView=function Hv(n,e){for(;n>0;)e=e[kc],n--;return e}(n,rt.lFrame.contextLView))[on]}(n)}function Fa(n,e,t,r,i){const o=ce(),s=zh(o,e,t,r);return s!==dt&&qi(gt(),hn(),o,n,s,o[nt],i,!1),Fa}function Ys(n){return Bs(function Kv(){return rt.lFrame.contextLView}(),$e+n)}function W(n,e=""){const t=ce(),r=gt(),i=n+$e,o=r.firstCreatePass?ml(r,i,1,e,null):r.data[i],s=IV(r,t,o,e,n);t[i]=s,al()&&PI(r,t,s,o),zi(o,!1)}let IV=(n,e,t,r,i)=>(Bo(!0),ZC(e[nt],r));function YQ(n,e,t,r,i){const o=e[Xr],s=!o||us()||kh(t)||hl(o,i);return Bo(s),s?ZC(e[nt],r):fm(o,n,e,t)}function Hn(n){return Qn("",n,""),Hn}function Qn(n,e,t){const r=ce(),i=zh(r,n,e,t);return i!==dt&&xa(r,lr(),i),Qn}function vA(n,e,t,r,i){const o=ce(),s=function Hh(n,e,t,r,i,o){const a=El(n,ti(),t,i);return po(2),a?e+ut(t)+r+ut(i)+o:dt}(o,n,e,t,r,i);return s!==dt&&xa(o,lr(),s),vA}function uE(n,e,t,r,i,o,s){const a=ce(),c=function Gh(n,e,t,r,i,o,s,a){const l=QI(n,ti(),t,i,s);return po(3),l?e+ut(t)+r+ut(i)+o+ut(s)+a:dt}(a,n,e,t,r,i,o,s);return c!==dt&&xa(a,lr(),c),uE}function Pt(n,e,t){sF(e)&&(e=e());const r=ce();return dr(r,fo(),e)&&qi(gt(),hn(),r,n,e,r[nt],t,!1),Pt}function Et(n,e){const t=sF(n);return t&&n.set(e),t}function Mt(n,e){const t=ce(),r=gt(),i=Jt();return _A(r,t,t[nt],i,n,e),Mt}function IA(n,e,t,r,i){if(n=Xe(n),Array.isArray(n))for(let o=0;o<n.length;o++)IA(n[o],e,t,r,i);else{const o=gt(),s=ce(),a=Jt();let c=xs(n)?n:Xe(n.provide);const l=Cv(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(xs(n)||!n.multi){const I=new Uc(l,i,Ie),b=wA(c,e,i?f:f+y,m);-1===b?(mh(jc(a,s),o,c),EA(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),s.push(I)):(t[b]=I,s[b]=I)}else{const I=wA(c,e,f+y,m),b=wA(c,e,f,f+y),R=b>=0&&t[b];if(i&&!R||!i&&!(I>=0&&t[I])){mh(jc(a,s),o,c);const B=function rY(n,e,t,r,i){const o=new Uc(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,RV(o,i,r&&!t),o}(i?nY:tY,t.length,i,r,l);!i&&R&&(t[b].providerFactory=B),EA(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else EA(o,n,I>-1?I:b,RV(t[i?b:I],l,!i&&r));!i&&r&&R&&t[b].componentProviders++}}}function EA(n,e,t,r){const i=xs(e),o=function $T(n){return!!n.useClass}(e);if(i||o){const c=(o?Xe(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,c]):l[f+1].push(r,c)}else l.push(t,c)}}}function RV(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tY(n,e,t,r){return bA(this.multi,[])}function nY(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=p(t,t[Ee],this.providerFactory.index,r);o=a.slice(0,s),bA(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],bA(i,o);return o}function bA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Fn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function eY(n,e,t){const r=gt();if(r.firstCreatePass){const i=ho(n);IA(t,r.data,r.blueprint,i,!0),IA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let iY=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=ng(0,t.type),i=r.length>0?WI([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Re({token:n,providedIn:"environment",factory:()=>new n(be(Zr))})}}return n})();function Yn(n){hi("NgStandalone"),n.getStandaloneInjector=e=>e.get(iY).getOrCreateStandaloneInjector(n)}function ef(n,e,t){const r=ei()+n,i=ce();return i[r]===dt?qs(i,r,t?e.call(t):e()):function vm(n,e){return n[e]}(i,r)}function TA(n,e,t,r){return NV(ce(),ei(),n,e,t,r)}function Mm(n,e){const t=n[e];return t===dt?void 0:t}function NV(n,e,t,r,i,o){const s=e+t;return dr(n,s,i)?qs(n,s+1,o?r.call(o,i):r(i)):Mm(n,s+1)}function wo(n,e){const t=gt();let r;const i=n+$e;t.firstCreatePass?(r=function mY(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=va(r.type)),a=Dr(Ie);try{const c=ll(!1),l=o();return ll(c),function yA(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,ce(),i,l),l}finally{Dr(a)}}function Nm(n,e,t){const r=n+$e,i=ce(),o=Bs(i,r);return xm(i,r)?NV(i,ei(),e,o.transform,t,o):o.transform(t)}function Cl(n,e,t,r){const i=n+$e,o=ce(),s=Bs(o,i);return xm(o,i)?function xV(n,e,t,r,i,o,s){const a=e+t;return El(n,a,i,o)?qs(n,a+2,s?r.call(s,i,o):r(i,o)):Mm(n,a+2)}(o,ei(),e,s.transform,t,r,s):s.transform(t,r)}function CA(n,e,t,r,i){const o=n+$e,s=ce(),a=Bs(s,o);return xm(s,o)?function kV(n,e,t,r,i,o,s,a){const c=e+t;return QI(n,c,i,o,s)?qs(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):Mm(n,c+3)}(s,ei(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function xm(n,e){return n[Ee].data[e].pure}class rf{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const jY=new rf("18.2.13");let PA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const n2=new ye("");function Fm(n){return!!n&&"function"==typeof n.then}function r2(n){return!!n&&"function"==typeof n.subscribe}const OA=new ye("");let i2=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=G(OA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Fm(o))t.push(o);else if(r2(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const sf=new ye("");let mE,gs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(J6),this.afterRenderManager=G(NF),this.zonelessEnabled=G(Nh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new C,this.afterTick=new C,this.componentTypes=[],this.components=[],this.isStable=G(zc).hasPendingTasks.pipe(Ve(t=>!t)),this._injector=G(Zr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof V1;if(!this._injector.get(i2).done)throw!i&&function ba(n){const e=yt(n)||ar(n)||Lr(n);return null!==e&&e.standalone}(t),new he(405,!1);let s;s=i?t:this._injector.get($I).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function pJ(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Il),l=s.create(Br.NULL,[],r||s.selector,a),f=l.location.nativeElement,m=l.injector.get(n2,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),gE(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new he(101,!1);const t=He(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,He(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(N0,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)_J(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>rh(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;gE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(sf,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new he(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FA(n){mE??=new WeakMap;const e=mE.get(n);if(e)return e;const t=n.isStable.pipe(xo(r=>r)).toPromise().then(()=>{});return mE.set(n,t),n.onDestroy(()=>mE?.delete(n)),t}function _J(n,e,t,r){(t||rh(n))&&OI(n,e,t&&!r?0:1)}class yJ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let a2=(()=>{class n{compileModuleSync(t){return new W0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=vo(Jr(t).declarations).reduce((s,a)=>{const c=yt(a);return c&&s.push(new _m(c)),s},[]);return new yJ(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),EJ=(()=>{class n{constructor(){this.zone=G(Rt),this.changeDetectionScheduler=G(Mh),this.applicationRef=G(gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LA({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Rt({...VA(),scheduleInRootZone:t}),[{provide:Rt,useFactory:n},{provide:so,multi:!0,useFactory:()=>{const r=G(EJ,{optional:!0});return()=>r.initialize()}},{provide:so,multi:!0,useFactory:()=>{const r=G(bJ);return()=>{r.initialize()}}},!0===e?{provide:L1,useValue:!0}:[],{provide:M0,useValue:t??Tk}]}function VA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let bJ=(()=>{class n{constructor(){this.subscription=new kt,this.initialized=!1,this.zone=G(Rt),this.pendingTasks=G(zc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lm=(()=>{class n{constructor(){this.appRef=G(gs),this.taskService=G(zc),this.ngZone=G(Rt),this.zonelessEnabled=G(Nh),this.disableScheduling=G(L1,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new kt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(fI):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(M0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof CC||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?Ak:Ck;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(fI+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ak(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const La=new ye("",{providedIn:"root",factory:()=>G(La,It.Optional|It.SkipSelf)||function TJ(){return typeof $localize<"u"&&$localize.locale||oE}()}),_E=new ye("");function yE(n){return!n.moduleRef}let Yc=null;let Al=(()=>{class n{static{this.__NG_ELEMENT_ID__=kJ}}return n})();function kJ(n){return function OJ(n,e,t){if(Us(n)&&!t){const r=Di(n.index,e);return new am(r,r)}return 175&n.type?new am(e[Cn],e):null}(Jt(),ce(),!(16&~n))}class C2{constructor(){}supports(e){return e instanceof Map||K0(e)}create(){return new zJ}}class zJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||K0(e)))throw new he(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new HJ(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class HJ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function D2(){return new EE([new C2])}let EE=(()=>{class n{static{this.\u0275prov=Re({token:n,providedIn:"root",factory:D2})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||D2()),deps:[[n,new Od,new Sc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new he(901,!1)}}return n})();function iZ(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function xJ(n=[]){if(Yc)return Yc;const e=function g2(n=[],e){return Br.create({name:e,providers:[{provide:sg,useValue:"platform"},{provide:_E,useValue:new Set([()=>Yc=null])},...n]})}(n);return Yc=e,function o2(){!function bi(n){ai=n}(()=>{throw new he(600,!1)})}(),function m2(n){n.get(Jk,null)?.forEach(t=>t())}(e),e}(r),o=[LA({}),{provide:Mh,useExisting:Lm},...t||[]];return function h2(n){const e=yE(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Rt);return t.run(()=>{yE(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(zs,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),yE(n)){const o=()=>e.destroy(),s=n.platformInjector.get(_E);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(_E);s.add(o),n.moduleRef.onDestroy(()=>{gE(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return function mJ(n,e,t){try{const r=t();return Fm(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const o=e.get(i2);return o.runInitializers(),o.donePromise.then(()=>{if(function KK(n){"string"==typeof n&&(PL=n.toLowerCase().replace(/_/g,"-"))}(e.get(La,oE)||oE),yE(n)){const a=e.get(gs);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function PJ(n,e){const t=n.injector.get(gs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new he(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new TF({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}let K2=!1;function bZ(){return ss([{provide:II,useFactory:()=>{let n=!0;return Io()&&(n=!!G(wh,{optional:!0})?.get(LC,null)),n&&hi("NgHydration"),n}},{provide:so,useValue:()=>{(function N1(n){P1=n})(!1),Io()&&G(II)&&(function TZ(){const n=Hc();let e;for(const t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&"nghm"===t.textContent?.trim()){e=t;break}if(!e)throw new he(-507,!1)}(),function IZ(){K2||(K2=!0,function Dq(){Xk=Aq}(),function LK(){bL=FK}(),function JQ(){IV=YQ}(),function BK(){CL=UK}(),function p7(){CF=f7}(),function k8(){W1=x8,F0=N8}(),function h8(){F1=d8}(),function BW(){ZO=UW}())}())},multi:!0},{provide:aO,useFactory:()=>Io()&&G(II)},{provide:sf,useFactory:()=>{if(Io()&&G(II)){const n=G(gs);return G(Br),()=>{(function wZ(n){return FA(n)})(n).then(()=>{!function u8(n){const e=n._views;for(const t of e){const r=eO(t);null!==r&&null!==r[Tn]&&(ur(r)?jI(r):O1(r))}}(n)})}}return()=>{}},multi:!0}])}function af(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function jm(n,e){hi("NgSignals");const t=function xe(n){const e=Object.create(Mn);e.computation=n;const t=()=>{if(_t(e),_e(e),e.value===xt)throw e.error;return e.value};return t[qt]=e,t}(n);return e?.equal&&(t[qt].equal=e.equal),t}function Js(n){const e=He(null);try{return n()}finally{He(e)}}let Y2=null;function Jc(){return Y2}class xZ{}const Qi=new ye("");let KA=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(OZ),providedIn:"platform"})}}return n})();const kZ=new ye("");let OZ=(()=>{class n extends KA{constructor(){super(),this._doc=G(Qi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jc().getBaseHref(this._doc)}onPopState(t){const r=Jc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Jc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function QA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function J2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Va(n){return n&&"?"!==n[0]?"?"+n:n}let Sl=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(X2),providedIn:"root"})}}return n})();const Z2=new ye("");let X2=(()=>{class n extends Sl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(Qi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Va(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Va(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Va(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(be(KA),be(Z2,8))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FZ=(()=>{class n extends Sl{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=QA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Va(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Va(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(be(KA),be(Z2,8))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),$m=(()=>{class n{constructor(t){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function UZ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(J2(eU(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Va(r))}normalize(t){return n.stripTrailingSlash(function VZ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,eU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Va}static{this.joinWithSlash=QA}static{this.stripTrailingSlash=J2}static{this.\u0275fac=function(r){return new(r||n)(be(Sl))}}static{this.\u0275prov=Re({token:n,factory:()=>function LZ(){return new $m(be(Sl))}(),providedIn:"root"})}}return n})();function eU(n){return n.replace(/\/index.html$/,"")}var SE=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(SE||{}),Pi=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Pi||{}),yn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(yn||{}),bo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bo||{});const Er={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function RE(n,e){return Qo(Si(n)[An.DateFormat],e)}function PE(n,e){return Qo(Si(n)[An.TimeFormat],e)}function ME(n,e){return Qo(Si(n)[An.DateTimeFormat],e)}function Ko(n,e){const t=Si(n),r=t[An.NumberSymbols][e];if(typeof r>"u"){if(e===Er.CurrencyDecimal)return t[An.NumberSymbols][Er.Decimal];if(e===Er.CurrencyGroup)return t[An.NumberSymbols][Er.Group]}return r}function nU(n){if(!n[An.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[An.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Qo(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function JA(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const XZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,NE={},eX=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ua=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Ua||{}),tn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(tn||{}),nn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(nn||{});function tX(n,e,t,r){let i=function lX(n){if(oU(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return xE(i,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(XZ))return function dX(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,c,l),e}(r)}const e=new Date(n);if(!oU(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ba(t,e)||e;let a,s=[];for(;e;){if(a=eX.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const f=s.pop();if(!f)break;e=f}}let c=i.getTimezoneOffset();r&&(c=iU(r,c),i=function uX(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function cX(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(iU(e,i)-i))}(i,r,!0));let l="";return s.forEach(f=>{const m=function aX(n){if(XA[n])return XA[n];let e;switch(n){case"G":case"GG":case"GGG":e=Dn(nn.Eras,yn.Abbreviated);break;case"GGGG":e=Dn(nn.Eras,yn.Wide);break;case"GGGGG":e=Dn(nn.Eras,yn.Narrow);break;case"y":e=wr(tn.FullYear,1,0,!1,!0);break;case"yy":e=wr(tn.FullYear,2,0,!0,!0);break;case"yyy":e=wr(tn.FullYear,3,0,!1,!0);break;case"yyyy":e=wr(tn.FullYear,4,0,!1,!0);break;case"Y":e=LE(1);break;case"YY":e=LE(2,!0);break;case"YYY":e=LE(3);break;case"YYYY":e=LE(4);break;case"M":case"L":e=wr(tn.Month,1,1);break;case"MM":case"LL":e=wr(tn.Month,2,1);break;case"MMM":e=Dn(nn.Months,yn.Abbreviated);break;case"MMMM":e=Dn(nn.Months,yn.Wide);break;case"MMMMM":e=Dn(nn.Months,yn.Narrow);break;case"LLL":e=Dn(nn.Months,yn.Abbreviated,Pi.Standalone);break;case"LLLL":e=Dn(nn.Months,yn.Wide,Pi.Standalone);break;case"LLLLL":e=Dn(nn.Months,yn.Narrow,Pi.Standalone);break;case"w":e=ZA(1);break;case"ww":e=ZA(2);break;case"W":e=ZA(1,!0);break;case"d":e=wr(tn.Date,1);break;case"dd":e=wr(tn.Date,2);break;case"c":case"cc":e=wr(tn.Day,1);break;case"ccc":e=Dn(nn.Days,yn.Abbreviated,Pi.Standalone);break;case"cccc":e=Dn(nn.Days,yn.Wide,Pi.Standalone);break;case"ccccc":e=Dn(nn.Days,yn.Narrow,Pi.Standalone);break;case"cccccc":e=Dn(nn.Days,yn.Short,Pi.Standalone);break;case"E":case"EE":case"EEE":e=Dn(nn.Days,yn.Abbreviated);break;case"EEEE":e=Dn(nn.Days,yn.Wide);break;case"EEEEE":e=Dn(nn.Days,yn.Narrow);break;case"EEEEEE":e=Dn(nn.Days,yn.Short);break;case"a":case"aa":case"aaa":e=Dn(nn.DayPeriods,yn.Abbreviated);break;case"aaaa":e=Dn(nn.DayPeriods,yn.Wide);break;case"aaaaa":e=Dn(nn.DayPeriods,yn.Narrow);break;case"b":case"bb":case"bbb":e=Dn(nn.DayPeriods,yn.Abbreviated,Pi.Standalone,!0);break;case"bbbb":e=Dn(nn.DayPeriods,yn.Wide,Pi.Standalone,!0);break;case"bbbbb":e=Dn(nn.DayPeriods,yn.Narrow,Pi.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dn(nn.DayPeriods,yn.Abbreviated,Pi.Format,!0);break;case"BBBB":e=Dn(nn.DayPeriods,yn.Wide,Pi.Format,!0);break;case"BBBBB":e=Dn(nn.DayPeriods,yn.Narrow,Pi.Format,!0);break;case"h":e=wr(tn.Hours,1,-12);break;case"hh":e=wr(tn.Hours,2,-12);break;case"H":e=wr(tn.Hours,1);break;case"HH":e=wr(tn.Hours,2);break;case"m":e=wr(tn.Minutes,1);break;case"mm":e=wr(tn.Minutes,2);break;case"s":e=wr(tn.Seconds,1);break;case"ss":e=wr(tn.Seconds,2);break;case"S":e=wr(tn.FractionalSeconds,1);break;case"SS":e=wr(tn.FractionalSeconds,2);break;case"SSS":e=wr(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=OE(Ua.Short);break;case"ZZZZZ":e=OE(Ua.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=OE(Ua.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=OE(Ua.Long);break;default:return null}return XA[n]=e,e}(f);l+=m?m(i,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function xE(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ba(n,e){const t=function jZ(n){return Si(n)[An.LocaleId]}(n);if(NE[t]??={},NE[t][e])return NE[t][e];let r="";switch(e){case"shortDate":r=RE(n,bo.Short);break;case"mediumDate":r=RE(n,bo.Medium);break;case"longDate":r=RE(n,bo.Long);break;case"fullDate":r=RE(n,bo.Full);break;case"shortTime":r=PE(n,bo.Short);break;case"mediumTime":r=PE(n,bo.Medium);break;case"longTime":r=PE(n,bo.Long);break;case"fullTime":r=PE(n,bo.Full);break;case"short":const i=Ba(n,"shortTime"),o=Ba(n,"shortDate");r=kE(ME(n,bo.Short),[i,o]);break;case"medium":const s=Ba(n,"mediumTime"),a=Ba(n,"mediumDate");r=kE(ME(n,bo.Medium),[s,a]);break;case"long":const c=Ba(n,"longTime"),l=Ba(n,"longDate");r=kE(ME(n,bo.Long),[c,l]);break;case"full":const f=Ba(n,"fullTime"),m=Ba(n,"fullDate");r=kE(ME(n,bo.Full),[f,m])}return r&&(NE[t][e]=r),r}function kE(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function ms(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function wr(n,e,t=0,r=!1,i=!1){return function(o,s){let a=function rX(n,e){switch(n){case tn.FullYear:return e.getFullYear();case tn.Month:return e.getMonth();case tn.Date:return e.getDate();case tn.Hours:return e.getHours();case tn.Minutes:return e.getMinutes();case tn.Seconds:return e.getSeconds();case tn.FractionalSeconds:return e.getMilliseconds();case tn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),n===tn.Hours)0===a&&-12===t&&(a=12);else if(n===tn.FractionalSeconds)return function nX(n,e){return ms(n,3).substring(0,e)}(a,e);const c=Ko(s,Er.MinusSign);return ms(a,e,c,r,i)}}function Dn(n,e,t=Pi.Format,r=!1){return function(i,o){return function iX(n,e,t,r,i,o){switch(t){case nn.Months:return function HZ(n,e,t){const r=Si(n),o=Qo([r[An.MonthsFormat],r[An.MonthsStandalone]],e);return Qo(o,t)}(e,i,r)[n.getMonth()];case nn.Days:return function zZ(n,e,t){const r=Si(n),o=Qo([r[An.DaysFormat],r[An.DaysStandalone]],e);return Qo(o,t)}(e,i,r)[n.getDay()];case nn.DayPeriods:const s=n.getHours(),a=n.getMinutes();if(o){const l=function KZ(n){const e=Si(n);return nU(e),(e[An.ExtraData][2]||[]).map(r=>"string"==typeof r?JA(r):[JA(r[0]),JA(r[1])])}(e),f=function QZ(n,e,t){const r=Si(n);nU(r);const o=Qo([r[An.ExtraData][0],r[An.ExtraData][1]],e)||[];return Qo(o,t)||[]}(e,i,r),m=l.findIndex(y=>{if(Array.isArray(y)){const[I,b]=y,D=s>=I.hours&&a>=I.minutes,R=s<b.hours||s===b.hours&&a<b.minutes;if(I.hours<b.hours){if(D&&R)return!0}else if(D||R)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(-1!==m)return f[m]}return function $Z(n,e,t){const r=Si(n),o=Qo([r[An.DayPeriodsFormat],r[An.DayPeriodsStandalone]],e);return Qo(o,t)}(e,i,r)[s<12?0:1];case nn.Eras:return function GZ(n,e){return Qo(Si(n)[An.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function OE(n){return function(e,t,r){const i=-1*r,o=Ko(t,Er.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Ua.Short:return(i>=0?"+":"")+ms(s,2,o)+ms(Math.abs(i%60),2,o);case Ua.ShortGMT:return"GMT"+(i>=0?"+":"")+ms(s,1,o);case Ua.Long:return"GMT"+(i>=0?"+":"")+ms(s,2,o)+":"+ms(Math.abs(i%60),2,o);case Ua.Extended:return 0===r?"Z":(i>=0?"+":"")+ms(s,2,o)+":"+ms(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const oX=0,FE=4;function rU(n){const e=n.getDay(),t=0===e?-3:FE-e;return xE(n.getFullYear(),n.getMonth(),n.getDate()+t)}function ZA(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=rU(t),s=function sX(n){const e=xE(n,oX,1).getDay();return xE(n,0,1+(e<=FE?FE:FE+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ms(i,n,Ko(r,Er.MinusSign))}}function LE(n,e=!1){return function(t,r){return ms(rU(t).getFullYear(),n,Ko(r,Er.MinusSign),e)}}const XA={};function iU(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function oU(n){return n instanceof Date&&!isNaN(n.valueOf())}const hX=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function rD(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function uU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}let fU=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new SX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ie(ds),Ie(ka))}}static{this.\u0275dir=at({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class SX{constructor(){this.$implicit=null,this.ngIf=null}}function pU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${sr(e)}'.`)}let mU=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),s=-1===i.indexOf("-")?void 0:Gc.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Ie(mo),Ie(EE),Ie(Oa))}}static{this.\u0275dir=at({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function _s(n,e){return new he(2100,!1)}class NX{createSubscription(e,t){return Js(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Js(()=>e.unsubscribe())}}class xX{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const kX=new xX,OX=new NX;let cD=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Fm(t))return kX;if(r2(t))return OX;throw _s()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Ie(Al,16))}}static{this.\u0275pipe=Sr({name:"async",type:n,pure:!1,standalone:!0})}}return n})();const jX=new ye(""),$X=new ye("");let Hm=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return tX(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw _s()}}static{this.\u0275fac=function(r){return new(r||n)(Ie(La,16),Ie(jX,24),Ie($X,24))}}static{this.\u0275pipe=Sr({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),uD=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function lD(n){return!(null==n||""===n||n!=n)}(t))return null;i||=this._locale;try{return function yX(n,e,t){return function tD(n,e,t,r,i,o,s=!1){let a="",c=!1;if(isFinite(n)){let l=function IX(n){let r,i,o,s,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);s&&(l=function vX(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let f=e.minInt,m=e.minFrac,y=e.maxFrac;if(o){const L=o.match(hX);if(null===L)throw new Error(`${o} is not a valid digit info`);const q=L[1],fe=L[3],Te=L[5];null!=q&&(f=rD(q)),null!=fe&&(m=rD(fe)),null!=Te?y=rD(Te):null!=fe&&m>y&&(y=m)}!function EX(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=0!==o;const l=e+n.integerLen,f=r.reduceRight(function(m,y,I,b){return b[I]=(y+=m)<10?y:y-10,c&&(0===b[I]&&I>=l?b.pop():c=!1),y>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}(l,m,y);let I=l.digits,b=l.integerLen;const D=l.exponent;let R=[];for(c=I.every(L=>!L);b<f;b++)I.unshift(0);for(;b<0;b++)I.unshift(0);b>0?R=I.splice(b,I.length):(R=I,I=[0]);const B=[];for(I.length>=e.lgSize&&B.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)B.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&B.unshift(I.join("")),a=B.join(Ko(t,r)),R.length&&(a+=Ko(t,i)+R.join("")),D&&(a+=Ko(t,Er.Exponential)+"+"+D)}else a=Ko(t,Er.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function nD(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let f=0;f<c.length;f++){const m=c.charAt(f);"0"===m?t.minFrac=t.maxFrac=f+1:"#"===m?t.maxFrac=f+1:t.posSuf+=m}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){const f=i.length-t.posPre.length-t.posSuf.length,m=o.indexOf("#");t.negPre=o.substring(0,m).replace(/'/g,""),t.negSuf=o.slice(m+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function YA(n,e){return Si(n)[An.NumberFormats][e]}(e,SE.Decimal),Ko(e,Er.MinusSign)),e,Er.Group,Er.Decimal,t)}(function dD(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw _s()}}static{this.\u0275fac=function(r){return new(r||n)(Ie(La,16))}}static{this.\u0275pipe=Sr({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let Zc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ns({type:n})}static{this.\u0275inj=Ui({})}}return n})();const yU="browser",JX="server";function Gm(n){return n===JX}let XX=(()=>{class n{static{this.\u0275prov=Re({token:n,providedIn:"root",factory:()=>function ZX(n){return n===yU}(G(_o))?new eee(G(Qi),window):new nee})}}return n})();class eee{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function tee(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class nee{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class vU{}var S=it(467);function gD(n){return n[n.length-1]}function PU(n){return st(gD(n))?n.pop():void 0}function Km(n){return function Pee(n){return n&&st(n.schedule)}(gD(n))?n.pop():void 0}var ja=it(635);const MU=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function NU(n){return st(n?.then)}function xU(n){return st(n[ro])}function kU(n){return Symbol.asyncIterator&&st(n?.[Symbol.asyncIterator])}function OU(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FU=function Nee(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function LU(n){return st(n?.[FU])}function VU(n){return(0,ja.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,ja.N3)(t.read());if(i)return yield(0,ja.N3)(void 0);yield yield(0,ja.N3)(r)}}finally{t.releaseLock()}})}function UU(n){return st(n?.getReader)}function To(n){if(n instanceof Dt)return n;if(null!=n){if(xU(n))return function xee(n){return new Dt(e=>{const t=n[ro]();if(st(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(MU(n))return function kee(n){return new Dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(NU(n))return function Oee(n){return new Dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Fu)})}(n);if(kU(n))return BU(n);if(LU(n))return function Fee(n){return new Dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(UU(n))return function Lee(n){return BU(VU(n))}(n)}throw OU(n)}function BU(n){return new Dt(e=>{(function Vee(n,e){var t,r,i,o;return(0,ja.sH)(this,void 0,void 0,function*(){try{for(t=(0,ja.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function $a(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Rl(n,e=0){return ve((t,r)=>{t.subscribe(De(r,i=>$a(r,n,()=>r.next(i),e),()=>$a(r,n,()=>r.complete(),e),i=>$a(r,n,()=>r.error(i),e)))})}function lf(n,e=0){return ve((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jU(n,e){if(!n)throw new Error("Iterable cannot be null");return new Dt(t=>{$a(t,e,()=>{const r=n[Symbol.asyncIterator]();$a(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Sn(n,e){return e?function Hee(n,e){if(null!=n){if(xU(n))return function Uee(n,e){return To(n).pipe(lf(e),Rl(e))}(n,e);if(MU(n))return function jee(n,e){return new Dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(NU(n))return function Bee(n,e){return To(n).pipe(lf(e),Rl(e))}(n,e);if(kU(n))return jU(n,e);if(LU(n))return function $ee(n,e){return new Dt(t=>{let r;return $a(t,e,()=>{r=n[FU](),$a(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>st(r?.return)&&r.return()})}(n,e);if(UU(n))return function zee(n,e){return jU(VU(n),e)}(n,e)}throw OU(n)}(n,e):To(n)}function Ze(...n){return Sn(n,Km(n))}function fi(n,e,t=1/0){return st(e)?fi((r,i)=>Ve((o,s)=>e(r,o,i,s))(To(n(r,i))),t):("number"==typeof e&&(t=e),ve((r,i)=>function Gee(n,e,t,r,i,o,s,a){const c=[];let l=0,f=0,m=!1;const y=()=>{m&&!c.length&&!l&&e.complete()},I=D=>l<r?b(D):c.push(D),b=D=>{o&&e.next(D),l++;let R=!1;To(t(D,f++)).subscribe(De(e,B=>{i?.(B),o?I(B):e.next(B)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){const B=c.shift();s?$a(e,s,()=>b(B)):b(B)}y()}catch(B){e.error(B)}}))};return n.subscribe(De(e,I,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function df(n,e){return st(e)?fi(n,e,1):fi(n,1)}function $E(n){return ve((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function xr(n,e){return ve((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(De(r,c=>{i?.unsubscribe();let l=0;const f=o++;To(n(c,f)).subscribe(i=De(r,m=>r.next(e?e(c,m,f,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jr(n,e,t){const r=st(n)||e||t?{next:n,error:e,complete:t}:n;return r?ve((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(De(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Kr}class zE{}class HE{}class Yo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Yo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Yo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Yo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qee{encodeKey(e){return $U(e)}encodeValue(e){return $U(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Kee=/%(\d[a-f0-9])/gi,Qee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $U(n){return encodeURIComponent(n).replace(Kee,(e,t)=>Qee[t]??e)}function GE(n){return`${n}`}class Xc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qee,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Wee(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(GE):[GE(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Xc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(GE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(GE(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Yee{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function HU(n){return typeof Blob<"u"&&n instanceof Blob}function GU(n){return typeof FormData<"u"&&n instanceof FormData}class Qm{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Jee(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Yo,this.context??=new Yee,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Xc,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||zU(this.body)||HU(this.body)||GU(this.body)||function Zee(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Xc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GU(this.body)?null:HU(this.body)?this.body.type||null:zU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,f=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((y,I)=>y.set(I,e.setHeaders[I]),l)),e.setParams&&(f=Object.keys(e.setParams).reduce((y,I)=>y.set(I,e.setParams[I]),f)),new Qm(t,r,s,{params:f,headers:l,context:m,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}}var eu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(eu||{});class mD{constructor(e,t=200,r="OK"){this.headers=e.headers||new Yo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class qE extends mD{constructor(e={}){super(e),this.type=eu.ResponseHeader}clone(e={}){return new qE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pl extends mD{constructor(e={}){super(e),this.type=eu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Pl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hf extends mD{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function _D(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let WU=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Qm)o=t;else{let c,l;c=i.headers instanceof Yo?i.headers:new Yo(i.headers),i.params&&(l=i.params instanceof Xc?i.params:new Xc({fromObject:i.params})),o=new Qm(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=Ze(o).pipe(df(c=>this.handler.handle(c)));if(t instanceof Qm||"events"===i.observe)return s;const a=s.pipe(dn(c=>c instanceof Pl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ve(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Ve(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Ve(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Ve(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Xc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,_D(i,r))}post(t,r,i={}){return this.request("POST",t,_D(i,r))}put(t,r,i={}){return this.request("PUT",t,_D(i,r))}static{this.\u0275fac=function(r){return new(r||n)(be(zE))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();const tte=/^\)\]\}',?\n/;function KU(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let yD=(()=>{class n{constructor(){this.fetchImpl=G(rte,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=G(Rt)}handle(t){return new Dt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(vD,o=>r.error(new hf({error:o}))),()=>i.abort()})}doRequest(t,r,i){var o=this;return(0,S.A)(function*(){const s=o.createRequestInit(t);let a;try{const b=o.ngZone.runOutsideAngular(()=>o.fetchImpl(t.urlWithParams,{signal:r,...s}));(function ite(n){n.then(vD,vD)})(b),i.next({type:eu.Sent}),a=yield b}catch(b){return void i.error(new hf({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}))}const c=new Yo(a.headers),l=a.statusText,f=KU(a)??t.urlWithParams;let m=a.status,y=null;if(t.reportProgress&&i.next(new qE({headers:c,status:m,statusText:l,url:f})),a.body){const b=a.headers.get("content-length"),D=[],R=a.body.getReader();let L,q,B=0;const fe=typeof Zone<"u"&&Zone.current;yield o.ngZone.runOutsideAngular((0,S.A)(function*(){for(;;){const{done:Me,value:U}=yield R.read();if(Me)break;if(D.push(U),B+=U.length,t.reportProgress){q="text"===t.responseType?(q??"")+(L??=new TextDecoder).decode(U,{stream:!0}):void 0;const N=()=>i.next({type:eu.DownloadProgress,total:b?+b:void 0,loaded:B,partialText:q});fe?fe.run(N):N()}}}));const Te=o.concatChunks(D,B);try{const Me=a.headers.get("Content-Type")??"";y=o.parseBody(t,Te,Me)}catch(Me){return void i.error(new hf({error:Me,headers:new Yo(a.headers),status:a.status,statusText:a.statusText,url:KU(a)??t.urlWithParams}))}}0===m&&(m=y?200:0),m>=200&&m<300?(i.next(new Pl({body:y,headers:c,status:m,statusText:l,url:f})),i.complete()):i.error(new hf({error:y,headers:c,status:m,statusText:l,url:f}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const o=(new TextDecoder).decode(r).replace(tte,"");return""===o?null:JSON.parse(o);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const o=t.detectContentTypeHeader();null!==o&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let o=0;for(const s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();class rte{}function vD(){}function QU(n,e){return e(n)}const Ym=new ye(""),YU=new ye(""),JU=new ye("",{providedIn:"root",factory:()=>!0});let ZU=(()=>{class n extends zE{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=G(zc),this.contributeToStability=G(JU)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Ym),...this.injector.get(YU,[])]));this.chain=r.reduceRight((i,o)=>function ste(n,e,t){return(r,i)=>lo(t,()=>e(r,o=>n(o,i)))}(i,o,this.injector),QU)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe($E(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(be(HE),be(Zr))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();const fte=/^\)\]\}',?\n/;let eB=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new he(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Sn(r.\u0275loadImpl()):Ze(null)).pipe(xr(()=>new Dt(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,R)=>s.setRequestHeader(D,R.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&s.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const D=s.statusText||"OK",R=new Yo(s.getAllResponseHeaders()),B=function pte(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new qE({headers:R,status:s.status,statusText:D,url:B}),c},f=()=>{let{headers:D,status:R,statusText:B,url:L}=l(),q=null;204!==R&&(q=typeof s.response>"u"?s.responseText:s.response),0===R&&(R=q?200:0);let fe=R>=200&&R<300;if("json"===t.responseType&&"string"==typeof q){const Te=q;q=q.replace(fte,"");try{q=""!==q?JSON.parse(q):null}catch(Me){q=Te,fe&&(fe=!1,q={error:Me,text:q})}}fe?(o.next(new Pl({body:q,headers:D,status:R,statusText:B,url:L||void 0})),o.complete()):o.error(new hf({error:q,headers:D,status:R,statusText:B,url:L||void 0}))},m=D=>{const{url:R}=l(),B=new hf({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(B)};let y=!1;const I=D=>{y||(o.next(l()),y=!0);let R={type:eu.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(R.total=D.total),"text"===t.responseType&&s.responseText&&(R.partialText=s.responseText),o.next(R)},b=D=>{let R={type:eu.UploadProgress,loaded:D.loaded};D.lengthComputable&&(R.total=D.total),o.next(R)};return s.addEventListener("load",f),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),t.reportProgress&&(s.addEventListener("progress",I),null!==a&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:eu.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",f),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",I),null!==a&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(be(vU))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();const ID=new ye(""),tB=new ye("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nB=new ye("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rB{}let _te=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=uU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(be(Qi),be(_o),be(tB))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();function yte(n,e){const t=n.url.toLowerCase();if(!G(ID)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=G(rB).getToken(),i=G(nB);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}const Ite=new ye(""),oB="b",sB="h",aB="s",cB="st",uB="u",lB="rt",WE=new ye(""),Ete=["GET","HEAD"];function wte(n,e){const{isCacheActive:t,...r}=G(WE),{transferCache:i,method:o}=n;if(!t||!1===i||"POST"===o&&!r.includePostRequests&&!i||"POST"!==o&&!Ete.includes(o)||!r.includeRequestsWithAuthHeaders&&function bte(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}(n)||!1===r.filter?.(n))return e(n);const s=G(wh),a=G(Ite,{optional:!0}),c=Gm(G(_o));if(a&&!c)throw new he(2803,!1);const l=c&&a?function Ste(n,e){const t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}(n.url,a):n.url,f=function Cte(n,e){const{params:t,method:r,responseType:i}=n,o=dB(t);let s=n.serializeBody();s instanceof URLSearchParams?s=dB(s):"string"!=typeof s&&(s="");const c=function Ate(n){let e=0;for(const t of n)e=Math.imul(31,e)+t.charCodeAt(0)|0;return e+=2147483648,e.toString()}([r,i,e,s,o].join("|"));return c}(n,l),m=s.get(f,null);let y=r.includeHeaders;if("object"==typeof i&&i.includeHeaders&&(y=i.includeHeaders),m){const{[oB]:I,[lB]:b,[sB]:D,[aB]:R,[cB]:B,[uB]:L}=m;let q=I;switch(b){case"arraybuffer":q=(new TextEncoder).encode(I).buffer;break;case"blob":q=new Blob([I])}let fe=new Yo(D);return Ze(new Pl({body:q,headers:fe,status:R,statusText:B,url:L}))}return e(n).pipe(jr(I=>{I instanceof Pl&&c&&s.set(f,{[oB]:I.body,[sB]:Tte(I.headers,y),[aB]:I.status,[cB]:I.statusText,[uB]:l,[lB]:n.responseType})}))}function Tte(n,e){if(!e)return{};const t={};for(const r of e){const i=n.getAll(r);null!==i&&(t[r]=i)}return t}function dB(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Dte(n){return[{provide:WE,useFactory:()=>(hi("NgHttpTransferCache"),{isCacheActive:!0,...n})},{provide:YU,useValue:wte,multi:!0,deps:[wh,WE]},{provide:sf,multi:!0,useFactory:()=>{const e=G(gs),t=G(WE);return()=>{FA(e).then(()=>{t.isCacheActive=!1})}}}]}class Rte extends xZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ED extends Rte{static makeCurrent(){!function NZ(n){Y2??=n}(new ED)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pte(){return Jm=Jm||document.querySelector("base"),Jm?Jm.getAttribute("href"):null}();return null==t?null:function Mte(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Jm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uU(document.cookie,e)}}let Jm=null,xte=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();const wD=new ye("");let hB=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(be(wD),be(Rt))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();class fB{constructor(e){this._doc=e}}const bD="ng-app-id";let pB=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gm(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${bD}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(bD),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(bD,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(be(Qi),be(Kg),be(Zk,8),be(_o))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();const TD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CD=/%COMP%/g,Lte=new ye("",{providedIn:"root",factory:()=>!0});function mB(n,e){return e.map(t=>t.replace(CD,n))}let _B=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Gm(a),this.defaultRenderer=new AD(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ao.ShadowDom&&(r={...r,encapsulation:ao.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof vB?i.applyToHost(t):i instanceof DD&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ao.Emulated:o=new vB(c,l,r,this.appId,f,s,a,m);break;case ao.ShadowDom:return new jte(c,l,t,r,s,a,this.nonce,m);default:o=new DD(c,l,r,f,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(be(hB),be(pB),be(Kg),be(Lte),be(Qi),be(_o),be(Rt),be(Zk))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();class AD{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(TD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yB(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yB(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=TD[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=TD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gc.DashCase|Gc.Important)?e.style.setProperty(t,r,i&Gc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Jc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function yB(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jte extends AD{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=mB(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class DD extends AD{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?mB(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class vB extends DD{constructor(e,t,r,i,o,s,a,c){const l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=function Vte(n){return"_ngcontent-%COMP%".replace(CD,n)}(l),this.hostAttr=function Ute(n){return"_nghost-%COMP%".replace(CD,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}const IB=["alt","control","meta","shift"],zte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function EB(n){return{appProviders:[...Zte,...n?.providers??[]],platformProviders:Yte}}const Yte=[{provide:_o,useValue:yU},{provide:Jk,useValue:function Wte(){ED.makeCurrent()},multi:!0},{provide:Qi,useFactory:function Qte(){return function vq(n){MC=n}(document),document},deps:[]}],Zte=[{provide:sg,useValue:"root"},{provide:zs,useFactory:function Kte(){return new zs},deps:[]},{provide:wD,useClass:(()=>{class n extends fB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(be(Qi))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[Qi,Rt,_o]},{provide:wD,useClass:(()=>{class n extends fB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jc().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),IB.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=zte[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),IB.forEach(s=>{s!==i&&(0,Hte[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(be(Qi))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[Qi]},_B,pB,hB,{provide:N0,useExisting:_B},{provide:vU,useClass:xte,deps:[]},[]];let Xte=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(be(Qi))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),SD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:function(r){let i=null;return i=r?new(r||n):be(rne),i},providedIn:"root"})}}return n})(),rne=(()=>{class n extends SD{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case zo.NONE:return r;case zo.HTML:return Hs(r,"HTML")?yo(r):EO(this._doc,String(r)).toString();case zo.STYLE:return Hs(r,"Style")?yo(r):r;case zo.SCRIPT:if(Hs(r,"Script"))return yo(r);throw new he(5200,!1);case zo.URL:return Hs(r,"URL")?yo(r):bI(String(r));case zo.RESOURCE_URL:if(Hs(r,"ResourceURL"))return yo(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(t){return function jq(n){return new Oq(n)}(t)}bypassSecurityTrustStyle(t){return function $q(n){return new Fq(n)}(t)}bypassSecurityTrustScript(t){return function zq(n){return new Lq(n)}(t)}bypassSecurityTrustUrl(t){return function Hq(n){return new Vq(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Gq(n){return new Uq(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(be(Qi))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Nl=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Nl||{});const{isArray:sne}=Array,{getPrototypeOf:ane,prototype:cne,keys:une}=Object;function TB(n){if(1===n.length){const e=n[0];if(sne(e))return{args:e,keys:null};if(function lne(n){return n&&"object"==typeof n&&ane(n)===cne}(e)){const t=une(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:dne}=Array;function CB(n){return Ve(e=>function hne(n,e){return dne(e)?n(...e):n(e)}(n,e))}function AB(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function RD(...n){const e=Km(n),t=PU(n),{args:r,keys:i}=TB(n);if(0===r.length)return Sn([],e);const o=new Dt(function fne(n,e,t=Kr){return r=>{DB(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)DB(e,()=>{const l=Sn(n[c],e);let f=!1;l.subscribe(De(r,m=>{o[c]=m,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>AB(i,s):Kr));return t?o.pipe(CB(t)):o}function DB(n,e,t){n?$a(t,n,e):e()}function ff(n=1/0){return fi(Kr,n)}function PD(...n){return function pne(){return ff(1)}()(Sn(n,Km(n)))}function SB(n){return new Dt(e=>{To(n()).subscribe(e)})}function QE(n,e){const t=st(n)?n:()=>n,r=i=>i.error(t());return new Dt(e?i=>e.schedule(r,0,i):r)}function MD(){return ve((n,e)=>{let t=null;n._refCount++;const r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class RB extends Dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,$(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return MD()(this)}}function YE(...n){const e=Km(n);return ve((t,r)=>{(e?PD(n,t,e):PD(n,t)).subscribe(r)})}function pf(n){return ve((e,t)=>{let o,r=null,i=!1;r=e.subscribe(De(t,void 0,void 0,s=>{o=To(n(s,pf(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function JE(n,e){return ve(function gne(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(De(s,f=>{const m=l++;c=a?n(c,f,m):(a=!0,f),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function ND(n){return n<=0?()=>ft:ve((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const vt="primary",Zm=Symbol("RouteTitle");class vne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gf(n){return new vne(n)}function Ine(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zs(n,e){const t=n?xD(n):void 0,r=e?xD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!PB(n[i],e[i]))return!1;return!0}function xD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function MB(n){return n.length>0?n[n.length-1]:null}function nu(n){return function one(n){return!!n&&(n instanceof Dt||st(n.lift)&&st(n.subscribe))}(n)?n:Fm(n)?Sn(Promise.resolve(n)):Ze(n)}const wne={exact:function kB(n,e,t){if(!kl(n.segments,e.segments)||!ZE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!kB(n.children[r],e.children[r],t))return!1;return!0},subset:OB},NB={exact:function bne(n,e){return Zs(n,e)},subset:function Tne(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PB(n[t],e[t]))},ignored:()=>!0};function xB(n,e,t){return wne[t.paths](n.root,e.root,t.matrixParams)&&NB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function OB(n,e,t){return FB(n,e,e.segments,t)}function FB(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!kl(i,t)||e.hasChildren()||!ZE(i,t,r))}if(n.segments.length===t.length){if(!kl(n.segments,t)||!ZE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!OB(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(kl(n.segments,i)&&ZE(n.segments,i,r)&&n.children[vt])&&FB(n.children[vt],e,o,r)}}function ZE(n,e,t){return e.every((r,i)=>NB[t](n[i].parameters,r.parameters))}class xl{constructor(e=new fn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gf(this.queryParams),this._queryParamMap}toString(){return Dne.serialize(this)}}class fn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ew(this)}}class Xm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gf(this.parameters),this._parameterMap}toString(){return UB(this)}}function kl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let mf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>new XE,providedIn:"root"})}}return n})();class XE{parse(e){const t=new Vne(e);return new xl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${e_(e.root,!0)}`,r=function Pne(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${tw(t)}=${tw(i)}`).join("&"):`${tw(t)}=${tw(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Sne(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Dne=new XE;function ew(n){return n.segments.map(e=>UB(e)).join("/")}function e_(n,e){if(!n.hasChildren())return ew(n);if(e){const t=n.children[vt]?e_(n.children[vt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==vt&&r.push(`${i}:${e_(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ane(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===vt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==vt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===vt?[e_(n.children[vt],!1)]:[`${i}:${e_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vt]?`${ew(n)}/${t[0]}`:`${ew(n)}/(${t.join("//")})`}}function LB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tw(n){return LB(n).replace(/%3B/gi,";")}function kD(n){return LB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nw(n){return decodeURIComponent(n)}function VB(n){return nw(n.replace(/\+/g,"%20"))}function UB(n){return`${kD(n.path)}${function Rne(n){return Object.entries(n).map(([e,t])=>`;${kD(e)}=${kD(t)}`).join("")}(n.parameters)}`}const Mne=/^[^\/()?;#]+/;function OD(n){const e=n.match(Mne);return e?e[0]:""}const Nne=/^[^\/()?;=#]+/,kne=/^[^=?&#]+/,Fne=/^[^&#]+/;class Vne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[vt]=new fn(e,t)),r}parseSegment(){const e=OD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new Xm(nw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function xne(n){const e=n.match(Nne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=OD(this.remaining);i&&(r=i,this.capture(r))}e[nw(t)]=nw(r)}parseQueryParam(e){const t=function One(n){const e=n.match(kne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Lne(n){const e=n.match(Fne);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=VB(t),o=VB(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=OD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new he(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=vt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[vt]:new fn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}}function BB(n){return n.segments.length>0?new fn([],{[vt]:n}):n}function jB(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=jB(i);if(r===vt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Une(n){if(1===n.numberOfChildren&&n.children[vt]){const e=n.children[vt];return new fn(n.segments.concat(e.segments),e.children)}return n}(new fn(n.segments,e))}function Ol(n){return n instanceof xl}function $B(n){let e;const i=BB(function t(o){const s={};for(const c of o.children){const l=t(c);s[c.outlet]=l}const a=new fn(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function zB(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return FD(i,i,i,t,r);const o=function jne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new GB(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new GB(t,e,r)}(e);if(o.toRoot())return FD(i,i,new fn([],{}),t,r);const s=function $ne(n,e,t){if(n.isAbsolute)return new iw(e,!0,0);if(!t)return new iw(e,!1,NaN);if(null===t.parent)return new iw(t,!0,0);const r=rw(n.commands[0])?0:1;return function zne(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new iw(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?n_(s.segmentGroup,s.index,o.commands):qB(s.segmentGroup,s.index,o.commands);return FD(i,s.segmentGroup,a,t,r)}function rw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function t_(n){return"object"==typeof n&&null!=n&&n.outlets}function FD(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),s=n===e?t:HB(n,e,t);const a=BB(jB(s));return new xl(a,o,i)}function HB(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:HB(o,e,t)}),new fn(n.segments,r)}class GB{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rw(r[0]))throw new he(4003,!1);const i=r.find(t_);if(i&&i!==MB(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class iw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qB(n,e,t){if(n??=new fn([],{}),0===n.segments.length&&n.hasChildren())return n_(n,e,t);const r=function Gne(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(t_(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!KB(c,l,s))return o;r+=2}else{if(!KB(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new fn(n.segments.slice(0,r.pathIndex),{});return o.children[vt]=new fn(n.segments.slice(r.pathIndex),n.children),n_(o,0,i)}return r.match&&0===i.length?new fn(n.segments,{}):r.match&&!n.hasChildren()?LD(n,e,t):r.match?n_(n,0,i):LD(n,e,t)}function n_(n,e,t){if(0===t.length)return new fn(n.segments,{});{const r=function Hne(n){return t_(n[0])?n[0].outlets:{[vt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==vt)&&n.children[vt]&&1===n.numberOfChildren&&0===n.children[vt].segments.length){const o=n_(n.children[vt],e,t);return new fn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=qB(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new fn(n.segments,i)}}function LD(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(t_(o)){const c=qne(o.outlets);return new fn(r,c)}if(0===i&&rw(t[0])){r.push(new Xm(n.segments[e].path,WB(t[0]))),i++;continue}const s=t_(o)?o.outlets[vt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&rw(a)?(r.push(new Xm(s,WB(a))),i+=2):(r.push(new Xm(s,{})),i++)}return new fn(r,{})}function qne(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=LD(new fn([],{}),0,r))}),e}function WB(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function KB(n,e,t){return n==t.path&&Zs(e,t.parameters)}const r_="imperative";var $t=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}($t||{});class Xs{constructor(e,t){this.id=e,this.url=t}}class ow extends Xs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=$t.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class za extends Xs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=$t.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Co=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Co||{}),sw=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sw||{});class Fl extends Xs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _f extends Xs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationSkipped}}class VD extends Xs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=$t.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class QB extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wne extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kne extends Xs{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=$t.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qne extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yne extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jne{constructor(e){this.route=e,this.type=$t.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zne{constructor(e){this.route=e,this.type=$t.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xne{constructor(e){this.snapshot=e,this.type=$t.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ere{constructor(e){this.snapshot=e,this.type=$t.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tre{constructor(e){this.snapshot=e,this.type=$t.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nre{constructor(e){this.snapshot=e,this.type=$t.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=$t.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class UD{}class aw{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ys(n){return n.outlet||vt}function i_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cre{get injector(){return i_(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new o_(this.rootInjector),this.attachRef=null}}let o_=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cre(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(be(Zr))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class JB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=BD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=BD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jD(e,this._root).map(t=>t.value)}}function BD(n,e){if(n===e.value)return e;for(const t of e.children){const r=BD(n,t);if(r)return r}return null}function jD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jD(n,t);if(r.length)return r.unshift(e),r}return[]}class vs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ZB extends JB{constructor(e,t){super(e),this.snapshot=t,$D(this,e)}toString(){return this.snapshot.toString()}}function XB(n){const e=function ure(n){const o=new uw([],{},{},"",{},vt,n,null,{});return new ej("",new vs(o,[]))}(n),t=new Y([new Xm("",{})]),r=new Y({}),i=new Y({}),o=new Y({}),s=new Y(""),a=new ru(t,r,o,s,i,vt,n,e.root);return a.snapshot=e.root,new ZB(new vs(a,[]),e)}class ru{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ve(l=>l[Zm]))??Ze(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>gf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>gf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cw(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&nj(i)&&(r.resolve[Zm]=i.title),r}class uw{get title(){return this.data?.[Zm]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gf(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ej extends JB{constructor(e,t){super(t),this.url=e,$D(this,t)}toString(){return tj(this._root)}}function $D(n,e){e.value._routerState=n,e.children.forEach(t=>$D(n,t))}function tj(n){const e=n.children.length>0?` { ${n.children.map(tj).join(", ")} } `:"";return`${n.value}${e}`}function zD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zs(e.params,t.params)||n.paramsSubject.next(t.params),function Ene(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Zs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function HD(n,e){const t=Zs(n.params,e.params)&&function Cne(n,e){return kl(n,e)&&n.every((t,r)=>Zs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||HD(n.parent,e.parent))}function nj(n){return"string"==typeof n.title||null===n.title}let GD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=vt,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=G(o_),this.location=G(ds),this.changeDetector=G(Al),this.inputBinder=G(lw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qD(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=at({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ur]})}}return n})();class qD{__ngOutletInjector(e){return new qD(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ru?this.route:e===o_?this.childContexts:this.parent.get(e,t)}}const lw=new ye("");let rj=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=RD([r.queryParams,r.params,r.data]).pipe(xr(([o,s,a],c)=>(a={...o,...s,...a},0===c?Ze(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function MZ(n){const e=yt(n);if(!e)return null;const t=new _m(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();function s_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dre(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return s_(n,r,i);return s_(n,r)})}(n,e,t);return new vs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>s_(n,a)),s}}const r=function hre(n){return new ru(new Y(n.url),new Y(n.params),new Y(n.queryParams),new Y(n.fragment),new Y(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>s_(n,o));return new vs(r,i)}}class WD{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const ij="ngNavigationCancelingError";function dw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ol(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oj(!1,Co.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function oj(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[ij]=!0,t.cancellationCode=e,t}function sj(n){return!!n&&n[ij]}class gre{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=yf(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=yf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=yf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=yf(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nre(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ere(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(zD(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class aj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hw{constructor(e,t){this.component=e,this.route=t}}function mre(n,e,t){const r=n._root;return a_(r,e?e._root:null,t,[r.value])}function vf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Mp(n){return null!==Td(n)}(n)?e.get(n):n:r}function a_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=yf(e);return n.children.forEach(s=>{(function yre(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function vre(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kl(n.url,e.url)||!Zs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!HD(n,e)||!Zs(n.queryParams,e.queryParams);default:return!HD(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new aj(r)):(o.data=s.data,o._resolvedData=s._resolvedData),a_(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new hw(a.outlet.component,s))}else s&&c_(e,a,i),i.canActivateChecks.push(new aj(r)),a_(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>c_(a,t.getContext(s),i)),i}function c_(n,e,t){const r=yf(n),i=n.value;Object.entries(r).forEach(([o,s])=>{c_(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new hw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function u_(n){return"function"==typeof n}function cj(n){return n instanceof ln||"EmptyError"===n?.name}const fw=Symbol("INITIAL_VALUE");function If(){return xr(n=>RD(n.map(e=>e.pipe(ns(1),YE(fw)))).pipe(Ve(e=>{for(const t of e)if(!0!==t){if(t===fw)return fw;if(!1===t||Are(t))return t}return!0}),dn(e=>e!==fw),ns(1)))}function Are(n){return Ol(n)||n instanceof WD}function uj(n){return function Uu(...n){return Ts(n)}(jr(e=>{if("boolean"!=typeof e)throw dw(0,e)}),Ve(e=>!0===e))}class KD{constructor(e){this.segmentGroup=e||null}}class pw extends Error{constructor(e){super(),this.urlTree=e}}function Ef(n){return QE(new KD(n))}class Ure{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[vt])return QE(new he(4e3,!1));i=i.children[vt]}}applyRedirectCommands(e,t,r,i,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:l,routeConfig:f,url:m,outlet:y,params:I,data:b,title:D}=i,R=lo(o,()=>a({params:I,data:b,queryParams:c,fragment:l,routeConfig:f,url:m,outlet:y,title:D}));if(R instanceof xl)throw new pw(R);t=R}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new pw(s);return s}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new xl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new fn(o,s)}createSegments(e,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const QD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bre(n,e,t,r,i){const o=lj(n,e,t);return o.matched?(r=function rre(n,e){return n.providers&&!n._injector&&(n._injector=WI(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Fre(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ze(i.map(s=>{const a=vf(s,n);return nu(function Cre(n){return n&&u_(n.canMatch)}(a)?a.canMatch(e,t):lo(n,()=>a(e,t)))})).pipe(If(),uj()):Ze(!0)}(r,e,t).pipe(Ve(s=>!0===s?o:{...QD}))):Ze(o)}function lj(n,e,t){if("**"===e.path)return function jre(n){return{matched:!0,parameters:n.length>0?MB(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...QD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ine)(t,n,e);if(!i)return{...QD};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function dj(n,e,t,r){return t.length>0&&function Hre(n,e,t){return t.some(r=>gw(n,e,r)&&ys(r)!==vt)}(n,t,r)?{segmentGroup:new fn(e,zre(r,new fn(t,n.children))),slicedSegments:[]}:0===t.length&&function Gre(n,e,t){return t.some(r=>gw(n,e,r))}(n,t,r)?{segmentGroup:new fn(n.segments,$re(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new fn(n.segments,n.children),slicedSegments:t}}function $re(n,e,t,r){const i={};for(const o of t)if(gw(n,e,o)&&!r[ys(o)]){const s=new fn([],{});i[ys(o)]=s}return{...r,...i}}function zre(n,e){const t={};t[vt]=e;for(const r of n)if(""===r.path&&ys(r)!==vt){const i=new fn([],{});t[ys(r)]=i}return t}function gw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Wre{}class Yre{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ure(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new he(4002,`'${e.segmentGroup}'`)}recognize(){const e=dj(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(({children:t,rootSnapshot:r})=>{const i=new vs(r,t),o=new ej("",i),s=function Bne(n,e,t=null,r=null){return zB($B(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new uw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),vt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,vt,t).pipe(Ve(r=>({children:r,rootSnapshot:t})),pf(r=>{if(r instanceof pw)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof KD?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ve(s=>s instanceof vs?[s]:[]))}processChildren(e,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Sn(o).pipe(df(s=>{const a=r.children[s],c=function are(n,e){const t=n.filter(r=>ys(r)===e);return t.push(...n.filter(r=>ys(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,i)}),JE((s,a)=>(s.push(...a),s)),Bu(null),function mne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dn((i,o)=>n(i,o,r)):Kr,ND(1),t?Bu(e):yc(()=>new ln))}(),fi(s=>{if(null===s)return Ef(r);const a=hj(s);return function Jre(n){n.sort((e,t)=>e.value.outlet===vt?-1:t.value.outlet===vt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Ze(a)}))}processSegment(e,t,r,i,o,s,a){return Sn(t).pipe(df(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(pf(l=>{if(l instanceof KD)return Ze(null);throw l}))),xo(c=>!!c),pf(c=>{if(cj(c))return function qre(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?Ze(new Wre):Ef(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return ys(r)===s||s!==vt&&gw(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ef(i):Ef(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){const{matched:c,parameters:l,consumedSegments:f,positionalParamSegments:m,remainingSegments:y}=lj(t,i,o);if(!c)return Ef(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const I=new uw(o,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fj(i),ys(i),i.component??i._loadedComponent??null,i,pj(i)),b=cw(I,a,this.paramsInheritanceStrategy);I.params=Object.freeze(b.params),I.data=Object.freeze(b.data);const D=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,I,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(fi(R=>this.processSegment(e,r,t,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){const a=Bre(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(xr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(xr(({routes:l})=>{const f=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:I}=c,b=new uw(y,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fj(r),ys(r),r.component??r._loadedComponent??null,r,pj(r)),D=cw(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(D.params),b.data=Object.freeze(D.data);const{segmentGroup:R,slicedSegments:B}=dj(t,y,I,l);if(0===B.length&&R.hasChildren())return this.processChildren(f,l,R,b).pipe(Ve(q=>new vs(b,q)));if(0===l.length&&0===B.length)return Ze(new vs(b,[]));const L=ys(r)===o;return this.processSegment(f,l,R,B,L?vt:o,!0,b).pipe(Ve(q=>new vs(b,q instanceof vs?[q]:[])))})):Ef(t)))}getChildConfig(e,t,r){return t.children?Ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ore(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ze(!0):Ze(i.map(s=>{const a=vf(s,n);return nu(function Ere(n){return n&&u_(n.canLoad)}(a)?a.canLoad(e,t):lo(n,()=>a(e,t)))})).pipe(If(),uj())}(e,t,r).pipe(fi(i=>i?this.configLoader.loadChildren(e,t).pipe(jr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Vre(){return QE(oj(!1,Co.GuardRejected))}())):Ze({routes:[],injector:e})}}function Zre(n){const e=n.value.routeConfig;return e&&""===e.path}function hj(n){const e=[],t=new Set;for(const r of n){if(!Zre(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=hj(r.children);e.push(new vs(r.value,i))}return e.filter(r=>!t.has(r))}function fj(n){return n.data||{}}function pj(n){return n.resolve||{}}function gj(n){const e=n.children.map(t=>gj(t)).flat();return[n,...e]}function YD(n){return xr(e=>{const t=n(e);return t?Sn(t).pipe(Ve(()=>e)):Ze(e)})}let mj=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===vt);return r}getResolvedTitleForRoute(t){return t.data[Zm]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(iie),providedIn:"root"})}}return n})(),iie=(()=>{class n extends mj{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(be(Xte))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const wf=new ye("",{providedIn:"root",factory:()=>({})});let _j=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["ng-component"]],standalone:!0,features:[Yn],decls:1,vars:0,template:function(r,i){1&r&&Wo(0,"router-outlet")},dependencies:[GD],encapsulation:2})}}return n})();function JD(n){const e=n.children&&n.children.map(JD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==vt&&(t.component=_j),t}const bf=new ye("");let ZD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(a2)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=nu(t.loadComponent()).pipe(Ve(yj),jr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),$E(()=>{this.componentLoaders.delete(t)})),i=new RB(r,()=>new C).pipe(MD());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function oie(n,e,t,r){return nu(n.loadChildren()).pipe(Ve(yj),fi(i=>i instanceof bF||Array.isArray(i)?Ze(i):Sn(e.compileModuleAsync(i))),Ve(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(bf,[],{optional:!0,self:!0}).flat()),{routes:s.map(JD),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe($E(()=>{this.childrenLoaders.delete(r)})),s=new RB(o,()=>new C).pipe(MD());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yj(n){return function sie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let XD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(aie),providedIn:"root"})}}return n})(),aie=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const vj=new ye(""),Ij=new ye("");function cie(n,e,t){const r=n.get(Ij),i=n.get(Qi);return n.get(Rt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o;const s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),function uie(n){return new Promise(e=>{XI({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&lo(n,()=>c({transition:a,from:e,to:t})),s})}const Ej=new ye("");let mw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new C,this.transitionAbortSubject=new C,this.configLoader=G(ZD),this.environmentInjector=G(Zr),this.urlSerializer=G(mf),this.rootContexts=G(o_),this.location=G($m),this.inputBindingEnabled=null!==G(lw,{optional:!0}),this.titleStrategy=G(mj),this.options=G(wf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(XD),this.createViewTransition=G(vj,{optional:!0}),this.navigationErrorHandler=G(Ej,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ze(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Zne(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Jne(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Y({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:r_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(o=>0!==o.id),Ve(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xr(o=>{let s=!1,a=!1;return Ze(o).pipe(xr(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Co.SupersededByNewNavigation),ft;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new _f(c.id,this.urlSerializer.serialize(c.rawUrl),m,sw.IgnoredSameUrlNavigation)),c.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ze(c).pipe(xr(m=>{const y=this.transitions?.getValue();return this.events.next(new ow(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?ft:Promise.resolve(m)}),function Xre(n,e,t,r,i,o){return fi(s=>function Kre(n,e,t,r,i,o,s="emptyOnly"){return new Yre(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Ve(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),jr(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new QB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:m,extractedUrl:y,source:I,restoredState:b,extras:D}=c,R=new ow(m,this.urlSerializer.serialize(y),I,b);this.events.next(R);const B=XB(this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:B,urlAfterRedirects:y,extras:{...D,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=y,Ze(o)}{const m="";return this.events.next(new _f(c.id,this.urlSerializer.serialize(c.extractedUrl),m,sw.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ft}}),jr(c=>{const l=new Wne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Ve(c=>(this.currentTransition=o={...c,guards:mre(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function Dre(n,e){return fi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Ze({...t,guardsResult:!0}):function Sre(n,e,t,r){return Sn(n).pipe(fi(i=>function kre(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ze(o.map(a=>{const c=i_(e)??i,l=vf(a,c);return nu(function Tre(n){return n&&u_(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):lo(c,()=>l(n,e,t,r))).pipe(xo())})).pipe(If()):Ze(!0)}(i.component,i.route,t,e,r)),xo(i=>!0!==i,!0))}(s,r,i,n).pipe(fi(a=>a&&function Ire(n){return"boolean"==typeof n}(a)?function Rre(n,e,t,r){return Sn(e).pipe(df(i=>PD(function Mre(n,e){return null!==n&&e&&e(new Xne(n)),Ze(!0)}(i.route.parent,r),function Pre(n,e){return null!==n&&e&&e(new tre(n)),Ze(!0)}(i.route,r),function xre(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function _re(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>SB(()=>Ze(s.guards.map(c=>{const l=i_(s.node)??t,f=vf(c,l);return nu(function bre(n){return n&&u_(n.canActivateChild)}(f)?f.canActivateChild(r,n):lo(l,()=>f(r,n))).pipe(xo())})).pipe(If())));return Ze(o).pipe(If())}(n,i.path,t),function Nre(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(o=>SB(()=>{const s=i_(e)??t,a=vf(o,s);return nu(function wre(n){return n&&u_(n.canActivate)}(a)?a.canActivate(e,n):lo(s,()=>a(e,n))).pipe(xo())}));return Ze(i).pipe(If())}(n,i.route,t))),xo(i=>!0!==i,!0))}(r,o,n,e):Ze(a)),Ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),jr(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw dw(0,c.guardsResult);const l=new Kne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),dn(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Co.GuardRejected),!1)),YD(c=>{if(c.guards.canActivateChecks.length)return Ze(c).pipe(jr(l=>{const f=new Qne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),xr(l=>{let f=!1;return Ze(l).pipe(function eie(n,e){return fi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const l of gj(c))s.add(l);let a=0;return Sn(s).pipe(df(c=>o.has(c)?function tie(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!nj(i)&&(o[Zm]=i.title),function nie(n,e,t,r){const i=xD(n);if(0===i.length)return Ze({});const o={};return Sn(i).pipe(fi(s=>function rie(n,e,t,r){const i=i_(e)??r,o=vf(n,i);return nu(o.resolve?o.resolve(e,t):lo(i,()=>o(e,t)))}(n[s],e,t,r).pipe(xo(),jr(a=>{if(a instanceof WD)throw dw(new XE,a);o[s]=a}))),ND(1),function _ne(n){return Ve(()=>n)}(o),pf(s=>cj(s)?ft:QE(s)))}(o,n,e,r).pipe(Ve(s=>(n._resolvedData=s,n.data=cw(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=cw(c,c.parent,n).resolve,Ze(void 0))),jr(()=>a++),ND(1),fi(c=>a===s.size?Ze(t):ft))})}(this.paramsInheritanceStrategy,this.environmentInjector),jr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",Co.NoDataFromResolver)}}))}),jr(l=>{const f=new Yne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),YD(c=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(jr(y=>{f.component=y}),Ve(()=>{})));for(const y of f.children)m.push(...l(y));return m};return RD(l(c.targetSnapshot.root)).pipe(Bu(null),ns(1))}),YD(()=>this.afterPreactivation()),xr(()=>{const{currentSnapshot:c,targetSnapshot:l}=o,f=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return f?Sn(f).pipe(Ve(()=>o)):Ze(o)}),Ve(c=>{const l=function lre(n,e,t){const r=s_(n,e._root,t?t._root:void 0);return new ZB(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,o}),jr(()=>{this.events.next(new UD)}),((n,e,t,r)=>Ve(i=>(new gre(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ns(1),jr({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new za(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function yne(n){return ve((e,t)=>{To(n).subscribe(De(t,()=>t.complete(),No)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(jr(c=>{throw c}))),$E(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Co.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pf(c=>{if(a=!0,sj(c))this.events.next(new Fl(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function fre(n){return sj(n)&&Ol(n.url)}(c)?this.events.next(new aw(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{const l=new VD(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{const f=lo(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(f instanceof WD){const{message:m,cancellationCode:y}=dw(0,f);this.events.next(new Fl(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new aw(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(l);const m=t.errorHandler(c);o.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return ft}))}))}cancelNavigationTransition(t,r,i){const o=new Fl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lie(n){return n!==r_}let die=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(fie),providedIn:"root"})}}return n})();class hie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fie=(()=>{class n extends hie{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:()=>G(pie),providedIn:"root"})}}return n})(),pie=(()=>{class n extends wj{constructor(){super(...arguments),this.location=G($m),this.urlSerializer=G(mf),this.options=G(wf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(XD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XB(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ow)this.stateMemento=this.createStateMemento();else if(t instanceof _f)this.rawUrlTree=r.initialUrl;else if(t instanceof QB){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof UD?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Fl&&(t.code===Co.GuardRejected||t.code===Co.NoDataFromResolver)?this.restoreHistory(r):t instanceof VD?this.restoreHistory(r,!0):t instanceof za&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof xl?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&0===o&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var l_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(l_||{});function bj(n,e){n.events.pipe(dn(t=>t instanceof za||t instanceof Fl||t instanceof VD||t instanceof _f),Ve(t=>t instanceof za||t instanceof _f?l_.COMPLETE:t instanceof Fl&&(t.code===Co.Redirect||t.code===Co.SupersededByNewNavigation)?l_.REDIRECTING:l_.FAILED),dn(t=>t!==l_.REDIRECTING),ns(1)).subscribe(()=>{e()})}function gie(n){throw n}const mie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_ie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $r=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(PA),this.stateManager=G(wj),this.options=G(wf,{optional:!0})||{},this.pendingTasks=G(zc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(mw),this.urlSerializer=G(mf),this.location=G($m),this.urlHandlingStrategy=G(XD),this._events=new C,this.errorHandler=this.options.errorHandler||gie,this.navigated=!1,this.routeReuseStrategy=G(die),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(bf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(lw,{optional:!0}),this.eventsSubscription=new kt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Fl&&r.code!==Co.Redirect&&r.code!==Co.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof za)this.navigated=!0;else if(r instanceof aw){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||lie(i.source),...s};this.scheduleNavigation(a,r_,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function vie(n){return!(n instanceof UD||n instanceof aw)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),r_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(JD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let m,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}null!==f&&(f=this.removeEmptyProps(f));try{m=$B(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return zB(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ol(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,r_,null,r)}navigate(t,r={skipLocationChange:!1}){return function yie(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new he(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...mie}:!1===r?{..._ie}:r,Ol(t))return xB(this.currentUrlTree,t,i);const o=this.parseUrl(t);return xB(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((m,y)=>{a=m,c=y});const f=this.pendingTasks.add();return bj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tf=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new C,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof za&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ol(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function bO(n,e,t){return function uW(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?CI:wO}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.routerLinkInput?null:Ol(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ie($r),Ie(ru),function sn(n){return function sI(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(jd(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Jt(),n)}("tabindex"),Ie(Oa),Ie(mo),Ie(Sl))}}static{this.\u0275dir=at({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Le("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Ws("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",af],skipLocationChange:[2,"skipLocationChange","skipLocationChange",af],replaceUrl:[2,"replaceUrl","replaceUrl",af],routerLink:"routerLink"},standalone:!0,features:[wF,Ur]})}}return n})();class Tj{}let wie=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(dn(t=>t instanceof za),df(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=WI(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Sn(i).pipe(ff())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ze(null);const o=i.pipe(fi(s=>null===s?Ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Sn([o,this.loader.loadComponent(r)]).pipe(ff()):o})}static{this.\u0275fac=function(r){return new(r||n)(be($r),be(a2),be(Zr),be(Tj),be(ZD))}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const eS=new ye("");let Cj=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ow?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof za?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _f&&t.code===sw.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof YB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new YB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function KO(){throw new Error("invalid")}()}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac})}}return n})();function Aj(n){return n.routerState.root}function ea(n,e){return{\u0275kind:n,\u0275providers:e}}function Dj(){const n=G(Br);return e=>{const t=n.get(gs);if(e!==t.components[0])return;const r=n.get($r),i=n.get(Sj);1===n.get(tS)&&r.initialNavigation(),n.get(Rj,null,It.Optional)?.setUpPreloading(),n.get(eS,null,It.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Sj=new ye("",{factory:()=>new C}),tS=new ye("",{providedIn:"root",factory:()=>1}),Rj=new ye("");function Die(n){return ea(0,[{provide:Rj,useExisting:wie},{provide:Tj,useExisting:n}])}function Rie(n){return ea(9,[{provide:vj,useValue:cie},{provide:Ij,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Pj=new ye("ROUTER_FORROOT_GUARD"),Pie=[$m,{provide:mf,useClass:XE},$r,o_,{provide:ru,useFactory:Aj,deps:[$r]},ZD,[]];let nS=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Pie,[],{provide:bf,multi:!0,useValue:t},{provide:Pj,useFactory:kie,deps:[[$r,new Sc,new Od]]},{provide:wf,useValue:r||{}},r?.useHash?{provide:Sl,useClass:FZ}:{provide:Sl,useClass:X2},{provide:eS,useFactory:()=>{const n=G(XX),e=G(Rt),t=G(wf),r=G(mw),i=G(mf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Cj(i,r,n,e,t)}},r?.preloadingStrategy?Die(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Oie(r):[],r?.bindToComponentInputs?ea(8,[rj,{provide:lw,useExisting:rj}]).\u0275providers:[],r?.enableViewTransitions?Rie().\u0275providers:[],[{provide:Mj,useFactory:Dj},{provide:sf,multi:!0,useExisting:Mj}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bf,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(be(Pj,8))}}static{this.\u0275mod=Ns({type:n})}static{this.\u0275inj=Ui({})}}return n})();function kie(n){return"guarded"}function Oie(n){return["disabled"===n.initialNavigation?ea(3,[{provide:OA,multi:!0,useFactory:()=>{const e=G($r);return()=>{e.setUpLocationChangeListener()}}},{provide:tS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ea(2,[{provide:tS,useValue:0},{provide:OA,multi:!0,deps:[Br],useFactory:e=>{const t=e.get(kZ,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get($r),o=e.get(Sj);bj(i,()=>{r(!0)}),e.get(mw).afterPreactivation=()=>(r(!0),o.closed?Ze(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const Mj=new ye("");var Cf=it(631);(0,Cf.registerVersion)("firebase","10.14.1","app");class Uie extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const _w={setInterval(n,e,...t){const{delegate:r}=_w;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=_w;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Nj extends Uie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return _w.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&_w.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ut(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const rS={now:()=>(rS.delegate||Date).now(),delegate:void 0};class d_{constructor(e,t=d_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}d_.now=rS.now;class xj extends d_{constructor(e,t=d_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const $ie=new class jie extends xj{}(class Bie extends Nj{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),kj=new xj(Nj),yw=new rf("ANGULARFIRE2_VERSION");class Oj{constructor(){return(n=>{const t=(0,Cf.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(Hie)}}const Hie="app-check";function Af(){}class Fj{zone;delegate;constructor(e,t=$ie){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Gie{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Af,{},Af,Af)),t.pipe(jr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lj=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Fj(Zone.current)),this.insideAngular=t.run(()=>new Fj(Zone.current,kj)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(be(Rt))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ao(n){return function Wie(n){return function(t){return(t=t.lift(new Gie(n.ngZone))).pipe(lf(n.outsideAngular),Rl(n.insideAngular))}}(function Df(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Ha=it(574);Ha.A.registerVersion("firebase","10.14.1","app-compat");const Jie=["ngOnDestroy"];class Vj{constructor(e){return e}}const vw=new ye("angularfire2.app.options"),Iw=new ye("angularfire2.app.name");function iS(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Ha.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ha.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;eoe("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Vj(s)}const eoe=(n,...e)=>{},toe={provide:Vj,useFactory:iS,deps:[vw,Rt,[new Sc,Iw]]};let noe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:vw,useValue:t},{provide:Iw,useValue:r}]}}constructor(t){Ha.A.registerVersion("angularfire",yw.full,"core"),Ha.A.registerVersion("angularfire",yw.full,"app-compat"),Ha.A.registerVersion("angular",jY.full,t.toString())}static \u0275fac=function(r){return new(r||n)(be(_o))};static \u0275mod=Ns({type:n});static \u0275inj=Ui({providers:[toe]})}return n})();function Uj(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function roe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(Bj("error",`${e} was already initialized on the ${t} Firebase App with different settings.${ioe?" You may need to reload as Firebase is not HMR aware.":""}`),Bj("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const ioe=typeof module<"u"&&!!module.hot,Bj=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],it(324);class soe extends C{constructor(e=1/0,t=1/0,r=rS){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function oS(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ar({next:()=>{r.unsubscribe(),n()}});return To(e(...t)).subscribe(r)}function jj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function aoe(n={}){const{connector:e=()=>new C,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},I=()=>{y(),s=c=void 0,f=m=!1},b=()=>{const D=s;I(),D?.unsubscribe()};return ve((D,R)=>{l++,!m&&!f&&y();const B=c=c??e();R.add(()=>{l--,0===l&&!m&&!f&&(a=oS(b,i))}),B.subscribe(R),!s&&l>0&&(s=new Ar({next:L=>B.next(L),error:L=>{m=!0,y(),a=oS(I,t,L),B.error(L)},complete:()=>{f=!0,y(),a=oS(I,r),B.complete()}}),To(D).subscribe(s))})(o)}}({connector:()=>new soe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $j(n,e){return st(e)?xr(()=>n,e):xr(()=>n)}const zj=new ye("angularfire2.auth.use-emulator"),Hj=new ye("angularfire2.auth.settings"),Gj=new ye("angularfire2.auth.tenant-id"),qj=new ye("angularfire2.auth.langugage-code"),Wj=new ye("angularfire2.auth.use-device-language"),Kj=new ye("angularfire.auth.persistence"),Qj=(n,e,t,r,i,o,s,a)=>Uj(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(const[l,f]of Object.entries(s))c.settings[l]=f;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]);let iu=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,f,m,y,I){const b=new C,D=Ze(void 0).pipe(Rl(s.outsideAngular),xr(()=>o.runOutsideAngular(()=>Promise.resolve().then(it.bind(it,324)))),Ve(()=>iS(t,o,r)),Ve(R=>Qj(R,o,a,l,f,m,c,y)),jj({bufferSize:1,refCount:!1}));if(Gm(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ze(null);else{D.pipe(xo()).subscribe();const R=D.pipe(xr(q=>q.getRedirectResult().then(fe=>fe,()=>null)),Ao,jj({bufferSize:1,refCount:!1})),B=D.pipe(xr(q=>new Dt(fe=>({unsubscribe:o.runOutsideAngular(()=>q.onAuthStateChanged(Te=>fe.next(Te),Te=>fe.error(Te),()=>fe.complete()))})))),L=D.pipe(xr(q=>new Dt(fe=>({unsubscribe:o.runOutsideAngular(()=>q.onIdTokenChanged(Te=>fe.next(Te),Te=>fe.error(Te),()=>fe.complete()))}))));this.authState=R.pipe($j(B),lf(s.outsideAngular),Rl(s.insideAngular)),this.user=R.pipe($j(L),lf(s.outsideAngular),Rl(s.insideAngular)),this.idToken=this.user.pipe(xr(q=>q?Sn(q.getIdToken()):Ze(null))),this.idTokenResult=this.user.pipe(xr(q=>q?Sn(q.getIdTokenResult()):Ze(null))),this.credential=function ooe(...n){const e=Km(n),t=function Mee(n,e){return"number"==typeof gD(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?To(r[0]):ff(t)(Sn(r,e)):ft}(R,b,this.authState.pipe(dn(q=>!q))).pipe(Ve(q=>q?.user?q:null),lf(s.outsideAngular),Rl(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Jie.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const c=a?.[o];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,m),m})})})}))(this,D,o,{spy:{apply:(R,B,L)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&L.then(q=>b.next(q))}}})}static \u0275fac=function(r){return new(r||n)(be(vw),be(Iw,8),be(_o),be(Rt),be(Lj),be(zj,8),be(Hj,8),be(Gj,8),be(qj,8),be(Wj,8),be(Kj,8),be(Oj,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),uoe=(()=>{class n{constructor(){Ha.A.registerVersion("angularfire",yw.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ns({type:n});static \u0275inj=Ui({providers:[iu]})}return n})();function sS(){return ve((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function doe(n,e){return n===e}var Vl,Xj,Yj=it(779),ta=it(398),rn=it(401),Jj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zj={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(U,N,F){F||(F=0);var j=Array(16);if("string"==typeof N)for(var H=0;16>H;++H)j[H]=N.charCodeAt(F++)|N.charCodeAt(F++)<<8|N.charCodeAt(F++)<<16|N.charCodeAt(F++)<<24;else for(H=0;16>H;++H)j[H]=N[F++]|N[F++]<<8|N[F++]<<16|N[F++]<<24;var X=U.g[3],V=(N=U.g[0])+(X^(F=U.g[1])&((H=U.g[2])^X))+j[0]+3614090360&4294967295;V=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=(F=(H=(X=(N=F+(V<<7&4294967295|V>>>25))+((V=X+(H^N&(F^H))+j[1]+3905402710&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^X&(N^F))+j[2]+606105819&4294967295)<<17&4294967295|V>>>15))+((V=F+(N^H&(X^N))+j[3]+3250441966&4294967295)<<22&4294967295|V>>>10))+((V=N+(X^F&(H^X))+j[4]+4118548399&4294967295)<<7&4294967295|V>>>25))+((V=X+(H^N&(F^H))+j[5]+1200080426&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^X&(N^F))+j[6]+2821735955&4294967295)<<17&4294967295|V>>>15))+((V=F+(N^H&(X^N))+j[7]+4249261313&4294967295)<<22&4294967295|V>>>10))+((V=N+(X^F&(H^X))+j[8]+1770035416&4294967295)<<7&4294967295|V>>>25))+((V=X+(H^N&(F^H))+j[9]+2336552879&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^X&(N^F))+j[10]+4294925233&4294967295)<<17&4294967295|V>>>15))+((V=F+(N^H&(X^N))+j[11]+2304563134&4294967295)<<22&4294967295|V>>>10))+((V=N+(X^F&(H^X))+j[12]+1804603682&4294967295)<<7&4294967295|V>>>25))+((V=X+(H^N&(F^H))+j[13]+4254626195&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^X&(N^F))+j[14]+2792965006&4294967295)<<17&4294967295|V>>>15))+((V=F+(N^H&(X^N))+j[15]+1236535329&4294967295)<<22&4294967295|V>>>10))+((V=N+(H^X&(F^H))+j[1]+4129170786&4294967295)<<5&4294967295|V>>>27))+((V=X+(F^H&(N^F))+j[6]+3225465664&4294967295)<<9&4294967295|V>>>23))+((V=H+(N^F&(X^N))+j[11]+643717713&4294967295)<<14&4294967295|V>>>18))+((V=F+(X^N&(H^X))+j[0]+3921069994&4294967295)<<20&4294967295|V>>>12))+((V=N+(H^X&(F^H))+j[5]+3593408605&4294967295)<<5&4294967295|V>>>27))+((V=X+(F^H&(N^F))+j[10]+38016083&4294967295)<<9&4294967295|V>>>23))+((V=H+(N^F&(X^N))+j[15]+3634488961&4294967295)<<14&4294967295|V>>>18))+((V=F+(X^N&(H^X))+j[4]+3889429448&4294967295)<<20&4294967295|V>>>12))+((V=N+(H^X&(F^H))+j[9]+568446438&4294967295)<<5&4294967295|V>>>27))+((V=X+(F^H&(N^F))+j[14]+3275163606&4294967295)<<9&4294967295|V>>>23))+((V=H+(N^F&(X^N))+j[3]+4107603335&4294967295)<<14&4294967295|V>>>18))+((V=F+(X^N&(H^X))+j[8]+1163531501&4294967295)<<20&4294967295|V>>>12))+((V=N+(H^X&(F^H))+j[13]+2850285829&4294967295)<<5&4294967295|V>>>27))+((V=X+(F^H&(N^F))+j[2]+4243563512&4294967295)<<9&4294967295|V>>>23))+((V=H+(N^F&(X^N))+j[7]+1735328473&4294967295)<<14&4294967295|V>>>18))+((V=F+(X^N&(H^X))+j[12]+2368359562&4294967295)<<20&4294967295|V>>>12))+((V=N+(F^H^X)+j[5]+4294588738&4294967295)<<4&4294967295|V>>>28))+((V=X+(N^F^H)+j[8]+2272392833&4294967295)<<11&4294967295|V>>>21))+((V=H+(X^N^F)+j[11]+1839030562&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^X^N)+j[14]+4259657740&4294967295)<<23&4294967295|V>>>9))+((V=N+(F^H^X)+j[1]+2763975236&4294967295)<<4&4294967295|V>>>28))+((V=X+(N^F^H)+j[4]+1272893353&4294967295)<<11&4294967295|V>>>21))+((V=H+(X^N^F)+j[7]+4139469664&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^X^N)+j[10]+3200236656&4294967295)<<23&4294967295|V>>>9))+((V=N+(F^H^X)+j[13]+681279174&4294967295)<<4&4294967295|V>>>28))+((V=X+(N^F^H)+j[0]+3936430074&4294967295)<<11&4294967295|V>>>21))+((V=H+(X^N^F)+j[3]+3572445317&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^X^N)+j[6]+76029189&4294967295)<<23&4294967295|V>>>9))+((V=N+(F^H^X)+j[9]+3654602809&4294967295)<<4&4294967295|V>>>28))+((V=X+(N^F^H)+j[12]+3873151461&4294967295)<<11&4294967295|V>>>21))+((V=H+(X^N^F)+j[15]+530742520&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^X^N)+j[2]+3299628645&4294967295)<<23&4294967295|V>>>9))+((V=N+(H^(F|~X))+j[0]+4096336452&4294967295)<<6&4294967295|V>>>26))+((V=X+(F^(N|~H))+j[7]+1126891415&4294967295)<<10&4294967295|V>>>22))+((V=H+(N^(X|~F))+j[14]+2878612391&4294967295)<<15&4294967295|V>>>17))+((V=F+(X^(H|~N))+j[5]+4237533241&4294967295)<<21&4294967295|V>>>11))+((V=N+(H^(F|~X))+j[12]+1700485571&4294967295)<<6&4294967295|V>>>26))+((V=X+(F^(N|~H))+j[3]+2399980690&4294967295)<<10&4294967295|V>>>22))+((V=H+(N^(X|~F))+j[10]+4293915773&4294967295)<<15&4294967295|V>>>17))+((V=F+(X^(H|~N))+j[1]+2240044497&4294967295)<<21&4294967295|V>>>11))+((V=N+(H^(F|~X))+j[8]+1873313359&4294967295)<<6&4294967295|V>>>26))+((V=X+(F^(N|~H))+j[15]+4264355552&4294967295)<<10&4294967295|V>>>22))+((V=H+(N^(X|~F))+j[6]+2734768916&4294967295)<<15&4294967295|V>>>17))+((V=F+(X^(H|~N))+j[13]+1309151649&4294967295)<<21&4294967295|V>>>11))+((X=(N=F+((V=N+(H^(F|~X))+j[4]+4149444226&4294967295)<<6&4294967295|V>>>26))+((V=X+(F^(N|~H))+j[11]+3174756917&4294967295)<<10&4294967295|V>>>22))^((H=X+((V=H+(N^(X|~F))+j[2]+718787259&4294967295)<<15&4294967295|V>>>17))|~N))+j[9]+3951481745&4294967295,U.g[0]=U.g[0]+N&4294967295,U.g[1]=U.g[1]+(H+(V<<21&4294967295|V>>>11))&4294967295,U.g[2]=U.g[2]+H&4294967295,U.g[3]=U.g[3]+X&4294967295}function s(U,N){this.h=N;for(var F=[],j=!0,H=U.length-1;0<=H;H--){var X=0|U[H];j&&X==N||(F[H]=X,j=!1)}this.g=F}(function e(U,N){function F(){}F.prototype=N.prototype,U.D=N.prototype,U.prototype=new F,U.prototype.constructor=U,U.C=function(j,H,X){for(var V=Array(arguments.length-2),dc=2;dc<arguments.length;dc++)V[dc-2]=arguments[dc];return N.prototype[H].apply(j,V)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(U,N){void 0===N&&(N=U.length);for(var F=N-this.blockSize,j=this.B,H=this.h,X=0;X<N;){if(0==H)for(;X<=F;)i(this,U,X),X+=this.blockSize;if("string"==typeof U){for(;X<N;)if(j[H++]=U.charCodeAt(X++),H==this.blockSize){i(this,j),H=0;break}}else for(;X<N;)if(j[H++]=U[X++],H==this.blockSize){i(this,j),H=0;break}}this.h=H,this.o+=N},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var N=1;N<U.length-8;++N)U[N]=0;var F=8*this.o;for(N=U.length-8;N<U.length;++N)U[N]=255&F,F/=256;for(this.u(U),U=Array(16),N=F=0;4>N;++N)for(var j=0;32>j;j+=8)U[F++]=this.g[N]>>>j&255;return U};var a={};function c(U){return-128<=U&&128>U?function o(U,N){var F=a;return Object.prototype.hasOwnProperty.call(F,U)?F[U]:F[U]=N(U)}(U,function(N){return new s([0|N],0>N?-1:0)}):new s([0|U],0>U?-1:0)}function l(U){if(isNaN(U)||!isFinite(U))return m;if(0>U)return R(l(-U));for(var N=[],F=1,j=0;U>=F;j++)N[j]=U/F|0,F*=4294967296;return new s(N,0)}var m=c(0),y=c(1),I=c(16777216);function b(U){if(0!=U.h)return!1;for(var N=0;N<U.g.length;N++)if(0!=U.g[N])return!1;return!0}function D(U){return-1==U.h}function R(U){for(var N=U.g.length,F=[],j=0;j<N;j++)F[j]=~U.g[j];return new s(F,~U.h).add(y)}function B(U,N){return U.add(R(N))}function L(U,N){for(;(65535&U[N])!=U[N];)U[N+1]+=U[N]>>>16,U[N]&=65535,N++}function q(U,N){this.g=U,this.h=N}function fe(U,N){if(b(N))throw Error("division by zero");if(b(U))return new q(m,m);if(D(U))return N=fe(R(U),N),new q(R(N.g),R(N.h));if(D(N))return N=fe(U,R(N)),new q(R(N.g),N.h);if(30<U.g.length){if(D(U)||D(N))throw Error("slowDivide_ only works with positive integers.");for(var F=y,j=N;0>=j.l(U);)F=Te(F),j=Te(j);var H=Me(F,1),X=Me(j,1);for(j=Me(j,2),F=Me(F,2);!b(j);){var V=X.add(j);0>=V.l(U)&&(H=H.add(F),X=V),j=Me(j,1),F=Me(F,1)}return N=B(U,H.j(N)),new q(H,N)}for(H=m;0<=U.l(N);){for(F=Math.max(1,Math.floor(U.m()/N.m())),j=48>=(j=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,j-48),V=(X=l(F)).j(N);D(V)||0<V.l(U);)V=(X=l(F-=j)).j(N);b(X)&&(X=y),H=H.add(X),U=B(U,V)}return new q(H,U)}function Te(U){for(var N=U.g.length+1,F=[],j=0;j<N;j++)F[j]=U.i(j)<<1|U.i(j-1)>>>31;return new s(F,U.h)}function Me(U,N){var F=N>>5;N%=32;for(var j=U.g.length-F,H=[],X=0;X<j;X++)H[X]=0<N?U.i(X+F)>>>N|U.i(X+F+1)<<32-N:U.i(X+F);return new s(H,U.h)}(n=s.prototype).m=function(){if(D(this))return-R(this).m();for(var U=0,N=1,F=0;F<this.g.length;F++){var j=this.i(F);U+=(0<=j?j:4294967296+j)*N,N*=4294967296}return U},n.toString=function(U){if(2>(U=U||10)||36<U)throw Error("radix out of range: "+U);if(b(this))return"0";if(D(this))return"-"+R(this).toString(U);for(var N=l(Math.pow(U,6)),F=this,j="";;){var H=fe(F,N).g,X=((0<(F=B(F,H.j(N))).g.length?F.g[0]:F.h)>>>0).toString(U);if(b(F=H))return X+j;for(;6>X.length;)X="0"+X;j=X+j}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h},n.l=function(U){return D(U=B(this,U))?-1:b(U)?0:1},n.abs=function(){return D(this)?R(this):this},n.add=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0,H=0;H<=N;H++){var X=j+(65535&this.i(H))+(65535&U.i(H)),V=(X>>>16)+(this.i(H)>>>16)+(U.i(H)>>>16);j=V>>>16,F[H]=(V&=65535)<<16|(X&=65535)}return new s(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(U){if(b(this)||b(U))return m;if(D(this))return D(U)?R(this).j(R(U)):R(R(this).j(U));if(D(U))return R(this.j(R(U)));if(0>this.l(I)&&0>U.l(I))return l(this.m()*U.m());for(var N=this.g.length+U.g.length,F=[],j=0;j<2*N;j++)F[j]=0;for(j=0;j<this.g.length;j++)for(var H=0;H<U.g.length;H++){var X=this.i(j)>>>16,V=65535&this.i(j),dc=U.i(H)>>>16,ky=65535&U.i(H);F[2*j+2*H]+=V*ky,L(F,2*j+2*H),F[2*j+2*H+1]+=X*ky,L(F,2*j+2*H+1),F[2*j+2*H+1]+=V*dc,L(F,2*j+2*H+1),F[2*j+2*H+2]+=X*dc,L(F,2*j+2*H+2)}for(j=0;j<N;j++)F[j]=F[2*j+1]<<16|F[2*j];for(j=N;j<2*N;j++)F[j]=0;return new s(F,0)},n.A=function(U){return fe(this,U).h},n.and=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)&U.i(j);return new s(F,this.h&U.h)},n.or=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)|U.i(j);return new s(F,this.h|U.h)},n.xor=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)^U.i(j);return new s(F,this.h^U.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xj=Zj.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function f(U,N){if(0==U.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==U.charAt(0))return R(f(U.substring(1),N));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=l(Math.pow(N,8)),j=m,H=0;H<U.length;H+=8){var X=Math.min(8,U.length-H),V=parseInt(U.substring(H,H+X),N);8>X?(X=l(Math.pow(N,X)),j=j.j(X).add(l(V))):j=(j=j.j(F)).add(l(V))}return j},Vl=Zj.Integer=s}).apply(typeof Jj<"u"?Jj:typeof self<"u"?self:typeof window<"u"?window:{});var e3,h_,t3,ww,aS,n3,r3,i3,Ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ga={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ew&&Ew];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var T=0;T<h.length-1;T++){var K=h[T];if(!(K in E))break e;E=E[K]}(_=_(T=E[h=h[h.length-1]]))!=T&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function o(h,_){h instanceof String&&(h+="");var E=0,T=!1,K={next:function(){if(!T&&E<h.length){var ae=E++;return{value:_(ae,h[ae]),done:!1}}return T=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}(this,function(_,E){return E})}});var s=s||{},a=this||self;function c(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,T),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var T=E.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function b(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(T,K,ae){for(var Pe=Array(arguments.length-2),wn=2;wn<arguments.length;wn++)Pe[wn-2]=arguments[wn];return _.prototype[K].apply(T,Pe)}}function D(h){const _=h.length;if(0<_){const E=Array(_);for(let T=0;T<_;T++)E[T]=h[T];return E}return[]}function R(h,_){for(let E=1;E<arguments.length;E++){const T=arguments[E];if(c(T)){const K=h.length||0,ae=T.length||0;h.length=K+ae;for(let Pe=0;Pe<ae;Pe++)h[K+Pe]=T[Pe]}else h.push(T)}}function L(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function fe(h){return fe[" "](h),h}fe[" "]=function(){};var Te=!(-1==q().indexOf("Gecko")||-1!=q().toLowerCase().indexOf("webkit")&&-1==q().indexOf("Edge")||-1!=q().indexOf("Trident")||-1!=q().indexOf("MSIE")||-1!=q().indexOf("Edge"));function Me(h,_,E){for(const T in h)_.call(E,h[T],T,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,_){let E,T;for(let K=1;K<arguments.length;K++){for(E in T=arguments[K],T)h[E]=T[E];for(let ae=0;ae<F.length;ae++)E=F[ae],Object.prototype.hasOwnProperty.call(T,E)&&(h[E]=T[E])}}function H(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function X(h){a.setTimeout(()=>{throw h},0)}function V(){var h=Ex;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var ky=new class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Sme,h=>h.reset());class Sme{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Oy,Fy=!1,Ex=new class dc{constructor(){this.h=this.g=null}add(_,E){const T=ky.get();T.set(_,E),this.h?this.h.next=T:this.g=T,this.h=T}},U5=()=>{const h=a.Promise.resolve(void 0);Oy=()=>{h.then(Rme)}};var Rme=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(E){X(E)}var _=ky;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Fy=!1};function Nu(){this.s=this.s,this.C=this.C}function vi(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Nu.prototype.s=!1,Nu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},vi.prototype.h=function(){this.defaultPrevented=!0};var Pme=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function Ly(h,_){if(vi.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Te){e:{try{fe(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Mme[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ly.aa.h.call(this)}}b(Ly,vi);var Mme={2:"touch",3:"pen",4:"mouse"};Ly.prototype.h=function(){Ly.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Vy="closure_listenable_"+(1e6*Math.random()|0),Nme=0;function xme(h,_,E,T,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!T,this.ha=K,this.key=++Nme,this.da=this.fa=!1}function oT(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function sT(h){this.src=h,this.g={},this.h=0}function wx(h,_){var E=_.type;if(E in h.g){var ae,T=h.g[E],K=Array.prototype.indexOf.call(T,_,void 0);(ae=0<=K)&&Array.prototype.splice.call(T,K,1),ae&&(oT(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function bx(h,_,E,T){for(var K=0;K<h.length;++K){var ae=h[K];if(!ae.da&&ae.listener==_&&ae.capture==!!E&&ae.ha==T)return K}return-1}sT.prototype.add=function(h,_,E,T,K){var ae=h.toString();(h=this.g[ae])||(h=this.g[ae]=[],this.h++);var Pe=bx(h,_,T,K);return-1<Pe?(_=h[Pe],E||(_.fa=!1)):((_=new xme(_,this.src,ae,!!T,K)).fa=E,h.push(_)),_};var Tx="closure_lm_"+(1e6*Math.random()|0),Cx={};function B5(h,_,E,T,K){if(T&&T.once)return $5(h,_,E,T,K);if(Array.isArray(_)){for(var ae=0;ae<_.length;ae++)B5(h,_[ae],E,T,K);return null}return E=Rx(E),h&&h[Vy]?h.K(_,E,l(T)?!!T.capture:!!T,K):j5(h,_,E,!1,T,K)}function j5(h,_,E,T,K,ae){if(!_)throw Error("Invalid event type");var Pe=l(K)?!!K.capture:!!K,wn=Dx(h);if(wn||(h[Tx]=wn=new sT(h)),(E=wn.add(_,E,T,Pe,ae)).proxy)return E;if(T=function kme(){const _=Ome;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=T,T.src=h,T.listener=E,h.addEventListener)Pme||(K=Pe),void 0===K&&(K=!1),h.addEventListener(_.toString(),T,K);else if(h.attachEvent)h.attachEvent(H5(_.toString()),T);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(T)}return E}function $5(h,_,E,T,K){if(Array.isArray(_)){for(var ae=0;ae<_.length;ae++)$5(h,_[ae],E,T,K);return null}return E=Rx(E),h&&h[Vy]?h.L(_,E,l(T)?!!T.capture:!!T,K):j5(h,_,E,!0,T,K)}function z5(h,_,E,T,K){if(Array.isArray(_))for(var ae=0;ae<_.length;ae++)z5(h,_[ae],E,T,K);else T=l(T)?!!T.capture:!!T,E=Rx(E),h&&h[Vy]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=bx(ae=h.g[_],E,T,K))&&(oT(ae[E]),Array.prototype.splice.call(ae,E,1),0==ae.length&&(delete h.g[_],h.h--))):h&&(h=Dx(h))&&(_=h.g[_.toString()],h=-1,_&&(h=bx(_,E,T,K)),(E=-1<h?_[h]:null)&&Ax(E))}function Ax(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Vy])wx(_.i,h);else{var E=h.type,T=h.proxy;_.removeEventListener?_.removeEventListener(E,T,h.capture):_.detachEvent?_.detachEvent(H5(E),T):_.addListener&&_.removeListener&&_.removeListener(T),(E=Dx(_))?(wx(E,h),0==E.h&&(E.src=null,_[Tx]=null)):oT(h)}}}function H5(h){return h in Cx?Cx[h]:Cx[h]="on"+h}function Ome(h,_){if(h.da)h=!0;else{_=new Ly(_,this);var E=h.listener,T=h.ha||h.src;h.fa&&Ax(h),h=E.call(T,_)}return h}function Dx(h){return(h=h[Tx])instanceof sT?h:null}var Sx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rx(h){return"function"==typeof h?h:(h[Sx]||(h[Sx]=function(_){return h.handleEvent(_)}),h[Sx])}function Ii(){Nu.call(this),this.i=new sT(this),this.M=this,this.F=null}function Oi(h,_){var E,T=h.F;if(T)for(E=[];T;T=T.F)E.push(T);if(h=h.M,T=_.type||_,"string"==typeof _)_=new vi(_,h);else if(_ instanceof vi)_.target=_.target||h;else{var K=_;j(_=new vi(T,h),K)}if(K=!0,E)for(var ae=E.length-1;0<=ae;ae--){var Pe=_.g=E[ae];K=aT(Pe,T,!0,_)&&K}if(K=aT(Pe=_.g=h,T,!0,_)&&K,K=aT(Pe,T,!1,_)&&K,E)for(ae=0;ae<E.length;ae++)K=aT(Pe=_.g=E[ae],T,!1,_)&&K}function aT(h,_,E,T){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var K=!0,ae=0;ae<_.length;++ae){var Pe=_[ae];if(Pe&&!Pe.da&&Pe.capture==E){var wn=Pe.listener,si=Pe.ha||Pe.src;Pe.fa&&wx(h.i,Pe),K=!1!==wn.call(si,T)&&K}}return K&&!T.defaultPrevented}function G5(h,_,E){if("function"==typeof h)E&&(h=y(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function q5(h){h.g=G5(()=>{h.g=null,h.i&&(h.i=!1,q5(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(Ii,Nu),Ii.prototype[Vy]=!0,Ii.prototype.removeEventListener=function(h,_,E,T){z5(this,h,_,E,T)},Ii.prototype.N=function(){if(Ii.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],T=0;T<E.length;T++)oT(E[T]);delete h.g[_],h.h--}}this.F=null},Ii.prototype.K=function(h,_,E,T){return this.i.add(String(h),_,!1,E,T)},Ii.prototype.L=function(h,_,E,T){return this.i.add(String(h),_,!0,E,T)};class Fme extends Nu{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:q5(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uy(h){Nu.call(this),this.h=h,this.g={}}b(Uy,Nu);var W5=[];function K5(h){Me(h.g,function(_,E){this.g.hasOwnProperty(E)&&Ax(_)},h),h.g={}}Uy.prototype.N=function(){Uy.aa.N.call(this),K5(this)},Uy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Px=a.JSON.stringify,Lme=a.JSON.parse,Vme=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Mx(){}function Y5(){}Mx.prototype.h=null;var By={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nx(){vi.call(this,"d")}function xx(){vi.call(this,"c")}b(Nx,vi),b(xx,vi);var md={},J5=null;function cT(){return J5=J5||new Ii}function Z5(h){vi.call(this,md.La,h)}function jy(h){const _=cT();Oi(_,new Z5(_))}function X5(h,_){vi.call(this,md.STAT_EVENT,h),this.stat=_}function Fi(h){const _=cT();Oi(_,new X5(_,h))}function e6(h,_){vi.call(this,md.Ma,h),this.size=_}function $y(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function zy(){this.g=!0}function bp(h,_,E,T){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function $me(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var T=E[h];if(!(2>T.length)){var K=T[1];if(Array.isArray(K)&&!(1>K.length)){var ae=K[0];if("noop"!=ae&&"stop"!=ae&&"close"!=ae)for(var Pe=1;Pe<K.length;Pe++)K[Pe]=""}}}return Px(E)}catch{return _}}(h,E)+(T?" "+T:"")})}md.La="serverreachability",b(Z5,vi),md.STAT_EVENT="statevent",b(X5,vi),md.Ma="timingevent",b(e6,vi),zy.prototype.xa=function(){this.g=!1},zy.prototype.info=function(){};var kx,uT={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},t6={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function lT(){}function xu(h,_,E,T){this.j=h,this.i=_,this.l=E,this.R=T||1,this.U=new Uy(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new n6}function n6(){this.i=null,this.g="",this.h=!1}b(lT,Mx),lT.prototype.g=function(){return new XMLHttpRequest},lT.prototype.i=function(){return{}},kx=new lT;var r6={},Ox={};function Fx(h,_,E){h.L=1,h.v=pT(hc(_)),h.m=E,h.P=!0,i6(h,null)}function i6(h,_){h.F=Date.now(),dT(h),h.A=hc(h.v);var E=h.A,T=h.R;Array.isArray(T)||(T=[String(T)]),y6(E.i,"t",T),h.C=0,E=h.j.J,h.h=new n6,h.g=F6(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Fme(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,T=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(W5[0]=K.toString()),K=W5);for(var ae=0;ae<K.length;ae++){var Pe=B5(E,K[ae],T||_.handleEvent,!1,_.h||_);if(!Pe)break;_.g[Pe.key]=Pe}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),jy(),function Ume(h,_,E,T,K,ae){h.info(function(){if(h.g)if(ae)for(var Pe="",wn=ae.split("&"),si=0;si<wn.length;si++){var Zt=wn[si].split("=");if(1<Zt.length){var Ei=Zt[0];Zt=Zt[1];var wi=Ei.split("_");Pe=2<=wi.length&&"type"==wi[1]?Pe+(Ei+"=")+Zt+"&":Pe+(Ei+"=redacted&")}}else Pe=null;else Pe=ae;return"XMLHTTP REQ ("+T+") [attempt "+K+"]: "+_+"\n"+E+"\n"+Pe})}(h.i,h.u,h.A,h.l,h.R,h.m)}function o6(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function zme(h,_){var E=h.C,T=_.indexOf("\n",E);return-1==T?Ox:(E=Number(_.substring(E,T)),isNaN(E)?r6:(T+=1)+E>_.length?Ox:(_=_.slice(T,T+E),h.C=T+E,_))}function dT(h){h.S=Date.now()+h.I,s6(h,h.I)}function s6(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=$y(y(h.ba,h),_)}function Lx(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Hy(h){0==h.j.G||h.J||N6(h.j,h)}function _d(h){Lx(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,K5(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Vx(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||Ux(E.h,h)))if(!h.K&&Ux(E.h,h)&&3==E.G){try{var T=E.Da.g.parse(_)}catch{T=null}if(Array.isArray(T)&&3==T.length){var K=T;if(0==K[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;vT(E),_T(E)}zx(E),Fi(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&0==E.v&&!E.C&&(E.C=$y(y(E.Za,E),6e3));if(1>=u6(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else vd(E,11)}else if((h.K||E.g==h)&&vT(E),!L(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let Zt=K[_];if(E.T=Zt[0],Zt=Zt[1],2==E.G)if("c"==Zt[0]){E.K=Zt[1],E.ia=Zt[2];const Ei=Zt[3];null!=Ei&&(E.la=Ei,E.j.info("VER="+E.la));const wi=Zt[4];null!=wi&&(E.Aa=wi,E.j.info("SVER="+E.Aa));const Ap=Zt[5];null!=Ap&&"number"==typeof Ap&&0<Ap&&(E.L=T=1.5*Ap,E.j.info("backChannelRequestTimeoutMs_="+T)),T=E;const Es=h.g;if(Es){const ET=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ET){var ae=T.h;ae.g||-1==ET.indexOf("spdy")&&-1==ET.indexOf("quic")&&-1==ET.indexOf("h2")||(ae.j=ae.l,ae.g=new Set,ae.h&&(Bx(ae,ae.h),ae.h=null))}if(T.D){const Gx=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;Gx&&(T.ya=Gx,$n(T.I,T.D,Gx))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Pe=h;if((T=E).qa=O6(T,T.J?T.ia:null,T.W),Pe.K){l6(T.h,Pe);var wn=Pe,si=T.L;si&&(wn.I=si),wn.B&&(Lx(wn),dT(wn)),T.g=Pe}else P6(T);0<E.i.length&&yT(E)}else"stop"!=Zt[0]&&"close"!=Zt[0]||vd(E,7);else 3==E.G&&("stop"==Zt[0]||"close"==Zt[0]?"stop"==Zt[0]?vd(E,7):$x(E):"noop"!=Zt[0]&&E.l&&E.l.ta(Zt),E.v=0)}jy()}catch{}}xu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==fc(h)?_.j():this.Y(h)},xu.prototype.Y=function(h){try{if(h==this.g)e:{const wi=fc(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>wi)&&(3!=wi||this.g&&(this.h.h||this.g.oa()||C6(this.g)))){this.J||4!=wi||7==_||jy(),Lx(this);var E=this.g.Z();this.X=E;t:if(o6(this)){var T=C6(this.g);h="";var K=T.length,ae=4==fc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_d(this),Hy(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(T[_],{stream:!(ae&&_==K-1)});T.length=0,this.h.g+=h,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=200==E,function Bme(h,_,E,T,K,ae,Pe){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+K+"]: "+_+"\n"+E+"\n"+ae+" "+Pe})}(this.i,this.u,this.A,this.l,this.R,wi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var wn,si=this.g;if((wn=si.g?si.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(wn)){var Zt=wn;break t}}Zt=null}if(!(E=Zt)){this.o=!1,this.s=3,Fi(12),_d(this),Hy(this);break e}bp(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vx(this,E)}if(this.P){let Es;for(E=!0;!this.J&&this.C<Pe.length;){if(Es=zme(this,Pe),Es==Ox){4==wi&&(this.s=4,Fi(14),E=!1),bp(this.i,this.l,null,"[Incomplete Response]");break}if(Es==r6){this.s=4,Fi(15),bp(this.i,this.l,Pe,"[Invalid Chunk]"),E=!1;break}bp(this.i,this.l,Es,null),Vx(this,Es)}if(o6(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=wi||0!=Pe.length||this.h.h||(this.s=1,Fi(16),E=!1),this.o=this.o&&E,E){if(0<Pe.length&&!this.W){this.W=!0;var Ei=this.j;Ei.g==this&&Ei.ba&&!Ei.M&&(Ei.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),Hx(Ei),Ei.M=!0,Fi(11))}}else bp(this.i,this.l,Pe,"[Invalid Chunked Response]"),_d(this),Hy(this)}else bp(this.i,this.l,Pe,null),Vx(this,Pe);4==wi&&_d(this),this.o&&!this.J&&(4==wi?N6(this.j,this):(this.o=!1,dT(this)))}else(function s_e(h){const _={};h=(h.g&&2<=fc(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<h.length;T++){if(L(h[T]))continue;var E=H(h[T]);const K=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ae=_[K]||[];_[K]=ae,ae.push(E)}!function U(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(T){return T.join(", ")})})(this.g),400==E&&0<Pe.indexOf("Unknown SID")?(this.s=3,Fi(12)):(this.s=0,Fi(13)),_d(this),Hy(this)}}}catch{}},xu.prototype.cancel=function(){this.J=!0,_d(this)},xu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function jme(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(jy(),Fi(17)),_d(this),this.s=2,Hy(this)):s6(this,this.S-h)};var Hme=class{constructor(h,_){this.g=h,this.map=_}};function a6(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function c6(h){return!!h.h||!!h.g&&h.g.size>=h.j}function u6(h){return h.h?1:h.g?h.g.size:0}function Ux(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function Bx(h,_){h.g?h.g.add(_):h.h=_}function l6(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function d6(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return D(h.i)}function h6(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function qme(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const T in h)_[E++]=T;return _}}}(h),T=function Gme(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var _=[],E=h.length,T=0;T<E;T++)_.push(h[T]);return _}for(T in _=[],E=0,h)_[E++]=h[T];return _}(h),K=T.length,ae=0;ae<K;ae++)_.call(void 0,T[ae],E&&E[ae],h)}a6.prototype.cancel=function(){if(this.i=d6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var f6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yd(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof yd){this.h=h.h,hT(this,h.j),this.o=h.o,this.g=h.g,fT(this,h.s),this.l=h.l;var _=h.i,E=new Wy;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),p6(this,E),this.m=h.m}else h&&(_=String(h).match(f6))?(this.h=!1,hT(this,_[1]||"",!0),this.o=Gy(_[2]||""),this.g=Gy(_[3]||"",!0),fT(this,_[4]),this.l=Gy(_[5]||"",!0),p6(this,_[6]||"",!0),this.m=Gy(_[7]||"")):(this.h=!1,this.i=new Wy(null,this.h))}function hc(h){return new yd(h)}function hT(h,_,E){h.j=E?Gy(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function fT(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function p6(h,_,E){_ instanceof Wy?(h.i=_,function Xme(h,_){_&&!h.j&&(ku(h),h.i=null,h.g.forEach(function(E,T){var K=T.toLowerCase();T!=K&&(m6(this,T),y6(this,K,E))},h)),h.j=_}(h.i,h.h)):(E||(_=qy(_,Jme)),h.i=new Wy(_,h.h))}function $n(h,_,E){h.i.set(_,E)}function pT(h){return $n(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Gy(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qy(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,Kme),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Kme(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}yd.prototype.toString=function(){var h=[],_=this.j;_&&h.push(qy(_,g6,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(qy(_,g6,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(qy(E,"/"==E.charAt(0)?Yme:Qme,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",qy(E,Zme)),h.join("")};var g6=/[#\/\?@]/g,Qme=/[#\?:]/g,Yme=/[#\?]/g,Jme=/[#\?@]/g,Zme=/#/g;function Wy(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ku(h){h.g||(h.g=new Map,h.h=0,h.i&&function Wme(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var T=h[E].indexOf("="),K=null;if(0<=T){var ae=h[E].substring(0,T);K=h[E].substring(T+1)}else ae=h[E];_(ae,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function m6(h,_){ku(h),_=Tp(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function _6(h,_){return ku(h),_=Tp(h,_),h.g.has(_)}function y6(h,_,E){m6(h,_),0<E.length&&(h.i=null,h.g.set(Tp(h,_),D(E)),h.h+=E.length)}function Tp(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ou(h,_,E,T,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),T(E)}catch{}}function n_e(){this.g=new Vme}function r_e(h,_,E){const T=E||"";try{h6(h,function(K,ae){let Pe=K;l(K)&&(Pe=Px(K)),_.push(T+ae+"="+encodeURIComponent(Pe))})}catch(K){throw _.push(T+"type="+encodeURIComponent("_badmap")),K}}function Ky(h){this.l=h.Ub||null,this.j=h.eb||!1}function gT(h,_){Ii.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function v6(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Qy(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Yy(h)}function Yy(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function I6(h){let _="";return Me(h,function(E,T){_+=T,_+=":",_+=E,_+="\r\n"}),_}function jx(h,_,E){e:{for(T in E){var T=!1;break e}T=!0}T||(E=I6(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):$n(h,_,E))}function nr(h){Ii.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Wy.prototype).add=function(h,_){ku(this),this.i=null,h=Tp(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){ku(this),this.g.forEach(function(E,T){E.forEach(function(K){h.call(_,K,T,this)},this)},this)},n.na=function(){ku(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let T=0;T<_.length;T++){const K=h[T];for(let ae=0;ae<K.length;ae++)E.push(_[T])}return E},n.V=function(h){ku(this);let _=[];if("string"==typeof h)_6(this,h)&&(_=_.concat(this.g.get(Tp(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return ku(this),this.i=null,_6(this,h=Tp(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var T=_[E];const ae=encodeURIComponent(String(T)),Pe=this.V(T);for(T=0;T<Pe.length;T++){var K=ae;""!==Pe[T]&&(K+="="+encodeURIComponent(String(Pe[T]))),h.push(K)}}return this.i=h.join("&")},b(Ky,Mx),Ky.prototype.g=function(){return new gT(this.l,this.j)},Ky.prototype.i=function(h){return function(){return h}}({}),b(gT,Ii),(n=gT.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Yy(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qy(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yy(this)),this.g&&(this.readyState=3,Yy(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;v6(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Qy(this):Yy(this),3==this.readyState&&v6(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Qy(this))},n.Qa=function(h){this.g&&(this.response=h,Qy(this))},n.ga=function(){this.g&&Qy(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(gT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(nr,Ii);var i_e=/^https?$/i,o_e=["POST","PUT"];function E6(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,w6(h),mT(h)}function w6(h){h.A||(h.A=!0,Oi(h,"complete"),Oi(h,"error"))}function b6(h){if(h.h&&typeof s<"u"&&(!h.v[1]||4!=fc(h)||2!=h.Z()))if(h.u&&4==fc(h))G5(h.Ea,0,h);else if(Oi(h,"readystatechange"),4==fc(h)){h.h=!1;try{const Pe=h.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var T;if(T=0===Pe){var K=String(h.D).match(f6)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),T=!i_e.test(K?K.toLowerCase():"")}E=T}if(E)Oi(h,"complete"),Oi(h,"success");else{h.m=6;try{var ae=2<fc(h)?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.Z()+"]",w6(h)}}finally{mT(h)}}}function mT(h,_){if(h.g){T6(h);const E=h.g,T=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Oi(h,"ready");try{E.onreadystatechange=T}catch{}}}function T6(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function fc(h){return h.g?h.g.readyState:0}function C6(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function A6(h){this.Aa=0,this.i=[],this.j=new zy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jy("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jy("baseRetryDelayMs",5e3,h),this.cb=Jy("retryDelaySeedMs",1e4,h),this.Wa=Jy("forwardChannelMaxRetries",2,h),this.wa=Jy("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new a6(h&&h.concurrentRequestLimit),this.Da=new n_e,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function $x(h){if(D6(h),3==h.G){var _=h.U++,E=hc(h.I);if($n(E,"SID",h.K),$n(E,"RID",_),$n(E,"TYPE","terminate"),Zy(h,E),(_=new xu(h,h.j,_)).L=2,_.v=pT(hc(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=F6(_.j,null),_.g.ea(_.v)),_.F=Date.now(),dT(_)}k6(h)}function _T(h){h.g&&(Hx(h),h.g.cancel(),h.g=null)}function D6(h){_T(h),h.u&&(a.clearTimeout(h.u),h.u=null),vT(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function yT(h){if(!c6(h.h)&&!h.s){h.s=!0;var _=h.Ga;Oy||U5(),Fy||(Oy(),Fy=!0),Ex.add(_,h),h.B=0}}function S6(h,_){var E;E=_?_.l:h.U++;const T=hc(h.I);$n(T,"SID",h.K),$n(T,"RID",E),$n(T,"AID",h.T),Zy(h,T),h.m&&h.o&&jx(T,h.m,h.o),E=new xu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=R6(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Bx(h.h,E),Fx(E,T,_)}function Zy(h,_){h.H&&Me(h.H,function(E,T){$n(_,T,E)}),h.l&&h6({},function(E,T){$n(_,T,E)})}function R6(h,_,E){E=Math.min(h.i.length,E);var T=h.l?y(h.l.Na,h.l,h):null;e:{var K=h.i;let ae=-1;for(;;){const Pe=["count="+E];-1==ae?0<E?(ae=K[0].g,Pe.push("ofs="+ae)):ae=0:Pe.push("ofs="+ae);let wn=!0;for(let si=0;si<E;si++){let Zt=K[si].g;const Ei=K[si].map;if(Zt-=ae,0>Zt)ae=Math.max(0,K[si].g-100),wn=!1;else try{r_e(Ei,Pe,"req"+Zt+"_")}catch{T&&T(Ei)}}if(wn){T=Pe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,T}function P6(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Oy||U5(),Fy||(Oy(),Fy=!0),Ex.add(_,h),h.v=0}}function zx(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=$y(y(h.Fa,h),x6(h,h.v)),h.v++,0))}function Hx(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function M6(h){h.g=new xu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=hc(h.qa);$n(_,"RID","rpc"),$n(_,"SID",h.K),$n(_,"AID",h.T),$n(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&$n(_,"TO",h.ja),$n(_,"TYPE","xmlhttp"),Zy(h,_),h.m&&h.o&&jx(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=pT(hc(_)),E.m=null,E.P=!0,i6(E,h)}function vT(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function N6(h,_){var E=null;if(h.g==_){vT(h),Hx(h),h.g=null;var T=2}else{if(!Ux(h.h,_))return;E=_.D,l6(h.h,_),T=1}if(0!=h.G)if(_.o)if(1==T){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;Oi(T=cT(),new e6(T,E)),yT(h)}else P6(h);else if(3==(K=_.s)||0==K&&0<_.X||!(1==T&&function a_e(h,_){return!(u6(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=$y(y(h.Ga,h,_),x6(h,h.B)),h.B++,0)))}(h,_)||2==T&&zx(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:vd(h,5);break;case 4:vd(h,10);break;case 3:vd(h,6);break;default:vd(h,2)}}function x6(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function vd(h,_){if(h.j.info("Error code "+_),2==_){var E=y(h.fb,h),T=h.Xa;const K=!T;T=new yd(T||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||hT(T,"https"),pT(T),K?function e_e(h,_){const E=new zy;if(a.Image){const T=new Image;T.onload=I(Ou,E,"TestLoadImage: loaded",!0,_,T),T.onerror=I(Ou,E,"TestLoadImage: error",!1,_,T),T.onabort=I(Ou,E,"TestLoadImage: abort",!1,_,T),T.ontimeout=I(Ou,E,"TestLoadImage: timeout",!1,_,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else _(!1)}(T.toString(),E):function t_e(h,_){new zy;const T=new AbortController,K=setTimeout(()=>{T.abort(),Ou(0,0,!1,_)},1e4);fetch(h,{signal:T.signal}).then(ae=>{clearTimeout(K),Ou(0,0,!!ae.ok,_)}).catch(()=>{clearTimeout(K),Ou(0,0,!1,_)})}(T.toString(),E)}else Fi(2);h.G=0,h.l&&h.l.sa(_),k6(h),D6(h)}function k6(h){if(h.G=0,h.ka=[],h.l){const _=d6(h.h);(0!=_.length||0!=h.i.length)&&(R(h.ka,_),R(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function O6(h,_,E){var T=E instanceof yd?hc(E):new yd(E);if(""!=T.g)_&&(T.g=_+"."+T.g),fT(T,T.s);else{var K=a.location;T=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ae=new yd(null);T&&hT(ae,T),_&&(ae.g=_),K&&fT(ae,K),E&&(ae.l=E),T=ae}return _=h.ya,(E=h.D)&&_&&$n(T,E,_),$n(T,"VER",h.la),Zy(h,T),T}function F6(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new nr(h.Ca&&!h.pa?new Ky({eb:E}):h.pa)).Ha(h.J),_}function L6(){}function IT(){}function Po(h,_){Ii.call(this),this.g=new A6(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!L(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Cp(this)}function V6(h){Nx.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function U6(){xx.call(this),this.status=1}function Cp(h){this.g=h}(n=nr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kx.g(),this.v=function Q5(h){return h.h||(h.h=h.i())}(this.o?this.o:kx),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ae){return void E6(this,ae)}if(h=E||"",E=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var K in T)E.set(K,T[K]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const ae of T.keys())E.set(ae,T.get(ae))}T=Array.from(E.keys()).find(ae=>"content-type"==ae.toLowerCase()),K=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(o_e,_,void 0))||T||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Pe]of E)this.g.setRequestHeader(ae,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{T6(this),this.u=!0,this.g.send(h),this.u=!1}catch(ae){E6(this,ae)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Oi(this,"complete"),Oi(this,"abort"),mT(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mT(this,!0)),nr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?b6(this):this.bb())},n.bb=function(){b6(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<fc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Lme(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=A6.prototype).la=8,n.G=1,n.connect=function(h,_,E,T){Fi(0),this.W=h,this.H=_||{},E&&void 0!==T&&(this.H.OSID=E,this.H.OAID=T),this.F=this.X,this.I=O6(this,null,this.W),yT(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new xu(this,this.j,h);let ae=this.o;if(this.S&&(ae?(ae=N(ae),j(ae,this.S)):ae=this.S),null!==this.m||this.O||(K.H=ae,ae=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var T=this.i[E];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(_+=T)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=R6(this,K,_),$n(E=hc(this.I),"RID",h),$n(E,"CVER",22),this.D&&$n(E,"X-HTTP-Session-Id",this.D),Zy(this,E),ae&&(this.O?_="headers="+encodeURIComponent(String(I6(ae)))+"&"+_:this.m&&jx(E,this.m,ae)),Bx(this.h,K),this.Ua&&$n(E,"TYPE","init"),this.P?($n(E,"$req",_),$n(E,"SID","null"),K.T=!0,Fx(K,E,null)):Fx(K,E,_),this.G=2}}else 3==this.G&&(h?S6(this,h):0==this.i.length||c6(this.h)||S6(this))},n.Fa=function(){if(this.u=null,M6(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=$y(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fi(10),_T(this),M6(this))},n.Za=function(){null!=this.C&&(this.C=null,_T(this),zx(this),Fi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Fi(2)):(this.j.info("Failed to ping google.com"),Fi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=L6.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},IT.prototype.g=function(h,_){return new Po(h,_)},b(Po,Ii),Po.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Po.prototype.close=function(){$x(this.g)},Po.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=Px(h),h=E);_.i.push(new Hme(_.Ya++,h)),3==_.G&&yT(_)},Po.prototype.N=function(){this.g.l=null,delete this.j,$x(this.g),delete this.g,Po.aa.N.call(this)},b(V6,Nx),b(U6,xx),b(Cp,L6),Cp.prototype.ua=function(){Oi(this.g,"a")},Cp.prototype.ta=function(h){Oi(this.g,new V6(h))},Cp.prototype.sa=function(h){Oi(this.g,new U6)},Cp.prototype.ra=function(){Oi(this.g,"b")},IT.prototype.createWebChannel=IT.prototype.g,Po.prototype.send=Po.prototype.o,Po.prototype.open=Po.prototype.m,Po.prototype.close=Po.prototype.close,i3=Ga.createWebChannelTransport=function(){return new IT},r3=Ga.getStatEventTarget=function(){return cT()},n3=Ga.Event=md,aS=Ga.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uT.NO_ERROR=0,uT.TIMEOUT=8,uT.HTTP_ERROR=6,ww=Ga.ErrorCode=uT,t6.COMPLETE="complete",t3=Ga.EventType=t6,Y5.EventType=By,By.OPEN="a",By.CLOSE="b",By.ERROR="c",By.MESSAGE="d",Ii.prototype.listen=Ii.prototype.K,h_=Ga.WebChannel=Y5,Ga.FetchXmlHttpFactory=Ky,nr.prototype.listenOnce=nr.prototype.L,nr.prototype.getLastError=nr.prototype.Ka,nr.prototype.getLastErrorCode=nr.prototype.Ba,nr.prototype.getStatus=nr.prototype.Z,nr.prototype.getResponseJson=nr.prototype.Oa,nr.prototype.getResponseText=nr.prototype.oa,nr.prototype.send=nr.prototype.ea,nr.prototype.setWithCredentials=nr.prototype.Ha,e3=Ga.XhrIo=nr}).apply(typeof Ew<"u"?Ew:typeof self<"u"?self:typeof window<"u"?window:{});const o3="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Sf="10.14.0";const ou=new ta.Vy("@firebase/firestore");function Rf(){return ou.logLevel}function ge(n,...e){if(ou.logLevel<=ta.$b.DEBUG){const t=e.map(cS);ou.debug(`Firestore (${Sf}): ${n}`,...t)}}function pr(n,...e){if(ou.logLevel<=ta.$b.ERROR){const t=e.map(cS);ou.error(`Firestore (${Sf}): ${n}`,...t)}}function Do(n,...e){if(ou.logLevel<=ta.$b.WARN){const t=e.map(cS);ou.warn(`Firestore (${Sf}): ${n}`,...t)}}function cS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function je(n="Unexpected state"){const e=`FIRESTORE (${Sf}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Ge(n,e){n||je()}function Se(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends rn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class s3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class goe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class moe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _oe{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ge(void 0===this.o);let i=this.i;const o=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,S.A)(function*(){yield l.promise,yield o(r.currentUser)}))},c=l=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge("string"==typeof r.accessToken),new s3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(null===e||"string"==typeof e),new zr(e)}}class yoe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class voe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yoe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ioe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ge(void 0===this.o);const r=o=>{null!=o.error&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge("string"==typeof t.token),this.R=t.token,new a3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Eoe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class c3{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Eoe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function Pf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function u3(n){return n+"\0"}class Gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new Gn(0,0))}static max(){return new We(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class f_{constructor(e,t,r){void 0===t?t=0:t>e.length&&je(),void 0===r?r=e.length-t:r>e.length-t&&je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===f_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof f_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ft extends f_{construct(e,t,r){return new Ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ft(t)}static emptyPath(){return new Ft([])}}const woe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends f_{construct(e,t,r){return new Ln(e,t,r)}static isValidIdentifier(e){return woe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ft.fromString(e))}static fromName(e){return new Ne(Ft.fromString(e).popFirst(5))}static empty(){return new Ne(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ft.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ft(e.slice()))}}class Mf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function uS(n){return n.fields.find(e=>2===e.kind)}function Ul(n){return n.fields.filter(e=>2!==e.kind)}Mf.UNKNOWN_ID=-1;class Bl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nf(0,So.min())}}function l3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new Gn(t+1,0):new Gn(t,r));return new So(i,Ne.empty(),e)}function d3(n){return new So(n.readTime,n.key,-1)}class So{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new So(We.min(),Ne.empty(),-1)}static max(){return new So(We.max(),Ne.empty(),-1)}}function lS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ne.comparator(n.documentKey,e.documentKey),0!==t?t:ct(n.largestBatchId,e.largestBatchId))}const h3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function su(n){return dS.apply(this,arguments)}function dS(){return(dS=(0,S.A)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==h3)throw n;ge("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next(i=>i?Q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const l=c;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new Q((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class bw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Hr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new p_(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=hS(r.target.error);this.V.reject(new p_(e,i))}}static open(e,t,r,i){try{return new bw(t,e.transaction(i,r))}catch(o){throw new p_(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Aoe(t)}}class na{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===na.S((0,rn.ZQ)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ge("SimpleDb","Removing database:",e),jl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,rn.zW)())return!1;if(na.v())return!0;const e=(0,rn.ZQ)(),t=na.S(e),r=0<t&&t<10,i=p3(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,S.A)(function*(){return t.db||(ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new p_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new pe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new pe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new p_(e,a))},o.onupgradeneeded=s=>{ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,S.A)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const c=bw.open(o.db,e,s?"readonly":"readwrite",r),l=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),Q.reject(f))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,f="FirebaseError"!==l.name&&a<3;if(ge("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),o.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function p3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Coe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return jl(this.B.delete())}}class p_ extends pe{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(n){return"IndexedDbTransactionError"===n.name}class Aoe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jl(r)}add(e){return ge("SimpleDb","ADD",this.store.name,e,e),jl(this.store.add(e))}get(e){return jl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ge("SimpleDb","DELETE",this.store.name,e),jl(this.store.delete(e))}count(){return ge("SimpleDb","COUNT",this.store.name),jl(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new Q((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Q((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Q((r,i)=>{t.onerror=o=>{const s=hS(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new Q((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new Coe(a),l=t(a.primaryKey,a.value,c);if(l instanceof Q){const f=l.catch(m=>(c.done(),Q.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>Q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jl(n){return new Q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hS(r.target.error);t(i)}})}let g3=!1;function hS(n){const e=na.S((0,rn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g3||(g3=!0,setTimeout(()=>{throw r},0)),r}}return n}class Doe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,S.A)(function*(){t.task=null;try{ge("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){au(r)?ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield su(r)}yield t.X(6e4)}))}}class Soe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,S.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return Q.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ge("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(ge("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=d3(o);lS(s,r)>0&&(r=s)}),new So(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function g_(n){return null==n}function m_(n){return 0===n&&1/n==-1/0}function m3(n){return"number"==typeof n&&Number.isInteger(n)&&!m_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_3(e)),e=Roe(n.get(t),e);return _3(e)}function Roe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function _3(n){return n+"\x01\x01"}function ra(n){const e=n.length;if(Ge(e>=2),2===e)return Ge("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ft.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&je(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:je()}o=s+2}return new Ft(r)}const y3=["userId","batchId"];function Tw(n,e){return[n,pi(e)]}function v3(n,e,t){return[n,pi(e),t]}const Poe={},Moe=["prefixPath","collectionGroup","readTime","documentId"],Noe=["prefixPath","collectionGroup","documentId"],xoe=["collectionGroup","readTime","prefixPath","documentId"],koe=["canonicalId","targetId"],Ooe=["targetId","path"],Foe=["path","targetId"],Loe=["collectionId","parent"],Voe=["indexId","uid"],Uoe=["uid","sequenceNumber"],Boe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],joe=["indexId","uid","orderedDocumentKey"],$oe=["userId","collectionPath","documentId"],zoe=["userId","collectionPath","largestBatchId"],Hoe=["userId","collectionGroup","largestBatchId"],I3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Goe=[...I3,"documentOverlays"],E3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],w3=E3,fS=[...w3,"indexConfiguration","indexState","indexEntries"],qoe=fS,Woe=[...fS,"globals"];class pS extends f3{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function kr(n,e){const t=Se(n);return na.F(t._e,e)}function b3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function C3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Rn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cw(this.root,e,this.comparator,!0)}}class Cw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ni.RED,this.left=i??ni.EMPTY,this.right=o??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ni(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ni(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A3(this.data.getIterator())}getIteratorFrom(e){return new A3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class A3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xf(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new pn(Ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class D3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new D3("Invalid base64 string: "+o):o}}(e);return new tr(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const Qoe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(n){if(Ge(!!n),"string"==typeof n){let e=0;const t=Qoe.exec(n);if(Ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wa(n){return"string"==typeof n?tr.fromBase64String(n):tr.fromUint8Array(n)}function Aw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dw(n){const e=n.mapValue.fields.__previous_value__;return Aw(e)?Dw(e):e}function __(n){const e=qa(n.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class Yoe{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}const lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sw={nullValue:"NULL_VALUE"};function du(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Aw(n)?4:N3(n)?9007199254740991:Mw(n)?10:11:je()}function ia(n,e){if(n===e)return!0;const t=du(n);if(t!==du(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __(n).isEqual(__(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=qa(i.timestampValue),a=qa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Wa(n.bytesValue).isEqual(Wa(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return qn(i.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(i.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qn(i.integerValue)===qn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=qn(i.doubleValue),a=qn(o.doubleValue);return s===a?m_(s)===m_(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Pf(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(b3(s)!==b3(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!ia(s[c],a[c])))return!1;return!0}(n,e);default:return je()}var o}function y_(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function hu(n,e){if(n===e)return 0;const t=du(n),r=du(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=qn(o.integerValue||o.doubleValue),c=qn(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return S3(n.timestampValue,e.timestampValue);case 4:return S3(__(n),__(e));case 5:return ct(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Wa(o),c=Wa(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){const f=ct(a[l],c[l]);if(0!==f)return f}return ct(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ct(qn(o.latitude),qn(s.latitude));return 0!==a?a:ct(qn(o.longitude),qn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return R3(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,f;const I=null===(a=(o.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(c=(s.fields||{}).value)||void 0===c?void 0:c.arrayValue,D=ct((null===(l=I?.values)||void 0===l?void 0:l.length)||0,(null===(f=b?.values)||void 0===f?void 0:f.length)||0);return 0!==D?D:R3(I,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===lu.mapValue&&s===lu.mapValue)return 0;if(o===lu.mapValue)return 1;if(s===lu.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),l=s.fields||{},f=Object.keys(l);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const y=ct(c[m],f[m]);if(0!==y)return y;const I=hu(a[c[m]],l[f[m]]);if(0!==I)return I}return ct(c.length,f.length)}(n.mapValue,e.mapValue);default:throw je()}}function S3(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ct(n,e);const t=qa(n),r=qa(e),i=ct(t.seconds,r.seconds);return 0!==i?i:ct(t.nanos,r.nanos)}function R3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=hu(t[i],r[i]);if(o)return o}return ct(t.length,r.length)}function kf(n){return gS(n)}function gS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=qa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wa(n.bytesValue).toBase64():"referenceValue"in n?Ne.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=gS(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${gS(t.fields[s])}`;return i+"}"}(n.mapValue):je()}function $l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mS(n){return!!n&&"integerValue"in n}function v_(n){return!!n&&"arrayValue"in n}function P3(n){return!!n&&"nullValue"in n}function M3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pw(n){return!!n&&"mapValue"in n}function Mw(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function I_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=I_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=I_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const x3={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Joe(n){return"nullValue"in n?Sw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$l(uu.empty(),Ne.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Mw(n)?x3:{mapValue:{}}:je()}function Zoe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$l(uu.empty(),Ne.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?x3:"mapValue"in n?Mw(n)?{mapValue:{}}:lu:je()}function k3(n,e){const t=hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function O3(n,e){const t=hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=I_(t)}setAll(e){let t=Ln.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=I_(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Pw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cu(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ri(I_(this.value))}}function F3(n){const e=[];return cu(n.fields,(t,r)=>{const i=new Ln([t]);if(Pw(r)){const o=F3(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Yi(e)}class Vn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Vn(e,0,We.min(),We.min(),We.min(),ri.empty(),0)}static newFoundDocument(e,t,r,i){return new Vn(e,1,t,We.min(),r,i,0)}static newNoDocument(e,t){return new Vn(e,2,t,We.min(),We.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,We.min(),We.min(),ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fu{constructor(e,t){this.position=e,this.inclusive=t}}function L3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Ne.comparator(Ne.fromName(s.referenceValue),t.key):hu(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function V3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class E_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xoe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class U3{}class Lt extends U3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ese(e,t,r):"array-contains"===t?new rse(e,r):"in"===t?new G3(e,r):"not-in"===t?new ise(e,r):"array-contains-any"===t?new ose(e,r):new Lt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new tse(e,r):new nse(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(hu(t,this.value)):null!==t&&du(this.value)===du(t)&&this.matchesComparison(hu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends U3{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new cn(e,t)}matches(e){return Of(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Of(n){return"and"===n.op}function _S(n){return"or"===n.op}function yS(n){return B3(n)&&Of(n)}function B3(n){for(const e of n.filters)if(e instanceof cn)return!1;return!0}function vS(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+kf(n.value);if(yS(n))return n.filters.map(e=>vS(e)).join(",");{const e=n.filters.map(t=>vS(t)).join(",");return`${n.op}(${e})`}}function j3(n,e){return n instanceof Lt?(r=n,(i=e)instanceof Lt&&r.op===i.op&&r.field.isEqual(i.field)&&ia(r.value,i.value)):n instanceof cn?function(r,i){return i instanceof cn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&j3(s,i.filters[a]),!0)}(n,e):void je();var r,i}function $3(n,e){const t=n.filters.concat(e);return cn.create(t,n.op)}function z3(n){return n instanceof Lt?`${(t=n).field.canonicalString()} ${t.op} ${kf(t.value)}`:n instanceof cn?function(t){return t.op.toString()+" {"+t.getFilters().map(z3).join(" ,")+"}"}(n):"Filter";var t}class ese extends Lt{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class tse extends Lt{constructor(e,t){super(e,"in",t),this.keys=H3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nse extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=H3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function H3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class rse extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return v_(t)&&y_(t.arrayValue,this.value)}}class G3 extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&y_(this.value.arrayValue,t)}}class ise extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(y_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!y_(this.value.arrayValue,t)}}class ose extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!v_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>y_(this.value.arrayValue,r))}}class sse{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function IS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new sse(n,e,t,r,i,o,s)}function zl(n){const e=Se(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),g_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kf(r)).join(",")),e.ue=t}return e.ue}function w_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xoe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!j3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V3(n.startAt,e.startAt)&&V3(n.endAt,e.endAt)}function Nw(n){return Ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xw(n,e){return n.filters.filter(t=>t instanceof Lt&&t.field.isEqual(e))}function q3(n,e,t){let r=Sw,i=!0;for(const o of xw(n,e)){let s=Sw,a=!0;switch(o.op){case"<":case"<=":s=Joe(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Sw}k3({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];k3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function W3(n,e,t){let r=lu,i=!0;for(const o of xw(n,e)){let s=lu,a=!0;switch(o.op){case">=":case">":s=Zoe(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=lu}O3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];O3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class Ka{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function K3(n,e,t,r,i,o,s,a){return new Ka(n,e,t,r,i,o,s,a)}function Ff(n){return new Ka(n)}function Q3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ES(n){return null!==n.collectionGroup}function Lf(n){const e=Se(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new pn(Ln.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new E_(o,r))}),t.has(Ln.keyField().canonicalString())||e.ce.push(new E_(Ln.keyField(),r))}return e.ce}function gi(n){const e=Se(n);return e.le||(e.le=function J3(n,e){if("F"===n.limitType)return IS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new E_(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new fu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fu(n.startAt.position,n.startAt.inclusive):null;return IS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Lf(n))),e.le}function wS(n,e){const t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kw(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function b_(n,e){return w_(gi(n),gi(e))&&n.limitType===e.limitType}function Z3(n){return`${zl(gi(n))}|lt:${n.limitType}`}function Vf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>z3(i)).join(", ")}]`),g_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>kf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>kf(i)).join(",")),`Target(${r})`}(gi(n))}; limitType=${n.limitType})`}function T_(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Lf(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,c){const l=L3(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Lf(r),i)||r.endAt&&!function(s,a,c){const l=L3(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Lf(r),i)));var r,i}function X3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function e$(n){return(e,t)=>{let r=!1;for(const i of Lf(n)){const o=ase(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function ase(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),l=a.data.field(o);return null!==c&&null!==l?hu(c,l):je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return je()}}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return C3(this.inner)}size(){return this.innerSize}}const cse=new Rn(Ne.comparator);function Ji(){return cse}const t$=new Rn(Ne.comparator);function C_(...n){let e=t$;for(const t of n)e=e.insert(t.key,t);return e}function n$(n){let e=t$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function oa(){return A_()}function r$(){return A_()}function A_(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const use=new Rn(Ne.comparator),lse=new pn(Ne.comparator);function mt(...n){let e=lse;for(const t of n)e=e.add(t);return e}const dse=new pn(ct);function bS(){return dse}function TS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m_(e)?"-0":e}}function i$(n){return{integerValue:""+n}}function o$(n,e){return m3(e)?i$(e):TS(n,e)}class Ow{constructor(){this._=void 0}}function hse(n,e,t){return n instanceof Uf?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Aw(o)&&(o=Dw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Hl?a$(n,e):n instanceof Gl?c$(n,e):function(i,o){const s=s$(i,o),a=u$(s)+u$(i.Pe);return mS(s)&&mS(i.Pe)?i$(a):TS(i.serializer,a)}(n,e)}function fse(n,e,t){return n instanceof Hl?a$(n,e):n instanceof Gl?c$(n,e):t}function s$(n,e){return n instanceof Bf?mS(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Uf extends Ow{}class Hl extends Ow{constructor(e){super(),this.elements=e}}function a$(n,e){const t=l$(e);for(const r of n.elements)t.some(i=>ia(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gl extends Ow{constructor(e){super(),this.elements=e}}function c$(n,e){let t=l$(e);for(const r of n.elements)t=t.filter(i=>!ia(i,r));return{arrayValue:{values:t}}}class Bf extends Ow{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function u$(n){return qn(n.integerValue||n.doubleValue)}function l$(n){return v_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class D_{constructor(e,t){this.field=e,this.transform=t}}class gse{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lw{}function d$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $f(n.key,Wn.none()):new jf(n.key,n.data,Wn.none());{const t=n.data,r=ri.empty();let i=new pn(Ln.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ya(n.key,r,new Yi(i.toArray()),Wn.none())}}function mse(n,e,t){n instanceof jf?function(i,o,s){const a=i.value.clone(),c=p$(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ya?function(i,o,s){if(!Fw(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=p$(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(f$(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function S_(n,e,t,r){return n instanceof jf?function(o,s,a,c){if(!Fw(o.precondition,s))return a;const l=o.value.clone(),f=g$(o.fieldTransforms,c,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ya?function(o,s,a,c){if(!Fw(o.precondition,s))return a;const l=g$(o.fieldTransforms,c,s),f=s.data;return f.setAll(f$(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Fw(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function _se(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=s$(r.transform,i||null);null!=o&&(null===t&&(t=ri.empty()),t.set(r.field,o))}return t||null}function h$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Pf(r,i,(o,s)=>function pse(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Hl&&i instanceof Hl||r instanceof Gl&&i instanceof Gl?Pf(r.elements,i.elements,ia):r instanceof Bf&&i instanceof Bf?ia(r.Pe,i.Pe):r instanceof Uf&&i instanceof Uf);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class jf extends Lw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ya extends Lw{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function p$(n,e,t){const r=new Map;Ge(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fse(s,a,t[i]))}return r}function g$(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,hse(o,s,e))}return r}class $f extends Lw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CS extends Lw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&mse(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=S_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=S_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=r$();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=d$(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Pf(this.mutations,e.mutations,(t,r)=>h$(t,r))&&Pf(this.baseMutations,e.baseMutations,(t,r)=>h$(t,r))}}class DS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length);let i=function(){return use}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new DS(e,t,r,i)}}class SS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yse{constructor(e,t){this.count=e,this.unchangedNames=t}}var br,Gt;function _$(n){switch(n){default:return je();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function y$(n){if(void 0===n)return pr("GRPC error has no .code"),re.UNKNOWN;switch(n){case br.OK:return re.OK;case br.CANCELLED:return re.CANCELLED;case br.UNKNOWN:return re.UNKNOWN;case br.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case br.INTERNAL:return re.INTERNAL;case br.UNAVAILABLE:return re.UNAVAILABLE;case br.UNAUTHENTICATED:return re.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case br.NOT_FOUND:return re.NOT_FOUND;case br.ALREADY_EXISTS:return re.ALREADY_EXISTS;case br.PERMISSION_DENIED:return re.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case br.ABORTED:return re.ABORTED;case br.OUT_OF_RANGE:return re.OUT_OF_RANGE;case br.UNIMPLEMENTED:return re.UNIMPLEMENTED;case br.DATA_LOSS:return re.DATA_LOSS;default:return je()}}(Gt=br||(br={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";function v$(){return new TextEncoder}const vse=new Vl([4294967295,4294967295],0);function I$(n){const e=v$().encode(n),t=new Xj;return t.update(e),new Uint8Array(t.digest())}function E$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vl([t,r],0),new Vl([i,o],0)]}class RS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new R_(`Invalid padding: ${t}`);if(r<0)throw new R_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new R_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new R_(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vl.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Vl.fromNumber(r)));return 1===i.compare(vse)&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=I$(e),[r,i]=E$(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new RS(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=I$(e),[r,i]=E$(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class R_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class P_{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,M_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new P_(We.min(),i,new Rn(ct),Ji(),mt())}}class M_{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new M_(r,t,mt(),mt(),mt())}}class Uw{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class w${constructor(e,t){this.targetId=e,this.me=t}}class b${constructor(e,t,r=tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class T${constructor(){this.fe=0,this.ge=A$(),this.pe=tr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=mt(),t=mt(),r=mt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:je()}}),new M_(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=A$()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ise{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ji(),this.qe=C$(),this.Qe=new Rn(ct)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(Nw(o))if(0===r){const s=new Ne(o.path);this.Ue(t,s,Vn.newNoDocument(s,We.min()))}else Ge(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),c=a?this.Xe(a,e,s):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Wa(r).toUint8Array()}catch(c){if(c instanceof D3)return Do("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new RS(s,i,o)}catch(c){return Do(c instanceof R_?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&Nw(a.target)){const c=new Ne(a.target.path);null!==this.ke.get(c)||this.it(s,c)||this.Ue(s,c,Vn.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=mt();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new P_(e,t,this.Qe,this.ke,r);return this.ke=Ji(),this.qe=C$(),this.Qe=new Rn(ct),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new T$,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new pn(ct),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T$),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function C$(){return new Rn(Ne.comparator)}function A$(){return new Rn(Ne.comparator)}const Ese={asc:"ASCENDING",desc:"DESCENDING"},wse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bse={and:"AND",or:"OR"};class Tse{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function PS(n,e){return n.useProto3Json||g_(e)?e:{value:e}}function zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Cse(n,e){return zf(n,e.toTimestamp())}function gr(n){return Ge(!!n),We.fromTimestamp(function(t){const r=qa(t);return new Gn(r.seconds,r.nanos)}(n))}function MS(n,e){return NS(n,e).canonicalString()}function NS(n,e){const t=(i=n,new Ft(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function S$(n){const e=Ft.fromString(n);return Ge(U$(e)),e}function N_(n,e){return MS(n.databaseId,e.path)}function sa(n,e){const t=S$(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(M$(t))}function R$(n,e){return MS(n.databaseId,e)}function P$(n){const e=S$(n);return 4===e.length?Ft.emptyPath():M$(e)}function xS(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M$(n){return Ge(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function N$(n,e,t){return{name:N_(n,e),fields:t.value.mapValue.fields}}function x$(n,e,t){const r=sa(n,e.name),i=gr(e.updateTime),o=e.createTime?gr(e.createTime):We.min(),s=new ri({mapValue:{fields:e.fields}}),a=Vn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function x_(n,e){let t;if(e instanceof jf)t={update:N$(n,e.key,e.value)};else if(e instanceof $f)t={delete:N_(n,e.key)};else if(e instanceof Ya)t={update:N$(n,e.key,e.data),updateMask:xse(e.fieldMask)};else{if(!(e instanceof CS))return je();t={verify:N_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Uf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bf)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Cse(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:je()),t;var o}function kS(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Wn.updateTime(gr(o.updateTime)):void 0!==o.exists?Wn.exists(o.exists):Wn.none():Wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(Ge("REQUEST_TIME"===a.setToServerValue),c=new Uf):"appendMissingElements"in a?c=new Hl(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Gl(a.removeAllFromArray.values||[]):"increment"in a?c=new Bf(s,a.increment):je();const l=Ln.fromServerFormat(a.fieldPath);return new D_(l,c)}(n,i)):[];var o;if(e.update){const i=sa(n,e.update.name),o=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Yi((e.updateMask.fieldPaths||[]).map(f=>Ln.fromServerFormat(f)));return new Ya(i,o,s,t,r)}return new jf(i,o,t,r)}if(e.delete){const i=sa(n,e.delete);return new $f(i,t)}if(e.verify){const i=sa(n,e.verify);return new CS(i,t)}return je()}function k$(n,e){return{documents:[R$(n,e.path)]}}function Bw(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=R$(n,i);const o=function(l){if(0!==l.length)return V$(cn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(f=>{return{field:pu((y=f).field),direction:Pse(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=PS(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function F$(n){let e=P$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ge(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(m){const y=L$(m);return y instanceof cn&&yS(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(y=>{return new E_(Hf((b=y).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,g_(y)?null:y}(t.limit));let c=null;var m;t.startAt&&(c=new fu((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new fu(m.values||[],!m.before)}(t.endAt)),K3(e,i,s,o,a,"F",c,l)}function L$(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hf(t.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hf(t.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hf(t.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Hf(t.unaryFilter.field);return Lt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return je()}}(n):void 0!==n.fieldFilter?Lt.create(Hf((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return cn.create(t.compositeFilter.filters.map(r=>L$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return je()}}(t.compositeFilter.op))}(n):je();var t}function Pse(n){return Ese[n]}function Mse(n){return wse[n]}function Nse(n){return bse[n]}function pu(n){return{fieldPath:n.canonicalString()}}function Hf(n){return Ln.fromServerFormat(n.fieldPath)}function V$(n){return n instanceof Lt?function(t){if("=="===t.op){if(M3(t.value))return{unaryFilter:{field:pu(t.field),op:"IS_NAN"}};if(P3(t.value))return{unaryFilter:{field:pu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(M3(t.value))return{unaryFilter:{field:pu(t.field),op:"IS_NOT_NAN"}};if(P3(t.value))return{unaryFilter:{field:pu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pu(t.field),op:Mse(t.op),value:t.value}}}(n):n instanceof cn?function(t){const r=t.getFilters().map(i=>V$(i));return 1===r.length?r[0]:{compositeFilter:{op:Nse(t.op),filters:r}}}(n):je()}function xse(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function U$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ja{constructor(e,t,r,i,o=We.min(),s=We.min(),a=tr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class B${constructor(e){this.ct=e}}function j$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:N_(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:zf(o,s.version.toTimestamp()),createTime:zf(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ql(e.version)};else{if(!e.isUnknownDocument())return je();r.unknownDocument={path:t.path.toArray(),version:ql(e.version)}}var o,s;return r}function jw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ql(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wl(n){const e=new Gn(n.seconds,n.nanoseconds);return We.fromTimestamp(e)}function Kl(n,e){const t=(e.baseMutations||[]).map(o=>kS(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>kS(n.ct,o)),i=Gn.fromMillis(e.localWriteTimeMs);return new AS(e.batchId,i,t,r)}function k_(n){const e=Wl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wl(n.lastLimboFreeSnapshotVersion):We.min();let r;return r=void 0!==n.query.documents?(Ge(1===(o=n.query).documents.length),gi(Ff(P$(o.documents[0])))):function(o){return gi(F$(o))}(n.query),new Ja(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,tr.fromBase64String(n.resumeToken));var o}function $$(n,e){const t=ql(e.snapshotVersion),r=ql(e.lastLimboFreeSnapshotVersion);let i;i=Nw(e.target)?k$(n.ct,e.target):Bw(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OS(n){const e=F$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kw(e,e.limit,"L"):e}function FS(n,e){return new SS(e.largestBatchId,kS(n.ct,e.overlayMutation))}function z$(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}function H$(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ql(r.readTime),documentKey:pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ose{getBundleMetadata(e,t){return G$(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Wl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return G$(e).put({bundleId:(i=t).id,createTime:ql(gr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return q$(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:OS(o.bundledQuery),readTime:Wl(o.readTime)};var o})}saveNamedQuery(e,t){return q$(e).put({name:(i=t).name,readTime:ql(gr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function G$(n){return kr(n,"bundles")}function q$(n){return kr(n,"namedQueries")}class $w{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new $w(e,t.uid||"")}getOverlay(e,t){return O_(e).get(z$(this.userId,t)).next(r=>r?FS(this.serializer,r):null)}getOverlays(e,t){const r=oa();return Q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new SS(t,s);i.push(this.ht(e,a))}),Q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(pi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(O_(e).j("collectionPathOverlayIndex",a))}),Q.waitFor(o)}getOverlaysForCollection(e,t,r){const i=oa(),o=pi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return O_(e).U("collectionPathOverlayIndex",s).next(a=>{for(const c of a){const l=FS(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=oa();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return O_(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,f)=>{const m=FS(this.serializer,l);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):f.done()}).next(()=>o)}ht(e,t){return O_(e).put(function(i,o,s){const[a,c,l]=z$(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:x_(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function O_(n){return kr(n,"documentOverlays")}class Fse{Pt(e){return kr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?tr.fromUint8Array(r):tr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ql{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),m_(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=qa(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Wa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?N3(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Mw(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):je()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const o=e.fields||{};this.dt(t,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(qn(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ne.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Lse(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function W$(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=Lse(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Ql.vt=new Ql;class Vse{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=W$(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=W$(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Use{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Bse{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class F_{constructor(){this.jt=new Vse,this.Ht=new Use(this.jt),this.Jt=new Bse(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Yl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Yl(this.indexId,this.documentKey,this.arrayValue,r)}}function gu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=K$(n.arrayValue,e.arrayValue),0!==t?t:(t=K$(n.directionalValue,e.directionalValue),0!==t?t:Ne.comparator(n.documentKey,e.documentKey)))}function K$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Q${constructor(e){this.Xt=new pn((t,r)=>Ln.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ge(e.collectionGroup===this.collectionId),this.nn)return!1;const t=uS(e);if(void 0!==t&&!this.sn(t))return!1;const r=Ul(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o)if(s>=this.en.length||!this._n(this.en[s++],r[o]))return!1;return!0}an(){if(this.nn)return null;let e=new pn(Ln.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Bl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Bl(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Bl(r.field,"asc"===r.dir?0:1)));return new Mf(Mf.UNKNOWN_ID,this.collectionId,t,Nf.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Y$(n){var e,t;if(Ge(n instanceof Lt||n instanceof cn),n instanceof Lt){if(n instanceof G3){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Lt.create(n.field,"==",o)))||[];return cn.create(i,"or")}return n}const r=n.filters.map(i=>Y$(i));return cn.create(r,n.op)}function jse(n){if(0===n.getFilters().length)return[];const e=US(Y$(n));return Ge(J$(e)),LS(e)||VS(e)?[e]:e.getFilters()}function LS(n){return n instanceof Lt}function VS(n){return n instanceof cn&&yS(n)}function J$(n){return LS(n)||VS(n)||function(t){if(t instanceof cn&&_S(t)){for(const r of t.getFilters())if(!LS(r)&&!VS(r))return!1;return!0}return!1}(n)}function US(n){if(Ge(n instanceof Lt||n instanceof cn),n instanceof Lt)return n;if(1===n.filters.length)return US(n.filters[0]);const e=n.filters.map(r=>US(r));let t=cn.create(e,n.op);return t=zw(t),J$(t)?t:(Ge(t instanceof cn),Ge(Of(t)),Ge(t.filters.length>1),t.filters.reduce((r,i)=>BS(r,i)))}function BS(n,e){let t;return Ge(n instanceof Lt||n instanceof cn),Ge(e instanceof Lt||e instanceof cn),t=n instanceof Lt?e instanceof Lt?cn.create([n,e],"and"):Z$(n,e):e instanceof Lt?Z$(e,n):function(i,o){if(Ge(i.filters.length>0&&o.filters.length>0),Of(i)&&Of(o))return $3(i,o.getFilters());const s=_S(i)?i:o,a=_S(i)?o:i,c=s.filters.map(l=>BS(l,a));return cn.create(c,"or")}(n,e),zw(t)}function Z$(n,e){if(Of(e))return $3(e,n.getFilters());{const t=e.filters.map(r=>BS(n,r));return cn.create(t,"or")}}function zw(n){if(Ge(n instanceof Lt||n instanceof cn),n instanceof Lt)return n;const e=n.getFilters();if(1===e.length)return zw(e[0]);if(B3(n))return n;const t=e.map(i=>zw(i)),r=[];return t.forEach(i=>{i instanceof Lt?r.push(i):i instanceof cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:cn.create(r,n.op)}class $se{constructor(){this.un=new jS}addToCollectionParentIndex(e,t){return this.un.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(So.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class jS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(Ft.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(Ft.comparator)).toArray()}}const Hw=new Uint8Array(0);class zse{constructor(e,t){this.databaseId=t,this.cn=new jS,this.ln=new Qa(r=>zl(r),(r,i)=>w_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const o={collectionId:r,parent:pi(i)};return X$(e).put(o)}return Q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[u3(t),""],!1,!0);return X$(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(ra(s.parent))}return r})}addFieldIndex(e,t){const r=L_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=qf(e);return o.next(a=>{s.put(H$(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=L_(e),i=qf(e),o=Gf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=L_(e),r=Gf(e),i=qf(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new Q$(r).an();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Gf(e);let i=!0;const o=new Map;return Q.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=mt();const a=[];return Q.forEach(o,(c,l)=>{var q;ge("IndexedDbIndexManager",`Using index ${q=c,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`} to execute ${zl(t)}`);const f=function(q,fe){const Te=uS(fe);if(void 0===Te)return null;for(const Me of xw(q,Te.fieldPath))switch(Me.op){case"array-contains-any":return Me.value.arrayValue.values||[];case"array-contains":return[Me.value]}return null}(l,c),m=function(q,fe){const Te=new Map;for(const Me of Ul(fe))for(const U of xw(q,Me.fieldPath))switch(U.op){case"==":case"in":Te.set(Me.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return Te.set(Me.fieldPath.canonicalString(),U.value),Array.from(Te.values())}return null}(l,c),y=function(q,fe){const Te=[];let Me=!0;for(const U of Ul(fe)){const N=0===U.kind?q3(q,U.fieldPath,q.startAt):W3(q,U.fieldPath,q.startAt);Te.push(N.value),Me&&(Me=N.inclusive)}return new fu(Te,Me)}(l,c),I=function(q,fe){const Te=[];let Me=!0;for(const U of Ul(fe)){const N=0===U.kind?W3(q,U.fieldPath,q.endAt):q3(q,U.fieldPath,q.endAt);Te.push(N.value),Me&&(Me=N.inclusive)}return new fu(Te,Me)}(l,c),b=this.In(c,l,y),D=this.In(c,l,I),R=this.Tn(c,l,m),B=this.En(c.indexId,f,b,y.inclusive,D,I.inclusive,R);return Q.forEach(B,L=>r.G(L,t.limit).next(q=>{q.forEach(fe=>{const Te=Ne.fromSegments(fe.documentKey);s.has(Te)||(s=s.add(Te),a.push(Te))})}))}).next(()=>a)}return Q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:jse(cn.create(e.filters,"and")).map(r=>IS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),l=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const y=t?this.dn(t[m/l]):Hw,I=this.An(e,y,r[m%l],i),b=this.Rn(e,y,o[m%l],s),D=a.map(R=>this.An(e,y,R,!0));f.push(...this.createRange(I,b,D))}return f}An(e,t,r,i){const o=new Yl(e,Ne.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){const o=new Yl(e,Ne.empty(),t,r);return i?o.Zt():o}Pn(e,t){const r=new Q$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.hn(t);return Q.forEach(i,o=>this.Pn(e,o).next(s=>{s?0!==r&&s.fields.length<function(c){let l=new pn(Ln.comparator),f=!1;for(const m of c.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of c.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new F_;for(const i of Ul(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Yt(i.kind);Ql.vt.It(o,s)}return r.zt()}dn(e){const t=new F_;return Ql.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new F_;return Ql.vt.It($l(this.databaseId,t),r.Yt(function(o){const s=Ul(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new F_);let o=0;for(const s of Ul(e)){const a=r[o++];for(const c of i)if(this.fn(t,s.fieldPath)&&v_(a))i=this.gn(i,s,a);else{const l=c.Yt(s.kind);Ql.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new F_;c.seed(a.zt()),Ql.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Lt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=L_(e),i=qf(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return Q.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(f,m){const y=m?new Nf(m.sequenceNumber,new So(Wl(m.readTime),new Ne(ra(m.documentKey)),m.largestBatchId)):Nf.empty(),I=f.fields.map(([b,D])=>new Bl(Ln.fromServerFormat(b),D));return new Mf(f.indexId,f.collectionGroup,I,y)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:ct(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=L_(e),o=qf(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Q.forEach(a,c=>o.put(H$(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return Q.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?Q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Q.forEach(a,c=>this.wn(e,i,c).next(l=>{const f=this.Sn(o,c);return l.isEqual(f)?Q.resolve():this.bn(e,o,c,l,f)}))))})}Dn(e,t,r,i){return Gf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Gf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Gf(e);let o=new pn(gu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Yl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new pn(gu);const i=this.Vn(t,e);if(null==i)return r;const o=uS(t);if(null!=o){const s=e.data.field(o.fieldPath);if(v_(s))for(const a of s.arrayValue.values||[])r=r.add(new Yl(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Yl(t.indexId,e.key,Hw,i));return r}bn(e,t,r,i,o){ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(c,l,f,m,y){const I=c.getIterator(),b=l.getIterator();let D=xf(I),R=xf(b);for(;D||R;){let B=!1,L=!1;if(D&&R){const q=f(D,R);q<0?L=!0:q>0&&(B=!0)}else null!=D?L=!0:B=!0;B?(m(R),R=xf(b)):L?(y(D),D=xf(I)):(D=xf(I),R=xf(b))}}(i,o,gu,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),Q.waitFor(s)}yn(e){let t=1;return qf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>gu(s,a)).filter((s,a,c)=>!a||0!==gu(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=gu(s,e),c=gu(s,t);if(0===a)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Hw,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Hw,[]]))}return o}Cn(e,t){return gu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(e4)}getMinOffset(e,t){return Q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||je())).next(e4)}}function X$(n){return kr(n,"collectionParents")}function Gf(n){return kr(n,"indexEntries")}function L_(n){return kr(n,"indexConfiguration")}function qf(n){return kr(n,"indexState")}function e4(n){Ge(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lS(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new So(e.readTime,e.documentKey,t)}const t4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function n4(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:s},(f,m,y)=>(a++,y.delete()));o.push(c.next(()=>{Ge(1===a)}));const l=[];for(const f of t.mutations){const m=v3(e,f.key.path,t.batchId);o.push(i.delete(m)),l.push(f.key)}return Q.waitFor(o).next(()=>l)}function Gw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw je();e=n.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class qw{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ge(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new qw(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mu(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Wf(e),s=mu(e);return s.add({}).next(a=>{Ge("number"==typeof a);const c=new AS(a,t,r,i),l=function(I,b,D){const R=D.baseMutations.map(L=>x_(I.ct,L)),B=D.mutations.map(L=>x_(I.ct,L));return{userId:b,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:R,mutations:B}}(this.serializer,this.userId,c),f=[];let m=new pn((y,I)=>ct(y.canonicalString(),I.canonicalString()));for(const y of i){const I=v3(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(s.put(l)),f.push(o.put(I,Poe))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),Q.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return mu(e).get(t).next(r=>r?(Ge(r.userId===this.userId),Kl(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?Q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return mu(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(Ge(a.batchId>=r),o=Kl(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mu(e).U("userMutationsIndex",t).next(r=>r.map(i=>Kl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Tw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wf(e).J({range:i},(s,a,c)=>{const[l,f,m]=s,y=ra(f);if(l===this.userId&&t.path.isEqual(y))return mu(e).get(m).next(I=>{if(!I)throw je();Ge(I.userId===this.userId),o.push(Kl(this.serializer,I))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(ct);const i=[];return t.forEach(o=>{const s=Tw(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wf(e).J({range:a},(l,f,m)=>{const[y,I,b]=l,D=ra(I);y===this.userId&&o.path.isEqual(D)?r=r.add(b):m.done()});i.push(c)}),Q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Tw(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new pn(ct);return Wf(e).J({range:s},(c,l,f)=>{const[m,y,I]=c,b=ra(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(I)):f.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(mu(e).get(o).next(s=>{if(null===s)throw je();Ge(s.userId===this.userId),r.push(Kl(this.serializer,s))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return n4(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Q.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wf(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=ra(o[1]);i.push(c)}else a.done()}).next(()=>{Ge(0===i.length)})})}containsKey(e,t){return r4(e,this.userId,t)}Nn(e){return i4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r4(n,e,t){const r=Tw(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Wf(n).J({range:o,H:!0},(a,c,l)=>{const[f,m,y]=a;f===e&&m===i&&(s=!0),l.done()}).next(()=>s)}function mu(n){return kr(n,"mutations")}function Wf(n){return kr(n,"documentMutations")}function i4(n){return kr(n,"mutationQueues")}class Jl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jl(0)}static kn(){return new Jl(-1)}}class Hse{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Jl(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>We.fromTimestamp(new Gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kf(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ge(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Kf(e).J((s,a)=>{const c=k_(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>Q.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Kf(e).J((r,i)=>{const o=k_(i);t(o)})}qn(e){return o4(e).get("targetGlobalKey").next(t=>(Ge(null!==t),t))}Qn(e,t){return o4(e).put("targetGlobalKey",t)}Kn(e,t){return Kf(e).put($$(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Kf(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{const l=k_(a);w_(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=_u(e);return t.forEach(s=>{const a=pi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),Q.waitFor(i)}removeMatchingKeys(e,t,r){const i=_u(e);return Q.forEach(t,o=>{const s=pi(o.path);return Q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=_u(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_u(e);let o=mt();return i.J({range:r,H:!0},(s,a,c)=>{const l=ra(s[1]),f=new Ne(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){const r=pi(t.path),i=IDBKeyRange.bound([r],[u3(r)],!1,!0);let o=0;return _u(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Kf(e).get(t).next(r=>r?k_(r):null)}}function Kf(n){return kr(n,"targets")}function o4(n){return kr(n,"targetGlobal")}function _u(n){return kr(n,"targetDocuments")}function s4([n,e],[t,r]){const i=ct(n,t);return 0===i?ct(e,r):i}class Gse{constructor(e){this.Un=e,this.buffer=new pn(s4),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();s4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class a4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,S.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){au(r)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield su(r)}yield t.Hn(3e5)}))}}class qse{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Q.resolve(Ro.oe);const r=new Gse(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(t4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t4):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Rf()<=ta.$b.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-f}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(l-c)+`ms\nTotal Duration: ${l-f}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class Wse{constructor(e,t){this.db=e,this.garbageCollector=function c4(n,e){return new qse(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Ww(e,r)}removeReference(e,t,r){return Ww(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ww(e,t)}nr(e,t){return function(i,o){let s=!1;return i4(i).Y(a=>r4(i,a,o).next(c=>(c&&(s=!0),Q.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.tr(e,(s,a)=>{if(a<=t){const c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,We.min()),_u(e).delete([0,pi(s.path)])))});i.push(c)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ww(e,t)}tr(e,t){const r=_u(e);let i,o=Ro.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{0===s?(o!==Ro.oe&&t(new Ne(ra(i)),o),o=l,i=c):o=Ro.oe}).next(()=>{o!==Ro.oe&&t(new Ne(ra(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ww(n,e){return _u(n).put((i=n.currentSequenceNumber,{targetId:0,path:pi(e.path),sequenceNumber:i}));var i}class u4{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kse{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zl(e).put(r)}removeEntry(e,t,r){return Zl(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jw(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return Zl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(V_(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return Zl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(V_(t))},(i,o)=>{r={document:this.ir(t,o),size:Gw(o)}}).next(()=>r)}getEntries(e,t){let r=Ji();return this._r(e,t,(i,o)=>{const s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ji(),i=new Rn(Ne.comparator);return this._r(e,t,(o,s)=>{const a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Gw(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return Q.resolve();let i=new pn(f4);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(V_(i.first()),V_(i.last())),s=i.getIterator();let a=s.getNext();return Zl(e).J({index:"documentKeyIndex",range:o},(c,l,f)=>{const m=Ne.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&f4(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.$(V_(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),jw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zl(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Ji();for(const m of l){const y=this.ir(Ne.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(T_(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=Ji();const s=h4(t,r),a=h4(t,So.max());return Zl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,f)=>{const m=this.ir(Ne.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(m.key,m),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new Qse(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return d4(e).get("remoteDocumentGlobalKey").next(t=>(Ge(!!t),t))}rr(e,t){return d4(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function kse(n,e){let t;if(e.document)t=x$(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ne.fromSegments(e.noDocument.path),i=Wl(e.noDocument.readTime);t=Vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return je();{const r=Ne.fromSegments(e.unknownDocument.path),i=Wl(e.unknownDocument.version);t=Vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new Gn(i[0],i[1]);return We.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return Vn.newInvalidDocument(e)}}function l4(n){return new Kse(n)}class Qse extends u4{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Qa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new pn((o,s)=>ct(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=j$(this.cr.serializer,s);i=i.add(o.path.popLast());const l=Gw(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=j$(this.cr.serializer,s.convertToNoDocument(We.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),Q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function d4(n){return kr(n,"remoteDocumentGlobal")}function Zl(n){return kr(n,"remoteDocumentsV14")}function V_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function h4(n,e){const t=e.documentKey.path.toArray();return[n,jw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function f4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ct(t[o],r[o]),i)return i;return i=ct(t.length,r.length),i||(i=ct(t[t.length-2],r[r.length-2]),i||ct(t[t.length-1],r[r.length-1]))}class Yse{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class p4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&S_(r.mutation,i,Yi.empty(),Gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mt()){const i=oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=C_();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ji();const s=A_(),a=A_();return t.forEach((c,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof Ya)?o=o.insert(l.key,l):void 0!==f?(s.set(l.key,f.mutation.getFieldMask()),S_(f.mutation,l,f.mutation.getFieldMask(),Gn.now())):s.set(l.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new Yse(f,null!==(m=s.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=A_();let i=new Rn((s,a)=>s-a),o=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let f=r.get(c)||Yi.empty();f=a.applyToLocalView(l,f),r.set(c,f);const m=(i.get(a.batchId)||mt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,f=c.value,m=r$();f.forEach(y=>{if(!o.has(y)){const I=d$(t.get(y),r.get(y));null!==I&&m.set(y,I),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return Q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ne.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ES(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Q.resolve(oa());let a=-1,c=o;return s.next(l=>Q.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?Q.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,mt())).next(f=>({batchId:a,changes:n$(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next(r=>{let i=C_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=C_();return this.indexManager.getCollectionParents(e,o).next(a=>Q.forEach(a,c=>{const l=(m=t,y=c.child(o),new Ka(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{const f=l.getKey();null===s.get(f)&&(s=s.insert(f,Vn.newInvalidDocument(f)))});let a=C_();return s.forEach((c,l)=>{const f=o.get(c);void 0!==f&&S_(f.mutation,l,Yi.empty(),Gn.now()),T_(t,l)&&(a=a.insert(c,l))}),a})}}class Jse{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:gr(i.createTime)}),Q.resolve();var i}getNamedQuery(e,t){return Q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:OS(i.bundledQuery),readTime:gr(i.readTime)}),Q.resolve();var i}}class Zse{constructor(){this.overlays=new Rn(Ne.comparator),this.Ir=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oa();return Q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const i=oa(),o=t.length+1,s=new Ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Rn((l,f)=>l-f);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);null===f&&(f=oa(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=oa(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return Q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new SS(t,r));let o=this.Ir.get(t);void 0===o&&(o=mt(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}class Xse{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}class $S{constructor(){this.Tr=new pn(Gr.Er),this.dr=new pn(Gr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Gr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ne(new Ft([])),r=new Gr(t,e),i=new Gr(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ne(new Ft([])),r=new Gr(t,e),i=new Gr(t,e+1);let o=mt();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Gr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ne.comparator(e.key,t.key)||ct(e.wr,t.wr)}static Ar(e,t){return ct(e.wr,t.wr)||Ne.comparator(e.key,t.key)}}class eae{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new pn(Gr.Er)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.Sr;this.Sr++;const s=new AS(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Gr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,t){return Q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(ct);return t.forEach(i=>{const o=new Gr(i,0),s=new Gr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const s=new Gr(new Ne(o),0);let a=new pn(ct);return this.br.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),Q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ge(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return Q.forEach(t.mutations,i=>{const o=new Gr(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Gr(t,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tae{constructor(e){this.Mr=e,this.docs=new Rn(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ji();const s=t.path,a=new Ne(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:f}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||lS(d3(f),r)<=0||(i.has(f.key)||T_(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){je()}Or(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nae(this)}getSize(e){return Q.resolve(this.size)}}class nae extends u4{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class rae{constructor(e){this.persistence=e,this.Nr=new Qa(t=>zl(t),w_),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $S,this.targetCount=0,this.kr=Jl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Jl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Kn(t),Q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.Br.containsKey(t))}}class zS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ro(0),this.Kr=!1,this.Kr=!0,this.$r=new Xse,this.referenceDelegate=e(this),this.Ur=new rae(this),this.indexManager=new $se,this.remoteDocumentCache=new tae(r=>this.referenceDelegate.Wr(r)),this.serializer=new B$(t),this.Gr=new Jse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zse,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new eae(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new iae(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class iae extends f3{constructor(e){super(),this.currentSequenceNumber=e}}class Kw{constructor(e){this.persistence=e,this.Jr=new $S,this.Yr=null}static Zr(e){return new Kw(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=Ne.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,We.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Q.or([()=>Q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class oae{constructor(e){this.serializer=e}O(e,t,r,i){const o=new bw("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y3,{unique:!0}),c.createObjectStore("documentMutations"),g4(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=Q.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),g4(e)),s=s.next(()=>function(c){const l=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y3,{unique:!0});const m=l.store("mutations"),y=f.map(I=>m.put(I));return Q.waitFor(y)})}(e,o))),s=s.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:$oe});l.createIndex("collectionPathOverlayIndex",zoe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Hoe,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:Moe});l.createIndex("documentKeyIndex",Noe),l.createIndex("collectionGroupIndex",xoe)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Voe}).createIndex("sequenceNumberIndex",Uoe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Boe}).createIndex("documentKeyIndex",joe,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Gw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Q.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>Q.forEach(a,c=>{Ge(c.userId===o.userId);const l=Kl(this.serializer,c);return n4(e,o.userId,l).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const c=new Ft(s),l=[0,pi(c)];o.push(t.get(l).next(f=>f?Q.resolve():t.put({targetId:0,path:pi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Q.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Loe});const r=t.store("collectionParents"),i=new jS,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:pi(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const c=new Ft(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{const f=ra(a);return o(f.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const o=k_(i),s=$$(this.serializer,o);return t.put(s)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),c=(m=s,m.document?new Ne(Ft.fromString(m.document.name).popFirst(5)):m.noDocument?Ne.fromSegments(m.noDocument.path):m.unknownDocument?Ne.fromSegments(m.unknownDocument.path):je()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>Q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=l4(this.serializer),o=new zS(Kw.Zr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(c=>{var l;let f=null!==(l=a.get(c.userId))&&void 0!==l?l:mt();Kl(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),Q.forEach(a,(c,l)=>{const f=new zr(l),m=$w.lt(this.serializer,f),y=o.getIndexManager(f),I=qw.lt(f,this.serializer,y,o.referenceDelegate);return new p4(i,I,m,y).recalculateAndSaveOverlaysForDocumentKeys(new pS(t,Ro.oe),c).next()})})}}function g4(n){n.createObjectStore("targetDocuments",{keyPath:Ooe}).createIndex("documentTargetsIndex",Foe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",koe,{unique:!0}),n.createObjectStore("targetGlobal")}const HS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GS{constructor(e,t,r,i,o,s,a,c,l,f,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=f,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!GS.D())throw new pe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wse(this,i),this.Ai=t+"main",this.serializer=new B$(c),this.Ri=new na(this.Ai,this.hi,new oae(this.serializer)),this.$r=new Fse,this.Ur=new Hse(this.referenceDelegate,this.serializer),this.remoteDocumentCache=l4(this.serializer),this.Gr=new Ose,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===f&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,HS);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ro(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,S.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,S.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,S.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(au(e))return ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return U_(e).get("owner").next(t=>Q.resolve(this.vi(t)))}Ci(e){return Yw(e).delete(this.clientId)}Fi(){var e=this;return(0,S.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=kr(r,"clientMetadata");return i.U().next(o=>{const s=e.xi(o,18e5),a=o.filter(c=>-1===s.indexOf(c));return Q.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Q.resolve(!0):U_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new pe(re.FAILED_PRECONDITION,HS);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yw(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,S.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pS(t,Ro.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Yw(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return qw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zse(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $w.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=17===(c=this.hi)?Woe:16===c?qoe:15===c?fS:14===c?w3:13===c?E3:12===c?Goe:11===c?I3:void je();var c;let s;return this.Ri.runTransaction(e,i,o,a=>(s=new pS(a,this.Qr?this.Qr.next():Ro.oe),"readwrite-primary"===t?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new pe(re.FAILED_PRECONDITION,h3);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return U_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(re.FAILED_PRECONDITION,HS)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return U_(e).put("owner",t)}static D(){return na.D()}bi(e){const t=U_(e);return t.get("owner").next(r=>this.vi(r)?(ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,rn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function U_(n){return kr(n,"owner")}function Yw(n){return kr(n,"clientMetadata")}function qS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=mt(),i=mt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new WS(e,t.fromCache,r,i)}}class sae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class m4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,rn.nr)()?8:p3((0,rn.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new sae;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Rf()<=ta.$b.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Vf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Rf()<=ta.$b.DEBUG&&ge("QueryEngine","Query:",Vf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rf()<=ta.$b.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Vf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(t))):Q.resolve())}Yi(e,t){if(Q3(t))return Q.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=kw(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=mt(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,kw(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return Q3(t)||i.isEqual(We.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(t,o);return this.ns(t,s,r,i)?Q.resolve(null):(Rf()<=ta.$b.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vf(t)),this.rs(e,s,t,l3(i,-1)).next(a=>a))})}ts(e,t){let r=new pn(e$(e));return t.forEach((i,o)=>{T_(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Rf()<=ta.$b.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Vf(t)),this.Ji.getDocumentsMatchingQuery(e,t,So.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class aae{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Rn(ct),this._s=new Qa(o=>zl(o),w_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function _4(n,e,t,r){return new aae(n,e,t,r)}function y4(n,e){return KS.apply(this,arguments)}function KS(){return(KS=(0,S.A)(function*(n,e){const t=Se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=mt();for(const l of i){s.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}for(const l of o){a.push(l.batchId);for(const f of l.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function v4(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function I4(n,e,t){let r=mt(),i=mt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ji();return t.forEach((a,c)=>{const l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(We.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function lae(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qf(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ja(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Yf(n,e,t){return QS.apply(this,arguments)}function QS(){return(QS=(0,S.A)(function*(n,e,t){const r=Se(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!au(s))throw s;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Jw(n,e,t){const r=Se(n);let i=We.min(),o=mt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,f){const m=Se(c),y=m._s.get(f);return void 0!==y?Q.resolve(m.os.get(y)):m.Ur.getTargetData(l,f)}(r,s,gi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:We.min(),t?o:mt())).next(a=>(b4(r,X3(e),a),{documents:a,Ts:o})))}function E4(n,e){const t=Se(n),r=Se(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function w4(n,e){const t=Se(n),r=t.us.get(e)||We.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,l3(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(b4(t,e,i),i))}function b4(n,e,t){let r=n.us.get(e)||We.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function YS(){return(YS=(0,S.A)(function*(n,e,t,r){const i=Se(n);let o=mt(),s=Ji();for(const l of t){const f=e.Es(l.metadata.name);l.document&&(o=o.add(f));const m=e.ds(l);m.setReadTime(e.As(l.metadata.readTime)),s=s.insert(f,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Qf(i,(f=r,gi(Ff(Ft.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>I4(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.Ps,f.Is)).next(()=>f.Ps)))})).apply(this,arguments)}function hae(n,e){return JS.apply(this,arguments)}function JS(){return(JS=(0,S.A)(function*(n,e,t=mt()){const r=yield Qf(n,gi(OS(e.bundledQuery))),i=Se(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=gr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Gr.saveNamedQuery(o,e);const a=r.withResumeToken(tr.EMPTY_BYTE_STRING,s);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(o,a).next(()=>i.Ur.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Ur.addMatchingKeys(o,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(o,e))})})).apply(this,arguments)}function T4(n,e){return`firestore_clients_${n}_${e}`}function C4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZS(n,e){return`firestore_targets_${n}_${e}`}class Zw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new pe(i.error.code,i.error.message))),s?new Zw(e,t,i.state,o):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class B_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new pe(r.error.code,r.error.message))),o?new B_(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=bS();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=m3(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Xw(e,o):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class XS{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new XS(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eR{constructor(){this.activeTargetIds=bS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tR{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Rn(ct),this.started=!1,this.bs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=T4(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new eR),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,S.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const o=e.getItem(T4(e.persistenceKey,i));if(o){const s=Xw.Rs(i,o);s&&(e.Ss=e.Ss.insert(s.clientId,s))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(ZS(this.persistenceKey,e));if(i){const o=B_.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZS(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ge("SharedClientState","READ",e,t),t}setItem(e,t){ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,S.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(s){let a=Ro.oe;if(null!=s)try{const c=JSON.parse(s);Ge("number"==typeof c),a=c}catch(c){pr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Ro.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.eo(o)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Zw(this.currentUser,e,t,r),o=C4(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){const t=C4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=ZS(this.persistenceKey,e),o=new B_(e,t,r);this.setItem(i,o.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Xw.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Zw.Rs(new zr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return B_.Rs(i,t)}Ls(e){return XS.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,S.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=bS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class A4{constructor(){this.so=new eR,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new eR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fae{_o(e){}shutdown(){}}class D4{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eb=null;function nR(){return null===eb?eb=268435456+Math.round(2147483648*Math.random()):eb++,"0x"+eb.toString(16)}const pae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const _i="WebChannelConnection";class mae extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){const a=nR(),c=this.xo(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(f=>(ge("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Do("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Sf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){return`${this.Do}/v1/${r}:${pae[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const o=nR();return new Promise((s,a)=>{const c=new e3;c.setWithCredentials(!0),c.listenOnce(t3.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ww.NO_ERROR:const f=c.getResponseJson();ge(_i,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case ww.TIMEOUT:ge(_i,`RPC '${e}' ${o} timed out`),a(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case ww.HTTP_ERROR:const m=c.getStatus();if(ge(_i,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y?.error;if(I&&I.status&&I.message){const b=function(R){const B=R.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(B)>=0?B:re.UNKNOWN}(I.status);a(new pe(b,I.message))}else a(new pe(re.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new pe(re.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{ge(_i,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ge(_i,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){const i=nR(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i3(),a=r3(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=o.join("");ge(_i,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=s.createWebChannel(f,c);let y=!1,I=!1;const b=new gae({Io:R=>{I?ge(_i,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(ge(_i,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ge(_i,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},To:()=>m.close()}),D=(R,B,L)=>{R.listen(B,q=>{try{L(q)}catch(fe){setTimeout(()=>{throw fe},0)}})};return D(m,h_.EventType.OPEN,()=>{I||(ge(_i,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),D(m,h_.EventType.CLOSE,()=>{I||(I=!0,ge(_i,`RPC '${e}' stream ${i} transport closed`),b.So())}),D(m,h_.EventType.ERROR,R=>{I||(I=!0,Do(_i,`RPC '${e}' stream ${i} transport errored:`,R),b.So(new pe(re.UNAVAILABLE,"The operation could not be completed")))}),D(m,h_.EventType.MESSAGE,R=>{var B;if(!I){const L=R.data[0];Ge(!!L);const fe=L.error||(null===(B=L[0])||void 0===B?void 0:B.error);if(fe){ge(_i,`RPC '${e}' stream ${i} received error:`,fe);const Te=fe.status;let Me=function(F){const j=br[F];if(void 0!==j)return y$(j)}(Te),U=fe.message;void 0===Me&&(Me=re.INTERNAL,U="Unknown error status: "+Te+" with message "+fe.message),I=!0,b.So(new pe(Me,U)),m.close()}else ge(_i,`RPC '${e}' stream ${i} received:`,L),b.bo(L)}}),D(a,n3.STAT_EVENT,R=>{R.stat===aS.PROXY?ge(_i,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===aS.NOPROXY&&ge(_i,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function S4(){return typeof window<"u"?window:null}function tb(){return typeof document<"u"?document:null}function j_(n){return new Tse(n,!0)}class rR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class R4{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rR(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,S.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,S.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,S.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new pe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,S.A)(function*(){e.state=0,e.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _ae extends R4{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function Dse(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:je(),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(Ge(void 0===f||"string"==typeof f),tr.fromBase64String(f||"")):(Ge(void 0===f||f instanceof Buffer||f instanceof Uint8Array),tr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const f=void 0===l.code?re.UNKNOWN:y$(l.code);return new pe(f,l.message||"")}(s);t=new b$(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=sa(n,r.document.name),o=gr(r.document.updateTime),s=r.document.createTime?gr(r.document.createTime):We.min(),a=new ri({mapValue:{fields:r.document.fields}}),c=Vn.newFoundDocument(i,o,s,a);t=new Uw(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=sa(n,r.document),o=r.readTime?gr(r.readTime):We.min(),s=Vn.newNoDocument(i,o);t=new Uw([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=sa(n,r.document);t=new Uw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return je();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new yse(i,o);t=new w$(r.targetId,s)}}var l;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return We.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?gr(s.readTime):We.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=xS(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=Nw(c)?{documents:k$(o,c)}:{query:Bw(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=D$(o,s.resumeToken);const l=PS(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(We.min())>0){a.readTime=zf(o,s.snapshotVersion.toTimestamp());const l=PS(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function Rse(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=xS(this.serializer),t.removeTarget=e,this.a_(t)}}class yae extends R4{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Sse(n,e){return n&&n.length>0?(Ge(void 0!==e),n.map(t=>function(i,o){let s=gr(i.updateTime?i.updateTime:o);return s.isEqual(We.min())&&(s=gr(o)),new gse(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=xS(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>x_(this.serializer,r))};this.a_(t)}}class vae extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,NS(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(re.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,NS(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(re.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Iae{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pr(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Eae{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget((0,S.A)(function*(){var c;yu(s)&&(ge("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,S.A)(function*(f){const m=Se(f);m.L_.add(4),yield Jf(m),m.q_.set("Unknown"),m.L_.delete(4),yield $_(m)}),function l(f){return c.apply(this,arguments)})(s))}))}),this.q_=new Iae(r,i)}}function $_(n){return iR.apply(this,arguments)}function iR(){return(iR=(0,S.A)(function*(n){if(yu(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Jf(n){return oR.apply(this,arguments)}function oR(){return(oR=(0,S.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function nb(n,e){const t=Se(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),cR(t)?aR(t):ep(t).r_()&&sR(t,e))}function Zf(n,e){const t=Se(n),r=ep(t);t.N_.delete(e),r.r_()&&P4(t,e),0===t.N_.size&&(r.r_()?r.o_():yu(t)&&t.q_.set("Unknown"))}function sR(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ep(n).A_(e)}function P4(n,e){n.Q_.xe(e),ep(n).R_(e)}function aR(n){n.Q_=new Ise({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ep(n).start(),n.q_.v_()}function cR(n){return yu(n)&&!ep(n).n_()&&n.N_.size>0}function yu(n){return 0===Se(n).L_.size}function M4(n){n.Q_=void 0}function wae(n){return uR.apply(this,arguments)}function uR(){return(uR=(0,S.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function bae(n){return lR.apply(this,arguments)}function lR(){return(lR=(0,S.A)(function*(n){n.N_.forEach((e,t)=>{sR(n,e)})})).apply(this,arguments)}function Tae(n,e){return dR.apply(this,arguments)}function dR(){return(dR=(0,S.A)(function*(n,e){M4(n),cR(n)?(n.q_.M_(e),aR(n)):n.q_.set("Unknown")})).apply(this,arguments)}function Cae(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,S.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof b$&&2===e.state&&e.cause)try{yield(r=(0,S.A)(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.N_.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.N_.delete(c),o.Q_.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rb(n,r)}else if(e instanceof Uw?n.Q_.Ke(e):e instanceof w$?n.Q_.He(e):n.Q_.We(e),!t.isEqual(We.min()))try{const r=yield v4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const f=o.N_.get(l);f&&o.N_.set(l,f.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{const f=o.N_.get(c);if(!f)return;o.N_.set(c,f.withResumeToken(tr.EMPTY_BYTE_STRING,f.snapshotVersion)),P4(o,c);const m=new Ja(f.target,c,l,f.sequenceNumber);sR(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),yield rb(n,r)}var r}),hR.apply(this,arguments)}function rb(n,e,t){return fR.apply(this,arguments)}function fR(){return(fR=(0,S.A)(function*(n,e,t){if(!au(e))throw e;n.L_.add(1),yield Jf(n),n.q_.set("Offline"),t||(t=()=>v4(n.localStore)),n.asyncQueue.enqueueRetryable((0,S.A)(function*(){ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield $_(n)}))})).apply(this,arguments)}function N4(n,e){return e().catch(t=>rb(n,t,e))}function Xf(n){return pR.apply(this,arguments)}function pR(){return(pR=(0,S.A)(function*(n){const e=Se(n),t=vu(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Aae(e);)try{const i=yield lae(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,Dae(e,i)}catch(i){yield rb(e,i)}x4(e)&&k4(e)})).apply(this,arguments)}function Aae(n){return yu(n)&&n.O_.length<10}function Dae(n,e){n.O_.push(e);const t=vu(n);t.r_()&&t.V_&&t.m_(e.mutations)}function x4(n){return yu(n)&&!vu(n).n_()&&n.O_.length>0}function k4(n){vu(n).start()}function Sae(n){return gR.apply(this,arguments)}function gR(){return(gR=(0,S.A)(function*(n){vu(n).p_()})).apply(this,arguments)}function Rae(n){return mR.apply(this,arguments)}function mR(){return(mR=(0,S.A)(function*(n){const e=vu(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Pae(n,e,t){return _R.apply(this,arguments)}function _R(){return(_R=(0,S.A)(function*(n,e,t){const r=n.O_.shift(),i=DS.from(r,e,t);yield N4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xf(n)})).apply(this,arguments)}function Mae(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,S.A)(function*(n,e){var t;e&&vu(n).V_&&(yield(t=(0,S.A)(function*(i,o){if(_$(a=o.code)&&a!==re.ABORTED){const s=i.O_.shift();vu(i).s_(),yield N4(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Xf(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),x4(n)&&k4(n)}),yR.apply(this,arguments)}function O4(n,e){return vR.apply(this,arguments)}function vR(){return(vR=(0,S.A)(function*(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=yu(t);t.L_.add(3),yield Jf(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield $_(t)})).apply(this,arguments)}function IR(n,e){return ER.apply(this,arguments)}function ER(){return(ER=(0,S.A)(function*(n,e){const t=Se(n);e?(t.L_.delete(2),yield $_(t)):e||(t.L_.add(2),yield Jf(t),t.q_.set("Unknown"))})).apply(this,arguments)}function ep(n){return n.K_||(n.K_=function(t,r,i){const o=Se(t);return o.w_(),new _ae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:wae.bind(null,n),Ro:bae.bind(null,n),mo:Tae.bind(null,n),d_:Cae.bind(null,n)}),n.B_.push(function(){var e=(0,S.A)(function*(t){t?(n.K_.s_(),cR(n)?aR(n):n.q_.set("Unknown")):(yield n.K_.stop(),M4(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function vu(n){return n.U_||(n.U_=function(t,r,i){const o=Se(t);return o.w_(),new yae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Sae.bind(null,n),mo:Mae.bind(null,n),f_:Rae.bind(null,n),g_:Pae.bind(null,n)}),n.B_.push(function(){var e=(0,S.A)(function*(t){t?(n.U_.s_(),yield Xf(n)):(yield n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class wR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new wR(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(n,e){if(pr("AsyncQueue",`${e}: ${n}`),au(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class np{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=C_(),this.sortedSet=new Rn(this.comparator)}static emptySet(e){return new np(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof np)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new np;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class F4{constructor(){this.W_=new Rn(Ne.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class rp{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new rp(e,t,np.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Nae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xae{constructor(){this.queries=L4(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Se(t),o=i.queries;i.queries=L4(),o.forEach((s,a)=>{for(const c of a.j_)c.onError(r)})}(this,new pe(re.ABORTED,"Firestore shutting down"))}}function L4(){return new Qa(n=>Z3(n),b_)}function bR(n,e){return TR.apply(this,arguments)}function TR(){return(TR=(0,S.A)(function*(n,e){const t=Se(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Nae,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=tp(s,`Initialization of query '${Vf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&DR(t)})).apply(this,arguments)}function CR(n,e){return AR.apply(this,arguments)}function AR(){return(AR=(0,S.A)(function*(n,e){const t=Se(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),0===o.j_.length?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function kae(n,e){const t=Se(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&DR(t)}function Oae(n,e,t){const r=Se(n),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(t);r.queries.delete(e)}function DR(n){n.Y_.forEach(e=>{e.next()})}var SR,V4;(V4=SR||(SR={})).ea="default",V4.Cache="cache";class RR{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new rp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=rp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==SR.Cache}}class Fae{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class U4{constructor(e){this.serializer=e}Es(e){return sa(this.serializer,e)}ds(e){return e.metadata.exists?x$(this.serializer,e.document,!1):Vn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gr(e)}}class Lae{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=B4(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Ft.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new U4(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Es(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||mt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,S.A)(function*(){const t=yield function dae(n,e,t,r){return YS.apply(this,arguments)}(e.localStore,new U4(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield hae(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function B4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class j4{constructor(e){this.key=e}}class $4{constructor(e){this.key=e}}class z4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=mt(),this.mutatedKeys=mt(),this.Aa=e$(e),this.Ra=new np(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new F4,i=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),I=T_(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),D=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;y&&I?y.data.isEqual(I.data)?b!==D&&(r.track({type:3,doc:I}),R=!0):this.ga(y,I)||(r.track({type:2,doc:I}),R=!0,(c&&this.Aa(I,c)>0||l&&this.Aa(I,l)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),R=!0):y&&!I&&(r.track({type:1,doc:y}),R=!0,(c||l)&&(a=!0)),R&&(I?(s=s.add(I),o=D?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const f="F"===this.query.limitType?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((f,m)=>function(I,b){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return D(I)-D(b)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,0!==s.length||l?{snapshot:new rp(this.query,e.Ra,o,s,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new F4,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=mt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new $4(r))}),this.da.forEach(r=>{e.has(r)||t.push(new j4(r))}),t}ba(e){this.Ta=e.Ts,this.da=mt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rp.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Vae{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Uae{constructor(e){this.key=e,this.va=!1}}class Bae{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qa(a=>Z3(a),b_),this.Ma=new Map,this.xa=new Set,this.Oa=new Rn(Ne.comparator),this.Na=new Map,this.La=new $S,this.Ba={},this.ka=new Map,this.qa=Jl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function jae(n,e){return PR.apply(this,arguments)}function PR(){return(PR=(0,S.A)(function*(n,e,t=!0){const r=ib(n);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield H4(r,e,t,!0),i})).apply(this,arguments)}function $ae(n,e){return MR.apply(this,arguments)}function MR(){return(MR=(0,S.A)(function*(n,e){const t=ib(n);yield H4(t,e,!0,!1)})).apply(this,arguments)}function H4(n,e,t,r){return NR.apply(this,arguments)}function NR(){return(NR=(0,S.A)(function*(n,e,t,r){const i=yield Qf(n.localStore,gi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=yield xR(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&nb(n.remoteStore,i),a})).apply(this,arguments)}function xR(n,e,t,r,i){return kR.apply(this,arguments)}function kR(){return kR=(0,S.A)(function*(n,e,t,r,i){n.Ka=(m,y,I)=>{return(b=(0,S.A)(function*(R,B,L,q){let fe=B.view.ma(L);fe.ns&&(fe=yield Jw(R.localStore,B.query,!1).then(({documents:N})=>B.view.ma(N,fe)));const Te=q&&q.targetChanges.get(B.targetId),Me=q&&null!=q.targetMismatches.get(B.targetId),U=B.view.applyChanges(fe,R.isPrimaryClient,Te,Me);return GR(R,B.targetId,U.wa),U.snapshot}),function D(R,B,L,q){return b.apply(this,arguments)})(n,m,y,I);var b};const o=yield Jw(n.localStore,e,!0),s=new z4(e,o.Ts),a=s.ma(o.documents),c=M_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=s.applyChanges(a,n.isPrimaryClient,c);GR(n,t,l.wa);const f=new Vae(e,t,s);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot}),kR.apply(this,arguments)}function zae(n,e,t){return OR.apply(this,arguments)}function OR(){return(OR=(0,S.A)(function*(n,e,t){const r=Se(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!b_(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zf(r.remoteStore,i.targetId),ip(r,i.targetId)}).catch(su))):(ip(r,i.targetId),yield Yf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Hae(n,e){return FR.apply(this,arguments)}function FR(){return(FR=(0,S.A)(function*(n,e){const t=Se(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zf(t.remoteStore,r.targetId))})).apply(this,arguments)}function LR(){return(LR=(0,S.A)(function*(n,e,t){const r=nP(n);try{const i=yield function(s,a){const c=Se(s),l=Gn.now(),f=a.reduce((I,b)=>I.add(b.key),mt());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Ji(),D=mt();return c.cs.getEntries(I,f).next(R=>{b=R,b.forEach((B,L)=>{L.isValidDocument()||(D=D.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(R=>{m=R;const B=[];for(const L of a){const q=_se(L,m.get(L.key).overlayedDocument);null!=q&&B.push(new Ya(L.key,q,F3(q.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,l,B,a)}).next(R=>{y=R;const B=R.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(I,R.batchId,B)})}).then(()=>({batchId:y.batchId,changes:n$(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Rn(ct)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Za(r,i.changes),yield Xf(r.remoteStore)}catch(i){const o=tp(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function G4(n,e){return VR.apply(this,arguments)}function VR(){return(VR=(0,S.A)(function*(n,e){const t=Se(n);try{const r=yield function uae(n,e){const t=Se(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(o,f.addedDocuments,m)));let I=y.withSequenceNumber(o.currentSequenceNumber);var D,R,B;null!==e.targetMismatches.get(m)?I=I.withResumeToken(tr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),R=I,B=f,(0===(D=y).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(o,I))});let c=Ji(),l=mt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(I4(o,s,e.documentUpdates).next(f=>{c=f.Ps,l=f.Is})),!r.isEqual(We.min())){const f=t.Ur.getLastRemoteSnapshotVersion(o).next(m=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return Q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Na.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ge(s.va):i.removedDocuments.size>0&&(Ge(s.va),s.va=!1))}),yield Za(t,r,e)}catch(r){yield su(r)}})).apply(this,arguments)}function q4(n,e,t){const r=Se(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=Se(s);c.onlineState=a;let l=!1;c.queries.forEach((f,m)=>{for(const y of m.j_)y.Z_(a)&&(l=!0)}),l&&DR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qae(n,e,t){return UR.apply(this,arguments)}function UR(){return(UR=(0,S.A)(function*(n,e,t){const r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Rn(Ne.comparator);s=s.insert(o,Vn.newNoDocument(o,We.min()));const a=mt().add(o),c=new P_(We.min(),new Map,new Rn(ct),s,a);yield G4(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),qR(r)}else yield Yf(r.localStore,e,!1).then(()=>ip(r,e,t)).catch(su)})).apply(this,arguments)}function Wae(n,e){return BR.apply(this,arguments)}function BR(){return(BR=(0,S.A)(function*(n,e){const t=Se(n),r=e.batch.batchId;try{const i=yield function cae(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,f){const m=l.batch,y=m.keys();let I=Q.resolve();return y.forEach(b=>{I=I.next(()=>f.getEntry(c,b)).next(D=>{const R=l.docVersions.get(b);Ge(null!==R),D.version.compareTo(R)<0&&(m.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),f.addEntry(D)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=mt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);HR(t,r,null),zR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Za(t,i)}catch(i){yield su(i)}})).apply(this,arguments)}function Kae(n,e,t){return jR.apply(this,arguments)}function jR(){return(jR=(0,S.A)(function*(n,e,t){const r=Se(n);try{const i=yield function(s,a){const c=Se(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(Ge(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>c.localDocuments.getDocuments(l,f))})}(r.localStore,e);HR(r,e,t),zR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Za(r,i)}catch(i){yield su(i)}})).apply(this,arguments)}function $R(){return($R=(0,S.A)(function*(n,e){const t=Se(n);yu(t.remoteStore)||ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Se(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=tp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function zR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function HR(n,e,t){const r=Se(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ip(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||W4(n,r)})}function W4(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Zf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),qR(n))}function GR(n,e,t){for(const r of t)r instanceof j4?(n.La.addReference(r.key,e),Yae(n,r)):r instanceof $4?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||W4(n,r.key)):je()}function Yae(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(r),qR(n))}function qR(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ne(Ft.fromString(e)),r=n.qa.next();n.Na.set(r,new Uae(t)),n.Oa=n.Oa.insert(t,r),nb(n.remoteStore,new Ja(gi(Ff(t.path)),r,"TargetPurposeLimboResolution",Ro.oe))}}function Za(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,S.A)(function*(n,e,t){const r=Se(n),i=[],o=[],s=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){const m=l?!l.fromCache:null===(f=t?.targetChanges.get(c.targetId))||void 0===f?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(l){i.push(l);const m=WS.Wi(c.targetId,l);o.push(m)}}))}),yield Promise.all(s),r.Ca.d_(i),yield(a=(0,S.A)(function*(l,f){const m=Se(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(f,I=>Q.forEach(I.$i,b=>m.persistence.referenceDelegate.addReference(y,I.targetId,b)).next(()=>Q.forEach(I.Ui,b=>m.persistence.referenceDelegate.removeReference(y,I.targetId,b)))))}catch(y){if(!au(y))throw y;ge("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const I=y.targetId;if(!y.fromCache){const b=m.os.get(I),R=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.os=m.os.insert(I,R)}}}),function c(l,f){return a.apply(this,arguments)})(r.localStore,o))}),WR.apply(this,arguments)}function Jae(n,e){return KR.apply(this,arguments)}function KR(){return(KR=(0,S.A)(function*(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=yield y4(t.localStore,e);t.currentUser=e,(o=t).ka.forEach(a=>{a.forEach(c=>{c.reject(new pe(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Za(t,r.hs)}var o})).apply(this,arguments)}function Zae(n,e){const t=Se(n),r=t.Na.get(e);if(r&&r.va)return mt().add(r.key);{let i=mt();const o=t.Ma.get(e);if(!o)return i;for(const s of o){const a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Xae(n,e){return QR.apply(this,arguments)}function QR(){return(QR=(0,S.A)(function*(n,e){const t=Se(n),r=yield Jw(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&GR(t,e.targetId,i.wa),i})).apply(this,arguments)}function ece(n,e){return YR.apply(this,arguments)}function YR(){return(YR=(0,S.A)(function*(n,e){const t=Se(n);return w4(t.localStore,e).then(r=>Za(t,r))})).apply(this,arguments)}function tce(n,e,t,r){return JR.apply(this,arguments)}function JR(){return(JR=(0,S.A)(function*(n,e,t,r){const i=Se(n),o=yield function(a,c){const l=Se(a),f=Se(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.Mn(m,c).next(y=>y?l.localDocuments.getDocuments(m,y):Q.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield Xf(i.remoteStore):"acknowledged"===t||"rejected"===t?(HR(i,e,r||null),zR(i,e),c=e,Se(Se(i.localStore).mutationQueue).On(c)):je(),yield Za(i,o)):ge("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function ZR(){return(ZR=(0,S.A)(function*(n,e){const t=Se(n);if(ib(t),nP(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield K4(t,r.toArray());t.Qa=!0,yield IR(t.remoteStore,!0);for(const o of i)nb(t.remoteStore,o)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ip(t,s),Yf(t.localStore,s,!0))),Zf(t.remoteStore,s)}),yield i,yield K4(t,r),function(s){const a=Se(s);a.Na.forEach((c,l)=>{Zf(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Rn(Ne.comparator)}(t),t.Qa=!1,yield IR(t.remoteStore,!1)}})).apply(this,arguments)}function K4(n,e,t){return XR.apply(this,arguments)}function XR(){return(XR=(0,S.A)(function*(n,e,t){const r=Se(n),i=[],o=[];for(const s of e){let a;const c=r.Ma.get(s);if(c&&0!==c.length){a=yield Qf(r.localStore,gi(c[0]));for(const l of c){const f=r.Fa.get(l),m=yield Xae(r,f);m.snapshot&&o.push(m.snapshot)}}else{const l=yield E4(r.localStore,s);a=yield Qf(r.localStore,l),yield xR(r,Q4(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})).apply(this,arguments)}function Q4(n){return K3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rce(n){return t=Se(n).localStore,Se(Se(t).persistence).Qi();var t}function ice(n,e,t,r){return eP.apply(this,arguments)}function eP(){return(eP=(0,S.A)(function*(n,e,t,r){const i=Se(n);if(i.Qa)return void ge("SyncEngine","Ignoring unexpected query state notification.");const o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield w4(i.localStore,X3(o[0])),a=P_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,tr.EMPTY_BYTE_STRING);yield Za(i,s,a);break}case"rejected":yield Yf(i.localStore,e,!0),ip(i,e,r);break;default:je()}})).apply(this,arguments)}function oce(n,e,t){return tP.apply(this,arguments)}function tP(){return(tP=(0,S.A)(function*(n,e,t){const r=ib(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ge("SyncEngine","Adding an already active target "+i);continue}const o=yield E4(r.localStore,i),s=yield Qf(r.localStore,o);yield xR(r,Q4(o),s.targetId,!1,s.resumeToken),nb(r.remoteStore,s)}for(const i of t)r.Ma.has(i)&&(yield Yf(r.localStore,i,!1).then(()=>{Zf(r.remoteStore,i),ip(r,i)}).catch(su))}})).apply(this,arguments)}function ib(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=G4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qae.bind(null,e),e.Ca.d_=kae.bind(null,e.eventManager),e.Ca.$a=Oae.bind(null,e.eventManager),e}function nP(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kae.bind(null,e),e}let op=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,S.A)(function*(){r.serializer=j_(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return _4(this.persistence,new m4,t.initialUser,this.serializer)}Ga(t){return new zS(Kw.Zr,this.serializer)}Wa(t){return new A4}terminate(){var t=this;return(0,S.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class rP extends op{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,S.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield nP(r.Ja.syncEngine),yield Xf(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return _4(this.persistence,new m4,e.initialUser,this.serializer)}ja(e,t){return new a4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new Soe(t,this.persistence);return new Doe(e.asyncQueue,r)}Ga(e){const t=qS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new GS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,S4(),tb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new A4}}class Y4 extends rP{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,S.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof tR&&(r.sharedClientState.syncEngine={no:tce.bind(null,i),ro:ice.bind(null,i),io:oce.bind(null,i),Qi:rce.bind(null,i),eo:ece.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var o=(0,S.A)(function*(s){yield function nce(n,e){return ZR.apply(this,arguments)}(r.Ja.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}Wa(e){const t=S4();if(!tR.D(t))throw new pe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let sp=(()=>{class n{initialize(t,r){var i=this;return(0,S.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>q4(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=Jae.bind(null,i.syncEngine),yield IR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new xae}createDatastore(t){const r=j_(t.databaseInfo.databaseId),i=new mae(t.databaseInfo);return new vae(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,o=this.datastore,s=t.asyncQueue,a=r=>q4(this.syncEngine,r,0),c=D4.D()?new D4:new fae,new Eae(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(t,r){return function(o,s,a,c,l,f,m){const y=new Bae(o,s,a,c,l,f);return m&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,S.A)(function*(){var r,i,o;yield(o=(0,S.A)(function*(a){const c=Se(a);ge("RemoteStore","RemoteStore shutting down."),c.L_.add(5),yield Jf(c),c.k_.shutdown(),c.q_.set("Unknown")}),function s(a){return o.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function J4(n,e=10240){let t=0;return{read:()=>(0,S.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,S.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class cce{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,S.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,S.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,S.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const o=yield e.iu(i);return new Fae(JSON.parse(o),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,S.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,S.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,S.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class uce{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,S.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new pe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,S.A)(function*(s,a){const c=Se(s),l={documents:a.map(I=>N_(c.serializer,I))},f=yield c.Lo("BatchGetDocuments",c.serializer.databaseId,Ft.emptyPath(),l,a.length),m=new Map;f.forEach(I=>{const b=function Ase(n,e){return"found"in e?function(r,i){Ge(!!i.found);const o=sa(r,i.found.name),s=gr(i.found.updateTime),a=i.found.createTime?gr(i.found.createTime):We.min(),c=new ri({mapValue:{fields:i.found.fields}});return Vn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){Ge(!!i.missing),Ge(!!i.readTime);const o=sa(r,i.missing),s=gr(i.readTime);return Vn.newNoDocument(o,s)}(n,e):je()}(c.serializer,I);m.set(b.key.toString(),b)});const y=[];return a.forEach(I=>{const b=m.get(I.toString());Ge(!!b),y.push(b)}),y}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $f(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,S.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ne.fromPath(i);e.mutations.push(new CS(o,e.precondition(o)))}),yield(r=(0,S.A)(function*(o,s){const a=Se(o),c={writes:s.map(l=>x_(a.serializer,l))};yield a.Mo("Commit",a.serializer.databaseId,Ft.emptyPath(),c)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw je();t=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(We.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new pe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lce{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new rR(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,S.A)(function*(){const t=new uce(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.lu(o)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!g_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_$(t)}return!1}}class dce{constructor(e,t,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=c3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=(0,S.A)(function*(c){ge("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ge("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,S.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=tp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function iP(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,S.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,S.A)(function*(o){r.isEqual(o)||(yield y4(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),oP.apply(this,arguments)}function Z4(n,e){return sP.apply(this,arguments)}function sP(){return(sP=(0,S.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aP(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>O4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>O4(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function aP(n){return cP.apply(this,arguments)}function cP(){return(cP=(0,S.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iP(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Do("Error using user provided cache. Falling back to memory cache: "+e),yield iP(n,new op)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),yield iP(n,new op);var i;return n._offlineComponents})).apply(this,arguments)}function sb(n){return uP.apply(this,arguments)}function uP(){return(uP=(0,S.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield Z4(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),yield Z4(n,new sp))),n._onlineComponents})).apply(this,arguments)}function X4(n){return aP(n).then(e=>e.persistence)}function ap(n){return aP(n).then(e=>e.localStore)}function ez(n){return sb(n).then(e=>e.remoteStore)}function lP(n){return sb(n).then(e=>e.syncEngine)}function cp(n){return dP.apply(this,arguments)}function dP(){return(dP=(0,S.A)(function*(n){const e=yield sb(n),t=e.eventManager;return t.onListen=jae.bind(null,e.syncEngine),t.onUnlisten=zae.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$ae.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Hae.bind(null,e.syncEngine),t})).apply(this,arguments)}function nz(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function(o,s,a,c,l){const f=new ob({next:y=>{f.Za(),s.enqueueAndForget(()=>CR(o,m));const I=y.docs.has(a);!I&&y.fromCache?l.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&"server"===c.source?l.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new RR(Ff(a.path),f,{includeMetadataChanges:!0,_a:!0});return bR(o,m)}(yield cp(n),n.asyncQueue,e,t,r)})),r.promise}function rz(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function(o,s,a,c,l){const f=new ob({next:y=>{f.Za(),s.enqueueAndForget(()=>CR(o,m)),y.fromCache&&"server"===c.source?l.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new RR(a,f,{includeMetadataChanges:!0,_a:!0});return bR(o,m)}(yield cp(n),n.asyncQueue,e,t,r)})),r.promise}function iz(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const oz=new Map;function hP(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sz(n,e,t,r){if(!0===e&&!0===r)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function az(n){if(!Ne.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cz(n){if(Ne.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ab(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":je()}function Ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ab(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uz(n,e){if(e<=0)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lz{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iz(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lz({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lz(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new goe;switch(r.type){case"firstParty":return new voe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,S.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=oz.get(t);r&&(ge("ComponentProvider","Removing Datastore"),oz.delete(t),r.terminate())}(this),Promise.resolve()}}class ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class aa extends ii{constructor(e,t,r){super(e,t,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new Ne(e))}withConverter(e){return new aa(this.firestore,e,this._path)}}function hz(n,e,...t){if(n=(0,rn.Ku)(n),hP("collection","path",e),n instanceof z_){const r=Ft.fromString(e,...t);return cz(r),new aa(n,null,r)}{if(!(n instanceof Un||n instanceof aa))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return cz(r),new aa(n.firestore,null,r)}}function cb(n,e,...t){if(n=(0,rn.Ku)(n),1===arguments.length&&(e=c3.newId()),hP("doc","path",e),n instanceof z_){const r=Ft.fromString(e,...t);return az(r),new Un(n,null,new Ne(r))}{if(!(n instanceof Un||n instanceof aa))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return az(r),new Un(n.firestore,n instanceof aa?n.converter:null,new Ne(r))}}function fz(n,e){return n=(0,rn.Ku)(n),e=(0,rn.Ku)(e),(n instanceof Un||n instanceof aa)&&(e instanceof Un||e instanceof aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fP(n,e){return n=(0,rn.Ku)(n),e=(0,rn.Ku)(e),n instanceof ii&&e instanceof ii&&n.firestore===e.firestore&&b_(n._query,e._query)&&n.converter===e.converter}class pz{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rR(this,"async_queue_retry"),this.Vu=()=>{const r=tb();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=tb();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=tb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,S.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!au(t))throw t;ge("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,pr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=wR.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&je()}verifyOperationInProgress(){}wu(){var e=this;return(0,S.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function pP(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class Tce{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends z_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pz,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,S.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new pz(t),e._firestoreClient=void 0,yield t}})()}}function Kn(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gz(n),n._firestoreClient}function gz(n){var e,t,r;const i=n._freezeSettings(),o=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Yoe(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,iz(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new dce(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function gP(){return(gP=(0,S.A)(function*(n){Do("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();mz(n,sp.provider,{build:t=>new Y4(t,e.cacheSizeBytes)})})).apply(this,arguments)}function mz(n,e,t){if((n=Ct(n,In))._firestoreClient||n._terminated)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new pe(re.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},gz(n)}class ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ca(tr.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ca(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xl{constructor(e){this._methodName=e}}class ub{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}class lb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const Oce=/^__.*__$/;class Fce{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new jf(e,this.data,t,this.fieldTransforms)}}class _z{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class db{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new db(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pb(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(yz(this.Cu)&&Oce.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Lce{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||j_(e)}Qu(e,t,r,i=!1){return new db({Cu:e,methodName:t,qu:r,path:Ln.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(n){const e=n._freezeSettings(),t=j_(n._databaseId);return new Lce(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hb(n,e,t,r,i,o={}){const s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);wP("Data must be an object, but it was:",s,r);const a=Ez(r,s);let c,l;if(o.merge)c=new Yi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const m of o.mergeFields){const y=q_(e,m,t);if(!s.contains(y))throw new pe(re.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);bz(f,y)||f.push(y)}c=new Yi(f),l=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=s.fieldTransforms;return new Fce(new ri(a),c,l)}class G_ extends Xl{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G_}}function vz(n,e,t){return new db({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mP extends Xl{_toFieldTransform(e){return new D_(e.path,new Uf)}isEqual(e){return e instanceof mP}}class _P extends Xl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=vz(this,e,!0),r=this.Ku.map(o=>td(o,t)),i=new Hl(r);return new D_(e.path,i)}isEqual(e){return e instanceof _P&&(0,rn.bD)(this.Ku,e.Ku)}}class yP extends Xl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=vz(this,e,!0),r=this.Ku.map(o=>td(o,t)),i=new Gl(r);return new D_(e.path,i)}isEqual(e){return e instanceof yP&&(0,rn.bD)(this.Ku,e.Ku)}}class vP extends Xl{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Bf(e.serializer,o$(e.serializer,this.$u));return new D_(e.path,t)}isEqual(e){return e instanceof vP&&this.$u===e.$u}}function IP(n,e,t,r){const i=n.Qu(1,e,t);wP("Data must be an object, but it was:",i,r);const o=[],s=ri.empty();cu(r,(c,l)=>{const f=fb(e,c,t);l=(0,rn.Ku)(l);const m=i.Nu(f);if(l instanceof G_)o.push(f);else{const y=td(l,m);null!=y&&(o.push(f),s.set(f,y))}});const a=new Yi(o);return new _z(s,a,i.fieldTransforms)}function EP(n,e,t,r,i,o){const s=n.Qu(1,e,t),a=[q_(e,r,t)],c=[i];if(o.length%2!=0)throw new pe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(q_(e,o[y])),c.push(o[y+1]);const l=[],f=ri.empty();for(let y=a.length-1;y>=0;--y)if(!bz(l,a[y])){const I=a[y];let b=c[y];b=(0,rn.Ku)(b);const D=s.Nu(I);if(b instanceof G_)l.push(I);else{const R=td(b,D);null!=R&&(l.push(I),f.set(I,R))}}const m=new Yi(l);return new _z(f,m,s.fieldTransforms)}function Iz(n,e,t,r=!1){return td(t,n.Qu(r?4:3,e))}function td(n,e){if(wz(n=(0,rn.Ku)(n)))return wP("Unsupported field value:",e,n),Ez(n,e);if(n instanceof Xl)return function(r,i){if(!yz(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=td(a,i.Lu(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,rn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return o$(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Gn.fromDate(r);return{timestampValue:zf(i.serializer,o)}}if(r instanceof Gn){const o=new Gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(i.serializer,o)}}if(r instanceof ub)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ca)return{bytesValue:D$(i.serializer,r._byteString)};if(r instanceof Un){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:MS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lb)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Bu("VectorValues must only contain numeric values.");return TS(a.serializer,c)})}}}}};var a;throw i.Bu(`Unsupported field value: ${ab(r)}`)}(n,e)}function Ez(n,e){const t={};return C3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(n,(r,i)=>{const o=td(i,e.Mu(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function wz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Gn||n instanceof ub||n instanceof ca||n instanceof Un||n instanceof Xl||n instanceof lb)}function wP(n,e,t){if(!wz(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=ab(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function q_(n,e,t){if((e=(0,rn.Ku)(e))instanceof Xa)return e._internalPath;if("string"==typeof e)return fb(n,e);throw pb("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vce=new RegExp("[~\\*/\\[\\]]");function fb(n,e,t){if(e.search(Vce)>=0)throw pb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xa(...e.split("."))._internalPath}catch{throw pb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pb(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(re.INVALID_ARGUMENT,a+n+c)}function bz(n,e){return n.some(t=>t.isEqual(e))}class W_{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uce extends W_{data(){return super.data()}}function gb(n,e){return"string"==typeof e?fb(n,e):e instanceof Xa?e._internalPath:e._delegate._internalPath}function Tz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bP{}class K_ extends bP{}function Iu(n,e,...t){let r=[];e instanceof bP&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof up).length,a=o.filter(c=>c instanceof Q_).length;if(s>1||s>0&&a>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Q_ extends K_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Q_(e,t,r)}_apply(e){const t=this._parse(e);return Sz(e._query,t),new ii(e.firestore,e.converter,wS(e._query,t))}_parse(e){const t=ed(e.firestore);return function(o,s,a,c,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){Dz(m,f);const I=[];for(const b of m)I.push(Az(c,o,b));y={arrayValue:{values:I}}}else y=Az(c,o,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||Dz(m,f),y=Iz(a,"where",m,"in"===f||"not-in"===f);return Lt.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class up extends bP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)Sz(s,c),s=wS(s,c)}(e._query,t),new ii(e.firestore,e.converter,wS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class TP extends K_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TP(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new E_(o,s)}(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ka(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class mb extends K_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mb(e,t,r)}_apply(e){return new ii(e.firestore,e.converter,kw(e._query,this._limit,this._limitType))}}class _b extends K_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _b(e,t,r)}_apply(e){const t=Cz(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(o=t,new Ka((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class yb extends K_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yb(e,t,r)}_apply(e){const t=Cz(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(o=t,new Ka((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function Cz(n,e,t,r){if(t[0]=(0,rn.Ku)(t[0]),t[0]instanceof W_)return function(o,s,a,c,l){if(!c)throw new pe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Lf(o))if(m.field.isKeyField())f.push($l(s,c.key));else{const y=c.data.field(m.field);if(Aw(y))throw new pe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const I=m.field.canonicalString();throw new pe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(y)}return new fu(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ed(n.firestore);return function(s,a,c,l,f,m){const y=s.explicitOrderBy;if(f.length>y.length)throw new pe(re.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let b=0;b<f.length;b++){const D=f[b];if(y[b].field.isKeyField()){if("string"!=typeof D)throw new pe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!ES(s)&&-1!==D.indexOf("/"))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);const R=s.path.child(Ft.fromString(D));if(!Ne.isDocumentKey(R))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const B=new Ne(R);I.push($l(a,B))}else{const R=Iz(c,l,D);I.push(R)}}return new fu(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Az(n,e,t){if("string"==typeof(t=(0,rn.Ku)(t))){if(""===t)throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ES(e)&&-1!==t.indexOf("/"))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ft.fromString(t));if(!Ne.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $l(n,new Ne(r))}if(t instanceof Un)return $l(n,t._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ab(t)}.`)}function Dz(n,e){if(!Array.isArray(n)||0===n.length)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sz(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new pe(re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CP{convertValue(e,t="none"){switch(du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cu(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>qn(s.doubleValue));return new lb(o)}convertGeoPoint(e){return new ub(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(__(e));default:return null}}convertTimestamp(e){const t=qa(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ft.fromString(e);Ge(U$(r));const i=new uu(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return i.isEqual(t)||pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function vb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Kce extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends W_{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Y_ extends ec{data(e={}){return super.data(e)}}class Eu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Y_(this._firestore,this._userDataWriter,r.key,r,new nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Y_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new Y_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:Yce(a.type),doc:c,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yce(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}function Pz(n,e){return n instanceof ec&&e instanceof ec?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eu&&e instanceof Eu&&n._firestore===e._firestore&&fP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class wu extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function Mz(n,e,t){n=Ct(n,Un);const r=Ct(n.firestore,In),i=vb(n.converter,e,t);return lp(r,[hb(ed(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Wn.none())])}function Nz(n,e,t,...r){n=Ct(n,Un);const i=Ct(n.firestore,In),o=ed(i);let s;return s="string"==typeof(e=(0,rn.Ku)(e))||e instanceof Xa?EP(o,"updateDoc",n._key,e,t,r):IP(o,"updateDoc",n._key,e),lp(i,[s.toMutation(n._key,Wn.exists(!0))])}function xz(n,...e){var t,r,i;n=(0,rn.Ku)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||pP(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pP(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,l,f;if(n instanceof Un)l=Ct(n.firestore,In),f=Ff(n._key.path),c={next:m=>{e[s]&&e[s](AP(l,n,m))},error:e[s+1],complete:e[s+2]};else{const m=Ct(n,ii);l=Ct(m.firestore,In),f=m._query;const y=new wu(l);c={next:I=>{e[s]&&e[s](new Eu(l,y,m,I))},error:e[s+1],complete:e[s+2]},Tz(n._query)}return function(y,I,b,D){const R=new ob(D),B=new RR(I,R,b);return y.asyncQueue.enqueueAndForget((0,S.A)(function*(){return bR(yield cp(y),B)})),()=>{R.Za(),y.asyncQueue.enqueueAndForget((0,S.A)(function*(){return CR(yield cp(y),B)}))}}(Kn(l),f,a,c)}function lp(n,e){return function(r,i){const o=new Hr;return r.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function Gae(n,e,t){return LR.apply(this,arguments)}(yield lP(r),i,o)})),o.promise}(Kn(n),e)}function AP(n,e,t){const r=t.docs.get(e._key),i=new wu(n);return new ec(n,i,e._key,r,new nd(t.hasPendingWrites,t.fromCache),e.converter)}const pue={maxAttempts:5};class kz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ed(e)}set(e,t,r){this._verifyNotCommitted();const i=bu(e,this._firestore),o=vb(i.converter,t,r),s=hb(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=bu(e,this._firestore);let s;return s="string"==typeof(t=(0,rn.Ku)(t))||t instanceof Xa?EP(this._dataReader,"WriteBatch.update",o._key,t,r,i):IP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bu(e,this._firestore);return this._mutations=this._mutations.concat(new $f(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bu(n,e){if((n=(0,rn.Ku)(n)).firestore!==e)throw new pe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gue extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ed(t)}get(t){const r=bu(t,this._firestore),i=new Kce(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return je();const s=o[0];if(s.isFoundDocument())return new W_(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new W_(this._firestore,i,r._key,null,r.converter);throw je()})}set(t,r,i){const o=bu(t,this._firestore),s=vb(o.converter,r,i),a=hb(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=bu(t,this._firestore);let a;return a="string"==typeof(r=(0,rn.Ku)(r))||r instanceof Xa?EP(this._dataReader,"Transaction.update",s._key,r,i,o):IP(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=bu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bu(e,this._firestore),r=new wu(this._firestore);return super.get(e).then(i=>new ec(this._firestore,r,t._key,i._document,new nd(!1,!1),t.converter))}}function SP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vz(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function Uz(){if(!function Koe(){return typeof atob<"u"}())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Sf=Cf.SDK_VERSION,(0,Cf._registerComponent)(new Yj.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new In(new _oe(r.getProvider("auth-internal")),new Ioe(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Cf.registerVersion)(o3,"4.7.3",e),(0,Cf.registerVersion)(o3,"4.7.3","esm2017")}();class J_{constructor(e){this._delegate=e}static fromBase64String(e){return Uz(),new J_(ca.fromBase64String(e))}static fromUint8Array(e){return Vz(),new J_(ca.fromUint8Array(e))}toBase64(){return Uz(),this._delegate.toBase64()}toUint8Array(){return Vz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RP(n){return function Cue(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Aue{enableIndexedDbPersistence(e,t){return function Ace(n,e){Do("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return mz(n,sp.provider,{build:r=>new rP(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dce(n){return gP.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Sce(n){if(n._initialized&&!n._terminated)throw new pe(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,S.A)(function*(){try{yield(t=(0,S.A)(function*(i){if(!na.D())return Promise.resolve();const o=i+"main";yield na.delete(o)}),function r(i){return t.apply(this,arguments)})(qS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Bz{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Do("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dz(n,e,t,r={}){var i;const o=(n=Ct(n,z_))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=zr.MOCK_USER;else{a=(0,rn.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new zr(l)}n._authCredentials=new moe(new s3(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function Pce(n){return function hce(n){return n.asyncQueue.enqueue((0,S.A)(function*(){const e=yield X4(n),t=yield ez(n);return e.setNetworkEnabled(!0),function(i){const o=Se(i);return o.L_.delete(0),$_(o)}(t)}))}(Kn(n=Ct(n,In)))}(this._delegate)}disableNetwork(){return function Mce(n){return function fce(n){return n.asyncQueue.enqueue((0,S.A)(function*(){const e=yield X4(n),t=yield ez(n);return e.setNetworkEnabled(!1),(r=(0,S.A)(function*(o){const s=Se(o);s.L_.add(0),yield Jf(s),s.q_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(Kn(n=Ct(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sz("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Rce(n){return function(t){const r=new Hr;return t.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function Qae(n,e){return $R.apply(this,arguments)}(yield lP(t),r)})),r.promise}(Kn(n=Ct(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function oue(n,e){return function _ce(n,e){const t=new ob(e);return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return i=yield cp(n),o=t,Se(i).Y_.add(o),void o.next();var i,o})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return i=yield cp(n),o=t,void Se(i).Y_.delete(o);var i,o}))}}(Kn(n=Ct(n,In)),pP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dp(this,hz(this._delegate,e))}catch(t){throw Mi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jo(this,cb(this._delegate,e))}catch(t){throw Mi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ni(this,function bce(n,e){if(n=Ct(n,z_),hP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(n,null,(r=e,new Ka(Ft.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Mi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function mue(n,e,t){n=Ct(n,In);const r=Object.assign(Object.assign({},pue),t);return function(o){if(o.maxAttempts<1)throw new pe(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const c=new Hr;return o.asyncQueue.enqueueAndForget((0,S.A)(function*(){const l=yield function tz(n){return sb(n).then(e=>e.datastore)}(o);new lce(o.asyncQueue,l,a,s,c).au()})),c.promise}(Kn(n),i=>e(new gue(n,i)),r)}(this._delegate,t=>e(new jz(this,t)))}batch(){return Kn(this._delegate),new $z(new kz(this._delegate,e=>lp(this._delegate,e)))}loadBundle(e){return function Nce(n,e){const t=Kn(n=Ct(n,In)),r=new Tce;return function yce(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?v$().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return J4(f,m);if(f instanceof ArrayBuffer)return J4(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new cce(f,a);var f}(t,j_(e));n.asyncQueue.enqueueAndForget((0,S.A)(function*(){!function sce(n,e,t){const r=Se(n);var i;(i=(0,S.A)(function*(s,a,c){try{const l=yield a.getMetadata();if(yield function(b,D){const R=Se(b),B=gr(D.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",L=>R.Gr.getBundleMetadata(L,D.id)).then(L=>!!L&&L.createTime.compareTo(B)>=0)}(s.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(b=l).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);c._updateProgress(B4(l));const f=new Lae(l,s.localStore,a.serializer);let m=yield a.Ua();for(;m;){const I=yield f.la(m);I&&c._updateProgress(I),m=yield a.Ua()}const y=yield f.complete();return yield Za(s,y.Ia,void 0),yield function(b,D){const R=Se(b);return R.persistence.runTransaction("Save bundle","readwrite",B=>R.Gr.saveBundleMetadata(B,D))}(s.localStore,l),c._completeWith(y.progress),Promise.resolve(y.Pa)}catch(l){return Do("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var b}),function o(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield lP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xce(n,e){return function vce(n,e){return n.asyncQueue.enqueue((0,S.A)(function*(){return function(r,i){const o=Se(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield ap(n),e)}))}(Kn(n=Ct(n,In)),e).then(t=>t?new ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ni(this,t):null)}}class Eb extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new J_(new ca(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jo.forKey(t,this.firestore,null)}}class jz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}get(e){const t=id(e);return this._delegate.get(t).then(r=>new Z_(this._firestore,new ec(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=id(e);return r?(SP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=id(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=id(e);return this._delegate.delete(t),this}}class $z{constructor(e){this._delegate=e}set(e,t,r){const i=id(e);return r?(SP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=id(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=id(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Y_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new X_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=rd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new rd(e,new Eb(e),t),i.set(t,o)),o}}rd.INSTANCES=new WeakMap;class Jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jo(t,new Un(t._delegate,r,new Ne(e)))}static forKey(e,t,r){return new Jo(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dp(this.firestore,hz(this._delegate,e))}catch(t){throw Mi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.Ku)(e))instanceof Un&&fz(this._delegate,e)}set(e,t){t=SP("DocumentReference.set",t);try{return t?Mz(this._delegate,e,t):Mz(this._delegate,e)}catch(r){throw Mi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Nz(this._delegate,e):Nz(this._delegate,e,t,...r)}catch(i){throw Mi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function rue(n){return lp(Ct(n.firestore,In),[new $f(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=zz(e),r=Hz(e,i=>new Z_(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Zce(n){n=Ct(n,Un);const e=Ct(n.firestore,In),t=Kn(e),r=new wu(e);return function pce(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return(r=(0,S.A)(function*(o,s,a){try{const c=yield function(f,m){const y=Se(f);return y.persistence.runTransaction("read document","readonly",I=>y.localDocuments.getDocument(I,m))}(o,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new pe(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=tp(c,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield ap(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ec(e,r,n._key,i,new nd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Xce(n){n=Ct(n,Un);const e=Ct(n.firestore,In);return nz(Kn(e),n._key,{source:"server"}).then(t=>AP(e,n,t))}(this._delegate):function Jce(n){n=Ct(n,Un);const e=Ct(n.firestore,In);return nz(Kn(e),n._key).then(t=>AP(e,n,t))}(this._delegate),t.then(r=>new Z_(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jo(this.firestore,this._delegate.withConverter(e?rd.getInstance(this.firestore,e):null))}}function Mi(n,e,t){return n.message=n.message.replace(e,t),n}function zz(n){for(const e of n)if("object"==typeof e&&!RP(e))return e;return{}}function Hz(n,e){var t,r;let i;return i=RP(n[0])?n[0]:RP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Z_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pz(this._delegate,e._delegate)}}class X_ extends Z_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function poe(n){n||je()}(void 0!==t),t}}class Ni{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Eb(e)}where(e,t,r){try{return new Ni(this.firestore,Iu(this._delegate,function Bce(n,e,t){const r=e,i=gb("where",n);return Q_._create(i,r,t)}(e,t,r)))}catch(i){throw Mi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ni(this.firestore,Iu(this._delegate,function jce(n,e="asc"){const t=e,r=gb("orderBy",n);return TP._create(r,t)}(e,t)))}catch(r){throw Mi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ni(this.firestore,Iu(this._delegate,function $ce(n){return uz("limit",n),mb._create("limit",n,"F")}(e)))}catch(t){throw Mi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ni(this.firestore,Iu(this._delegate,function zce(n){return uz("limitToLast",n),mb._create("limitToLast",n,"L")}(e)))}catch(t){throw Mi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ni(this.firestore,Iu(this._delegate,function Hce(...n){return _b._create("startAt",n,!0)}(...e)))}catch(t){throw Mi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ni(this.firestore,Iu(this._delegate,function Gce(...n){return _b._create("startAfter",n,!1)}(...e)))}catch(t){throw Mi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ni(this.firestore,Iu(this._delegate,function qce(...n){return yb._create("endBefore",n,!1)}(...e)))}catch(t){throw Mi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ni(this.firestore,Iu(this._delegate,function Wce(...n){return yb._create("endAt",n,!0)}(...e)))}catch(t){throw Mi(t,"endAt()","Query.endAt()")}}isEqual(e){return fP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tue(n){n=Ct(n,ii);const e=Ct(n.firestore,In),t=Kn(e),r=new wu(e);return function gce(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return(r=(0,S.A)(function*(o,s,a){try{const c=yield Jw(o,s,!0),l=new z4(s,c.Ts),f=l.ma(c.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const l=tp(c,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield ap(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Eu(e,r,n,i))}(this._delegate):"server"===e?.source?function nue(n){n=Ct(n,ii);const e=Ct(n.firestore,In),t=Kn(e),r=new wu(e);return rz(t,n._query,{source:"server"}).then(i=>new Eu(e,r,n,i))}(this._delegate):function eue(n){n=Ct(n,ii);const e=Ct(n.firestore,In),t=Kn(e),r=new wu(e);return Tz(n._query),rz(t,n._query).then(i=>new Eu(e,r,n,i))}(this._delegate),t.then(r=>new PP(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=zz(e),r=Hz(e,i=>new PP(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xz(this._delegate,t,r)}withConverter(e){return new Ni(this.firestore,this._delegate.withConverter(e?rd.getInstance(this.firestore,e):null))}}class Sue{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new X_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new X_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Sue(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new X_(this._firestore,r))})}isEqual(e){return Pz(this._delegate,e._delegate)}}class dp extends Ni{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jo(this.firestore,e):null}doc(e){try{return new Jo(this.firestore,void 0===e?cb(this._delegate):cb(this._delegate,e))}catch(t){throw Mi(t,"doc()","CollectionReference.doc()")}}add(e){return function iue(n,e){const t=Ct(n.firestore,In),r=cb(n),i=vb(n.converter,e);return lp(t,[hb(ed(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Jo(this.firestore,t))}isEqual(e){return fz(this._delegate,e._delegate)}withConverter(e){return new dp(this.firestore,this._delegate.withConverter(e?rd.getInstance(this.firestore,e):null))}}function id(n){return Ct(n,Un)}class MP{constructor(...e){this._delegate=new Xa(...e)}static documentId(){return new MP(Ln.keyField().canonicalString())}isEqual(e){return(e=(0,rn.Ku)(e))instanceof Xa&&this._delegate._internalPath.isEqual(e._internalPath)}}class od{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yue(){return new mP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new od(e)}static delete(){const e=function _ue(){return new G_("deleteField")}();return e._methodName="FieldValue.delete",new od(e)}static arrayUnion(...e){const t=function vue(...n){return new _P("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new od(t)}static arrayRemove(...e){const t=function Iue(...n){return new yP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new od(t)}static increment(e){const t=function Eue(n){return new vP("increment",n)}(e);return t._methodName="FieldValue.increment",new od(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Rue={Firestore:Bz,GeoPoint:ub,Timestamp:Gn,Blob:J_,Transaction:jz,WriteBatch:$z,DocumentReference:Jo,DocumentSnapshot:Z_,Query:Ni,QueryDocumentSnapshot:X_,QuerySnapshot:PP,CollectionReference:dp,FieldPath:MP,FieldValue:od,setLogLevel:function Due(n){!function foe(n){ou.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Gz(n,e){return function Nue(n,e=kj){return new Dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function NP(n,e){return Gz(n,e).pipe(Ve(t=>({payload:t,type:"query"})))}!function Mue(n){(function Pue(n,e){n.INTERNAL.registerComponent(new Yj.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Rue)))})(n,(e,t)=>new Bz(e,t,new Aue)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Ha.A);class qz{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=Zz(r,t);return new Qz(i,o,this.afs)}snapshotChanges(){return function xue(n,e){return Gz(n,e).pipe(YE(void 0),sS(),Ve(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ao)}valueChanges(e={}){return this.snapshotChanges().pipe(Ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Sn(this.ref.get(e)).pipe(Ao)}}function wb(n,e){return NP(n,e).pipe(YE(void 0),sS(),Ve(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=o.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Wz(n,e,t){return wb(n,t).pipe(JE((r,i)=>function kue(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Oue(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),function loe(n,e=Kr){return n=n??doe,ve((t,r)=>{let i,o=!0;t.subscribe(De(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}(),Ve(r=>r.map(i=>({type:i.type,payload:i}))))}function xP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Kz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Qz{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(YE(void 0),sS(),dn(([r,i])=>i.length>0||!r),Ve(([,r])=>r),Ao)}auditTrail(e){return this.stateChanges(e).pipe(JE((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kz(e);return Wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ao)}valueChanges(e={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ao)}get(e){return Sn(this.query.get(e)).pipe(Ao)}add(e){return this.ref.add(e)}doc(e){return new qz(this.ref.doc(e),this.afs)}}class Fue{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wb(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(t=>t.filter(r=>e.indexOf(r.type)>-1)),dn(t=>t.length>0),Ao):wb(this.query,this.afs.schedulers.outsideAngular).pipe(Ao)}auditTrail(e){return this.stateChanges(e).pipe(JE((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Kz(e);return Wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ao)}valueChanges(e={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe(Ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ao)}get(e){return Sn(this.query.get(e)).pipe(Ao)}}const Yz=new ye("angularfire2.enableFirestorePersistence"),Jz=new ye("angularfire2.firestore.persistenceSettings"),Lue=new ye("angularfire2.firestore.settings"),Vue=new ye("angularfire2.firestore.use-emulator");function Zz(n,e=t=>t){return{query:e(n),ref:n}}let hp=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,f,m,y,I,b,D,R,B,L){this.schedulers=c;const q=iS(t,a,r),fe=f;m&&Qj(q,a,y,b,D,R,I,B),[this.firestore,this.persistenceEnabled$]=Uj(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{const Te=a.runOutsideAngular(()=>q.firestore());if(o&&Te.settings(o),fe&&Te.useEmulator(...fe),i&&!Gm(s)){const Me=()=>{try{return Sn(Te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(U){return typeof console<"u"&&console.warn(U),Ze(!1)}};return[Te,a.runOutsideAngular(Me)]}return[Te,Ze(!1)]},[o,fe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=Zz(i,r),a=this.schedulers.ngZone.run(()=>o);return new Qz(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Fue(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qz(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(be(vw),be(Iw,8),be(Yz,8),be(Lue,8),be(_o),be(Rt),be(Lj),be(Jz,8),be(Vue,8),be(iu,8),be(zj,8),be(Hj,8),be(Gj,8),be(qj,8),be(Wj,8),be(Kj,8),be(Oj,8))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Uue=(()=>{class n{constructor(){Ha.A.registerVersion("angularfire",yw.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Yz,useValue:!0},{provide:Jz,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ns({type:n});static \u0275inj=Ui({providers:[hp]})}return n})(),fp=(()=>{class n{constructor(){this.client=G(hp),this.afAuth=G(iu)}getTrainings(){return new Dt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Training",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{t.next(o)}):t.next([])}).catch(()=>t.next([]))})}getMeals(){return new Dt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Meal",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{console.log("Pobrane posi\u0142ki:",o),t.next(o)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",r),t.next([])})})}addTraining(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{const i=r?.uid;i&&this.client.collection("Training").doc(t.id).set({...t,uid:i,date:t.date.toISOString()}).then(()=>console.log("Training added/updated successfully")).catch(o=>console.error("Error adding/updating training:",o))}).catch(r=>console.error("Error getting user:",r))}addMeal(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){const i=t.id||this.client.createId();this.client.collection("Meal").doc(i).set({...t,uid:r.uid,date:t.date.toISOString()}).then(()=>console.log("Meal added/updated successfully")).catch(o=>console.error("Error adding/updating meal:",o))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}updateTraining(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}getTrainingsByDate(t){return console.log("Pobieranie trening\xf3w dla daty:",t),new Dt(r=>{this.afAuth.currentUser.then(i=>{const o=i?.uid;if(o){const s=new Date(t);s.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Training",c=>c.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(c=>{console.log("Pobrane treningi:",c),r.next(c)},c=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",c),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(t){return console.log("Pobieranie posi\u0142k\xf3w dla daty:",t),new Dt(r=>{this.afAuth.currentUser.then(i=>{const o=i?.uid;if(o){const s=new Date(t);s.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Meal",c=>c.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(c=>{console.log("Pobrane posi\u0142ki:",c),r.next(c)},c=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",c),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(t,r){return new Dt(i=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("Meal",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(t,r){return new Dt(i=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("Training",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(t).delete().then(()=>console.log("Training deleted successfully")).catch(o=>console.error("Error deleting training:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(t).delete().then(()=>console.log("Meal deleted successfully")).catch(o=>console.error("Error deleting meal:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const mr=void 0,jue=["pl",[["a","p"],["AM","PM"],mr],mr,[["n","p","w","\u015b","c","p","s"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["N","P","W","\u015a","C","P","S"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],mr,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",mr,"{1} {0}",mr],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[mr,"$"],CAD:[mr,"$"],CNY:[mr,"\xa5"],GBP:[mr,"\xa3"],HKD:[mr,"$"],ILS:[mr,"\u20aa"],INR:[mr,"\u20b9"],JPY:[mr,"\xa5"],KRW:[mr,"\u20a9"],MXN:[mr,"$"],NZD:[mr,"$"],PHP:[mr,"\u20b1"],PLN:["z\u0142"],RON:[mr,"lej"],TWD:[mr,"NT$"],USD:[mr,"$"],VND:[mr,"\u20ab"]},"ltr",function Bue(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:0===r&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:0===r&&1!==t&&t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||0===r&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===r&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14?4:5}];let Xz=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Oa),Ie(mo))}}static{this.\u0275dir=at({type:n})}}return n})(),sd=(()=>{class n extends Xz{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,features:[an]})}}return n})();const ua=new ye(""),Hue={provide:ua,useExisting:Yt(()=>la),multi:!0},que=new ye("");let la=(()=>{class n extends Xz{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Gue(){const n=Jc()?Jc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Oa),Ie(mo),Ie(que,8))}}static{this.\u0275dir=at({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Fn([Hue]),an]})}}return n})();function Tu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const yi=new ye(""),Cu=new ye("");function iH(n){return Tu(n.value)?{required:!0}:null}function bb(n){return null}function lH(n){return null!=n}function dH(n){return Fm(n)?Sn(n):n}function hH(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function fH(n,e){return e.map(t=>t(n))}function pH(n){return n.map(e=>function Kue(n){return!n.validate}(e)?e:t=>e.validate(t))}function kP(n){return null!=n?function gH(n){if(!n)return null;const e=n.filter(lH);return 0==e.length?null:function(t){return hH(fH(t,e))}}(pH(n)):null}function OP(n){return null!=n?function mH(n){if(!n)return null;const e=n.filter(lH);return 0==e.length?null:function(t){return function $ue(...n){const e=PU(n),{args:t,keys:r}=TB(n),i=new Dt(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let f=0;f<s;f++){let m=!1;To(t[f]).subscribe(De(o,y=>{m||(m=!0,l--),a[f]=y},()=>c--,void 0,()=>{(!c||!m)&&(l||o.next(r?AB(r,a):a),o.complete())}))}});return e?i.pipe(CB(e)):i}(fH(t,e).map(dH)).pipe(Ve(hH))}}(pH(n)):null}function _H(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FP(n){return n?Array.isArray(n)?n:[n]:[]}function Tb(n,e){return Array.isArray(n)?n.includes(e):n===e}function IH(n,e){const t=FP(e);return FP(n).forEach(i=>{Tb(t,i)||t.push(i)}),t}function EH(n,e){return FP(e).filter(t=>!Tb(n,t))}class wH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xi extends wH{get formDirective(){return null}get path(){return null}}class Au extends wH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bH{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Du=(()=>{class n extends bH{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Au,2))}}static{this.\u0275dir=at({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Zh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[an]})}}return n})(),ey=(()=>{class n extends bH{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(xi,10))}}static{this.\u0275dir=at({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Zh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[an]})}}return n})();const ty="VALID",Ab="INVALID",pp="PENDING",ny="DISABLED";class gp{}class CH extends gp{constructor(e,t){super(),this.value=e,this.source=t}}class UP extends gp{constructor(e,t){super(),this.pristine=e,this.source=t}}class BP extends gp{constructor(e,t){super(),this.touched=e,this.source=t}}class Db extends gp{constructor(e,t){super(),this.status=e,this.source=t}}function jP(n){return(Sb(n)?n.validators:n)||null}function $P(n,e){return(Sb(e)?e.asyncValidators:n)||null}function Sb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class zP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=jm(()=>this.statusReactive()),this.statusReactive=Wi(void 0),this._pristine=jm(()=>this.pristineReactive()),this.pristineReactive=Wi(!0),this._touched=jm(()=>this.touchedReactive()),this.touchedReactive=Wi(!1),this._events=new C,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Js(this.statusReactive)}set status(e){Js(()=>this.statusReactive.set(e))}get valid(){return this.status===ty}get invalid(){return this.status===Ab}get pending(){return this.status==pp}get disabled(){return this.status===ny}get enabled(){return this.status!==ny}get pristine(){return Js(this.pristineReactive)}set pristine(e){Js(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Js(this.touchedReactive)}set touched(e){Js(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(IH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(IH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(EH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(EH(e,this._rawAsyncValidators))}hasValidator(e){return Tb(this._rawValidators,e)}hasAsyncValidator(e){return Tb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new BP(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new BP(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new UP(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new UP(!0,r))}markAsPending(e={}){this.status=pp;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Db(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ny,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new CH(this.value,r)),this._events.next(new Db(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ty,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ty||this.status===pp)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new CH(this.value,t)),this._events.next(new Db(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ny:ty}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pp,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=dH(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Db(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ot,this.statusChanges=new Ot}_calculateStatus(){return this._allControlsDisabled()?ny:this.errors?Ab:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pp)?pp:this._anyControlsHaveStatus(Ab)?Ab:ty}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new UP(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new BP(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function tle(n){return Array.isArray(n)?kP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function nle(n){return Array.isArray(n)?OP(n):n||null}(this._rawAsyncValidators)}}class HP extends zP{constructor(e,t,r){super(jP(t),$P(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function DH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new he(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function AH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new he(1e3,"");if(!r[t])throw new he(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const mp=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>Rb}),Rb="always";function ry(n,e,t=Rb){GP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function ole(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&SH(n,e)})}(n,e),function ale(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&SH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ile(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Nb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GP(n,e){const t=function yH(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(_H(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function vH(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(_H(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Nb(e._rawValidators,i),Nb(e._rawAsyncValidators,i)}function SH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const hle={provide:xi,useExisting:Yt(()=>ad)},iy=Promise.resolve();let ad=(()=>{class n extends xi{get submitted(){return Js(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=jm(()=>this.submittedReactive()),this.submittedReactive=Wi(!1),this._directives=new Set,this.ngSubmit=new Ot,this.form=new HP({},kP(t),OP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){iy.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ry(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){iy.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){iy.then(()=>{const r=this._findContainer(t.path),i=new HP({});(function RH(n,e){GP(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){iy.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){iy.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),function PH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ie(yi,10),Ie(Cu,10),Ie(mp,8))}}static{this.\u0275dir=at({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fn([hle]),an]})}}return n})();function MH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function NH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xH=class extends zP{constructor(e=null,t,r){super(jP(t),$P(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=NH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){NH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},gle={provide:Au,useExisting:Yt(()=>tc)},FH=Promise.resolve();let tc=(()=>{class n extends Au{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new xH,this._registered=!1,this.name="",this.update=new Ot,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function KP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===la?t=o:function lle(n){return Object.getPrototypeOf(n.constructor)===sd}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function WP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ry(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){FH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&af(r);FH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Pb(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ie(xi,9),Ie(yi,10),Ie(Cu,10),Ie(ua,10),Ie(Al,8),Ie(mp,8))}}static{this.\u0275dir=at({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fn([gle]),an,Ur]})}}return n})(),oy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=at({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const mle={provide:ua,useExisting:Yt(()=>cd),multi:!0};let cd=(()=>{class n extends sd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Le("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Fn([mle]),an]})}}return n})();const Cle={provide:ua,useExisting:Yt(()=>kb),multi:!0};function zH(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kb=(()=>{class n extends sd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=zH(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ale(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fn([Cle]),an]})}}return n})(),HH=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(zH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Ie(mo),Ie(Oa),Ie(kb,9))}}static{this.\u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const Dle={provide:ua,useExisting:Yt(()=>ZP),multi:!0};function GH(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ZP=(()=>{class n extends sd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const l=this._getOptionValue(s[a].value);i.push(l)}}else{const s=r.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Sle(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fn([Dle]),an]})}}return n})(),qH=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(GH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(GH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Ie(mo),Ie(Oa),Ie(ZP,9))}}static{this.\u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),ud=(()=>{class n{constructor(){this._validator=bb}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=at({type:n,features:[Ur]})}}return n})();const Mle={provide:yi,useExisting:Yt(()=>ld),multi:!0};let ld=(()=>{class n extends ud{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=af,this.createValidator=t=>iH}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Ws("required",i._enabled?"":null)},inputs:{required:"required"},features:[Fn([Mle]),an]})}}return n})();const Fle={provide:yi,useExisting:Yt(()=>XP),multi:!0};let XP=(()=>{class n extends ud{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function uH(n){if(!n)return bb;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Tu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ee(n)))(i||n)}})()}static{this.\u0275dir=at({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Ws("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[Fn([Fle]),an]})}}return n})(),Lle=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ns({type:n})}static{this.\u0275inj=Ui({})}}return n})(),Zi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mp,useValue:t.callSetDisabledState??Rb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ns({type:n})}static{this.\u0275inj=Ui({imports:[Lle]})}}return n})();function Ule(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",9),W(2),x(),k(3,"input",10),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.calories,i)||(o.model.calories=i),lt(i)}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.caloriesLabel),ne(),Pt("ngModel",t.model.calories)}}function Ble(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",11),W(2),x(),k(3,"input",12),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.burnedKcal,i)||(o.model.burnedKcal=i),lt(i)}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.burnedCalories),ne(),Pt("ngModel",t.model.burnedKcal)}}function jle(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",13),W(2),x(),k(3,"input",14),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.videoLink,i)||(o.model.videoLink=i),lt(i)}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.videoLinkLabel),ne(),Pt("ngModel",t.model.videoLink)}}function $le(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",15),W(2),x(),k(3,"input",16),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.weight,i)||(o.model.weight=i),lt(i)}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.weightLabel),ne(),Pt("ngModel",t.model.weight)}}function zle(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",17),W(2),x(),k(3,"input",18),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.time,i)||(o.model.time=i),lt(i)}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.timeLabel),ne(),Pt("ngModel",t.model.time)}}function Hle(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"label",19),W(2),x(),k(3,"input",20),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.model.date,i)||(o.model.date=i),lt(i)}),Le("ngModelChange",function(i){return pt(t),lt(Qe().onDateChange(i))}),x()()}if(2&n){const t=Qe();ne(2),Hn(t.dateLabel),ne(),Pt("ngModel",t.model.date)}}let Gle=(()=>{class n{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.videoLinkLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.save=new Ot}onSubmit(){this.save.emit(this.model)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",videoLinkLabel:"videoLinkLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Yn],decls:18,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoLink",1,"form-label"],["type","string","id","videoLink","name","videoLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h5",1),W(2),x(),Wo(3,"button",2),x(),k(4,"div",3)(5,"form",4),Le("ngSubmit",function(){return i.onSubmit()}),k(6,"div",5)(7,"label",6),W(8),x(),k(9,"input",7),Mt("ngModelChange",function(s){return Et(i.model.name,s)||(i.model.name=s),s}),x()(),zn(10,Ule,4,2,"div",5)(11,Ble,4,2,"div",5)(12,jle,4,2,"div",5)(13,$le,4,2,"div",5)(14,zle,4,2,"div",5)(15,Hle,4,2,"div",5),k(16,"button",8),W(17," Zapisz zmiany "),x()()()),2&r&&(ne(2),Hn(i.title),ne(6),Hn(i.nameLabel),ne(),Pt("ngModel",i.model.name),ne(),en(i.caloriesLabel?10:-1),ne(),en(i.burnedCalories?11:-1),ne(),en(i.videoLinkLabel?12:-1),ne(),en(i.weightLabel?13:-1),ne(),en(i.timeLabel?14:-1),ne(),en(i.dateLabel?15:-1))},dependencies:[Zi,oy,la,cd,Du,ey,ld,tc,ad],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return n})(),Ob=(()=>{class n{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.videoLinkLabel="",this.dateLabel="",this.model={},this.save=new Ot}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",videoLinkLabel:"videoLinkLabel",dateLabel:"dateLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[Yn],decls:5,vars:10,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),Le("save",function(s){return i.save.emit(s)}),x()()()()()),2&r&&(Xt("id",i.modalId),ne(4),Xt("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("videoLinkLabel",i.videoLinkLabel)("model",i.model))},dependencies:[Gle],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}"]})}}return n})(),qle=(()=>{class n{constructor(){this.trainingAndMealService=G(fp),this.meals=[],this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}addMeal(t){this.trainingAndMealService.addMeal(t),this.meals.push(t),console.log("Meal added:",t)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-meal-modal"]],standalone:!0,features:[Yn],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","dateLabel","model"]],template:function(r,i){1&r&&(k(0,"app-modal",0),Le("save",function(s){return i.addMeal(s)}),x()),2&r&&Xt("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("dateLabel","Data")("model",i.model)},dependencies:[Zi,Ob]})}}return n})(),Wle=(()=>{class n{constructor(){this.trainingAndMealService=G(fp),this.router=G($r),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:""}}addMeal(t){throw new Error("Method not implemented.")}addTraining(t){this.trainingAndMealService.addTraining(t),this.training.push(t),console.log("Meal added:",t),this.router.navigate(["/home"])}onDateChange(t){this.model.date=new Date(`${t}T00:00:00`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-training-modal"]],standalone:!0,features:[Yn],decls:1,vars:8,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(k(0,"app-modal",0),Le("save",function(s){return i.addTraining(s)}),x()),2&r&&Xt("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Zi,Ob]})}}return n})(),Kle=(()=>{class n{constructor(){this.meal=null,this.Save=new Ot,this.close=new Ot,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}ngOnChanges(t){t.meal&&this.meal&&(this.model={...this.meal,date:new Date(this.meal.date)})}saveMeal(t){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Ur,Yn],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){1&r&&(k(0,"app-modal",0),Le("save",function(s){return i.saveMeal(s)}),x()),2&r&&Xt("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[Zi,Ob]})}}return n})(),Qle=(()=>{class n{constructor(){this.training=null,this.Save=new Ot,this.close=new Ot,this.model={name:"",isDone:!1,burnedKcal:0,time:"",videoLink:"",date:new Date,id:""}}ngOnChanges(t){t.training&&this.training&&(this.model={...this.training,date:new Date(this.training.date)})}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Ur,Yn],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(k(0,"app-modal",0),Le("save",function(){return i.saveTraining()}),x()),2&r&&Xt("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Zi,Ob]})}}return n})();const Yle=n=>["/day-details",n];function Jle(n,e){if(1&n&&(k(0,"span"),W(1),x()),2&n){const t=e.$implicit;ne(),Hn(t)}}function Zle(n,e){if(1&n){const t=Ir();k(0,"div",6),Le("click",function(){const i=pt(t).$implicit;return lt(Qe().selectDay(i.date))}),W(1),x()}if(2&n){const t=e.$implicit,r=Qe();Zh("other-month",t.isOtherMonth)("has-events",r.hasEventsForDay(t.date)),ne(),Qn(" ",t.date.getDate()," ")}}function Xle(n,e){if(1&n){const t=Ir();k(0,"div"),W(1),x(),k(2,"div",17)(3,"button",18),Le("click",function(){const i=pt(t).$implicit;return lt(Qe(2).editTraining(i))}),W(4," Edytuj "),x(),k(5,"button",19),Le("click",function(){const i=pt(t).$implicit;return lt(Qe(2).deleteTraining(i.id))}),W(6," Usu\u0144 "),x(),k(7,"label",20)(8,"input",21),Le("change",function(){const i=pt(t).$implicit;return lt(Qe(2).toggleTrainingDone(i))}),x(),W(9," Zrobiony "),x()()}if(2&n){const t=e.$implicit;ne(),uE(" ",t.name," - ",t.burnedKcal," kcal ",t.time,"min "),ne(7),Xt("checked",t.isDone)}}function ede(n,e){if(1&n){const t=Ir();k(0,"div"),W(1),x(),k(2,"div",17)(3,"button",22),Le("click",function(){const i=pt(t).$implicit;return lt(Qe(2).editMeal(i))}),W(4," Edytuj "),x(),k(5,"button",19),Le("click",function(){const i=pt(t).$implicit;return lt(Qe(2).deleteMeal(i.id))}),W(6," Usu\u0144 "),x()()}if(2&n){const t=e.$implicit;ne(),uE(" ",t.name," - ",t.calories," kcal (",t.weight," g) ")}}function tde(n,e){if(1&n&&(k(0,"div",13)(1,"h4",16),wo(2,"date"),W(3),wo(4,"date"),x(),k(5,"div")(6,"h4"),W(7,"Treningi"),x(),Go(8,Xle,10,4,null,null,ps),x(),k(10,"div")(11,"h4"),W(12,"Posi\u0142ki"),x(),Go(13,ede,7,3,null,null,ps),x()()),2&n){const t=e.$implicit,r=Qe();ne(),Xt("routerLink",TA(8,Yle,Cl(2,2,t.date,"yyyy-MM-dd"))),ne(2),Qn(" ",Cl(4,5,t.date,"EEEE, d MMMM")," "),ne(5),qo(r.getTrainingsForDay(t.date)),ne(5),qo(r.getMealsForDay(t.date))}}!function bX(n,e,t){(function zK(n,e,t){"string"!=typeof e&&(t=e,e=n[An.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Xh[e]=n,t&&(Xh[e][An.ExtraData]=t)})(n,e,t)}(jue);let nde=(()=>{class n{constructor(){this.TrainingAndMealService=G(fp),this.meals=Wi([]),this.trainings=Wi([]),this.calendarDays=[],this.currentWeek=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.showModal=Wi(!1),this.selectedDay=null,this.dayNames=["Pn","Wt","\u015ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar(),this.generateWeek(new Date)}generateWeek(t){const r=new Date(t.setDate(t.getDate()-t.getDay()+1));this.currentWeek=[];for(let i=0;i<7;i++){const o=new Date(r);o.setDate(r.getDate()+i),this.currentWeek.push({date:o,isOtherMonth:!1})}}prevWeek(){const t=this.currentWeek[0].date,r=new Date(t.setDate(t.getDate()-7));this.generateWeek(r)}nextWeek(){const t=this.currentWeek[6].date,r=new Date(t.setDate(t.getDate()+1));this.generateWeek(r)}getWeekRange(){const r=this.currentWeek[6].date;return`${this.currentWeek[0].date.toLocaleDateString()} - ${r.toLocaleDateString()}`}selectDay(t){this.selectedDay=t,console.log("Wybrano dzie\u0144:",this.selectedDay),this.generateWeek(t)}loadData(){this.TrainingAndMealService.getTrainings().subscribe(t=>{const r=t.map((i,o)=>({...i,id:i.id||`training-${o}-${(new Date).getTime()}`,date:new Date(i.date)}));this.trainings.set(r)}),this.TrainingAndMealService.getMeals().subscribe(t=>{const r=t.map((i,o)=>({...i,id:i.id||`meal-${o}-${(new Date).getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}getMealsForDay(t){return this.meals().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}getTrainingsForDay(t){return this.trainings().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}generateCalendar(){const t=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),s=(t.getDay()||7)-1,c=7-(r.getDay()||7);this.calendarDays=[];for(let l=s;l>0;l--){const f=new Date(this.currentYear,this.currentMonth,1-l);this.calendarDays.push({date:f,isOtherMonth:!0})}for(let l=1;l<=i;l++){const f=new Date(this.currentYear,this.currentMonth,l);this.calendarDays.push({date:f,isOtherMonth:!1})}for(let l=1;l<=c;l++){const f=new Date(this.currentYear,this.currentMonth+1,l);this.calendarDays.push({date:f,isOtherMonth:!0})}}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}saveEditedMeal(t){this.TrainingAndMealService.updateMeal(t).then(()=>{this.meals.set(this.meals().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}editMeal(t){this.selectedMeal={...t}}closeModal(){this.showModal.set(!1)}saveEditedTraining(t){this.TrainingAndMealService.updateTraining(t).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited training:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 treningu. Spr\xf3buj ponownie.")})}editTraining(t){this.selectedTraining={...t}}deleteMeal(t){this.TrainingAndMealService.deleteMeal(t).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}deleteTraining(t){this.TrainingAndMealService.deleteTraining(t).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xf3buj ponownie.")})}toggleTrainingDone(t){const r={...t,isDone:!t.isDone};this.saveEditedTraining(r)}hasEventsForDay(t){return this.getMealsForDay(t).length>0||this.getTrainingsForDay(t).length>0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-calendar"]],standalone:!0,features:[Fn([{provide:La,useValue:"pl"}]),Yn],decls:35,vars:5,consts:[[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"layout-container"],[1,"monthly-calendar"],[1,"calendar-navigation"],[3,"click"],[1,"day-names"],[1,"calendar-days"],[3,"other-month","has-events"],[1,"weekly-view"],[1,"week-header"],[1,"week-days"],[1,"day-details"],[3,"Save","close","meal"],[3,"Save","close","training"],[3,"routerLink"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"change","checked"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"button",1),W(2," Dodaj Posi\u0142ek "),x(),k(3,"button",2),W(4," Dodaj Trening "),x()(),k(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),Le("click",function(){return i.prevMonth()}),W(9,"Poprzedni"),x(),k(10,"span"),W(11),x(),k(12,"button",6),Le("click",function(){return i.nextMonth()}),W(13,"Nast\u0119pny"),x()(),k(14,"div",7),Go(15,Jle,2,1,"span",null,ps),x(),k(17,"div",8),Go(18,Zle,2,5,"div",9,ps),x()(),k(20,"div",10)(21,"div",11)(22,"button",6),Le("click",function(){return i.prevWeek()}),W(23,"Poprzedni tydzie\u0144"),x(),k(24,"span"),W(25),x(),k(26,"button",6),Le("click",function(){return i.nextWeek()}),W(27,"Nast\u0119pny tydzie\u0144"),x()(),k(28,"div",12),Go(29,tde,15,10,"div",13,ps),x()()(),Wo(31,"app-meal-modal")(32,"app-training-modal"),k(33,"app-edit",14),Le("Save",function(s){return i.saveEditedMeal(s)})("close",function(){return i.closeModal()}),x(),k(34,"app-edit-training",15),Le("Save",function(s){return i.saveEditedTraining(s)})("close",function(){return i.closeModal()}),x()),2&r&&(ne(11),vA("",i.months[i.currentMonth]," ",i.currentYear,""),ne(4),qo(i.dayNames),ne(3),qo(i.calendarDays),ne(7),Qn(" ",i.getWeekRange()," "),ne(4),qo(i.currentWeek),ne(4),Xt("meal",i.selectedMeal),ne(),Xt("training",i.selectedTraining))},dependencies:[Zc,Hm,qle,nS,Tf,Wle,Kle,Qle,Zi],styles:[".calendar-container[_ngcontent-%COMP%], .layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;color:#333}.monthly-calendar[_ngcontent-%COMP%]{flex:0 1 350px;max-height:400px;overflow:hidden;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;display:flex;flex-direction:column;justify-content:space-between;background:var(--background-gradient)}.calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.day-names[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day-names[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;transition:background-color .3s}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.calendar-days[_ngcontent-%COMP%]   div.other-month[_ngcontent-%COMP%]{color:#aaa}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:1px solid #0056b3}.weekly-view[_ngcontent-%COMP%]{flex:2;padding:20px;background:#f8f8f8;height:900px;overflow-y:auto;border-radius:10px;box-shadow:0 2px 10px #0000001a}.week-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.day-details[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:8px;box-shadow:0 1px 5px #0000001a}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.day-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]{background-color:#d0e6e6}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]:hover{background-color:#b0d0d0}.btn-link[_ngcontent-%COMP%]{color:#000}.form-check-input[_ngcontent-%COMP%]{background-color:#000;border-color:#000}.form-check-label[_ngcontent-%COMP%]{color:#000}"]})}}return n})(),tG=(()=>{class n{constructor(){this.afAuth=G(iu),this.firestore=G(hp)}setGradient(t){const r=document.documentElement;switch(t){case"green":default:r.style.setProperty("--background-gradient","linear-gradient(135deg, #e0f7fa, #254636)"),r.style.setProperty("--button-background","#254636");break;case"pastel-lavender":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6E6FA, #F4F0FF)"),r.style.setProperty("--button-background","#D8BFD8");break;case"powder-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #D6ECFA, #B3D9FF)"),r.style.setProperty("--button-background","#A9CCE3");break;case"emerald-gold":r.style.setProperty("--background-gradient","linear-gradient(135deg, #50C878, #FFD700)"),r.style.setProperty("--button-background","#468847");break;case"cloud":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F0F4FF, #E1E9FF)"),r.style.setProperty("--button-background","#CBD7FF");break;case"dusty-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F5E3E0, #EAC0C1)"),r.style.setProperty("--button-background","#E8AFAF");break;case"powder-mint":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6F9F4, #D0F0E8)"),r.style.setProperty("--button-background","#B2E4D8");break;case"navy-ivory":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F9F8F6, #2C3E50)"),r.style.setProperty("--button-background","#34495E");break;case"cashmere-graphite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EFE1CE, #2F2F2F)"),r.style.setProperty("--button-background","#3C3C3C");break;case"pearl-ink":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F2F1F0, #1F2933)"),r.style.setProperty("--button-background","#20232A");break;case"beige-espresso":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F7F4ED, #4A332D)"),r.style.setProperty("--button-background","#3C2E2A");break;case"graphite-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FDE9E8, #3D3D3D)"),r.style.setProperty("--button-background","#7A6C6C");break;case"turquoise-alabaster":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EDF6F8, #005960)"),r.style.setProperty("--button-background","#003F45");break;case"burgundy-cream":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F8ECE5, #641E16)"),r.style.setProperty("--button-background","#922B21");break;case"platinum-coal":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E5E5E5, #222222)"),r.style.setProperty("--button-background","#333333");break;case"pearl-pink-anthracite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FCE4EC, #2B2B2B)"),r.style.setProperty("--button-background","#4C4C4C");break;case"opal-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E0E5EC, #5C87A3)"),r.style.setProperty("--button-background","#3B647A");break;case"mustard-caramel":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FFF5E1, #A67B5B)"),r.style.setProperty("--button-background","#8C6239")}this.saveUserTheme(t)}saveUserTheme(t){this.afAuth.currentUser.then(i=>{i&&this.firestore.collection("users-theme").doc(i.uid).set({theme:t},{merge:!0})})}loadUserTheme(t){this.firestore.collection("users-theme").doc(t).get().subscribe(r=>{if(r.exists){const o=r.data().theme;o&&this.setGradient(o)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const nG=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},rG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0;let y=(15&a)<<2|l>>6,I=63&l;c||(I=64,s||(y=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[y],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nG(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==l||null==m)throw new sde;r.push(o<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==m&&r.push(l<<6&192|m))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sde extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fb=function(n){return function(n){const e=nG(n);return rG.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Lb=function(n){try{return rG.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Vb=()=>{try{return function ude(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Lb(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},sG=()=>{var n;return null===(n=Vb())||void 0===n?void 0:n.config},aG=n=>{var e;return null===(e=Vb())||void 0===e?void 0:e[`_${n}`]};class cG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function oi(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class Su extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Su.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sy.prototype.create)}}class sy{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function bde(n,e){return n.replace(Tde,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Su(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Tde=/\{\$([^}]+)}/g;function Bb(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(lG(o)&&lG(s)){if(!Bb(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function lG(n){return null!==n&&"object"==typeof n}function ay(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cy(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function uy(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Dde{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Sde(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=tM),void 0===i.error&&(i.error=tM),void 0===i.complete&&(i.complete=tM);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tM(){}function Ru(n){return n&&n._delegate?n._delegate:n}class _p{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const dd="[DEFAULT]";class kde{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new cG;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Fde(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:dd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=dd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,S.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=dd){return this.instances.has(e)}getOptions(e=dd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===dd?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=dd){return this.component?this.component.multipleInstances?e:dd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Lde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kde(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const rM=[];var En=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(En||{});const dG={debug:En.DEBUG,verbose:En.VERBOSE,info:En.INFO,warn:En.WARN,error:En.ERROR,silent:En.SILENT},Vde=En.INFO,Ude={[En.DEBUG]:"log",[En.VERBOSE]:"log",[En.INFO]:"info",[En.WARN]:"warn",[En.ERROR]:"error"},Bde=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Ude[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class hG{constructor(e){this.name=e,this._logLevel=Vde,this._logHandler=Bde,this._userLogHandler=null,rM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in En))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?dG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,En.DEBUG,...e),this._logHandler(this,En.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,En.VERBOSE,...e),this._logHandler(this,En.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,En.INFO,...e),this._logHandler(this,En.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,En.WARN,...e),this._logHandler(this,En.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,En.ERROR,...e),this._logHandler(this,En.ERROR,...e)}}var jde=it(749);class $de{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function zde(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const jb="@firebase/app",iM="0.10.17",nc=new hG("@firebase/app"),Hde="@firebase/app-compat",Gde="@firebase/analytics-compat",qde="@firebase/analytics",Wde="@firebase/app-check-compat",Kde="@firebase/app-check",Qde="@firebase/auth",Yde="@firebase/auth-compat",Jde="@firebase/database",Zde="@firebase/data-connect",Xde="@firebase/database-compat",ehe="@firebase/functions",the="@firebase/functions-compat",nhe="@firebase/installations",rhe="@firebase/installations-compat",ihe="@firebase/messaging",ohe="@firebase/messaging-compat",she="@firebase/performance",ahe="@firebase/performance-compat",che="@firebase/remote-config",uhe="@firebase/remote-config-compat",lhe="@firebase/storage",dhe="@firebase/storage-compat",hhe="@firebase/firestore",fhe="@firebase/vertexai",phe="@firebase/firestore-compat",ghe="firebase",$b="[DEFAULT]",_he={[jb]:"fire-core",[Hde]:"fire-core-compat",[qde]:"fire-analytics",[Gde]:"fire-analytics-compat",[Kde]:"fire-app-check",[Wde]:"fire-app-check-compat",[Qde]:"fire-auth",[Yde]:"fire-auth-compat",[Jde]:"fire-rtdb",[Zde]:"fire-data-connect",[Xde]:"fire-rtdb-compat",[ehe]:"fire-fn",[the]:"fire-fn-compat",[nhe]:"fire-iid",[rhe]:"fire-iid-compat",[ihe]:"fire-fcm",[ohe]:"fire-fcm-compat",[she]:"fire-perf",[ahe]:"fire-perf-compat",[che]:"fire-rc",[uhe]:"fire-rc-compat",[lhe]:"fire-gcs",[dhe]:"fire-gcs-compat",[hhe]:"fire-fst",[phe]:"fire-fst-compat",[fhe]:"fire-vertex","fire-js":"fire-js",[ghe]:"fire-js-all"},hd=new Map,ly=new Map,dy=new Map;function fG(n,e){try{n.container.addComponent(e)}catch(t){nc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hy(n){const e=n.name;if(dy.has(e))return nc.debug(`There were multiple attempts to register component ${e}.`),!1;dy.set(e,n);for(const t of hd.values())fG(t,n);for(const t of ly.values())fG(t,n);return!0}function oM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Is(n){return void 0!==n.settings}const Zo=new sy("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class pG{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _p("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}const fy="11.1.0";function gG(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:$b,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Zo.create("bad-app-name",{appName:String(i)});if(t||(t=sG()),!t)throw Zo.create("no-options");const o=hd.get(i);if(o){if(Bb(t,o.options)&&Bb(r,o.config))return o;throw Zo.create("duplicate-app",{appName:i})}const s=new Lde(i);for(const c of dy.values())s.addComponent(c);const a=new pG(t,r,s);return hd.set(i,a),a}function fd(n,e,t){var r;let i=null!==(r=_he[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void nc.warn(a.join(" "))}hy(new _p(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const bhe="firebase-heartbeat-database",The=1,py="firebase-heartbeat-store";let aM=null;function mG(){return aM||(aM=(0,jde.P2)(bhe,The,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(py)}catch(t){console.warn(t)}}}).catch(n=>{throw Zo.create("idb-open",{originalErrorMessage:n.message})})),aM}function cM(){return(cM=(0,S.A)(function*(n){try{const t=(yield mG()).transaction(py),r=yield t.objectStore(py).get(yG(n));return yield t.done,r}catch(e){if(e instanceof Su)nc.warn(e.message);else{const t=Zo.create("idb-get",{originalErrorMessage:e?.message});nc.warn(t.message)}}})).apply(this,arguments)}function _G(n,e){return uM.apply(this,arguments)}function uM(){return(uM=(0,S.A)(function*(n,e){try{const r=(yield mG()).transaction(py,"readwrite");yield r.objectStore(py).put(e,yG(n)),yield r.done}catch(t){if(t instanceof Su)nc.warn(t.message);else{const r=Zo.create("idb-set",{originalErrorMessage:t?.message});nc.warn(r.message)}}})).apply(this,arguments)}function yG(n){return`${n.name}!${n.options.appId}`}class She{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Phe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,S.A)(function*(){var t,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vG();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){nc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,S.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=vG(),{heartbeatsToSend:i,unsentEntries:o}=function Rhe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),IG(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),IG(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Fb(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return nc.warn(r),""}})()}}function vG(){return(new Date).toISOString().substring(0,10)}class Phe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.A)(function*(){return!!function Ide(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Ede(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,S.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Che(n){return cM.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,S.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return _G(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,S.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return _G(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function IG(n){return Fb(JSON.stringify({version:2,heartbeats:n})).length}!function Mhe(n){hy(new _p("platform-logger",e=>new $de(e),"PRIVATE")),hy(new _p("heartbeat",e=>new She(e),"PRIVATE")),fd(jb,iM,n),fd(jb,iM,"esm2017"),fd("fire-js","")}("");const Nhe=function EG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wG=new sy("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zb=new hG("@firebase/auth");function Hb(n,...e){zb.logLevel<=En.ERROR&&zb.error(`Auth (${fy}): ${n}`,...e)}function Xi(n,...e){throw dM(n,...e)}function ki(n,...e){return dM(n,...e)}function lM(n,e,t){const r=Object.assign(Object.assign({},Nhe()),{[e]:t});return new sy("auth","Firebase",r).create(e,{appName:n.name})}function qr(n){return lM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dM(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wG.create(n,...e)}function Ce(n,e,...t){if(!n)throw dM(e,...t)}function da(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hb(e),new Error(e)}function rc(n,e){n||da(e)}function gy(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function bG(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function khe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function hM(){return"http:"===bG()||"https:"===bG()}()||function _de(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class my{constructor(e,t){this.shortDelay=e,this.longDelay=t,rc(t>e,"Short delay should be less than long delay!"),this.isMobile=function fde(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oi())}()||function yde(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return khe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fM(n,e){rc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class TG{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fhe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Lhe=new my(3e4,6e4);function Bn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function jn(n,e,t,r){return pM.apply(this,arguments)}function pM(){return(pM=(0,S.A)(function*(n,e,t,r,i={}){return CG(n,i,(0,S.A)(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=ay(Object.assign({key:n.config.apiKey},s)).slice(1),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const l=Object.assign({method:e,headers:c},o);return function mde(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(l.referrerPolicy="no-referrer"),TG.fetch()(AG(n,n.config.apiHost,t,a),l)}))})).apply(this,arguments)}function CG(n,e,t){return gM.apply(this,arguments)}function gM(){return(gM=(0,S.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fhe),e);try{const i=new Uhe(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw _y(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw _y(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw _y(n,"email-already-in-use",s);if("USER_DISABLED"===c)throw _y(n,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lM(n,f,l);Xi(n,f)}}catch(i){if(i instanceof Su)throw i;Xi(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function ic(n,e,t,r){return mM.apply(this,arguments)}function mM(){return(mM=(0,S.A)(function*(n,e,t,r,i={}){const o=yield jn(n,e,t,r,i);return"mfaPendingCredential"in o&&Xi(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function AG(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?fM(n.config,i):`${n.config.apiScheme}://${i}`}function Vhe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Uhe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),Lhe.get())})}}function _y(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ki(n,e,r);return i.customData._tokenResponse=t,i}function SG(n){return void 0!==n&&void 0!==n.enterprise}class RG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vhe(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function PG(n,e){return yM.apply(this,arguments)}function yM(){return(yM=(0,S.A)(function*(n,e){return jn(n,"GET","/v2/recaptchaConfig",Bn(n,e))})).apply(this,arguments)}function vM(){return(vM=(0,S.A)(function*(n,e){return jn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function MG(n,e){return EM.apply(this,arguments)}function EM(){return(EM=(0,S.A)(function*(n,e){return jn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function yy(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wM(){return(wM=(0,S.A)(function*(n,e=!1){const t=Ru(n),r=yield t.getIdToken(e),i=Gb(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yy(bM(i.auth_time)),issuedAtTime:yy(bM(i.iat)),expirationTime:yy(bM(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function bM(n){return 1e3*Number(n)}function Gb(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Hb("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lb(t);return i?JSON.parse(i):(Hb("Failed to decode base64 JWT payload"),null)}catch(i){return Hb("Caught error parsing JWT payload as JSON",i?.toString()),null}}function NG(n){const e=Gb(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function oc(n,e){return TM.apply(this,arguments)}function TM(){return(TM=(0,S.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Su&&function Hhe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Ghe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,S.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,S.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class CM{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yy(this.lastLoginAt),this.creationTime=yy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vy(n){return AM.apply(this,arguments)}function AM(){return(AM=(0,S.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield oc(n,MG(t,{idToken:r}));Ce(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?xG(o.providerUserInfo):[],a=function Whe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,s),f=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new CM(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)})).apply(this,arguments)}function DM(){return(DM=(0,S.A)(function*(n){const e=Ru(n);yield vy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function xG(n){return n.map(e=>{var{providerId:t}=e,r=(0,ja.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function SM(){return(SM=(0,S.A)(function*(n,e){const t=yield CG(n,{},(0,S.A)(function*(){const r=ay({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=AG(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",TG.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function RM(){return(RM=(0,S.A)(function*(n,e){return jn(n,"POST","/v2/accounts:revokeToken",Bn(n,e))})).apply(this,arguments)}class vp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(0!==e.length,"internal-error");const t=NG(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,S.A)(function*(){return t||!r.accessToken||r.isExpired?(Ce(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,S.A)(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Khe(n,e){return SM.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new vp;return r&&(Ce("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(Ce("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(Ce("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vp,this.toJSON())}_performRefresh(){return da("not implemented")}}function Pu(n,e){Ce("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class sc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,ja.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ghe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new CM(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,S.A)(function*(){const r=yield oc(t,t.stsTokenManager.getToken(t.auth,e));return Ce(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function zhe(n){return wM.apply(this,arguments)}(this,e)}reload(){return function qhe(n){return DM.apply(this,arguments)}(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,S.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield vy(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,S.A)(function*(){if(Is(e.auth.app))return Promise.reject(qr(e.auth));const t=yield e.getIdToken();return yield oc(e,function jhe(n,e){return vM.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,f;const m=null!==(r=t.displayName)&&void 0!==r?r:void 0,y=null!==(i=t.email)&&void 0!==i?i:void 0,I=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,b=null!==(s=t.photoURL)&&void 0!==s?s:void 0,D=null!==(a=t.tenantId)&&void 0!==a?a:void 0,R=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,B=null!==(l=t.createdAt)&&void 0!==l?l:void 0,L=null!==(f=t.lastLoginAt)&&void 0!==f?f:void 0,{uid:q,emailVerified:fe,isAnonymous:Te,providerData:Me,stsTokenManager:U}=t;Ce(q&&U,e,"internal-error");const N=vp.fromJSON(this.name,U);Ce("string"==typeof q,e,"internal-error"),Pu(m,e.name),Pu(y,e.name),Ce("boolean"==typeof fe,e,"internal-error"),Ce("boolean"==typeof Te,e,"internal-error"),Pu(I,e.name),Pu(b,e.name),Pu(D,e.name),Pu(R,e.name),Pu(B,e.name),Pu(L,e.name);const F=new sc({uid:q,auth:e,email:y,emailVerified:fe,displayName:m,isAnonymous:Te,photoURL:b,phoneNumber:I,tenantId:D,stsTokenManager:N,createdAt:B,lastLoginAt:L});return Me&&Array.isArray(Me)&&(F.providerData=Me.map(j=>Object.assign({},j))),R&&(F._redirectEventId=R),F}static _fromIdTokenResponse(e,t,r=!1){return(0,S.A)(function*(){const i=new vp;i.updateFromServerResponse(t);const o=new sc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vy(o),o})()}static _fromGetAccountInfoResponse(e,t,r){return(0,S.A)(function*(){const i=t.users[0];Ce(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?xG(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new vp;a.updateFromIdToken(r);const c=new sc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new CM(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,l),c})()}}const kG=new Map;function ac(n){rc(n instanceof Function,"Expected a class definition");let e=kG.get(n);return e?(rc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kG.set(n,e),e)}const OG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,S.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,S.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,S.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function qb(n,e,t){return`firebase:${n}:${e}:${t}`}class Ip{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=qb(this.userKey,i.apiKey,o),this.fullPersistenceKey=qb("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,S.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?sc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,S.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,S.A)(function*(){if(!t.length)return new Ip(ac(OG),e,r);const i=(yield Promise.all(t.map(function(){var l=(0,S.A)(function*(f){if(yield f._isAvailable())return f});return function(f){return l.apply(this,arguments)}}()))).filter(l=>l);let o=i[0]||ac(OG);const s=qb(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const f=yield l._get(s);if(f){const m=sc._fromJSON(e,f);l!==o&&(a=m),o=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return o._shouldAllowMigration&&c.length?(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var l=(0,S.A)(function*(f){if(f!==o)try{yield f._remove(s)}catch{}});return function(f){return l.apply(this,arguments)}}())),new Ip(o,e,r)):new Ip(o,e,r)})()}}function FG(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($G(e))return"Blackberry";if(zG(e))return"Webos";if(VG(e))return"Safari";if((e.includes("chrome/")||UG(e))&&!e.includes("edge/"))return"Chrome";if(jG(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function LG(n=oi()){return/firefox\//i.test(n)}function VG(n=oi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UG(n=oi()){return/crios\//i.test(n)}function BG(n=oi()){return/iemobile/i.test(n)}function jG(n=oi()){return/android/i.test(n)}function $G(n=oi()){return/blackberry/i.test(n)}function zG(n=oi()){return/webos/i.test(n)}function PM(n=oi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HG(n=oi()){return PM(n)||jG(n)||zG(n)||$G(n)||/windows phone/i.test(n)||BG(n)}function GG(n,e=[]){let t;switch(n){case"Browser":t=FG(oi());break;case"Worker":t=`${FG(oi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fy}/${r}`}class Zhe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,S.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function MM(){return(MM=(0,S.A)(function*(n,e={}){return jn(n,"GET","/v2/passwordPolicy",Bn(n,e))})).apply(this,arguments)}class tfe{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(t=c.meetsMinPasswordLength)||void 0===t||t),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class nfe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qG(this),this.idTokenSubscription=new qG(this),this.beforeStateQueue=new Zhe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ac(t)),this._initializationPromise=this.queue((0,S.A)(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Ip.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,S.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,S.A)(function*(){try{const r=yield MG(t,{idToken:e}),i=yield sc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,S.A)(function*(){var r;if(Is(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(c,c))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(o=l.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return Ce(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return(0,S.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,S.A)(function*(){try{yield vy(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ohe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,S.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,S.A)(function*(){if(Is(t.app))return Promise.reject(qr(t));const r=e?Ru(e):null;return r&&Ce(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,S.A)(function*(){if(!r._deleted)return e&&Ce(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,S.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,S.A)(function*(){return Is(e.app)?Promise.reject(qr(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return Is(this.app)?Promise.reject(qr(this)):this.queue((0,S.A)(function*(){yield t.assertedPersistence.setPersistence(ac(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,S.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,S.A)(function*(){const t=yield function Xhe(n){return MM.apply(this,arguments)}(e),r=new tfe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sy("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,S.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function Qhe(n,e){return RM.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,S.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,S.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&ac(e)||t._popupRedirectResolver;Ce(r,t,"argument-error"),t.redirectPersistenceManager=yield Ip.create(t,[ac(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,S.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,S.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,S.A)(function*(){if(e===t.currentUser)return t.queue((0,S.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var t=this;return(0,S.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,S.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return(0,S.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function xhe(n,...e){zb.logLevel<=En.WARN&&zb.warn(`Auth (${fy}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function _r(n){return Ru(n)}class qG{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Ade(n,e){const t=new Dde(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Iy={loadJS:()=>(0,S.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NM(n){return Iy.loadJS(n)}function WG(n){return`__${n}${Math.floor(1e6*Math.random())}`}class lfe{constructor(){this.enterprise=new dfe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dfe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ey="NO_RECAPTCHA";class KG{constructor(e){this.type="recaptcha-enterprise",this.auth=_r(e)}verify(e="verify",t=!1){var r=this;return(0,S.A)(function*(){function o(){return o=(0,S.A)(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=(0,S.A)(function*(l,f){PG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(void 0!==m.recaptchaKey){const y=new RG(m);return null==a.tenantId?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,l(y.siteKey)}f(new Error("recaptcha Enterprise site key undefined"))}).catch(m=>{f(m)})});return function(l,f){return c.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,c,l){const f=window.grecaptcha;SG(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(Ey)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return r.auth.settings.appVerificationDisabledForTesting?(new lfe).execute("siteKey",{action:"verify"}):new Promise((a,c)=>{(function i(a){return o.apply(this,arguments)})(r.auth).then(l=>{if(!t&&SG(window.grecaptcha))s(l,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));let f=function ofe(){return Iy.recaptchaEnterpriseScript}();0!==f.length&&(f+=l),NM(f).then(()=>{s(l,a,c)}).catch(m=>{c(m)})}}).catch(l=>{c(l)})})})()}}function wy(n,e,t){return xM.apply(this,arguments)}function xM(){return(xM=(0,S.A)(function*(n,e,t,r=!1,i=!1){const o=new KG(n);let s;if(i)s=Ey;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}const a=Object.assign({},e);return"mfaSmsEnrollment"===t||"mfaSmsSignIn"===t?("phoneEnrollmentInfo"in a?Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:a.phoneEnrollmentInfo.phoneNumber,recaptchaToken:a.phoneEnrollmentInfo.recaptchaToken,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in a&&Object.assign(a,{phoneSignInInfo:{recaptchaToken:a.phoneSignInInfo.recaptchaToken,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),a):(Object.assign(a,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a)})).apply(this,arguments)}function Mu(n,e,t,r,i){return kM.apply(this,arguments)}function kM(){return kM=(0,S.A)(function*(n,e,t,r,i){var o,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null!==(o=n._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=yield wy(n,e,t,"getOobCode"===t);return r(n,a)}return r(n,e).catch(function(){var a=(0,S.A)(function*(c){if("auth/missing-recaptcha-token"===c.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=yield wy(n,e,t,"getOobCode"===t);return r(n,l)}return Promise.reject(c)});return function(c){return a.apply(this,arguments)}}())}if("PHONE_PROVIDER"===i){if(null!==(s=n._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const a=yield wy(n,e,t);return r(n,a).catch(function(){var c=(0,S.A)(function*(l){var f;if("AUDIT"===(null===(f=n._getRecaptchaConfig())||void 0===f?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===l.code||"auth/invalid-app-credential"===l.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=yield wy(n,e,t,!1,!0);return r(n,m)}return Promise.reject(l)});return function(l){return c.apply(this,arguments)}}())}{const a=yield wy(n,e,t,!1,!0);return r(n,a)}}return Promise.reject(i+" provider is not supported.")}),kM.apply(this,arguments)}function YG(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function JG(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class by{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return da("not implemented")}_getIdTokenResponse(e){return da("not implemented")}_linkToIdToken(e,t){return da("not implemented")}_getReauthenticationResolver(e){return da("not implemented")}}function Efe(n,e){return VM.apply(this,arguments)}function VM(){return(VM=(0,S.A)(function*(n,e){return jn(n,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function bfe(n,e){return BM.apply(this,arguments)}function BM(){return(BM=(0,S.A)(function*(n,e){return ic(n,"POST","/v1/accounts:signInWithPassword",Bn(n,e))})).apply(this,arguments)}function qM(){return(qM=(0,S.A)(function*(n,e){return ic(n,"POST","/v1/accounts:signInWithEmailLink",Bn(n,e))})).apply(this,arguments)}function WM(){return(WM=(0,S.A)(function*(n,e){return ic(n,"POST","/v1/accounts:signInWithEmailLink",Bn(n,e))})).apply(this,arguments)}class Ty extends by{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ty(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ty(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,S.A)(function*(){switch(t.signInMethod){case"password":return Mu(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bfe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function Sfe(n,e){return qM.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Xi(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,S.A)(function*(){switch(r.signInMethod){case"password":return Mu(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Efe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function Rfe(n,e){return WM.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Xi(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function cc(n,e){return KM.apply(this,arguments)}function KM(){return(KM=(0,S.A)(function*(n,e){return ic(n,"POST","/v1/accounts:signInWithIdp",Bn(n,e))})).apply(this,arguments)}class Ep extends by{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ep(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=(0,ja.Tt)(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ep(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return cc(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ay(t)}return e}}class Ay{constructor(e){var t,r,i,o,s,a;const c=cy(uy(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,m=function Ofe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Ce(l&&f&&m,"argument-error"),this.apiKey=l,this.operation=m,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function Ffe(n){const e=cy(uy(n)).link,t=e?cy(uy(e)).deep_link_id:null,r=cy(uy(n)).deep_link_id;return(r?cy(uy(r)).link:null)||r||t||e||n}(e);try{return new Ay(t)}catch{return null}}}let e5=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ty._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=Ay.parseLink(r);return Ce(i,"argument-error"),Ty._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class uc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class t5 extends uc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Lfe=(()=>{class n extends t5{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ep._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function n5(n,e){return eN.apply(this,arguments)}function eN(){return(eN=(0,S.A)(function*(n,e){return ic(n,"POST","/v1/accounts:signUp",Bn(n,e))})).apply(this,arguments)}class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,S.A)(function*(){const o=yield sc._fromIdTokenResponse(e,r,i),s=r5(r);return new Xo({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,S.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=r5(r);return new Xo({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function r5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Yb extends Su{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yb.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Yb(e,t,r,i)}}function i5(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Yb._fromErrorAndOperation(n,o,e,r):o})}function iN(){return(iN=(0,S.A)(function*(n,e,t=!1){const r=yield oc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Xo._forOperation(n,"link",r)})).apply(this,arguments)}function sN(){return(sN=(0,S.A)(function*(n,e,t=!1){const{auth:r}=n;if(Is(r.app))return Promise.reject(qr(r));const i="reauthenticate";try{const o=yield oc(n,i5(r,i,e,n),t);Ce(o.idToken,r,"internal-error");const s=Gb(o.idToken);Ce(s,r,"internal-error");const{sub:a}=s;return Ce(n.uid===a,r,"user-mismatch"),Xo._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Xi(r,"user-mismatch"),o}})).apply(this,arguments)}function a5(n,e){return aN.apply(this,arguments)}function aN(){return(aN=(0,S.A)(function*(n,e,t=!1){if(Is(n.app))return Promise.reject(qr(n));const r="signIn",i=yield i5(n,r,e),o=yield Xo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function cN(n,e){return uN.apply(this,arguments)}function uN(){return(uN=(0,S.A)(function*(n,e){return a5(_r(n),e)})).apply(this,arguments)}function mN(n){return _N.apply(this,arguments)}function _N(){return(_N=(0,S.A)(function*(n){const e=_r(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function bN(){return(bN=(0,S.A)(function*(n,e,t){if(Is(n.app))return Promise.reject(qr(n));const r=_r(n),s=yield Mu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n5,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw"auth/password-does-not-meet-requirements"===c.code&&mN(n),c}),a=yield Xo._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})).apply(this,arguments)}const Xb="__sak";class d5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xb,"1"),this.storage.removeItem(Xb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ape=(()=>{class n extends d5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HG(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const i=t.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Jhe(){return function vde(){const n=oi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return(0,S.A)(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,S.A)(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return(0,S.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),h5=(()=>{class n extends d5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let upe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,S.A)(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const l=Array.from(c).map(function(){var m=(0,S.A)(function*(y){return y(i.origin,a)});return function(y){return m.apply(this,arguments)}}()),f=yield function cpe(n){return Promise.all(n.map(function(){var e=(0,S.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:f})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function eT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class lpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,S.A)(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{const f=eT("",20);o.port1.start();const m=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(y){const I=y;if(I.data.eventId===f)switch(I.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(m),clearTimeout(s),l(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:f,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Tr(){return window}function VN(){return typeof Tr().WorkerGlobalScope<"u"&&"function"==typeof Tr().importScripts}function UN(){return(UN=(0,S.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const f5="firebaseLocalStorageDb",tT="firebaseLocalStorage",p5="fbase_key";class Ry{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nT(n,e){return n.transaction([tT],e?"readwrite":"readonly").objectStore(tT)}function BN(){const n=indexedDB.open(f5,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(tT,{keyPath:p5})}catch(i){t(i)}}),n.addEventListener("success",(0,S.A)(function*(){const r=n.result;r.objectStoreNames.contains(tT)?e(r):(r.close(),yield function mpe(){const n=indexedDB.deleteDatabase(f5);return new Ry(n).toPromise()}(),e(yield BN()))}))})}function g5(n,e,t){return jN.apply(this,arguments)}function jN(){return(jN=(0,S.A)(function*(n,e,t){const r=nT(n,!0).put({[p5]:e,value:t});return new Ry(r).toPromise()})).apply(this,arguments)}function $N(){return($N=(0,S.A)(function*(n,e){const t=nT(n,!1).get(e),r=yield new Ry(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function m5(n,e){const t=nT(n,!0).delete(e);return new Ry(t).toPromise()}const Ipe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,S.A)(function*(){return t.db||(t.db=yield BN()),t.db})()}_withRetries(t){var r=this;return(0,S.A)(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,S.A)(function*(){return VN()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,S.A)(function*(){t.receiver=upe._getInstance(function ppe(){return VN()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,S.A)(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,S.A)(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,S.A)(function*(){var r,i;if(t.activeServiceWorker=yield function hpe(){return UN.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new lpe(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,S.A)(function*(){if(r.sender&&r.activeServiceWorker&&function fpe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.A)(function*(){try{if(!indexedDB)return!1;const t=yield BN();return yield g5(t,Xb,"1"),yield m5(t,Xb),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,S.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,S.A)(function*(){return i._withPendingWrite((0,S.A)(function*(){return yield i._withRetries(o=>g5(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,S.A)(function*(){const i=yield r._withRetries(o=>function _pe(n,e){return $N.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,S.A)(function*(){return r._withPendingWrite((0,S.A)(function*(){return yield r._withRetries(i=>m5(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,S.A)(function*(){const r=yield t._withRetries(s=>{const a=nT(s,!1).getAll();return new Ry(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,S.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function gd(n,e){return e?ac(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}WG("rcb"),new my(3e4,6e4);class XN extends by{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rpe(n){return a5(n.auth,new XN(n),n.bypassAuthState)}function Ppe(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),function s5(n,e){return sN.apply(this,arguments)}(t,new XN(n),n.bypassAuthState)}function Mpe(n){return ex.apply(this,arguments)}function ex(){return(ex=(0,S.A)(function*(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),function rN(n,e){return iN.apply(this,arguments)}(t,new XN(n),n.bypassAuthState)})).apply(this,arguments)}class y5{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,S.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,S.A)(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(l))}catch(f){t.reject(f)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rpe;case"linkViaPopup":case"linkViaRedirect":return Mpe;case"reauthViaPopup":case"reauthViaRedirect":return Ppe;default:Xi(this.auth,"internal-error")}}resolve(e){rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Npe=new my(2e3,1e4);function tx(){return(tx=(0,S.A)(function*(n,e,t){if(Is(n.app))return Promise.reject(ki(n,"operation-not-supported-in-this-environment"));const r=_r(n);!function yp(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Xi(n,"argument-error"),lM(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,uc);const i=gd(r,t);return new ix(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let ix=(()=>{class n extends y5{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,S.A)(function*(){const r=yield t.execute();return Ce(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,S.A)(function*(){rc(1===t.filter.length,"Popup operations only handle one event");const r=eT();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(ki(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,Npe.get())};t()}}return n.currentPopupAction=null,n})();const kpe="pendingRedirect",My=new Map;class Ope extends y5{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,S.A)(function*(){let r=My.get(t.auth._key());if(!r){try{const o=(yield function Fpe(n,e){return ox.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}My.set(t.auth._key(),r)}return t.bypassAuthState||My.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,S.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,S.A)(function*(){})()}cleanUp(){}}function ox(){return(ox=(0,S.A)(function*(n,e){const t=function I5(n){return qb(kpe,n.config.apiKey,n.name)}(e),r=function v5(n){return ac(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Lpe(n,e){My.set(n._key(),e)}function E5(n,e){return hx.apply(this,arguments)}function hx(){return(hx=(0,S.A)(function*(n,e,t=!1){if(Is(n.app))return Promise.reject(qr(n));const r=_r(n),i=gd(r,e),s=yield new Ope(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class $pe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function zpe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T5(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!T5(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ki(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(b5(e))}saveEventToCache(e){this.cachedEventUids.add(b5(e)),this.lastProcessedEventTime=Date.now()}}function b5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function T5({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function px(){return(px=(0,S.A)(function*(n,e={}){return jn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Gpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qpe=/^https?/;function gx(){return gx=(0,S.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function Hpe(n){return px.apply(this,arguments)}(n);for(const t of e)try{if(Kpe(t))return}catch{}Xi(n,"unauthorized-domain")}),gx.apply(this,arguments)}function Kpe(n){const e=gy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!qpe.test(t))return!1;if(Gpe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Qpe=new my(3e4,6e4);function C5(){const n=Tr().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let rT=null;const Zpe=new my(5e3,15e3),Xpe="__/auth/iframe",ege="emulator/auth/iframe",tge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rge(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fM(e,ege):`https://${n.config.authDomain}/${Xpe}`,r={apiKey:e.apiKey,appName:n.name,v:fy},i=nge.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ay(r).slice(1)}`}function mx(){return mx=(0,S.A)(function*(n){const e=yield function Jpe(n){return rT=rT||function Ype(n){return new Promise((e,t)=>{var r,i,o;function s(){C5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C5(),t(ki(n,"network-request-failed"))},timeout:Qpe.get()})}if(null!==(i=null===(r=Tr().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Tr().gapi)||void 0===o||!o.load){const a=WG("iframefcb");return Tr()[a]=()=>{gapi.load?s():t(ki(n,"network-request-failed"))},NM(`${function sfe(){return Iy.gapiScript}()}?onload=${a}`).catch(c=>t(c))}s()}}).catch(e=>{throw rT=null,e})}(n),rT}(n),t=Tr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:rge(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tge,dontclear:!0},r=>new Promise(function(){var i=(0,S.A)(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=ki(n,"network-request-failed"),c=Tr().setTimeout(()=>{s(a)},Zpe.get());function l(){Tr().clearTimeout(c),o(r)}r.ping(l).then(l,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),mx.apply(this,arguments)}const oge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class A5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const hge="__/auth/handler",fge="emulator/auth/handler",pge=encodeURIComponent("fac");function D5(n,e,t,r,i,o){return _x.apply(this,arguments)}function _x(){return(_x=(0,S.A)(function*(n,e,t,r,i,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fy,eventId:i};if(e instanceof uc){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",function Cde(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(o||{}))s[f]=m}if(e instanceof t5){const f=e.getScopes().filter(m=>""!==m);f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const f of Object.keys(a))void 0===a[f]&&delete a[f];const c=yield n._getAppCheckToken(),l=c?`#${pge}=${encodeURIComponent(c)}`:"";return`${function gge({config:n}){return n.emulator?fM(n,fge):`https://${n.authDomain}/${hge}`}(n)}?${ay(a).slice(1)}${l}`})).apply(this,arguments)}const yx="webStorageSupport",_ge=class mge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h5,this._completeRedirectFn=E5,this._overrideRedirectResult=Lpe}_openPopup(e,t,r,i){var o=this;return(0,S.A)(function*(){var s;rc(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield D5(e,t,r,gy(),i);return function lge(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},oge),{width:r.toString(),height:i.toString(),top:o,left:s}),l=oi().toLowerCase();t&&(a=UG(l)?"_blank":t),LG(l)&&(e=e||"http://localhost",c.scrollbars="yes");const f=Object.entries(c).reduce((y,[I,b])=>`${y}${I}=${b},`,"");if(function Yhe(n=oi()){var e;return PM(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function dge(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new A5(null);const m=window.open(e||"",a,f);Ce(m,n,"popup-blocked");try{m.focus()}catch{}return new A5(m)}(e,a,eT())})()}_openRedirect(e,t,r,i){var o=this;return(0,S.A)(function*(){return yield o._originValidation(e),function dpe(n){Tr().location.href=n}(yield D5(e,t,r,gy(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(rc(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,S.A)(function*(){const r=yield function ige(n){return mx.apply(this,arguments)}(e),i=new $pe(e);return r.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yx,{type:yx},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[yx];void 0!==s&&t(!!s),Xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Wpe(n){return gx.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HG()||VG()||PM()}};var M5="@firebase/auth";class yge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,S.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wge=aG("authIdTokenMaxAge")||300;let x5=null;const bge=n=>function(){var e=(0,S.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>wge)return;const o=r?.token;x5!==o&&(x5=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Ny(n=function Ehe(n=$b){const e=hd.get(n);if(!e&&n===$b&&sG())return gG();if(!e)throw Zo.create("no-app",{appName:n});return e}()){const e=oM(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function gfe(n,e){const t=oM(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Bb(t.getOptions(),e??{}))return i;Xi(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:_ge,persistence:[Ipe,ape,h5]}),r=aG("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=bge(o.toString());(function epe(n,e,t){Ru(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function Xfe(n,e,t,r){Ru(n).onIdTokenChanged(e,t,r)}(t,a=>s(a))}}const i=(n=>{var e,t;return null===(t=null===(e=Vb())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})("auth");return i&&function _fe(n,e,t){const r=_r(n);Ce(r._canInitEmulator,r,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=YG(e),{host:s,port:a}=function yfe(n){const e=YG(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:JG(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:JG(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function vfe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function rfe(n){Iy=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ki("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function Tge(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ige(n){hy(new _p("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ce(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GG(n)},l=new nfe(r,i,o,c);return function mfe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ac);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hy(new _p("auth-internal",e=>{const t=_r(e.getProvider("auth").getImmediate());return new yge(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fd(M5,"1.8.1",function vge(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),fd(M5,"1.8.1","esm2017")}("Browser");let xy=(()=>{class n{constructor(){this.currentUserSubject=new Y(null),this.themeService=G(tG),Ny().onAuthStateChanged(r=>{this.currentUserSubject.next(r),r&&this.themeService.loadUserTheme(r.uid)})}register(t,r){return function Hfe(n,e,t){return bN.apply(this,arguments)}(Ny(),t,r)}login(t,r){return function Gfe(n,e,t){return Is(n.app)?Promise.reject(qr(n)):cN(Ru(n),e5.credential(e,t)).catch(function(){var r=(0,S.A)(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&mN(n),i});return function(i){return r.apply(this,arguments)}}())}(Ny(),t,r)}loginWithGoogle(){return function xpe(n,e,t){return tx.apply(this,arguments)}(Ny(),new Lfe).then(i=>{const o=i.user;o&&this.themeService.loadUserTheme(o.uid)})}isAuthenticated(){return null!==this.currentUserSubject.value}logout(){return function tpe(n){return Ru(n).signOut()}(Ny())}getCurrentUser(){return this.currentUserSubject.asObservable()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Cge(n,e){1&n&&(k(0,"p"),W(1,"Nazwa u\u017cytkownika jest wymagana."),x())}function Age(n,e){1&n&&(k(0,"p"),W(1," Nazwa u\u017cytkownika mo\u017ce zawiera\u0107 tylko ma\u0142e litery i cyfry oraz musi zaczyna\u0107 si\u0119 od litery. "),x())}function Dge(n,e){if(1&n&&(k(0,"div",10),zn(1,Cge,2,0,"p")(2,Age,2,0,"p"),x()),2&n){Qe();const t=Ys(4);ne(),en(null!=t.errors&&t.errors.required?1:-1),ne(),en(null!=t.errors&&t.errors.pattern?2:-1)}}function Sge(n,e){if(1&n){const t=Ir();k(0,"div",7)(1,"label",15),W(2,"Nazwa u\u017cytkownika"),x(),k(3,"input",16,3),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.username,i)||(o.username=i),lt(i)}),x(),zn(5,Dge,3,2,"div",10),x()}if(2&n){const t=Ys(4),r=Qe();ne(3),Pt("ngModel",r.username),ne(2),en(null!=t&&t.touched&&null!=t&&t.invalid?5:-1)}}function Rge(n,e){1&n&&(k(0,"p"),W(1,"E-mail jest wymagany."),x())}function Pge(n,e){if(1&n&&(k(0,"div",10),zn(1,Rge,2,0,"p"),x()),2&n){Qe();const t=Ys(10);ne(),en(null!=t.errors&&t.errors.required?1:-1)}}function Mge(n,e){1&n&&(k(0,"p"),W(1,"Has\u0142o jest wymagane."),x())}function Nge(n,e){1&n&&(k(0,"p"),W(1," Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 ma\u0142\u0105 liter\u0119, jedn\u0105 wielk\u0105 liter\u0119, jedn\u0105 cyfr\u0119, jeden znak specjalny i musi mie\u0107 co najmniej 6 znak\xf3w d\u0142ugo\u015bci. "),x())}function xge(n,e){if(1&n&&(k(0,"div",10),zn(1,Mge,2,0,"p")(2,Nge,2,0,"p"),x()),2&n){Qe();const t=Ys(16);ne(),en(null!=t.errors&&t.errors.required?1:-1),ne(),en(null!=t.errors&&t.errors.pattern?2:-1)}}function kge(n,e){1&n&&(k(0,"p"),W(1,"Potwierdzenie has\u0142a jest wymagane."),x())}function Oge(n,e){if(1&n&&(k(0,"div",10),zn(1,kge,2,0,"p"),x()),2&n){Qe();const t=Ys(4);ne(),en(null!=t.errors&&t.errors.required?1:-1)}}function Fge(n,e){1&n&&(k(0,"div",10)(1,"p"),W(2,"Has\u0142a nie s\u0105 zgodne."),x()())}function Lge(n,e){if(1&n){const t=Ir();k(0,"div",7)(1,"label",17),W(2,"Potwierd\u017a has\u0142o"),x(),k(3,"input",18,4),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.confirmPassword,i)||(o.confirmPassword=i),lt(i)}),x(),zn(5,Oge,2,1,"div",10)(6,Fge,3,0,"div",10),x()}if(2&n){const t=Ys(4),r=Qe();ne(3),Pt("ngModel",r.confirmPassword),ne(2),en(t.touched&&t.invalid?5:-1),ne(),en(r.password!==r.confirmPassword&&t.touched?6:-1)}}let k5=(()=>{class n{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.confirmPassword="",this.username="",this.emailChange=new Ot,this.passwordChange=new Ot,this.confirmPasswordChange=new Ot,this.usernameChange=new Ot,this.googleLogin=new Ot,this.formSubmit=new Ot}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onConfirmPasswordChange(){this.confirmPasswordChange.emit(this.confirmPassword)}onUsernameChange(){this.usernameChange.emit(this.username)}onSubmit(){this.isLogin?this.email&&this.password?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o."):this.email&&this.username&&this.password&&this.password===this.confirmPassword?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}onGoogleLogin(){this.googleLogin.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password",confirmPassword:"confirmPassword",username:"username"},outputs:{emailChange:"emailChange",passwordChange:"passwordChange",confirmPasswordChange:"confirmPasswordChange",usernameChange:"usernameChange",googleLogin:"googleLogin",formSubmit:"formSubmit"},standalone:!0,features:[Yn],decls:23,vars:9,consts:[["authForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],["usernameField","ngModel"],["confirmPasswordField","ngModel"],[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-]).{6,}$",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"disabled"],["type","button",1,"btn","google-login",3,"click"],["for","username"],["id","username","type","text","name","username","required","","pattern","^[a-z][a-z0-9]*$","placeholder","Wpisz nazw\u0119 u\u017cytkownika",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","","placeholder","Potwierd\u017a has\u0142o",3,"ngModelChange","ngModel"]],template:function(r,i){if(1&r){const o=Ir();k(0,"div",5)(1,"h2"),W(2),x(),k(3,"form",6,0),Le("ngSubmit",function(){return pt(o),lt(i.onSubmit())}),zn(5,Sge,6,2,"div",7),k(6,"div",7)(7,"label",8),W(8,"E-mail"),x(),k(9,"input",9,1),Mt("ngModelChange",function(a){return pt(o),Et(i.email,a)||(i.email=a),lt(a)}),x(),zn(11,Pge,2,1,"div",10),x(),k(12,"div",7)(13,"label",11),W(14,"Has\u0142o"),x(),k(15,"input",12,2),Mt("ngModelChange",function(a){return pt(o),Et(i.password,a)||(i.password=a),lt(a)}),x(),zn(17,xge,3,2,"div",10),x(),zn(18,Lge,7,3,"div",7),k(19,"button",13),W(20),x(),k(21,"button",14),Le("click",function(){return pt(o),lt(i.onGoogleLogin())}),W(22," Zaloguj przez Google "),x()()()}if(2&r){const o=Ys(4),s=Ys(10),a=Ys(16);ne(2),Hn(i.isLogin?"Logowanie":"Rejestracja"),ne(3),en(i.isLogin?-1:5),ne(4),Pt("ngModel",i.email),ne(2),en(s.touched&&s.invalid?11:-1),ne(4),Pt("ngModel",i.password),ne(2),en(a.touched&&a.invalid?17:-1),ne(),en(i.isLogin?-1:18),ne(),Xt("disabled",o.invalid),ne(),Qn(" ",i.buttonText," ")}},dependencies:[Zi,oy,la,Du,ey,ld,XP,tc,ad],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:var(--background-gradient);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:var(--button-background, #254636);color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return n})(),Vge=(()=>{class n{constructor(){this.router=G($r),this.authService=G(xy),this.cdr=G(Al),this.email="",this.password="",this.isLogin=!0}login({email:t,password:r}){console.log("Attempting to log in with email:",t),t&&r?this.authService.login(t,r).then(()=>{console.log("Login successful, navigating to /home"),this.router.navigate(["/home"]),this.cdr.detectChanges()}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}loginWithGoogle(){this.authService.loginWithGoogle().then(()=>{console.log("Zalogowano za pomoc\u0105 Google")}).catch(t=>{console.error("B\u0142\u0105d logowania przez Google: ",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-login"]],standalone:!0,features:[Yn],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","googleLogin","isLogin","buttonText","email","password"]],template:function(r,i){1&r&&(k(0,"app-auth-form",0),Mt("emailChange",function(s){return Et(i.email,s)||(i.email=s),s})("passwordChange",function(s){return Et(i.password,s)||(i.password=s),s}),Le("formSubmit",function(s){return i.login(s)})("googleLogin",function(){return i.loginWithGoogle()}),x()),2&r&&(Xt("isLogin",!0)("buttonText","Zaloguj si\u0119"),Pt("email",i.email)("password",i.password))},dependencies:[Zi,k5]})}}return n})(),Uge=(()=>{class n{constructor(){this.email="",this.password="",this.confirmPassword="",this.username="",this.authService=G(xy),this.router=G($r)}register({email:t,password:r,confirmPassword:i,username:o}){t&&r&&o?r===i?this.authService.register(t,r).then(()=>{this.router.navigate(["/home"]),console.log(`Zarejestrowano pomy\u015blnie u\u017cytkownika: ${o}`)}).catch(s=>{console.error("B\u0142\u0105d rejestracji:",s.message)}):console.error("Has\u0142a nie s\u0105 zgodne."):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-register"]],standalone:!0,features:[Yn],decls:1,vars:6,consts:[[3,"emailChange","passwordChange","confirmPasswordChange","usernameChange","formSubmit","isLogin","buttonText","email","password","confirmPassword","username"]],template:function(r,i){1&r&&(k(0,"app-auth-form",0),Mt("emailChange",function(s){return Et(i.email,s)||(i.email=s),s})("passwordChange",function(s){return Et(i.password,s)||(i.password=s),s})("confirmPasswordChange",function(s){return Et(i.confirmPassword,s)||(i.confirmPassword=s),s})("usernameChange",function(s){return Et(i.username,s)||(i.username=s),s}),Le("formSubmit",function(s){return i.register(s)}),x()),2&r&&(Xt("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Pt("email",i.email)("password",i.password)("confirmPassword",i.confirmPassword)("username",i.username))},dependencies:[Zi,k5]})}}return n})();const lc=()=>{const n=G(xy),e=G($r);return console.log("AuthGuard: Checking authentication status"),n.isAuthenticated()?(console.log("AuthGuard: User is authenticated"),!0):(console.log("AuthGuard: User is not authenticated, redirecting to /login"),e.navigate(["/login"]),!1)},O5_firebaseConfig={apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"};let Bge=(()=>{class n{constructor(){this.http=G(WU),this.apiUrl="https://www.googleapis.com/youtube/v3"}getVideoDetails(t){return this.http.get(`https://www.googleapis.com/youtube/v3/videos?id=${t}&part=snippet,contentDetails,statistics&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}searchVideos(t,r=10){return this.http.get(`${this.apiUrl}/search?part=snippet&q=${t}&maxResults=${r}&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),L5=(()=>{class n{constructor(){this.client=G(hp),this.afAuth=G(iu)}saveTdee(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("calorie-calculations").add({...t,uid:r.uid,date:(new Date).toISOString()}).then(()=>console.log("Calorie calculation saved")).catch(i=>console.error("Error saving calorie calculation:",i)):Promise.reject("User not authenticated"))}loadTdee(){return new Dt(t=>{this.afAuth.currentUser.then(r=>{r?this.client.collection("calorie-calculations",i=>i.where("uid","==",r.uid).orderBy("date","desc").limit(1)).get().subscribe(i=>{if(i.empty)t.next(null);else{const o=i.docs[0].data();t.next(o)}}):t.error("User not authenticated")})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jge=(()=>{class n{transform(t,r,i){return i-t.reduce((a,c)=>a+(c.calories||0),0)+r.reduce((a,c)=>a+(c.burnedKcal||0),0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Sr({name:"caloriesBalance",type:n,pure:!0,standalone:!0})}}return n})();const $ge=(n,e)=>e.id;function zge(n,e){1&n&&(k(0,"p"),W(1,"Nie przekroczy\u0142e\u015b zapotrzebowania kalorycznego"),x())}function Hge(n,e){1&n&&(k(0,"p",7),W(1,"Przekroczy\u0142e\u015b zapotrzebowanie kaloryczne"),x())}function Gge(n,e){if(1&n&&(k(0,"div",2)(1,"h3"),W(2,"Balans kaloryczny:"),x(),k(3,"p",6),W(4),wo(5,"caloriesBalance"),wo(6,"number"),x(),zn(7,zge,2,0,"p"),wo(8,"caloriesBalance"),zn(9,Hge,2,0,"p",7),x()),2&n){const t=Qe();ne(4),Qn(" ",Cl(6,6,CA(5,2,t.meals(),t.trainings(),t.tdee),"1.0-0")," kcal "),ne(3),en(CA(8,9,t.meals(),t.trainings(),t.tdee)>0?7:9)}}function qge(n,e){if(1&n&&(k(0,"li",9)(1,"span",10),W(2),x(),W(3," - "),k(4,"span",11),W(5),x(),W(6),x()),2&n){const t=e.$implicit;ne(2),Hn(t.name),ne(3),Qn("",t.calories," kcal"),ne(),Qn(" (",t.weight," g) ")}}function Wge(n,e){if(1&n&&(k(0,"div",3)(1,"h3"),W(2,"Meals:"),x(),k(3,"ul",8),Go(4,qge,7,3,"li",9,ps),x()()),2&n){const t=Qe();ne(4),qo(t.meals())}}function Kge(n,e){if(1&n&&(k(0,"li",13)(1,"span",14),W(2),x(),W(3," - "),k(4,"span",15),W(5),x(),W(6),x()),2&n){const t=e.$implicit;ne(2),Hn(t.name),ne(3),Qn("",t.burnedKcal," kcal"),ne(),Qn(" (",t.time," min) ")}}function Qge(n,e){if(1&n&&(k(0,"div",4)(1,"h3"),W(2,"Trainings:"),x(),k(3,"ul",12),Go(4,Kge,7,3,"li",13,$ge),x()()),2&n){const t=Qe();ne(4),qo(t.trainings())}}function Yge(n,e){if(1&n&&(k(0,"div",5)(1,"h3"),W(2,"Watch the video:"),x(),Wo(3,"iframe",16),x()),2&n){const t=Qe();ne(3),Xt("src",t.videoUrl,CI)}}function Jge(n,e){1&n&&(k(0,"p"),W(1,"No video available for this training."),x())}let Zge=(()=>{class n{constructor(){this.day=Wi(null),this.meals=Wi([]),this.trainings=Wi([]),this.tdee=0,this.calorieService=G(L5),this.youtubeService=G(Bge),this.route=G(ru),this.trainingAndMealService=G(fp),this.videoDetails=null,this.videoId=null,this.sanitizer=G(SD),this.videoUrl=null,this.calorieData={tdee:0},this.route.paramMap.subscribe(t=>{const r=t.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){const i=new Date(r);this.day.set(i),this.loadDetails(i)}}),this.loadTdeeFromFirebase()}loadDetails(t){this.trainingAndMealService.getMealsByDate(t).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(t).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r),this.checkForVideo(r)})}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}checkForVideo(t){const r=t.find(i=>i.videoLink);r?(console.log("Training with video link found:",r),this.videoId=this.extractVideoId(r.videoLink),this.videoId?this.loadVideoDetails(this.videoId):(console.error("Brak ID wideo w linku"),this.videoUrl=null)):(console.log("Brak linku do wideo"),this.videoId=null,this.videoDetails=null,this.videoUrl=null)}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}loadVideoDetails(t){t&&this.youtubeService.getVideoDetails(t).subscribe(r=>{console.log("Odpowied\u017a z YouTube:",r),r.items&&r.items.length>0?(this.videoDetails=r.items[0],this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${t}`)):(console.error("Brak wynik\xf3w dla wideo"),this.videoDetails=null,this.videoUrl=null)},r=>{console.error("B\u0142\u0105d \u0142adowania wideo:",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-day-details"]],standalone:!0,features:[Yn],decls:9,vars:8,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"meals"],[1,"trainings"],[1,"youtube-video"],[1,"balance-value"],[1,"text-danger"],[1,"meal-list"],[1,"meal-item"],[1,"meal-name"],[1,"meal-calories"],[1,"training-list"],[1,"training-item"],[1,"training-name"],[1,"training-burned"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h2",1),W(2),wo(3,"date"),x(),zn(4,Gge,10,13,"div",2)(5,Wge,6,0,"div",3)(6,Qge,6,0,"div",4)(7,Yge,4,1,"div",5)(8,Jge,2,0,"p"),x()),2&r&&(ne(2),Qn("Details for ",Cl(3,5,i.day(),"fullDate"),""),ne(2),en(i.tdee?4:-1),ne(),en(i.meals().length>0?5:-1),ne(),en(i.trainings().length>0?6:-1),ne(),en(i.videoUrl?7:8))},dependencies:[Hm,jge,Zc,uD],styles:[".day-details[_ngcontent-%COMP%]{background:var(--background-gradient);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:800px;margin:30px auto;color:#fff}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.meals[_ngcontent-%COMP%], .trainings[_ngcontent-%COMP%]{background-color:#fffc;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d}.meal-list[_ngcontent-%COMP%], .training-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0;color:#333}.meal-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.meal-name[_ngcontent-%COMP%], .training-name[_ngcontent-%COMP%]{color:#006400}.meal-calories[_ngcontent-%COMP%], .training-burned[_ngcontent-%COMP%]{color:#d32f2f}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1rem}.youtube-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;margin:0 auto}}"]})}}return n})(),Xge=(()=>{class n{constructor(){this.client=G(hp),this.afAuth=G(iu)}addMeasurement(t){return new Promise((r,i)=>{this.afAuth.currentUser.then(o=>{const s=o?.uid;s?this.client.collection("measurements").add({...t,uid:s,date:t.date.toString()}).then(()=>{console.log("Measurement added successfully"),r()}).catch(a=>{console.error("Error adding measurement:",a),i(a)}):i(new Error("No user found"))}).catch(o=>{console.error("Error getting user:",o),i(o)})})}getMeasurements(){return new Dt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("measurements",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{t.next(o)}):t.next([])}).catch(()=>t.next([]))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eme(n,e){if(1&n&&(k(0,"tr")(1,"td"),W(2),x(),k(3,"td"),W(4),x(),k(5,"td",8),W(6),x(),k(7,"td",8),W(8),x(),k(9,"td",8),W(10),x(),k(11,"td",8),W(12),x(),k(13,"td",8),W(14),x(),k(15,"td",8),W(16),x()()),2&n){const t=e.$implicit,r=e.$index,i=Qe(2);ne(2),Hn(t.date),ne(2),Hn(t.weight),ne(),Xt("ngStyle",i.getStyle(t,r,"waist")),ne(),Hn(t.waist),ne(),Xt("ngStyle",i.getStyle(t,r,"hips")),ne(),Hn(t.hips),ne(),Xt("ngStyle",i.getStyle(t,r,"thigh")),ne(),Hn(t.thigh),ne(),Xt("ngStyle",i.getStyle(t,r,"buttocks")),ne(),Hn(t.buttocks),ne(),Xt("ngStyle",i.getStyle(t,r,"arms")),ne(),Hn(t.arms),ne(),Xt("ngStyle",i.getStyle(t,r,"chest")),ne(),Hn(t.chest)}}function tme(n,e){if(1&n&&(k(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),W(5,"Data"),x(),k(6,"th"),W(7,"Waga (kg)"),x(),k(8,"th"),W(9,"Talia (cm)"),x(),k(10,"th"),W(11,"Biodra (cm)"),x(),k(12,"th"),W(13,"Uda (cm)"),x(),k(14,"th"),W(15,"Po\u015bladki (cm)"),x(),k(16,"th"),W(17,"Ramiona (cm)"),x(),k(18,"th"),W(19,"Klatka piersiowa (cm)"),x()()(),k(20,"tbody"),Go(21,eme,17,14,"tr",null,ps),x()()()),2&n){const t=Qe();ne(21),qo(t.measurements)}}function nme(n,e){if(1&n){const t=Ir();k(0,"div",7)(1,"form",9),Le("ngSubmit",function(){return pt(t),lt(Qe().addMeasurement())}),k(2,"div",10)(3,"label",11),W(4,"Data:"),x(),k(5,"input",12),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.date,i)||(o.newMeasurement.date=i),lt(i)}),x()(),k(6,"div",10)(7,"label",13),W(8,"Talia:"),x(),k(9,"input",14),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.waist,i)||(o.newMeasurement.waist=i),lt(i)}),x()(),k(10,"div",10)(11,"label",15),W(12,"Biodra:"),x(),k(13,"input",16),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.hips,i)||(o.newMeasurement.hips=i),lt(i)}),x()(),k(14,"div",10)(15,"label",17),W(16,"Po\u015bladki:"),x(),k(17,"input",18),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.buttocks,i)||(o.newMeasurement.buttocks=i),lt(i)}),x()(),k(18,"div",10)(19,"label",19),W(20,"Uda:"),x(),k(21,"input",20),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.thigh,i)||(o.newMeasurement.thigh=i),lt(i)}),x()(),k(22,"div",10)(23,"label",21),W(24,"Ramiona:"),x(),k(25,"input",22),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.arms,i)||(o.newMeasurement.arms=i),lt(i)}),x()(),k(26,"div",10)(27,"label",23),W(28,"Klatka piersiowa:"),x(),k(29,"input",24),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.chest,i)||(o.newMeasurement.chest=i),lt(i)}),x()(),k(30,"div",10)(31,"label",25),W(32,"Waga:"),x(),k(33,"input",26),Mt("ngModelChange",function(i){pt(t);const o=Qe();return Et(o.newMeasurement.weight,i)||(o.newMeasurement.weight=i),lt(i)}),x()(),k(34,"div",10)(35,"button",27),W(36,"Dodaj pomiar"),x()()()()}if(2&n){const t=Qe();ne(5),Pt("ngModel",t.newMeasurement.date),ne(4),Pt("ngModel",t.newMeasurement.waist),ne(4),Pt("ngModel",t.newMeasurement.hips),ne(4),Pt("ngModel",t.newMeasurement.buttocks),ne(4),Pt("ngModel",t.newMeasurement.thigh),ne(4),Pt("ngModel",t.newMeasurement.arms),ne(4),Pt("ngModel",t.newMeasurement.chest),ne(4),Pt("ngModel",t.newMeasurement.weight)}}let V5=(()=>{class n{constructor(t){this.measurementsService=t,this.measurements=[],this.isFormVisible=!1,this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}ngOnInit(){this.loadMeasurements()}loadMeasurements(){this.measurementsService.getMeasurements().subscribe(t=>{this.measurements=t})}addMeasurement(){this.measurementsService.addMeasurement(this.newMeasurement).then(()=>{this.loadMeasurements()}),this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}calculateChange(t,r){return 0===r?"-":(t.weight-this.measurements[r-1].weight).toFixed(2)}getStyle(t,r,i){if(0===r)return{};const s=t[i],a=this.measurements[r-1][i];if("number"==typeof s&&"number"==typeof a){const c=s-a;return c>0?{color:"red"}:c<0?{color:"green"}:{color:"black"}}return{}}toggleForm(){this.isFormVisible=!this.isFormVisible}static{this.\u0275fac=function(r){return new(r||n)(Ie(Xge))}}static{this.\u0275cmp=xn({type:n,selectors:[["app-weight-control"]],standalone:!0,features:[Yn],decls:10,vars:2,consts:[[1,"measurements-summary"],[1,"justify-content-center"],[1,"measurements-content"],[1,"measurements-table"],[4,"ngIf"],[1,"btn-container"],[1,"btn-toggle",3,"click"],[1,"measurement-form-container"],[3,"ngStyle"],[1,"measurement-form",3,"ngSubmit"],[1,"form-group"],["for","date"],["type","date","id","date","name","date","required","",3,"ngModelChange","ngModel"],["for","waist"],["type","number","id","waist","name","waist","required","",3,"ngModelChange","ngModel"],["for","hips"],["type","number","id","hips","name","hips","required","",3,"ngModelChange","ngModel"],["for","buttocks"],["type","number","id","buttocks","name","buttocks","required","",3,"ngModelChange","ngModel"],["for","thigh"],["type","number","id","thigh","name","thigh","required","",3,"ngModelChange","ngModel"],["for","arms"],["type","number","id","arms","name","arms","required","",3,"ngModelChange","ngModel"],["for","chest"],["type","number","id","chest","name","chest","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h3",1),W(2,"Zestawienie Pomiar\xf3w cia\u0142a:"),x(),k(3,"div",2)(4,"div",3),zn(5,tme,23,0,"div",4),x(),k(6,"div",5)(7,"button",6),Le("click",function(){return i.toggleForm()}),W(8,"Dodaj pomiar"),x()(),zn(9,nme,37,8,"div",7),x()()),2&r&&(ne(5),Xt("ngIf",i.measurements.length>1),ne(4),en(i.isFormVisible?9:-1))},dependencies:[Zi,oy,la,cd,Du,ey,ld,tc,ad,Zc,fU,mU],styles:[".measurements-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.measurements-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.measurements-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.measurement-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .measurement-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}@media (max-width: 768px){.measurement-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.justify-content-center[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{text-align:center;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .btn-toggle[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:auto;margin:0 auto}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}"]})}}return n})(),rme=(()=>{class n{constructor(){this.meals=Wi([]),this.trainings=Wi([]),this.currentMonth=new Date,this.trainingAndMealService=G(fp),this.cdr=G(Al),this.loadMonthlyDetails()}changeMonth(t){const r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+t),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){const t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(t,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(t,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().filter(i=>!0===i.isDone).reduce((i,o)=>i+(o.burnedKcal?Number(o.burnedKcal):0),0)}totalTrainingTime(){const r=this.trainings().filter(i=>!0===i.isDone);return console.log("Completed Trainings:",r),r.reduce((i,o)=>{const s=o.time?Number(o.time):0;return console.log("Training Time:",s),i+(isNaN(s)?0:s)},0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-monthly-summary"]],standalone:!0,features:[Yn],decls:24,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Le("click",function(){return i.changeMonth(-1)}),W(4," \u2190 Poprzedni miesi\u0105c "),x(),k(5,"h2",4),W(6),wo(7,"date"),x(),k(8,"button",3),Le("click",function(){return i.changeMonth(1)}),W(9," Nast\u0119pny miesi\u0105c \u2192 "),x()(),k(10,"div",5)(11,"p")(12,"strong"),W(13,"\u0141\u0105czna liczba kalorii:"),x(),W(14),x(),k(15,"p")(16,"strong"),W(17,"\u0141\u0105czna liczba spalonych kalorii:"),x(),W(18),x(),k(19,"p")(20,"strong"),W(21,"\u0141\u0105czny czas trening\xf3w:"),x(),W(22),x()()()(),Wo(23,"app-weight-control")),2&r&&(ne(6),Qn(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",Cl(7,4,i.currentMonth,"MMMM yyyy")," "),ne(8),Qn(" ",i.totalCalories()," kcal"),ne(4),Qn(" ",i.totalBurnedCalories()," kcal "),ne(4),Qn(" ",i.totalTrainingTime()," min "))},dependencies:[Hm,V5],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.monthly-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.monthly-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.monthly-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .monthly-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:8px 16px;border-radius:5px;font-size:14px;cursor:pointer;width:auto;margin:0 auto}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636);transform:scale(1.05)}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px;font-size:16px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333;margin:0 20px}"]})}}return n})(),Ix=(()=>{class n{constructor(){this.client=G(hp),this.afAuth=G(iu)}getAllFitnessPlans(){return this.client.collection("FitnessPlans").valueChanges()}createFitnessPlan(t){const r={...t};this.client.collection("FitnessPlans").add(r).then(()=>console.log("Plan fitness dodany")).catch(i=>console.error("B\u0142\u0105d przy dodawaniu planu fitness",i))}getFitnessPlanById(t){return this.client.collection("FitnessPlans",r=>r.where("id","==",t)).valueChanges().pipe(Ve(r=>r.length>0?r[0]:void 0),jr(r=>{console.log("Fetched Plan Data from Firestore:",r)}),Ve(r=>{if(r)return r;console.log("Brak planu dla podanego ID:",t)}))}updateFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t.id)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).update(t).then(()=>console.log("Plan fitness zaktualizowany")).catch(o=>console.error("B\u0142\u0105d przy aktualizacji planu fitness",o))})})}deleteFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).delete().then(()=>console.log("Plan fitness usuni\u0119ty")).catch(o=>console.error("B\u0142\u0105d przy usuwaniu planu fitness",o))})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ime(n,e){if(1&n){const t=Ir();k(0,"div",5)(1,"div",7)(2,"input",8),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.videoLink,i)||(o.videoLink=i),lt(i)}),x(),k(3,"input",9),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.time,i)||(o.time=i),lt(i)}),x(),k(4,"input",10),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.burnedKcal,i)||(o.burnedKcal=i),lt(i)}),x(),k(5,"button",11),Le("click",function(){const i=pt(t).$index;return lt(Qe().removeDay(i))}),W(6,"Usu\u0144 dzie\u0144"),x()()()}if(2&n){const t=e.$implicit;ne(2),Pt("ngModel",t.videoLink),ne(),Pt("ngModel",t.time),ne(),Pt("ngModel",t.burnedKcal)}}let ome=(()=>{class n{constructor(){this.fitnessPlanService=G(Ix),this.router=G($r),this.plans=[],this.planName="",this.days=[],this.planDescription="",this.loadAllPlans()}loadAllPlans(){this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Wszystkie plany:",t),this.plans=t})}addDay(){this.days.push({date:"",videoLink:"",time:"",burnedKcal:0})}removeDay(t){this.days.splice(t,1)}savePlan(){const t={id:this.fitnessPlanService.client.createId(),name:this.planName,description:this.planDescription,days:this.days,uid:""};this.fitnessPlanService.createFitnessPlan(t),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-training-plans"]],standalone:!0,features:[Yn],decls:11,vars:2,consts:[[1,"plan-form"],[1,"image-container"],["src","assets/foto.jpg","alt","Fitness Plan Image",1,"plan-image"],["placeholder","Nazwa planu",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Opis planu",1,"form-control",3,"ngModelChange","ngModel"],[1,"day-card"],[1,"btn-primary",3,"click"],[1,"day-form"],["placeholder","Link do YouTube",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Czas trwania (min)","type","number",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Spalone kcal","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-danger",3,"click"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1),Wo(2,"img",2),x(),k(3,"input",3),Mt("ngModelChange",function(s){return Et(i.planName,s)||(i.planName=s),s}),x(),k(4,"input",4),Mt("ngModelChange",function(s){return Et(i.planDescription,s)||(i.planDescription=s),s}),x(),Go(5,ime,7,3,"div",5,ps),k(7,"button",6),Le("click",function(){return i.addDay()}),W(8,"Dodaj dzie\u0144"),x(),k(9,"button",6),Le("click",function(){return i.savePlan()}),W(10,"Zapisz plan"),x()()),2&r&&(ne(3),Pt("ngModel",i.planName),ne(),Pt("ngModel",i.planDescription),ne(),qo(i.days))},dependencies:[Zi,la,cd,Du,tc],styles:[".plan-form[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:10px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}.day-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;padding:15px;margin-bottom:15px}.day-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:10px}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return n})();const sme=n=>["/plan",n];function ame(n,e){if(1&n){const t=Ir();k(0,"div",8),Le("click",function(){const i=pt(t).$implicit;return lt(Qe().selectPlan(i))}),k(1,"h4",9),W(2),x(),k(3,"p"),W(4),x(),k(5,"div",10)(6,"button",11),W(7," Wi\u0119cej "),x(),k(8,"button",12),Le("click",function(){const i=pt(t).$implicit;return lt(Qe().deletePlan(i))}),W(9," Usu\u0144 "),x()()()}if(2&n){const t=e.$implicit,r=Qe();Zh("selected",t.id===(null==r.selectedPlan?null:r.selectedPlan.id)),ne(2),Hn(t.name),ne(2),Hn(t.description),ne(2),Xt("routerLink",TA(5,sme,t.id))}}let cme=(()=>{class n{constructor(){this.fitnessPlanService=G(Ix),this.calendarService=G(fp),this.fitnessPlans=[],this.selectedPlan=null,this.startDate=new Date,this.router=G($r),this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Plany w komponencie:",t),this.fitnessPlans=t})}selectPlan(t){console.log("Wybrano plan:",t),this.selectedPlan=t}goToPlanDetails(t){this.router.navigate([`/plan/${t}`])}startPlan(){if(console.log("Rozpoczynanie planu:",this.selectedPlan),this.selectedPlan){let t=this.startDate;t instanceof Date||(t=new Date(t)),this.selectedPlan.days.forEach((r,i)=>{const o=new Date(t);o.setDate(t.getDate()+i),this.calendarService.addTraining({name:r.name?`Trening: ${r.name}`:`Trening: Dzie\u0144 ${i+1}`,date:o,burnedKcal:r.burnedKcal||0,time:r.time||0,videoLink:r.videoLink}),this.router.navigate(["/home"]),console.log(`Dodano trening dnia ${o.toISOString()}: ${r.videoLink}`)})}}deletePlan(t){this.fitnessPlanService.deleteFitnessPlan(t.id),this.fitnessPlans=this.fitnessPlans.filter(r=>r.id!==t.id),console.log("Plan usuni\u0119ty",t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-training-plans-select"]],standalone:!0,features:[Yn],decls:13,vars:1,consts:[["src","assets/foto2.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"fitness-plan-select"],[1,"plan-cards-container"],[1,"plan-card",3,"selected"],[1,"form-group"],["for","startDate"],["id","startDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"plan-card",3,"click"],[1,"plan-title"],[1,"button-group"],[1,"btn","btn-link","btn-sm",3,"routerLink"],[1,"btn","btn-link","btn-sm",3,"click"]],template:function(r,i){1&r&&(Wo(0,"img",0),k(1,"div",1)(2,"h3"),W(3,"Fitness Plans:"),x(),k(4,"div",2),Go(5,ame,10,7,"div",3,ps),x(),k(7,"div",4)(8,"label",5),W(9,"Wybierz dat\u0119 rozpocz\u0119cia "),x(),k(10,"input",6),Mt("ngModelChange",function(s){return Et(i.startDate,s)||(i.startDate=s),s}),x()(),k(11,"button",7),Le("click",function(){return i.startPlan()}),W(12,"Rozpocznij Plan"),x()()),2&r&&(ne(5),qo(i.fitnessPlans),ne(5),Pt("ngModel",i.startDate))},dependencies:[Zi,la,Du,tc,Zc,nS,Tf],styles:[".fitness-plan-select[_ngcontent-%COMP%]{padding:20px;background:var(--background-gradient);border-radius:10px;color:#333}h3[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;margin-bottom:20px}.plan-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;max-width:780px;margin:0 auto}.btn-link[_ngcontent-%COMP%]{color:#000}.plan-card[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:20px;width:250px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease}.plan-card.selected[_ngcontent-%COMP%]{background:#dcdcdc}.plan-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin-bottom:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;border-radius:5px;padding:8px 12px}.form-group[_ngcontent-%COMP%]{margin-top:20px}#startDate[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{margin-top:20px;background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#254636}"]})}}return n})();function ume(n,e){if(1&n&&(k(0,"div"),Wo(1,"iframe",10),x()),2&n){const t=Qe().$implicit,r=Qe();ne(),Xt("src",r.getVideoUrl(t.videoLink),CI)}}function lme(n,e){if(1&n){const t=Ir();k(0,"div",2)(1,"div",4)(2,"h5",5),W(3),x(),k(4,"div",6)(5,"label",7),W(6,"Spalone kalorie"),x(),k(7,"input",8),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.burnedKcal,i)||(o.burnedKcal=i),lt(i)}),x()(),k(8,"div",6)(9,"label",7),W(10,"Czas treningu (w minutach)"),x(),k(11,"input",8),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.time,i)||(o.time=i),lt(i)}),x()(),k(12,"div",6)(13,"label",7),W(14,"Link wideo"),x(),k(15,"input",9),Mt("ngModelChange",function(i){const o=pt(t).$implicit;return Et(o.videoLink,i)||(o.videoLink=i),lt(i)}),x()(),k(16,"div",6)(17,"label"),W(18,"Filmik z YouTube"),x(),zn(19,ume,2,1,"div"),x()()()}if(2&n){const t=e.$implicit,r=e.$index;ne(3),Qn("Dzie\u0144 ",r+1,""),ne(2),Fa("for","burnedKcal",r,""),ne(2),Fa("id","burnedKcal",r,""),Pt("ngModel",t.burnedKcal),ne(2),Fa("for","duration",r,""),ne(2),Fa("id","duration",r,""),Pt("ngModel",t.time),ne(2),Fa("for","videoLink",r,""),ne(2),Fa("id","videoLink",r,""),Pt("ngModel",t.videoLink),ne(4),en(t.videoLink?19:-1)}}let dme=(()=>{class n{constructor(){this.fitnessPlanService=G(Ix),this.route=G(ru),this.planId=null,this.plan=void 0,this.sanitizer=G(SD)}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");console.log("Fetched Plan ID:",t),t&&this.fitnessPlanService.getFitnessPlanById(t).subscribe(r=>{r?this.plan=r:console.log("Brak planu dla ID:",t)})}savePlanEdits(){this.plan&&(this.fitnessPlanService.updateFitnessPlan(this.plan),console.log("Zmiany zapisane dla planu:",this.plan))}getVideoUrl(t){if(t){const i=`https://www.youtube.com/embed/${this.extractVideoId(t)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}return""}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-training-plan-detail"]],standalone:!0,features:[Yn],decls:8,vars:1,consts:[[1,"plan-details"],[1,"card-container"],[1,"card","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[3,"for"],["type","number",1,"form-control",3,"ngModelChange","ngModel","id"],["type","text",1,"form-control",3,"ngModelChange","ngModel","id"],["width","100%","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h4"),W(2),x(),k(3,"div",1),Go(4,lme,20,17,"div",2,ps),x(),k(6,"button",3),Le("click",function(){return i.savePlanEdits()}),W(7," Zapisz zmiany "),x()()),2&r&&(ne(2),Qn("Szczeg\xf3\u0142y planu: ",null==i.plan?null:i.plan.name,""),ne(2),qo(null==i.plan?null:i.plan.days))},dependencies:[Zi,la,cd,Du,tc],styles:[".plan-details[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-radius:10px;color:#333}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}.card[_ngcontent-%COMP%]{width:30%;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;padding:20px;color:#333}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}.card-body[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}iframe[_ngcontent-%COMP%]{border-radius:10px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}"]})}}return n})();function fme(n,e){if(1&n){const t=Ir();k(0,"p",1)(1,"strong"),W(2,"Email:"),x(),W(3),x(),k(4,"p",1)(5,"strong"),W(6,"UID:"),x(),W(7),x(),k(8,"button",4),Le("click",function(){return pt(t),lt(Qe().authService.logout())}),W(9,"Wyloguj"),x()}if(2&n){const t=e;ne(3),Qn(" ",t.email,""),ne(4),Qn(" ",t.uid,"")}}function pme(n,e){1&n&&(k(0,"p",1),W(1,"No user is logged in."),x())}const gme={providers:[function bie(n,...e){return ss([{provide:bf,multi:!0,useValue:n},[],{provide:ru,useFactory:Aj,deps:[$r]},{provide:sf,multi:!0,useFactory:Dj},e.map(t=>t.\u0275providers)])}([{path:"",component:(()=>{class n{constructor(){this.router=G($r)}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-welcome"]],standalone:!0,features:[Yn],decls:13,vars:0,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-images"],["src","assets/welcome.jpg","alt","Fitness Image 1",1,"welcome-image"],["src","assets/welcome2.jpeg","alt","Fitness Image 2",1,"welcome-image"],[1,"welcome-description"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h1",1),W(2,"Witaj w swoim kalendarzu fitness!"),x(),k(3,"p",2),W(4,"U nas mo\u017cesz \u015bledzi\u0107 swoje plany treningowe, spalone kalorie i wiele wi\u0119cej."),x(),k(5,"div",3),Wo(6,"img",4)(7,"img",5),x(),k(8,"div",6)(9,"p"),W(10,"Wybierz jeden z naszych plan\xf3w treningowych, aby rozpocz\u0105\u0107 swoj\u0105 fitnessow\u0105 podr\xf3\u017c!"),x()(),k(11,"button",7),Le("click",function(){return i.goToLogin()}),W(12,"Zaloguj si\u0119"),x()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-image:url(/assets/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;color:#fff;text-align:center;position:relative;z-index:1;padding:20px}.welcome-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out;margin-bottom:20px}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin:20px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s 1s forwards}.welcome-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:15px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 3s 1.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease,transform .3s ease;text-transform:uppercase;letter-spacing:1px;margin-top:30px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff);transform:scale(1.05)}.welcome-images[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:30px;flex-wrap:wrap;justify-content:space-evenly}.welcome-image[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;border-radius:10px;opacity:0;animation:_ngcontent-%COMP%_fadeInImage 2s 2s forwards}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0}to{opacity:1}}.welcome-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}"]})}}return n})()},{path:"home",component:nde,canActivate:[lc]},{path:"login",component:Vge},{path:"register",component:Uge},{path:"day-details/:day",component:Zge,canActivate:[lc]},{path:"summary",component:rme,canActivate:[lc]},{path:"trainig-plans",component:ome,canActivate:[lc]},{path:"select-plan",component:cme,canActivate:[lc]},{path:"plan/:id",component:dme,canActivate:[lc]},{path:"user",component:(()=>{class n{constructor(){this.authService=G(xy),this.themeService=G(tG),this.userSignal=this.authService.getCurrentUser()}changeGradient(t){this.themeService.setGradient(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-user"]],standalone:!0,features:[Yn],decls:45,vars:3,consts:[[1,"user-details"],[1,"user-info"],[1,"color-buttons"],[3,"click"],[1,"btn-primary",3,"click"]],template:function(r,i){if(1&r&&(k(0,"div",0)(1,"h2"),W(2,"User Details"),x(),zn(3,fme,10,2),wo(4,"async"),zn(5,pme,2,0,"p",1),x(),k(6,"h1"),W(7,"Wybierz kolor swojej aplikacji "),x(),k(8,"div",2)(9,"button",3),Le("click",function(){return i.changeGradient("green")}),W(10,"Zielony Gradient"),x(),k(11,"button",3),Le("click",function(){return i.changeGradient("pastel-lavender")}),W(12,"pastel-lavender"),x(),k(13,"button",3),Le("click",function(){return i.changeGradient("powder-blue")}),W(14,"powder-blue"),x(),k(15,"button",3),Le("click",function(){return i.changeGradient("cloud")}),W(16,"cloud"),x(),k(17,"button",3),Le("click",function(){return i.changeGradient("dusty-rose")}),W(18,"dusty-rose"),x(),k(19,"button",3),Le("click",function(){return i.changeGradient("powder-mint")}),W(20,"powder-mint"),x(),k(21,"button",3),Le("click",function(){return i.changeGradient("navy-ivory")}),W(22,"navy-ivory"),x(),k(23,"button",3),Le("click",function(){return i.changeGradient("cashmere-graphite")}),W(24,"cashmere-graphite"),x(),k(25,"button",3),Le("click",function(){return i.changeGradient("pearl-ink")}),W(26,"pearl-ink"),x(),k(27,"button",3),Le("click",function(){return i.changeGradient("beige-espresso")}),W(28,"beige-espresso"),x(),k(29,"button",3),Le("click",function(){return i.changeGradient("graphite-rose")}),W(30,"graphite-rose"),x(),k(31,"button",3),Le("click",function(){return i.changeGradient("turquoise-alabaster")}),W(32,"turquoise-alabaster"),x(),k(33,"button",3),Le("click",function(){return i.changeGradient("burgundy-cream")}),W(34,"burgundy-cream"),x(),k(35,"button",3),Le("click",function(){return i.changeGradient("platinum-coal")}),W(36,"platinum-coal"),x(),k(37,"button",3),Le("click",function(){return i.changeGradient("pearl-pink-anthracite")}),W(38,"pearl-pink-anthracite"),x(),k(39,"button",3),Le("click",function(){return i.changeGradient("opal-blue")}),W(40,"opal-blue"),x(),k(41,"button",3),Le("click",function(){return i.changeGradient("mustard-caramel")}),W(42,"mustard-caramel"),x(),k(43,"button",3),Le("click",function(){return i.changeGradient("emerald-gold")}),W(44,"emerald-gold"),x()()),2&r){let o;ne(3),en((o=Nm(4,1,i.userSignal))?3:5,o)}},dependencies:[Zc,cD],styles:[".user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#254636;margin-bottom:15px}.user-info[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;color:#333}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#254636}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:20px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}p.user-info[_ngcontent-%COMP%]{margin-top:10px}.color-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin:20px 0}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0e0e0);border:1px solid #ccc;border-radius:8px;padding:10px 15px;font-size:14px;color:#333;cursor:pointer;transition:all .3s ease}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f0f0f0,#d0d0d0);border-color:#999;transform:translateY(-2px)}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);background:linear-gradient(135deg,#e0e0e0,silver)}"]})}}return n})(),canActivate:[lc]},{path:"weight",component:V5,canActivate:[lc]},{path:"calories-calculator",component:(()=>{class n{constructor(){this.calorieService=G(L5),this.tdeeCalculated=new Ot,this.calorieData={gender:"male",age:25,height:170,weight:70,activityLevel:1.2,tdee:0}}ngOnInit(){this.loadTdeeFromFirebase()}calculateCalories(){const{gender:t,age:r,height:i,weight:o,activityLevel:s}=this.calorieData;this.calorieData.tdee=("male"===t?10*o+6.25*i-5*r+5:10*o+6.25*i-5*r-161)*s,console.log("TDEE:",this.calorieData.tdee),this.tdeeCalculated.emit(this.calorieData.tdee),this.saveTdeeToFirebase()}saveTdeeToFirebase(){this.calorieService.saveTdee(this.calorieData).catch(t=>{console.error("Error saving calorie calculation:",t)})}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.calorieData.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.calorieData.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-calorie-calculator"]],outputs:{tdeeCalculated:"tdeeCalculated"},standalone:!0,features:[Yn],decls:44,vars:9,consts:[[1,"calorie-form-container"],[3,"ngSubmit"],[1,"form-group"],["for","gender"],["id","gender","name","gender",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["for","age"],["type","number","id","age","name","age","required","",3,"ngModelChange","ngModel"],["for","height"],["type","number","id","height","name","height","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["for","activity"],["id","activity","name","activity",3,"ngModelChange","ngModel"],["value","1.2"],["value","1.375"],["value","1.55"],["value","1.725"],["value","1.9"],["type","submit"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"h3"),W(2,"Kalkulator zapotrzebowania kalorycznego"),x(),k(3,"form",1),Le("ngSubmit",function(){return i.calculateCalories()}),k(4,"div",2)(5,"label",3),W(6,"P\u0142e\u0107:"),x(),k(7,"select",4),Mt("ngModelChange",function(s){return Et(i.calorieData.gender,s)||(i.calorieData.gender=s),s}),k(8,"option",5),W(9,"M\u0119\u017cczyzna"),x(),k(10,"option",6),W(11,"Kobieta"),x()()(),k(12,"div",2)(13,"label",7),W(14,"Wiek:"),x(),k(15,"input",8),Mt("ngModelChange",function(s){return Et(i.calorieData.age,s)||(i.calorieData.age=s),s}),x()(),k(16,"div",2)(17,"label",9),W(18,"Wzrost (cm):"),x(),k(19,"input",10),Mt("ngModelChange",function(s){return Et(i.calorieData.height,s)||(i.calorieData.height=s),s}),x()(),k(20,"div",2)(21,"label",11),W(22,"Waga (kg):"),x(),k(23,"input",12),Mt("ngModelChange",function(s){return Et(i.calorieData.weight,s)||(i.calorieData.weight=s),s}),x()(),k(24,"div",2)(25,"label",13),W(26,"Poziom aktywno\u015bci:"),x(),k(27,"select",14),Mt("ngModelChange",function(s){return Et(i.calorieData.activityLevel,s)||(i.calorieData.activityLevel=s),s}),k(28,"option",15),W(29,"Siedz\u0105cy tryb \u017cycia"),x(),k(30,"option",16),W(31,"Lekka aktywno\u015b\u0107"),x(),k(32,"option",17),W(33,"\u015arednia aktywno\u015b\u0107"),x(),k(34,"option",18),W(35,"Du\u017ca aktywno\u015b\u0107"),x(),k(36,"option",19),W(37,"Bardzo du\u017ca aktywno\u015b\u0107"),x()()(),k(38,"button",20),W(39,"Oblicz"),x()(),k(40,"div")(41,"h4"),W(42),wo(43,"number"),x()()()),2&r&&(ne(7),Pt("ngModel",i.calorieData.gender),ne(8),Pt("ngModel",i.calorieData.age),ne(4),Pt("ngModel",i.calorieData.height),ne(4),Pt("ngModel",i.calorieData.weight),ne(4),Pt("ngModel",i.calorieData.activityLevel),ne(15),Qn(" Twoje dzienne zapotrzebowanie kaloryczne (TDEE): ",Cl(43,6,i.calorieData.tdee,"1.0-0")," kcal "))},dependencies:[Zi,oy,HH,qH,la,cd,kb,Du,ey,ld,tc,ad,Zc,uD],styles:[".calorie-form-container[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;text-align:center;margin-bottom:20px}.calorie-form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;gap:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:4px;background-color:#f9f9f9}button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#2f5957}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333;text-align:center;margin-top:20px}"]})}}return n})(),canActivate:[lc]}]),function ine(...n){const e=[],t=new Set,r=t.has(Nl.HttpTransferCacheOptions);for(const{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return ss([[],bZ(),t.has(Nl.NoHttpTransferCache)||r?[]:Dte({}),e])}(),function vte(...n){const e=[WU,eB,ZU,{provide:zE,useExisting:ZU},{provide:HE,useFactory:()=>G(yD,{optional:!0})??G(eB)},{provide:Ym,useValue:yte,multi:!0},{provide:ID,useValue:!0},{provide:rB,useClass:_te}];for(const t of n)e.push(...t.\u0275providers);return ss(e)}(),Ev([Uue,uoe,noe.initializeApp(O5_firebaseConfig)]),Hm]},mme=()=>["/summary"],_me=()=>["/home"],yme=()=>["/select-plan"],vme=()=>["/trainig-plans"],Ime=()=>["/calories-calculator"];function Eme(n,e){1&n&&(k(0,"div",1)(1,"button",4),W(2," Osi\u0105gni\u0119cia "),x(),k(3,"button",4),W(4,"Kalnedarz"),x(),k(5,"button",4),W(6," Fitness Plany "),x(),k(7,"button",4),W(8," Stw\xf3rz Fitness Plan "),x(),k(9,"button",4),W(10," Kalkulator zapotrzebowania kalorycznego "),x()()),2&n&&(ne(),Xt("routerLink",ef(5,mme)),ne(2),Xt("routerLink",ef(6,_me)),ne(2),Xt("routerLink",ef(7,yme)),ne(2),Xt("routerLink",ef(8,vme)),ne(2),Xt("routerLink",ef(9,Ime)))}function wme(n,e){if(1&n){const t=Ir();k(0,"div",2)(1,"button",5),Le("click",function(){return pt(t),lt(Qe().navigateToLogin())}),W(2," Zaloguj si\u0119 "),x(),k(3,"button",5),Le("click",function(){return pt(t),lt(Qe().navigateToRegister())}),W(4," Zarejestruj si\u0119 "),x()()}}function bme(n,e){if(1&n){const t=Ir();k(0,"div",3)(1,"p"),W(2),x(),k(3,"button",6),W(4,"Moje konto"),x(),k(5,"button",7),Le("click",function(){return pt(t),lt(Qe().logout())}),W(6,"Wyloguj"),x()()}2&n&&(ne(2),Qn("Witaj, ",e.email,""),ne(),Xt("routerLink","/user"))}let Tme=(()=>{class n{constructor(){this.authService=G(xy),this.router=G($r),this.formChange=new Ot,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(t){this.formChange.emit(t)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[Yn],decls:7,vars:9,consts:[[1,"navbar"],[1,"nav-links"],[1,"auth-buttons"],[1,"user-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){if(1&r&&(k(0,"div",0),zn(1,Eme,11,10,"div",1),wo(2,"async"),zn(3,wme,5,0,"div",2),wo(4,"async"),zn(5,bme,7,2,"div",3),wo(6,"async"),x()),2&r){let o,s;ne(),en((o=Nm(2,3,i.user$))?1:-1,o),ne(2),en(Nm(4,5,i.user$)?-1:3),ne(2),en((s=Nm(6,7,i.user$))?5:-1,s)}},dependencies:[Zc,cD,nS,Tf],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:var(--background-gradient);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return n})(),Cme=(()=>{class n{constructor(){this.currentForm="login"}showForm(t){this.currentForm=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xn({type:n,selectors:[["app-root"]],standalone:!0,features:[Yn],decls:3,vars:0,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){1&r&&(k(0,"app-navbar",0),Le("formChange",function(s){return i.showForm(s)}),x(),k(1,"div",1),Wo(2,"router-outlet"),x())},dependencies:[GD,Zc,Tme],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:16px;cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{font-size:18px;margin:5px 0}"]})}}return n})();fd("firebase","11.1.0","app"),gG(O5_firebaseConfig),function qte(n,e){return iZ({rootComponent:n,...EB(e)})}(Cme,gme).catch(n=>console.error(n))},574:(Mo,yr,it)=>{it.d(yr,{A:()=>Jn});var P=it(401),Be=it(779),Oe=it(631),oe=it(398);class qt{constructor(ot,tt){this._delegate=ot,this.firebase=tt,(0,Oe._addComponent)(ot,new Be.uA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Oe.deleteApp)(this._delegate)))}_getService(ot,tt=Oe._DEFAULT_ENTRY_NAME){var Pn;this._delegate.checkDestroyed();const rr=this._delegate.container.getProvider(ot);return!rr.isInitialized()&&"EXPLICIT"===(null===(Pn=rr.getComponent())||void 0===Pn?void 0:Pn.instantiationMode)&&rr.initialize(),rr.getImmediate({identifier:tt})}_removeServiceInstance(ot,tt=Oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(tt)}_addComponent(ot){(0,Oe._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,Oe._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gn=new P.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function bt(){const Vt=function bn(Vt){const ot={},tt={__esModule:!0,initializeApp:function ir(Ye,we={}){const xe=Oe.initializeApp(Ye,we);if((0,P.gR)(ot,xe.name))return ot[xe.name];const te=new Vt(xe,tt);return ot[xe.name]=te,te},app:rr,registerVersion:Oe.registerVersion,setLogLevel:Oe.setLogLevel,onLog:Oe.onLog,apps:null,SDK_VERSION:Oe.SDK_VERSION,INTERNAL:{registerComponent:function Nt(Ye){const we=Ye.name,xe=we.replace("-compat","");if(Oe._registerComponent(Ye)&&"PUBLIC"===Ye.type){const te=(ht=rr())=>{if("function"!=typeof ht[xe])throw gn.create("invalid-app-argument",{appName:we});return ht[xe]()};void 0!==Ye.serviceProps&&(0,P.zw)(te,Ye.serviceProps),tt[xe]=te,Vt.prototype[xe]=function(...ht){return this._getService.bind(this,we).apply(this,Ye.multipleInstances?ht:[])}}return"PUBLIC"===Ye.type?tt[xe]:null},removeApp:function Pn(Ye){delete ot[Ye]},useAsService:function or(Ye,we){return"serverAuth"===we?null:we},modularAPIs:Oe}};function rr(Ye){if(!(0,P.gR)(ot,Ye=Ye||Oe._DEFAULT_ENTRY_NAME))throw gn.create("no-app",{appName:Ye});return ot[Ye]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function zt(){return Object.keys(ot).map(Ye=>ot[Ye])}}),rr.App=Vt,tt}(qt);return Vt.INTERNAL=Object.assign(Object.assign({},Vt.INTERNAL),{createFirebaseNamespace:bt,extendNamespace:function ot(tt){(0,P.zw)(Vt,tt)},createSubscribe:P.tD,ErrorFactory:P.FA,deepExtend:P.zw}),Vt}(),_e=new oe.Vy("@firebase/app-compat");try{const Vt=(0,P.mS)();if(void 0!==Vt.firebase){_e.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const ot=Vt.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&_e.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Jn=ue;!function Tt(Vt){(0,Oe.registerVersion)("@firebase/app-compat","0.2.43",Vt)}()},631:(Mo,yr,it)=>{it.r(yr),it.d(yr,{FirebaseError:()=>oe.g,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>Z,_addComponent:()=>me,_addOrOverwriteComponent:()=>qe,_apps:()=>se,_clearComponents:()=>Li,_components:()=>le,_getProvider:()=>Ht,_isFirebaseApp:()=>Wt,_isFirebaseServerApp:()=>st,_registerComponent:()=>wt,_removeServiceInstance:()=>et,_serverApps:()=>J,deleteApp:()=>No,getApp:()=>eo,getApps:()=>Fu,initializeApp:()=>bs,initializeServerApp:()=>Ti,onLog:()=>Lu,registerVersion:()=>to,setLogLevel:()=>es});var P=it(467),Be=it(779),Oe=it(398),oe=it(401),qt=it(749);class He{constructor(de){this.container=de}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(function gn(ke){const de=ke.getComponent();return"VERSION"===de?.type}(A)){const C=A.getImmediate();return`${C.library}/${C.version}`}return null}).filter(A=>A).join(" ")}}const bn="@firebase/app",bt="0.10.13",ue=new Oe.Vy("@firebase/app"),_e="@firebase/app-compat",ze="@firebase/analytics-compat",_t="@firebase/analytics",Tt="@firebase/app-check-compat",Jn="@firebase/app-check",Vt="@firebase/auth",ot="@firebase/auth-compat",tt="@firebase/database",Pn="@firebase/data-connect",rr="@firebase/database-compat",ir="@firebase/functions",zt="@firebase/functions-compat",Nt="@firebase/installations",or="@firebase/installations-compat",Ye="@firebase/messaging",we="@firebase/messaging-compat",xe="@firebase/performance",te="@firebase/performance-compat",ht="@firebase/remote-config",xt="@firebase/remote-config-compat",Mn="@firebase/storage",mn="@firebase/storage-compat",ai="@firebase/firestore",Nn="@firebase/vertexai-preview",bi="@firebase/firestore-compat",Cr="firebase",Z="[DEFAULT]",ie={[bn]:"fire-core",[_e]:"fire-core-compat",[_t]:"fire-analytics",[ze]:"fire-analytics-compat",[Jn]:"fire-app-check",[Tt]:"fire-app-check-compat",[Vt]:"fire-auth",[ot]:"fire-auth-compat",[tt]:"fire-rtdb",[Pn]:"fire-data-connect",[rr]:"fire-rtdb-compat",[ir]:"fire-fn",[zt]:"fire-fn-compat",[Nt]:"fire-iid",[or]:"fire-iid-compat",[Ye]:"fire-fcm",[we]:"fire-fcm-compat",[xe]:"fire-perf",[te]:"fire-perf-compat",[ht]:"fire-rc",[xt]:"fire-rc-compat",[Mn]:"fire-gcs",[mn]:"fire-gcs-compat",[ai]:"fire-fst",[bi]:"fire-fst-compat",[Nn]:"fire-vertex","fire-js":"fire-js",[Cr]:"fire-js-all"},se=new Map,J=new Map,le=new Map;function me(ke,de){try{ke.container.addComponent(de)}catch(A){ue.debug(`Component ${de.name} failed to register with FirebaseApp ${ke.name}`,A)}}function qe(ke,de){ke.container.addOrOverwriteComponent(de)}function wt(ke){const de=ke.name;if(le.has(de))return ue.debug(`There were multiple attempts to register component ${de}.`),!1;le.set(de,ke);for(const A of se.values())me(A,ke);for(const A of J.values())me(A,ke);return!0}function Ht(ke,de){const A=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),ke.container.getProvider(de)}function et(ke,de,A=Z){Ht(ke,de).clearInstance(A)}function Wt(ke){return void 0!==ke.options}function st(ke){return void 0!==ke.settings}function Li(){le.clear()}const Ut=new oe.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kt{constructor(de,A,C){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},A),this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=C,this.container.addComponent(new Be.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw Ut.create("app-deleted",{appName:this._name})}}class Or extends kt{constructor(de,A,C,O){const Y=void 0!==A.automaticDataCollectionEnabled&&A.automaticDataCollectionEnabled,$={name:C,automaticDataCollectionEnabled:Y};super(void 0!==de.apiKey?de:de.options,$,O),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Y},A),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,A.releaseOnDeref=void 0,to(bn,bt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(de){this.isDeleted||(this._refCount++,void 0!==de&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(de,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){No(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ut.create("server-app-deleted")}}const ci="10.14.1";function bs(ke,de={}){let A=ke;"object"!=typeof de&&(de={name:de});const C=Object.assign({name:Z,automaticDataCollectionEnabled:!1},de),O=C.name;if("string"!=typeof O||!O)throw Ut.create("bad-app-name",{appName:String(O)});if(A||(A=(0,oe.T9)()),!A)throw Ut.create("no-options");const Y=se.get(O);if(Y){if((0,oe.bD)(A,Y.options)&&(0,oe.bD)(C,Y.config))return Y;throw Ut.create("duplicate-app",{appName:O})}const $=new Be.h1(O);for(const De of le.values())$.addComponent(De);const ve=new kt(A,C,$);return se.set(O,ve),ve}function Ti(ke,de){if((0,oe.Bd)()&&!(0,oe.p7)())throw Ut.create("invalid-server-app-environment");let A;void 0===de.automaticDataCollectionEnabled&&(de.automaticDataCollectionEnabled=!1),A=Wt(ke)?ke.options:ke;const C=Object.assign(Object.assign({},de),A);if(void 0!==C.releaseOnDeref&&delete C.releaseOnDeref,void 0!==de.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ut.create("finalization-registry-not-supported",{});const Y=""+(un=JSON.stringify(C),[...un].reduce((Ve,ln)=>Math.imul(31,Ve)+ln.charCodeAt(0)|0,0)),$=J.get(Y);var un;if($)return $.incRefCount(de.releaseOnDeref),$;const ve=new Be.h1(Y);for(const un of le.values())ve.addComponent(un);const De=new Or(A,de,Y,ve);return J.set(Y,De),De}function eo(ke=Z){const de=se.get(ke);if(!de&&ke===Z&&(0,oe.T9)())return bs();if(!de)throw Ut.create("no-app",{appName:ke});return de}function Fu(){return Array.from(se.values())}function No(ke){return ha.apply(this,arguments)}function ha(){return(ha=(0,P.A)(function*(ke){let de=!1;const A=ke.name;se.has(A)?(de=!0,se.delete(A)):J.has(A)&&ke.decRefCount()<=0&&(J.delete(A),de=!0),de&&(yield Promise.all(ke.container.getProviders().map(C=>C.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function to(ke,de,A){var C;let O=null!==(C=ie[ke])&&void 0!==C?C:ke;A&&(O+=`-${A}`);const Y=O.match(/\s|\//),$=de.match(/\s|\//);if(Y||$){const ve=[`Unable to register library "${O}" with version "${de}":`];return Y&&ve.push(`library name "${O}" contains illegal characters (whitespace or "/")`),Y&&$&&ve.push("and"),$&&ve.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void ue.warn(ve.join(" "))}wt(new Be.uA(`${O}-version`,()=>({library:O,version:de}),"VERSION"))}function Lu(ke,de){if(null!==ke&&"function"!=typeof ke)throw Ut.create("invalid-log-argument");(0,Oe.Ey)(ke,de)}function es(ke){(0,Oe.He)(ke)}const Wr="firebase-heartbeat-database",pc=1,ts="firebase-heartbeat-store";let Ci=null;function fa(){return Ci||(Ci=(0,qt.P2)(Wr,pc,{upgrade:(ke,de)=>{if(0===de)try{ke.createObjectStore(ts)}catch(A){console.warn(A)}}}).catch(ke=>{throw Ut.create("idb-open",{originalErrorMessage:ke.message})})),Ci}function pa(){return(pa=(0,P.A)(function*(ke){try{const A=(yield fa()).transaction(ts),C=yield A.objectStore(ts).get(Vu(ke));return yield A.done,C}catch(de){if(de instanceof oe.g)ue.warn(de.message);else{const A=Ut.create("idb-get",{originalErrorMessage:de?.message});ue.warn(A.message)}}})).apply(this,arguments)}function Ar(ke,de){return no.apply(this,arguments)}function no(){return(no=(0,P.A)(function*(ke,de){try{const C=(yield fa()).transaction(ts,"readwrite");yield C.objectStore(ts).put(de,Vu(ke)),yield C.done}catch(A){if(A instanceof oe.g)ue.warn(A.message);else{const C=Ut.create("idb-set",{originalErrorMessage:A?.message});ue.warn(C.message)}}})).apply(this,arguments)}function Vu(ke){return`${ke.name}!${ke.options.appId}`}class ro{constructor(de){this.container=de,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new Ts(A),this._heartbeatsCachePromise=this._storage.read().then(C=>(this._heartbeatsCache=C,C))}triggerHeartbeat(){var de=this;return(0,P.A)(function*(){var A,C;try{const Y=de.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$=Kr();return null==(null===(A=de._heartbeatsCache)||void 0===A?void 0:A.heartbeats)&&(de._heartbeatsCache=yield de._heartbeatsCachePromise,null==(null===(C=de._heartbeatsCache)||void 0===C?void 0:C.heartbeats))||de._heartbeatsCache.lastSentHeartbeatDate===$||de._heartbeatsCache.heartbeats.some(ve=>ve.date===$)?void 0:(de._heartbeatsCache.heartbeats.push({date:$,agent:Y}),de._heartbeatsCache.heartbeats=de._heartbeatsCache.heartbeats.filter(ve=>{const De=new Date(ve.date).valueOf();return Date.now()-De<=2592e6}),de._storage.overwrite(de._heartbeatsCache))}catch(O){ue.warn(O)}})()}getHeartbeatsHeader(){var de=this;return(0,P.A)(function*(){var A;try{if(null===de._heartbeatsCache&&(yield de._heartbeatsCachePromise),null==(null===(A=de._heartbeatsCache)||void 0===A?void 0:A.heartbeats)||0===de._heartbeatsCache.heartbeats.length)return"";const C=Kr(),{heartbeatsToSend:O,unsentEntries:Y}=function Uu(ke,de=1024){const A=[];let C=ke.slice();for(const O of ke){const Y=A.find($=>$.agent===O.agent);if(Y){if(Y.dates.push(O.date),Dt(A)>de){Y.dates.pop();break}}else if(A.push({agent:O.agent,dates:[O.date]}),Dt(A)>de){A.pop();break}C=C.slice(1)}return{heartbeatsToSend:A,unsentEntries:C}}(de._heartbeatsCache.heartbeats),$=(0,oe.Uj)(JSON.stringify({version:2,heartbeats:O}));return de._heartbeatsCache.lastSentHeartbeatDate=C,Y.length>0?(de._heartbeatsCache.heartbeats=Y,yield de._storage.overwrite(de._heartbeatsCache)):(de._heartbeatsCache.heartbeats=[],de._storage.overwrite(de._heartbeatsCache)),$}catch(C){return ue.warn(C),""}})()}}function Kr(){return(new Date).toISOString().substring(0,10)}class Ts{constructor(de){this.app=de,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.A)(function*(){return!!(0,oe.zW)()&&(0,oe.eX)().then(()=>!0).catch(()=>!1)})()}read(){var de=this;return(0,P.A)(function*(){if(yield de._canUseIndexedDBPromise){const C=yield function Vi(ke){return pa.apply(this,arguments)}(de.app);return C?.heartbeats?C:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(de){var A=this;return(0,P.A)(function*(){var C;if(yield A._canUseIndexedDBPromise){const Y=yield A.read();return Ar(A.app,{lastSentHeartbeatDate:null!==(C=de.lastSentHeartbeatDate)&&void 0!==C?C:Y.lastSentHeartbeatDate,heartbeats:de.heartbeats})}})()}add(de){var A=this;return(0,P.A)(function*(){var C;if(yield A._canUseIndexedDBPromise){const Y=yield A.read();return Ar(A.app,{lastSentHeartbeatDate:null!==(C=de.lastSentHeartbeatDate)&&void 0!==C?C:Y.lastSentHeartbeatDate,heartbeats:[...Y.heartbeats,...de.heartbeats]})}})()}}function Dt(ke){return(0,oe.Uj)(JSON.stringify({version:2,heartbeats:ke})).length}!function _c(ke){wt(new Be.uA("platform-logger",de=>new He(de),"PRIVATE")),wt(new Be.uA("heartbeat",de=>new ro(de),"PRIVATE")),to(bn,bt,ke),to(bn,bt,"esm2017"),to("fire-js","")}("")},779:(Mo,yr,it)=>{it.d(yr,{h1:()=>bn,uA:()=>Oe});var P=it(467),Be=it(401);class Oe{constructor(ue,_e,ze){this.name=ue,this.instanceFactory=_e,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const oe="[DEFAULT]";class qt{constructor(ue,_e){this.name=ue,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const _e=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(_e)){const ze=new Be.cY;if(this.instancesDeferred.set(_e,ze),this.isInitialized(_e)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:_e});_t&&ze.resolve(_t)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(ue){var _e;const ze=this.normalizeInstanceIdentifier(ue?.identifier),_t=null!==(_e=ue?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(Tt){if(_t)return null;throw Tt}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function gn(bt){return"EAGER"===bt.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[_e,ze]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(_e);try{const Tt=this.getOrInitializeService({instanceIdentifier:_t});ze.resolve(Tt)}catch{}}}}clearInstance(ue=oe){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,P.A)(function*(){const _e=Array.from(ue.instances.values());yield Promise.all([..._e.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),..._e.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=oe){return this.instances.has(ue)}getOptions(ue=oe){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:_e={}}=ue,ze=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:ze,options:_e});for(const[Tt,Jn]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(Tt)&&Jn.resolve(_t);return _t}onInit(ue,_e){var ze;const _t=this.normalizeInstanceIdentifier(_e),Tt=null!==(ze=this.onInitCallbacks.get(_t))&&void 0!==ze?ze:new Set;Tt.add(ue),this.onInitCallbacks.set(_t,Tt);const Jn=this.instances.get(_t);return Jn&&ue(Jn,_t),()=>{Tt.delete(ue)}}invokeOnInitCallbacks(ue,_e){const ze=this.onInitCallbacks.get(_e);if(ze)for(const _t of ze)try{_t(ue,_e)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:_e={}}){let ze=this.instances.get(ue);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(bt=ue,bt===oe?void 0:bt),options:_e}),this.instances.set(ue,ze),this.instancesOptions.set(ue,_e),this.invokeOnInitCallbacks(ze,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,ze)}catch{}var bt;return ze||null}normalizeInstanceIdentifier(ue=oe){return this.component?this.component.multipleInstances?ue:oe:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bn{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const _e=this.getProvider(ue.name);if(_e.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);_e.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const _e=new qt(ue,this);return this.providers.set(ue,_e),_e}getProviders(){return Array.from(this.providers.values())}}},398:(Mo,yr,it)=>{it.d(yr,{$b:()=>Be,Ey:()=>bt,He:()=>bn,Vy:()=>gn});const P=[];var Be=function(ue){return ue[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",ue}(Be||{});const Oe={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},oe=Be.INFO,qt={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},He=(ue,_e,...ze)=>{if(_e<ue.logLevel)return;const _t=(new Date).toISOString(),Tt=qt[_e];if(!Tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[Tt](`[${_t}]  ${ue.name}:`,...ze)};class gn{constructor(_e){this.name=_e,this._logLevel=oe,this._logHandler=He,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in Be))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?Oe[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,..._e),this._logHandler(this,Be.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,..._e),this._logHandler(this,Be.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,..._e),this._logHandler(this,Be.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,..._e),this._logHandler(this,Be.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,..._e),this._logHandler(this,Be.ERROR,..._e)}}function bn(ue){P.forEach(_e=>{_e.setLogLevel(ue)})}function bt(ue,_e){for(const ze of P){let _t=null;_e&&_e.level&&(_t=Oe[_e.level]),ze.userLogHandler=null===ue?null:(Tt,Jn,...Vt)=>{const ot=Vt.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch{return null}}).filter(tt=>tt).join(" ");Jn>=(_t??Tt.logLevel)&&ue({level:Be[Jn].toLowerCase(),message:ot,args:Vt,type:Tt.name})}}}},324:(Mo,yr,it)=>{var P=it(467),Be=it(574),Oe=it(631),oe=it(401),qt=it(398),He=it(635),gn=it(779);const bt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Jn=function _t(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Vt=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new oe.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pn=new qt.Vy("@firebase/auth");function ir(p,...u){Pn.logLevel<=qt.$b.ERROR&&Pn.error(`Auth (${Oe.SDK_VERSION}): ${p}`,...u)}function zt(p,...u){throw xe(p,...u)}function Nt(p,...u){return xe(p,...u)}function or(p,u,d){const g=Object.assign(Object.assign({},Vt()),{[u]:d});return new oe.FA("auth","Firebase",g).create(u,{appName:p.name})}function Ye(p){return or(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function we(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&zt(p,"argument-error"),or(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xe(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ot.create(p,...u)}function te(p,u,...d){if(!p)throw xe(u,...d)}function ht(p){const u="INTERNAL ASSERTION FAILED: "+p;throw ir(u),new Error(u)}function xt(p,u){p||ht(u)}function Mn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function mn(){return"http:"===ai()||"https:"===ai()}function ai(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Cr{constructor(u,d){this.shortDelay=u,this.longDelay=d,xt(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,oe.jZ)()||(0,oe.lV)()}get(){return function Nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mn()||(0,oe.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ws(p,u){xt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class Z{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},se=new Cr(3e4,6e4);function J(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function le(p,u,d,g){return me.apply(this,arguments)}function me(){return(me=(0,P.A)(function*(p,u,d,g,v={}){return qe(p,v,(0,P.A)(function*(){let w={},M={};g&&("GET"===u?M=g:w={body:JSON.stringify(g)});const z=(0,oe.Am)(Object.assign({key:p.config.apiKey},M)).slice(1),ee=yield p._getAdditionalHeaders();ee["Content-Type"]="application/json",p.languageCode&&(ee["X-Firebase-Locale"]=p.languageCode);const Ae=Object.assign({method:u,headers:ee},w);return(0,oe.c1)()||(Ae.referrerPolicy="no-referrer"),Z.fetch()(Wt(p,p.config.apiHost,d,z),Ae)}))})).apply(this,arguments)}function qe(p,u,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,P.A)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},ie),u);try{const v=new Li(p),w=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw At(p,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const z=w.ok?M.errorMessage:M.error.message,[ee,Ae]=z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ee)throw At(p,"credential-already-in-use",M);if("EMAIL_EXISTS"===ee)throw At(p,"email-already-in-use",M);if("USER_DISABLED"===ee)throw At(p,"user-disabled",M);const Ue=g[ee]||ee.toLowerCase().replace(/[_\s]+/g,"-");if(Ae)throw or(p,Ue,Ae);zt(p,Ue)}}catch(v){if(v instanceof oe.g)throw v;zt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Ht(p,u,d,g){return et.apply(this,arguments)}function et(){return(et=(0,P.A)(function*(p,u,d,g,v={}){const w=yield le(p,u,d,g,v);return"mfaPendingCredential"in w&&zt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Wt(p,u,d,g){const v=`${u}${d}?${g}`;return p.config.emulator?ws(p.config,v):`${p.config.apiScheme}://${v}`}function st(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Li{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Nt(this.auth,"network-request-failed")),se.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function At(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Nt(p,u,g);return v.customData._tokenResponse=d,v}function Ut(p){return void 0!==p&&void 0!==p.getResponse}function kt(p){return void 0!==p&&void 0!==p.enterprise}class Or{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return st(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function bs(){return(bs=(0,P.A)(function*(p){return(yield le(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ti(p,u){return eo.apply(this,arguments)}function eo(){return(eo=(0,P.A)(function*(p,u){return le(p,"GET","/v2/recaptchaConfig",J(p,u))})).apply(this,arguments)}function No(){return(No=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function to(){return(to=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Lu(p,u){return es.apply(this,arguments)}function es(){return(es=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Wr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Ci(){return(Ci=(0,P.A)(function*(p,u=!1){const d=(0,oe.Ku)(p),g=yield d.getIdToken(u),v=Vi(g);te(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,M=w?.sign_in_provider;return{claims:v,token:g,authTime:Wr(fa(v.auth_time)),issuedAtTime:Wr(fa(v.iat)),expirationTime:Wr(fa(v.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function fa(p){return 1e3*Number(p)}function Vi(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return ir("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,oe.u)(d);return v?JSON.parse(v):(ir("Failed to decode base64 JWT payload"),null)}catch(v){return ir("Caught error parsing JWT payload as JSON",v?.toString()),null}}function pa(p){const u=Vi(p);return te(u,"internal-error"),te(typeof u.exp<"u","internal-error"),te(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Ar(p,u){return no.apply(this,arguments)}function no(){return(no=(0,P.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof oe.g&&function Vu({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class gc{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,P.A)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,P.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class mc{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ro(p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,P.A)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),v=yield Ar(p,Lu(d,{idToken:g}));te(v?.users.length,d,"internal-error");const w=v.users[0];p._notifyReloadListener(w);const M=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?_c(w.providerUserInfo):[],z=function Dt(p,u){return[...p.filter(g=>!u.some(v=>v.providerId===g.providerId)),...u]}(p.providerData,M),Ue=!!p.isAnonymous&&!(p.email&&w.passwordHash||z?.length),Fe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:z,metadata:new mc(w.createdAt,w.lastLoginAt),isAnonymous:Ue};Object.assign(p,Fe)})).apply(this,arguments)}function Ts(){return(Ts=(0,P.A)(function*(p){const u=(0,oe.Ku)(p);yield ro(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function _c(p){return p.map(u=>{var{providerId:d}=u,g=(0,He.Tt)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function de(){return(de=(0,P.A)(function*(p,u){const d=yield qe(p,{},(0,P.A)(function*(){const g=(0,oe.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:w}=p.config,M=Wt(p,v,"/v1/token",`key=${w}`),z=yield p._getAdditionalHeaders();return z["Content-Type"]="application/x-www-form-urlencoded",Z.fetch()(M,{method:"POST",headers:z,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,P.A)(function*(p,u){return le(p,"POST","/v2/accounts:revokeToken",J(p,u))})).apply(this,arguments)}class O{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){te(u.idToken,"internal-error"),te(typeof u.idToken<"u","internal-error"),te(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):pa(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){te(0!==u.length,"internal-error");const d=pa(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,P.A)(function*(){return d||!g.accessToken||g.isExpired?(te(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,P.A)(function*(){const{accessToken:v,refreshToken:w,expiresIn:M}=yield function ke(p,u){return de.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(v,w,Number(M))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:v,expirationTime:w}=d,M=new O;return g&&(te("string"==typeof g,"internal-error",{appName:u}),M.refreshToken=g),v&&(te("string"==typeof v,"internal-error",{appName:u}),M.accessToken=v),w&&(te("number"==typeof w,"internal-error",{appName:u}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new O,this.toJSON())}_performRefresh(){return ht("not implemented")}}function Y(p,u){te("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class ${constructor(u){var{uid:d,auth:g,stsTokenManager:v}=u,w=(0,He.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new mc(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,P.A)(function*(){const g=yield Ar(d,d.stsTokenManager.getToken(d.auth,u));return te(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function ts(p){return Ci.apply(this,arguments)}(this,u)}reload(){return function Uu(p){return Ts.apply(this,arguments)}(this)}_assign(u){this!==u&&(te(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new $(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,P.A)(function*(){let v=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield ro(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,P.A)(function*(){if((0,Oe._isFirebaseServerApp)(u.auth.app))return Promise.reject(Ye(u.auth));const d=yield u.getIdToken();return yield Ar(u,function Fu(p,u){return No.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,v,w,M,z,ee,Ae,Ue;const Fe=null!==(g=d.displayName)&&void 0!==g?g:void 0,sn=null!==(v=d.email)&&void 0!==v?v:void 0,go=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,dl=null!==(M=d.photoURL)&&void 0!==M?M:void 0,vh=null!==(z=d.tenantId)&&void 0!==z?z:void 0,$c=null!==(ee=d._redirectEventId)&&void 0!==ee?ee:void 0,Vg=null!==(Ae=d.createdAt)&&void 0!==Ae?Ae:void 0,lI=null!==(Ue=d.lastLoginAt)&&void 0!==Ue?Ue:void 0,{uid:Ug,emailVerified:dI,isAnonymous:Bg,providerData:jg,stsTokenManager:$g}=d;te(Ug&&$g,u,"internal-error");const IC=O.fromJSON(this.name,$g);te("string"==typeof Ug,u,"internal-error"),Y(Fe,u.name),Y(sn,u.name),te("boolean"==typeof dI,u,"internal-error"),te("boolean"==typeof Bg,u,"internal-error"),Y(go,u.name),Y(dl,u.name),Y(vh,u.name),Y($c,u.name),Y(Vg,u.name),Y(lI,u.name);const zg=new $({uid:Ug,auth:u,email:sn,emailVerified:dI,displayName:Fe,isAnonymous:Bg,photoURL:dl,phoneNumber:go,tenantId:vh,stsTokenManager:IC,createdAt:Vg,lastLoginAt:lI});return jg&&Array.isArray(jg)&&(zg.providerData=jg.map(Ik=>Object.assign({},Ik))),$c&&(zg._redirectEventId=$c),zg}static _fromIdTokenResponse(u,d,g=!1){return(0,P.A)(function*(){const v=new O;v.updateFromServerResponse(d);const w=new $({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:g});return yield ro(w),w})()}static _fromGetAccountInfoResponse(u,d,g){return(0,P.A)(function*(){const v=d.users[0];te(void 0!==v.localId,"internal-error");const w=void 0!==v.providerUserInfo?_c(v.providerUserInfo):[],M=!(v.email&&v.passwordHash||w?.length),z=new O;z.updateFromIdToken(g);const ee=new $({uid:v.localId,auth:u,stsTokenManager:z,isAnonymous:M}),Ae={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:w,metadata:new mc(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||w?.length)};return Object.assign(ee,Ae),ee})()}}const ve=new Map;function De(p){xt(p instanceof Function,"Expected a class definition");let u=ve.get(p);return u?(xt(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,ve.set(p,u),u)}const Ve=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.A)(function*(){return!0})()}_set(d,g){var v=this;return(0,P.A)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,P.A)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,P.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function ln(p,u,d){return`firebase:${p}:${u}:${d}`}class dn{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:v,name:w}=this.auth;this.fullUserKey=ln(this.userKey,v.apiKey,w),this.fullPersistenceKey=ln("persistence",v.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,P.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?$._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,P.A)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,P.A)(function*(){if(!d.length)return new dn(De(Ve),u,g);const v=(yield Promise.all(d.map(function(){var Ae=(0,P.A)(function*(Ue){if(yield Ue._isAvailable())return Ue});return function(Ue){return Ae.apply(this,arguments)}}()))).filter(Ae=>Ae);let w=v[0]||De(Ve);const M=ln(g,u.config.apiKey,u.name);let z=null;for(const Ae of d)try{const Ue=yield Ae._get(M);if(Ue){const Fe=$._fromJSON(u,Ue);Ae!==w&&(z=Fe),w=Ae;break}}catch{}const ee=v.filter(Ae=>Ae._shouldAllowMigration);return w._shouldAllowMigration&&ee.length?(w=ee[0],z&&(yield w._set(M,z.toJSON())),yield Promise.all(d.map(function(){var Ae=(0,P.A)(function*(Ue){if(Ue!==w)try{yield Ue._remove(M)}catch{}});return function(Ue){return Ae.apply(this,arguments)}}())),new dn(w,u,g)):new dn(w,u,g)})()}}function ft(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Bu(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(io(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Xy(u))return"Blackberry";if(xo(u))return"Webos";if(ga(u))return"Safari";if((u.includes("chrome/")||ns(u))&&!u.includes("edge/"))return"Chrome";if(yc(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function io(p=(0,oe.ZQ)()){return/firefox\//i.test(p)}function ga(p=(0,oe.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function ns(p=(0,oe.ZQ)()){return/crios\//i.test(p)}function Bu(p=(0,oe.ZQ)()){return/iemobile/i.test(p)}function yc(p=(0,oe.ZQ)()){return/android/i.test(p)}function Xy(p=(0,oe.ZQ)()){return/blackberry/i.test(p)}function xo(p=(0,oe.ZQ)()){return/webos/i.test(p)}function Id(p=(0,oe.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function ju(p=(0,oe.ZQ)()){return Id(p)||yc(p)||xo(p)||Xy(p)||/windows phone/i.test(p)||Bu(p)}function Dp(p,u=[]){let d;switch(p){case"Browser":d=ft((0,oe.ZQ)());break;case"Worker":d=`${ft((0,oe.ZQ)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Oe.SDK_VERSION}/${g}`}class qx{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=w=>new Promise((M,z)=>{try{M(u(w))}catch(ee){z(ee)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,P.A)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const v of d.queue)yield v(u),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const w of g)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Ed(){return(Ed=(0,P.A)(function*(p,u={}){return le(p,"GET","/v2/passwordPolicy",J(p,u))})).apply(this,arguments)}class vc{constructor(u){var d,g,v,w;const M=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=M.minPasswordLength)&&void 0!==d?d:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,v,w,M,z;const ee={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,ee),this.validatePasswordCharacterOptions(u,ee),ee.isValid&&(ee.isValid=null===(d=ee.meetsMinPasswordLength)||void 0===d||d),ee.isValid&&(ee.isValid=null===(g=ee.meetsMaxPasswordLength)||void 0===g||g),ee.isValid&&(ee.isValid=null===(v=ee.containsLowercaseLetter)||void 0===v||v),ee.isValid&&(ee.isValid=null===(w=ee.containsUppercaseLetter)||void 0===w||w),ee.isValid&&(ee.isValid=null===(M=ee.containsNumericCharacter)||void 0===M||M),ee.isValid&&(ee.isValid=null===(z=ee.containsNonAlphanumericCharacter)||void 0===z||z),ee}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)g=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,v,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class Ic{constructor(u,d,g,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sp(this),this.idTokenSubscription=new Sp(this),this.beforeStateQueue=new qx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=De(d)),this._initializationPromise=this.queue((0,P.A)(function*(){var v,w;if(!g._deleted&&(g.persistenceManager=yield dn.create(g,u),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(w=g.currentUser)||void 0===w?void 0:w.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,P.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,P.A)(function*(){try{const g=yield Lu(d,{idToken:u}),v=yield $._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,P.A)(function*(){var g;if((0,Oe._isFirebaseServerApp)(d.app)){const z=d.app.settings.authIdToken;return z?new Promise(ee=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(z).then(ee,ee))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let w=v,M=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const z=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,ee=w?._redirectEventId,Ae=yield d.tryRedirectSignIn(u);(!z||z===ee)&&Ae?.user&&(w=Ae.user,M=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield d.beforeStateQueue.runMiddleware(w)}catch(z){w=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(z))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,P.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,P.A)(function*(){try{yield ro(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function bi(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,P.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,P.A)(function*(){if((0,Oe._isFirebaseServerApp)(d.app))return Promise.reject(Ye(d));const g=u?(0,oe.Ku)(u):null;return g&&te(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,P.A)(function*(){if(!g._deleted)return u&&te(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,P.A)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,P.A)(function*(){return(0,Oe._isFirebaseServerApp)(u.app)?Promise.reject(Ye(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,Oe._isFirebaseServerApp)(this.app)?Promise.reject(Ye(this)):this.queue((0,P.A)(function*(){yield d.assertedPersistence.setPersistence(De(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,P.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,P.A)(function*(){const d=yield function Wx(p){return Ed.apply(this,arguments)}(u),g=new vc(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new oe.FA("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,P.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function A(p,u){return C.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,P.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,P.A)(function*(){if(!d.redirectPersistenceManager){const g=u&&De(u)||d._popupRedirectResolver;te(g,d,"argument-error"),d.redirectPersistenceManager=yield dn.create(d,[De(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,P.A)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,P.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,P.A)(function*(){if(u===d.currentUser)return d.queue((0,P.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,v){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let M=!1;const z=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(z,this,"internal-error"),z.then(()=>{M||w(this.currentUser)}),"function"==typeof d){const ee=u.addObserver(d,g,v);return()=>{M=!0,ee()}}{const ee=u.addObserver(d);return()=>{M=!0,ee()}}}directlySetCurrentUser(u){var d=this;return(0,P.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=Dp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,P.A)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const w=yield u._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var u=this;return(0,P.A)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function rr(p,...u){Pn.logLevel<=qt.$b.WARN&&Pn.warn(`Auth (${Oe.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Kt(p){return(0,oe.Ku)(p)}class Sp{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,oe.tD)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ma={loadJS:()=>(0,P.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tv(p){return ma.loadJS(p)}function Qt(p){return`__${p}${Math.floor(1e6*Math.random())}`}class wd{constructor(u){this.type="recaptcha-enterprise",this.auth=Kt(u)}verify(u="verify",d=!1){var g=this;return(0,P.A)(function*(){function w(){return w=(0,P.A)(function*(z){if(!d){if(null==z.tenantId&&null!=z._agentRecaptchaConfig)return z._agentRecaptchaConfig.siteKey;if(null!=z.tenantId&&void 0!==z._tenantRecaptchaConfigs[z.tenantId])return z._tenantRecaptchaConfigs[z.tenantId].siteKey}return new Promise(function(){var ee=(0,P.A)(function*(Ae,Ue){Ti(z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Fe=>{if(void 0!==Fe.recaptchaKey){const sn=new Or(Fe);return null==z.tenantId?z._agentRecaptchaConfig=sn:z._tenantRecaptchaConfigs[z.tenantId]=sn,Ae(sn.siteKey)}Ue(new Error("recaptcha Enterprise site key undefined"))}).catch(Fe=>{Ue(Fe)})});return function(Ae,Ue){return ee.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(z,ee,Ae){const Ue=window.grecaptcha;kt(Ue)?Ue.enterprise.ready(()=>{Ue.enterprise.execute(z,{action:u}).then(Fe=>{ee(Fe)}).catch(()=>{ee("NO_RECAPTCHA")})}):Ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((z,ee)=>{(function v(z){return w.apply(this,arguments)})(g.auth).then(Ae=>{if(!d&&kt(window.grecaptcha))M(Ae,z,ee);else{if(typeof window>"u")return void ee(new Error("RecaptchaVerifier is only supported in browser"));let Ue=function Kx(){return ma.recaptchaEnterpriseScript}();0!==Ue.length&&(Ue+=Ae),tv(Ue).then(()=>{M(Ae,z,ee)}).catch(Fe=>{ee(Fe)})}}).catch(Ae=>{ee(Ae)})})})()}}function nv(p,u,d){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,P.A)(function*(p,u,d,g=!1){const v=new wd(p);let w;try{w=yield v.verify(d)}catch{w=yield v.verify(d,!0)}const M=Object.assign({},u);return Object.assign(M,g?{captchaResp:w}:{captchaResponse:w}),Object.assign(M,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(M,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),M})).apply(this,arguments)}function Yt(p,u,d,g){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,P.A)(function*(p,u,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield nv(p,u,d,"getOobCode"===d);return g(p,w)}return g(p,u).catch(function(){var w=(0,P.A)(function*(M){if("auth/missing-recaptcha-token"===M.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const z=yield nv(p,u,d,"getOobCode"===d);return g(p,z)}return Promise.reject(M)});return function(M){return w.apply(this,arguments)}}())}),Xe.apply(this,arguments)}function is(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function CT(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class $u{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return ht("not implemented")}_getIdTokenResponse(u){return ht("not implemented")}_linkToIdToken(u,d){return ht("not implemented")}_getReauthenticationResolver(u){return ht("not implemented")}}function rv(p,u){return iv.apply(this,arguments)}function iv(){return(iv=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:resetPassword",J(p,u))})).apply(this,arguments)}function ov(){return(ov=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ai(p,u){return Je.apply(this,arguments)}function Je(){return(Je=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function sv(){return(sv=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:update",J(p,u))})).apply(this,arguments)}function ek(p,u){return av.apply(this,arguments)}function av(){return(av=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithPassword",J(p,u))})).apply(this,arguments)}function Pp(p,u){return Re.apply(this,arguments)}function Re(){return(Re=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:sendOobCode",J(p,u))})).apply(this,arguments)}function Ui(){return(Ui=(0,P.A)(function*(p,u){return Pp(p,u)})).apply(this,arguments)}function Td(p,u){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,P.A)(function*(p,u){return Pp(p,u)})).apply(this,arguments)}function cv(p,u){return Np.apply(this,arguments)}function Np(){return(Np=(0,P.A)(function*(p,u){return Pp(p,u)})).apply(this,arguments)}function wc(){return(wc=(0,P.A)(function*(p,u){return Pp(p,u)})).apply(this,arguments)}function Ad(){return(Ad=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithEmailLink",J(p,u))})).apply(this,arguments)}function ye(){return(ye=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithEmailLink",J(p,u))})).apply(this,arguments)}class _a extends $u{constructor(u,d,g,v=null){super("password",g),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new _a(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new _a(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,P.A)(function*(){switch(d.signInMethod){case"password":return Yt(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ek);case"emailLink":return function xp(p,u){return Ad.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:zt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,P.A)(function*(){switch(g.signInMethod){case"password":return Yt(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ai);case"emailLink":return function DT(p,u){return ye.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:zt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function oo(p,u){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithIdp",J(p,u))})).apply(this,arguments)}class ko extends $u{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new ko(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):zt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v}=d,w=(0,He.Tt)(d,["providerId","signInMethod"]);if(!g||!v)return null;const M=new ko(g,v);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(u){return oo(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,oo(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,oo(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,oe.Am)(d)}return u}}function uv(){return(uv=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:sendVerificationCode",J(p,u))})).apply(this,arguments)}function lv(){return(lv=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithPhoneNumber",J(p,u))})).apply(this,arguments)}function zu(){return(zu=(0,P.A)(function*(p,u){const d=yield Ht(p,"POST","/v1/accounts:signInWithPhoneNumber",J(p,u));if(d.temporaryProof)throw At(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Hu={USER_NOT_FOUND:"user-not-found"};function Gu(){return(Gu=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithPhoneNumber",J(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Hu)})).apply(this,arguments)}class As extends $u{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new As({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new As({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function nk(p,u){return lv.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function rk(p,u){return zu.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Fp(p,u){return Gu.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:w}=u;return g||d||v||w?new As({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:w}):null}}class bc{constructor(u){var d,g,v,w,M,z;const ee=(0,oe.I9)((0,oe.hp)(u)),Ae=null!==(d=ee.apiKey)&&void 0!==d?d:null,Ue=null!==(g=ee.oobCode)&&void 0!==g?g:null,Fe=function os(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ee.mode)&&void 0!==v?v:null);te(Ae&&Ue&&Fe,"argument-error"),this.apiKey=Ae,this.operation=Fe,this.code=Ue,this.continueUrl=null!==(w=ee.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=ee.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(z=ee.tenantId)&&void 0!==z?z:null}static parseLink(u){const d=function qu(p){const u=(0,oe.I9)((0,oe.hp)(p)).link,d=u?(0,oe.I9)((0,oe.hp)(u)).deep_link_id:null,g=(0,oe.I9)((0,oe.hp)(p)).deep_link_id;return(g?(0,oe.I9)((0,oe.hp)(g)).link:null)||g||d||u||p}(u);try{return new bc(d)}catch{return null}}}let Bt=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return _a._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=bc.parseLink(g);return te(v,"argument-error"),_a._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Ds{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Tc extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Cc extends Tc{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return te("providerId"in d&&"signInMethod"in d,"argument-error"),ko._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return te(u.idToken||u.accessToken,"argument-error"),ko._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Cc.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Cc.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:w,nonce:M,providerId:z}=u;if(!g&&!v&&!d&&!w||!z)return null;try{return new Cc(z)._credential({idToken:d,accessToken:g,nonce:M,pendingToken:w})}catch{return null}}}let ST=(()=>{class p extends Tc{constructor(){super("facebook.com")}static credential(d){return ko._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),dv=(()=>{class p extends Tc{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return ko._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Sd=(()=>{class p extends Tc{constructor(){super("github.com")}static credential(d){return ko._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Ss extends $u{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return oo(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,oo(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,oo(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:v,pendingToken:w}=d;return g&&v&&w&&g===v?new Ss(g,w):null}static _create(u,d){return new Ss(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends Ds{constructor(u){te(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Dr.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Dr.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Ss.fromJSON(u);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return Ss._create(g,d)}catch{return null}}}let Lp=(()=>{class p extends Tc{constructor(){super("twitter.com")}static credential(d,g){return ko._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function RT(p,u){return fv.apply(this,arguments)}function fv(){return(fv=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signUp",J(p,u))})).apply(this,arguments)}class Fr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,v=!1){return(0,P.A)(function*(){const w=yield $._fromIdTokenResponse(u,g,v),M=Rd(g);return new Fr({user:w,providerId:M,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,P.A)(function*(){yield u._updateTokensIfNecessary(g,!0);const v=Rd(g);return new Fr({user:u,providerId:v,_tokenResponse:g,operationType:d})})()}}function Rd(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Vp(){return(Vp=(0,P.A)(function*(p){var u;if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const d=Kt(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Fr({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield RT(d,{returnSecureToken:!0}),v=yield Fr._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Md extends oe.g{constructor(u,d,g,v){var w;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,v){return new Md(u,d,g,v)}}function pv(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Md._fromErrorAndOperation(p,w,u,g):w})}function Up(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function Bp(){return Bp=(0,P.A)(function*(p,u){const d=(0,oe.Ku)(p);yield be(!0,d,u);const{providerUserInfo:g}=yield function ha(p,u){return to.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=Up(g||[]);return d.providerData=d.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Bp.apply(this,arguments)}function Oo(p,u){return jp.apply(this,arguments)}function jp(){return(jp=(0,P.A)(function*(p,u,d=!1){const g=yield Ar(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Fr._forOperation(p,"link",g)})).apply(this,arguments)}function be(p,u,d){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,P.A)(function*(p,u,d){yield ro(u);const v=!1===p?"provider-already-linked":"no-such-provider";te(Up(u.providerData).has(d)===p,u.auth,v)})).apply(this,arguments)}function G(p,u){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,P.A)(function*(p,u,d=!1){const{auth:g}=p;if((0,Oe._isFirebaseServerApp)(g.app))return Promise.reject(Ye(g));const v="reauthenticate";try{const w=yield Ar(p,pv(g,v,u,p),d);te(w.idToken,g,"internal-error");const M=Vi(w.idToken);te(M,g,"internal-error");const{sub:z}=M;return te(p.uid===z,g,"user-mismatch"),Fr._forOperation(p,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&zt(g,"user-mismatch"),w}})).apply(this,arguments)}function xd(p,u){return ya.apply(this,arguments)}function ya(){return(ya=(0,P.A)(function*(p,u,d=!1){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g="signIn",v=yield pv(p,g,u),w=yield Fr._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function kd(p,u){return $p.apply(this,arguments)}function $p(){return($p=(0,P.A)(function*(p,u){return xd(Kt(p),u)})).apply(this,arguments)}function gv(p,u){return zp.apply(this,arguments)}function zp(){return(zp=(0,P.A)(function*(p,u){const d=(0,oe.Ku)(p);return yield be(!1,d,u.providerId),Oo(d,u)})).apply(this,arguments)}function Sc(p,u){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,P.A)(function*(p,u){return G((0,oe.Ku)(p),u)})).apply(this,arguments)}function Gp(){return(Gp=(0,P.A)(function*(p,u){return Ht(p,"POST","/v1/accounts:signInWithCustomToken",J(p,u))})).apply(this,arguments)}function qp(){return qp=(0,P.A)(function*(p,u){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const d=Kt(p),g=yield function Od(p,u){return Gp.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield Fr._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),qp.apply(this,arguments)}class vr{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Rs._fromServerResponse(u,d):"totpInfo"in d?Fd._fromServerResponse(u,d):zt(u,"internal-error")}}class Rs extends vr{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Rs(d)}}class Fd extends vr{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Fd(d)}}function Ia(p,u,d){var g;te((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Rc(p){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,P.A)(function*(p){const u=Kt(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Ld(){return(Ld=(0,P.A)(function*(p,u,d){const g=Kt(p),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Ia(g,v,d),yield Yt(g,v,"getOobCode",Td)})).apply(this,arguments)}function Yr(){return Yr=(0,P.A)(function*(p,u,d){yield rv((0,oe.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,P.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Rc(p),v});return function(v){return g.apply(this,arguments)}}())}),Yr.apply(this,arguments)}function Ps(){return Ps=(0,P.A)(function*(p,u){yield function Xx(p,u){return sv.apply(this,arguments)}((0,oe.Ku)(p),{oobCode:u})}),Ps.apply(this,arguments)}function PT(p,u){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,P.A)(function*(p,u){const d=(0,oe.Ku)(p),g=yield rv(d,{oobCode:u}),v=g.requestType;switch(te(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(g.mfaInfo,d,"internal-error");default:te(g.email,d,"internal-error")}let w=null;return g.mfaInfo&&(w=vr._fromServerResponse(Kt(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function St(){return(St=(0,P.A)(function*(p,u){const{data:d}=yield PT((0,oe.Ku)(p),u);return d.email})).apply(this,arguments)}function Ud(){return(Ud=(0,P.A)(function*(p,u,d){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),M=yield Yt(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RT).catch(ee=>{throw"auth/password-does-not-meet-requirements"===ee.code&&Rc(p),ee}),z=yield Fr._fromIdTokenResponse(g,"signIn",M);return yield g._updateCurrentUser(z.user),z})).apply(this,arguments)}function Pc(){return(Pc=(0,P.A)(function*(p,u,d){const g=Kt(p),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(M,z){te(z.handleCodeInApp,g,"argument-error"),z&&Ia(g,M,z)})(v,d),yield Yt(g,v,"getOobCode",cv)})).apply(this,arguments)}function Qp(){return(Qp=(0,P.A)(function*(p,u,d){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=(0,oe.Ku)(p),v=Bt.credentialWithLink(u,d||Mn());return te(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),kd(g,v)})).apply(this,arguments)}function jd(){return(jd=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:createAuthUri",J(p,u))})).apply(this,arguments)}function Ea(){return Ea=(0,P.A)(function*(p,u){const g={identifier:u,continueUri:mn()?Mn():"http://localhost"},{signinMethods:v}=yield function Yp(p,u){return jd.apply(this,arguments)}((0,oe.Ku)(p),g);return v||[]}),Ea.apply(this,arguments)}function $d(){return $d=(0,P.A)(function*(p,u){const d=(0,oe.Ku)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&Ia(d.auth,v,u);const{email:w}=yield function tk(p,u){return Ui.apply(this,arguments)}(d.auth,v);w!==p.email&&(yield p.reload())}),$d.apply(this,arguments)}function Ku(){return Ku=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&Ia(g.auth,w,d);const{email:M}=yield function Cd(p,u){return wc.apply(this,arguments)}(g.auth,w);M!==p.email&&(yield p.reload())}),Ku.apply(this,arguments)}function Jp(){return(Jp=(0,P.A)(function*(p,u){return le(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Zp(){return Zp=(0,P.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,oe.Ku)(p),w={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},M=yield Ar(g,function NT(p,u){return Jp.apply(this,arguments)}(g.auth,w));g.displayName=M.displayName||null,g.photoURL=M.photoUrl||null;const z=g.providerData.find(({providerId:ee})=>"password"===ee);z&&(z.displayName=g.displayName,z.photoURL=g.photoURL),yield g._updateTokensIfNecessary(M)}),Zp.apply(this,arguments)}function vv(p,u,d){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,P.A)(function*(p,u,d){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const M=yield Ar(p,function AT(p,u){return ov.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(M,!0)}),Xp.apply(this,arguments)}class wa{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class Iv extends wa{constructor(u,d,g,v){super(u,d,g),this.username=v}}class OT extends wa{constructor(u,d){super(u,"facebook.com",d)}}class FT extends Iv{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class xn extends wa{constructor(u,d){super(u,"google.com",d)}}class LT extends Iv{constructor(u,d,g){super(u,"twitter.com",d,g)}}function VT(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function kT(p){var u,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const M=null===(d=null===(u=Vi(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(M)return new wa(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!g)return null;switch(g){case"facebook.com":return new OT(w,v);case"github.com":return new FT(w,v);case"google.com":return new xn(w,v);case"twitter.com":return new LT(w,v,p.screenName||null);case"custom":case"anonymous":return new wa(w,null);default:return new wa(w,g,v)}}(d)}class Ta{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new Ta("enroll",u,d)}static _fromMfaPendingCredential(u){return new Ta("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ta._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return Ta._fromIdtoken(u.multiFactorSession.idToken)}return null}}class ss{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Kt(u),v=d.customData._serverResponse,w=(v.mfaInfo||[]).map(z=>vr._fromServerResponse(g,z));te(v.mfaPendingCredential,g,"internal-error");const M=Ta._fromMfaPendingCredential(v.mfaPendingCredential);return new ss(M,w,function(){var z=(0,P.A)(function*(ee){const Ae=yield ee._process(g,M);delete v.mfaInfo,delete v.mfaPendingCredential;const Ue=Object.assign(Object.assign({},v),{idToken:Ae.idToken,refreshToken:Ae.refreshToken});switch(d.operationType){case"signIn":const Fe=yield Fr._fromIdTokenResponse(g,d.operationType,Ue);return yield g._updateCurrentUser(Fe.user),Fe;case"reauthenticate":return te(d.user,g,"internal-error"),Fr._forOperation(d.user,d.operationType,Ue);default:zt(g,"internal-error")}});return function(ee){return z.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,P.A)(function*(){return d.signInResolver(u)})()}}class og{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>vr._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new og(u)}getSession(){var u=this;return(0,P.A)(function*(){return Ta._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,P.A)(function*(){const v=u,w=yield g.getSession(),M=yield Ar(g.user,v._process(g.user.auth,w,d));return yield g.user._updateTokensIfNecessary(M),g.user.reload()})()}unenroll(u){var d=this;return(0,P.A)(function*(){const g="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const w=yield Ar(d.user,function ig(p,u){return le(p,"POST","/v2/accounts/mfaEnrollment:withdraw",J(p,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:M})=>M!==g),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const Qu=new WeakMap,Yu="__sak";class xs{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Yu,"1"),this.storage.removeItem(Yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const zd=(()=>{class p extends xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ju(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),w=this.localCache[g];v!==w&&d(g,w,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((z,ee,Ae)=>{this.notifyListeners(z,Ae)});const v=d.key;g?this.detachListener():this.stopPolling();const w=()=>{const z=this.storage.getItem(v);!g&&this.localCache[v]===z||this.notifyListeners(v,z)},M=this.storage.getItem(v);!function Cs(){return(0,oe.lT)()&&10===document.documentMode}()||M===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,w=this;return(0,P.A)(function*(){yield v().call(w,d,g),w.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,P.A)(function*(){const w=yield g().call(v,d);return v.localCache[d]=JSON.stringify(w),w})()}_remove(d){var g=()=>super._remove,v=this;return(0,P.A)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),uo=(()=>{class p extends xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Mc=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(w=>w.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,P.A)(function*(){const v=d,{eventId:w,eventType:M,data:z}=v.data,ee=g.handlersMap[M];if(!ee?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const Ae=Array.from(ee).map(function(){var Fe=(0,P.A)(function*(sn){return sn(v.origin,z)});return function(sn){return Fe.apply(this,arguments)}}()),Ue=yield function Zr(p){return Promise.all(p.map(function(){var u=(0,P.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Ae);v.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:Ue})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Ca(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class zT{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var v=this;return(0,P.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let M,z;return new Promise((ee,Ae)=>{const Ue=Ca("",20);w.port1.start();const Fe=setTimeout(()=>{Ae(new Error("unsupported_event"))},g);z={messageChannel:w,onMessage(sn){const go=sn;if(go.data.eventId===Ue)switch(go.data.status){case"ack":clearTimeout(Fe),M=setTimeout(()=>{Ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(M),ee(go.data.response);break;default:clearTimeout(Fe),clearTimeout(M),Ae(new Error("invalid_response"))}}},v.handlers.add(z),w.port1.addEventListener("message",z.onMessage),v.target.postMessage({eventType:u,eventId:Ue,data:d},[w.port2])}).finally(()=>{z&&v.removeMessageHandler(z)})})()}}function Zn(){return window}function ks(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function cg(){return(cg=(0,P.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lo="firebaseLocalStorageDb",Nc="firebaseLocalStorage",Aa="fbase_key";class Ju{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Hd(p,u){return p.transaction([Nc],u?"readwrite":"readonly").objectStore(Nc)}function Gd(){const p=indexedDB.open(lo,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Nc,{keyPath:Aa})}catch(v){d(v)}}),p.addEventListener("success",(0,P.A)(function*(){const g=p.result;g.objectStoreNames.contains(Nc)?u(g):(g.close(),yield function cr(){const p=indexedDB.deleteDatabase(lo);return new Ju(p).toPromise()}(),u(yield Gd()))}))})}function Dv(p,u,d){return Da.apply(this,arguments)}function Da(){return(Da=(0,P.A)(function*(p,u,d){const g=Hd(p,!0).put({[Aa]:u,value:d});return new Ju(g).toPromise()})).apply(this,arguments)}function lg(){return(lg=(0,P.A)(function*(p,u){const d=Hd(p,!1).get(u),g=yield new Ju(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Sv(p,u){const d=Hd(p,!0).delete(u);return new Ju(d).toPromise()}const Os=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,P.A)(function*(){return d.db||(d.db=yield Gd()),d.db})()}_withRetries(d){var g=this;return(0,P.A)(function*(){let v=0;for(;;)try{const w=yield g._openDb();return yield d(w)}catch(w){if(v++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,P.A)(function*(){return ks()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,P.A)(function*(){d.receiver=Mc._getInstance(function ug(){return ks()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,P.A)(function*(v,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(v,w){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,P.A)(function*(v,w){return["keyChanged"]});return function(v,w){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,P.A)(function*(){var g,v;if(d.activeServiceWorker=yield function HT(){return cg.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new zT(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,P.A)(function*(){if(g.sender&&g.activeServiceWorker&&function GT(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.A)(function*(){try{if(!indexedDB)return!1;const d=yield Gd();return yield Dv(d,Yu,"1"),yield Sv(d,Yu),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,P.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,P.A)(function*(){return v._withPendingWrite((0,P.A)(function*(){return yield v._withRetries(w=>Dv(w,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,P.A)(function*(){const v=yield g._withRetries(w=>function qT(p,u){return lg.apply(this,arguments)}(w,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,P.A)(function*(){return g._withPendingWrite((0,P.A)(function*(){return yield g._withRetries(v=>Sv(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,P.A)(function*(){const g=yield d._withRetries(M=>{const z=Hd(M,!1).getAll();return new Ju(z).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],w=new Set;if(0!==g.length)for(const{fbase_key:M,value:z}of g)w.add(M),JSON.stringify(d.localCache[M])!==JSON.stringify(z)&&(d.notifyListeners(M,z),v.push(M));for(const M of Object.keys(d.localCache))d.localCache[M]&&!w.has(M)&&(d.notifyListeners(M,null),v.push(M));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,P.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),ui=1e12;class Rr{constructor(u){this.auth=u,this.counter=ui,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Xr(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||ui;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||ui))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,P.A)(function*(){var g;return null===(g=d._widgets.get(u||ui))||void 0===g||g.execute(),""})()}}class Xr{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;te(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xc(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const on=Qt("rcb"),er=new Cr(3e4,6e4);class Lo{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Zn().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return te(function nt(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Ut(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((g,v)=>{const w=Zn().setTimeout(()=>{v(Nt(u,"network-request-failed"))},er.get());Zn()[on]=()=>{Zn().clearTimeout(w),delete Zn()[on];const z=Zn().grecaptcha;if(!z||!Ut(z))return void v(Nt(u,"internal-error"));const ee=z.render;z.render=(Ae,Ue)=>{const Fe=ee(Ae,Ue);return this.counter++,Fe},this.hostLanguage=d,g(z)},tv(`${function _n(){return ma.recaptchaV2Script}()}?${(0,oe.Am)({onload:on,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),v(Nt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Zn().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zu{load(u){return(0,P.A)(function*(){return new Rr(u)})()}clearedOneInstance(){}}const dg="recaptcha",kc={theme:"light",type:"image"};class Cn{constructor(u,d,g=Object.assign({},kc)){this.parameters=g,this.type=dg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(u),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;te(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zu:new Lo,this.validateStartingState()}verify(){var u=this;return(0,P.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(w=>{const M=z=>{z&&(u.tokenChangeListeners.delete(M),w(z))};u.tokenChangeListeners.add(M),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Zn()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,P.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,P.A)(function*(){te(mn()&&!ks(),u.auth,"internal-error"),yield function Sa(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function ci(p){return bs.apply(this,arguments)}(u.auth);te(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fs{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=As._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function Ls(){return(Ls=(0,P.A)(function*(p,u,d){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),v=yield $e(g,u,(0,oe.Ku)(d));return new Fs(v,w=>kd(g,w))})).apply(this,arguments)}function Vo(){return(Vo=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);yield be(!1,g,"phone");const v=yield $e(g.auth,u,(0,oe.Ku)(d));return new Fs(v,w=>gv(g,w))})).apply(this,arguments)}function li(){return(li=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);if((0,Oe._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));const v=yield $e(g.auth,u,(0,oe.Ku)(d));return new Fs(v,w=>Sc(g,w))})).apply(this,arguments)}function $e(p,u,d){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,P.A)(function*(p,u,d){var g;const v=yield d.verify();try{let w;if(te("string"==typeof v,p,"argument-error"),te(d.type===dg,p,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const M=w.session;if("phoneNumber"in w)return te("enroll"===M.type,p,"internal-error"),(yield function ng(p,u){return le(p,"POST","/v2/accounts/mfaEnrollment:start",J(p,u))}(p,{idToken:M.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{te("signin"===M.type,p,"internal-error");const z=(null===(g=w.multiFactorHint)||void 0===g?void 0:g.uid)||w.multiFactorUid;return te(z,p,"missing-multi-factor-info"),(yield function qd(p,u){return le(p,"POST","/v2/accounts/mfaSignIn:start",J(p,u))}(p,{mfaPendingCredential:M.credential,mfaEnrollmentId:z,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:M}=yield function Op(p,u){return uv.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:v});return M}}finally{d._reset()}}),Xu.apply(this,arguments)}function Bi(){return(Bi=(0,P.A)(function*(p,u){const d=(0,oe.Ku)(p);if((0,Oe._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ye(d.auth));yield Oo(d,u)})).apply(this,arguments)}let Vs=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Kt(d)}verifyPhoneNumber(d,g){return $e(this.auth,d,(0,oe.Ku)(g))}static credential(d,g){return As._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?As._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function ji(p,u){return u?De(u):(te(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class kn extends $u{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return oo(u,this._buildIdpRequest())}_linkToIdToken(u,d){return oo(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return oo(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function Kd(p){return xd(p.auth,new kn(p),p.bypassAuthState)}function ur(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),G(d,new kn(p),p.bypassAuthState)}function Vr(p){return tl.apply(this,arguments)}function tl(){return(tl=(0,P.A)(function*(p){const{auth:u,user:d}=p;return te(d,u,"internal-error"),Oo(d,new kn(p),p.bypassAuthState)})).apply(this,arguments)}class Us{constructor(u,d,g,v,w=!1){this.auth=u,this.resolver=g,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,P.A)(function*(g,v){u.pendingPromise={resolve:g,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,P.A)(function*(){const{urlResponse:g,sessionId:v,postBody:w,tenantId:M,error:z,type:ee}=u;if(z)return void d.reject(z);const Ae={auth:d.auth,requestUri:g,sessionId:v,tenantId:M||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ee)(Ae))}catch(Ue){d.reject(Ue)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Kd;case"linkViaPopup":case"linkViaRedirect":return Vr;case"reauthViaPopup":case"reauthViaRedirect":return ur;default:zt(this.auth,"internal-error")}}resolve(u){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qd=new Cr(2e3,1e4);function Ra(){return(Ra=(0,P.A)(function*(p,u,d){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Nt(p,"operation-not-supported-in-this-environment"));const g=Kt(p);we(p,u,Ds);const v=ji(g,d);return new pg(g,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function hg(){return(hg=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);if((0,Oe._isFirebaseServerApp)(g.auth.app))return Promise.reject(Nt(g.auth,"operation-not-supported-in-this-environment"));we(g.auth,u,Ds);const v=ji(g.auth,d);return new pg(g.auth,"reauthViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}function Yd(){return(Yd=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);we(g.auth,u,Ds);const v=ji(g.auth,d);return new pg(g.auth,"linkViaPopup",u,v,g).executeNotNull()})).apply(this,arguments)}let pg=(()=>{class p extends Us{constructor(d,g,v,w,M){super(d,g,w,M),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,P.A)(function*(){const g=yield d.execute();return te(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,P.A)(function*(){xt(1===d.filter.length,"Popup operations only handle one event");const g=Ca();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Nt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Nt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Qd.get())};d()}}return p.currentPopupAction=null,p})();const gg="pendingRedirect",Jd=new Map;class ck extends Us{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,P.A)(function*(){let g=Jd.get(d.auth._key());if(!g){try{const w=(yield function uk(p,u){return Mv.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(w)}catch(v){g=()=>Promise.reject(v)}Jd.set(d.auth._key(),g)}return d.bypassAuthState||Jd.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,P.A)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const v=yield g.auth._redirectUserForId(u.eventId);if(v)return g.user=v,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,P.A)(function*(){})()}cleanUp(){}}function Mv(){return(Mv=(0,P.A)(function*(p,u){const d=YT(u),g=QT(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function Nv(p,u){return xv.apply(this,arguments)}function xv(){return(xv=(0,P.A)(function*(p,u){return QT(p)._set(YT(u),"true")})).apply(this,arguments)}function kv(p,u){Jd.set(p._key(),u)}function QT(p){return De(p._redirectPersistence)}function YT(p){return ln(gg,p.config.apiKey,p.name)}function dk(p,u,d){return function hk(p,u,d){return Zd.apply(this,arguments)}(p,u,d)}function Zd(){return(Zd=(0,P.A)(function*(p,u,d){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p);we(p,u,Ds),yield g._initializationPromise;const v=ji(g,d);return yield Nv(v,g),v._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function Ov(p,u,d){return function fk(p,u,d){return Fv.apply(this,arguments)}(p,u,d)}function Fv(){return(Fv=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);if(we(g.auth,u,Ds),(0,Oe._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));yield g.auth._initializationPromise;const v=ji(g.auth,d);yield Nv(v,g.auth);const w=yield Vv(g);return v._openRedirect(g.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function pk(p,u,d){return function gk(p,u,d){return mg.apply(this,arguments)}(p,u,d)}function mg(){return(mg=(0,P.A)(function*(p,u,d){const g=(0,oe.Ku)(p);we(g.auth,u,Ds),yield g.auth._initializationPromise;const v=ji(g.auth,d);yield be(!1,g,u.providerId),yield Nv(v,g.auth);const w=yield Vv(g);return v._openRedirect(g.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function Ur(){return(Ur=(0,P.A)(function*(p,u){return yield Kt(p)._initializationPromise,nl(p,u,!1)})).apply(this,arguments)}function nl(p,u){return _g.apply(this,arguments)}function _g(){return(_g=(0,P.A)(function*(p,u,d=!1){if((0,Oe._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),v=ji(g,u),M=yield new ck(g,v,d).execute();return M&&!d&&(delete M.user._redirectEventId,yield g._persistUserIfCurrent(M.user),yield g._setRedirectUser(null,u)),M})).apply(this,arguments)}function Vv(p){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,P.A)(function*(p){const u=Ca(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class Bv{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Uo(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jv(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!jv(u)){const v=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Nt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eh(u))}saveEventToCache(u){this.cachedEventUids.add(eh(u)),this.lastProcessedEventTime=Date.now()}}function eh(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function jv({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function yg(p){return th.apply(this,arguments)}function th(){return(th=(0,P.A)(function*(p,u={}){return le(p,"GET","/v1/projects",u)})).apply(this,arguments)}const jt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vg=/^https?/;function Pr(){return(Pr=(0,P.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield yg(p);for(const d of u)try{if(JT(d))return}catch{}zt(p,"unauthorized-domain")})).apply(this,arguments)}function JT(p){const u=Mn(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const M=new URL(p);return""===M.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&M.hostname===g}if(!vg.test(d))return!1;if(jt.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const il=new Cr(3e4,6e4);function Bs(){const p=Zn().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let nh=null;const ZT=new Cr(5e3,15e3),$i="__/auth/iframe",$v="emulator/auth/iframe",zv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rh(p){const u=p.config;te(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?ws(u,$v):`https://${p.config.authDomain}/${$i}`,g={apiKey:u.apiKey,appName:p.name,v:Oe.SDK_VERSION},v=Hv.get(p.config.apiHost);v&&(g.eid=v);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${d}?${(0,oe.Am)(g).slice(1)}`}function Oc(){return Oc=(0,P.A)(function*(p){const u=yield function Ig(p){return nh=nh||function Di(p){return new Promise((u,d)=>{var g,v,w;function M(){Bs(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Bs(),d(Nt(p,"network-request-failed"))},timeout:il.get()})}if(null!==(v=null===(g=Zn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(w=Zn().gapi)||void 0===w||!w.load){const z=Qt("iframefcb");return Zn()[z]=()=>{gapi.load?M():d(Nt(p,"network-request-failed"))},tv(`${function Qx(){return ma.gapiScript}()}?onload=${z}`).catch(ee=>d(ee))}M()}}).catch(u=>{throw nh=null,u})}(p),nh}(p),d=Zn().gapi;return te(d,p,"internal-error"),u.open({where:document.body,url:rh(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zv,dontclear:!0},g=>new Promise(function(){var v=(0,P.A)(function*(w,M){yield g.restyle({setHideOnLeave:!1});const z=Nt(p,"network-request-failed"),ee=Zn().setTimeout(()=>{M(z)},ZT.get());function Ae(){Zn().clearTimeout(ee),w(g)}g.ping(Ae).then(Ae,()=>{M(z)})});return function(w,M){return v.apply(this,arguments)}}()))}),Oc.apply(this,arguments)}const ih={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sh{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const XT="__/auth/handler",eC="emulator/auth/handler",tC=encodeURIComponent("fac");function ah(p,u,d,g,v,w){return us.apply(this,arguments)}function us(){return(us=(0,P.A)(function*(p,u,d,g,v,w){te(p.config.authDomain,p,"auth-domain-config-required"),te(p.config.apiKey,p,"invalid-api-key");const M={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Oe.SDK_VERSION,eventId:v};if(u instanceof Ds){u.setDefaultLanguage(p.languageCode),M.providerId=u.providerId||"",(0,oe.Im)(u.getCustomParameters())||(M.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Ue,Fe]of Object.entries(w||{}))M[Ue]=Fe}if(u instanceof Tc){const Ue=u.getScopes().filter(Fe=>""!==Fe);Ue.length>0&&(M.scopes=Ue.join(","))}p.tenantId&&(M.tid=p.tenantId);const z=M;for(const Ue of Object.keys(z))void 0===z[Ue]&&delete z[Ue];const ee=yield p._getAppCheckToken(),Ae=ee?`#${tC}=${encodeURIComponent(ee)}`:"";return`${function nC({config:p}){return p.emulator?ws(p,eC):`https://${p.authDomain}/${XT}`}(p)}?${(0,oe.Am)(z).slice(1)}${Ae}`})).apply(this,arguments)}const bg="webStorageSupport",qv=class rC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=nl,this._overrideRedirectResult=kv}_openPopup(u,d,g,v){var w=this;return(0,P.A)(function*(){var M;xt(null===(M=w.eventManagers[u._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const z=yield ah(u,d,g,Mn(),v);return function Gv(p,u,d,g=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),M=Math.max((window.screen.availWidth-g)/2,0).toString();let z="";const ee=Object.assign(Object.assign({},ih),{width:g.toString(),height:v.toString(),top:w,left:M}),Ae=(0,oe.ZQ)().toLowerCase();d&&(z=ns(Ae)?"_blank":d),io(Ae)&&(u=u||"http://localhost",ee.scrollbars="yes");const Ue=Object.entries(ee).reduce((sn,[go,dl])=>`${sn}${go}=${dl},`,"");if(function he(p=(0,oe.ZQ)()){var u;return Id(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ae)&&"_self"!==z)return function mk(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",z),new sh(null);const Fe=window.open(u||"",z,Ue);te(Fe,p,"popup-blocked");try{Fe.focus()}catch{}return new sh(Fe)}(u,z,Ca())})()}_openRedirect(u,d,g,v){var w=this;return(0,P.A)(function*(){return yield w._originValidation(u),function Cv(p){Zn().location.href=p}(yield ah(u,d,g,Mn(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:w}=this.eventManagers[d];return v?Promise.resolve(v):(xt(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,P.A)(function*(){const g=yield function Eg(p){return Oc.apply(this,arguments)}(u),v=new Bv(u);return g.register("authEvent",w=>(te(w?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=g,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(bg,{type:bg},v=>{var w;const M=null===(w=v?.[0])||void 0===w?void 0:w[bg];void 0!==M&&d(!!M),zt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function rl(p){return Pr.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return ju()||ga()||Id()}};class Wv{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return ht("unexpected MultiFactorSessionType")}}}class ce extends Wv{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new ce(u)}_finalizeEnroll(u,d,g){return function wv(p,u){return le(p,"POST","/v2/accounts/mfaEnrollment:finalize",J(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Tn(p,u){return le(p,"POST","/v2/accounts/mfaSignIn:finalize",J(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gt=(()=>{class p{constructor(){}static assertion(d){return ce._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Fc="@firebase/auth";class Tg{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,P.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ti(){return window}(0,oe.XA)("authIdTokenMaxAge"),function Ec(p){ma=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=v=>{const w=Nt("internal-error");w.customData=v,d(w)},g.type="text/javascript",g.charset="UTF-8",function ei(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Kv(p){(0,Oe._registerComponent)(new gn.uA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:M,authDomain:z}=g.options;te(M&&!M.includes(":"),"invalid-api-key",{appName:g.name});const ee={apiKey:M,authDomain:z,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dp(p)},Ae=new Ic(g,v,w,ee);return function bT(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(De);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Ae,d),Ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new gn.uA("auth-internal",u=>{const d=Kt(u.getProvider("auth").getImmediate());return new Tg(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(Fc,"1.7.9",function Cg(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Oe.registerVersion)(Fc,"1.7.9","esm2017")}("Browser");function po(){return po=(0,P.A)(function*(p,u,d){var g;const{BuildInfo:v}=ti();xt(u.sessionId,"AuthEvent did not contain a session ID");const w=yield function Sg(p){return Lc.apply(this,arguments)}(u.sessionId),M={};return Id()?M.ibi=v.packageName:yc()?M.apn=v.packageName:zt(p,"operation-not-supported-in-this-environment"),v.displayName&&(M.appDisplayName=v.displayName),M.sessionId=w,ah(p,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,M)}),po.apply(this,arguments)}function ch(){return(ch=(0,P.A)(function*(p){const{BuildInfo:u}=ti(),d={};Id()?d.iosBundleId=u.packageName:yc()?d.androidPackageName=u.packageName:zt(p,"operation-not-supported-in-this-environment"),yield yg(p,d)})).apply(this,arguments)}function sl(){return(sl=(0,P.A)(function*(p,u,d){const{cordova:g}=ti();let v=()=>{};try{yield new Promise((w,M)=>{let z=null;function ee(){var Fe;w();const sn=null===(Fe=g.plugins.browsertab)||void 0===Fe?void 0:Fe.close;"function"==typeof sn&&sn(),"function"==typeof d?.close&&d.close()}function Ae(){z||(z=window.setTimeout(()=>{M(Nt(p,"redirect-cancelled-by-user"))},2e3))}function Ue(){"visible"===document?.visibilityState&&Ae()}u.addPassiveListener(ee),document.addEventListener("resume",Ae,!1),yc()&&document.addEventListener("visibilitychange",Ue,!1),v=()=>{u.removePassiveListener(ee),document.removeEventListener("resume",Ae,!1),document.removeEventListener("visibilitychange",Ue,!1),z&&window.clearTimeout(z)}})}finally{v()}})).apply(this,arguments)}function Lc(){return(Lc=(0,P.A)(function*(p){const u=function cC(p){if(xt(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rg extends Bv{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,P.A)(function*(){yield u.initPromise})()}}function Pg(p){return uh.apply(this,arguments)}function uh(){return(uh=(0,P.A)(function*(p){const u=yield lr()._get(ls(p));return u&&(yield lr()._remove(ls(p))),u})).apply(this,arguments)}function uC(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function lr(){return De(zd)}function ls(p){return ln("authEvent",p.config.apiKey,p.name)}function lh(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,oe.I9)(d.join("?"))}const eI=class hC{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nl,this._overrideRedirectResult=kv}_initialize(u){var d=this;return(0,P.A)(function*(){const g=u._key();let v=d.eventManagers.get(g);return v||(v=new Rg(u),d.eventManagers.set(g,v),d.attachCallbackListeners(u,v)),v})()}_openPopup(u){zt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,v){var w=this;return(0,P.A)(function*(){!function Dg(p){var u,d,g,v,w,M,z,ee,Ae,Ue;const Fe=ti();te("function"==typeof(null===(u=Fe?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof(null===(d=Fe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(w=null===(v=null===(g=Fe?.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(ee=null===(z=null===(M=Fe?.cordova)||void 0===M?void 0:M.plugins)||void 0===z?void 0:z.browsertab)||void 0===ee?void 0:ee.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ue=null===(Ae=Fe?.cordova)||void 0===Ae?void 0:Ae.InAppBrowser)||void 0===Ue?void 0:Ue.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const M=yield w._initialize(u);yield M.initialized(),M.resetRedirect(),function lk(){Jd.clear()}(),yield w._originValidation(u);const z=function Zv(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:uC(),postBody:null,tenantId:p.tenantId,error:Nt(p,"no-auth-event")}}(u,g,v);yield function Xv(p,u){return lr()._set(ls(p),u)}(u,z);const ee=yield function fo(p,u,d){return po.apply(this,arguments)}(u,z,d),Ae=yield function sC(p){const{cordova:u}=ti();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let v=null;g?u.plugins.browsertab.openUrl(p):v=u.InAppBrowser.open(p,function ev(p=(0,oe.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(v)})})}(ee);return function aC(p,u,d){return sl.apply(this,arguments)}(u,M,Ae)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function oC(p){return ch.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:v,BuildInfo:w}=ti(),M=setTimeout((0,P.A)(function*(){yield Pg(u),d.onEvent(Ng())}),500),z=function(){var Ue=(0,P.A)(function*(Fe){clearTimeout(M);const sn=yield Pg(u);let go=null;sn&&Fe?.url&&(go=function Mg(p,u){var d,g;const v=function lC(p){const u=lh(p),d=u.link?decodeURIComponent(u.link):void 0,g=lh(d).link,v=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return lh(v).link||v||g||d||p}(u);if(v.includes("/__/auth/callback")){const w=lh(v),M=w.firebaseError?function hn(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,z=null===(g=null===(d=M?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],ee=z?Nt(z):null;return ee?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:ee,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:v,postBody:null}}return null}(sn,Fe.url)),d.onEvent(go||Ng())});return function(sn){return Ue.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,z);const ee=v,Ae=`${w.packageName.toLowerCase()}://`;ti().handleOpenURL=function(){var Ue=(0,P.A)(function*(Fe){if(Fe.toLowerCase().startsWith(Ae)&&z({url:Fe}),"function"==typeof ee)try{ee(Fe)}catch(sn){console.error(sn)}});return function(Fe){return Ue.apply(this,arguments)}}()}};function Ng(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nt("no-auth-event")}}function js(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function fh(p=(0,oe.ZQ)()){return!("file:"!==js()&&"ionic:"!==js()&&"capacitor:"!==js()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uc(){try{const p=self.localStorage,u=Ca();if(p)return p.setItem(u,"1"),p.removeItem(u),!function Vc(p=(0,oe.ZQ)()){return function nI(){return(0,oe.lT)()&&11===document?.documentMode}()||function pC(p=(0,oe.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,oe.zW)()}catch{return xg()&&(0,oe.zW)()}return!1}function xg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cl(){return(function hh(){return"http:"===js()||"https:"===js()}()||(0,oe.sr)()||fh())&&!function tI(){return(0,oe.lV)()||(0,oe.Ll)()}()&&Uc()&&!xg()}function kg(){return fh()&&typeof document<"u"}function Og(){return(Og=(0,P.A)(function*(){return!!kg()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const Hi={LOCAL:"local",NONE:"none",SESSION:"session"},ph=te,gh="persistence";function ul(p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,P.A)(function*(p){yield p._initializationPromise;const u=Bc(),d=ln(gh,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function Bc(){var p;try{return(null===(p=function mC(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const yC=te;class jo{constructor(){this.browserResolver=De(qv),this.cordovaResolver=De(eI),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=nl,this._overrideRedirectResult=kv}_initialize(u){var d=this;return(0,P.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,v){var w=this;return(0,P.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(u,d,g,v)})()}_openRedirect(u,d,g,v){var w=this;return(0,P.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(u,d,g,v)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return kg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yC(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,P.A)(function*(){if(u.underlyingResolver)return;const d=yield function gC(){return Og.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function ll(p){return p.unwrap()}function rI(p){return oI(p)}function oI(p){const{_tokenResponse:u}=p instanceof oe.g?p.customData:p;if(!u)return null;if(!(p instanceof oe.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Vs.credentialFromResult(p);const d=u.providerId;if(!d||d===bt.PASSWORD)return null;let g;switch(d){case bt.GOOGLE:g=dv;break;case bt.FACEBOOK:g=ST;break;case bt.GITHUB:g=Sd;break;case bt.TWITTER:g=Lp;break;default:const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:z,nonce:ee}=u;return w||M||v||z?z?d.startsWith("saml.")?Ss._create(d,z):ko._fromParams({providerId:d,signInMethod:d,pendingToken:z,idToken:v,accessToken:w}):new Cc(d).credential({idToken:v,accessToken:w,rawNonce:ee}):null}return p instanceof oe.g?g.credentialFromError(p):g.credentialFromResult(p)}function On(p,u){return u.catch(d=>{throw d instanceof oe.g&&function iI(p,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new Lg(p,function Ev(p,u){var d;const g=(0,oe.Ku)(p),v=u;return te(u.customData.operationType,g,"argument-error"),te(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),ss._fromError(g,v)}(p,u));else if(g){const v=oI(u),w=u;v&&(w.credential=v,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:rI(d),additionalUserInfo:VT(d),user:$o.getOrCreate(v)}})}function Fg(p,u){return jc.apply(this,arguments)}function jc(){return(jc=(0,P.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>On(p,d.confirm(g))}})).apply(this,arguments)}class Lg{constructor(u,d){this.resolver=d,this.auth=function vk(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return On(ll(this.auth),this.resolver.resolveSignIn(u))}}class $o{constructor(u){this._delegate=u,this.multiFactor=function bv(p){const u=(0,oe.Ku)(p);return Qu.has(u)||Qu.set(u,og._fromUser(u)),Qu.get(u)}(u)}static getOrCreate(u){return $o.USER_MAP.has(u)||$o.USER_MAP.set(u,new $o(u)),$o.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,P.A)(function*(){return On(d.auth,gv(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,P.A)(function*(){return Fg(g.auth,function Rv(p,u,d){return Vo.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,P.A)(function*(){return On(d.auth,function fg(p,u,d){return Yd.apply(this,arguments)}(d._delegate,u,jo))})()}linkWithRedirect(u){var d=this;return(0,P.A)(function*(){return yield ul(Kt(d.auth)),pk(d._delegate,u,jo)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,P.A)(function*(){return On(d.auth,Sc(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Fg(this.auth,function Wd(p,u,d){return li.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return On(this.auth,function Pv(p,u,d){return hg.apply(this,arguments)}(this._delegate,u,jo))}reauthenticateWithRedirect(u){var d=this;return(0,P.A)(function*(){return yield ul(Kt(d.auth)),Ov(d._delegate,u,jo)})()}sendEmailVerification(u){return function _v(p,u){return $d.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,P.A)(function*(){return yield function Ac(p,u){return Bp.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function yv(p,u){const d=(0,oe.Ku)(p);return(0,Oe._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ye(d.auth)):vv(d,u,null)}(this._delegate,u)}updatePassword(u){return function xT(p,u){return vv((0,oe.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function el(p,u){return Bi.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function co(p,u){return Zp.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function MT(p,u,d){return Ku.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$o.USER_MAP=new WeakMap;const $s=te;let mh=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;$s(v,"invalid-api-key",{appName:d.name}),$s(v,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?jo:void 0;this._delegate=g.initialize({options:{persistence:aI(v,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Jn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$o.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function TT(p,u,d){const g=Kt(p);te(g._canInitEmulator,g,"emulator-config-failed"),te(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,w=is(u),{host:M,port:z}=function Jx(p){const u=is(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const w=v[1];return{host:w,port:CT(g.substr(w.length+1))}}{const[w,M]=g.split(":");return{host:w,port:CT(M)}}}(u);g.config.emulator={url:`${w}//${M}${null===z?"":`:${z}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:M,port:z,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Zx(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function Wp(p,u){return Ps.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return PT(this._delegate,d)}confirmPasswordReset(d,g){return function ok(p,u,d){return Yr.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var v=this;return(0,P.A)(function*(){return On(v._delegate,function so(p,u,d){return Ud.apply(this,arguments)}(v._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function mv(p,u){return Ea.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function ao(p,u){const d=bc.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,P.A)(function*(){$s(cl(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function Lv(p,u){return Ur.apply(this,arguments)}(d._delegate,jo);return g?On(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function al(p,u){Kt(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,v){const{next:w,error:M,complete:z}=sI(d,g,v);return this._delegate.onAuthStateChanged(w,M,z)}onIdTokenChanged(d,g,v){const{next:w,error:M,complete:z}=sI(d,g,v);return this._delegate.onIdTokenChanged(w,M,z)}sendSignInLinkToEmail(d,g){return function Bd(p,u,d){return Pc.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function ik(p,u,d){return Ld.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,P.A)(function*(){let v;switch(function Pa(p,u){ph(Object.values(Hi).includes(u),p,"invalid-persistence-type"),(0,oe.lV)()?ph(u!==Hi.SESSION,p,"unsupported-persistence-type"):(0,oe.Ll)()?ph(u===Hi.NONE,p,"unsupported-persistence-type"):xg()?ph(u===Hi.NONE||u===Hi.LOCAL&&(0,oe.zW)(),p,"unsupported-persistence-type"):ph(u===Hi.NONE||Uc(),p,"unsupported-persistence-type")}(g._delegate,d),d){case Hi.SESSION:v=uo;break;case Hi.LOCAL:v=(yield De(Os)._isAvailable())?Os:zd;break;case Hi.NONE:v=Ve;break;default:return zt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return On(this._delegate,function Pd(p){return Vp.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return On(this._delegate,kd(this._delegate,d))}signInWithCustomToken(d){return On(this._delegate,function va(p,u){return qp.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return On(this._delegate,function Kp(p,u,d){return(0,Oe._isFirebaseServerApp)(p.app)?Promise.reject(Ye(p)):kd((0,oe.Ku)(p),Bt.credential(u,d)).catch(function(){var g=(0,P.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Rc(p),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return On(this._delegate,function Ms(p,u,d){return Qp.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return Fg(this._delegate,function as(p,u,d){return Ls.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,P.A)(function*(){return $s(cl(),g._delegate,"operation-not-supported-in-this-environment"),On(g._delegate,function ho(p,u,d){return Ra.apply(this,arguments)}(g._delegate,d,jo))})()}signInWithRedirect(d){var g=this;return(0,P.A)(function*(){return $s(cl(),g._delegate,"operation-not-supported-in-this-environment"),yield ul(g._delegate),dk(g._delegate,d,jo)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Fo(p,u){return St.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Hi,p})();function sI(p,u,d){let g=p;"function"!=typeof p&&({next:g,error:u,complete:d}=p);const v=g;return{next:M=>v(M&&$o.getOrCreate(M)),error:u,complete:d}}function aI(p,u){const d=function _C(p,u){const d=Bc();if(!d)return[];const g=ln(gh,p,u);switch(d.getItem(g)){case Hi.NONE:return[Ve];case Hi.LOCAL:return[Os,uo];case Hi.SESSION:return[uo];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(Os)&&d.push(Os),typeof window<"u")for(const g of[zd,uo])d.includes(g)||d.push(g);return d.includes(Ve)||d.push(Ve),d}class _h{constructor(){this.providerId="phone",this._delegate=new Vs(ll(Be.A.auth()))}static credential(u,d){return Vs.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}_h.PHONE_SIGN_IN_METHOD=Vs.PHONE_SIGN_IN_METHOD,_h.PROVIDER_ID=Vs.PROVIDER_ID;const cI=te;class uI{constructor(u,d,g=Be.A.app()){var v;cI(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Cn(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yh(p){p.INTERNAL.registerComponent(new gn.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new mh(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Bt,FacebookAuthProvider:ST,GithubAuthProvider:Sd,GoogleAuthProvider:dv,OAuthProvider:Cc,SAMLAuthProvider:Dr,PhoneAuthProvider:_h,PhoneMultiFactorGenerator:gt,RecaptchaVerifier:uI,TwitterAuthProvider:Lp,Auth:mh,AuthCredential:$u,Error:oe.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.14")}(Be.A)},749:(Mo,yr,it)=>{it.d(yr,{P2:()=>rr});var P=it(467);const Be=(we,xe)=>xe.some(te=>we instanceof te);let Oe,oe;const gn=new WeakMap,bn=new WeakMap,bt=new WeakMap,ue=new WeakMap,_e=new WeakMap;let Tt={get(we,xe,te){if(we instanceof IDBTransaction){if("done"===xe)return bn.get(we);if("objectStoreNames"===xe)return we.objectStoreNames||bt.get(we);if("store"===xe)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return tt(we[xe])},set:(we,xe,te)=>(we[xe]=te,!0),has:(we,xe)=>we instanceof IDBTransaction&&("done"===xe||"store"===xe)||xe in we};function ot(we){return"function"==typeof we?function Vt(we){return we!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(we)?function(...xe){return we.apply(Pn(this),xe),tt(gn.get(this))}:function(...xe){return tt(we.apply(Pn(this),xe))}:function(xe,...te){const ht=we.call(Pn(this),xe,...te);return bt.set(ht,xe.sort?xe.sort():[xe]),tt(ht)}}(we):(we instanceof IDBTransaction&&function _t(we){if(bn.has(we))return;const xe=new Promise((te,ht)=>{const xt=()=>{we.removeEventListener("complete",Mn),we.removeEventListener("error",mn),we.removeEventListener("abort",mn)},Mn=()=>{te(),xt()},mn=()=>{ht(we.error||new DOMException("AbortError","AbortError")),xt()};we.addEventListener("complete",Mn),we.addEventListener("error",mn),we.addEventListener("abort",mn)});bn.set(we,xe)}(we),Be(we,function qt(){return Oe||(Oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(we,Tt):we)}function tt(we){if(we instanceof IDBRequest)return function ze(we){const xe=new Promise((te,ht)=>{const xt=()=>{we.removeEventListener("success",Mn),we.removeEventListener("error",mn)},Mn=()=>{te(tt(we.result)),xt()},mn=()=>{ht(we.error),xt()};we.addEventListener("success",Mn),we.addEventListener("error",mn)});return xe.then(te=>{te instanceof IDBCursor&&gn.set(te,we)}).catch(()=>{}),_e.set(xe,we),xe}(we);if(ue.has(we))return ue.get(we);const xe=ot(we);return xe!==we&&(ue.set(we,xe),_e.set(xe,we)),xe}const Pn=we=>_e.get(we);function rr(we,xe,{blocked:te,upgrade:ht,blocking:xt,terminated:Mn}={}){const mn=indexedDB.open(we,xe),ai=tt(mn);return ht&&mn.addEventListener("upgradeneeded",Nn=>{ht(tt(mn.result),Nn.oldVersion,Nn.newVersion,tt(mn.transaction),Nn)}),te&&mn.addEventListener("blocked",Nn=>te(Nn.oldVersion,Nn.newVersion,Nn)),ai.then(Nn=>{Mn&&Nn.addEventListener("close",()=>Mn()),xt&&Nn.addEventListener("versionchange",bi=>xt(bi.oldVersion,bi.newVersion,bi))}).catch(()=>{}),ai}const zt=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],or=new Map;function Ye(we,xe){if(!(we instanceof IDBDatabase)||xe in we||"string"!=typeof xe)return;if(or.get(xe))return or.get(xe);const te=xe.replace(/FromIndex$/,""),ht=xe!==te,xt=Nt.includes(te);if(!(te in(ht?IDBIndex:IDBObjectStore).prototype)||!xt&&!zt.includes(te))return;const Mn=function(){var mn=(0,P.A)(function*(ai,...Nn){const bi=this.transaction(ai,xt?"readwrite":"readonly");let Cr=bi.store;return ht&&(Cr=Cr.index(Nn.shift())),(yield Promise.all([Cr[te](...Nn),xt&&bi.done]))[0]});return function(Nn){return mn.apply(this,arguments)}}();return or.set(xe,Mn),Mn}!function Jn(we){Tt=we(Tt)}(we=>({...we,get:(xe,te,ht)=>Ye(xe,te)||we.get(xe,te,ht),has:(xe,te)=>!!Ye(xe,te)||we.has(xe,te)}))},467:(Mo,yr,it)=>{function P(Oe,oe,qt,He,gn,bn,bt){try{var ue=Oe[bn](bt),_e=ue.value}catch(ze){return void qt(ze)}ue.done?oe(_e):Promise.resolve(_e).then(He,gn)}function Be(Oe){return function(){var oe=this,qt=arguments;return new Promise(function(He,gn){var bn=Oe.apply(oe,qt);function bt(_e){P(bn,He,gn,bt,ue,"next",_e)}function ue(_e){P(bn,He,gn,bt,ue,"throw",_e)}bt(void 0)})}}it.d(yr,{A:()=>Be})},635:(Mo,yr,it)=>{function oe(Z,ie){var se={};for(var J in Z)Object.prototype.hasOwnProperty.call(Z,J)&&ie.indexOf(J)<0&&(se[J]=Z[J]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(J=Object.getOwnPropertySymbols(Z);le<J.length;le++)ie.indexOf(J[le])<0&&Object.prototype.propertyIsEnumerable.call(Z,J[le])&&(se[J[le]]=Z[J[le]])}return se}function ze(Z,ie,se,J){return new(se||(se=Promise))(function(me,qe){function wt(Wt){try{et(J.next(Wt))}catch(st){qe(st)}}function Ht(Wt){try{et(J.throw(Wt))}catch(st){qe(st)}}function et(Wt){Wt.done?me(Wt.value):function le(me){return me instanceof se?me:new se(function(qe){qe(me)})}(Wt.value).then(wt,Ht)}et((J=J.apply(Z,ie||[])).next())})}function ir(Z){return this instanceof ir?(this.v=Z,this):new ir(Z)}function zt(Z,ie,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,J=se.apply(Z,ie||[]),me=[];return le=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),wt("next"),wt("throw"),wt("return",function qe(At){return function(Ut){return Promise.resolve(Ut).then(At,st)}}),le[Symbol.asyncIterator]=function(){return this},le;function wt(At,Ut){J[At]&&(le[At]=function(kt){return new Promise(function(Or,ci){me.push([At,kt,Or,ci])>1||Ht(At,kt)})},Ut&&(le[At]=Ut(le[At])))}function Ht(At,Ut){try{!function et(At){At.value instanceof ir?Promise.resolve(At.value.v).then(Wt,st):Li(me[0][2],At)}(J[At](Ut))}catch(kt){Li(me[0][3],kt)}}function Wt(At){Ht("next",At)}function st(At){Ht("throw",At)}function Li(At,Ut){At(Ut),me.shift(),me.length&&Ht(me[0][0],me[0][1])}}function or(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function Vt(Z){var ie="function"==typeof Symbol&&Symbol.iterator,se=ie&&Z[ie],J=0;if(se)return se.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&J>=Z.length&&(Z=void 0),{value:Z&&Z[J++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),se={},J("next"),J("throw"),J("return"),se[Symbol.asyncIterator]=function(){return this},se);function J(me){se[me]=Z[me]&&function(qe){return new Promise(function(wt,Ht){!function le(me,qe,wt,Ht){Promise.resolve(Ht).then(function(et){me({value:et,done:wt})},qe)}(wt,Ht,(qe=Z[me](qe)).done,qe.value)})}}}it.d(yr,{AQ:()=>zt,N3:()=>ir,Tt:()=>oe,sH:()=>ze,xN:()=>or}),"function"==typeof SuppressedError&&SuppressedError}},Mo=>{Mo(Mo.s=891)}]);