"use strict";(self.webpackChunkFitnessPlaner=self.webpackChunkFitnessPlaner||[]).push([[792],{401:(qo,si,yt)=>{yt.d(si,{Am:()=>Go,Bd:()=>oe,FA:()=>Te,Fy:()=>jr,I9:()=>Ju,Im:()=>cs,Ku:()=>ge,Ll:()=>Be,T9:()=>Br,Uj:()=>$t,XA:()=>hn,ZQ:()=>at,bD:()=>Ss,c1:()=>Xt,cY:()=>Jt,eX:()=>ce,g:()=>pe,gR:()=>Zt,hp:()=>ao,jZ:()=>Re,lT:()=>hr,lV:()=>Kn,mS:()=>qt,nr:()=>eu,p7:()=>Rt,sr:()=>dr,tD:()=>fa,u:()=>fe,zW:()=>ie,zw:()=>Je});const le=function(U){const F=[];let W=0;for(let ee=0;ee<U.length;ee++){let Y=U.charCodeAt(ee);Y<128?F[W++]=Y:Y<2048?(F[W++]=Y>>6|192,F[W++]=63&Y|128):55296==(64512&Y)&&ee+1<U.length&&56320==(64512&U.charCodeAt(ee+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++ee)),F[W++]=Y>>18|240,F[W++]=Y>>12&63|128,F[W++]=Y>>6&63|128,F[W++]=63&Y|128):(F[W++]=Y>>12|224,F[W++]=Y>>6&63|128,F[W++]=63&Y|128)}return F},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,F){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ee=[];for(let Y=0;Y<U.length;Y+=3){const Ce=U[Y],Ne=Y+1<U.length,Bn=Ne?U[Y+1]:0,qe=Y+2<U.length,jn=qe?U[Y+2]:0;let lo=(15&Bn)<<2|jn>>6,ec=63&jn;qe||(ec=64,Ne||(lo=64)),ee.push(W[Ce>>2],W[(3&Ce)<<4|Bn>>4],W[lo],W[ec])}return ee.join("")},encodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(U):this.encodeByteArray(le(U),F)},decodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(U):function(U){const F=[];let W=0,ee=0;for(;W<U.length;){const Y=U[W++];if(Y<128)F[ee++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ce=U[W++];F[ee++]=String.fromCharCode((31&Y)<<6|63&Ce)}else if(Y>239&&Y<365){const qe=((7&Y)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;F[ee++]=String.fromCharCode(55296+(qe>>10)),F[ee++]=String.fromCharCode(56320+(1023&qe))}else{const Ce=U[W++],Ne=U[W++];F[ee++]=String.fromCharCode((15&Y)<<12|(63&Ce)<<6|63&Ne)}}return F.join("")}(this.decodeStringToByteArray(U,F))},decodeStringToByteArray(U,F){this.init_();const W=F?this.charToByteMapWebSafe_:this.charToByteMap_,ee=[];for(let Y=0;Y<U.length;){const Ce=W[U.charAt(Y++)],Bn=Y<U.length?W[U.charAt(Y)]:0;++Y;const jn=Y<U.length?W[U.charAt(Y)]:64;++Y;const xt=Y<U.length?W[U.charAt(Y)]:64;if(++Y,null==Ce||null==Bn||null==jn||null==xt)throw new Wn;ee.push(Ce<<2|Bn>>4),64!==jn&&(ee.push(Bn<<4&240|jn>>2),64!==xt&&ee.push(jn<<6&192|xt))}return ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class Wn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $t=function(U){return function(U){const F=le(U);return Ze.encodeByteArray(F,!0)}(U).replace(/\./g,"")},fe=function(U){try{return Ze.decodeString(U,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function Je(U,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return F}for(const W in F)!F.hasOwnProperty(W)||!Ot(W)||(U[W]=Je(U[W],F[W]));return U}function Ot(U){return"__proto__"!==U}function qt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gt=()=>{try{return qt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=U&&fe(U[1]);return F&&JSON.parse(F)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Br=()=>{var U;return null===(U=gt())||void 0===U?void 0:U.config},hn=U=>{var F;return null===(F=gt())||void 0===F?void 0:F[`_${U}`]};class Jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,W)=>{this.resolve=F,this.reject=W})}wrapCallback(F){return(W,ee)=>{W?this.reject(W):this.resolve(ee),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(W):F(W,ee))}}}function jr(U,F){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ee=F||"demo-project",Y=U.iat||0,Ce=U.sub||U.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${ee}`,aud:ee,iat:Y,exp:Y+3600,auth_time:Y,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},U);return[$t(JSON.stringify({alg:"none",type:"JWT"})),$t(JSON.stringify(Ne)),""].join(".")}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function Be(){var U;const F=null===(U=gt())||void 0===U?void 0:U.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function oe(){return typeof window<"u"||Rt()}function Rt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Xt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function dr(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Kn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hr(){const U=at();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function eu(){return!Be()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((U,F)=>{try{let W=!0;const ee="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ee);Y.onsuccess=()=>{Y.result.close(),W||self.indexedDB.deleteDatabase(ee),U(!0)},Y.onupgradeneeded=()=>{W=!1},Y.onerror=()=>{var Ce;F((null===(Ce=Y.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(W){F(W)}})}class pe extends Error{constructor(F,W,ee){super(W),this.code=F,this.customData=ee,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(F,W,ee){this.service=F,this.serviceName=W,this.errors=ee}create(F,...W){const ee=W[0]||{},Y=`${this.service}/${F}`,Ce=this.errors[F],Ne=Ce?function nt(U,F){return U.replace(Bt,(W,ee)=>{const Y=F[ee];return null!=Y?String(Y):`<${ee}?>`})}(Ce,ee):"Error";return new pe(Y,`${this.serviceName}: ${Ne} (${Y}).`,ee)}}const Bt=/\{\$([^}]+)}/g;function Zt(U,F){return Object.prototype.hasOwnProperty.call(U,F)}function cs(U){for(const F in U)if(Object.prototype.hasOwnProperty.call(U,F))return!1;return!0}function Ss(U,F){if(U===F)return!0;const W=Object.keys(U),ee=Object.keys(F);for(const Y of W){if(!ee.includes(Y))return!1;const Ce=U[Y],Ne=F[Y];if(oo(Ce)&&oo(Ne)){if(!Ss(Ce,Ne))return!1}else if(Ce!==Ne)return!1}for(const Y of ee)if(!W.includes(Y))return!1;return!0}function oo(U){return null!==U&&"object"==typeof U}function Go(U){const F=[];for(const[W,ee]of Object.entries(U))Array.isArray(ee)?ee.forEach(Y=>{F.push(encodeURIComponent(W)+"="+encodeURIComponent(Y))}):F.push(encodeURIComponent(W)+"="+encodeURIComponent(ee));return F.length?"&"+F.join("&"):""}function Ju(U){const F={};return U.replace(/^\?/,"").split("&").forEach(ee=>{if(ee){const[Y,Ce]=ee.split("=");F[decodeURIComponent(Y)]=decodeURIComponent(Ce)}}),F}function ao(U){const F=U.indexOf("?");if(!F)return"";const W=U.indexOf("#",F);return U.substring(F,W>0?W:void 0)}function fa(U,F){const W=new $i(U,F);return W.subscribe.bind(W)}class $i{constructor(F,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{F(this)}).catch(ee=>{this.error(ee)})}next(F){this.forEachObserver(W=>{W.next(F)})}error(F){this.forEachObserver(W=>{W.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,W,ee){let Y;if(void 0===F&&void 0===W&&void 0===ee)throw new Error("Missing Observer.");Y=function pa(U,F){if("object"!=typeof U||null===U)return!1;for(const W of F)if(W in U&&"function"==typeof U[W])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:W,complete:ee},void 0===Y.next&&(Y.next=Ps),void 0===Y.error&&(Y.error=Ps),void 0===Y.complete&&(Y.complete=Ps);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ce}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,F)}sendOne(F,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{W(this.observers[F])}catch(ee){typeof console<"u"&&console.error&&console.error(ee)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ps(){}function ge(U){return U&&U._delegate?U._delegate:U}},14:(qo,si,yt)=>{function $(n,e){return Object.is(n,e)}let We=null,$e=!1,le=1;const _n=Symbol("SIGNAL");function Ze(n){const e=We;return We=n,e}const fe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function be(n){if($e)throw new Error("");if(null===We)return;We.consumerOnSignalRead(n);const e=We.nextProducerIndex++;jr(We),e<We.producerNode.length&&We.producerNode[e]!==n&&Jt(We)&&hn(We.producerNode[e],We.producerIndexOfThis[e]),We.producerNode[e]!==n&&(We.producerNode[e]=n,We.producerIndexOfThis[e]=Jt(We)?Br(n,We,e):0),We.producerLastReadVersion[e]=n.version}function Ot(n){if((!Jt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==le)){if(!n.producerMustRecompute(n)&&!lr(n))return n.dirty=!1,void(n.lastCleanEpoch=le);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=le}}function qt(n){if(void 0===n.liveConsumerNode)return;const e=$e;$e=!0;try{for(const t of n.liveConsumerNode)t.dirty||on(t)}finally{$e=e}}function kr(){return!1!==We?.consumerAllowSignalWrites}function on(n){n.dirty=!0,qt(n),n.consumerMarkedDirty?.(n)}function vt(n){return n&&(n.nextProducerIndex=0),Ze(n)}function gt(n,e){if(Ze(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Jt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hn(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function lr(n){jr(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ot(t),r!==t.version))return!0}return!1}function Ur(n){if(jr(n),Jt(n))for(let e=0;e<n.producerNode.length;e++)hn(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Br(n,e,t){if(at(n),0===n.liveConsumerNode.length&&Re(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Br(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hn(n,e){if(at(n),1===n.liveConsumerNode.length&&Re(n))for(let r=0;r<n.producerNode.length;r++)hn(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jr(i),i.producerIndexOfThis[r]=e}}function Jt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jr(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function at(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Re(n){return void 0!==n.producerNode}const oe=Symbol("UNSET"),Rt=Symbol("COMPUTING"),Xt=Symbol("ERRORED"),dr={...fe,value:oe,dirty:!0,error:null,equal:$,producerMustRecompute:n=>n.value===oe||n.value===Rt,producerRecomputeValue(n){if(n.value===Rt)throw new Error("Detected cycle in computations.");const e=n.value;n.value=Rt;const t=vt(n);let r;try{r=n.computation()}catch(i){r=Xt,n.error=i}finally{gt(n,t)}e!==oe&&e!==Xt&&r!==Xt&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let us=function Kn(){throw new Error};function hr(){us()}let hi=null;function de(n,e){kr()||hr(),n.equal(n.value,e)||(n.value=e,function nt(n){n.version++,function Je(){le++}(),qt(n),hi?.()}(n))}const Te={...fe,equal:$,value:void 0};function It(n){return"function"==typeof n}function $s(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Wt=$s(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function an(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(It(r))try{r()}catch(s){e=s instanceof Wt?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{tu(s)}catch(o){e=e??[],o instanceof Wt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)tu(e);else{if(e instanceof Zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&an(t,e)}remove(e){const{_finalizers:t}=this;t&&an(t,e),e instanceof Zt&&e._removeParent(this)}}Zt.EMPTY=(()=>{const n=new Zt;return n.closed=!0,n})();const Si=Zt.EMPTY;function cs(n){return n instanceof Zt||n&&"closed"in n&&It(n.remove)&&It(n.add)&&It(n.unsubscribe)}function tu(n){It(n)?n():n.unsubscribe()}const Ss={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oo={setTimeout(n,e,...t){const{delegate:r}=oo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function th(n){oo.setTimeout(()=>{const{onUnhandledError:e}=Ss;if(!e)throw n;e(n)})}function Go(){}const Ju=fa("C",void 0,void 0);function fa(n,e,t){return{kind:n,value:e,error:t}}let $i=null;function El(n){if(Ss.useDeprecatedSynchronousErrorHandling){const e=!$i;if(e&&($i={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=$i;if($i=null,t)throw r}}else n()}class Ps extends Zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cs(e)&&e.add(this)):this.destination=Tl}static create(e,t,r){return new fi(e,t,r)}next(e){this.isStopped?wl(function nh(n){return fa("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wl(function ao(n){return fa("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wl(Ju,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xu=Function.prototype.bind;function qs(n,e){return Xu.call(n,e)}class Zu{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){uo(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){uo(r)}else uo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){uo(t)}}}class fi extends Ps{constructor(e,t,r){let i;if(super(),It(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ss.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qs(e.next,s),error:e.error&&qs(e.error,s),complete:e.complete&&qs(e.complete,s)}):i=e}this.destination=new Zu(i)}}function uo(n){Ss.useDeprecatedSynchronousErrorHandling?function pa(n){Ss.useDeprecatedSynchronousErrorHandling&&$i&&($i.errorThrown=!0,$i.error=n)}(n):th(n)}function wl(n,e){const{onStoppedNotification:t}=Ss;t&&oo.setTimeout(()=>t(n,e))}const Tl={closed:!0,next:Go,error:function rh(n){throw n},complete:Go},co="function"==typeof Symbol&&Symbol.observable||"@@observable";function qi(n){return n}function nu(n){return 0===n.length?qi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Vt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ge(n){return n&&n instanceof Ps||function ze(n){return n&&It(n.next)&&It(n.error)&&It(n.complete)}(n)&&cs(n)}(t)?t:new fi(t,r,i);return El(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=bl(r))((i,s)=>{const o=new fi({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[co](){return this}pipe(...t){return nu(t)(this)}toPromise(t){return new(t=bl(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function bl(n){var e;return null!==(e=n??Ss.Promise)&&void 0!==e?e:Promise}const U=$s(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class n extends Vt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new W(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new U}next(t){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){El(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Si:(this.currentObservers=null,s.push(t),new Zt(()=>{this.currentObservers=null,an(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Vt;return t.source=this,t}}return n.create=(e,t)=>new W(e,t),n})();class W extends F{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Si}}class ee extends F{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Y(n){return It(n?.lift)}function Ce(n){return e=>{if(Y(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new Bn(n,e,t,r,i)}class Bn extends Ps{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function qe(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ne(r,s=>{r.next(n.call(e,s,i++))}))})}const jn=$s(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zn(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ne(r,s=>n.call(e,s,i++)&&r.next(s)))})}const xt=new Vt(n=>n.complete());function ga(n){return n<=0?()=>xt:Ce((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sh(n){return Ce((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Al(n=nT){return Ce((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nT(){return new jn}function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zn((i,s)=>n(i,s,r)):qi,ga(1),t?sh(e):Al(()=>new jn))}const rT="https://g.co/ng/security#xss";class ye extends Error{constructor(e,t){super(function ru(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ma(n){return{toString:n}.toString()}const Dl="__parameters__";function Sl(n,e,t){return ma(()=>{const r=function tc(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(Dl)?u[Dl]:Object.defineProperty(u,Dl,{value:[]})[Dl];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const Qn=globalThis;function Cn(n){for(let e in n)if(n[e]===Cn)return e;throw Error("Could not find renamed property on target object.")}function dP(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(zr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Pp(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const _y=Cn({__forward_ref__:Cn});function Dn(n){return n.__forward_ref__=Dn,n.toString=function(){return zr(this())},n}function ht(n){return Rp(n)?n():n}function Rp(n){return"function"==typeof n&&n.hasOwnProperty(_y)&&n.__forward_ref__===Dn}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gs(n){return{providers:n.providers||[],imports:n.imports||[]}}function xp(n){return dT(n,Pl)||dT(n,kp)}function dT(n,e){return n.hasOwnProperty(e)?n[e]:null}function Mp(n){return n&&(n.hasOwnProperty(Ey)||n.hasOwnProperty(mP))?n[Ey]:null}const Pl=Cn({\u0275prov:Cn}),Ey=Cn({\u0275inj:Cn}),kp=Cn({ngInjectableDef:Cn}),mP=Cn({ngInjectorDef:Cn});class Ae{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function uh(n){return n&&!!n.\u0275providers}const ch=Cn({\u0275cmp:Cn}),by=Cn({\u0275dir:Cn}),lh=Cn({\u0275pipe:Cn}),iu=Cn({\u0275mod:Cn}),ya=Cn({\u0275fac:Cn}),dh=Cn({__NG_ELEMENT_ID__:Cn}),Rl=Cn({__NG_ENV_ID__:Cn});function At(n){return"string"==typeof n?n:null==n?"":String(n)}function Op(n,e){throw new ye(-201,!1)}var Ut=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ut||{});let ou;function gT(){return ou}function pi(n){const e=ou;return ou=n,e}function Ay(n,e,t){const r=xp(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ut.Optional?null:void 0!==e?e:void Op()}const Pi={},Vp="__NG_DI_FLAG__",Fp="ngTempTokenPath",Lp=/\n/gm,Dy="__source";let kl;function Ko(n){const e=kl;return kl=n,e}function Py(n,e=Ut.Default){if(void 0===kl)throw new ye(-203,!1);return null===kl?Ay(n,void 0,e):kl.get(n,e&Ut.Optional?null:void 0,e)}function Se(n,e=Ut.Default){return(gT()||Py)(ht(n),e)}function Q(n,e=Ut.Default){return Se(n,Nl(e))}function Nl(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Bp(n){const e=[];for(let t=0;t<n.length;t++){const r=ht(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ye(900,!1);let i,s=Ut.Default;for(let o=0;o<r.length;o++){const a=r[o],u=jp(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Se(i,s))}else e.push(Se(r))}return e}function rc(n,e){return n[Vp]=e,n.prototype[Vp]=e,n}function jp(n){return n[Vp]}const Ol=rc(Sl("Optional"),8),zp=rc(Sl("SkipSelf"),4);function ic(n,e){return n.hasOwnProperty(ya)?n[ya]:null}function au(n,e){n.forEach(t=>Array.isArray(t)?au(t,e):e(t))}function $p(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Hi(n,e,t){let r=uu(n,e);return r>=0?n[1|r]=t:(r=~r,function qp(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Oy(n,e){const t=uu(n,e);if(t>=0)return n[1|t]}function uu(n,e){return function Gp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Qo={},Kt=[],fo=new Ae(""),Hp=new Ae("",-1),Vy=new Ae("");class Wp{get(e,t=Pi){if(t===Pi){const r=new Error(`NullInjectorError: No provider for ${zr(e)}!`);throw r.name="NullInjectorError",r}return t}}var Fl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fl||{}),po=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(po||{}),cu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(cu||{});function Fy(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ly(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];vT(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Kp(n){return 3===n||4===n||6===n}function vT(n){return 64===n.charCodeAt(0)}function oc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||IT(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function IT(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Qp="ng-template";function IP(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==Fy(e[i+1].toLowerCase(),t,0))return!0}else if(fh(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function fh(n){return 4===n.type&&n.value!==Qp}function EP(n,e,t){return e===(4!==n.type||t?n.value:Qp)}function Uy(n,e,t){let r=4;const i=n.attrs,s=null!==i?function wT(n){for(let e=0;e<n.length;e++)if(Kp(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!EP(n,u,t)||""===u&&1===e.length){if(go(r))return!1;o=!0}}else if(8&r){if(null===i||!IP(n,i,u,t)){if(go(r))return!1;o=!0}}else{const l=e[++a],h=By(u,i,fh(n),t);if(-1===h){if(go(r))return!1;o=!0;continue}if(""!==l){let g;if(g=h>s?"":i[h+1].toLowerCase(),2&r&&l!==g){if(go(r))return!1;o=!0}}}}else{if(!o&&!go(r)&&!go(u))return!1;if(o&&go(u))continue;o=!1,r=u|1&r}}return go(r)||o}function go(n){return!(1&n)}function By(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function jy(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ET(n,e,t=!1){for(let r=0;r<e.length;r++)if(Uy(n,e[r],t))return!0;return!1}function ac(n,e){return n?":not("+e.trim()+")":e}function TT(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!go(o)&&(e+=ac(s,i),i=""),r=o,s=s||!go(r);t++}return""!==i&&(e+=ac(s,i)),e}function $n(n){return ma(()=>{const e=PP(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||po.Emulated,styles:n.styles||Kt,_:null,schemas:n.schemas||null,tView:null,id:""};RP(t);const r=n.dependencies;return t.directiveDefs=zy(r,!1),t.pipeDefs=zy(r,!0),t.id=function cc(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function CP(n){return Ft(n)||$r(n)}function DP(n){return null!==n}function lu(n){return ma(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function SP(n,e){if(null==n)return Qo;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=cu.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==cu.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Et(n){return ma(()=>{const e=PP(n);return RP(e),e})}function gi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ft(n){return n[ch]||null}function $r(n){return n[by]||null}function Ri(n){return n[lh]||null}function Wi(n,e){const t=n[iu]||null;if(!t&&!0===e)throw new Error(`Type ${zr(n)} does not have '\u0275mod' property.`);return t}function PP(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Qo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SP(n.inputs,e),outputs:SP(n.outputs),debugInfo:null}}function RP(n){n.features?.forEach(e=>e(n))}function zy(n,e){if(!n)return null;const t=e?Ri:CP;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(DP)}function va(n){return{\u0275providers:n}}function bT(...n){return{\u0275providers:qy(0,n),\u0275fromNgModule:!0}}function qy(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return au(e,o=>{const a=o;Gy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&AT(i,s),t}function AT(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Hy(i,s=>{e(s,r)})}}function Gy(n,e,t,r){if(!(n=ht(n)))return!1;let i=null,s=Mp(n);const o=!s&&Ft(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Mp(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)Gy(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{au(s.imports,h=>{Gy(h,e,t,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&AT(l,e)}if(!a){const l=ic(i)||(()=>new i);e({provide:i,useFactory:l,deps:Kt},i),e({provide:Vy,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>Se(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;Hy(u,h=>{e(h,l)})}}}return i!==n&&void 0!==n.providers}function Hy(n,e){for(let t of n)uh(t)&&(t=t.\u0275providers),Array.isArray(t)?Hy(t,e):e(t)}const Wy=Cn({provide:String,useValue:Cn});function ph(n){return null!==n&&"object"==typeof n&&Wy in n}function du(n){return"function"==typeof n}const Ky=new Ae(""),Qy={},Yp={};let DT;function mo(){return void 0===DT&&(DT=new Wp),DT}class Ki{}class Ll extends Ki{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jy(e,o=>this.processProvider(o)),this.records.set(Hp,hu(void 0,this)),i.has("environment")&&this.records.set(Ki,hu(void 0,this));const s=this.records.get(Ky);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Vy,Kt,Ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ze(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ko(this),r=pi(void 0);try{return e()}finally{Ko(t),pi(r)}}get(e,t=Pi,r=Ut.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Rl))return e[Rl](this);r=Nl(r);const s=Ko(this),o=pi(void 0);try{if(!(r&Ut.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function NP(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ae}(e)&&xp(e);u=l&&this.injectableDefInScope(l)?hu(lc(e),Qy):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ut.Self?mo():this.parent).get(e,t=r&Ut.Optional&&t===Pi?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Fp]=a[Fp]||[]).unshift(zr(e)),s)throw a;return function Ry(n,e,t,r){const i=n[Fp];throw e[Dy]&&i.unshift(e[Dy]),n.message=function yT(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=zr(e);if(Array.isArray(e))i=e.map(zr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):zr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Lp,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Fp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{pi(o),Ko(s)}}resolveInjectorInitializers(){const e=Ze(null),t=Ko(this),r=pi(void 0);try{const s=this.get(fo,Kt,Ut.Self);for(const o of s)o()}finally{Ko(t),pi(r),Ze(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(zr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(e){let t=du(e=ht(e))?e:ht(e&&e.provide);const r=function Nr(n){return ph(n)?hu(void 0,n.useValue):hu(ST(n),Qy)}(e);if(!du(e)&&!0===e.multi){let i=this.records.get(t);i||(i=hu(void 0,Qy,!0),i.factory=()=>Bp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Ze(null);try{return t.value===Qy&&(t.value=Yp,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Yy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ze(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ht(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function lc(n){const e=xp(n),t=null!==e?e.factory:ic(n);if(null!==t)return t;if(n instanceof Ae)throw new ye(204,!1);if(n instanceof Function)return function MP(n){if(n.length>0)throw new ye(204,!1);const t=function Iy(n){return n&&(n[Pl]||n[kp])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ye(204,!1)}function ST(n,e,t){let r;if(du(n)){const i=ht(n);return ic(i)||lc(i)}if(ph(n))r=()=>ht(n.useValue);else if(function gh(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Bp(n.deps||[]));else if(function CT(n){return!(!n||!n.useExisting)}(n))r=()=>Se(ht(n.useExisting));else{const i=ht(n&&(n.useClass||n.provide));if(!function kP(n){return!!n.deps}(n))return ic(i)||lc(i);r=()=>new i(...Bp(n.deps))}return r}function hu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Jy(n,e){for(const t of n)Array.isArray(t)?Jy(t,e):t&&uh(t)?Jy(t.\u0275providers,e):e(t)}function _o(n,e){n instanceof Ll&&n.assertNotDestroyed();const r=Ko(n),i=pi(void 0);try{return e()}finally{Ko(r),pi(i)}}function PT(){return void 0!==gT()||null!=function Sy(){return kl}()}const nr=0,Pe=1,ot=2,Or=3,ls=4,mi=5,Qi=6,Bl=7,Nn=8,Vr=9,Yo=10,mt=11,_h=12,Zy=13,jl=14,rr=15,fc=16,pu=17,Ia=18,gu=19,MT=20,Jo=21,eg=22,ds=23,Ye=25,yh=1,vh=6,Hs=7,Ws=9,fr=10;var tg=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(tg||{});function Gr(n){return Array.isArray(n)&&"object"==typeof n[yh]}function xi(n){return Array.isArray(n)&&!0===n[yh]}function Ih(n){return!!(4&n.flags)}function _u(n){return n.componentOffset>-1}function ng(n){return!(1&~n.flags)}function yo(n){return!!n.template}function pc(n){return!!(512&n[ot])}class iv{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function BT(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Mi(){return Eh}function Eh(n){return n.type.prototype.ngOnChanges&&(n.setInput=jT),sv}function sv(){const n=zT(this),e=n?.current;if(e){const t=n.previous;if(t===Qo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jT(n,e,t,r,i){const s=this.declaredInputs[r],o=zT(n)||function $T(n,e){return n[og]=e}(n,{previous:Qo,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new iv(l&&l.currentValue,t,u===Qo),BT(n,e,i,t)}Mi.ngInherit=!0;const og="__ngSimpleChanges__";function zT(n){return n[og]||null}const Xo=function(n,e,t){};function cn(n){for(;Array.isArray(n);)n=n[nr];return n}function wh(n,e){return cn(e[n])}function _i(n,e){return cn(e[n.index])}function Th(n,e){return n.data[e]}function yu(n,e){return n[e]}function xs(n,e){const t=e[n];return Gr(t)?t:t[nr]}function uv(n){return!(128&~n[ot])}function Ks(n,e){return null==e?null:n[e]}function GT(n){n[pu]=0}function HT(n){1024&n[ot]||(n[ot]|=1024,uv(n)&&zl(n))}function lg(n){return!!(9216&n[ot]||n[ds]?.dirty)}function cv(n){n[Yo].changeDetectionScheduler?.notify(8),64&n[ot]&&(n[ot]|=1024),lg(n)&&zl(n)}function zl(n){n[Yo].changeDetectionScheduler?.notify(0);let e=Ea(n);for(;null!==e&&!(8192&e[ot])&&(e[ot]|=8192,uv(e));)e=Ea(e)}function dg(n,e){if(!(256&~n[ot]))throw new ye(911,!1);null===n[Jo]&&(n[Jo]=[]),n[Jo].push(e)}function Ea(n){const e=n[Or];return xi(e)?e[Or]:e}const _t={lFrame:nb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let KT=!1;function pg(){return _t.bindingsEnabled}function wa(){return null!==_t.skipHydrationRootTNode}function he(){return _t.lFrame.lView}function Mt(){return _t.lFrame.tView}function ct(n){return _t.lFrame.contextLView=n,n[Nn]}function st(n){return _t.lFrame.contextLView=null,n}function Sn(){let n=bh();for(;null!==n&&64===n.type;)n=n.parent;return n}function bh(){return _t.lFrame.currentTNode}function Qs(n,e){const t=_t.lFrame;t.currentTNode=n,t.isParent=e}function hv(){return _t.lFrame.isParent}function XT(){return KT}function WP(n){KT=n}function Yi(){const n=_t.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ji(){return _t.lFrame.bindingIndex}function vo(){return _t.lFrame.bindingIndex++}function Io(n){const e=_t.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function QP(n,e){const t=_t.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ah(e)}function Ah(n){_t.lFrame.currentDirectiveIndex=n}function ql(n){_t.lFrame.currentQueryIndex=n}function JP(n){const e=n[Pe];return 2===e.type?e.declTNode:1===e.type?n[mi]:null}function eb(n,e,t){if(t&Ut.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ut.Host||(i=JP(s),null===i||(s=s[jl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=_t.lFrame=tb();return r.currentTNode=e,r.lView=n,!0}function _v(n){const e=tb(),t=n[Pe];_t.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tb(){const n=_t.lFrame,e=null===n?null:n.child;return null===e?nb(n):e}function nb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function yv(){const n=_t.lFrame;return _t.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const mg=yv;function vv(){const n=yv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hr(){return _t.lFrame.selectedIndex}function Ta(n){_t.lFrame.selectedIndex=n}function qn(){const n=_t.lFrame;return Th(n.tView,n.selectedIndex)}function rb(){return _t.lFrame.currentNamespace}let Iv=!0;function Ch(){return Iv}function Zo(n){Iv=n}function yg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function vu(n,e,t){ib(n,e,3,t)}function vg(n,e,t,r){(3&n[ot])===t&&ib(n,e,t,r)}function Ig(n,e){let t=n[ot];(3&t)===e&&(t&=16383,t+=1,n[ot]=t)}function ib(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[pu]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[pu]+=65536),(a<s||-1==s)&&(rR(n,t,e,u),n[pu]=(4294901760&n[pu])+u+2),u++}function sb(n,e){Xo(4,n,e);const t=Ze(null);try{e.call(n)}finally{Ze(t),Xo(5,n,e)}}function rR(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ot]>>14<n[pu]>>16&&(3&n[ot])===e&&(n[ot]+=16384,sb(a,s)):sb(a,s)}const Gl=-1;class Hl{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const wg={};class gc{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nl(r);const i=this.injector.get(e,wg,r);return i!==wg||t===wg?i:this.parentInjector.get(e,t,r)}}function Sh(n){return n!==Gl}function mc(n){return 32767&n}function Wl(n,e){let t=function oR(n){return n>>16}(n),r=e;for(;t>0;)r=r[jl],t--;return r}let ea=!0;function Ph(n){const e=ea;return ea=n,e}const ob=255,ab=5;let ub=0;const pr={};function Kl(n,e){const t=ta(n,e);if(-1!==t)return t;const r=e[Pe];r.firstCreatePass&&(n.injectorIndex=e.length,Av(r.data,n),Av(e,null),Av(r.blueprint,null));const i=Iu(n,e),s=n.injectorIndex;if(Sh(i)){const o=mc(i),a=Wl(i,e),u=a[Pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Av(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ta(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Iu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Ge(i),null===r)return Gl;if(t++,i=i[jl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Gl}function Tg(n,e,t){!function bv(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(dh)&&(r=t[dh]),null==r&&(r=t[dh]=ub++);const i=r&ob;e.data[n+(i>>ab)]|=1<<i}(n,e,t)}function lb(n,e,t){if(t&Ut.Optional||void 0!==n)return n;Op()}function bg(n,e,t,r){if(t&Ut.Optional&&void 0===r&&(r=null),!(t&(Ut.Self|Ut.Host))){const i=n[Vr],s=pi(void 0);try{return i?i.get(e,r,t&Ut.Optional):Ay(e,r,t&Ut.Optional)}finally{pi(s)}}return lb(r,0,t)}function db(n,e,t,r=Ut.Default,i){if(null!==n){if(2048&e[ot]&&!(r&Ut.Self)){const o=function He(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ot]&&!(512&o[ot]);){const a=hb(s,o,t,r|Ut.Self,pr);if(a!==pr)return a;let u=s.parent;if(!u){const l=o[MT];if(l){const h=l.get(t,pr,r);if(h!==pr)return h}u=Ge(o),o=o[jl]}s=u}return i}(n,e,t,r,pr);if(o!==pr)return o}const s=hb(n,e,t,r,pr);if(s!==pr)return s}return bg(e,t,r,i)}function hb(n,e,t,r,i){const s=function d(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(dh)?n[dh]:void 0;return"number"==typeof e?e>=0?e&ob:J:e}(t);if("function"==typeof s){if(!eb(e,n,r))return r&Ut.Host?lb(i,0,r):bg(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ut.Optional)return o;Op()}finally{mg()}}else if("number"==typeof s){let o=null,a=ta(n,e),u=Gl,l=r&Ut.Host?e[rr][mi]:null;for((-1===a||r&Ut.SkipSelf)&&(u=-1===a?Iu(n,e):e[a+8],u!==Gl&&y(r,!1)?(o=e[Pe],a=mc(u),e=Wl(u,e)):a=-1);-1!==a;){const h=e[Pe];if(f(s,a,h.data)){const g=uR(a,e,t,o,r,l);if(g!==pr)return g}u=e[a+8],u!==Gl&&y(r,e[Pe].data[a+8]===l)&&f(s,a,e)?(o=h,a=mc(u),e=Wl(u,e)):a=-1}}return i}function uR(n,e,t,r,i,s){const o=e[Pe],a=o.data[n+8],h=function Ag(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,h=s>>20,v=i?a+h:n.directiveEnd;for(let E=r?a:a+h;E<v;E++){const T=o[E];if(E<u&&t===T||E>=u&&T.type===t)return E}if(i){const E=o[u];if(E&&yo(E)&&E.type===t)return u}return null}(a,o,t,null==r?_u(a)&&ea:r!=o&&!!(3&a.type),i&Ut.Host&&s===a);return null!==h?m(e,o,h,a):pr}function m(n,e,t,r){let i=n[t];const s=e.data;if(function Ev(n){return n instanceof Hl}(i)){const o=i;o.resolving&&function Ml(n,e){throw e&&e.join(" > "),new ye(-200,n)}(function un(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():At(n)}(s[t]));const a=Ph(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?pi(o.injectImpl):null;eb(n,r,Ut.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function nR(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Eh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&pi(l),Ph(a),o.resolving=!1,mg()}}return i}function f(n,e,t){return!!(t[e+(n>>ab)]&1<<n)}function y(n,e){return!(n&Ut.Self||n&Ut.Host&&e)}class q{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return db(this._tNode,this._lView,e,Nl(r),t)}}function J(){return new q(Sn(),he())}function se(n){return ma(()=>{const e=n.prototype.constructor,t=e[ya]||Me(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ya]||Me(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Me(n){return Rp(n)?()=>{const e=Me(ht(n));return e&&e()}:ic(n)}function Ge(n){const e=n[Pe],t=e.type;return 2===t?e.declTNode:1===t?n[mi]:null}function UB(n,e=null,t=null,r){const i=BB(n,e,t,r);return i.resolveInjectorInitializers(),i}function BB(n,e=null,t=null,r,i=new Set){const s=[t||Kt,bT(n)];return r=r||("object"==typeof n?void 0:zr(n)),new Ll(s,e||mo(),r||null,i)}class ki{static{this.THROW_IF_NOT_FOUND=Pi}static{this.NULL=new Wp}static create(e,t){if(Array.isArray(e))return UB({name:""},t,e,"");{const r=e.name??"";return UB({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ke({token:ki,providedIn:"any",factory:()=>Se(Hp)})}static{this.__NG_ELEMENT_ID__=-1}}new Ae("").__NG_ELEMENT_ID__=n=>{const e=Sn();if(null===e)throw new ye(204,!1);if(2&e.type)return e.value;if(n&Ut.Optional)return null;throw new ye(204,!1)};function lR(n){return n.ngOriginalError}const zB=!0;let Mv=(()=>{class n{static{this.__NG_ELEMENT_ID__=jZ}static{this.__NG_ENV_ID__=t=>t}}return n})();class BZ extends Mv{constructor(e){super(),this._lView=e}onDestroy(e){return dg(this._lView,e),()=>function lv(n,e){if(null===n[Jo])return;const t=n[Jo].indexOf(e);-1!==t&&n[Jo].splice(t,1)}(this._lView,e)}}function jZ(){return new BZ(he())}let Yl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ee(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();const jt=class zZ extends F{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,PT()&&(this.destroyRef=Q(Mv,{optional:!0})??void 0,this.pendingTasks=Q(Yl,{optional:!0})??void 0)}emit(e){const t=Ze(null);try{super.next(e)}finally{Ze(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Zt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function gb(...n){}function $B(n){let e,t;function r(){n=gb;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qB(n){return queueMicrotask(()=>n()),()=>{n=gb}}const dR="isAngularZone",mb=dR+"_ID";let $Z=0;class Qt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jt(!1),this.onMicrotaskEmpty=new jt(!1),this.onStable=new jt(!1),this.onError=new jt(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=zB}=e;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function HZ(n){const e=()=>{!function GZ(n){function e(){$B(()=>{n.callbackScheduled=!1,fR(n),n.isCheckStableRunning=!0,hR(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),fR(n))}(n)},t=$Z++;n._inner=n._inner.fork({name:"angular",properties:{[dR]:!0,[mb]:t,[mb+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(function WZ(n){return WB(n,"__ignore_ng_zone__")}(u))return r.invokeTask(s,o,a,u);try{return GB(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),HB(n)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return GB(n),r.invoke(s,o,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function KZ(n){return WB(n,"__scheduler_tick__")}(u)&&e(),HB(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,fR(n),hR(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(dR)}static assertInAngularZone(){if(!Qt.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(Qt.isInAngularZone())throw new ye(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,qZ,gb,gb);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const qZ={};function hR(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fR(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function GB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HB(n){n._nesting--,hR(n)}class pR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jt,this.onMicrotaskEmpty=new jt,this.onStable=new jt,this.onError=new jt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function WB(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Eu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&lR(e);for(;t&&lR(t);)t=lR(t);return t||null}}const YZ=new Ae("",{providedIn:"root",factory:()=>{const n=Q(Qt),e=Q(Eu);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function JZ(){return Dg(Sn(),he())}function Dg(n,e){return new wo(_i(n,e))}let wo=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=JZ}}return n})();const kv="ngSkipHydration",ZZ="ngskiphydration";function mR(n){const e=n.mergedAttrs;if(null===e)return!1;for(let t=0;t<e.length;t+=2){const r=e[t];if("number"==typeof r)return!1;if("string"==typeof r&&r.toLowerCase()===ZZ)return!0}return!1}function YB(n){return n.hasAttribute(kv)}function Nv(n){return!(128&~n.flags)}const _R=new Map;let eee=0;function yR(n){_R.delete(n[gu])}const _b="__ngContext__";function hs(n,e){Gr(e)?(n[_b]=e[gu],function nee(n){_R.set(n[gu],n)}(e)):n[_b]=e}function sj(n){return aj(n[_h])}function oj(n){return aj(n[ls])}function aj(n){for(;null!==n&&!xi(n);)n=n[ls];return n}let IR;function Jl(){if(void 0!==IR)return IR;if(typeof document<"u")return document;throw new ye(210,!1)}const Vv=new Ae("",{providedIn:"root",factory:()=>vee}),vee="ng",gj=new Ae(""),To=new Ae("",{providedIn:"platform",factory:()=>"unknown"}),mj=new Ae("",{providedIn:"root",factory:()=>Jl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wee(){const n=new Pg;return"browser"===Q(To)&&(n.store=function Tee(n,e){const t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(Jl(),Q(Vv))),n}let Pg=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:wee})}get(t,r){return void 0!==this.store[t]?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();const ER="h",wR="b";var Rg=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Rg||{});const vb="e",TR="t",Fv="c",Ib="x",xg="r",bR="i",Eb="n",Lv="d",CR="__nghData__",Uv="ngh";let _j=()=>null;function Aee(n,e,t=!1){let r=n.getAttribute(Uv);if(null==r)return null;const[i,s]=r.split("|");if(r=t?s:i,!r)return null;const a=t?i:s?`|${s}`:"";let u={};if(""!==r){const h=e.get(Pg,null,{optional:!0});null!==h&&(u=h.get(CR,[])[Number(r)])}const l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,wb(l,0,n.nextSibling)),a?n.setAttribute(Uv,a):n.removeAttribute(Uv),l}function DR(n,e,t=!1){return _j(n,e,t)}function yj(n){let e=n._lView;return 2===e[Pe].type?null:(pc(e)&&(e=e[Ye]),e)}function wb(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function PR(n,e){return n.segmentHeads?.[e]??null}function Ej(n,e){return n.data[Fv]?.[e]??null}function RR(n,e){const t=Ej(n,e)??[];let r=0;for(let i of t)r+=i[xg]*(i[Ib]??1);return r}function xh(n,e){if(typeof n.disconnectedNodes>"u"){const t=n.data[Lv];n.disconnectedNodes=t?new Set(t):null}return!!function wj(n){if(typeof n.disconnectedNodes>"u"){const e=n.data[Lv];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}(n)?.has(e)}const Tb=new Ae(""),Aj=new Ae("",{providedIn:"root",factory:()=>!1});let bb,Ab;function Mg(n){return function MR(){if(void 0===bb&&(bb=null,Qn.trustedTypes))try{bb=Qn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bb}()?.createHTML(n)||n}function Rj(n){return function kR(){if(void 0===Ab&&(Ab=null,Qn.trustedTypes))try{Ab=Qn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ab}()?.createScriptURL(n)||n}class Mh{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rT})`}}class Nee extends Mh{getTypeName(){return"HTML"}}class Oee extends Mh{getTypeName(){return"Style"}}class Vee extends Mh{getTypeName(){return"Script"}}class Fee extends Mh{getTypeName(){return"URL"}}class Lee extends Mh{getTypeName(){return"ResourceURL"}}function bo(n){return n instanceof Mh?n.changingThisBreaksApplicationSecurity:n}function wu(n,e){const t=function Uee(n){return n instanceof Mh&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${rT})`)}return t===e}class Gee{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Mg(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class Hee{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Mg(e),t}}const Kee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cb(n){return(n=String(n)).match(Kee)?n:"unsafe:"+n}function _c(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function zv(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const Mj=_c("area,br,col,hr,img,wbr"),kj=_c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nj=_c("rp,rt"),NR=zv(Mj,zv(kj,_c("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zv(Nj,_c("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zv(Nj,kj)),OR=_c("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Oj=zv(OR,_c("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_c("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qee=_c("script,style,template");class Yee{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=Zee(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Xee(t);if(s){t=s;break}t=i.pop()}return this.buf.join("")}startElement(e){const t=Vj(e).toLowerCase();if(!NR.hasOwnProperty(t))return this.sanitizedSomething=!0,!Qee.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!Oj.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;OR[a]&&(u=Cb(u)),this.buf.push(" ",o,'="',Lj(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=Vj(e).toLowerCase();NR.hasOwnProperty(t)&&!Mj.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Lj(e))}}function Xee(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw Fj(e);return e}function Zee(n){const e=n.firstChild;if(e&&function Jee(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw Fj(e);return e}function Vj(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function Fj(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ete=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tte=/([^\#-~ |!])/g;function Lj(n){return n.replace(/&/g,"&amp;").replace(ete,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(tte,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Db;function Uj(n,e){let t=null;try{Db=Db||function xj(n){const e=new Hee(n);return function Wee(){try{return!!(new window.DOMParser).parseFromString(Mg(""),"text/html")}catch{return!1}}()?new Gee(e):e}(n);let r=e?String(e):"";t=Db.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Db.getInertBodyElement(r)}while(r!==s);return Mg((new Yee).sanitizeChildren(VR(t)||t))}finally{if(t){const r=VR(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function VR(n){return"content"in n&&function nte(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var na=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(na||{});function kg(n){const e=$v();return e?e.sanitize(na.URL,n)||"":wu(n,"URL")?bo(n):Cb(At(n))}function Sb(n){const e=$v();if(e)return Rj(e.sanitize(na.RESOURCE_URL,n)||"");if(wu(n,"ResourceURL"))return Rj(bo(n));throw new ye(904,!1)}function $v(){const n=he();return n&&n[Yo].sanitizer}const cte=/^>|^->|<!--|-->|--!>|<!-$/g,lte=/(<|>)/g,dte="\u200b$1\u200b";function Ao(n){return n instanceof Function?n():n}function Co(n){return"browser"===(n??Q(ki)).get(To)}var Xl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xl||{});let UR;function BR(n,e){return UR(n,e)}function Og(n,e,t,r,i){if(null!=r){let s,o=!1;xi(r)?s=r:Gr(r)&&(o=!0,r=r[nr]);const a=cn(r);0===n&&null!==t?null==i?Zj(e,t,a):kh(e,t,a,i||null,!0):1===n&&null!==t?kh(e,t,a,i||null,!0):2===n?Gv(e,a,o):3===n&&e.destroyNode(a),null!=s&&function xte(n,e,t,r,i){const s=t[Hs];s!==cn(t)&&Og(e,n,r,s,i);for(let a=fr;a<t.length;a++){const u=t[a];Nb(u[Pe],u,n,e,r,s)}}(e,n,s,t,i)}}function jR(n,e){return n.createText(e)}function zR(n,e){return n.createComment(function jj(n){return n.replace(cte,e=>e.replace(lte,dte))}(e))}function xb(n,e,t){return n.createElement(e,t)}function Yj(n,e){e[Yo].changeDetectionScheduler?.notify(9),Nb(n,e,e[mt],2,null,null)}function Jj(n,e){const t=n[Ws],r=e[Or];(Gr(r)||e[rr]!==r[Or][rr])&&(n[ot]|=tg.HasTransplantedViews),null===t?n[Ws]=[e]:t.push(e)}function $R(n,e){const t=n[Ws],r=t.indexOf(e);t.splice(r,1)}function qv(n,e){if(n.length<=fr)return;const t=fr+e,r=n[t];if(r){const i=r[fc];null!==i&&i!==n&&$R(i,r),e>0&&(n[t-1][ls]=r[ls]);const s=sc(n,fr+e);!function Tte(n,e){Yj(n,e),e[nr]=null,e[mi]=null}(r[Pe],r);const o=s[Ia];null!==o&&o.detachView(s[Pe]),r[Or]=null,r[ls]=null,r[ot]&=-129}return r}function Mb(n,e){if(!(256&e[ot])){const t=e[mt];t.destroyNode&&Nb(n,e,t,3,null,null),function Ate(n){let e=n[_h];if(!e)return qR(n[Pe],n);for(;e;){let t=null;if(Gr(e))t=e[_h];else{const r=e[fr];r&&(t=r)}if(!t){for(;e&&!e[ls]&&e!==n;)Gr(e)&&qR(e[Pe],e),e=e[Or];null===e&&(e=n),Gr(e)&&qR(e[Pe],e),t=e&&e[ls]}e=t}}(e)}}function qR(n,e){if(256&e[ot])return;const t=Ze(null);try{e[ot]&=-129,e[ot]|=256,e[ds]&&Ur(e[ds]),function Ste(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Hl)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Xo(4,a,u);try{u.call(a)}finally{Xo(5,a,u)}}else{Xo(4,i,s);try{s.call(i)}finally{Xo(5,i,s)}}}}}(n,e),function Dte(n,e){const t=n.cleanup,r=e[Bl];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Bl]=null);const i=e[Jo];if(null!==i){e[Jo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Pe].type&&e[mt].destroy();const r=e[fc];if(null!==r&&xi(e[Or])){r!==e[Or]&&$R(r,e);const i=e[Ia];null!==i&&i.detachView(n)}yR(e)}finally{Ze(t)}}function GR(n,e,t){return function Xj(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[nr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===po.None||s===po.Emulated)return null}return _i(r,t)}}(n,e.parent,t)}function kh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Zj(n,e,t){n.appendChild(e,t)}function e4(n,e,t,r,i){null!==r?kh(n,e,t,r,i):Zj(n,e,t)}function HR(n,e){return n.parentNode(e)}let WR,r4=function n4(n,e,t){return 40&n.type?_i(n,t):null};function kb(n,e,t,r){const i=GR(n,r,e),s=e[mt],a=function t4(n,e,t){return r4(n,e,t)}(r.parent||e[mi],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)e4(s,i,t[u],a,!1);else e4(s,i,t,a,!1);void 0!==WR&&WR(s,r,e,t,i)}function Nh(n,e){if(null!==e){const t=e.type;if(3&t)return _i(e,n);if(4&t)return KR(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Nh(n,r);{const i=n[e.index];return xi(i)?KR(-1,i):cn(i)}}if(128&t)return Nh(n,e.next);if(32&t)return BR(e,n)()||cn(n[e.index]);{const r=s4(n,e);return null!==r?Array.isArray(r)?r[0]:Nh(Ea(n[rr]),r):Nh(n,e.next)}}return null}function s4(n,e){return null!==e?n[rr][mi].projection[e.projection]:null}function KR(n,e){const t=fr+n+1;if(t<e.length){const r=e[t],i=r[Pe].firstChild;if(null!==i)return Nh(r,i)}return e[Hs]}function Gv(n,e,t){n.removeChild(null,e,t)}function o4(n){n.textContent=""}function QR(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],u=t.type;if(o&&0===e&&(a&&hs(cn(a),r),t.flags|=2),32&~t.flags)if(8&u)QR(n,e,t.child,r,i,s,!1),Og(e,n,i,a,s);else if(32&u){const l=BR(t,r);let h;for(;h=l();)Og(e,n,i,h,s);Og(e,n,i,a,s)}else 16&u?a4(n,e,r,t,i,s):Og(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Nb(n,e,t,r,i,s){QR(t,r,n.firstChild,e,i,s,!1)}function a4(n,e,t,r,i,s){const o=t[rr],u=o[mi].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Og(e,n,i,u[l],s);else{let l=u;const h=o[Or];Nv(r)&&(l.flags|=128),QR(n,e,l,h,i,s,!0)}}function u4(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function c4(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Ly(n,e,r),null!==i&&u4(n,e,i),null!==s&&function kte(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Ct={};function K(n=1){l4(Mt(),he(),Hr()+n,!1)}function l4(n,e,t,r){if(!r)if(3&~e[ot]){const s=n.preOrderHooks;null!==s&&vg(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&vu(e,s,t)}Ta(t)}function De(n,e=Ut.Default){const t=he();return null===t?Se(n,e):db(Sn(),t,ht(n),e)}function h4(n,e,t,r,i,s){const o=Ze(null);try{let a=null;i&cu.SignalBased&&(a=e[r][_n]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&cu.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):BT(e,a,r,s)}finally{Ze(o)}}function Ob(n,e,t,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[nr]=i,g[ot]=204|r,(null!==l||n&&2048&n[ot])&&(g[ot]|=2048),GT(g),g[Or]=g[jl]=n,g[Nn]=t,g[Yo]=o||n&&n[Yo],g[mt]=a||n&&n[mt],g[Vr]=u||n&&n[Vr]||null,g[mi]=s,g[gu]=function tee(){return eee++}(),g[Qi]=h,g[MT]=l,g[rr]=2==e.type?n[rr]:g,g}function Oh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function YR(n,e,t,r,i){const s=bh(),o=hv(),u=n.data[e]=function jte(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return wa()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function KP(){return _t.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function $l(){const n=_t.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Qs(s,!0),s}function Hv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function f4(n,e,t,r,i){const s=Hr(),o=2&r;try{Ta(-1),o&&e.length>Ye&&l4(n,e,Ye,!1),Xo(o?2:0,i),t(r,i)}finally{Ta(s),Xo(o?3:1,i)}}function JR(n,e,t){if(Ih(e)){const r=Ze(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ze(r)}}}function XR(n,e,t){pg()&&(function Kte(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;_u(t)&&function tne(n,e,t){const r=_i(e,n),i=p4(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Vb(n,Ob(n,i,null,o,r,e,null,n[Yo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Kl(t,e),hs(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=m(e,n,a,t);hs(l,e),null!==o&&nne(0,a-i,l,u,0,o),yo(u)&&(xs(t.index,e)[Nn]=m(e,n,a,t))}}(n,e,t,_i(t,e)),!(64&~t.flags)&&v4(n,e,t))}function ZR(n,e,t=_i){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function p4(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ex(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ex(n,e,t,r,i,s,o,a,u,l,h){const g=Ye+r,v=g+i,E=function Ote(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ct);return t}(g,v),T="function"==typeof l?l():l;return E[Pe]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}let g4=()=>null;function Lte(n){YB(n)?o4(n):function See(n){const e=Jl(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){const o=function Dee(n){return n.textContent?.replace(/\s/gm,"")}(s);return"ngetn"===o||"ngtns"===o?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=t.nextNode();)i.push(r);for(const s of i)"ngetn"===s.textContent?s.replaceWith(e.createTextNode("")):s.remove()}(n)}function m4(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,u=cu.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(null!==i){if(!i.hasOwnProperty(s))continue;l=i[s]}0===n?_4(r,t,l,a,u):_4(r,t,l,a)}return r}function _4(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function Xs(n,e,t,r,i,s,o,a){const u=_i(e,t);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(sx(n,t,h,r,i),_u(e)&&function qte(n,e){const t=xs(e,n);16&t[ot]||(t[ot]|=64)}(t,e.index)):3&e.type&&(r=function $te(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function tx(n,e,t,r){if(pg()){const i=null===r?null:{"":-1},s=function Yte(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ET(e,o.selectors,!1))if(r||(r=[]),yo(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),nx(n,e,a.length)}else r.unshift(o),nx(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&y4(n,e,t,o,i,a),i&&function Jte(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ye(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=oc(t.mergedAttrs,t.attrs)}function y4(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Tg(Kl(t,e),n,r[l].type);!function Zte(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Hv(n,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];t.mergedAttrs=oc(t.mergedAttrs,h.hostAttrs),ene(n,t,e,u,h),Xte(u,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function zte(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],v=t?t.get(g):null,T=v?v.outputs:null;u=m4(0,g.inputs,h,u,v?v.inputs:null),l=m4(1,g.outputs,h,l,T);const P=null===u||null===o||fh(e)?null:rne(u,h,o);a.push(P)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function v4(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function YP(){return _t.lFrame.currentDirectiveIndex}();try{Ta(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Ah(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Qte(u,l)}}finally{Ta(-1),Ah(o)}}function Qte(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function nx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Xte(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;yo(e)&&(t[""]=n)}}function ene(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ic(i.type)),o=new Hl(s,yo(i),De);n.blueprint[r]=o,t[r]=o,function Hte(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Wte(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Hv(n,t,i.hostVars,Ct),i)}function Tu(n,e,t,r,i,s){const o=_i(n,e);!function rx(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?At(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[mt],o,s,n.value,t,r,i)}function nne(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)h4(r,t,o[a++],o[a++],o[a++],o[a++])}function rne(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function I4(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function E4(n,e){const t=n.contentQueries;if(null!==t){const r=Ze(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];ql(t[i]),a.contentQueries(2,e[o],o)}}}finally{Ze(r)}}}function Vb(n,e){return n[_h]?n[Zy][ls]=e:n[_h]=e,n[Zy]=e,e}function ix(n,e,t){ql(0);const r=Ze(null);try{e(n,t)}finally{Ze(r)}}function Fb(n,e){const t=n[Vr],r=t?t.get(Eu,null):null;r&&r.handleError(e)}function sx(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=t[s++];h4(n.data[o],e[o],r,a,u,i)}}function yc(n,e,t){const r=wh(e,n);!function Qj(n,e,t){n.setValue(e,t)}(n[mt],r,t)}function ine(n,e){const t=xs(e,n),r=t[Pe];!function sne(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[nr];null!==i&&null===t[Qi]&&(t[Qi]=DR(i,t[Vr])),ox(r,t,t[Nn])}function ox(n,e,t){_v(e);try{const r=n.viewQuery;null!==r&&ix(1,r,t);const i=n.template;null!==i&&f4(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ia]?.finishViewCreation(n),n.staticContentQueries&&E4(n,e),n.staticViewQueries&&ix(2,n.viewQuery,t);const s=n.components;null!==s&&function one(n,e){for(let t=0;t<e.length;t++)ine(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ot]&=-5,vv()}}function Vg(n,e,t,r){const i=Ze(null);try{const s=e.tView,u=Ob(n,s,t,4096&n[ot]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[fc]=n[e.index];const h=n[Ia];return null!==h&&(u[Ia]=h.createEmbeddedView(s)),ox(s,u,t),u}finally{Ze(i)}}function A4(n,e){const t=fr+e;if(t<n.length)return n[t]}function Vh(n,e){return!e||null===e.firstChild||Nv(n)}function Fg(n,e,t,r=!0){const i=e[Pe];if(function Cte(n,e,t,r){const i=fr+r,s=t.length;r>0&&(t[i-1][ls]=e),r<s-fr?(e[ls]=t[i],$p(t,fr+r,e)):(t.push(e),e[ls]=null),e[Or]=t;const o=e[fc];null!==o&&t!==o&&Jj(o,e);const a=e[Ia];null!==a&&a.insertView(n),cv(e),e[ot]|=128}(i,e,n,t),r){const o=KR(t,n),a=e[mt],u=HR(a,n[Hs]);null!==u&&function bte(n,e,t,r,i,s){r[nr]=i,r[mi]=e,Nb(n,r,t,1,i,s)}(i,n[mi],a,e,u,o)}const s=e[Qi];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function ax(n,e){const t=qv(n,e);return void 0!==t&&Mb(t[Pe],t),t}function Wv(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(cn(s)),xi(s)&&C4(s,r);const o=t.type;if(8&o)Wv(n,e,t.child,r);else if(32&o){const a=BR(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=s4(e,t);if(Array.isArray(a))r.push(...a);else{const u=Ea(e[rr]);Wv(u[Pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function C4(n,e){for(let t=fr;t<n.length;t++){const r=n[t],i=r[Pe].firstChild;null!==i&&Wv(r[Pe],r,i,e)}n[Hs]!==n[nr]&&e.push(n[Hs])}let D4=[];const lne={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zl(n.lView)},consumerOnSignalRead(){this.lView[ds]=this}},hne={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ea(n.lView);for(;e&&!S4(e[Pe]);)e=Ea(e);e&&HT(e)},consumerOnSignalRead(){this.lView[ds]=this}};function S4(n){return 2!==n.type}const fne=100;function Lb(n,e=!0,t=0){const r=n[Yo],i=r.rendererFactory;i.begin?.();try{!function pne(n,e){const t=XT();try{WP(!0),ux(n,e);let r=0;for(;lg(n);){if(r===fne)throw new ye(103,!1);r++,ux(n,1)}}finally{WP(t)}}(n,t)}catch(o){throw e&&Fb(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function gne(n,e,t,r){const i=e[ot];if(!(256&~i))return;e[Yo].inlineEffectRunner?.flush(),_v(e);let a=!0,u=null,l=null;S4(n)?(l=function ane(n){return n[ds]??function une(n){const e=D4.pop()??Object.create(lne);return e.lView=n,e}(n)}(e),u=vt(l)):null===function Wn(){return We}()?(a=!1,l=function dne(n){const e=n[ds]??Object.create(hne);return e.lView=n,e}(e),u=vt(l)):e[ds]&&(Ur(e[ds]),e[ds]=null);try{GT(e),function ZT(n){return _t.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&f4(n,e,t,2,r);const h=!(3&~i);if(h){const E=n.preOrderCheckHooks;null!==E&&vu(e,E,null)}else{const E=n.preOrderHooks;null!==E&&vg(e,E,0,null),Ig(e,0)}if(function mne(n){for(let e=sj(n);null!==e;e=oj(e)){if(!(e[ot]&tg.HasTransplantedViews))continue;const t=e[Ws];for(let r=0;r<t.length;r++)HT(t[r])}}(e),R4(e,0),null!==n.contentQueries&&E4(n,e),h){const E=n.contentCheckHooks;null!==E&&vu(e,E)}else{const E=n.contentHooks;null!==E&&vg(e,E,1),Ig(e,1)}!function Nte(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ta(~i);else{const s=i,o=t[++r],a=t[++r];QP(o,s),a(2,e[s])}}}finally{Ta(-1)}}(n,e);const g=n.components;null!==g&&M4(e,g,0);const v=n.viewQuery;if(null!==v&&ix(2,v,r),h){const E=n.viewCheckHooks;null!==E&&vu(e,E)}else{const E=n.viewHooks;null!==E&&vg(e,E,2),Ig(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[eg]){for(const E of e[eg])E();e[eg]=null}e[ot]&=-73}catch(h){throw zl(e),h}finally{null!==l&&(gt(l,u),a&&function cne(n){n.lView[ds]!==n&&(n.lView=null,D4.push(n))}(l)),vv()}}function R4(n,e){for(let t=sj(n);null!==t;t=oj(t))for(let r=fr;r<t.length;r++)x4(t[r],e)}function _ne(n,e,t){x4(xs(e,n),t)}function x4(n,e){uv(n)&&ux(n,e)}function ux(n,e){const r=n[Pe],i=n[ot],s=n[ds];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!lr(s)),o||=!1,s&&(s.dirty=!1),n[ot]&=-9217,o)gne(r,n,r.template,n[Nn]);else if(8192&i){R4(n,1);const a=r.components;null!==a&&M4(n,a,1)}}function M4(n,e,t){for(let r=0;r<e.length;r++)_ne(n,e[r],t)}function Kv(n,e){const t=XT()?64:1088;for(n[Yo].changeDetectionScheduler?.notify(e);n;){n[ot]|=t;const r=Ea(n);if(pc(n)&&!r)return n;n=r}return null}class Qv{get rootNodes(){const e=this._lView,t=e[Pe];return Wv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return!(256&~this._lView[ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Or];if(xi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(qv(e,r),sc(t,r))}this._attachedToViewContainer=!1}Mb(this._lView[Pe],this._lView)}onDestroy(e){dg(this._lView,e)}markForCheck(){Kv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ot]&=-129}reattach(){cv(this._lView),this._lView[ot]|=128}detectChanges(){this._lView[ot]|=1024,Lb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=pc(this._lView),t=this._lView[fc];null!==t&&!e&&$R(t,this._lView),Yj(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=e;const t=pc(this._lView),r=this._lView[fc];null!==r&&!t&&Jj(r,this._lView),cv(this._lView)}}let vc=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ine}}return n})();const yne=vc,vne=class extends yne{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Vg(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Qv(i)}};function Ine(){return function Ub(n,e){return 4&n.type?new vne(e,n,Dg(n,e)):null}(Sn(),he())}const Lne=new RegExp(`^(\\d+)*(${wR}|${ER})*(.*)`);function fx(n){return n.index-Ye}function tI(n,e,t,r){const i=fx(r);let s=function q4(n,e){const t=n.i18nNodes;if(t)return t.get(e)}(n,i);if(void 0===s){const o=n.data[Eb];if(o?.[i])s=function G4(n,e){const[t,...r]=function Bne(n){const e=n.match(Lne),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(const[u,l,h]of s.matchAll(/(f|n)(\d*)/g)){const g=parseInt(h,10)||1;a.push(l,g)}return[o,...a]}(n);let i;i=t===ER?e[rr][nr]:t===wR?function Gj(n){return n.ownerDocument.body}(e[rr][nr]):cn(e[Number(t)+Ye]);return function $ne(n,e){let t=n;for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Rg.FirstChild:t=t.firstChild;break;case Rg.NextSibling:t=t.nextSibling}}return t}(i,r)}(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{const a=null===r.prev,u=r.prev??r.parent;if(function jne(n){return!n.prev&&8===n.parent?.type}(r))s=PR(n,fx(r.parent));else{let l=_i(u,t);if(a)s=l.firstChild;else{const h=fx(u),g=PR(n,h);s=2===u.type&&g?$b(RR(n,h)+1,g):l.nextSibling}}}}return s}function $b(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}let W4=!1;function ore(n,e,t){for(const r of t.node.cases[t.case]){const i=e.get(r.index-Ye);i&&Gv(n,i,!1)}}function J4(n){const e=n[vh]??[],r=n[Or][mt];for(const i of e)are(i,r);n[vh]=Kt}function are(n,e){let t=0,r=n.firstChild;if(r){const i=n.data[xg];for(;t<i;){const s=r.nextSibling;Gv(e,r,!1),r=s,t++}}}function X4(n){J4(n);const e=n[nr];Gr(e)&&qb(e);for(let t=fr;t<n.length;t++)qb(n[t])}function qb(n){!function sre(n){const e=n[Qi];if(e){const{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){const i=n[mt];for(const s of r.values())ore(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}(n);const e=n[Pe];for(let t=Ye;t<e.bindingStartIndex;t++)xi(n[t])?X4(n[t]):Gr(n[t])&&qb(n[t])}let Z4=()=>null;function lre(n,e){const t=n[vh];return e&&null!==t&&0!==t.length?t[0].data[bR]===e?t.shift():(J4(n),null):null}function Lh(n,e){return Z4(n,e)}class Ug{}const Bg=new Ae("",{providedIn:"root",factory:()=>!1}),ez=new Ae(""),vx=new Ae("");class hre{}class tz{}class pre{resolveComponentFactory(e){throw function fre(n){const e=Error(`No component factory found for ${zr(n)}.`);return e.ngComponent=n,e}(e)}}class Gb{static{this.NULL=new pre}}class Ix{}let Ic=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function gre(){const n=he(),t=xs(Sn().index,n);return(Gr(t)?t:n)[mt]}()}}return n})(),mre=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}}return n})();function Wb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Pp(i,a):2==s&&(r=Pp(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class sz extends Gb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ft(e);return new sI(t,this.ngModule)}}function oz(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:cu.None)&cu.SignalBased)}:{propName:o,templateName:r})}return t}class sI extends tz{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=oz(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return oz(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bP(n){return n.map(TT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=Ze(null);try{let o=(i=i||this.ngModule)instanceof Ki?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new gc(e,o):e,u=a.get(Ix,null);if(null===u)throw new ye(407,!1);const g={rendererFactory:u,sanitizer:a.get(mre,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(Ug,null)},v=u.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",T=r?function Vte(n,e,t,r){const s=r.get(Aj,!1)||t===po.ShadowDom,o=n.selectRootElement(e,s);return function Fte(n){g4(n)}(o),o}(v,r,this.componentDef.encapsulation,a):xb(v,E,function vre(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let R=null;null!==T&&(R=DR(T,a,!0));const z=ex(0,null,null,1,0,null,null,null,null,null,null),j=Ob(null,z,null,P,null,null,g,v,a,null,R);_v(j);let H,te,me=null;try{const _e=this.componentDef;let D,b=null;_e.findHostDirectiveDefs?(D=[],b=new Map,_e.findHostDirectiveDefs(_e,D,b),D.push(_e)):D=[_e];const C=function Ere(n,e){const t=n[Pe],r=Ye;return n[r]=e,Oh(t,r,2,"#host",null)}(j,T);me=function wre(n,e,t,r,i,s,o){const a=i[Pe];!function Tre(n,e,t,r){for(const i of n)e.mergedAttrs=oc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Wb(e,e.mergedAttrs,!0),null!==t&&c4(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=DR(e,i[Vr]));const l=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=Ob(i,p4(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&nx(a,n,r.length-1),Vb(i,g),i[n.index]=g}(C,T,_e,D,j,g,v),te=Th(z,Ye),T&&function Are(n,e,t,r){if(r)Ly(n,t,["ng-version","18.2.13"]);else{const{attrs:i,classes:s}=function AP(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!go(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ly(n,t,i),s&&s.length>0&&u4(n,t,s.join(" "))}}(v,_e,T,r),void 0!==t&&function Cre(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(te,this.ngContentSelectors,t),H=function bre(n,e,t,r,i,s){const o=Sn(),a=i[Pe],u=_i(o,i);y4(a,i,o,t,null,r);for(let h=0;h<t.length;h++)hs(m(i,a,o.directiveStart+h,o),i);v4(a,i,o),u&&hs(u,i);const l=m(i,a,o.directiveStart+o.componentOffset,o);if(n[Nn]=i[Nn]=l,null!==s)for(const h of s)h(l,e);return JR(a,o,i),l}(me,_e,D,b,j,[Dre]),ox(z,j,null)}catch(_e){throw null!==me&&yR(me),yR(j),_e}finally{vv()}return new Ire(this.componentType,H,Dg(te,j),j,te)}finally{Ze(s)}}}class Ire extends hre{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;sx(s[Pe],s,i,e,t),this.previousInputValues.set(e,t),Kv(xs(this._tNode.index,s),1)}}get injector(){return new q(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Dre(){const n=Sn();yg(he()[Pe],n)}let ba=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sre}}return n})();function Sre(){return function cz(n,e){let t;const r=e[n.index];return xi(r)?t=r:(t=I4(r,e,null,n),e[n.index]=t,Vb(e,t)),lz(t,e,n,r),new az(t,n,e)}(Sn(),he())}const Pre=ba,az=class extends Pre{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Dg(this._hostTNode,this._hostLView)}get injector(){return new q(this._hostTNode,this._hostLView)}get parentInjector(){const e=Iu(this._hostTNode,this._hostLView);if(Sh(e)){const t=Wl(e,this._hostLView),r=mc(e);return new q(t[Pe].data[r+8],t)}return new q(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=uz(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=Lh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Vh(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function hc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const u=o?e:new sI(Ft(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const P=(o?l:this.parentInjector).get(Ki,null);P&&(s=P)}const h=Ft(u.componentType??{}),g=Lh(this._lContainer,h?.id??null),E=u.create(l,i,g?.firstChild??null,s);return this.insertImpl(E.hostView,a,Vh(this._hostTNode,g)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function jP(n){return xi(n[Or])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Or],l=new az(u,u[mi],u[Or]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Fg(o,i,s,r),e.attachToViewContainerRef(),$p(Tx(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=uz(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=qv(this._lContainer,t);r&&(sc(Tx(this._lContainer),t),Mb(r[Pe],r))}detach(e){const t=this._adjustIndex(e,-1),r=qv(this._lContainer,t);return r&&null!=sc(Tx(this._lContainer),t)?new Qv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uz(n){return n[8]}function Tx(n){return n[8]||(n[8]=[])}let lz=hz,bx=()=>!1;function hz(n,e,t,r){if(n[Hs])return;let i;i=8&t.type?cn(r):function Rre(n,e){const t=n[mt],r=t.createComment(""),i=_i(e,n);return kh(t,HR(t,i),r,function Pte(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Hs]=i}function xre(n,e,t){if(n[Hs]&&n[vh])return!0;const r=t[Qi],i=e.index-Ye;if(!r||function Ov(n){if(Nv(n))return!0;let e=n.parent;for(;e;){if(Nv(n)||mR(e))return!0;e=e.parent}return!1}(e)||xh(r,i))return!1;const o=PR(r,i),a=r.data[Fv]?.[i],[u,l]=function cre(n,e){const t=[];for(const r of e)for(let i=0;i<(r[Ib]??1);i++){const s={data:r,firstChild:null};r[xg]>0&&(s.firstChild=n,n=$b(r[xg],n)),t.push(s)}return[n,t]}(o,a);return n[Hs]=u,n[vh]=l,!0}function Mre(n,e,t,r){bx(n,t,e)||hz(n,e,t,r)}const Iz=new Set;function fs(n){Iz.has(n)||(Iz.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ps(n,e){fs("NgSignals");const t=function eu(n){const e=Object.create(Te);e.value=n;const t=()=>(be(e),e.value);return t[_n]=e,t}(n),r=t[_n];return e?.equal&&(r.equal=e.equal),t.set=i=>de(r,i),t.update=i=>function re(n,e){kr()||hr(),de(n,e(n.value))}(r,i),t.asReadonly=wz.bind(t),t}function wz(){const n=this[_n];if(void 0===n.readonlyFn){const e=()=>this();e[_n]=n,n.readonlyFn=e}return n.readonlyFn}function Tz(n){return function Ez(n){return"function"==typeof n&&void 0!==n[_n]}(n)&&"function"==typeof n.set}function Vn(n){let e=function Nz(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(yo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ye(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Qb(n.inputs),o.inputTransforms=Qb(n.inputTransforms),o.declaredInputs=Qb(n.declaredInputs),o.outputs=Qb(n.outputs);const a=i.hostBindings;a&&Zre(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&Jre(n,u),l&&Xre(n,l),Qre(n,i),dP(n.outputs,i.outputs),yo(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Vn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Yre(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=oc(i.hostAttrs,t=oc(t,i.hostAttrs))}}(r)}function Qre(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Qb(n){return n===Qo?{}:n===Kt?[]:n}function Jre(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Xre(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Zre(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Uz(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Uh{}class Bz{}class Nx extends Uh{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sz(this);const s=Wi(e);this._bootstrapComponents=Ao(s.bootstrap),this._r3Injector=BB(e,t,[{provide:Uh,useValue:this},{provide:Gb,useValue:this.componentFactoryResolver},...r],zr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ox extends Bz{constructor(e){super(),this.moduleType=e}create(e){return new Nx(this.moduleType,e,[])}}class jz extends Uh{constructor(e){super(),this.componentFactoryResolver=new sz(this),this.instance=null;const t=new Ll([...e.providers,{provide:Uh,useValue:this},{provide:Gb,useValue:this.componentFactoryResolver}],e.parent||mo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Yb(n,e,t=null){return new jz({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Vx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function bu(n,e,t){return n[e]=t}function Wr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Bh(n,e,t,r){const i=Wr(n,e,t);return Wr(n,e+1,r)||i}function Xb(n,e,t,r,i){const s=Bh(n,e,t,r);return Wr(n,e+2,i)||s}function zg(n){return!(32&~n.flags)}function uI(n,e,t,r,i,s,o,a,u,l){const h=t+Ye,g=e.firstCreatePass?function die(n,e,t,r,i,s,o,a,u){const l=e.consts,h=Oh(e,n,4,o||null,a||null);tx(e,t,h,Ks(l,u)),yg(e,h);const g=h.tView=ex(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,s,o,a,u):e.data[h];Qs(g,!1);const v=zz(e,n,g,t);Ch()&&kb(e,n,v,g),hs(v,n);const E=I4(v,n,v,g);return n[h]=E,Vb(n,E),function dz(n,e,t){return bx(n,e,t)}(E,g,n),ng(g)&&XR(e,n,g),null!=u&&ZR(n,g,l),g}function vn(n,e,t,r,i,s,o,a){const u=he(),l=Mt();return uI(u,l,n,e,t,r,i,Ks(l.consts,s),o,a),vn}let zz=$z;function $z(n,e,t,r){return Zo(!0),e[mt].createComment("")}function hie(n,e,t,r){const i=e[Qi],s=!i||wa()||zg(t)||xh(i,r);if(Zo(s),s)return $z(0,e);const o=i.data[TR]?.[r]??null;null!==o&&null!==t.tView&&null===t.tView.ssrId&&(t.tView.ssrId=o);const a=tI(i,n,e,t);return wb(i,r,a),$b(RR(i,r),a)}var qg=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(qg||{});let Qz=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();class dI{constructor(){this.ngZone=Q(Qt),this.scheduler=Q(Ug),this.errorHandler=Q(Eu,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[qg.EarlyRead,qg.Write,qg.MixedReadWrite,qg.Read]}execute(){this.executing=!0;for(const e of dI.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ke({token:dI,providedIn:"root",factory:()=>new dI})}}class gie{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}}function nA(n,e){!e?.injector&&function Ul(n){if(!PT())throw new ye(-203,!1)}();const t=e?.injector??Q(ki);return Co(t)?(fs("NgAfterNextRender"),function Yz(n,e,t,r){const i=e.get(Qz);i.impl??=e.get(dI);const s=t?.phase??qg.MixedReadWrite,o=!0!==t?.manualCleanup?e.get(Mv):null,a=new gie(i.impl,function _ie(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),r,o);return i.impl.register(a),a}(n,t,e,!0)):Jz}const Jz={destroy(){}};function Au(n,e,t,r){const i=he();return Wr(i,vo(),e)&&(Mt(),Tu(qn(),i,n,e,t,r)),Au}function Jg(n,e,t,r){return Wr(n,vo(),t)?e+At(t)+r:Ct}function sA(n,e){return n<<17|e<<2}function nd(n){return n>>17&32767}function Wx(n){return 2|n}function zh(n){return(131068&n)>>2}function Kx(n,e){return-131069&n|e<<2}function Qx(n){return 1|n}function T3(n,e,t,r){const i=n[t+1],s=null===e;let o=r?nd(i):zh(i),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];Zie(n[o],e)&&(a=!0,n[o+1]=r?Qx(l):Wx(l)),o=r?nd(l):zh(l)}a&&(n[t+1]=r?Wx(i):Qx(i))}function Zie(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&uu(n,e)>=0}function Gt(n,e,t){const r=he();return Wr(r,vo(),e)&&Xs(Mt(),qn(),r,n,e,r[mt],t,!1),Gt}function Yx(n,e,t,r,i){const o=i?"class":"style";sx(n,t,e.inputs[o],o,r)}function $h(n,e){return function Aa(n,e,t,r){const i=he(),s=Mt(),o=Io(2);s.firstUpdatePass&&function M3(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Hr()],o=function x3(n,e){return e>=n.expandoStartIndex}(n,t);(function V3(n,e){return!!(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function use(n,e,t,r){const i=function gv(n){const e=_t.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=fI(t=Jx(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Jx(i,n,e,t,r),null===s){let u=function cse(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==zh(r))return n[nd(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Jx(null,n,e,u[1],r),u=fI(u,e.attrs,r),function lse(n,e,t,r){n[nd(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function dse(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=fI(r,n[s].hostAttrs,t);return fI(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Jie(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=nd(o),u=zh(o);n[r]=t;let h,l=!1;if(Array.isArray(t)?(h=t[1],(null===h||uu(t,h)>0)&&(l=!0)):h=t,i)if(0!==u){const v=nd(n[a+1]);n[r+1]=sA(v,a),0!==v&&(n[v+1]=Kx(n[v+1],r)),n[a+1]=function Qie(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=sA(a,0),0!==a&&(n[a+1]=Kx(n[a+1],r)),a=r;else n[r+1]=sA(u,0),0===a?a=r:n[u+1]=Kx(n[u+1],r),u=r;l&&(n[r+1]=Wx(n[r+1])),T3(n,h,r,!0),T3(n,h,r,!1),function Xie(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&uu(s,e)>=0&&(t[r+1]=Qx(t[r+1]))}(e,h,n,r,s),o=sA(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Ct&&Wr(i,o,e)&&function N3(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],h=function Yie(n){return!(1&~n)}(l)?O3(u,e,t,i,zh(l),o):void 0;oA(h)||(oA(s)||function Kie(n){return!(2&~n)}(l)&&(s=O3(u,null,t,i,a,o)),function Mte(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Xl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xl.Important),n.setStyle(t,r,i,s))}}(r,o,wh(Hr(),t),i,s))}(s,s.data[Hr()],i,i[mt],n,i[o+1]=function gse(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=zr(bo(n)))),n}(e,t),r,o)}(n,e,null,!0),$h}function Jx(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=fI(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function fI(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Hi(n,o,!!t||e[++s]))}return void 0===n?null:n}function O3(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let v=t[i+1];v===Ct&&(v=g?Kt:void 0);let E=g?Oy(v,r):h===r?v:void 0;if(l&&!oA(E)&&(E=Oy(u,r)),oA(E)&&(a=E,o))return a;const T=n[i+1];i=o?nd(T):zh(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Oy(u,r))}return a}function oA(n){return void 0!==n}class Cse{destroy(e){}updateValue(e,t){}swap(e,t){const r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){const o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}}function Xx(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Zx(n,e,t,r){return!(void 0===e||!e.has(r)||(n.attach(t,e.get(r)),e.delete(r),0))}function F3(n,e,t,r,i){if(Zx(n,e,r,t(r,i)))n.updateValue(r,i);else{const s=n.create(r,i);n.attach(r,s)}}function L3(n,e,t,r){const i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}class U3{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}}function zt(n,e){fs("NgControlFlow");const t=he(),r=vo(),i=t[r]!==Ct?t[r]:-1,s=-1!==i?aA(t,Ye+i):void 0;if(Wr(t,r,n)){const a=Ze(null);try{if(void 0!==s&&ax(s,0),-1!==n){const u=Ye+n,l=aA(t,u),h=e1(t[Pe],u),g=Lh(l,h.tView.ssrId);Fg(l,Vg(t,h,e,{dehydratedView:g}),0,Vh(h,g))}}finally{Ze(a)}}else if(void 0!==s){const a=A4(s,0);void 0!==a&&(a[Nn]=e)}}class Sse{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-fr}}function So(n,e){return e}class Rse{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}}function gs(n,e,t,r,i,s,o,a,u,l,h,g,v){fs("NgControlFlow");const E=he(),T=Mt(),P=void 0!==u,R=he(),z=a?o.bind(R[rr][Nn]):o,j=new Rse(P,z);R[Ye+n]=j,uI(E,T,n+1,e,t,r,i,Ks(T.consts,s)),P&&uI(E,T,n+2,u,l,h,g,Ks(T.consts,v))}class xse extends Cse{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-fr}at(e){return this.getLView(e)[Nn].$implicit}attach(e,t){const r=t[Qi];this.needsIndexUpdate||=e!==this.length,Fg(this.lContainer,t,e,Vh(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function Mse(n,e){return qv(n,e)}(this.lContainer,e)}create(e,t){const r=Lh(this.lContainer,this.templateTNode.tView.ssrId),i=Vg(this.hostLView,this.templateTNode,new Sse(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Mb(e[Pe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Nn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Nn].$index=e}getLView(e){return function kse(n,e){return A4(n,e)}(this.lContainer,e)}}function ms(n){const e=Ze(null),t=Hr();try{const r=he(),i=r[Pe],s=r[t],o=t+1,a=aA(r,o);if(void 0===s.liveCollection){const l=e1(i,o);s.liveCollection=new xse(a,r,l)}else s.liveCollection.reset();const u=s.liveCollection;if(function Dse(n,e,t){let r,i,s=0,o=n.length-1;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){const l=n.at(s),h=e[s],g=Xx(s,l,s,h,t);if(0!==g){g<0&&n.updateValue(s,h),s++;continue}const v=n.at(o),E=e[u],T=Xx(o,v,u,E,t);if(0!==T){T<0&&n.updateValue(o,E),o--,u--;continue}const P=t(s,l),R=t(o,v),z=t(s,h);if(Object.is(z,R)){const j=t(u,E);Object.is(j,P)?(n.swap(s,o),n.updateValue(o,E),u--,o--):n.move(o,s),n.updateValue(s,h),s++}else if(r??=new U3,i??=L3(n,s,o,t),Zx(n,r,s,z))n.updateValue(s,h),s++,o++;else if(i.has(z))r.set(P,n.detach(s)),o--;else{const j=n.create(s,e[s]);n.attach(s,j),s++,o++}}for(;s<=u;)F3(n,r,t,s,e[s]),s++}else if(null!=e){const u=e[Symbol.iterator]();let l=u.next();for(;!l.done&&s<=o;){const h=n.at(s),g=l.value,v=Xx(s,h,s,g,t);if(0!==v)v<0&&n.updateValue(s,g),s++,l=u.next();else{r??=new U3,i??=L3(n,s,o,t);const E=t(s,g);if(Zx(n,r,s,E))n.updateValue(s,g),s++,o++,l=u.next();else if(i.has(E)){const T=t(s,h);r.set(T,n.detach(s)),o--}else n.attach(s,n.create(s,g)),s++,o++,l=u.next()}}for(;!l.done;)F3(n,r,t,n.length,l.value),l=u.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(u=>{n.destroy(u)})}(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){const l=vo(),h=0===u.length;if(Wr(r,l,h)){const g=t+2,v=aA(r,g);if(h){const E=e1(i,g),T=Lh(v,E.tView.ssrId);Fg(v,Vg(r,E,void 0,{dehydratedView:T}),0,Vh(E,T))}else ax(v,0)}}}finally{Ze(e)}}function aA(n,e){return n[e]}function e1(n,e){return Th(n,e)}function L(n,e,t,r){const i=he(),s=Mt(),o=Ye+n,a=i[mt],u=s.firstCreatePass?function Nse(n,e,t,r,i,s){const o=e.consts,u=Oh(e,n,2,r,Ks(o,i));return tx(e,t,u,Ks(o,s)),null!==u.attrs&&Wb(u,u.attrs,!1),null!==u.mergedAttrs&&Wb(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=B3(s,i,u,a,e,n);i[o]=l;const h=ng(u);return Qs(u,!0),c4(a,l,u),!zg(u)&&Ch()&&kb(s,i,l,u),0===function zP(){return _t.lFrame.elementDepthCount}()&&hs(l,i),function $P(){_t.lFrame.elementDepthCount++}(),h&&(XR(s,i,u),JR(s,u,i)),null!==r&&ZR(i,u),L}function O(){let n=Sn();hv()?function fv(){_t.lFrame.isParent=!1}():(n=n.parent,Qs(n,!1));const e=n;(function GP(n){return _t.skipHydrationRootTNode===n})(e)&&function YT(){_t.skipHydrationRootTNode=null}(),function qP(){_t.lFrame.elementDepthCount--}();const t=Mt();return t.firstCreatePass&&(yg(t,n),Ih(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Tv(n){return!!(8&n.flags)}(e)&&Yx(t,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sR(n){return!!(16&n.flags)}(e)&&Yx(t,e,he(),e.stylesWithoutHost,!1),O}function Yr(n,e,t,r){return L(n,e,t,r),O(),Yr}let B3=(n,e,t,r,i,s)=>(Zo(!0),xb(r,i,rb()));function Ose(n,e,t,r,i,s){const o=e[Qi],a=!o||wa()||zg(t)||xh(o,s);if(Zo(a),a)return xb(r,i,rb());const u=tI(o,n,e,t);return Ej(o,s)&&wb(o,s,u.nextSibling),o&&(mR(t)||YB(u))&&_u(t)&&(function HP(n){_t.skipHydrationRootTNode=n}(t),o4(u)),u}let z3=(n,e,t,r)=>(Zo(!0),zR(e[mt],""));function Lse(n,e,t,r){let i;const s=e[Qi],o=!s||wa()||xh(s,r)||zg(t);if(Zo(o),o)return zR(e[mt],"");const a=tI(s,n,e,t),u=function Ij(n,e){const t=n.data;let r=t[vb]?.[e]??null;return null===r&&t[Fv]?.[e]&&(r=RR(n,e)),r}(s,r);return wb(s,r,a),i=$b(u,a),i}function gr(){return he()}const qh=void 0;var jse=["en",[["a","p"],["AM","PM"],qh],[["AM","PM"],qh,qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qh,"{1} 'at' {0}",qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bse(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let om={};function Ms(n){const e=function $se(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=H3(e);if(t)return t;const r=e.split("-")[0];if(t=H3(r),t)return t;if("en"===r)return jse;throw new ye(701,!1)}function H3(n){return n in om||(om[n]=Qn.ng&&Qn.ng.common&&Qn.ng.common.locales&&Qn.ng.common.locales[n]),om[n]}var ir=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ir||{});const uA="en-US";let W3=uA,d7=(n,e,t)=>{};function Oe(n,e,t,r){const i=he(),s=Mt(),o=Sn();return s1(s,i,i[mt],o,n,e,r),Oe}function s1(n,e,t,r,i,s,o){const a=ng(r),l=n.firstCreatePass&&function T4(n){return n.cleanup??=[]}(n),h=e[Nn],g=function w4(n){return n[Bl]??=[]}(e);let v=!0;if(3&r.type||o){const P=_i(r,e),R=o?o(P):P,z=g.length,j=o?te=>o(cn(te[r.index])):r.index;let H=null;if(!o&&a&&(H=function xoe(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Bl],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,v=!1;else{s=g7(r,e,h,s),d7(P,i,s);const te=t.listen(R,i,s);g.push(s,te),l&&l.push(i,j,z,z+1)}}else s=g7(r,e,h,s);const E=r.outputs;let T;if(v&&null!==E&&(T=E[i])){const P=T.length;if(P)for(let R=0;R<P;R+=2){const me=e[T[R]][T[R+1]].subscribe(s),_e=g.length;g.push(s,me),l&&l.push(i,r.index,_e,-(_e+1))}}}function p7(n,e,t,r){const i=Ze(null);try{return Xo(6,e,t),!1!==t(r)}catch(s){return Fb(n,s),!1}finally{Xo(7,e,t),Ze(i)}}function g7(n,e,t,r){return function i(s){if(s===Function)return r;Kv(n.componentOffset>-1?xs(n.index,e):e,5);let a=p7(e,t,r,s),u=i.__ngNextListenerFn__;for(;u;)a=p7(e,t,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Le(n=1){return function XP(n){return(_t.lFrame.contextLView=function WT(n,e){for(;n>0;)e=e[jl],n--;return e}(n,_t.lFrame.contextLView))[Nn]}(n)}function Su(n,e,t,r,i){const s=he(),o=Jg(s,e,t,r);return o!==Ct&&Xs(Mt(),qn(),s,n,o,s[mt],i,!1),Su}function Pu(n){return yu(function JT(){return _t.lFrame.contextLView}(),Ye+n)}function G(n,e=""){const t=he(),r=Mt(),i=n+Ye,s=r.firstCreatePass?Oh(r,i,1,e,null):r.data[i],o=F7(r,t,s,e,n);t[i]=o,Ch()&&kb(r,t,o,s),Qs(s,!1)}let F7=(n,e,t,r,i)=>(Zo(!0),jR(e[mt],r));function Qoe(n,e,t,r,i){const s=e[Qi],o=!s||wa()||zg(t)||xh(s,i);return Zo(o),o?jR(e[mt],r):tI(s,n,e,t)}function pn(n){return In("",n,""),pn}function In(n,e,t){const r=he(),i=Jg(r,n,e,t);return i!==Ct&&yc(r,Hr(),i),In}function hA(n,e,t,r,i){const s=he(),o=function Xg(n,e,t,r,i,s){const a=Bh(n,Ji(),t,i);return Io(2),a?e+At(t)+r+At(i)+s:Ct}(s,n,e,t,r,i);return o!==Ct&&yc(s,Hr(),o),hA}function fA(n,e,t,r,i,s,o){const a=he(),u=function Zg(n,e,t,r,i,s,o,a){const l=Xb(n,Ji(),t,i,o);return Io(3),l?e+At(t)+r+At(i)+s+At(o)+a:Ct}(a,n,e,t,r,i,s,o);return u!==Ct&&yc(a,Hr(),u),fA}function Dt(n,e,t){Tz(e)&&(e=e());const r=he();return Wr(r,vo(),e)&&Xs(Mt(),qn(),r,n,e,r[mt],t,!1),Dt}function wt(n,e){const t=Tz(n);return t&&n.set(e),t}function St(n,e){const t=he(),r=Mt(),i=Sn();return s1(r,t,t[mt],i,n,e),St}function a1(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let s=0;s<n.length;s++)a1(n[s],e,t,r,i);else{const s=Mt(),o=he(),a=Sn();let u=du(n)?n:ht(n.provide);const l=ST(n),h=1048575&a.providerIndexes,g=a.directiveStart,v=a.providerIndexes>>20;if(du(n)||!n.multi){const E=new Hl(l,i,De),T=c1(u,e,i?h:h+v,g);-1===T?(Tg(Kl(a,o),s,u),u1(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[T]=E,o[T]=E)}else{const E=c1(u,e,h+v,g),T=c1(u,e,h,h+v),R=T>=0&&t[T];if(i&&!R||!i&&!(E>=0&&t[E])){Tg(Kl(a,o),s,u);const z=function nae(n,e,t,r,i){const s=new Hl(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,H7(s,i,r&&!t),s}(i?tae:eae,t.length,i,r,l);!i&&R&&(t[T].providerFactory=z),u1(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else u1(s,n,E>-1?E:T,H7(t[i?T:E],l,!i&&r));!i&&r&&R&&t[T].componentProviders++}}}function u1(n,e,t,r){const i=du(e),s=function xP(n){return!!n.useClass}(e);if(i||s){const u=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(t);-1===h?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function H7(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function c1(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eae(n,e,t,r){return l1(this.multi,[])}function tae(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=m(t,t[Pe],this.providerFactory.index,r);s=a.slice(0,o),l1(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],l1(i,s);return s}function l1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function mr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Zoe(n,e,t){const r=Mt();if(r.firstCreatePass){const i=yo(n);a1(t,r.data,r.blueprint,i,!0),a1(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let rae=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=qy(0,t.type),i=r.length>0?Yb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(Se(Ki))})}}return n})();function sr(n){fs("NgStandalone"),n.getStandaloneInjector=e=>e.get(rae).getOrCreateStandaloneInjector(n)}function rd(n,e,t){const r=Yi()+n,i=he();return i[r]===Ct?bu(i,r,t?e.call(t):e()):function aI(n,e){return n[e]}(i,r)}function d1(n,e,t,r){return Q7(he(),Yi(),n,e,t,r)}function vI(n,e){const t=n[e];return t===Ct?void 0:t}function Q7(n,e,t,r,i,s){const o=e+t;return Wr(n,o,i)?bu(n,o+1,s?r.call(s,i):r(i)):vI(n,o+1)}function Po(n,e){const t=Mt();let r;const i=n+Ye;t.firstCreatePass?(r=function gae(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=ic(r.type)),a=pi(De);try{const u=Ph(!1),l=s();return Ph(u),function o1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,he(),i,l),l}finally{pi(a)}}function mA(n,e,t){const r=n+Ye,i=he(),s=yu(i,r);return II(i,r)?Q7(i,Yi(),e,s.transform,t,s):s.transform(t)}function id(n,e,t,r){const i=n+Ye,s=he(),o=yu(s,i);return II(s,i)?function Y7(n,e,t,r,i,s,o){const a=e+t;return Bh(n,a,i,s)?bu(n,a+2,o?r.call(o,i,s):r(i,s)):vI(n,a+2)}(s,Yi(),e,o.transform,t,r,o):o.transform(t,r)}function h1(n,e,t,r,i){const s=n+Ye,o=he(),a=yu(o,s);return II(o,s)?function J7(n,e,t,r,i,s,o,a){const u=e+t;return Xb(n,u,i,s,o)?bu(n,u+3,a?r.call(a,i,s,o):r(i,s,o)):vI(n,u+3)}(o,Yi(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function II(n,e){return n[Pe].data[e].pure}class cm{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const Bae=new cm("18.2.13");let _1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const v5=new Ae("");function TI(n){return!!n&&"function"==typeof n.then}function I5(n){return!!n&&"function"==typeof n.subscribe}const w1=new Ae("");let E5=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Q(w1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(TI(s))t.push(s);else if(I5(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const lm=new Ae("");let EA,Da=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(YZ),this.afterRenderManager=Q(Qz),this.zonelessEnabled=Q(Bg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new F,this.afterTick=new F,this.componentTypes=[],this.components=[],this.isStable=Q(Yl).hasPendingTasks.pipe(qe(t=>!t)),this._injector=Q(Ki)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof tz;if(!this._injector.get(E5).done)throw!i&&function uc(n){const e=Ft(n)||$r(n)||Ri(n);return null!==e&&e.standalone}(t),new ye(405,!1);let o;o=i?t:this._injector.get(Gb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function fue(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Uh),l=o.create(ki.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(v5,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),IA(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ye(101,!1);const t=Ze(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ze(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ix,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)mue(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>lg(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;IA(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(lm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>IA(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ye(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function T1(n){EA??=new WeakMap;const e=EA.get(n);if(e)return e;const t=n.isStable.pipe(Ho(r=>r)).toPromise().then(()=>{});return EA.set(n,t),n.onDestroy(()=>EA?.delete(n)),t}function mue(n,e,t,r){(t||lg(n))&&Lb(n,e,t&&!r?0:1)}class _ue{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let b5=(()=>{class n{compileModuleSync(t){return new Ox(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ao(Wi(t).declarations).reduce((o,a)=>{const u=Ft(a);return u&&o.push(new sI(u)),o},[]);return new _ue(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iue=(()=>{class n{constructor(){this.zone=Q(Qt),this.changeDetectionScheduler=Q(Ug),this.applicationRef=Q(Da)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Qt({...A1(),scheduleInRootZone:t}),[{provide:Qt,useFactory:n},{provide:fo,multi:!0,useFactory:()=>{const r=Q(Iue,{optional:!0});return()=>r.initialize()}},{provide:fo,multi:!0,useFactory:()=>{const r=Q(wue);return()=>{r.initialize()}}},!0===e?{provide:ez,useValue:!0}:[],{provide:vx,useValue:t??zB}]}function A1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let wue=(()=>{class n{constructor(){this.subscription=new Zt,this.initialized=!1,this.zone=Q(Qt),this.pendingTasks=Q(Yl)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bI=(()=>{class n{constructor(){this.appRef=Q(Da),this.taskService=Q(Yl),this.ngZone=Q(Qt),this.zonelessEnabled=Q(Bg),this.disableScheduling=Q(ez,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Zt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(mb):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(vx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pR||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?qB:$B;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qB(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ec=new Ae("",{providedIn:"root",factory:()=>Q(Ec,Ut.Optional|Ut.SkipSelf)||function Tue(){return typeof $localize<"u"&&$localize.locale||uA}()}),wA=new Ae("");function TA(n){return!n.moduleRef}let sd=null;let Gh=(()=>{class n{static{this.__NG_ELEMENT_ID__=kue}}return n})();function kue(n){return function Nue(n,e,t){if(_u(n)&&!t){const r=xs(n.index,e);return new Qv(r,r)}return 175&n.type?new Qv(e[rr],e):null}(Sn(),he(),!(16&~n))}class z5{constructor(){}supports(e){return e instanceof Map||Vx(e)}create(){return new zue}}class zue{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Vx(e)))throw new ye(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new $ue(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class $ue{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q5(){return new CA([new z5])}let CA=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:q5})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||q5()),deps:[[n,new zp,new Ol]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ye(901,!1)}}return n})();function rce(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function Mue(n=[]){if(sd)return sd;const e=function M5(n=[],e){return ki.create({name:e,providers:[{provide:Ky,useValue:"platform"},{provide:wA,useValue:new Set([()=>sd=null])},...n]})}(n);return sd=e,function w5(){!function Ds(n){us=n}(()=>{throw new ye(600,!1)})}(),function k5(n){n.get(gj,null)?.forEach(t=>t())}(e),e}(r),s=[b1({}),{provide:Ug,useExisting:bI},...t||[]];return function P5(n){const e=TA(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Qt);return t.run(()=>{TA(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(Eu,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),TA(n)){const s=()=>e.destroy(),o=n.platformInjector.get(wA);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(wA);o.add(s),n.moduleRef.onDestroy(()=>{IA(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return function gue(n,e,t){try{const r=t();return TI(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(E5);return s.runInitializers(),s.donePromise.then(()=>{if(function Wse(n){"string"==typeof n&&(W3=n.toLowerCase().replace(/_/g,"-"))}(e.get(Ec,uA)||uA),TA(n)){const a=e.get(Da);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function Pue(n,e){const t=n.injector.get(Da);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new ye(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new jz({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}let d$=!1;function wce(){return va([{provide:Tb,useFactory:()=>{let n=!0;return Co()&&(n=!!Q(Pg,{optional:!0})?.get(CR,null)),n&&fs("NgHydration"),n}},{provide:fo,useValue:()=>{(function Q4(n){W4=n})(!1),Co()&&Q(Tb)&&(function Tce(){const n=Jl();let e;for(const t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&"nghm"===t.textContent?.trim()){e=t;break}if(!e)throw new ye(-507,!1)}(),function vce(){d$||(d$=!0,function Cee(){_j=Aee}(),function Vse(){B3=Ose}(),function Yoe(){F7=Qoe}(),function Use(){z3=Lse}(),function fie(){zz=hie}(),function kre(){lz=Mre,bx=xre}(),function dre(){Z4=lre}(),function Ute(){g4=Lte}())}())},multi:!0},{provide:Aj,useFactory:()=>Co()&&Q(Tb)},{provide:lm,useFactory:()=>{if(Co()&&Q(Tb)){const n=Q(Da);return Q(ki),()=>{(function Ece(n){return T1(n)})(n).then(()=>{!function ure(n){const e=n._views;for(const t of e){const r=yj(t);null!==r&&null!==r[nr]&&(Gr(r)?qb(r):X4(r))}}(n)})}}return()=>{}},multi:!0}])}function dm(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function SI(n,e){fs("NgSignals");const t=function Be(n){const e=Object.create(dr);e.computation=n;const t=()=>{if(Ot(e),be(e),e.value===Xt)throw e.error;return e.value};return t[_n]=e,t}(n);return e?.equal&&(t[_n].equal=e.equal),t}function Ru(n){const e=Ze(null);try{return n()}finally{Ze(e)}}let f$=null;function od(){return f$}class Mce{}const eo=new Ae("");let O1=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(Nce),providedIn:"platform"})}}return n})();const kce=new Ae("");let Nce=(()=>{class n extends O1{constructor(){super(),this._doc=Q(eo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return od().getBaseHref(this._doc)}onPopState(t){const r=od().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=od().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function V1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function p$(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function wc(n){return n&&"?"!==n[0]?"?"+n:n}let Wh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(m$),providedIn:"root"})}}return n})();const g$=new Ae("");let m$=(()=>{class n extends Wh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(eo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+wc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+wc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+wc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(O1),Se(g$,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Oce=(()=>{class n extends Wh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+wc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+wc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(O1),Se(g$,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),PI=(()=>{class n{constructor(t){this._subject=new jt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Lce(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(p$(_$(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wc(r))}normalize(t){return n.stripTrailingSlash(function Fce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,_$(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=wc}static{this.joinWithSlash=V1}static{this.stripTrailingSlash=p$}static{this.\u0275fac=function(r){return new(r||n)(Se(Wh))}}static{this.\u0275prov=ke({token:n,factory:()=>function Vce(){return new PI(Se(Wh))}(),providedIn:"root"})}}return n})();function _$(n){return n.replace(/\/index.html$/,"")}var kA=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(kA||{}),Ns=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ns||{}),Yn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Yn||{}),Ro=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ro||{});const ai={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function NA(n,e){return sa(Ms(n)[ir.DateFormat],e)}function OA(n,e){return sa(Ms(n)[ir.TimeFormat],e)}function VA(n,e){return sa(Ms(n)[ir.DateTimeFormat],e)}function ia(n,e){const t=Ms(n),r=t[ir.NumberSymbols][e];if(typeof r>"u"){if(e===ai.CurrencyDecimal)return t[ir.NumberSymbols][ai.Decimal];if(e===ai.CurrencyGroup)return t[ir.NumberSymbols][ai.Group]}return r}function v$(n){if(!n[ir.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ir.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function sa(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function L1(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Xce=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,FA={},Zce=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Tc=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Tc||{}),Pn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Pn||{}),Rn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Rn||{});function ele(n,e,t,r){let i=function cle(n){if(w$(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return LA(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Xce))return function lle(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,u,l),e}(r)}const e=new Date(n);if(!w$(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=bc(t,e)||e;let a,o=[];for(;e;){if(a=Zce.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let u=i.getTimezoneOffset();r&&(u=E$(r,u),i=function ule(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function ale(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(E$(e,i)-i))}(i,r,!0));let l="";return o.forEach(h=>{const g=function ole(n){if(B1[n])return B1[n];let e;switch(n){case"G":case"GG":case"GGG":e=or(Rn.Eras,Yn.Abbreviated);break;case"GGGG":e=or(Rn.Eras,Yn.Wide);break;case"GGGGG":e=or(Rn.Eras,Yn.Narrow);break;case"y":e=ui(Pn.FullYear,1,0,!1,!0);break;case"yy":e=ui(Pn.FullYear,2,0,!0,!0);break;case"yyy":e=ui(Pn.FullYear,3,0,!1,!0);break;case"yyyy":e=ui(Pn.FullYear,4,0,!1,!0);break;case"Y":e=zA(1);break;case"YY":e=zA(2,!0);break;case"YYY":e=zA(3);break;case"YYYY":e=zA(4);break;case"M":case"L":e=ui(Pn.Month,1,1);break;case"MM":case"LL":e=ui(Pn.Month,2,1);break;case"MMM":e=or(Rn.Months,Yn.Abbreviated);break;case"MMMM":e=or(Rn.Months,Yn.Wide);break;case"MMMMM":e=or(Rn.Months,Yn.Narrow);break;case"LLL":e=or(Rn.Months,Yn.Abbreviated,Ns.Standalone);break;case"LLLL":e=or(Rn.Months,Yn.Wide,Ns.Standalone);break;case"LLLLL":e=or(Rn.Months,Yn.Narrow,Ns.Standalone);break;case"w":e=U1(1);break;case"ww":e=U1(2);break;case"W":e=U1(1,!0);break;case"d":e=ui(Pn.Date,1);break;case"dd":e=ui(Pn.Date,2);break;case"c":case"cc":e=ui(Pn.Day,1);break;case"ccc":e=or(Rn.Days,Yn.Abbreviated,Ns.Standalone);break;case"cccc":e=or(Rn.Days,Yn.Wide,Ns.Standalone);break;case"ccccc":e=or(Rn.Days,Yn.Narrow,Ns.Standalone);break;case"cccccc":e=or(Rn.Days,Yn.Short,Ns.Standalone);break;case"E":case"EE":case"EEE":e=or(Rn.Days,Yn.Abbreviated);break;case"EEEE":e=or(Rn.Days,Yn.Wide);break;case"EEEEE":e=or(Rn.Days,Yn.Narrow);break;case"EEEEEE":e=or(Rn.Days,Yn.Short);break;case"a":case"aa":case"aaa":e=or(Rn.DayPeriods,Yn.Abbreviated);break;case"aaaa":e=or(Rn.DayPeriods,Yn.Wide);break;case"aaaaa":e=or(Rn.DayPeriods,Yn.Narrow);break;case"b":case"bb":case"bbb":e=or(Rn.DayPeriods,Yn.Abbreviated,Ns.Standalone,!0);break;case"bbbb":e=or(Rn.DayPeriods,Yn.Wide,Ns.Standalone,!0);break;case"bbbbb":e=or(Rn.DayPeriods,Yn.Narrow,Ns.Standalone,!0);break;case"B":case"BB":case"BBB":e=or(Rn.DayPeriods,Yn.Abbreviated,Ns.Format,!0);break;case"BBBB":e=or(Rn.DayPeriods,Yn.Wide,Ns.Format,!0);break;case"BBBBB":e=or(Rn.DayPeriods,Yn.Narrow,Ns.Format,!0);break;case"h":e=ui(Pn.Hours,1,-12);break;case"hh":e=ui(Pn.Hours,2,-12);break;case"H":e=ui(Pn.Hours,1);break;case"HH":e=ui(Pn.Hours,2);break;case"m":e=ui(Pn.Minutes,1);break;case"mm":e=ui(Pn.Minutes,2);break;case"s":e=ui(Pn.Seconds,1);break;case"ss":e=ui(Pn.Seconds,2);break;case"S":e=ui(Pn.FractionalSeconds,1);break;case"SS":e=ui(Pn.FractionalSeconds,2);break;case"SSS":e=ui(Pn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=BA(Tc.Short);break;case"ZZZZZ":e=BA(Tc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=BA(Tc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=BA(Tc.Long);break;default:return null}return B1[n]=e,e}(h);l+=g?g(i,t,u):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function LA(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function bc(n,e){const t=function Bce(n){return Ms(n)[ir.LocaleId]}(n);if(FA[t]??={},FA[t][e])return FA[t][e];let r="";switch(e){case"shortDate":r=NA(n,Ro.Short);break;case"mediumDate":r=NA(n,Ro.Medium);break;case"longDate":r=NA(n,Ro.Long);break;case"fullDate":r=NA(n,Ro.Full);break;case"shortTime":r=OA(n,Ro.Short);break;case"mediumTime":r=OA(n,Ro.Medium);break;case"longTime":r=OA(n,Ro.Long);break;case"fullTime":r=OA(n,Ro.Full);break;case"short":const i=bc(n,"shortTime"),s=bc(n,"shortDate");r=UA(VA(n,Ro.Short),[i,s]);break;case"medium":const o=bc(n,"mediumTime"),a=bc(n,"mediumDate");r=UA(VA(n,Ro.Medium),[o,a]);break;case"long":const u=bc(n,"longTime"),l=bc(n,"longDate");r=UA(VA(n,Ro.Long),[u,l]);break;case"full":const h=bc(n,"fullTime"),g=bc(n,"fullDate");r=UA(VA(n,Ro.Full),[h,g])}return r&&(FA[t][e]=r),r}function UA(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Sa(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function ui(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function nle(n,e){switch(n){case Pn.FullYear:return e.getFullYear();case Pn.Month:return e.getMonth();case Pn.Date:return e.getDate();case Pn.Hours:return e.getHours();case Pn.Minutes:return e.getMinutes();case Pn.Seconds:return e.getSeconds();case Pn.FractionalSeconds:return e.getMilliseconds();case Pn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Pn.Hours)0===a&&-12===t&&(a=12);else if(n===Pn.FractionalSeconds)return function tle(n,e){return Sa(n,3).substring(0,e)}(a,e);const u=ia(o,ai.MinusSign);return Sa(a,e,u,r,i)}}function or(n,e,t=Ns.Format,r=!1){return function(i,s){return function rle(n,e,t,r,i,s){switch(t){case Rn.Months:return function $ce(n,e,t){const r=Ms(n),s=sa([r[ir.MonthsFormat],r[ir.MonthsStandalone]],e);return sa(s,t)}(e,i,r)[n.getMonth()];case Rn.Days:return function zce(n,e,t){const r=Ms(n),s=sa([r[ir.DaysFormat],r[ir.DaysStandalone]],e);return sa(s,t)}(e,i,r)[n.getDay()];case Rn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function Wce(n){const e=Ms(n);return v$(e),(e[ir.ExtraData][2]||[]).map(r=>"string"==typeof r?L1(r):[L1(r[0]),L1(r[1])])}(e),h=function Kce(n,e,t){const r=Ms(n);v$(r);const s=sa([r[ir.ExtraData][0],r[ir.ExtraData][1]],e)||[];return sa(s,t)||[]}(e,i,r),g=l.findIndex(v=>{if(Array.isArray(v)){const[E,T]=v,P=o>=E.hours&&a>=E.minutes,R=o<T.hours||o===T.hours&&a<T.minutes;if(E.hours<T.hours){if(P&&R)return!0}else if(P||R)return!0}else if(v.hours===o&&v.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function jce(n,e,t){const r=Ms(n),s=sa([r[ir.DayPeriodsFormat],r[ir.DayPeriodsStandalone]],e);return sa(s,t)}(e,i,r)[o<12?0:1];case Rn.Eras:return function qce(n,e){return sa(Ms(n)[ir.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function BA(n){return function(e,t,r){const i=-1*r,s=ia(t,ai.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Tc.Short:return(i>=0?"+":"")+Sa(o,2,s)+Sa(Math.abs(i%60),2,s);case Tc.ShortGMT:return"GMT"+(i>=0?"+":"")+Sa(o,1,s);case Tc.Long:return"GMT"+(i>=0?"+":"")+Sa(o,2,s)+":"+Sa(Math.abs(i%60),2,s);case Tc.Extended:return 0===r?"Z":(i>=0?"+":"")+Sa(o,2,s)+":"+Sa(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const ile=0,jA=4;function I$(n){const e=n.getDay(),t=0===e?-3:jA-e;return LA(n.getFullYear(),n.getMonth(),n.getDate()+t)}function U1(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=I$(t),o=function sle(n){const e=LA(n,ile,1).getDay();return LA(n,0,1+(e<=jA?jA:jA+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Sa(i,n,ia(r,ai.MinusSign))}}function zA(n,e=!1){return function(t,r){return Sa(I$(t).getFullYear(),n,ia(r,ai.MinusSign),e)}}const B1={};function E$(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function w$(n){return n instanceof Date&&!isNaN(n.valueOf())}const dle=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function q1(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function C$(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let R$=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dle,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){x$("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){x$("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(De(ba),De(vc))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Dle{constructor(){this.$implicit=null,this.ngIf=null}}function x$(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${zr(e)}'.`)}let k$=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Xl.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(De(wo),De(CA),De(Ic))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function Pa(n,e){return new ye(2100,!1)}class xle{createSubscription(e,t){return Ru(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Ru(()=>e.unsubscribe())}}class Mle{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const kle=new Mle,Nle=new xle;let N$=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(TI(t))return kle;if(I5(t))return Nle;throw Pa()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(De(Gh,16))}}static{this.\u0275pipe=gi({name:"async",type:n,pure:!1,standalone:!0})}}return n})();const Ble=new Ae(""),jle=new Ae("");let fm=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return ele(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Pa()}}static{this.\u0275fac=function(r){return new(r||n)(De(Ec,16),De(Ble,24),De(jle,24))}}static{this.\u0275pipe=gi({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),Q1=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Y1(n){return!(null==n||""===n||n!=n)}(t))return null;i||=this._locale;try{return function _le(n,e,t){return function z1(n,e,t,r,i,s,o=!1){let a="",u=!1;if(isFinite(n)){let l=function vle(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(l=function yle(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let h=e.minInt,g=e.minFrac,v=e.maxFrac;if(s){const j=s.match(dle);if(null===j)throw new Error(`${s} is not a valid digit info`);const H=j[1],te=j[3],me=j[5];null!=H&&(h=q1(H)),null!=te&&(g=q1(te)),null!=me?v=q1(me):null!=te&&g>v&&(v=g)}!function Ile(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let g=o;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let g=1;g<o;g++)r[g]=0}if(a>=5)if(o-1<0){for(let g=0;g>o;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const l=e+n.integerLen,h=r.reduceRight(function(g,v,E,T){return T[E]=(v+=g)<10?v:v-10,u&&(0===T[E]&&E>=l?T.pop():u=!1),v>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}(l,g,v);let E=l.digits,T=l.integerLen;const P=l.exponent;let R=[];for(u=E.every(j=>!j);T<h;T++)E.unshift(0);for(;T<0;T++)E.unshift(0);T>0?R=E.splice(T,E.length):(R=E,E=[0]);const z=[];for(E.length>=e.lgSize&&z.unshift(E.splice(-e.lgSize,E.length).join(""));E.length>e.gSize;)z.unshift(E.splice(-e.gSize,E.length).join(""));E.length&&z.unshift(E.join("")),a=z.join(ia(t,r)),R.length&&(a+=ia(t,i)+R.join("")),P&&(a+=ia(t,ai.Exponential)+"+"+P)}else a=ia(t,ai.Infinity);return a=n<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function $1(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let h=0;h<u.length;h++){const g=u.charAt(h);"0"===g?t.minFrac=t.maxFrac=h+1:"#"===g?t.maxFrac=h+1:t.posSuf+=g}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const h=i.length-t.posPre.length-t.posSuf.length,g=s.indexOf("#");t.negPre=s.substring(0,g).replace(/'/g,""),t.negSuf=s.slice(g+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function F1(n,e){return Ms(n)[ir.NumberFormats][e]}(e,kA.Decimal),ia(e,ai.MinusSign)),e,ai.Group,ai.Decimal,t)}(function J1(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw Pa()}}static{this.\u0275fac=function(r){return new(r||n)(De(Ec,16))}}static{this.\u0275pipe=gi({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let Ac=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=lu({type:n})}static{this.\u0275inj=Gs({})}}return n})();const V$="browser",Yle="server";function xI(n){return n===Yle}let Xle=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>function Jle(n){return n===V$}(Q(To))?new Zle(Q(eo),window):new tde})}}return n})();class Zle{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function ede(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class tde{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class F${}var M=yt(467);function tM(n){return n[n.length-1]}function K$(n){return It(tM(n))?n.pop():void 0}function NI(n){return function Pde(n){return n&&It(n.schedule)}(tM(n))?n.pop():void 0}var Cc=yt(635);const Q$=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Y$(n){return It(n?.then)}function J$(n){return It(n[co])}function X$(n){return Symbol.asyncIterator&&It(n?.[Symbol.asyncIterator])}function Z$(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const eq=function xde(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tq(n){return It(n?.[eq])}function nq(n){return(0,Cc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Cc.N3)(t.read());if(i)return yield(0,Cc.N3)(void 0);yield yield(0,Cc.N3)(r)}}finally{t.releaseLock()}})}function rq(n){return It(n?.getReader)}function xo(n){if(n instanceof Vt)return n;if(null!=n){if(J$(n))return function Mde(n){return new Vt(e=>{const t=n[co]();if(It(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Q$(n))return function kde(n){return new Vt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Y$(n))return function Nde(n){return new Vt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,th)})}(n);if(X$(n))return iq(n);if(tq(n))return function Ode(n){return new Vt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(rq(n))return function Vde(n){return iq(nq(n))}(n)}throw Z$(n)}function iq(n){return new Vt(e=>{(function Fde(n,e){var t,r,i,s;return(0,Cc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Cc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Dc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Kh(n,e=0){return Ce((t,r)=>{t.subscribe(Ne(r,i=>Dc(r,n,()=>r.next(i),e),()=>Dc(r,n,()=>r.complete(),e),i=>Dc(r,n,()=>r.error(i),e)))})}function gm(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sq(n,e){if(!n)throw new Error("Iterable cannot be null");return new Vt(t=>{Dc(t,e,()=>{const r=n[Symbol.asyncIterator]();Dc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ar(n,e){return e?function $de(n,e){if(null!=n){if(J$(n))return function Lde(n,e){return xo(n).pipe(gm(e),Kh(e))}(n,e);if(Q$(n))return function Bde(n,e){return new Vt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Y$(n))return function Ude(n,e){return xo(n).pipe(gm(e),Kh(e))}(n,e);if(X$(n))return sq(n,e);if(tq(n))return function jde(n,e){return new Vt(t=>{let r;return Dc(t,e,()=>{r=n[eq](),Dc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>It(r?.return)&&r.return()})}(n,e);if(rq(n))return function zde(n,e){return sq(nq(n),e)}(n,e)}throw Z$(n)}(n,e):xo(n)}function lt(...n){return ar(n,NI(n))}function _s(n,e,t=1/0){return It(e)?_s((r,i)=>qe((s,o)=>e(r,s,i,o))(xo(n(r,i))),t):("number"==typeof e&&(t=e),Ce((r,i)=>function qde(n,e,t,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const v=()=>{g&&!u.length&&!l&&e.complete()},E=P=>l<r?T(P):u.push(P),T=P=>{s&&e.next(P),l++;let R=!1;xo(t(P,h++)).subscribe(Ne(e,z=>{i?.(z),s?E(z):e.next(z)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){const z=u.shift();o?Dc(e,o,()=>T(z)):T(z)}v()}catch(z){e.error(z)}}))};return n.subscribe(Ne(e,E,()=>{g=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function mm(n,e){return It(e)?_s(n,e,1):_s(n,1)}function WA(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ii(n,e){return Ce((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ne(r,u=>{i?.unsubscribe();let l=0;const h=s++;xo(n(u,h)).subscribe(i=Ne(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ni(n,e,t){const r=It(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ne(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):qi}class KA{}class QA{}class oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Gde{encodeKey(e){return oq(e)}encodeValue(e){return oq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Wde=/%(\d[a-f0-9])/gi,Kde={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oq(n){return encodeURIComponent(n).replace(Wde,(e,t)=>Kde[t]??e)}function YA(n){return`${n}`}class ad{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gde,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Hde(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(YA):[YA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ad({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(YA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(YA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Qde{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function aq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uq(n){return typeof Blob<"u"&&n instanceof Blob}function cq(n){return typeof FormData<"u"&&n instanceof FormData}class OI{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yde(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new oa,this.context??=new Qde,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ad,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||aq(this.body)||uq(this.body)||cq(this.body)||function Jde(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ad?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cq(this.body)?null:uq(this.body)?this.body.type||null:aq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ad?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,h=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((v,E)=>v.set(E,e.setHeaders[E]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((v,E)=>v.set(E,e.setParams[E]),h)),new OI(t,r,o,{params:h,headers:l,context:g,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}}var ud=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ud||{});class nM{constructor(e,t=200,r="OK"){this.headers=e.headers||new oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class JA extends nM{constructor(e={}){super(e),this.type=ud.ResponseHeader}clone(e={}){return new JA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qh extends nM{constructor(e={}){super(e),this.type=ud.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Qh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _m extends nM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let iM=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof OI)s=t;else{let u,l;u=i.headers instanceof oa?i.headers:new oa(i.headers),i.params&&(l=i.params instanceof ad?i.params:new ad({fromObject:i.params})),s=new OI(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=lt(s).pipe(mm(u=>this.handler.handle(u)));if(t instanceof OI||"events"===i.observe)return o;const a=o.pipe(zn(u=>u instanceof Qh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(qe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(qe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(qe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(qe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ad).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,rM(i,r))}post(t,r,i={}){return this.request("POST",t,rM(i,r))}put(t,r,i={}){return this.request("PUT",t,rM(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Se(KA))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const ehe=/^\)\]\}',?\n/;function dq(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let sM=(()=>{class n{constructor(){this.fetchImpl=Q(nhe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Q(Qt)}handle(t){return new Vt(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(oM,s=>r.error(new _m({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,M.A)(function*(){const o=s.createRequestInit(t);let a;try{const T=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function rhe(n){n.then(oM,oM)})(T),i.next({type:ud.Sent}),a=yield T}catch(T){return void i.error(new _m({error:T,status:T.status??0,statusText:T.statusText,url:t.urlWithParams,headers:T.headers}))}const u=new oa(a.headers),l=a.statusText,h=dq(a)??t.urlWithParams;let g=a.status,v=null;if(t.reportProgress&&i.next(new JA({headers:u,status:g,statusText:l,url:h})),a.body){const T=a.headers.get("content-length"),P=[],R=a.body.getReader();let j,H,z=0;const te=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,M.A)(function*(){for(;;){const{done:_e,value:D}=yield R.read();if(_e)break;if(P.push(D),z+=D.length,t.reportProgress){H="text"===t.responseType?(H??"")+(j??=new TextDecoder).decode(D,{stream:!0}):void 0;const b=()=>i.next({type:ud.DownloadProgress,total:T?+T:void 0,loaded:z,partialText:H});te?te.run(b):b()}}}));const me=s.concatChunks(P,z);try{const _e=a.headers.get("Content-Type")??"";v=s.parseBody(t,me,_e)}catch(_e){return void i.error(new _m({error:_e,headers:new oa(a.headers),status:a.status,statusText:a.statusText,url:dq(a)??t.urlWithParams}))}}0===g&&(g=v?200:0),g>=200&&g<300?(i.next(new Qh({body:v,headers:u,status:g,statusText:l,url:h})),i.complete()):i.error(new _m({error:v,headers:u,status:g,statusText:l,url:h}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(ehe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class nhe{}function oM(){}function hq(n,e){return e(n)}const VI=new Ae(""),fq=new Ae(""),pq=new Ae("",{providedIn:"root",factory:()=>!0});let gq=(()=>{class n extends KA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Q(Yl),this.contributeToStability=Q(pq)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(VI),...this.injector.get(fq,[])]));this.chain=r.reduceRight((i,s)=>function she(n,e,t){return(r,i)=>_o(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),hq)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(WA(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Se(QA),Se(Ki))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const hhe=/^\)\]\}',?\n/;let _q=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ye(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?ar(r.\u0275loadImpl()):lt(null)).pipe(Ii(()=>new Vt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((P,R)=>o.setRequestHeader(P,R.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&o.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();o.responseType="json"!==P?P:"text"}const a=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const P=o.statusText||"OK",R=new oa(o.getAllResponseHeaders()),z=function fhe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new JA({headers:R,status:o.status,statusText:P,url:z}),u},h=()=>{let{headers:P,status:R,statusText:z,url:j}=l(),H=null;204!==R&&(H=typeof o.response>"u"?o.responseText:o.response),0===R&&(R=H?200:0);let te=R>=200&&R<300;if("json"===t.responseType&&"string"==typeof H){const me=H;H=H.replace(hhe,"");try{H=""!==H?JSON.parse(H):null}catch(_e){H=me,te&&(te=!1,H={error:_e,text:H})}}te?(s.next(new Qh({body:H,headers:P,status:R,statusText:z,url:j||void 0})),s.complete()):s.error(new _m({error:H,headers:P,status:R,statusText:z,url:j||void 0}))},g=P=>{const{url:R}=l(),z=new _m({error:P,status:o.status||0,statusText:o.statusText||"Unknown Error",url:R||void 0});s.error(z)};let v=!1;const E=P=>{v||(s.next(l()),v=!0);let R={type:ud.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),"text"===t.responseType&&o.responseText&&(R.partialText=o.responseText),s.next(R)},T=P=>{let R={type:ud.UploadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),s.next(R)};return o.addEventListener("load",h),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),t.reportProgress&&(o.addEventListener("progress",E),null!==a&&o.upload&&o.upload.addEventListener("progress",T)),o.send(a),s.next({type:ud.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",h),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",E),null!==a&&o.upload&&o.upload.removeEventListener("progress",T)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Se(F$))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const aM=new Ae(""),yq=new Ae("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),vq=new Ae("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Iq{}let mhe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=C$(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Se(eo),Se(To),Se(yq))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function _he(n,e){const t=n.url.toLowerCase();if(!Q(aM)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Q(Iq).getToken(),i=Q(vq);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}const vhe=new Ae(""),wq="b",Tq="h",bq="s",Aq="st",Cq="u",Dq="rt",XA=new Ae(""),Ihe=["GET","HEAD"];function Ehe(n,e){const{isCacheActive:t,...r}=Q(XA),{transferCache:i,method:s}=n;if(!t||!1===i||"POST"===s&&!r.includePostRequests&&!i||"POST"!==s&&!Ihe.includes(s)||!r.includeRequestsWithAuthHeaders&&function whe(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}(n)||!1===r.filter?.(n))return e(n);const o=Q(Pg),a=Q(vhe,{optional:!0}),u=xI(Q(To));if(a&&!u)throw new ye(2803,!1);const l=u&&a?function Dhe(n,e){const t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}(n.url,a):n.url,h=function bhe(n,e){const{params:t,method:r,responseType:i}=n,s=Sq(t);let o=n.serializeBody();o instanceof URLSearchParams?o=Sq(o):"string"!=typeof o&&(o="");const u=function Ahe(n){let e=0;for(const t of n)e=Math.imul(31,e)+t.charCodeAt(0)|0;return e+=2147483648,e.toString()}([r,i,e,o,s].join("|"));return u}(n,l),g=o.get(h,null);let v=r.includeHeaders;if("object"==typeof i&&i.includeHeaders&&(v=i.includeHeaders),g){const{[wq]:E,[Dq]:T,[Tq]:P,[bq]:R,[Aq]:z,[Cq]:j}=g;let H=E;switch(T){case"arraybuffer":H=(new TextEncoder).encode(E).buffer;break;case"blob":H=new Blob([E])}let te=new oa(P);return lt(new Qh({body:H,headers:te,status:R,statusText:z,url:j}))}return e(n).pipe(Ni(E=>{E instanceof Qh&&u&&o.set(h,{[wq]:E.body,[Tq]:The(E.headers,v),[bq]:E.status,[Aq]:E.statusText,[Cq]:l,[Dq]:n.responseType})}))}function The(n,e){if(!e)return{};const t={};for(const r of e){const i=n.getAll(r);null!==i&&(t[r]=i)}return t}function Sq(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Che(n){return[{provide:XA,useFactory:()=>(fs("NgHttpTransferCache"),{isCacheActive:!0,...n})},{provide:fq,useValue:Ehe,multi:!0,deps:[Pg,XA]},{provide:lm,multi:!0,useFactory:()=>{const e=Q(Da),t=Q(XA);return()=>{T1(e).then(()=>{t.isCacheActive=!1})}}}]}class She extends Mce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class uM extends She{static makeCurrent(){!function xce(n){f$??=n}(new uM)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Phe(){return FI=FI||document.querySelector("base"),FI?FI.getAttribute("href"):null}();return null==t?null:function Rhe(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){FI=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return C$(document.cookie,e)}}let FI=null,Mhe=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const cM=new Ae("");let Pq=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ye(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Se(cM),Se(Qt))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class Rq{constructor(e){this._doc=e}}const lM="ng-app-id";let xq=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${lM}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(lM),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(lM,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo),Se(Vv),Se(mj,8),Se(To))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const dM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hM=/%COMP%/g,Vhe=new Ae("",{providedIn:"root",factory:()=>!0});function kq(n,e){return e.map(t=>t.replace(hM,n))}let Nq=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=xI(a),this.defaultRenderer=new fM(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===po.ShadowDom&&(r={...r,encapsulation:po.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Vq?i.applyToHost(t):i instanceof pM&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case po.Emulated:s=new Vq(u,l,r,this.appId,h,o,a,g);break;case po.ShadowDom:return new Bhe(u,l,t,r,o,a,this.nonce,g);default:s=new pM(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Se(Pq),Se(xq),Se(Vv),Se(Vhe),Se(eo),Se(To),Se(Qt),Se(mj))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class fM{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(dM[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Oq(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Oq(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ye(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=dM[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dM[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xl.DashCase|Xl.Important)?e.style.setProperty(t,r,i&Xl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=od().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Oq(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bhe extends fM{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=kq(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pM extends fM{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?kq(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Vq extends pM{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function Fhe(n){return"_ngcontent-%COMP%".replace(hM,n)}(l),this.hostAttr=function Lhe(n){return"_nghost-%COMP%".replace(hM,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}const Fq=["alt","control","meta","shift"],zhe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$he={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function Lq(n){return{appProviders:[...Jhe,...n?.providers??[]],platformProviders:Qhe}}const Qhe=[{provide:To,useValue:V$},{provide:gj,useValue:function Hhe(){uM.makeCurrent()},multi:!0},{provide:eo,useFactory:function Khe(){return function yee(n){IR=n}(document),document},deps:[]}],Jhe=[{provide:Ky,useValue:"root"},{provide:Eu,useFactory:function Whe(){return new Eu},deps:[]},{provide:cM,useClass:(()=>{class n extends Rq{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[eo,Qt,To]},{provide:cM,useClass:(()=>{class n extends Rq{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>od().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Fq.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=zhe[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fq.forEach(o=>{o!==i&&(0,$he[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[eo]},Nq,xq,Pq,{provide:Ix,useExisting:Nq},{provide:F$,useClass:Mhe,deps:[]},[]];let Xhe=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(r){let i=null;return i=r?new(r||n):Se(nfe),i},providedIn:"root"})}}return n})(),nfe=(()=>{class n extends gM{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case na.NONE:return r;case na.HTML:return wu(r,"HTML")?bo(r):Uj(this._doc,String(r)).toString();case na.STYLE:return wu(r,"Style")?bo(r):r;case na.SCRIPT:if(wu(r,"Script"))return bo(r);throw new ye(5200,!1);case na.URL:return wu(r,"URL")?bo(r):Cb(String(r));case na.RESOURCE_URL:if(wu(r,"ResourceURL"))return bo(r);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(t){return function Bee(n){return new Nee(n)}(t)}bypassSecurityTrustStyle(t){return function jee(n){return new Oee(n)}(t)}bypassSecurityTrustScript(t){return function zee(n){return new Vee(n)}(t)}bypassSecurityTrustUrl(t){return function $ee(n){return new Fee(n)}(t)}bypassSecurityTrustResourceUrl(t){return function qee(n){return new Lee(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(eo))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jh=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(Jh||{});const{isArray:sfe}=Array,{getPrototypeOf:ofe,prototype:afe,keys:ufe}=Object;function jq(n){if(1===n.length){const e=n[0];if(sfe(e))return{args:e,keys:null};if(function cfe(n){return n&&"object"==typeof n&&ofe(n)===afe}(e)){const t=ufe(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:lfe}=Array;function zq(n){return qe(e=>function dfe(n,e){return lfe(e)?n(...e):n(e)}(n,e))}function $q(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function mM(...n){const e=NI(n),t=K$(n),{args:r,keys:i}=jq(n);if(0===r.length)return ar([],e);const s=new Vt(function hfe(n,e,t=qi){return r=>{qq(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)qq(e,()=>{const l=ar(n[u],e);let h=!1;l.subscribe(Ne(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>$q(i,o):qi));return t?s.pipe(zq(t)):s}function qq(n,e,t){n?Dc(t,n,e):e()}function ym(n=1/0){return _s(qi,n)}function _M(...n){return function ffe(){return ym(1)}()(ar(n,NI(n)))}function Gq(n){return new Vt(e=>{xo(n()).subscribe(e)})}function eC(n,e){const t=It(n)?n:()=>n,r=i=>i.error(t());return new Vt(e?i=>e.schedule(r,0,i):r)}function yM(){return Ce((n,e)=>{let t=null;n._refCount++;const r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Hq extends Vt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zt;const t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zt.EMPTY)}return e}refCount(){return yM()(this)}}function tC(...n){const e=NI(n);return Ce((t,r)=>{(e?_M(n,t,e):_M(n,t)).subscribe(r)})}function vm(n){return Ce((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ne(t,void 0,void 0,o=>{s=xo(n(o,vm(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function nC(n,e){return Ce(function pfe(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Ne(o,h=>{const g=l++;u=a?n(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function vM(n){return n<=0?()=>xt:Ce((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const Lt="primary",LI=Symbol("RouteTitle");class yfe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Im(n){return new yfe(n)}function vfe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xu(n,e){const t=n?IM(n):void 0,r=e?IM(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Wq(n[i],e[i]))return!1;return!0}function IM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wq(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Kq(n){return n.length>0?n[n.length-1]:null}function ld(n){return function ife(n){return!!n&&(n instanceof Vt||It(n.lift)&&It(n.subscribe))}(n)?n:TI(n)?ar(Promise.resolve(n)):lt(n)}const Efe={exact:function Jq(n,e,t){if(!Zh(n.segments,e.segments)||!rC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Jq(n.children[r],e.children[r],t))return!1;return!0},subset:Xq},Qq={exact:function wfe(n,e){return xu(n,e)},subset:function Tfe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wq(n[t],e[t]))},ignored:()=>!0};function Yq(n,e,t){return Efe[t.paths](n.root,e.root,t.matrixParams)&&Qq[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Xq(n,e,t){return Zq(n,e,e.segments,t)}function Zq(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Zh(i,t)||e.hasChildren()||!rC(i,t,r))}if(n.segments.length===t.length){if(!Zh(n.segments,t)||!rC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Xq(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Zh(n.segments,i)&&rC(n.segments,i,r)&&n.children[Lt])&&Zq(n.children[Lt],e,s,r)}}function rC(n,e,t){return e.every((r,i)=>Qq[t](n[i].parameters,r.parameters))}class Xh{constructor(e=new Gn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Im(this.queryParams),this._queryParamMap}toString(){return Cfe.serialize(this)}}class Gn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sC(this)}}class UI{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Im(this.parameters),this._parameterMap}toString(){return n9(this)}}function Zh(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Em=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new iC,providedIn:"root"})}}return n})();class iC{parse(e){const t=new Ffe(e);return new Xh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${BI(e.root,!0)}`,r=function Pfe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${oC(t)}=${oC(i)}`).join("&"):`${oC(t)}=${oC(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Dfe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Cfe=new iC;function sC(n){return n.segments.map(e=>n9(e)).join("/")}function BI(n,e){if(!n.hasChildren())return sC(n);if(e){const t=n.children[Lt]?BI(n.children[Lt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Lt&&r.push(`${i}:${BI(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Afe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Lt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Lt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Lt?[BI(n.children[Lt],!1)]:[`${i}:${BI(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${sC(n)}/${t[0]}`:`${sC(n)}/(${t.join("//")})`}}function e9(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oC(n){return e9(n).replace(/%3B/gi,";")}function EM(n){return e9(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aC(n){return decodeURIComponent(n)}function t9(n){return aC(n.replace(/\+/g,"%20"))}function n9(n){return`${EM(n.path)}${function Sfe(n){return Object.entries(n).map(([e,t])=>`;${EM(e)}=${EM(t)}`).join("")}(n.parameters)}`}const Rfe=/^[^\/()?;#]+/;function wM(n){const e=n.match(Rfe);return e?e[0]:""}const xfe=/^[^\/()?;=#]+/,kfe=/^[^=?&#]+/,Ofe=/^[^&#]+/;class Ffe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Gn(e,t)),r}parseSegment(){const e=wM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new UI(aC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mfe(n){const e=n.match(xfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=wM(this.remaining);i&&(r=i,this.capture(r))}e[aC(t)]=aC(r)}parseQueryParam(e){const t=function Nfe(n){const e=n.match(kfe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Vfe(n){const e=n.match(Ofe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=t9(t),s=t9(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wM(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ye(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Lt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Lt]:new Gn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}}function r9(n){return n.segments.length>0?new Gn([],{[Lt]:n}):n}function i9(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=i9(i);if(r===Lt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Lfe(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Gn(n.segments.concat(e.segments),e.children)}return n}(new Gn(n.segments,e))}function ef(n){return n instanceof Xh}function s9(n){let e;const i=r9(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new Gn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function o9(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return TM(i,i,i,t,r);const s=function Bfe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new u9(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new u9(t,e,r)}(e);if(s.toRoot())return TM(i,i,new Gn([],{}),t,r);const o=function jfe(n,e,t){if(n.isAbsolute)return new cC(e,!0,0);if(!t)return new cC(e,!1,NaN);if(null===t.parent)return new cC(t,!0,0);const r=uC(n.commands[0])?0:1;return function zfe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ye(4005,!1);i=r.segments.length}return new cC(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?zI(o.segmentGroup,o.index,s.commands):c9(o.segmentGroup,o.index,s.commands);return TM(i,o.segmentGroup,a,t,r)}function uC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jI(n){return"object"==typeof n&&null!=n&&n.outlets}function TM(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=n===e?t:a9(n,e,t);const a=r9(i9(o));return new Xh(a,s,i)}function a9(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:a9(s,e,t)}),new Gn(n.segments,r)}class u9{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&uC(r[0]))throw new ye(4003,!1);const i=r.find(jI);if(i&&i!==Kq(r))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function c9(n,e,t){if(n??=new Gn([],{}),0===n.segments.length&&n.hasChildren())return zI(n,e,t);const r=function qfe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(jI(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!d9(u,l,o))return s;r+=2}else{if(!d9(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Gn(n.segments.slice(0,r.pathIndex),{});return s.children[Lt]=new Gn(n.segments.slice(r.pathIndex),n.children),zI(s,0,i)}return r.match&&0===i.length?new Gn(n.segments,{}):r.match&&!n.hasChildren()?bM(n,e,t):r.match?zI(n,0,i):bM(n,e,t)}function zI(n,e,t){if(0===t.length)return new Gn(n.segments,{});{const r=function $fe(n){return jI(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Lt)&&n.children[Lt]&&1===n.numberOfChildren&&0===n.children[Lt].segments.length){const s=zI(n.children[Lt],e,t);return new Gn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=c9(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Gn(n.segments,i)}}function bM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(jI(s)){const u=Gfe(s.outlets);return new Gn(r,u)}if(0===i&&uC(t[0])){r.push(new UI(n.segments[e].path,l9(t[0]))),i++;continue}const o=jI(s)?s.outlets[Lt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&uC(a)?(r.push(new UI(o,l9(a))),i+=2):(r.push(new UI(o,{})),i++)}return new Gn(r,{})}function Gfe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=bM(new Gn([],{}),0,r))}),e}function l9(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function d9(n,e,t){return n==t.path&&xu(e,t.parameters)}const $I="imperative";var ln=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ln||{});class Mu{constructor(e,t){this.id=e,this.url=t}}class lC extends Mu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ln.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sc extends Mu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ln.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Mo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mo||{}),dC=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(dC||{});class tf extends Mu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ln.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wm extends Mu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ln.NavigationSkipped}}class AM extends Mu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ln.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class h9 extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ln.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hfe extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ln.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wfe extends Mu{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ln.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kfe extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ln.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qfe extends Mu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ln.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yfe{constructor(e){this.route=e,this.type=ln.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jfe{constructor(e){this.route=e,this.type=ln.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xfe{constructor(e){this.snapshot=e,this.type=ln.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zfe{constructor(e){this.snapshot=e,this.type=ln.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class epe{constructor(e){this.snapshot=e,this.type=ln.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tpe{constructor(e){this.snapshot=e,this.type=ln.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f9{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ln.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class CM{}class hC{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function Ra(n){return n.outlet||Lt}function qI(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ape{get injector(){return qI(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new GI(this.rootInjector),this.attachRef=null}}let GI=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ape(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Se(Ki))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class p9{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=DM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=SM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return SM(e,this._root).map(t=>t.value)}}function DM(n,e){if(n===e.value)return e;for(const t of e.children){const r=DM(n,t);if(r)return r}return null}function SM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=SM(n,t);if(r.length)return r.unshift(e),r}return[]}class xa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class g9 extends p9{constructor(e,t){super(e),this.snapshot=t,PM(this,e)}toString(){return this.snapshot.toString()}}function m9(n){const e=function upe(n){const s=new pC([],{},{},"",{},Lt,n,null,{});return new _9("",new xa(s,[]))}(n),t=new ee([new UI("",{})]),r=new ee({}),i=new ee({}),s=new ee({}),o=new ee(""),a=new dd(t,r,s,o,i,Lt,n,e.root);return a.snapshot=e.root,new g9(new xa(a,[]),e)}class dd{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(qe(l=>l[LI]))??lt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(qe(e=>Im(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(qe(e=>Im(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fC(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&v9(i)&&(r.resolve[LI]=i.title),r}class pC{get title(){return this.data?.[LI]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Im(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Im(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _9 extends p9{constructor(e,t){super(t),this.url=e,PM(this,t)}toString(){return y9(this._root)}}function PM(n,e){e.value._routerState=n,e.children.forEach(t=>PM(n,t))}function y9(n){const e=n.children.length>0?` { ${n.children.map(y9).join(", ")} } `:"";return`${n.value}${e}`}function RM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xu(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xu(e.params,t.params)||n.paramsSubject.next(t.params),function Ife(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),xu(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function xM(n,e){const t=xu(n.params,e.params)&&function bfe(n,e){return Zh(n,e)&&n.every((t,r)=>xu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xM(n.parent,e.parent))}function v9(n){return"string"==typeof n.title||null===n.title}let MM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new jt,this.deactivateEvents=new jt,this.attachEvents=new jt,this.detachEvents=new jt,this.parentContexts=Q(GI),this.location=Q(ba),this.changeDetector=Q(Gh),this.inputBinder=Q(gC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new kM(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mi]})}}return n})();class kM{__ngOutletInjector(e){return new kM(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dd?this.route:e===GI?this.childContexts:this.parent.get(e,t)}}const gC=new Ae("");let I9=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=mM([r.queryParams,r.params,r.data]).pipe(Ii(([s,o,a],u)=>(a={...s,...o,...a},0===u?lt(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function Rce(n){const e=Ft(n);if(!e)return null;const t=new sI(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function HI(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lpe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return HI(n,r,i);return HI(n,r)})}(n,e,t);return new xa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>HI(n,a)),o}}const r=function dpe(n){return new dd(new ee(n.url),new ee(n.params),new ee(n.queryParams),new ee(n.fragment),new ee(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>HI(n,s));return new xa(r,i)}}class NM{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const E9="ngNavigationCancelingError";function mC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ef(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=w9(!1,Mo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function w9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[E9]=!0,t.cancellationCode=e,t}function T9(n){return!!n&&n[E9]}class ppe{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),RM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Tm(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tm(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tm(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Tm(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tpe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zfe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(RM(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),RM(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class b9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _C{constructor(e,t){this.component=e,this.route=t}}function gpe(n,e,t){const r=n._root;return WI(r,e?e._root:null,t,[r.value])}function bm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function vy(n){return null!==xp(n)}(n)?e.get(n):n:r}function WI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Tm(e);return n.children.forEach(o=>{(function _pe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function ype(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zh(n.url,e.url)||!xu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xM(n,e)||!xu(n.queryParams,e.queryParams);default:return!xM(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new b9(r)):(s.data=o.data,s._resolvedData=o._resolvedData),WI(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _C(a.outlet.component,o))}else o&&KI(e,a,i),i.canActivateChecks.push(new b9(r)),WI(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>KI(a,t.getContext(o),i)),i}function KI(n,e,t){const r=Tm(n),i=n.value;Object.entries(r).forEach(([s,o])=>{KI(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new _C(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function QI(n){return"function"==typeof n}function A9(n){return n instanceof jn||"EmptyError"===n?.name}const yC=Symbol("INITIAL_VALUE");function Am(){return Ii(n=>mM(n.map(e=>e.pipe(ga(1),tC(yC)))).pipe(qe(e=>{for(const t of e)if(!0!==t){if(t===yC)return yC;if(!1===t||Ape(t))return t}return!0}),zn(e=>e!==yC),ga(1)))}function Ape(n){return ef(n)||n instanceof NM}function C9(n){return function ih(...n){return nu(n)}(Ni(e=>{if("boolean"!=typeof e)throw mC(0,e)}),qe(e=>!0===e))}class OM{constructor(e){this.segmentGroup=e||null}}class vC extends Error{constructor(e){super(),this.urlTree=e}}function Cm(n){return eC(new OM(n))}class Lpe{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[Lt])return eC(new ye(4e3,!1));i=i.children[Lt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:u,fragment:l,routeConfig:h,url:g,outlet:v,params:E,data:T,title:P}=i,R=_o(s,()=>a({params:E,data:T,queryParams:u,fragment:l,routeConfig:h,url:g,outlet:v,title:P}));if(R instanceof Xh)throw new vC(R);t=R}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new vC(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Xh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Gn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const VM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Upe(n,e,t,r,i){const s=D9(n,e,t);return s.matched?(r=function npe(n,e){return n.providers&&!n._injector&&(n._injector=Yb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Ope(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?lt(i.map(o=>{const a=bm(o,n);return ld(function bpe(n){return n&&QI(n.canMatch)}(a)?a.canMatch(e,t):_o(n,()=>a(e,t)))})).pipe(Am(),C9()):lt(!0)}(r,e,t).pipe(qe(o=>!0===o?s:{...VM}))):lt(s)}function D9(n,e,t){if("**"===e.path)return function Bpe(n){return{matched:!0,parameters:n.length>0?Kq(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...VM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||vfe)(t,n,e);if(!i)return{...VM};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function S9(n,e,t,r){return t.length>0&&function $pe(n,e,t){return t.some(r=>IC(n,e,r)&&Ra(r)!==Lt)}(n,t,r)?{segmentGroup:new Gn(e,zpe(r,new Gn(t,n.children))),slicedSegments:[]}:0===t.length&&function qpe(n,e,t){return t.some(r=>IC(n,e,r))}(n,t,r)?{segmentGroup:new Gn(n.segments,jpe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Gn(n.segments,n.children),slicedSegments:t}}function jpe(n,e,t,r){const i={};for(const s of t)if(IC(n,e,s)&&!r[Ra(s)]){const o=new Gn([],{});i[Ra(s)]=o}return{...r,...i}}function zpe(n,e){const t={};t[Lt]=e;for(const r of n)if(""===r.path&&Ra(r)!==Lt){const i=new Gn([],{});t[Ra(r)]=i}return t}function IC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Hpe{}class Qpe{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Lpe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){const e=S9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(qe(({children:t,rootSnapshot:r})=>{const i=new xa(r,t),s=new _9("",i),o=function Ufe(n,e,t=null,r=null){return o9(s9(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new pC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Lt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Lt,t).pipe(qe(r=>({children:r,rootSnapshot:t})),vm(r=>{if(r instanceof vC)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof OM?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(qe(o=>o instanceof xa?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return ar(s).pipe(mm(o=>{const a=r.children[o],u=function ope(n,e){const t=n.filter(r=>Ra(r)===e);return t.push(...n.filter(r=>Ra(r)!==e)),t}(t,o);return this.processSegmentGroup(e,u,a,o,i)}),nC((o,a)=>(o.push(...a),o)),sh(null),function gfe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zn((i,s)=>n(i,s,r)):qi,vM(1),t?sh(e):Al(()=>new jn))}(),_s(o=>{if(null===o)return Cm(r);const a=P9(o);return function Ype(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),lt(a)}))}processSegment(e,t,r,i,s,o,a){return ar(t).pipe(mm(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a).pipe(vm(l=>{if(l instanceof OM)return lt(null);throw l}))),Ho(u=>!!u),vm(u=>{if(A9(u))return function Gpe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?lt(new Hpe):Cm(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,u){return Ra(r)===o||o!==Lt&&IC(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Cm(i):Cm(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:g,remainingSegments:v}=D9(t,i,s);if(!u)return Cm(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new pC(s,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R9(i),Ra(i),i.component??i._loadedComponent??null,i,x9(i)),T=fC(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(T.params),E.data=Object.freeze(T.data);const P=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(_s(R=>this.processSegment(e,r,t,R.concat(v),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=Upe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Ii(u=>u.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Ii(({routes:l})=>{const h=r._loadedInjector??e,{parameters:g,consumedSegments:v,remainingSegments:E}=u,T=new pC(v,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R9(r),Ra(r),r.component??r._loadedComponent??null,r,x9(r)),P=fC(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data);const{segmentGroup:R,slicedSegments:z}=S9(t,v,E,l);if(0===z.length&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(qe(H=>new xa(T,H)));if(0===l.length&&0===z.length)return lt(new xa(T,[]));const j=Ra(r)===s;return this.processSegment(h,l,R,z,j?Lt:s,!0,T).pipe(qe(H=>new xa(T,H instanceof xa?[H]:[])))})):Cm(t)))}getChildConfig(e,t,r){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Npe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?lt(!0):lt(i.map(o=>{const a=bm(o,n);return ld(function Ipe(n){return n&&QI(n.canLoad)}(a)?a.canLoad(e,t):_o(n,()=>a(e,t)))})).pipe(Am(),C9())}(e,t,r).pipe(_s(i=>i?this.configLoader.loadChildren(e,t).pipe(Ni(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Fpe(){return eC(w9(!1,Mo.GuardRejected))}())):lt({routes:[],injector:e})}}function Jpe(n){const e=n.value.routeConfig;return e&&""===e.path}function P9(n){const e=[],t=new Set;for(const r of n){if(!Jpe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=P9(r.children);e.push(new xa(r.value,i))}return e.filter(r=>!t.has(r))}function R9(n){return n.data||{}}function x9(n){return n.resolve||{}}function M9(n){const e=n.children.map(t=>M9(t)).flat();return[n,...e]}function FM(n){return Ii(e=>{const t=n(e);return t?ar(t).pipe(qe(()=>e)):lt(e)})}let k9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[LI]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(rge),providedIn:"root"})}}return n})(),rge=(()=>{class n extends k9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Se(Xhe))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Dm=new Ae("",{providedIn:"root",factory:()=>({})});let N9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["ng-component"]],standalone:!0,features:[sr],decls:1,vars:0,template:function(r,i){1&r&&Yr(0,"router-outlet")},dependencies:[MM],encapsulation:2})}}return n})();function LM(n){const e=n.children&&n.children.map(LM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=N9),t}const Sm=new Ae("");let UM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(b5)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ld(t.loadComponent()).pipe(qe(O9),Ni(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),WA(()=>{this.componentLoaders.delete(t)})),i=new Hq(r,()=>new F).pipe(yM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function ige(n,e,t,r){return ld(n.loadChildren()).pipe(qe(O9),_s(i=>i instanceof Bz||Array.isArray(i)?lt(i):ar(e.compileModuleAsync(i))),qe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Sm,[],{optional:!0,self:!0}).flat()),{routes:o.map(LM),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(WA(()=>{this.childrenLoaders.delete(r)})),o=new Hq(s,()=>new F).pipe(yM());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function O9(n){return function sge(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let BM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(oge),providedIn:"root"})}}return n})(),oge=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const V9=new Ae(""),F9=new Ae("");function age(n,e,t){const r=n.get(F9),i=n.get(eo);return n.get(Qt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),function uge(n){return new Promise(e=>{nA({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:u}=r;return u&&_o(n,()=>u({transition:a,from:e,to:t})),o})}const L9=new Ae("");let EC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new F,this.transitionAbortSubject=new F,this.configLoader=Q(UM),this.environmentInjector=Q(Ki),this.urlSerializer=Q(Em),this.rootContexts=Q(GI),this.location=Q(PI),this.inputBindingEnabled=null!==Q(gC,{optional:!0}),this.titleStrategy=Q(k9),this.options=Q(Dm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(BM),this.createViewTransition=Q(V9,{optional:!0}),this.navigationErrorHandler=Q(L9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>lt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Jfe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Yfe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ee({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$I,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zn(s=>0!==s.id),qe(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ii(s=>{let o=!1,a=!1;return lt(s).pipe(Ii(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mo.SupersededByNewNavigation),xt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:"string"==typeof u.extras.browserUrl?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new wm(u.id,this.urlSerializer.serialize(u.rawUrl),g,dC.IgnoredSameUrlNavigation)),u.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return lt(u).pipe(Ii(g=>{const v=this.transitions?.getValue();return this.events.next(new lC(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?xt:Promise.resolve(g)}),function Xpe(n,e,t,r,i,s){return _s(o=>function Wpe(n,e,t,r,i,s,o="emptyOnly"){return new Qpe(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(qe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ni(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const v=new h9(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:g,extractedUrl:v,source:E,restoredState:T,extras:P}=u,R=new lC(g,this.urlSerializer.serialize(v),E,T);this.events.next(R);const z=m9(this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:z,urlAfterRedirects:v,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=v,lt(s)}{const g="";return this.events.next(new wm(u.id,this.urlSerializer.serialize(u.extractedUrl),g,dC.IgnoredByUrlHandlingStrategy)),u.resolve(!1),xt}}),Ni(u=>{const l=new Hfe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),qe(u=>(this.currentTransition=s={...u,guards:gpe(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function Cpe(n,e){return _s(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?lt({...t,guardsResult:!0}):function Dpe(n,e,t,r){return ar(n).pipe(_s(i=>function kpe(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?lt(s.map(a=>{const u=qI(e)??i,l=bm(a,u);return ld(function Tpe(n){return n&&QI(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):_o(u,()=>l(n,e,t,r))).pipe(Ho())})).pipe(Am()):lt(!0)}(i.component,i.route,t,e,r)),Ho(i=>!0!==i,!0))}(o,r,i,n).pipe(_s(a=>a&&function vpe(n){return"boolean"==typeof n}(a)?function Spe(n,e,t,r){return ar(e).pipe(mm(i=>_M(function Rpe(n,e){return null!==n&&e&&e(new Xfe(n)),lt(!0)}(i.route.parent,r),function Ppe(n,e){return null!==n&&e&&e(new epe(n)),lt(!0)}(i.route,r),function Mpe(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function mpe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Gq(()=>lt(o.guards.map(u=>{const l=qI(o.node)??t,h=bm(u,l);return ld(function wpe(n){return n&&QI(n.canActivateChild)}(h)?h.canActivateChild(r,n):_o(l,()=>h(r,n))).pipe(Ho())})).pipe(Am())));return lt(s).pipe(Am())}(n,i.path,t),function xpe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(s=>Gq(()=>{const o=qI(e)??t,a=bm(s,o);return ld(function Epe(n){return n&&QI(n.canActivate)}(a)?a.canActivate(e,n):_o(o,()=>a(e,n))).pipe(Ho())}));return lt(i).pipe(Am())}(n,i.route,t))),Ho(i=>!0!==i,!0))}(r,s,n,e):lt(a)),qe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Ni(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&"boolean"!=typeof u.guardsResult)throw mC(0,u.guardsResult);const l=new Wfe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),zn(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",Mo.GuardRejected),!1)),FM(u=>{if(u.guards.canActivateChecks.length)return lt(u).pipe(Ni(l=>{const h=new Kfe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ii(l=>{let h=!1;return lt(l).pipe(function Zpe(n,e){return _s(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);const s=new Set(i.map(u=>u.route)),o=new Set;for(const u of s)if(!o.has(u))for(const l of M9(u))o.add(l);let a=0;return ar(o).pipe(mm(u=>s.has(u)?function ege(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!v9(i)&&(s[LI]=i.title),function tge(n,e,t,r){const i=IM(n);if(0===i.length)return lt({});const s={};return ar(i).pipe(_s(o=>function nge(n,e,t,r){const i=qI(e)??r,s=bm(n,i);return ld(s.resolve?s.resolve(e,t):_o(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Ho(),Ni(a=>{if(a instanceof NM)throw mC(new iC,a);s[o]=a}))),vM(1),function mfe(n){return qe(()=>n)}(s),vm(o=>A9(o)?xt:eC(o)))}(s,n,e,r).pipe(qe(o=>(n._resolvedData=o,n.data=fC(n,n.parent,t).resolve,null)))}(u,r,n,e):(u.data=fC(u,u.parent,n).resolve,lt(void 0))),Ni(()=>a++),vM(1),_s(u=>a===o.size?lt(t):xt))})}(this.paramsInheritanceStrategy,this.environmentInjector),Ni({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Mo.NoDataFromResolver)}}))}),Ni(l=>{const h=new Qfe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),FM(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ni(v=>{h.component=v}),qe(()=>{})));for(const v of h.children)g.push(...l(v));return g};return mM(l(u.targetSnapshot.root)).pipe(sh(null),ga(1))}),FM(()=>this.afterPreactivation()),Ii(()=>{const{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ar(h).pipe(qe(()=>s)):lt(s)}),qe(u=>{const l=function cpe(n,e,t){const r=HI(n,e._root,t?t._root:void 0);return new g9(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},this.currentNavigation.targetRouterState=l,s}),Ni(()=>{this.events.next(new CM)}),((n,e,t,r)=>qe(i=>(new ppe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ga(1),Ni({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function _fe(n){return Ce((e,t)=>{xo(n).subscribe(Ne(t,()=>t.complete(),Go)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ni(u=>{throw u}))),WA(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Mo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),vm(u=>{if(a=!0,T9(u))this.events.next(new tf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function hpe(n){return T9(n)&&ef(n.url)}(u)?this.events.next(new hC(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{const l=new AM(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{const h=_o(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof NM){const{message:g,cancellationCode:v}=mC(0,h);this.events.next(new tf(s.id,this.urlSerializer.serialize(s.extractedUrl),g,v)),this.events.next(new hC(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);const g=t.errorHandler(u);s.resolve(!!g)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return xt}))}))}cancelNavigationTransition(t,r,i){const s=new tf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cge(n){return n!==$I}let lge=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(hge),providedIn:"root"})}}return n})();class dge{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let hge=(()=>{class n extends dge{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),U9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>Q(fge),providedIn:"root"})}}return n})(),fge=(()=>{class n extends U9{constructor(){super(...arguments),this.location=Q(PI),this.urlSerializer=Q(Em),this.options=Q(Dm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(BM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xh,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=m9(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof lC)this.stateMemento=this.createStateMemento();else if(t instanceof wm)this.rawUrlTree=r.initialUrl;else if(t instanceof h9){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof CM?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof tf&&(t.code===Mo.GuardRejected||t.code===Mo.NoDataFromResolver)?this.restoreHistory(r):t instanceof AM?this.restoreHistory(r,!0):t instanceof Sc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof Xh?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YI=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(YI||{});function B9(n,e){n.events.pipe(zn(t=>t instanceof Sc||t instanceof tf||t instanceof AM||t instanceof wm),qe(t=>t instanceof Sc||t instanceof wm?YI.COMPLETE:t instanceof tf&&(t.code===Mo.Redirect||t.code===Mo.SupersededByNewNavigation)?YI.REDIRECTING:YI.FAILED),zn(t=>t!==YI.REDIRECTING),ga(1)).subscribe(()=>{e()})}function pge(n){throw n}const gge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ei=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Q(_1),this.stateManager=Q(U9),this.options=Q(Dm,{optional:!0})||{},this.pendingTasks=Q(Yl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(EC),this.urlSerializer=Q(Em),this.location=Q(PI),this.urlHandlingStrategy=Q(BM),this._events=new F,this.errorHandler=this.options.errorHandler||pge,this.navigated=!1,this.routeReuseStrategy=Q(lge),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(Sm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(gC,{optional:!0}),this.eventsSubscription=new Zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof tf&&r.code!==Mo.Redirect&&r.code!==Mo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Sc)this.navigated=!0;else if(r instanceof hC){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||cge(i.source),...o};this.scheduleNavigation(a,$I,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function yge(n){return!(n instanceof CM||n instanceof hC)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$I,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(LM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=s9(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),g=this.currentUrlTree.root}return o9(g,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ef(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,$I,null,r)}navigate(t,r={skipLocationChange:!1}){return function _ge(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ye(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...gge}:!1===r?{...mge}:r,ef(t))return Yq(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Yq(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,v)=>{a=g,u=v});const h=this.pendingTasks.add();return B9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pm=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new F,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Sc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=ef(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function Bj(n,e,t){return function ute(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Sb:kg}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.routerLinkInput?null:ef(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(De(Ei),De(dd),function On(n){return function cb(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Kp(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Sn(),n)}("tabindex"),De(Ic),De(wo),De(Wh))}}static{this.\u0275dir=Et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Oe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Au("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",dm],skipLocationChange:[2,"skipLocationChange","skipLocationChange",dm],replaceUrl:[2,"replaceUrl","replaceUrl",dm],routerLink:"routerLink"},standalone:!0,features:[Uz,Mi]})}}return n})();class j9{}let Ege=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(zn(t=>t instanceof Sc),mm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Yb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ar(i).pipe(ym())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):lt(null);const s=i.pipe(_s(o=>null===o?lt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?ar([s,this.loader.loadComponent(r)]).pipe(ym()):s})}static{this.\u0275fac=function(r){return new(r||n)(Se(Ei),Se(b5),Se(Ki),Se(j9),Se(UM))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const jM=new Ae("");let z9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wm&&t.code===dC.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof f9&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new f9(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function d4(){throw new Error("invalid")}()}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function $9(n){return n.routerState.root}function ku(n,e){return{\u0275kind:n,\u0275providers:e}}function q9(){const n=Q(ki);return e=>{const t=n.get(Da);if(e!==t.components[0])return;const r=n.get(Ei),i=n.get(G9);1===n.get(zM)&&r.initialNavigation(),n.get(H9,null,Ut.Optional)?.setUpPreloading(),n.get(jM,null,Ut.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const G9=new Ae("",{factory:()=>new F}),zM=new Ae("",{providedIn:"root",factory:()=>1}),H9=new Ae("");function Cge(n){return ku(0,[{provide:H9,useExisting:Ege},{provide:j9,useExisting:n}])}function Sge(n){return ku(9,[{provide:V9,useValue:age},{provide:F9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const W9=new Ae("ROUTER_FORROOT_GUARD"),Pge=[PI,{provide:Em,useClass:iC},Ei,GI,{provide:dd,useFactory:$9,deps:[Ei]},UM,[]];let $M=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Pge,[],{provide:Sm,multi:!0,useValue:t},{provide:W9,useFactory:kge,deps:[[Ei,new Ol,new zp]]},{provide:Dm,useValue:r||{}},r?.useHash?{provide:Wh,useClass:Oce}:{provide:Wh,useClass:m$},{provide:jM,useFactory:()=>{const n=Q(Xle),e=Q(Qt),t=Q(Dm),r=Q(EC),i=Q(Em);return t.scrollOffset&&n.setOffset(t.scrollOffset),new z9(i,r,n,e,t)}},r?.preloadingStrategy?Cge(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Nge(r):[],r?.bindToComponentInputs?ku(8,[I9,{provide:gC,useExisting:I9}]).\u0275providers:[],r?.enableViewTransitions?Sge().\u0275providers:[],[{provide:K9,useFactory:q9},{provide:lm,multi:!0,useExisting:K9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sm,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(W9,8))}}static{this.\u0275mod=lu({type:n})}static{this.\u0275inj=Gs({})}}return n})();function kge(n){return"guarded"}function Nge(n){return["disabled"===n.initialNavigation?ku(3,[{provide:w1,multi:!0,useFactory:()=>{const e=Q(Ei);return()=>{e.setUpLocationChangeListener()}}},{provide:zM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ku(2,[{provide:zM,useValue:0},{provide:w1,multi:!0,deps:[ki],useFactory:e=>{const t=e.get(kce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ei),s=e.get(G9);B9(i,()=>{r(!0)}),e.get(EC).afterPreactivation=()=>(r(!0),s.closed?lt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const K9=new Ae("");var Rm=yt(631);(0,Rm.registerVersion)("firebase","10.14.1","app");class Lge extends Zt{constructor(e,t){super()}schedule(e,t=0){return this}}const wC={setInterval(n,e,...t){const{delegate:r}=wC;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=wC;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Q9 extends Lge{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return wC.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&wC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,an(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const qM={now:()=>(qM.delegate||Date).now(),delegate:void 0};class JI{constructor(e,t=JI.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}JI.now=qM.now;class Y9 extends JI{constructor(e,t=JI.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const jge=new class Bge extends Y9{}(class Uge extends Q9{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),J9=new Y9(Q9),TC=new cm("ANGULARFIRE2_VERSION");class X9{constructor(){return(n=>{const t=(0,Rm.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})($ge)}}const $ge="app-check";function xm(){}class Z9{zone;delegate;constructor(e,t=jge){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class qge{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xm,{},xm,xm)),t.pipe(Ni({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eG=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Z9(Zone.current)),this.insideAngular=t.run(()=>new Z9(Zone.current,J9)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Se(Qt))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ko(n){return function Hge(n){return function(t){return(t=t.lift(new qge(n.ngZone))).pipe(gm(n.outsideAngular),Kh(n.insideAngular))}}(function Mm(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Pc=yt(574);Pc.A.registerVersion("firebase","10.14.1","app-compat");const Yge=["ngOnDestroy"];class tG{constructor(e){return e}}const bC=new Ae("angularfire2.app.options"),AC=new Ae("angularfire2.app.name");function GM(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Pc.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Pc.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Zge("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new tG(o)}const Zge=(n,...e)=>{},eme={provide:tG,useFactory:GM,deps:[bC,Qt,[new Ol,AC]]};let tme=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:bC,useValue:t},{provide:AC,useValue:r}]}}constructor(t){Pc.A.registerVersion("angularfire",TC.full,"core"),Pc.A.registerVersion("angularfire",TC.full,"app-compat"),Pc.A.registerVersion("angular",Bae.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Se(To))};static \u0275mod=lu({type:n});static \u0275inj=Gs({providers:[eme]})}return n})();function nG(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function nme(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(rG("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rme?" You may need to reload as Firebase is not HMR aware.":""}`),rG("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rme=typeof module<"u"&&!!module.hot,rG=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],yt(324);class sme extends F{constructor(e=1/0,t=1/0,r=qM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function HM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new fi({next:()=>{r.unsubscribe(),n()}});return xo(e(...t)).subscribe(r)}function iG(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function ome(n={}){const{connector:e=()=>new F,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,h=!1,g=!1;const v=()=>{a?.unsubscribe(),a=void 0},E=()=>{v(),o=u=void 0,h=g=!1},T=()=>{const P=o;E(),P?.unsubscribe()};return Ce((P,R)=>{l++,!g&&!h&&v();const z=u=u??e();R.add(()=>{l--,0===l&&!g&&!h&&(a=HM(T,i))}),z.subscribe(R),!o&&l>0&&(o=new fi({next:j=>z.next(j),error:j=>{g=!0,v(),a=HM(E,t,j),z.error(j)},complete:()=>{h=!0,v(),a=HM(E,r),z.complete()}}),xo(P).subscribe(o))})(s)}}({connector:()=>new sme(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function sG(n,e){return It(e)?Ii(()=>n,e):Ii(()=>n)}const oG=new Ae("angularfire2.auth.use-emulator"),aG=new Ae("angularfire2.auth.settings"),uG=new Ae("angularfire2.auth.tenant-id"),cG=new Ae("angularfire2.auth.langugage-code"),lG=new Ae("angularfire2.auth.use-device-language"),dG=new Ae("angularfire.auth.persistence"),hG=(n,e,t,r,i,s,o,a)=>nG(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let aa=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,h,g,v,E){const T=new F,P=lt(void 0).pipe(Kh(o.outsideAngular),Ii(()=>s.runOutsideAngular(()=>Promise.resolve().then(yt.bind(yt,324)))),qe(()=>GM(t,s,r)),qe(R=>hG(R,s,a,l,h,g,u,v)),iG({bufferSize:1,refCount:!1}));if(xI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{P.pipe(Ho()).subscribe();const R=P.pipe(Ii(H=>H.getRedirectResult().then(te=>te,()=>null)),ko,iG({bufferSize:1,refCount:!1})),z=P.pipe(Ii(H=>new Vt(te=>({unsubscribe:s.runOutsideAngular(()=>H.onAuthStateChanged(me=>te.next(me),me=>te.error(me),()=>te.complete()))})))),j=P.pipe(Ii(H=>new Vt(te=>({unsubscribe:s.runOutsideAngular(()=>H.onIdTokenChanged(me=>te.next(me),me=>te.error(me),()=>te.complete()))}))));this.authState=R.pipe(sG(z),gm(o.outsideAngular),Kh(o.insideAngular)),this.user=R.pipe(sG(j),gm(o.outsideAngular),Kh(o.insideAngular)),this.idToken=this.user.pipe(Ii(H=>H?ar(H.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(Ii(H=>H?ar(H.getIdTokenResult()):lt(null))),this.credential=function ime(...n){const e=NI(n),t=function Rde(n,e){return"number"==typeof tM(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?xo(r[0]):ym(t)(ar(r,e)):xt}(R,T,this.authState.pipe(zn(H=>!H))).pipe(qe(H=>H?.user?H:null),gm(o.outsideAngular),Kh(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Yge.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,P,s,{spy:{apply:(R,z,j)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&j.then(H=>T.next(H))}}})}static \u0275fac=function(r){return new(r||n)(Se(bC),Se(AC,8),Se(To),Se(Qt),Se(eG),Se(oG,8),Se(aG,8),Se(uG,8),Se(cG,8),Se(lG,8),Se(dG,8),Se(X9,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ume=(()=>{class n{constructor(){Pc.A.registerVersion("angularfire",TC.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lu({type:n});static \u0275inj=Gs({providers:[aa]})}return n})();function WM(){return Ce((n,e)=>{let t,r=!1;n.subscribe(Ne(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function lme(n,e){return n===e}var rf,mG,fG=yt(779),Nu=yt(398),xn=yt(401),pG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gG={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(D,b,C){C||(C=0);var x=Array(16);if("string"==typeof b)for(var k=0;16>k;++k)x[k]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(k=0;16>k;++k)x[k]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;var V=D.g[3],A=(b=D.g[0])+(V^(C=D.g[1])&((k=D.g[2])^V))+x[0]+3614090360&4294967295;A=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=C+(A<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[1]+3905402710&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[2]+606105819&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[3]+3250441966&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[4]+4118548399&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[5]+1200080426&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[6]+2821735955&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[7]+4249261313&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[8]+1770035416&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[9]+2336552879&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[10]+4294925233&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[11]+2304563134&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[12]+1804603682&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[13]+4254626195&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[14]+2792965006&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[15]+1236535329&4294967295)<<22&4294967295|A>>>10))+((A=b+(k^V&(C^k))+x[1]+4129170786&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[6]+3225465664&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[11]+643717713&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[0]+3921069994&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[5]+3593408605&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[10]+38016083&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[15]+3634488961&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[4]+3889429448&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[9]+568446438&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[14]+3275163606&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[3]+4107603335&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[8]+1163531501&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[13]+2850285829&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[2]+4243563512&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[7]+1735328473&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[12]+2368359562&4294967295)<<20&4294967295|A>>>12))+((A=b+(C^k^V)+x[5]+4294588738&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[8]+2272392833&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[11]+1839030562&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[14]+4259657740&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[1]+2763975236&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[4]+1272893353&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[7]+4139469664&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[10]+3200236656&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[13]+681279174&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[0]+3936430074&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[3]+3572445317&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[6]+76029189&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[9]+3654602809&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[12]+3873151461&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[15]+530742520&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[2]+3299628645&4294967295)<<23&4294967295|A>>>9))+((A=b+(k^(C|~V))+x[0]+4096336452&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[7]+1126891415&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[14]+2878612391&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[5]+4237533241&4294967295)<<21&4294967295|A>>>11))+((A=b+(k^(C|~V))+x[12]+1700485571&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[3]+2399980690&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[10]+4293915773&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[1]+2240044497&4294967295)<<21&4294967295|A>>>11))+((A=b+(k^(C|~V))+x[8]+1873313359&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[15]+4264355552&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[6]+2734768916&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[13]+1309151649&4294967295)<<21&4294967295|A>>>11))+((V=(b=C+((A=b+(k^(C|~V))+x[4]+4149444226&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[11]+3174756917&4294967295)<<10&4294967295|A>>>22))^((k=V+((A=k+(b^(V|~C))+x[2]+718787259&4294967295)<<15&4294967295|A>>>17))|~b))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+V&4294967295}function o(D,b){this.h=b;for(var C=[],x=!0,k=D.length-1;0<=k;k--){var V=0|D[k];x&&V==b||(C[k]=V,x=!1)}this.g=C}(function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,k,V){for(var A=Array(arguments.length-2),Ai=2;Ai<arguments.length;Ai++)A[Ai-2]=arguments[Ai];return b.prototype[k].apply(x,A)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(D,b){void 0===b&&(b=D.length);for(var C=b-this.blockSize,x=this.B,k=this.h,V=0;V<b;){if(0==k)for(;V<=C;)i(this,D,V),V+=this.blockSize;if("string"==typeof D){for(;V<b;)if(x[k++]=D.charCodeAt(V++),k==this.blockSize){i(this,x),k=0;break}}else for(;V<b;)if(x[k++]=D[V++],k==this.blockSize){i(this,x),k=0;break}}this.h=k,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=255&C,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var x=0;32>x;x+=8)D[C++]=this.g[b]>>>x&255;return D};var a={};function u(D){return-128<=D&&128>D?function s(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}(D,function(b){return new o([0|b],0>b?-1:0)}):new o([0|D],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return R(l(-D));for(var b=[],C=1,x=0;D>=C;x++)b[x]=D/C|0,C*=4294967296;return new o(b,0)}var g=u(0),v=u(1),E=u(16777216);function T(D){if(0!=D.h)return!1;for(var b=0;b<D.g.length;b++)if(0!=D.g[b])return!1;return!0}function P(D){return-1==D.h}function R(D){for(var b=D.g.length,C=[],x=0;x<b;x++)C[x]=~D.g[x];return new o(C,~D.h).add(v)}function z(D,b){return D.add(R(b))}function j(D,b){for(;(65535&D[b])!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function H(D,b){this.g=D,this.h=b}function te(D,b){if(T(b))throw Error("division by zero");if(T(D))return new H(g,g);if(P(D))return b=te(R(D),b),new H(R(b.g),R(b.h));if(P(b))return b=te(D,R(b)),new H(R(b.g),b.h);if(30<D.g.length){if(P(D)||P(b))throw Error("slowDivide_ only works with positive integers.");for(var C=v,x=b;0>=x.l(D);)C=me(C),x=me(x);var k=_e(C,1),V=_e(x,1);for(x=_e(x,2),C=_e(C,2);!T(x);){var A=V.add(x);0>=A.l(D)&&(k=k.add(C),V=A),x=_e(x,1),C=_e(C,1)}return b=z(D,k.j(b)),new H(k,b)}for(k=g;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),x=48>=(x=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,x-48),A=(V=l(C)).j(b);P(A)||0<A.l(D);)A=(V=l(C-=x)).j(b);T(V)&&(V=v),k=k.add(V),D=z(D,A)}return new H(k,D)}function me(D){for(var b=D.g.length+1,C=[],x=0;x<b;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new o(C,D.h)}function _e(D,b){var C=b>>5;b%=32;for(var x=D.g.length-C,k=[],V=0;V<x;V++)k[V]=0<b?D.i(V+C)>>>b|D.i(V+C+1)<<32-b:D.i(V+C);return new o(k,D.h)}(n=o.prototype).m=function(){if(P(this))return-R(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*b,b*=4294967296}return D},n.toString=function(D){if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var b=l(Math.pow(D,6)),C=this,x="";;){var k=te(C,b).g,V=((0<(C=z(C,k.j(b))).g.length?C.g[0]:C.h)>>>0).toString(D);if(T(C=k))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h},n.l=function(D){return P(D=z(this,D))?-1:T(D)?0:1},n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0,k=0;k<=b;k++){var V=x+(65535&this.i(k))+(65535&D.i(k)),A=(V>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);x=A>>>16,C[k]=(A&=65535)<<16|(V&=65535)}return new o(C,-2147483648&C[C.length-1]?-1:0)},n.j=function(D){if(T(this)||T(D))return g;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(E)&&0>D.l(E))return l(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],x=0;x<2*b;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<D.g.length;k++){var V=this.i(x)>>>16,A=65535&this.i(x),Ai=D.i(k)>>>16,Oa=65535&D.i(k);C[2*x+2*k]+=A*Oa,j(C,2*x+2*k),C[2*x+2*k+1]+=V*Oa,j(C,2*x+2*k+1),C[2*x+2*k+1]+=A*Ai,j(C,2*x+2*k+1),C[2*x+2*k+2]+=V*Ai,j(C,2*x+2*k+2)}for(x=0;x<b;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=b;x<2*b;x++)C[x]=0;return new o(C,0)},n.A=function(D){return te(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)&D.i(x);return new o(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)|D.i(x);return new o(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)^D.i(x);return new o(C,this.h^D.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mG=gG.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function h(D,b){if(0==D.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==D.charAt(0))return R(h(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(b,8)),x=g,k=0;k<D.length;k+=8){var V=Math.min(8,D.length-k),A=parseInt(D.substring(k,k+V),b);8>V?(V=l(Math.pow(b,V)),x=x.j(V).add(l(A))):x=(x=x.j(C)).add(l(A))}return x},rf=gG.Integer=o}).apply(typeof pG<"u"?pG:typeof self<"u"?self:typeof window<"u"?window:{});var _G,XI,yG,DC,KM,vG,IG,EG,CC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c},r=function t(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof CC&&CC];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}(this);!function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var N=c[I];if(!(N in _))break e;_=_[N]}(p=p(I=_[c=c[c.length-1]]))!=I&&null!=p&&e(_,c,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(c){return c||function(){return function s(c,p){c instanceof String&&(c+="");var _=0,I=!1,N={next:function(){if(!I&&_<c.length){var B=_++;return{value:p(B,c[B]),done:!1}}return I=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}(this,function(p,_){return _})}});var o=o||{},a=this||self;function u(c){var p=typeof c;return"array"==(p="object"!=p?p:c?Array.isArray(c)?"array":p:"null")||"object"==p&&"number"==typeof c.length}function l(c){var p=typeof c;return"object"==p&&null!=c||"function"==p}function h(c,p,_){return c.call.apply(c.bind,arguments)}function g(c,p,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,I),c.apply(p,N)}}return function(){return c.apply(p,arguments)}}function v(c,p,_){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function E(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function T(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,N,B){for(var ne=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ne[dt-2]=arguments[dt];return p.prototype[N].apply(I,ne)}}function P(c){const p=c.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=c[I];return _}return[]}function R(c,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const N=c.length||0,B=I.length||0;c.length=N+B;for(let ne=0;ne<B;ne++)c[N+ne]=I[ne]}else c.push(I)}}function j(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var me=!(-1==H().indexOf("Gecko")||-1!=H().toLowerCase().indexOf("webkit")&&-1==H().indexOf("Edge")||-1!=H().indexOf("Trident")||-1!=H().indexOf("MSIE")||-1!=H().indexOf("Edge"));function _e(c,p,_){for(const I in c)p.call(_,c[I],I,c)}function b(c){const p={};for(const _ in c)p[_]=c[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,p){let _,I;for(let N=1;N<arguments.length;N++){for(_ in I=arguments[N],I)c[_]=I[_];for(let B=0;B<C.length;B++)_=C[B],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function k(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function V(c){a.setTimeout(()=>{throw c},0)}function A(){var c=np;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}var Oa=new class z{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new RU,c=>c.reset());class RU{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,Fa=!1,np=new class Ai{constructor(){this.h=this.g=null}add(p,_){const I=Oa.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}},tw=()=>{const c=a.Promise.resolve(void 0);Va=()=>{c.then(xU)}};var xU=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){V(_)}var p=Oa;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}Fa=!1};function is(){this.s=this.s,this.C=this.C}function En(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}is.prototype.s=!1,is.prototype.ma=function(){this.s||(this.s=!0,this.N())},is.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},En.prototype.h=function(){this.defaultPrevented=!0};var MU=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return c}();function La(c,p){if(En.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(me){e:{try{te(p.nodeName);var N=!0;break e}catch{}N=!1}N||(p=null)}}else"mouseover"==_?p=c.fromElement:"mouseout"==_&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType="string"==typeof c.pointerType?c.pointerType:kU[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&La.aa.h.call(this)}}T(La,En);var kU={2:"touch",3:"pen",4:"mouse"};La.prototype.h=function(){La.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ua="closure_listenable_"+(1e6*Math.random()|0),NU=0;function OU(c,p,_,I,N){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=N,this.key=++NU,this.da=this.fa=!1}function il(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sl(c){this.src=c,this.g={},this.h=0}function rp(c,p){var _=p.type;if(_ in c.g){var B,I=c.g[_],N=Array.prototype.indexOf.call(I,p,void 0);(B=0<=N)&&Array.prototype.splice.call(I,N,1),B&&(il(p),0==c.g[_].length&&(delete c.g[_],c.h--))}}function ip(c,p,_,I){for(var N=0;N<c.length;++N){var B=c[N];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==I)return N}return-1}sl.prototype.add=function(c,p,_,I,N){var B=c.toString();(c=this.g[B])||(c=this.g[B]=[],this.h++);var ne=ip(c,p,I,N);return-1<ne?(p=c[ne],_||(p.fa=!1)):((p=new OU(p,this.src,B,!!I,N)).fa=_,c.push(p)),p};var sp="closure_lm_"+(1e6*Math.random()|0),op={};function nw(c,p,_,I,N){if(I&&I.once)return iw(c,p,_,I,N);if(Array.isArray(p)){for(var B=0;B<p.length;B++)nw(c,p[B],_,I,N);return null}return _=lp(_),c&&c[Ua]?c.K(p,_,l(I)?!!I.capture:!!I,N):rw(c,p,_,!1,I,N)}function rw(c,p,_,I,N,B){if(!p)throw Error("Invalid event type");var ne=l(N)?!!N.capture:!!N,dt=up(c);if(dt||(c[sp]=dt=new sl(c)),(_=dt.add(p,_,I,ne,B)).proxy)return _;if(I=function VU(){const p=FU;return function c(_){return p.call(c.src,c.listener,_)}}(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)MU||(N=ne),void 0===N&&(N=!1),c.addEventListener(p.toString(),I,N);else if(c.attachEvent)c.attachEvent(ow(p.toString()),I);else{if(!c.addListener||!c.removeListener)throw Error("addEventListener and attachEvent are unavailable.");c.addListener(I)}return _}function iw(c,p,_,I,N){if(Array.isArray(p)){for(var B=0;B<p.length;B++)iw(c,p[B],_,I,N);return null}return _=lp(_),c&&c[Ua]?c.L(p,_,l(I)?!!I.capture:!!I,N):rw(c,p,_,!0,I,N)}function sw(c,p,_,I,N){if(Array.isArray(p))for(var B=0;B<p.length;B++)sw(c,p[B],_,I,N);else I=l(I)?!!I.capture:!!I,_=lp(_),c&&c[Ua]?(c=c.i,(p=String(p).toString())in c.g&&-1<(_=ip(B=c.g[p],_,I,N))&&(il(B[_]),Array.prototype.splice.call(B,_,1),0==B.length&&(delete c.g[p],c.h--))):c&&(c=up(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ip(p,_,I,N)),(_=-1<c?p[c]:null)&&ap(_))}function ap(c){if("number"!=typeof c&&c&&!c.da){var p=c.src;if(p&&p[Ua])rp(p.i,c);else{var _=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(_,I,c.capture):p.detachEvent?p.detachEvent(ow(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=up(p))?(rp(_,c),0==_.h&&(_.src=null,p[sp]=null)):il(c)}}}function ow(c){return c in op?op[c]:op[c]="on"+c}function FU(c,p){if(c.da)c=!0;else{p=new La(p,this);var _=c.listener,I=c.ha||c.src;c.fa&&ap(c),c=_.call(I,p)}return c}function up(c){return(c=c[sp])instanceof sl?c:null}var cp="__closure_events_fn_"+(1e9*Math.random()>>>0);function lp(c){return"function"==typeof c?c:(c[cp]||(c[cp]=function(p){return c.handleEvent(p)}),c[cp])}function wn(){is.call(this),this.i=new sl(this),this.M=this,this.F=null}function Mn(c,p){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=p.type||p,"string"==typeof p)p=new En(p,c);else if(p instanceof En)p.target=p.target||c;else{var N=p;x(p=new En(I,c),N)}if(N=!0,_)for(var B=_.length-1;0<=B;B--){var ne=p.g=_[B];N=ol(ne,I,!0,p)&&N}if(N=ol(ne=p.g=c,I,!0,p)&&N,N=ol(ne,I,!1,p)&&N,_)for(B=0;B<_.length;B++)N=ol(ne=p.g=_[B],I,!1,p)&&N}function ol(c,p,_,I){if(!(p=c.i.g[String(p)]))return!0;p=p.concat();for(var N=!0,B=0;B<p.length;++B){var ne=p[B];if(ne&&!ne.da&&ne.capture==_){var dt=ne.listener,dn=ne.ha||ne.src;ne.fa&&rp(c.i,ne),N=!1!==dt.call(dn,I)&&N}}return N&&!I.defaultPrevented}function aw(c,p,_){if("function"==typeof c)_&&(c=v(c,_));else{if(!c||"function"!=typeof c.handleEvent)throw Error("Invalid listener argument");c=v(c.handleEvent,c)}return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function uw(c){c.g=aw(()=>{c.g=null,c.i&&(c.i=!1,uw(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}T(wn,is),wn.prototype[Ua]=!0,wn.prototype.removeEventListener=function(c,p,_,I){sw(this,c,p,_,I)},wn.prototype.N=function(){if(wn.aa.N.call(this),this.i){var p,c=this.i;for(p in c.g){for(var _=c.g[p],I=0;I<_.length;I++)il(_[I]);delete c.g[p],c.h--}}this.F=null},wn.prototype.K=function(c,p,_,I){return this.i.add(String(c),p,!1,_,I)},wn.prototype.L=function(c,p,_,I){return this.i.add(String(c),p,!0,_,I)};class LU extends is{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ba(c){is.call(this),this.h=c,this.g={}}T(Ba,is);var cw=[];function lw(c){_e(c.g,function(p,_){this.g.hasOwnProperty(_)&&ap(p)},c),c.g={}}Ba.prototype.N=function(){Ba.aa.N.call(this),lw(this)},Ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dp=a.JSON.stringify,UU=a.JSON.parse,BU=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hp(){}function hw(){}hp.prototype.h=null;var ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fp(){En.call(this,"d")}function pp(){En.call(this,"c")}T(fp,En),T(pp,En);var Us={},fw=null;function al(){return fw=fw||new wn}function pw(c){En.call(this,Us.La,c)}function za(c){const p=al();Mn(p,new pw(p))}function gw(c,p){En.call(this,Us.STAT_EVENT,c),this.stat=p}function kn(c){const p=al();Mn(p,new gw(p,c))}function mw(c,p){En.call(this,Us.Ma,c),this.size=p}function $a(c,p){if("function"!=typeof c)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function qa(){this.g=!0}function Bo(c,p,_,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+function qU(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_)for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var N=I[1];if(Array.isArray(N)&&!(1>N.length)){var B=N[0];if("noop"!=B&&"stop"!=B&&"close"!=B)for(var ne=1;ne<N.length;ne++)N[ne]=""}}}return dp(_)}catch{return p}}(c,_)+(I?" "+I:"")})}Us.La="serverreachability",T(pw,En),Us.STAT_EVENT="statevent",T(gw,En),Us.Ma="timingevent",T(mw,En),qa.prototype.xa=function(){this.g=!1},qa.prototype.info=function(){};var gp,ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_w={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cl(){}function ss(c,p,_,I){this.j=c,this.i=p,this.l=_,this.R=I||1,this.U=new Ba(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yw}function yw(){this.i=null,this.g="",this.h=!1}T(cl,hp),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},gp=new cl;var vw={},mp={};function _p(c,p,_){c.L=1,c.v=fl(Ci(p)),c.m=_,c.P=!0,Iw(c,null)}function Iw(c,p){c.F=Date.now(),ll(c),c.A=Ci(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Nw(_.i,"t",I),c.C=0,_=c.j.J,c.h=new yw,c.g=Xw(c.j,_?p:null,!c.m),0<c.O&&(c.M=new LU(v(c.Y,c,c.g),c.O)),p=c.U,_=c.g,I=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(cw[0]=N.toString()),N=cw);for(var B=0;B<N.length;B++){var ne=nw(_,N[B],I||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),za(),function jU(c,p,_,I,N,B){c.info(function(){if(c.g)if(B)for(var ne="",dt=B.split("&"),dn=0;dn<dt.length;dn++){var Xe=dt[dn].split("=");if(1<Xe.length){var Tn=Xe[0];Xe=Xe[1];var bn=Tn.split("_");ne=2<=bn.length&&"type"==bn[1]?ne+(Tn+"=")+Xe+"&":ne+(Tn+"=redacted&")}}else ne=null;else ne=B;return"XMLHTTP REQ ("+I+") [attempt "+N+"]: "+p+"\n"+_+"\n"+ne})}(c.i,c.u,c.A,c.l,c.R,c.m)}function Ew(c){return!!c.g&&"GET"==c.u&&2!=c.L&&c.j.Ca}function GU(c,p){var _=c.C,I=p.indexOf("\n",_);return-1==I?mp:(_=Number(p.substring(_,I)),isNaN(_)?vw:(I+=1)+_>p.length?mp:(p=p.slice(I,I+_),c.C=I+_,p))}function ll(c){c.S=Date.now()+c.I,ww(c,c.I)}function ww(c,p){if(null!=c.B)throw Error("WatchDog timer not null");c.B=$a(v(c.ba,c),p)}function yp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}function Ga(c){0==c.j.G||c.J||Kw(c.j,c)}function Bs(c){yp(c);var p=c.M;p&&"function"==typeof p.ma&&p.ma(),c.M=null,lw(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function vp(c,p){try{var _=c.j;if(0!=_.G&&(_.g==c||Ip(_.h,c)))if(!c.K&&Ip(_.h,c)&&3==_.G){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&3==I.length){var N=I;if(0==N[0]){e:if(!_.u){if(_.g){if(!(_.g.F+3e3<c.F))break e;yl(_),ml(_)}bp(_),kn(18)}}else _.za=N[1],0<_.za-_.T&&37500>N[2]&&_.F&&0==_.v&&!_.C&&(_.C=$a(v(_.Za,_),6e3));if(1>=Aw(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else zs(_,11)}else if((c.K||_.g==c)&&yl(_),!j(p))for(N=_.Da.g.parse(p),p=0;p<N.length;p++){let Xe=N[p];if(_.T=Xe[0],Xe=Xe[1],2==_.G)if("c"==Xe[0]){_.K=Xe[1],_.ia=Xe[2];const Tn=Xe[3];null!=Tn&&(_.la=Tn,_.j.info("VER="+_.la));const bn=Xe[4];null!=bn&&(_.Aa=bn,_.j.info("SVER="+_.Aa));const $o=Xe[5];null!=$o&&"number"==typeof $o&&0<$o&&(_.L=I=1.5*$o,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Mr=c.g;if(Mr){const Il=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var B=I.h;B.g||-1==Il.indexOf("spdy")&&-1==Il.indexOf("quic")&&-1==Il.indexOf("h2")||(B.j=B.l,B.g=new Set,B.h&&(Ep(B,B.h),B.h=null))}if(I.D){const Cp=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cp&&(I.ya=Cp,pt(I.I,I.D,Cp))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms"));var ne=c;if((I=_).qa=Jw(I,I.J?I.ia:null,I.W),ne.K){Cw(I.h,ne);var dt=ne,dn=I.L;dn&&(dt.I=dn),dt.B&&(yp(dt),ll(dt)),I.g=ne}else Hw(I);0<_.i.length&&_l(_)}else"stop"!=Xe[0]&&"close"!=Xe[0]||zs(_,7);else 3==_.G&&("stop"==Xe[0]||"close"==Xe[0]?"stop"==Xe[0]?zs(_,7):Tp(_):"noop"!=Xe[0]&&_.l&&_.l.ta(Xe),_.v=0)}za()}catch{}}ss.prototype.ca=function(c){c=c.target;const p=this.M;p&&3==Di(c)?p.j():this.Y(c)},ss.prototype.Y=function(c){try{if(c==this.g)e:{const bn=Di(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>bn)&&(3!=bn||this.g&&(this.h.h||this.g.oa()||jw(this.g)))){this.J||4!=bn||7==p||za(),yp(this);var _=this.g.Z();this.X=_;t:if(Ew(this)){var I=jw(this.g);c="";var N=I.length,B=4==Di(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bs(this),Ga(this);var ne="";break t}this.h.i=new a.TextDecoder}for(p=0;p<N;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(B&&p==N-1)});I.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=200==_,function zU(c,p,_,I,N,B,ne){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+N+"]: "+p+"\n"+_+"\n"+B+" "+ne})}(this.i,this.u,this.A,this.l,this.R,bn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,dn=this.g;if((dt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(dt)){var Xe=dt;break t}}Xe=null}if(!(_=Xe)){this.o=!1,this.s=3,kn(12),Bs(this),Ga(this);break e}Bo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vp(this,_)}if(this.P){let Mr;for(_=!0;!this.J&&this.C<ne.length;){if(Mr=GU(this,ne),Mr==mp){4==bn&&(this.s=4,kn(14),_=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}if(Mr==vw){this.s=4,kn(15),Bo(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}Bo(this.i,this.l,Mr,null),vp(this,Mr)}if(Ew(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=bn||0!=ne.length||this.h.h||(this.s=1,kn(16),_=!1),this.o=this.o&&_,_){if(0<ne.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Ap(Tn),Tn.M=!0,kn(11))}}else Bo(this.i,this.l,ne,"[Invalid Chunked Response]"),Bs(this),Ga(this)}else Bo(this.i,this.l,ne,null),vp(this,ne);4==bn&&Bs(this),this.o&&!this.J&&(4==bn?Kw(this.j,this):(this.o=!1,ll(this)))}else(function uB(c){const p={};c=(c.g&&2<=Di(c)&&c.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<c.length;I++){if(j(c[I]))continue;var _=k(c[I]);const N=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();const B=p[N]||[];p[N]=B,B.push(_)}!function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}(p,function(I){return I.join(", ")})})(this.g),400==_&&0<ne.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Bs(this),Ga(this)}}}catch{}},ss.prototype.cancel=function(){this.J=!0,Bs(this)},ss.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(function $U(c,p){c.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(za(),kn(17)),Bs(this),this.s=2,Ga(this)):ww(this,this.S-c)};var HU=class{constructor(c,p){this.g=c,this.map=p}};function Tw(c){this.l=c||10,c=a.PerformanceNavigationTiming?0<(c=a.performance.getEntriesByType("navigation")).length&&("hq"==c[0].nextHopProtocol||"h2"==c[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bw(c){return!!c.h||!!c.g&&c.g.size>=c.j}function Aw(c){return c.h?1:c.g?c.g.size:0}function Ip(c,p){return c.h?c.h==p:!!c.g&&c.g.has(p)}function Ep(c,p){c.g?c.g.add(p):c.h=p}function Cw(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}function Dw(c){if(null!=c.h)return c.i.concat(c.h.D);if(null!=c.g&&0!==c.g.size){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return P(c.i)}function Sw(c,p){if(c.forEach&&"function"==typeof c.forEach)c.forEach(p,void 0);else if(u(c)||"string"==typeof c)Array.prototype.forEach.call(c,p,void 0);else for(var _=function KU(c){if(c.na&&"function"==typeof c.na)return c.na();if(!c.V||"function"!=typeof c.V){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||"string"==typeof c){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const I in c)p[_++]=I;return p}}}(c),I=function WU(c){if(c.V&&"function"==typeof c.V)return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if("string"==typeof c)return c.split("");if(u(c)){for(var p=[],_=c.length,I=0;I<_;I++)p.push(c[I]);return p}for(I in p=[],_=0,c)p[_++]=c[I];return p}(c),N=I.length,B=0;B<N;B++)p.call(void 0,I[B],_&&_[B],c)}Tw.prototype.cancel=function(){if(this.i=Dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const c of this.g.values())c.cancel();this.g.clear()}};var Pw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function js(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof js){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var p=c.i,_=new Ka;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Rw(this,_),this.m=c.m}else c&&(p=String(c).match(Pw))?(this.h=!1,dl(this,p[1]||"",!0),this.o=Ha(p[2]||""),this.g=Ha(p[3]||"",!0),hl(this,p[4]),this.l=Ha(p[5]||"",!0),Rw(this,p[6]||"",!0),this.m=Ha(p[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}function Ci(c){return new js(c)}function dl(c,p,_){c.j=_?Ha(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Rw(c,p,_){p instanceof Ka?(c.i=p,function tB(c,p){p&&!c.j&&(os(c),c.i=null,c.g.forEach(function(_,I){var N=I.toLowerCase();I!=N&&(Mw(this,I),Nw(this,N,_))},c)),c.j=p}(c.i,c.h)):(_||(p=Wa(p,ZU)),c.i=new Ka(p,c.h))}function pt(c,p,_){c.i.set(p,_)}function fl(c){return pt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ha(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wa(c,p,_){return"string"==typeof c?(c=encodeURI(c).replace(p,YU),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YU(c){return"%"+((c=c.charCodeAt(0))>>4&15).toString(16)+(15&c).toString(16)}js.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Wa(p,xw,!0),":");var _=this.g;return(_||"file"==p)&&(c.push("//"),(p=this.o)&&c.push(Wa(p,xw,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.s)&&c.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&c.push("/"),c.push(Wa(_,"/"==_.charAt(0)?XU:JU,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Wa(_,eB)),c.join("")};var xw=/[#\/\?@]/g,JU=/[#\?:]/g,XU=/[#\?]/g,ZU=/[#\?@]/g,eB=/#/g;function Ka(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function os(c){c.g||(c.g=new Map,c.h=0,c.i&&function QU(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),N=null;if(0<=I){var B=c[_].substring(0,I);N=c[_].substring(I+1)}else B=c[_];p(B,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}function Mw(c,p){os(c),p=jo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function kw(c,p){return os(c),p=jo(c,p),c.g.has(p)}function Nw(c,p,_){Mw(c,p),0<_.length&&(c.i=null,c.g.set(jo(c,p),P(_)),c.h+=_.length)}function jo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function as(c,p,_,I,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),I(_)}catch{}}function iB(){this.g=new BU}function sB(c,p,_){const I=_||"";try{Sw(c,function(N,B){let ne=N;l(N)&&(ne=dp(N)),p.push(I+B+"="+encodeURIComponent(ne))})}catch(N){throw p.push(I+"type="+encodeURIComponent("_badmap")),N}}function Qa(c){this.l=c.Ub||null,this.j=c.eb||!1}function pl(c,p){wn.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ow(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}function Ya(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ja(c)}function Ja(c){c.onreadystatechange&&c.onreadystatechange.call(c)}function Vw(c){let p="";return _e(c,function(_,I){p+=I,p+=":",p+=_,p+="\r\n"}),p}function wp(c,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Vw(_),"string"==typeof c?null!=_&&encodeURIComponent(String(_)):pt(c,p,_))}function Pt(c){wn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ka.prototype).add=function(c,p){os(this),this.i=null,c=jo(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this},n.forEach=function(c,p){os(this),this.g.forEach(function(_,I){_.forEach(function(N){c.call(p,N,I,this)},this)},this)},n.na=function(){os(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const N=c[I];for(let B=0;B<N.length;B++)_.push(p[I])}return _},n.V=function(c){os(this);let p=[];if("string"==typeof c)kw(this,c)&&(p=p.concat(this.g.get(jo(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return os(this),this.i=null,kw(this,c=jo(this,c))&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c&&0<(c=this.V(c)).length?String(c[0]):p},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const B=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var N=B;""!==ne[I]&&(N+="="+encodeURIComponent(String(ne[I]))),c.push(N)}}return this.i=c.join("&")},T(Qa,hp),Qa.prototype.g=function(){return new pl(this.l,this.j)},Qa.prototype.i=function(c){return function(){return c}}({}),T(pl,wn),(n=pl.prototype).open=function(c,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ja(this)},n.send=function(c){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ya(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if("arraybuffer"===this.responseType)c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ow(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ya(this):Ja(this),3==this.readyState&&Ow(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ya(this))},n.Qa=function(c){this.g&&(this.response=c,Ya(this))},n.ga=function(){this.g&&Ya(this)},n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)c.push((_=_.value)[0]+": "+_[1]),_=p.next();return c.join("\r\n")},Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(c){this.m=c?"include":"same-origin"}}),T(Pt,wn);var oB=/^https?$/i,aB=["POST","PUT"];function Fw(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Lw(c),gl(c)}function Lw(c){c.A||(c.A=!0,Mn(c,"complete"),Mn(c,"error"))}function Uw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||4!=Di(c)||2!=c.Z()))if(c.u&&4==Di(c))aw(c.Ea,0,c);else if(Mn(c,"readystatechange"),4==Di(c)){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=0===ne){var N=String(c.D).match(Pw)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),I=!oB.test(N?N.toLowerCase():"")}_=I}if(_)Mn(c,"complete"),Mn(c,"success");else{c.m=6;try{var B=2<Di(c)?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.Z()+"]",Lw(c)}}finally{gl(c)}}}function gl(c,p){if(c.g){Bw(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Mn(c,"ready");try{_.onreadystatechange=I}catch{}}}function Bw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}function Di(c){return c.g?c.g.readyState:0}function jw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xa(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function zw(c){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,c),this.cb=Xa("retryDelaySeedMs",1e4,c),this.Wa=Xa("forwardChannelMaxRetries",2,c),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Tw(c&&c.concurrentRequestLimit),this.Da=new iB,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Tp(c){if($w(c),3==c.G){var p=c.U++,_=Ci(c.I);if(pt(_,"SID",c.K),pt(_,"RID",p),pt(_,"TYPE","terminate"),Za(c,_),(p=new ss(c,c.j,p)).L=2,p.v=fl(Ci(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&((new Image).src=p.v,_=!0),_||(p.g=Xw(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ll(p)}Yw(c)}function ml(c){c.g&&(Ap(c),c.g.cancel(),c.g=null)}function $w(c){ml(c),c.u&&(a.clearTimeout(c.u),c.u=null),yl(c),c.h.cancel(),c.s&&("number"==typeof c.s&&a.clearTimeout(c.s),c.s=null)}function _l(c){if(!bw(c.h)&&!c.s){c.s=!0;var p=c.Ga;Va||tw(),Fa||(Va(),Fa=!0),np.add(p,c),c.B=0}}function qw(c,p){var _;_=p?p.l:c.U++;const I=Ci(c.I);pt(I,"SID",c.K),pt(I,"RID",_),pt(I,"AID",c.T),Za(c,I),c.m&&c.o&&wp(I,c.m,c.o),_=new ss(c,c.j,_,c.B+1),null===c.m&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Gw(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ep(c.h,_),_p(_,I,p)}function Za(c,p){c.H&&_e(c.H,function(_,I){pt(p,I,_)}),c.l&&Sw({},function(_,I){pt(p,I,_)})}function Gw(c,p,_){_=Math.min(c.i.length,_);var I=c.l?v(c.l.Na,c.l,c):null;e:{var N=c.i;let B=-1;for(;;){const ne=["count="+_];-1==B?0<_?(B=N[0].g,ne.push("ofs="+B)):B=0:ne.push("ofs="+B);let dt=!0;for(let dn=0;dn<_;dn++){let Xe=N[dn].g;const Tn=N[dn].map;if(Xe-=B,0>Xe)B=Math.max(0,N[dn].g-100),dt=!1;else try{sB(Tn,ne,"req"+Xe+"_")}catch{I&&I(Tn)}}if(dt){I=ne.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,I}function Hw(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Va||tw(),Fa||(Va(),Fa=!0),np.add(p,c),c.v=0}}function bp(c){return!(c.g||c.u||3<=c.v||(c.Y++,c.u=$a(v(c.Fa,c),Qw(c,c.v)),c.v++,0))}function Ap(c){null!=c.A&&(a.clearTimeout(c.A),c.A=null)}function Ww(c){c.g=new ss(c,c.j,"rpc",c.Y),null===c.m&&(c.g.H=c.o),c.g.O=0;var p=Ci(c.qa);pt(p,"RID","rpc"),pt(p,"SID",c.K),pt(p,"AID",c.T),pt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&pt(p,"TO",c.ja),pt(p,"TYPE","xmlhttp"),Za(c,p),c.m&&c.o&&wp(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=fl(Ci(p)),_.m=null,_.P=!0,Iw(_,c)}function yl(c){null!=c.C&&(a.clearTimeout(c.C),c.C=null)}function Kw(c,p){var _=null;if(c.g==p){yl(c),Ap(c),c.g=null;var I=2}else{if(!Ip(c.h,p))return;_=p.D,Cw(c.h,p),I=1}if(0!=c.G)if(p.o)if(1==I){_=p.m?p.m.length:0,p=Date.now()-p.F;var N=c.B;Mn(I=al(),new mw(I,_)),_l(c)}else Hw(c);else if(3==(N=p.s)||0==N&&0<p.X||!(1==I&&function cB(c,p){return!(Aw(c.h)>=c.h.j-(c.s?1:0)||(c.s?(c.i=p.D.concat(c.i),0):1==c.G||2==c.G||c.B>=(c.Va?0:c.Wa)||(c.s=$a(v(c.Ga,c,p),Qw(c,c.B)),c.B++,0)))}(c,p)||2==I&&bp(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),N){case 1:zs(c,5);break;case 4:zs(c,10);break;case 3:zs(c,6);break;default:zs(c,2)}}function Qw(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function zs(c,p){if(c.j.info("Error code "+p),2==p){var _=v(c.fb,c),I=c.Xa;const N=!I;I=new js(I||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dl(I,"https"),fl(I),N?function nB(c,p){const _=new qa;if(a.Image){const I=new Image;I.onload=E(as,_,"TestLoadImage: loaded",!0,p,I),I.onerror=E(as,_,"TestLoadImage: error",!1,p,I),I.onabort=E(as,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(as,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}(I.toString(),_):function rB(c,p){new qa;const I=new AbortController,N=setTimeout(()=>{I.abort(),as(0,0,!1,p)},1e4);fetch(c,{signal:I.signal}).then(B=>{clearTimeout(N),as(0,0,!!B.ok,p)}).catch(()=>{clearTimeout(N),as(0,0,!1,p)})}(I.toString(),_)}else kn(2);c.G=0,c.l&&c.l.sa(p),Yw(c),$w(c)}function Yw(c){if(c.G=0,c.ka=[],c.l){const p=Dw(c.h);(0!=p.length||0!=c.i.length)&&(R(c.ka,p),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Jw(c,p,_){var I=_ instanceof js?Ci(_):new js(_);if(""!=I.g)p&&(I.g=p+"."+I.g),hl(I,I.s);else{var N=a.location;I=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;var B=new js(null);I&&dl(B,I),p&&(B.g=p),N&&hl(B,N),_&&(B.l=_),I=B}return p=c.ya,(_=c.D)&&p&&pt(I,_,p),pt(I,"VER",c.la),Za(c,I),I}function Xw(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Pt(c.Ca&&!c.pa?new Qa({eb:_}):c.pa)).Ha(c.J),p}function Zw(){}function vl(){}function er(c,p){wn.call(this),this.g=new zw(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!j(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!j(p)&&(this.g.D=p,null!==(c=this.h)&&p in c&&p in(c=this.h)&&delete c[p]),this.j=new zo(this)}function eT(c){fp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=null!==p&&c in p?p[c]:void 0),this.data=p}else this.data=c}function tT(){pp.call(this),this.status=1}function zo(c){this.g=c}(n=Pt.prototype).Ha=function(c){this.J=c},n.ea=function(c,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gp.g(),this.v=function dw(c){return c.h||(c.h=c.i())}(this.o?this.o:gp),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(B){return void Fw(this,B)}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var N in I)_.set(N,I[N]);else{if("function"!=typeof I.keys||"function"!=typeof I.get)throw Error("Unknown input type for opt_headers: "+String(I));for(const B of I.keys())_.set(B,I.get(B))}I=Array.from(_.keys()).find(B=>"content-type"==B.toLowerCase()),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aB,p,void 0))||I||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of _)this.g.setRequestHeader(B,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bw(this),this.u=!0,this.g.send(c),this.u=!1}catch(B){Fw(this,B)}},n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Mn(this,"complete"),Mn(this,"abort"),gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Uw(this):this.bb())},n.bb=function(){Uw(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&0==p.indexOf(c)&&(p=p.substring(c.length)),UU(p)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=zw.prototype).la=8,n.G=1,n.connect=function(c,p,_,I){kn(0),this.W=c,this.H=p||{},_&&void 0!==I&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Jw(this,null,this.W),_l(this)},n.Ga=function(c){if(this.s)if(this.s=null,1==this.G){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new ss(this,this.j,c);let B=this.o;if(this.S&&(B?(B=b(B),x(B,this.S)):B=this.S),null!==this.m||this.O||(N.H=B,B=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){var I=this.i[_];if(void 0===(I="__data__"in I.map&&"string"==typeof(I=I.map.__data__)?I.length:void 0))break;if(4096<(p+=I)){p=_;break e}if(4096===p||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Gw(this,N,p),pt(_=Ci(this.I),"RID",c),pt(_,"CVER",22),this.D&&pt(_,"X-HTTP-Session-Id",this.D),Za(this,_),B&&(this.O?p="headers="+encodeURIComponent(String(Vw(B)))+"&"+p:this.m&&wp(_,this.m,B)),Ep(this.h,N),this.Ua&&pt(_,"TYPE","init"),this.P?(pt(_,"$req",p),pt(_,"SID","null"),N.T=!0,_p(N,_,null)):_p(N,_,p),this.G=2}}else 3==this.G&&(c?qw(this,c):0==this.i.length||bw(this.h)||qw(this))},n.Fa=function(){if(this.u=null,Ww(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$a(v(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),ml(this),Ww(this))},n.Za=function(){null!=this.C&&(this.C=null,ml(this),bp(this),kn(19))},n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Zw.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},vl.prototype.g=function(c,p){return new er(c,p)},T(er,wn),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Tp(this.g)},er.prototype.o=function(c){var p=this.g;if("string"==typeof c){var _={};_.__data__=c,c=_}else this.u&&((_={}).__data__=dp(c),c=_);p.i.push(new HU(p.Ya++,c)),3==p.G&&_l(p)},er.prototype.N=function(){this.g.l=null,delete this.j,Tp(this.g),delete this.g,er.aa.N.call(this)},T(eT,fp),T(tT,pp),T(zo,Zw),zo.prototype.ua=function(){Mn(this.g,"a")},zo.prototype.ta=function(c){Mn(this.g,new eT(c))},zo.prototype.sa=function(c){Mn(this.g,new tT)},zo.prototype.ra=function(){Mn(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,EG=Rc.createWebChannelTransport=function(){return new vl},IG=Rc.getStatEventTarget=function(){return al()},vG=Rc.Event=Us,KM=Rc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,DC=Rc.ErrorCode=ul,_w.COMPLETE="complete",yG=Rc.EventType=_w,hw.EventType=ja,ja.OPEN="a",ja.CLOSE="b",ja.ERROR="c",ja.MESSAGE="d",wn.prototype.listen=wn.prototype.K,XI=Rc.WebChannel=hw,Rc.FetchXmlHttpFactory=Qa,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,_G=Rc.XhrIo=Pt}).apply(typeof CC<"u"?CC:typeof self<"u"?self:typeof window<"u"?window:{});const wG="@firebase/firestore";class Oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");let km="10.14.0";const hd=new Nu.Vy("@firebase/firestore");function Nm(){return hd.logLevel}function Ie(n,...e){if(hd.logLevel<=Nu.$b.DEBUG){const t=e.map(QM);hd.debug(`Firestore (${km}): ${n}`,...t)}}function Jr(n,...e){if(hd.logLevel<=Nu.$b.ERROR){const t=e.map(QM);hd.error(`Firestore (${km}): ${n}`,...t)}}function No(n,...e){if(hd.logLevel<=Nu.$b.WARN){const t=e.map(QM);hd.warn(`Firestore (${km}): ${n}`,...t)}}function QM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ke(n="Unexpected state"){const e=`FIRESTORE (${km}) INTERNAL ASSERTION FAILED: `+n;throw Jr(e),new Error(e)}function et(n,e){n||Ke()}function Ve(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends xn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pme{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Oi.UNAUTHENTICATED))}shutdown(){}}class gme{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mme{constructor(e){this.t=e,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;et(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,M.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et("string"==typeof r.accessToken),new TG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(null===e||"string"==typeof e),new Oi(e)}}class _me{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yme{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _me(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vme{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){et(void 0===this.o);const r=s=>{null!=s.error&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et("string"==typeof t.token),this.R=t.token,new bG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ime(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class AG{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Ime(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function Om(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function CG(n){return n+"\0"}class Tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Tr(0,0))}static max(){return new rt(new Tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ZI{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ke(),void 0===r?r=e.length-t:r>e.length-t&&Ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ZI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ZI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends ZI{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new en(t)}static emptyPath(){return new en([])}}const Eme=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _r extends ZI{construct(e,t,r){return new _r(e,t,r)}static isValidIdentifier(e){return Eme.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _r(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _r(t)}static emptyPath(){return new _r([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(en.fromString(e))}static fromName(e){return new Ue(en.fromString(e).popFirst(5))}static empty(){return new Ue(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new en(e.slice()))}}class Vm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function YM(n){return n.fields.find(e=>2===e.kind)}function sf(n){return n.fields.filter(e=>2!==e.kind)}Vm.UNKNOWN_ID=-1;class af{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fm(0,Oo.min())}}function DG(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(1e9===r?new Tr(t+1,0):new Tr(t,r));return new Oo(i,Ue.empty(),e)}function SG(n){return new Oo(n.readTime,n.key,-1)}class Oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oo(rt.min(),Ue.empty(),-1)}static max(){return new Oo(rt.max(),Ue.empty(),-1)}}function JM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:bt(n.largestBatchId,e.largestBatchId))}const PG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fd(n){return XM.apply(this,arguments)}function XM(){return(XM=(0,M.A)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==PG)throw n;Ie("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(i=>i?X.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new X((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new X((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class SC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new eE(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ZM(r.target.error);this.V.reject(new eE(e,i))}}static open(e,t,r,i){try{return new SC(t,e.transaction(i,r))}catch(s){throw new eE(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ame(t)}}class Ou{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Ou.S((0,xn.ZQ)())&&Jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ie("SimpleDb","Removing database:",e),uf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,xn.zW)())return!1;if(Ou.v())return!0;const e=(0,xn.ZQ)(),t=Ou.S(e),r=0<t&&t<10,i=xG(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,M.A)(function*(){return t.db||(Ie("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new eE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ve(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ve(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new eE(e,a))},s.onupgradeneeded=o=>{Ie("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ie("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,M.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=SC.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),X.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(Ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function xG(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bme{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return uf(this.B.delete())}}class eE extends ve{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pd(n){return"IndexedDbTransactionError"===n.name}class Ame{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uf(r)}add(e){return Ie("SimpleDb","ADD",this.store.name,e,e),uf(this.store.add(e))}get(e){return uf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ie("SimpleDb","DELETE",this.store.name,e),uf(this.store.delete(e))}count(){return Ie("SimpleDb","COUNT",this.store.name),uf(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new X((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new X((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new X((r,i)=>{t.onerror=s=>{const o=ZM(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new X((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new bme(a),l=t(a.primaryKey,a.value,u);if(l instanceof X){const h=l.catch(g=>(u.done(),X.reject(g)));r.push(h)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>X.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uf(n){return new X((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ZM(r.target.error);t(i)}})}let MG=!1;function ZM(n){const e=Ou.S((0,xn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MG||(MG=!0,setTimeout(()=>{throw r},0)),r}}return n}class Cme{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,M.A)(function*(){t.task=null;try{Ie("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){pd(r)?Ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield fd(r)}yield t.X(6e4)}))}}class Dme{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,M.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return X.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ie("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=SG(s);JM(o,r)>0&&(r=o)}),new Oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Vo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tE(n){return null==n}function nE(n){return 0===n&&1/n==-1/0}function kG(n){return"number"==typeof n&&Number.isInteger(n)&&!nE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ys(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NG(e)),e=Sme(n.get(t),e);return NG(e)}function Sme(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function NG(n){return n+"\x01\x01"}function Vu(n){const e=n.length;if(et(e>=2),2===e)return et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ke(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ke()}s=o+2}return new en(r)}const OG=["userId","batchId"];function PC(n,e){return[n,ys(e)]}function VG(n,e,t){return[n,ys(e),t]}const Pme={},Rme=["prefixPath","collectionGroup","readTime","documentId"],xme=["prefixPath","collectionGroup","documentId"],Mme=["collectionGroup","readTime","prefixPath","documentId"],kme=["canonicalId","targetId"],Nme=["targetId","path"],Ome=["path","targetId"],Vme=["collectionId","parent"],Fme=["indexId","uid"],Lme=["uid","sequenceNumber"],Ume=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bme=["indexId","uid","orderedDocumentKey"],jme=["userId","collectionPath","documentId"],zme=["userId","collectionPath","largestBatchId"],$me=["userId","collectionGroup","largestBatchId"],FG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qme=[...FG,"documentOverlays"],LG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UG=LG,ek=[...UG,"indexConfiguration","indexState","indexEntries"],Gme=ek,Hme=[...ek,"globals"];class tk extends RG{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function wi(n,e){const t=Ve(n);return Ou.F(t._e,e)}function BG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ur{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new RC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new RC(this.root,e,this.comparator,!1)}getReverseIterator(){return new RC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new RC(this.root,e,this.comparator,!0)}}class RC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Xi.RED,this.left=i??Xi.EMPTY,this.right=s??Xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Xi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1,Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $G(this.data.getIterator())}getIteratorFrom(e){return new $G(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class $G{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lm(n){return n.hasNext()?n.getNext():void 0}class to{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new to([])}unionWith(e){let t=new Hn(_r.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new to(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Om(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class qG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qG("Invalid base64 string: "+s):s}}(e);return new Fr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const Kme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xc(n){if(et(!!n),"string"==typeof n){let e=0;const t=Kme.exec(n);if(et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mc(n){return"string"==typeof n?Fr.fromBase64String(n):Fr.fromUint8Array(n)}function xC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function MC(n){const e=n.mapValue.fields.__previous_value__;return xC(e)?MC(e):e}function rE(n){const e=xc(n.mapValue.fields.__local_write_time__.timestampValue);return new Tr(e.seconds,e.nanos)}class Qme{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class md{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new md("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof md&&e.projectId===this.projectId&&e.database===this.database}}const _d={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kC={nullValue:"NULL_VALUE"};function yd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xC(n)?4:QG(n)?9007199254740991:VC(n)?10:11:Ke()}function Fu(n,e){if(n===e)return!0;const t=yd(n);if(t!==yd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rE(n).isEqual(rE(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xc(i.timestampValue),a=xc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Mc(n.bytesValue).isEqual(Mc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return br(i.geoPointValue.latitude)===br(s.geoPointValue.latitude)&&br(i.geoPointValue.longitude)===br(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return br(i.integerValue)===br(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=br(i.doubleValue),a=br(s.doubleValue);return o===a?nE(o)===nE(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Om(n.arrayValue.values||[],e.arrayValue.values||[],Fu);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(BG(o)!==BG(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Fu(o[u],a[u])))return!1;return!0}(n,e);default:return Ke()}var s}function iE(n,e){return void 0!==(n.values||[]).find(t=>Fu(t,e))}function vd(n,e){if(n===e)return 0;const t=yd(n),r=yd(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=br(s.integerValue||s.doubleValue),u=br(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return GG(n.timestampValue,e.timestampValue);case 4:return GG(rE(n),rE(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Mc(s),u=Mc(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=bt(a[l],u[l]);if(0!==h)return h}return bt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=bt(br(s.latitude),br(o.latitude));return 0!==a?a:bt(br(s.longitude),br(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return HG(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,P=bt((null===(l=E?.values)||void 0===l?void 0:l.length)||0,(null===(h=T?.values)||void 0===h?void 0:h.length)||0);return 0!==P?P:HG(E,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===_d.mapValue&&o===_d.mapValue)return 0;if(s===_d.mapValue)return 1;if(o===_d.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const v=bt(u[g],h[g]);if(0!==v)return v;const E=vd(a[u[g]],l[h[g]]);if(0!==E)return E}return bt(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Ke()}}function GG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bt(n,e);const t=xc(n),r=xc(e),i=bt(t.seconds,r.seconds);return 0!==i?i:bt(t.nanos,r.nanos)}function HG(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=vd(t[i],r[i]);if(s)return s}return bt(t.length,r.length)}function Um(n){return nk(n)}function nk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=xc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mc(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=nk(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${nk(t.fields[o])}`;return i+"}"}(n.mapValue):Ke()}function cf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rk(n){return!!n&&"integerValue"in n}function sE(n){return!!n&&"arrayValue"in n}function WG(n){return!!n&&"nullValue"in n}function KG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function OC(n){return!!n&&"mapValue"in n}function VC(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const YG={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Yme(n){return"nullValue"in n?kC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cf(md.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?VC(n)?YG:{mapValue:{}}:Ke()}function Jme(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cf(md.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?YG:"mapValue"in n?VC(n)?{mapValue:{}}:_d:Ke()}function JG(n,e){const t=vd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XG(n,e){const t=vd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!OC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oE(t)}setAll(e){let t=_r.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=oE(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());OC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];OC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zi(oE(this.value))}}function ZG(n){const e=[];return gd(n.fields,(t,r)=>{const i=new _r([t]);if(OC(r)){const s=ZG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new to(e)}class yr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yr(e,0,rt.min(),rt.min(),rt.min(),Zi.empty(),0)}static newFoundDocument(e,t,r,i){return new yr(e,1,t,rt.min(),r,i,0)}static newNoDocument(e,t){return new yr(e,2,t,rt.min(),rt.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,rt.min(),rt.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Id{constructor(e,t){this.position=e,this.inclusive=t}}function e6(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ue.comparator(Ue.fromName(o.referenceValue),t.key):vd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function t6(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fu(n.position[t],e.position[t]))return!1;return!0}class aE{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xme(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class n6{}class tn extends n6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Zme(e,t,r):"array-contains"===t?new n_e(e,r):"in"===t?new u6(e,r):"not-in"===t?new r_e(e,r):"array-contains-any"===t?new i_e(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new e_e(e,r):new t_e(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vd(t,this.value)):null!==t&&yd(this.value)===yd(t)&&this.matchesComparison(vd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends n6{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Fn(e,t)}matches(e){return Bm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bm(n){return"and"===n.op}function ik(n){return"or"===n.op}function sk(n){return r6(n)&&Bm(n)}function r6(n){for(const e of n.filters)if(e instanceof Fn)return!1;return!0}function ok(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Um(n.value);if(sk(n))return n.filters.map(e=>ok(e)).join(",");{const e=n.filters.map(t=>ok(t)).join(",");return`${n.op}(${e})`}}function i6(n,e){return n instanceof tn?(r=n,(i=e)instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&Fu(r.value,i.value)):n instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&i6(o,i.filters[a]),!0)}(n,e):void Ke();var r,i}function s6(n,e){const t=n.filters.concat(e);return Fn.create(t,n.op)}function o6(n){return n instanceof tn?`${(t=n).field.canonicalString()} ${t.op} ${Um(t.value)}`:n instanceof Fn?function(t){return t.op.toString()+" {"+t.getFilters().map(o6).join(" ,")+"}"}(n):"Filter";var t}class Zme extends tn{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class e_e extends tn{constructor(e,t){super(e,"in",t),this.keys=a6(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class t_e extends tn{constructor(e,t){super(e,"not-in",t),this.keys=a6(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a6(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class n_e extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sE(t)&&iE(t.arrayValue,this.value)}}class u6 extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&iE(this.value.arrayValue,t)}}class r_e extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(iE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!iE(this.value.arrayValue,t)}}class i_e extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>iE(this.value.arrayValue,r))}}class s_e{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ak(n,e=null,t=[],r=[],i=null,s=null,o=null){return new s_e(n,e,t,r,i,s,o)}function lf(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ok(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),tE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Um(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Um(r)).join(",")),e.ue=t}return e.ue}function uE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xme(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!i6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!t6(n.startAt,e.startAt)&&t6(n.endAt,e.endAt)}function FC(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function LC(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function c6(n,e,t){let r=kC,i=!0;for(const s of LC(n,e)){let o=kC,a=!0;switch(s.op){case"<":case"<=":o=Yme(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kC}JG({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];JG({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function l6(n,e,t){let r=_d,i=!0;for(const s of LC(n,e)){let o=_d,a=!0;switch(s.op){case">=":case">":o=Jme(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=_d}XG({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];XG({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class kc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function d6(n,e,t,r,i,s,o,a){return new kc(n,e,t,r,i,s,o,a)}function jm(n){return new kc(n)}function h6(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uk(n){return null!==n.collectionGroup}function zm(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hn(_r.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new aE(s,r))}),t.has(_r.keyField().canonicalString())||e.ce.push(new aE(_r.keyField(),r))}return e.ce}function vs(n){const e=Ve(n);return e.le||(e.le=function p6(n,e){if("F"===n.limitType)return ak(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new aE(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Id(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Id(n.startAt.position,n.startAt.inclusive):null;return ak(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,zm(n))),e.le}function ck(n,e){const t=n.filters.concat([e]);return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function UC(n,e,t){return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cE(n,e){return uE(vs(n),vs(e))&&n.limitType===e.limitType}function g6(n){return`${lf(vs(n))}|lt:${n.limitType}`}function $m(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>o6(i)).join(", ")}]`),tE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Um(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Um(i)).join(",")),`Target(${r})`}(vs(n))}; limitType=${n.limitType})`}function lE(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of zm(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=e6(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,zm(r),i)||r.endAt&&!function(o,a,u){const l=e6(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,zm(r),i)));var r,i}function m6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _6(n){return(e,t)=>{let r=!1;for(const i of zm(n)){const s=o_e(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function o_e(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?vd(u,l):Ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}class Nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zG(this.inner)}size(){return this.innerSize}}const a_e=new ur(Ue.comparator);function no(){return a_e}const y6=new ur(Ue.comparator);function dE(...n){let e=y6;for(const t of n)e=e.insert(t.key,t);return e}function v6(n){let e=y6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lu(){return hE()}function I6(){return hE()}function hE(){return new Nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const u_e=new ur(Ue.comparator),c_e=new Hn(Ue.comparator);function kt(...n){let e=c_e;for(const t of n)e=e.add(t);return e}const l_e=new Hn(bt);function lk(){return l_e}function dk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nE(e)?"-0":e}}function E6(n){return{integerValue:""+n}}function w6(n,e){return kG(e)?E6(e):dk(n,e)}class BC{constructor(){this._=void 0}}function d_e(n,e,t){return n instanceof qm?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xC(s)&&(s=MC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof df?b6(n,e):n instanceof hf?A6(n,e):function(i,s){const o=T6(i,s),a=C6(o)+C6(i.Pe);return rk(o)&&rk(i.Pe)?E6(a):dk(i.serializer,a)}(n,e)}function h_e(n,e,t){return n instanceof df?b6(n,e):n instanceof hf?A6(n,e):t}function T6(n,e){return n instanceof Gm?rk(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class qm extends BC{}class df extends BC{constructor(e){super(),this.elements=e}}function b6(n,e){const t=D6(e);for(const r of n.elements)t.some(i=>Fu(i,r))||t.push(r);return{arrayValue:{values:t}}}class hf extends BC{constructor(e){super(),this.elements=e}}function A6(n,e){let t=D6(e);for(const r of n.elements)t=t.filter(i=>!Fu(i,r));return{arrayValue:{values:t}}}class Gm extends BC{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function C6(n){return br(n.integerValue||n.doubleValue)}function D6(n){return sE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fE{constructor(e,t){this.field=e,this.transform=t}}class p_e{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class zC{}function S6(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wm(n.key,Ar.none()):new Hm(n.key,n.data,Ar.none());{const t=n.data,r=Zi.empty();let i=new Hn(_r.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Oc(n.key,r,new to(i.toArray()),Ar.none())}}function g_e(n,e,t){n instanceof Hm?function(i,s,o){const a=i.value.clone(),u=x6(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Oc?function(i,s,o){if(!jC(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=x6(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(R6(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pE(n,e,t,r){return n instanceof Hm?function(s,o,a,u){if(!jC(s.precondition,o))return a;const l=s.value.clone(),h=M6(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oc?function(s,o,a,u){if(!jC(s.precondition,o))return a;const l=M6(s.fieldTransforms,u,o),h=o.data;return h.setAll(R6(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,jC(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function m_e(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=T6(r.transform,i||null);null!=s&&(null===t&&(t=Zi.empty()),t.set(r.field,s))}return t||null}function P6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Om(r,i,(s,o)=>function f_e(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof df&&i instanceof df||r instanceof hf&&i instanceof hf?Om(r.elements,i.elements,Fu):r instanceof Gm&&i instanceof Gm?Fu(r.Pe,i.Pe):r instanceof qm&&i instanceof qm);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Hm extends zC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oc extends zC{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function R6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function x6(n,e,t){const r=new Map;et(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,h_e(o,a,t[i]))}return r}function M6(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,d_e(s,o,e))}return r}class Wm extends zC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hk extends zC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g_e(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I6();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=S6(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&Om(this.mutations,e.mutations,(t,r)=>P6(t,r))&&Om(this.baseMutations,e.baseMutations,(t,r)=>P6(t,r))}}class pk{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){et(e.mutations.length===r.length);let i=function(){return u_e}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pk(e,t,r,i)}}class gk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class __e{constructor(e,t){this.count=e,this.unchangedNames=t}}var ci,gn;function N6(n){switch(n){default:return Ke();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function O6(n){if(void 0===n)return Jr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case ci.OK:return ae.OK;case ci.CANCELLED:return ae.CANCELLED;case ci.UNKNOWN:return ae.UNKNOWN;case ci.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case ci.INTERNAL:return ae.INTERNAL;case ci.UNAVAILABLE:return ae.UNAVAILABLE;case ci.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case ci.NOT_FOUND:return ae.NOT_FOUND;case ci.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case ci.ABORTED:return ae.ABORTED;case ci.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case ci.DATA_LOSS:return ae.DATA_LOSS;default:return Ke()}}(gn=ci||(ci={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";function V6(){return new TextEncoder}const y_e=new rf([4294967295,4294967295],0);function F6(n){const e=V6().encode(n),t=new mG;return t.update(e),new Uint8Array(t.digest())}function L6(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rf([t,r],0),new rf([i,s],0)]}class mk{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gE(`Invalid padding: ${t}`);if(r<0)throw new gE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new gE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new gE(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=rf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(rf.fromNumber(r)));return 1===i.compare(y_e)&&(i=new rf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=F6(e),[r,i]=L6(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new mk(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=F6(e),[r,i]=L6(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class gE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_E.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mE(rt.min(),i,new ur(bt),no(),kt())}}class _E{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _E(r,t,kt(),kt(),kt())}}class qC{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class U6{constructor(e,t){this.targetId=e,this.me=t}}class B6{constructor(e,t,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class j6{constructor(){this.fe=0,this.ge=$6(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kt(),t=kt(),r=kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ke()}}),new _E(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$6()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class v_e{constructor(e){this.Le=e,this.Be=new Map,this.ke=no(),this.qe=z6(),this.Qe=new ur(bt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(FC(s))if(0===r){const o=new Ue(s.path);this.Ue(t,o,yr.newNoDocument(o,rt.min()))}else et(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Mc(r).toUint8Array()}catch(u){if(u instanceof qG)return No("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new mk(o,i,s)}catch(u){return No(u instanceof gE?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&FC(a.target)){const u=new Ue(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,yr.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=kt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mE(e,t,this.Qe,this.ke,r);return this.ke=no(),this.qe=z6(),this.Qe=new ur(bt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new j6,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Hn(bt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new j6),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function z6(){return new ur(Ue.comparator)}function $6(){return new ur(Ue.comparator)}const I_e={asc:"ASCENDING",desc:"DESCENDING"},E_e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w_e={and:"AND",or:"OR"};class T_e{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _k(n,e){return n.useProto3Json||tE(e)?e:{value:e}}function Km(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function b_e(n,e){return Km(n,e.toTimestamp())}function Xr(n){return et(!!n),rt.fromTimestamp(function(t){const r=xc(t);return new Tr(r.seconds,r.nanos)}(n))}function yk(n,e){return vk(n,e).canonicalString()}function vk(n,e){const t=(i=n,new en(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function G6(n){const e=en.fromString(n);return et(nH(e)),e}function yE(n,e){return yk(n.databaseId,e.path)}function Uu(n,e){const t=G6(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(K6(t))}function H6(n,e){return yk(n.databaseId,e)}function W6(n){const e=G6(n);return 4===e.length?en.emptyPath():K6(e)}function Ik(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K6(n){return et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Q6(n,e,t){return{name:yE(n,e),fields:t.value.mapValue.fields}}function Y6(n,e,t){const r=Uu(n,e.name),i=Xr(e.updateTime),s=e.createTime?Xr(e.createTime):rt.min(),o=new Zi({mapValue:{fields:e.fields}}),a=yr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function vE(n,e){let t;if(e instanceof Hm)t={update:Q6(n,e.key,e.value)};else if(e instanceof Wm)t={delete:yE(n,e.key)};else if(e instanceof Oc)t={update:Q6(n,e.key,e.data),updateMask:M_e(e.fieldMask)};else{if(!(e instanceof hk))return Ke();t={verify:yE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof qm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof df)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:b_e(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ke()),t;var s}function Ek(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Ar.updateTime(Xr(s.updateTime)):void 0!==s.exists?Ar.exists(s.exists):Ar.none():Ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(et("REQUEST_TIME"===a.setToServerValue),u=new qm):"appendMissingElements"in a?u=new df(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new hf(a.removeAllFromArray.values||[]):"increment"in a?u=new Gm(o,a.increment):Ke();const l=_r.fromServerFormat(a.fieldPath);return new fE(l,u)}(n,i)):[];var s;if(e.update){const i=Uu(n,e.update.name),s=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new to((e.updateMask.fieldPaths||[]).map(h=>_r.fromServerFormat(h)));return new Oc(i,s,o,t,r)}return new Hm(i,s,t,r)}if(e.delete){const i=Uu(n,e.delete);return new Wm(i,t)}if(e.verify){const i=Uu(n,e.verify);return new hk(i,t)}return Ke()}function J6(n,e){return{documents:[H6(n,e.path)]}}function GC(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=H6(n,i);const s=function(l){if(0!==l.length)return tH(Fn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:Ed((v=h).field),direction:P_e(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=_k(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function Z6(n){let e=W6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){et(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const v=eH(g);return v instanceof Fn&&sk(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new aE(Qm((T=v).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(g){let v;return v="object"==typeof g?g.value:g,tE(v)?null:v}(t.limit));let u=null;var g;t.startAt&&(u=new Id((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new Id(g.values||[],!g.before)}(t.endAt)),d6(e,i,o,s,a,"F",u,l)}function eH(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qm(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qm(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qm(t.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qm(t.unaryFilter.field);return tn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(n):void 0!==n.fieldFilter?tn.create(Qm((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Fn.create(t.compositeFilter.filters.map(r=>eH(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ke()}}(t.compositeFilter.op))}(n):Ke();var t}function P_e(n){return I_e[n]}function R_e(n){return E_e[n]}function x_e(n){return w_e[n]}function Ed(n){return{fieldPath:n.canonicalString()}}function Qm(n){return _r.fromServerFormat(n.fieldPath)}function tH(n){return n instanceof tn?function(t){if("=="===t.op){if(KG(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NAN"}};if(WG(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(KG(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NAN"}};if(WG(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(t.field),op:R_e(t.op),value:t.value}}}(n):n instanceof Fn?function(t){const r=t.getFilters().map(i=>tH(i));return 1===r.length?r[0]:{compositeFilter:{op:x_e(t.op),filters:r}}}(n):Ke()}function M_e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Vc{constructor(e,t,r,i,s=rt.min(),o=rt.min(),a=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rH{constructor(e){this.ct=e}}function iH(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yE(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Km(s,o.version.toTimestamp()),createTime:Km(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ff(e.version)};else{if(!e.isUnknownDocument())return Ke();r.unknownDocument={path:t.path.toArray(),version:ff(e.version)}}var s,o;return r}function HC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ff(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pf(n){const e=new Tr(n.seconds,n.nanoseconds);return rt.fromTimestamp(e)}function gf(n,e){const t=(e.baseMutations||[]).map(s=>Ek(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>Ek(n.ct,s)),i=Tr.fromMillis(e.localWriteTimeMs);return new fk(e.batchId,i,t,r)}function IE(n){const e=pf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pf(n.lastLimboFreeSnapshotVersion):rt.min();let r;return r=void 0!==n.query.documents?(et(1===(s=n.query).documents.length),vs(jm(W6(s.documents[0])))):function(s){return vs(Z6(s))}(n.query),new Vc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fr.fromBase64String(n.resumeToken));var s}function sH(n,e){const t=ff(e.snapshotVersion),r=ff(e.lastLimboFreeSnapshotVersion);let i;i=FC(e.target)?J6(n.ct,e.target):GC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wk(n){const e=Z6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?UC(e,e.limit,"L"):e}function Tk(n,e){return new gk(e.largestBatchId,Ek(n.ct,e.overlayMutation))}function oH(n,e){const t=e.path.lastSegment();return[n,ys(e.path.popLast()),t]}function aH(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ff(r.readTime),documentKey:ys(r.documentKey.path),largestBatchId:r.largestBatchId}}class N_e{getBundleMetadata(e,t){return uH(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:pf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return uH(e).put({bundleId:(i=t).id,createTime:ff(Xr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return cH(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:wk(s.bundledQuery),readTime:pf(s.readTime)};var s})}saveNamedQuery(e,t){return cH(e).put({name:(i=t).name,readTime:ff(Xr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function uH(n){return wi(n,"bundles")}function cH(n){return wi(n,"namedQueries")}class WC{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new WC(e,t.uid||"")}getOverlay(e,t){return EE(e).get(oH(this.userId,t)).next(r=>r?Tk(this.serializer,r):null)}getOverlays(e,t){const r=Lu();return X.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new gk(t,o);i.push(this.ht(e,a))}),X.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ys(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(EE(e).j("collectionPathOverlayIndex",a))}),X.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Lu(),s=ys(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return EE(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=Tk(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Lu();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return EE(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=Tk(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return EE(e).put(function(i,s,o){const[a,u,l]=oH(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vE(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function EE(n){return wi(n,"documentOverlays")}class O_e{Pt(e){return wi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Fr.fromUint8Array(r):Fr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class mf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),nE(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=xc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Mc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?QG(e)?this.dt(t,Number.MAX_SAFE_INTEGER):VC(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ke()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(br(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ue.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function V_e(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function lH(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=V_e(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}mf.vt=new mf;class F_e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=lH(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=lH(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class L_e{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class U_e{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class wE{constructor(){this.jt=new F_e,this.Ht=new L_e(this.jt),this.Jt=new U_e(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class _f{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _f(this.indexId,this.documentKey,this.arrayValue,r)}}function wd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dH(n.arrayValue,e.arrayValue),0!==t?t:(t=dH(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function dH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hH{constructor(e){this.Xt=new Hn((t,r)=>_r.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(et(e.collectionGroup===this.collectionId),this.nn)return!1;const t=YM(e);if(void 0!==t&&!this.sn(t))return!1;const r=sf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Hn(_r.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new af(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new af(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new af(r.field,"asc"===r.dir?0:1)));return new Vm(Vm.UNKNOWN_ID,this.collectionId,t,Fm.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fH(n){var e,t;if(et(n instanceof tn||n instanceof Fn),n instanceof tn){if(n instanceof u6){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>tn.create(n.field,"==",s)))||[];return Fn.create(i,"or")}return n}const r=n.filters.map(i=>fH(i));return Fn.create(r,n.op)}function B_e(n){if(0===n.getFilters().length)return[];const e=Ck(fH(n));return et(pH(e)),bk(e)||Ak(e)?[e]:e.getFilters()}function bk(n){return n instanceof tn}function Ak(n){return n instanceof Fn&&sk(n)}function pH(n){return bk(n)||Ak(n)||function(t){if(t instanceof Fn&&ik(t)){for(const r of t.getFilters())if(!bk(r)&&!Ak(r))return!1;return!0}return!1}(n)}function Ck(n){if(et(n instanceof tn||n instanceof Fn),n instanceof tn)return n;if(1===n.filters.length)return Ck(n.filters[0]);const e=n.filters.map(r=>Ck(r));let t=Fn.create(e,n.op);return t=KC(t),pH(t)?t:(et(t instanceof Fn),et(Bm(t)),et(t.filters.length>1),t.filters.reduce((r,i)=>Dk(r,i)))}function Dk(n,e){let t;return et(n instanceof tn||n instanceof Fn),et(e instanceof tn||e instanceof Fn),t=n instanceof tn?e instanceof tn?Fn.create([n,e],"and"):gH(n,e):e instanceof tn?gH(e,n):function(i,s){if(et(i.filters.length>0&&s.filters.length>0),Bm(i)&&Bm(s))return s6(i,s.getFilters());const o=ik(i)?i:s,a=ik(i)?s:i,u=o.filters.map(l=>Dk(l,a));return Fn.create(u,"or")}(n,e),KC(t)}function gH(n,e){if(Bm(e))return s6(e,n.getFilters());{const t=e.filters.map(r=>Dk(n,r));return Fn.create(t,"or")}}function KC(n){if(et(n instanceof tn||n instanceof Fn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return KC(e[0]);if(r6(n))return n;const t=e.map(i=>KC(i)),r=[];return t.forEach(i=>{i instanceof tn?r.push(i):i instanceof Fn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Fn.create(r,n.op)}class j_e{constructor(){this.un=new Sk}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Oo.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Sk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(en.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(en.comparator)).toArray()}}const QC=new Uint8Array(0);class z_e{constructor(e,t){this.databaseId=t,this.cn=new Sk,this.ln=new Nc(r=>lf(r),(r,i)=>uE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:ys(i)};return mH(e).put(s)}return X.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[CG(t),""],!1,!0);return mH(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Vu(o.parent))}return r})}addFieldIndex(e,t){const r=TE(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Jm(e);return s.next(a=>{o.put(aH(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=TE(e),i=Jm(e),s=Ym(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=TE(e),r=Ym(e),i=Jm(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return X.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new hH(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Ym(e);let i=!0;const s=new Map;return X.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=kt();const a=[];return X.forEach(s,(u,l)=>{var H;Ie("IndexedDbIndexManager",`Using index ${H=u,`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${lf(t)}`);const h=function(H,te){const me=YM(te);if(void 0===me)return null;for(const _e of LC(H,me.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null}(l,u),g=function(H,te){const me=new Map;for(const _e of sf(te))for(const D of LC(H,_e.fieldPath))switch(D.op){case"==":case"in":me.set(_e.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return me.set(_e.fieldPath.canonicalString(),D.value),Array.from(me.values())}return null}(l,u),v=function(H,te){const me=[];let _e=!0;for(const D of sf(te)){const b=0===D.kind?c6(H,D.fieldPath,H.startAt):l6(H,D.fieldPath,H.startAt);me.push(b.value),_e&&(_e=b.inclusive)}return new Id(me,_e)}(l,u),E=function(H,te){const me=[];let _e=!0;for(const D of sf(te)){const b=0===D.kind?l6(H,D.fieldPath,H.endAt):c6(H,D.fieldPath,H.endAt);me.push(b.value),_e&&(_e=b.inclusive)}return new Id(me,_e)}(l,u),T=this.In(u,l,v),P=this.In(u,l,E),R=this.Tn(u,l,g),z=this.En(u.indexId,h,T,v.inclusive,P,E.inclusive,R);return X.forEach(z,j=>r.G(j,t.limit).next(H=>{H.forEach(te=>{const me=Ue.fromSegments(te.documentKey);o.has(me)||(o=o.add(me),a.push(me))})}))}).next(()=>a)}return X.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:B_e(Fn.create(e.filters,"and")).map(r=>ak(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),h=[];for(let g=0;g<u;++g){const v=t?this.dn(t[g/l]):QC,E=this.An(e,v,r[g%l],i),T=this.Rn(e,v,s[g%l],o),P=a.map(R=>this.An(e,v,R,!0));h.push(...this.createRange(E,T,P))}return h}An(e,t,r,i){const s=new _f(e,Ue.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new _f(e,Ue.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new hH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return X.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Hn(_r.comparator),h=!1;for(const g of u.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?h=!0:l=l.add(v.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new wE;for(const i of sf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);mf.vt.It(s,o)}return r.zt()}dn(e){const t=new wE;return mf.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new wE;return mf.vt.It(cf(this.databaseId,t),r.Yt(function(s){const o=sf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new wE);let s=0;for(const o of sf(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&sE(a))i=this.gn(i,o,a);else{const l=u.Yt(o.kind);mf.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new wE;u.seed(a.zt()),mf.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TE(e),i=Jm(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return X.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const v=g?new Fm(g.sequenceNumber,new Oo(pf(g.readTime),new Ue(Vu(g.documentKey)),g.largestBatchId)):Fm.empty(),E=h.fields.map(([T,P])=>new af(_r.fromServerFormat(T),P));return new Vm(h.indexId,h.collectionGroup,E,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TE(e),s=Jm(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>X.forEach(a,u=>s.put(aH(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?X.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),X.forEach(a,u=>this.wn(e,i,u).next(l=>{const h=this.Sn(s,u);return l.isEqual(h)?X.resolve():this.bn(e,s,u,l,h)}))))})}Dn(e,t,r,i){return Ym(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ym(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Ym(e);let s=new Hn(wd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new _f(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Hn(wd);const i=this.Vn(t,e);if(null==i)return r;const s=YM(t);if(null!=s){const o=e.data.field(s.fieldPath);if(sE(o))for(const a of o.arrayValue.values||[])r=r.add(new _f(t.indexId,e.key,this.dn(a),i))}else r=r.add(new _f(t.indexId,e.key,QC,i));return r}bn(e,t,r,i,s){Ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,h,g,v){const E=u.getIterator(),T=l.getIterator();let P=Lm(E),R=Lm(T);for(;P||R;){let z=!1,j=!1;if(P&&R){const H=h(P,R);H<0?j=!0:H>0&&(z=!0)}else null!=P?j=!0:z=!0;z?(g(R),R=Lm(T)):j?(v(P),P=Lm(E)):(P=Lm(E),R=Lm(T))}}(i,s,wd,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),X.waitFor(o)}yn(e){let t=1;return Jm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>wd(o,a)).filter((o,a,u)=>!a||0!==wd(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=wd(o,e),u=wd(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,QC,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,QC,[]]))}return s}Cn(e,t){return wd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_H)}getMinOffset(e,t){return X.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Ke())).next(_H)}}function mH(n){return wi(n,"collectionParents")}function Ym(n){return wi(n,"indexEntries")}function TE(n){return wi(n,"indexConfiguration")}function Jm(n){return wi(n,"indexState")}function _H(n){et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;JM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Oo(e.readTime,e.documentKey,t)}const yH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Is(e,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(h,g,v)=>(a++,v.delete()));s.push(u.next(()=>{et(1===a)}));const l=[];for(const h of t.mutations){const g=VG(e,h.key.path,t.batchId);s.push(i.delete(g)),l.push(h.key)}return X.waitFor(s).next(()=>l)}function YC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ke();e=n.noDocument}return JSON.stringify(e).length}Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(41943040,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);class JC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){et(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new JC(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Td(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xm(e),o=Td(e);return o.add({}).next(a=>{et("number"==typeof a);const u=new fk(a,t,r,i),l=function(E,T,P){const R=P.baseMutations.map(j=>vE(E.ct,j)),z=P.mutations.map(j=>vE(E.ct,j));return{userId:T,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:R,mutations:z}}(this.serializer,this.userId,u),h=[];let g=new Hn((v,E)=>bt(v.canonicalString(),E.canonicalString()));for(const v of i){const E=VG(this.userId,v.key.path,a);g=g.add(v.key.path.popLast()),h.push(o.put(l)),h.push(s.put(E,Pme))}return g.forEach(v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),X.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Td(e).get(t).next(r=>r?(et(r.userId===this.userId),gf(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?X.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Td(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(et(a.batchId>=r),s=gf(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Td(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Td(e).U("userMutationsIndex",t).next(r=>r.map(i=>gf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=PC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xm(e).J({range:i},(o,a,u)=>{const[l,h,g]=o,v=Vu(h);if(l===this.userId&&t.path.isEqual(v))return Td(e).get(g).next(E=>{if(!E)throw Ke();et(E.userId===this.userId),s.push(gf(this.serializer,E))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(bt);const i=[];return t.forEach(s=>{const o=PC(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Xm(e).J({range:a},(l,h,g)=>{const[v,E,T]=l,P=Vu(E);v===this.userId&&s.path.isEqual(P)?r=r.add(T):g.done()});i.push(u)}),X.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=PC(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Hn(bt);return Xm(e).J({range:o},(u,l,h)=>{const[g,v,E]=u,T=Vu(v);g===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(E)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Td(e).get(s).next(o=>{if(null===o)throw Ke();et(o.userId===this.userId),r.push(gf(this.serializer,o))}))}),X.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return vH(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),X.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xm(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Vu(s[1]);i.push(u)}else a.done()}).next(()=>{et(0===i.length)})})}containsKey(e,t){return IH(e,this.userId,t)}Nn(e){return EH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IH(n,e,t){const r=PC(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xm(n).J({range:s,H:!0},(a,u,l)=>{const[h,g,v]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function Td(n){return wi(n,"mutations")}function Xm(n){return wi(n,"documentMutations")}function EH(n){return wi(n,"mutationQueues")}class yf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yf(0)}static kn(){return new yf(-1)}}class $_e{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new yf(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>rt.fromTimestamp(new Tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zm(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(et(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Zm(e).J((o,a)=>{const u=IE(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>X.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Zm(e).J((r,i)=>{const s=IE(i);t(s)})}qn(e){return wH(e).get("targetGlobalKey").next(t=>(et(null!==t),t))}Qn(e,t){return wH(e).put("targetGlobalKey",t)}Kn(e,t){return Zm(e).put(sH(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=lf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Zm(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=IE(a);uE(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=bd(e);return t.forEach(o=>{const a=ys(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),X.waitFor(i)}removeMatchingKeys(e,t,r){const i=bd(e);return X.forEach(t,s=>{const o=ys(s.path);return X.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=bd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bd(e);let s=kt();return i.J({range:r,H:!0},(o,a,u)=>{const l=Vu(o[1]),h=new Ue(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=ys(t.path),i=IDBKeyRange.bound([r],[CG(r)],!1,!0);let s=0;return bd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Zm(e).get(t).next(r=>r?IE(r):null)}}function Zm(n){return wi(n,"targets")}function wH(n){return wi(n,"targetGlobal")}function bd(n){return wi(n,"targetDocuments")}function TH([n,e],[t,r]){const i=bt(n,t);return 0===i?bt(e,r):i}class q_e{constructor(e){this.Un=e,this.buffer=new Hn(TH),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,M.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){pd(r)?Ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fd(r)}yield t.Hn(3e5)}))}}class G_e{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return X.resolve(Vo.oe);const r=new q_e(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(yH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yH):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Nm()<=Nu.$b.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class H_e{constructor(e,t){this.db=e,this.garbageCollector=function AH(n,e){return new G_e(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return XC(e,r)}removeReference(e,t,r){return XC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return XC(e,t)}nr(e,t){return function(i,s){let o=!1;return EH(i).Y(a=>IH(i,a,s).next(u=>(u&&(o=!0),X.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,rt.min()),bd(e).delete([0,ys(o.path)])))});i.push(u)}}).next(()=>X.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return XC(e,t)}tr(e,t){const r=bd(e);let i,s=Vo.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Vo.oe&&t(new Ue(Vu(i)),s),s=l,i=u):s=Vo.oe}).next(()=>{s!==Vo.oe&&t(new Ue(Vu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function XC(n,e){return bd(n).put((i=n.currentSequenceNumber,{targetId:0,path:ys(e.path),sequenceNumber:i}));var i}class CH{constructor(){this.changes=new Nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class W_e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return vf(e).put(r)}removeEntry(e,t,r){return vf(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],HC(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=yr.newInvalidDocument(t);return vf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bE(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return vf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bE(t))},(i,s)=>{r={document:this.ir(t,s),size:YC(s)}}).next(()=>r)}getEntries(e,t){let r=no();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=no(),i=new ur(Ue.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,YC(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return X.resolve();let i=new Hn(RH);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(bE(i.first()),bE(i.last())),o=i.getIterator();let a=o.getNext();return vf(e).J({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=Ue.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&RH(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(bE(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),HC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vf(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=no();for(const g of l){const v=this.ir(Ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(lE(t,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=no();const o=PH(t,r),a=PH(t,Oo.max());return vf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.ir(Ue.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new K_e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SH(e).get("remoteDocumentGlobalKey").next(t=>(et(!!t),t))}rr(e,t){return SH(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function k_e(n,e){let t;if(e.document)t=Y6(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),i=pf(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ke();{const r=Ue.fromSegments(e.unknownDocument.path),i=pf(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Tr(i[0],i[1]);return rt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(rt.min()))return r}return yr.newInvalidDocument(e)}}function DH(n){return new W_e(n)}class K_e extends CH{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Nc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((s,o)=>bt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=iH(this.cr.serializer,o);i=i.add(s.path.popLast());const l=YC(u);r+=l-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=iH(this.cr.serializer,o.convertToNoDocument(rt.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function SH(n){return wi(n,"remoteDocumentGlobal")}function vf(n){return wi(n,"remoteDocumentsV14")}function bE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PH(n,e){const t=e.documentKey.path.toArray();return[n,HC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=bt(t[s],r[s]),i)return i;return i=bt(t.length,r.length),i||(i=bt(t[t.length-2],r[r.length-2]),i||bt(t[t.length-1],r[r.length-1]))}class Q_e{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&pE(r.mutation,i,to.empty(),Tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=Lu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=dE();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Lu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=no();const o=hE(),a=hE();return t.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Oc)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),pE(h.mutation,l,h.mutation.getFieldMask(),Tr.now())):o.set(l.key,to.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new Q_e(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=hE();let i=new ur((o,a)=>o-a),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let h=r.get(u)||to.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||kt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=I6();h.forEach(v=>{if(!s.has(v)){const E=S6(t.get(v),r.get(v));null!==E&&g.set(v,E),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):X.resolve(Lu());let a=-1,u=s;return o.next(l=>X.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{u=u.insert(h,v)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,kt())).next(h=>({batchId:a,changes:v6(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(r=>{let i=dE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=dE();return this.indexManager.getCollectionParents(e,s).next(a=>X.forEach(a,u=>{const l=(g=t,v=u.child(s),new kc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,v;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,yr.newInvalidDocument(h)))});let a=dE();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&pE(h.mutation,l,to.empty(),Tr.now()),lE(t,l)&&(a=a.insert(u,l))}),a})}}class Y_e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Xr(i.createTime)}),X.resolve();var i}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:wk(i.bundledQuery),readTime:Xr(i.readTime)}),X.resolve();var i}}class J_e{constructor(){this.overlays=new ur(Ue.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lu();return X.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const i=Lu(),s=t.length+1,o=new Ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ur((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Lu(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Lu(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return X.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gk(t,r));let s=this.Ir.get(t);void 0===s&&(s=kt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class X_e{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class Pk{constructor(){this.Tr=new Hn(Fi.Er),this.dr=new Hn(Fi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Fi(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Fi(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ue(new en([])),r=new Fi(t,e),i=new Fi(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ue(new en([])),r=new Fi(t,e),i=new Fi(t,e+1);let s=kt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Fi(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fi{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ue.comparator(e.key,t.key)||bt(e.wr,t.wr)}static Ar(e,t){return bt(e.wr,t.wr)||Ue.comparator(e.key,t.key)}}class Z_e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Hn(Fi.Er)}checkEmpty(e){return X.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new fk(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Fi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fi(t,0),i=new Fi(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(bt);return t.forEach(i=>{const s=new Fi(i,0),o=new Fi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ue.isDocumentKey(s)||(s=s.child(""));const o=new Fi(new Ue(s),0);let a=new Hn(bt);return this.br.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),X.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){et(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return X.forEach(t.mutations,i=>{const s=new Fi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Fi(t,0),i=this.br.firstAfterOrEqual(r);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eye{constructor(e){this.Mr=e,this.docs=new ur(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yr.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=no();const o=t.path,a=new Ue(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||JM(SG(h),r)<=0||(i.has(h.key)||lE(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ke()}Or(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tye(this)}getSize(e){return X.resolve(this.size)}}class tye extends CH{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class nye{constructor(e){this.persistence=e,this.Nr=new Nc(t=>lf(t),uE),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pk,this.targetCount=0,this.kr=yf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new yf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}class Rk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vo(0),this.Kr=!1,this.Kr=!0,this.$r=new X_e,this.referenceDelegate=e(this),this.Ur=new nye(this),this.indexManager=new j_e,this.remoteDocumentCache=new eye(r=>this.referenceDelegate.Wr(r)),this.serializer=new rH(t),this.Gr=new Y_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J_e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Z_e(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new rye(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class rye extends RG{constructor(e){super(),this.currentSequenceNumber=e}}class ZC{constructor(e){this.persistence=e,this.Jr=new Pk,this.Yr=null}static Zr(e){return new ZC(e)}get Xr(){if(this.Yr)return this.Yr;throw Ke()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=Ue.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,rt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class iye{constructor(e){this.serializer=e}O(e,t,r,i){const s=new SC("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OG,{unique:!0}),u.createObjectStore("documentMutations"),MH(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=X.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),MH(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rt.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OG,{unique:!0});const g=l.store("mutations"),v=h.map(E=>g.put(E));return X.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:jme});l.createIndex("collectionPathOverlayIndex",zme,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",$me,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:Rme});l.createIndex("documentKeyIndex",xme),l.createIndex("collectionGroupIndex",Mme)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Fme}).createIndex("sequenceNumberIndex",Lme,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Ume}).createIndex("documentKeyIndex",Bme,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=YC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>X.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>X.forEach(a,u=>{et(u.userId===s.userId);const l=gf(this.serializer,u);return vH(e,s.userId,l).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new en(o),l=[0,ys(u)];s.push(t.get(l).next(h=>h?X.resolve():t.put({targetId:0,path:ys(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>X.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Vme});const r=t.store("collectionParents"),i=new Sk,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:ys(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new en(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{const h=Vu(a);return s(h.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=IE(i),o=sH(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(g=o,g.document?new Ue(en.fromString(g.document.name).popFirst(5)):g.noDocument?Ue.fromSegments(g.noDocument.path):g.unknownDocument?Ue.fromSegments(g.unknownDocument.path):Ke()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>X.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=DH(this.serializer),s=new Rk(ZC.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:kt();gf(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),X.forEach(a,(u,l)=>{const h=new Oi(l),g=WC.lt(this.serializer,h),v=s.getIndexManager(h),E=JC.lt(h,this.serializer,v,s.referenceDelegate);return new xH(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new tk(t,Vo.oe),u).next()})})}}function MH(n){n.createObjectStore("targetDocuments",{keyPath:Nme}).createIndex("documentTargetsIndex",Ome,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kme,{unique:!0}),n.createObjectStore("targetGlobal")}const xk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mk{constructor(e,t,r,i,s,o,a,u,l,h,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!Mk.D())throw new ve(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H_e(this,i),this.Ai=t+"main",this.serializer=new rH(u),this.Ri=new Ou(this.Ai,this.hi,new iye(this.serializer)),this.$r=new O_e,this.Ur=new $_e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DH(this.serializer),this.Gr=new N_e,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===h&&Jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,xk);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Vo(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,M.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,M.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,M.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(pd(e))return Ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return AE(e).get("owner").next(t=>X.resolve(this.vi(t)))}Ci(e){return tD(e).delete(this.clientId)}Fi(){var e=this;return(0,M.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=wi(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return X.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?X.resolve(!0):AE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,xk);return!1}}return!(!this.networkEnabled||!this.inForeground)||tD(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,M.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tk(t,Vo.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>tD(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return JC.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z_e(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return WC.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ie("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?Hme:16===u?Gme:15===u?ek:14===u?UG:13===u?LG:12===u?qme:11===u?FG:void Ke();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new tk(a,this.Qr?this.Qr.next():Vo.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ae.FAILED_PRECONDITION,PG);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return AE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ae.FAILED_PRECONDITION,xk)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return AE(e).put("owner",t)}static D(){return Ou.D()}bi(e){const t=AE(e);return t.get("owner").next(r=>this.vi(r)?(Ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):X.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,xn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Jr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function AE(n){return wi(n,"owner")}function tD(n){return wi(n,"clientMetadata")}function kk(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Nk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=kt(),i=kt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Nk(e,t.fromCache,r,i)}}class sye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kH{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,xn.nr)()?8:xG((0,xn.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new sye;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Nm()<=Nu.$b.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",$m(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Nm()<=Nu.$b.DEBUG&&Ie("QueryEngine","Query:",$m(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nm()<=Nu.$b.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",$m(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(t))):X.resolve())}Yi(e,t){if(h6(t))return X.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=UC(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=kt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,UC(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return h6(t)||i.isEqual(rt.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?X.resolve(null):(Nm()<=Nu.$b.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$m(t)),this.rs(e,o,t,DG(i,-1)).next(a=>a))})}ts(e,t){let r=new Hn(_6(e));return t.forEach((i,s)=>{lE(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Nm()<=Nu.$b.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",$m(t)),this.Ji.getDocumentsMatchingQuery(e,t,Oo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class oye{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ur(bt),this._s=new Nc(s=>lf(s),uE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function NH(n,e,t,r){return new oye(n,e,t,r)}function OH(n,e){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,M.A)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=kt();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function VH(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FH(n,e,t){let r=kt(),i=kt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=no();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(rt.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function cye(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function e_(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Vc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function t_(n,e,t){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,M.A)(function*(n,e,t){const r=Ve(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pd(o))throw o;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function nD(n,e,t){const r=Ve(n);let i=rt.min(),s=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=Ve(u),v=g._s.get(h);return void 0!==v?X.resolve(g.os.get(v)):g.Ur.getTargetData(l,h)}(r,o,vs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:rt.min(),t?s:kt())).next(a=>(BH(r,m6(e),a),{documents:a,Ts:s})))}function LH(n,e){const t=Ve(n),r=Ve(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function UH(n,e){const t=Ve(n),r=t.us.get(e)||rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,DG(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(BH(t,e,i),i))}function BH(n,e,t){let r=n.us.get(e)||rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function Fk(){return(Fk=(0,M.A)(function*(n,e,t,r){const i=Ve(n);let s=kt(),o=no();for(const l of t){const h=e.Es(l.metadata.name);l.document&&(s=s.add(h));const g=e.ds(l);g.setReadTime(e.As(l.metadata.readTime)),o=o.insert(h,g)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield e_(i,(h=r,vs(jm(en.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>FH(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})).apply(this,arguments)}function dye(n,e){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,M.A)(function*(n,e,t=kt()){const r=yield e_(n,vs(wk(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Xr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Fr.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function jH(n,e){return`firestore_clients_${n}_${e}`}function zH(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uk(n,e){return`firestore_targets_${n}_${e}`}class rD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ve(i.error.code,i.error.message))),o?new rD(e,t,i.state,s):(Jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ve(r.error.code,r.error.message))),s?new CE(e,r.state,i):(Jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=lk();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=kG(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new iD(e,s):(Jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Bk{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Bk(t.clientId,t.onlineState):(Jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jk{constructor(){this.activeTargetIds=lk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zk{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ur(bt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=jH(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new jk),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,M.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(jH(e.persistenceKey,i));if(s){const o=iD.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Uk(this.persistenceKey,e));if(i){const s=CE.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uk(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ie("SharedClientState","READ",e,t),t}setItem(e,t){Ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,M.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Vo.oe;if(null!=o)try{const u=JSON.parse(o);et("number"==typeof u),a=u}catch(u){Jr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Vo.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new rD(this.currentUser,e,t,r),s=zH(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=zH(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=Uk(this.persistenceKey,e),s=new CE(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return iD.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return rD.Rs(new Oi(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return CE.Rs(i,t)}Ls(e){return Bk.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,M.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=lk();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $H{constructor(){this.so=new jk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hye{_o(e){}shutdown(){}}class qH{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sD=null;function $k(){return null===sD?sD=268435456+Math.round(2147483648*Math.random()):sD++,"0x"+sD.toString(16)}const fye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pye{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Es="WebChannelConnection";class gye extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=$k(),u=this.xo(t,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>(Ie("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw No("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+km,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${fye[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=$k();return new Promise((o,a)=>{const u=new _G;u.setWithCredentials(!0),u.listenOnce(yG.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case DC.NO_ERROR:const h=u.getResponseJson();Ie(Es,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case DC.TIMEOUT:Ie(Es,`RPC '${e}' ${s} timed out`),a(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case DC.HTTP_ERROR:const g=u.getStatus();if(Ie(Es,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v?.error;if(E&&E.status&&E.message){const T=function(R){const z=R.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(z)>=0?z:ae.UNKNOWN}(E.status);a(new ve(T,E.message))}else a(new ve(ae.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Ie(Es,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ie(Es,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){const i=$k(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EG(),a=IG(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Ie(Es,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let v=!1,E=!1;const T=new pye({Io:R=>{E?Ie(Es,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(Ie(Es,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Ie(Es,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),P=(R,z,j)=>{R.listen(z,H=>{try{j(H)}catch(te){setTimeout(()=>{throw te},0)}})};return P(g,XI.EventType.OPEN,()=>{E||(Ie(Es,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),P(g,XI.EventType.CLOSE,()=>{E||(E=!0,Ie(Es,`RPC '${e}' stream ${i} transport closed`),T.So())}),P(g,XI.EventType.ERROR,R=>{E||(E=!0,No(Es,`RPC '${e}' stream ${i} transport errored:`,R),T.So(new ve(ae.UNAVAILABLE,"The operation could not be completed")))}),P(g,XI.EventType.MESSAGE,R=>{var z;if(!E){const j=R.data[0];et(!!j);const te=j.error||(null===(z=j[0])||void 0===z?void 0:z.error);if(te){Ie(Es,`RPC '${e}' stream ${i} received error:`,te);const me=te.status;let _e=function(C){const x=ci[C];if(void 0!==x)return O6(x)}(me),D=te.message;void 0===_e&&(_e=ae.INTERNAL,D="Unknown error status: "+me+" with message "+te.message),E=!0,T.So(new ve(_e,D)),g.close()}else Ie(Es,`RPC '${e}' stream ${i} received:`,j),T.bo(j)}}),P(a,vG.STAT_EVENT,R=>{R.stat===KM.PROXY?Ie(Es,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===KM.NOPROXY&&Ie(Es,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function GH(){return typeof window<"u"?window:null}function oD(){return typeof document<"u"?document:null}function DE(n){return new T_e(n,!0)}class qk{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class HH{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qk(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,M.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,M.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,M.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,M.A)(function*(){e.state=0,e.start()}))}I_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mye extends HH{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function C_e(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ke(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(et(void 0===h||"string"==typeof h),Fr.fromBase64String(h||"")):(et(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Fr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ae.UNKNOWN:O6(l.code);return new ve(h,l.message||"")}(o);t=new B6(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Uu(n,r.document.name),s=Xr(r.document.updateTime),o=r.document.createTime?Xr(r.document.createTime):rt.min(),a=new Zi({mapValue:{fields:r.document.fields}}),u=yr.newFoundDocument(i,s,o,a);t=new qC(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Uu(n,r.document),s=r.readTime?Xr(r.readTime):rt.min(),o=yr.newNoDocument(i,s);t=new qC([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Uu(n,r.document);t=new qC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new __e(i,s);t=new U6(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return rt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?rt.min():o.readTime?Xr(o.readTime):rt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Ik(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=FC(u)?{documents:J6(s,u)}:{query:GC(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=q6(s,o.resumeToken);const l=_k(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(rt.min())>0){a.readTime=Km(s,o.snapshotVersion.toTimestamp());const l=_k(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function S_e(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Ik(this.serializer),t.removeTarget=e,this.a_(t)}}class _ye extends HH{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function D_e(n,e){return n&&n.length>0?(et(void 0!==e),n.map(t=>function(i,s){let o=Xr(i.updateTime?i.updateTime:s);return o.isEqual(rt.min())&&(o=Xr(s)),new p_e(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Ik(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vE(this.serializer,r))};this.a_(t)}}class yye extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,vk(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ae.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,vk(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vye{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jr(t),this.D_=!1):Ie("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Iye{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,M.A)(function*(){var u;Ad(o)&&(Ie("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,M.A)(function*(h){const g=Ve(h);g.L_.add(4),yield n_(g),g.q_.set("Unknown"),g.L_.delete(4),yield SE(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.q_=new vye(r,i)}}function SE(n){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,M.A)(function*(n){if(Ad(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function n_(n){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,M.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function aD(n,e){const t=Ve(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qk(t)?Kk(t):s_(t).r_()&&Wk(t,e))}function r_(n,e){const t=Ve(n),r=s_(t);t.N_.delete(e),r.r_()&&WH(t,e),0===t.N_.size&&(r.r_()?r.o_():Ad(t)&&t.q_.set("Unknown"))}function Wk(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}s_(n).A_(e)}function WH(n,e){n.Q_.xe(e),s_(n).R_(e)}function Kk(n){n.Q_=new v_e({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),s_(n).start(),n.q_.v_()}function Qk(n){return Ad(n)&&!s_(n).n_()&&n.N_.size>0}function Ad(n){return 0===Ve(n).L_.size}function KH(n){n.Q_=void 0}function Eye(n){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,M.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function wye(n){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,M.A)(function*(n){n.N_.forEach((e,t)=>{Wk(n,e)})})).apply(this,arguments)}function Tye(n,e){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,M.A)(function*(n,e){KH(n),Qk(n)?(n.q_.M_(e),Kk(n)):n.q_.set("Unknown")})).apply(this,arguments)}function bye(n,e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,M.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof B6&&2===e.state&&e.cause)try{yield(r=(0,M.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uD(n,r)}else if(e instanceof qC?n.Q_.Ke(e):e instanceof U6?n.Q_.He(e):n.Q_.We(e),!t.isEqual(rt.min()))try{const r=yield VH(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Fr.EMPTY_BYTE_STRING,h.snapshotVersion)),WH(s,u);const g=new Vc(h.target,u,l,h.sequenceNumber);Wk(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),yield uD(n,r)}var r}),Zk.apply(this,arguments)}function uD(n,e,t){return eN.apply(this,arguments)}function eN(){return(eN=(0,M.A)(function*(n,e,t){if(!pd(e))throw e;n.L_.add(1),yield n_(n),n.q_.set("Offline"),t||(t=()=>VH(n.localStore)),n.asyncQueue.enqueueRetryable((0,M.A)(function*(){Ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield SE(n)}))})).apply(this,arguments)}function QH(n,e){return e().catch(t=>uD(n,t,e))}function i_(n){return tN.apply(this,arguments)}function tN(){return(tN=(0,M.A)(function*(n){const e=Ve(n),t=Cd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Aye(e);)try{const i=yield cye(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,Cye(e,i)}catch(i){yield uD(e,i)}YH(e)&&JH(e)})).apply(this,arguments)}function Aye(n){return Ad(n)&&n.O_.length<10}function Cye(n,e){n.O_.push(e);const t=Cd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function YH(n){return Ad(n)&&!Cd(n).n_()&&n.O_.length>0}function JH(n){Cd(n).start()}function Dye(n){return nN.apply(this,arguments)}function nN(){return(nN=(0,M.A)(function*(n){Cd(n).p_()})).apply(this,arguments)}function Sye(n){return rN.apply(this,arguments)}function rN(){return(rN=(0,M.A)(function*(n){const e=Cd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Pye(n,e,t){return iN.apply(this,arguments)}function iN(){return(iN=(0,M.A)(function*(n,e,t){const r=n.O_.shift(),i=pk.from(r,e,t);yield QH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield i_(n)})).apply(this,arguments)}function Rye(n,e){return sN.apply(this,arguments)}function sN(){return sN=(0,M.A)(function*(n,e){var t;e&&Cd(n).V_&&(yield(t=(0,M.A)(function*(i,s){if(N6(a=s.code)&&a!==ae.ABORTED){const o=i.O_.shift();Cd(i).s_(),yield QH(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield i_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),YH(n)&&JH(n)}),sN.apply(this,arguments)}function XH(n,e){return oN.apply(this,arguments)}function oN(){return(oN=(0,M.A)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=Ad(t);t.L_.add(3),yield n_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield SE(t)})).apply(this,arguments)}function aN(n,e){return uN.apply(this,arguments)}function uN(){return(uN=(0,M.A)(function*(n,e){const t=Ve(n);e?(t.L_.delete(2),yield SE(t)):e||(t.L_.add(2),yield n_(t),t.q_.set("Unknown"))})).apply(this,arguments)}function s_(n){return n.K_||(n.K_=function(t,r,i){const s=Ve(t);return s.w_(),new mye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Eye.bind(null,n),Ro:wye.bind(null,n),mo:Tye.bind(null,n),d_:bye.bind(null,n)}),n.B_.push(function(){var e=(0,M.A)(function*(t){t?(n.K_.s_(),Qk(n)?Kk(n):n.q_.set("Unknown")):(yield n.K_.stop(),KH(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Cd(n){return n.U_||(n.U_=function(t,r,i){const s=Ve(t);return s.w_(),new _ye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Dye.bind(null,n),mo:Rye.bind(null,n),f_:Sye.bind(null,n),g_:Pye.bind(null,n)}),n.B_.push(function(){var e=(0,M.A)(function*(t){t?(n.U_.s_(),yield i_(n)):(yield n.U_.stop(),n.O_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class cN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new cN(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(n,e){if(Jr("AsyncQueue",`${e}: ${n}`),pd(n))return new ve(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class a_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=dE(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new a_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof a_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new a_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZH{constructor(){this.W_=new ur(Ue.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ke():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class u_{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new u_(e,t,a_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xye{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mye{constructor(){this.queries=eW(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ve(t),s=i.queries;i.queries=eW(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function eW(){return new Nc(n=>g6(n),cE)}function lN(n,e){return dN.apply(this,arguments)}function dN(){return(dN=(0,M.A)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xye,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=o_(o,`Initialization of query '${$m(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&pN(t)})).apply(this,arguments)}function hN(n,e){return fN.apply(this,arguments)}function fN(){return(fN=(0,M.A)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function kye(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&pN(t)}function Nye(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function pN(n){n.Y_.forEach(e=>{e.next()})}var gN,tW;(tW=gN||(gN={})).ea="default",tW.Cache="cache";class mN{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new u_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=u_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gN.Cache}}class Oye{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class nW{constructor(e){this.serializer=e}Es(e){return Uu(this.serializer,e)}ds(e){return e.metadata.exists?Y6(this.serializer,e.document,!1):yr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xr(e)}}class Vye{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rW(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=en.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new nW(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||kt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,M.A)(function*(){const t=yield function lye(n,e,t,r){return Fk.apply(this,arguments)}(e.localStore,new nW(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield dye(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function rW(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class iW{constructor(e){this.key=e}}class sW{constructor(e){this.key=e}}class oW{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kt(),this.mutatedKeys=kt(),this.Aa=_6(e),this.Ra=new a_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new ZH,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const v=i.get(h),E=lE(this.query,g)?g:null,T=!!v&&this.mutatedKeys.has(v.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;v&&E?v.data.isEqual(E.data)?T!==P&&(r.track({type:3,doc:E}),R=!0):this.ga(v,E)||(r.track({type:2,doc:E}),R=!0,(u&&this.Aa(E,u)>0||l&&this.Aa(E,l)<0)&&(a=!0)):!v&&E?(r.track({type:0,doc:E}),R=!0):v&&!E&&(r.track({type:1,doc:v}),R=!0,(u||l)&&(a=!0)),R&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(E,T){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return P(E)-P(T)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,0!==o.length||l?{snapshot:new u_(this.query,e.Ra,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ZH,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new sW(r))}),this.da.forEach(r=>{e.has(r)||t.push(new iW(r))}),t}ba(e){this.Ta=e.Ts,this.da=kt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return u_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Fye{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Lye{constructor(e){this.key=e,this.va=!1}}class Uye{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nc(a=>g6(a),cE),this.Ma=new Map,this.xa=new Set,this.Oa=new ur(Ue.comparator),this.Na=new Map,this.La=new Pk,this.Ba={},this.ka=new Map,this.qa=yf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Bye(n,e){return _N.apply(this,arguments)}function _N(){return(_N=(0,M.A)(function*(n,e,t=!0){const r=cD(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield aW(r,e,t,!0),i})).apply(this,arguments)}function jye(n,e){return yN.apply(this,arguments)}function yN(){return(yN=(0,M.A)(function*(n,e){const t=cD(n);yield aW(t,e,!0,!1)})).apply(this,arguments)}function aW(n,e,t,r){return vN.apply(this,arguments)}function vN(){return(vN=(0,M.A)(function*(n,e,t,r){const i=yield e_(n.localStore,vs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield IN(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&aD(n.remoteStore,i),a})).apply(this,arguments)}function IN(n,e,t,r,i){return EN.apply(this,arguments)}function EN(){return EN=(0,M.A)(function*(n,e,t,r,i){n.Ka=(g,v,E)=>{return(T=(0,M.A)(function*(R,z,j,H){let te=z.view.ma(j);te.ns&&(te=yield nD(R.localStore,z.query,!1).then(({documents:b})=>z.view.ma(b,te)));const me=H&&H.targetChanges.get(z.targetId),_e=H&&null!=H.targetMismatches.get(z.targetId),D=z.view.applyChanges(te,R.isPrimaryClient,me,_e);return MN(R,z.targetId,D.wa),D.snapshot}),function P(R,z,j,H){return T.apply(this,arguments)})(n,g,v,E);var T};const s=yield nD(n.localStore,e,!0),o=new oW(e,s.Ts),a=o.ma(s.documents),u=_E.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);MN(n,t,l.wa);const h=new Fye(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot}),EN.apply(this,arguments)}function zye(n,e,t){return wN.apply(this,arguments)}function wN(){return(wN=(0,M.A)(function*(n,e,t){const r=Ve(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!cE(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield t_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&r_(r.remoteStore,i.targetId),c_(r,i.targetId)}).catch(fd))):(c_(r,i.targetId),yield t_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function $ye(n,e){return TN.apply(this,arguments)}function TN(){return(TN=(0,M.A)(function*(n,e){const t=Ve(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),r_(t.remoteStore,r.targetId))})).apply(this,arguments)}function bN(){return(bN=(0,M.A)(function*(n,e,t){const r=$N(n);try{const i=yield function(o,a){const u=Ve(o),l=Tr.now(),h=a.reduce((E,T)=>E.add(T.key),kt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=no(),P=kt();return u.cs.getEntries(E,h).next(R=>{T=R,T.forEach((z,j)=>{j.isValidDocument()||(P=P.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,T)).next(R=>{g=R;const z=[];for(const j of a){const H=m_e(j,g.get(j.key).overlayedDocument);null!=H&&z.push(new Oc(j.key,H,ZG(H.value.mapValue),Ar.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,z,a)}).next(R=>{v=R;const z=R.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(E,R.batchId,z)})}).then(()=>({batchId:v.batchId,changes:v6(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new ur(bt)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Fc(r,i.changes),yield i_(r.remoteStore)}catch(i){const s=o_(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function uW(n,e){return AN.apply(this,arguments)}function AN(){return(AN=(0,M.A)(function*(n,e){const t=Ve(n);try{const r=yield function uye(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,g)=>{const v=i.get(g);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,g)));let E=v.withSequenceNumber(s.currentSequenceNumber);var P,R,z;null!==e.targetMismatches.get(g)?E=E.withResumeToken(Fr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),R=E,z=h,(0===(P=v).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,E))});let u=no(),l=kt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(FH(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(rt.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return X.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?et(o.va):i.removedDocuments.size>0&&(et(o.va),o.va=!1))}),yield Fc(t,r,e)}catch(r){yield fd(r)}})).apply(this,arguments)}function cW(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ve(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const v of g.j_)v.Z_(a)&&(l=!0)}),l&&pN(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gye(n,e,t){return CN.apply(this,arguments)}function CN(){return(CN=(0,M.A)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ur(Ue.comparator);o=o.insert(s,yr.newNoDocument(s,rt.min()));const a=kt().add(s),u=new mE(rt.min(),new Map,new ur(bt),o,a);yield uW(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),kN(r)}else yield t_(r.localStore,e,!1).then(()=>c_(r,e,t)).catch(fd)})).apply(this,arguments)}function Hye(n,e){return DN.apply(this,arguments)}function DN(){return(DN=(0,M.A)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function aye(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,v=g.keys();let E=X.resolve();return v.forEach(T=>{E=E.next(()=>h.getEntry(u,T)).next(P=>{const R=l.docVersions.get(T);et(null!==R),P.version.compareTo(R)<0&&(g.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=kt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);xN(t,r,null),RN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield fd(i)}})).apply(this,arguments)}function Wye(n,e,t){return SN.apply(this,arguments)}function SN(){return(SN=(0,M.A)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const u=Ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(et(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);xN(r,e,t),RN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield fd(i)}})).apply(this,arguments)}function PN(){return(PN=(0,M.A)(function*(n,e){const t=Ve(n);Ad(t.remoteStore)||Ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ve(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=o_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function RN(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function xN(n,e,t){const r=Ve(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function c_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||lW(n,r)})}function lW(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(r_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),kN(n))}function MN(n,e,t){for(const r of t)r instanceof iW?(n.La.addReference(r.key,e),Qye(n,r)):r instanceof sW?(Ie("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||lW(n,r.key)):Ke()}function Qye(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ie("SyncEngine","New document in limbo: "+t),n.xa.add(r),kN(n))}function kN(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ue(en.fromString(e)),r=n.qa.next();n.Na.set(r,new Lye(t)),n.Oa=n.Oa.insert(t,r),aD(n.remoteStore,new Vc(vs(jm(t.path)),r,"TargetPurposeLimboResolution",Vo.oe))}}function Fc(n,e,t){return NN.apply(this,arguments)}function NN(){return NN=(0,M.A)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(u.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(l){i.push(l);const g=Nk.Wi(u.targetId,l);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,M.A)(function*(l,h){const g=Ve(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>X.forEach(h,E=>X.forEach(E.$i,T=>g.persistence.referenceDelegate.addReference(v,E.targetId,T)).next(()=>X.forEach(E.Ui,T=>g.persistence.referenceDelegate.removeReference(v,E.targetId,T)))))}catch(v){if(!pd(v))throw v;Ie("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const T=g.os.get(E),R=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);g.os=g.os.insert(E,R)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),NN.apply(this,arguments)}function Yye(n,e){return ON.apply(this,arguments)}function ON(){return(ON=(0,M.A)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=yield OH(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ve(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.hs)}var s})).apply(this,arguments)}function Jye(n,e){const t=Ve(n),r=t.Na.get(e);if(r&&r.va)return kt().add(r.key);{let i=kt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Xye(n,e){return VN.apply(this,arguments)}function VN(){return(VN=(0,M.A)(function*(n,e){const t=Ve(n),r=yield nD(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&MN(t,e.targetId,i.wa),i})).apply(this,arguments)}function Zye(n,e){return FN.apply(this,arguments)}function FN(){return(FN=(0,M.A)(function*(n,e){const t=Ve(n);return UH(t.localStore,e).then(r=>Fc(t,r))})).apply(this,arguments)}function eve(n,e,t,r){return LN.apply(this,arguments)}function LN(){return(LN=(0,M.A)(function*(n,e,t,r){const i=Ve(n),s=yield function(a,u){const l=Ve(a),h=Ve(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Mn(g,u).next(v=>v?l.localDocuments.getDocuments(g,v):X.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield i_(i.remoteStore):"acknowledged"===t||"rejected"===t?(xN(i,e,r||null),RN(i,e),u=e,Ve(Ve(i.localStore).mutationQueue).On(u)):Ke(),yield Fc(i,s)):Ie("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function UN(){return(UN=(0,M.A)(function*(n,e){const t=Ve(n);if(cD(t),$N(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dW(t,r.toArray());t.Qa=!0,yield aN(t.remoteStore,!0);for(const s of i)aD(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(c_(t,o),t_(t.localStore,o,!0))),r_(t.remoteStore,o)}),yield i,yield dW(t,r),function(o){const a=Ve(o);a.Na.forEach((u,l)=>{r_(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ur(Ue.comparator)}(t),t.Qa=!1,yield aN(t.remoteStore,!1)}})).apply(this,arguments)}function dW(n,e,t){return BN.apply(this,arguments)}function BN(){return(BN=(0,M.A)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield e_(r.localStore,vs(u[0]));for(const l of u){const h=r.Fa.get(l),g=yield Xye(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield LH(r.localStore,o);a=yield e_(r.localStore,l),yield IN(r,hW(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function hW(n){return d6(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nve(n){return t=Ve(n).localStore,Ve(Ve(t).persistence).Qi();var t}function rve(n,e,t,r){return jN.apply(this,arguments)}function jN(){return(jN=(0,M.A)(function*(n,e,t,r){const i=Ve(n);if(i.Qa)return void Ie("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield UH(i.localStore,m6(s[0])),a=mE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fr.EMPTY_BYTE_STRING);yield Fc(i,o,a);break}case"rejected":yield t_(i.localStore,e,!0),c_(i,e,r);break;default:Ke()}})).apply(this,arguments)}function ive(n,e,t){return zN.apply(this,arguments)}function zN(){return(zN=(0,M.A)(function*(n,e,t){const r=cD(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ie("SyncEngine","Adding an already active target "+i);continue}const s=yield LH(r.localStore,i),o=yield e_(r.localStore,s);yield IN(r,hW(s),o.targetId,!1,o.resumeToken),aD(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield t_(r.localStore,i,!1).then(()=>{r_(r.remoteStore,i),c_(r,i)}).catch(fd))}})).apply(this,arguments)}function cD(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gye.bind(null,e),e.Ca.d_=kye.bind(null,e.eventManager),e.Ca.$a=Nye.bind(null,e.eventManager),e}function $N(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wye.bind(null,e),e}let l_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,M.A)(function*(){r.serializer=DE(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return NH(this.persistence,new kH,t.initialUser,this.serializer)}Ga(t){return new Rk(ZC.Zr,this.serializer)}Wa(t){return new $H}terminate(){var t=this;return(0,M.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class qN extends l_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,M.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield $N(r.Ja.syncEngine),yield i_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return NH(this.persistence,new kH,e.initialUser,this.serializer)}ja(e,t){return new bH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new Dme(t,this.persistence);return new Cme(e.asyncQueue,r)}Ga(e){const t=kk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new Mk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GH(),oD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $H}}class fW extends qN{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,M.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof zk&&(r.sharedClientState.syncEngine={no:eve.bind(null,i),ro:rve.bind(null,i),io:ive.bind(null,i),Qi:nve.bind(null,i),eo:Zye.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,M.A)(function*(o){yield function tve(n,e){return UN.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=GH();if(!zk.D(t))throw new ve(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let d_=(()=>{class n{initialize(t,r){var i=this;return(0,M.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>cW(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=Yye.bind(null,i.syncEngine),yield aN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Mye}createDatastore(t){const r=DE(t.databaseInfo.databaseId),i=new gye(t.databaseInfo);return new yye(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>cW(this.syncEngine,r,0),u=qH.D()?new qH:new hye,new Iye(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,l,h,g){const v=new Uye(s,o,a,u,l,h);return g&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,M.A)(function*(){var r,i,s;yield(s=(0,M.A)(function*(a){const u=Ve(a);Ie("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield n_(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function pW(n,e=10240){let t=0;return{read:()=>(0,M.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,M.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ave{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Vi,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,M.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,M.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,M.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new Oye(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,M.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,M.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,M.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class uve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,M.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ve(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,M.A)(function*(o,a){const u=Ve(o),l={documents:a.map(E=>yE(u.serializer,E))},h=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,en.emptyPath(),l,a.length),g=new Map;h.forEach(E=>{const T=function A_e(n,e){return"found"in e?function(r,i){et(!!i.found);const s=Uu(r,i.found.name),o=Xr(i.found.updateTime),a=i.found.createTime?Xr(i.found.createTime):rt.min(),u=new Zi({mapValue:{fields:i.found.fields}});return yr.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){et(!!i.missing),et(!!i.readTime);const s=Uu(r,i.missing),o=Xr(i.readTime);return yr.newNoDocument(s,o)}(n,e):Ke()}(u.serializer,E);g.set(T.key.toString(),T)});const v=[];return a.forEach(E=>{const T=g.get(E.toString());et(!!T),v.push(T)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,M.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ue.fromPath(i);e.mutations.push(new hk(s,e.precondition(s)))}),yield(r=(0,M.A)(function*(s,o){const a=Ve(s),u={writes:o.map(l=>vE(a.serializer,l))};yield a.Mo("Commit",a.serializer.databaseId,en.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ke();t=rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ve(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rt.min())?Ar.exists(!1):Ar.updateTime(t):Ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rt.min()))throw new ve(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(t)}return Ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cve{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new qk(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,M.A)(function*(){const t=new uve(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!tE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!N6(t)}return!1}}class lve{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Oi.UNAUTHENTICATED,this.clientId=AG.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,M.A)(function*(u){Ie("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ie("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=o_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function GN(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,M.A)(function*(s){r.isEqual(s)||(yield OH(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),HN.apply(this,arguments)}function gW(n,e){return WN.apply(this,arguments)}function WN(){return(WN=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KN(n);Ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XH(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XH(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function KN(n){return QN.apply(this,arguments)}function QN(){return(QN=(0,M.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield GN(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;No("Error using user provided cache. Falling back to memory cache: "+e),yield GN(n,new l_)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),yield GN(n,new l_);var i;return n._offlineComponents})).apply(this,arguments)}function dD(n){return YN.apply(this,arguments)}function YN(){return(YN=(0,M.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield gW(n,n._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),yield gW(n,new d_))),n._onlineComponents})).apply(this,arguments)}function mW(n){return KN(n).then(e=>e.persistence)}function h_(n){return KN(n).then(e=>e.localStore)}function _W(n){return dD(n).then(e=>e.remoteStore)}function JN(n){return dD(n).then(e=>e.syncEngine)}function f_(n){return XN.apply(this,arguments)}function XN(){return(XN=(0,M.A)(function*(n){const e=yield dD(n),t=e.eventManager;return t.onListen=Bye.bind(null,e.syncEngine),t.onUnlisten=zye.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jye.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$ye.bind(null,e.syncEngine),t})).apply(this,arguments)}function vW(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new lD({next:v=>{h.Za(),o.enqueueAndForget(()=>hN(s,g));const E=v.docs.has(a);!E&&v.fromCache?l.reject(new ve(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&u&&"server"===u.source?l.reject(new ve(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new mN(jm(a.path),h,{includeMetadataChanges:!0,_a:!0});return lN(s,g)}(yield f_(n),n.asyncQueue,e,t,r)})),r.promise}function IW(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new lD({next:v=>{h.Za(),o.enqueueAndForget(()=>hN(s,g)),v.fromCache&&"server"===u.source?l.reject(new ve(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new mN(a,h,{includeMetadataChanges:!0,_a:!0});return lN(s,g)}(yield f_(n),n.asyncQueue,e,t,r)})),r.promise}function EW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const wW=new Map;function ZN(n,e,t){if(!t)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TW(n,e,t,r){if(!0===e&&!0===r)throw new ve(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bW(n){if(!Ue.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AW(n){if(Ue.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ke()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hD(n);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CW(n,e){if(e<=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class DW{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=EW(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class PE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DW({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DW(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new pme;switch(r.type){case"firstParty":return new yme(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,M.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=wW.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),wW.delete(t),r.terminate())}(this),Promise.resolve()}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class Bu extends es{constructor(e,t,r){super(e,t,jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Ue(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function PW(n,e,...t){if(n=(0,xn.Ku)(n),ZN("collection","path",e),n instanceof PE){const r=en.fromString(e,...t);return AW(r),new Bu(n,null,r)}{if(!(n instanceof vr||n instanceof Bu))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return AW(r),new Bu(n.firestore,null,r)}}function fD(n,e,...t){if(n=(0,xn.Ku)(n),1===arguments.length&&(e=AG.newId()),ZN("doc","path",e),n instanceof PE){const r=en.fromString(e,...t);return bW(r),new vr(n,null,new Ue(r))}{if(!(n instanceof vr||n instanceof Bu))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return bW(r),new vr(n.firestore,n instanceof Bu?n.converter:null,new Ue(r))}}function RW(n,e){return n=(0,xn.Ku)(n),e=(0,xn.Ku)(e),(n instanceof vr||n instanceof Bu)&&(e instanceof vr||e instanceof Bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eO(n,e){return n=(0,xn.Ku)(n),e=(0,xn.Ku)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&cE(n._query,e._query)&&n.converter===e.converter}class xW{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qk(this,"async_queue_retry"),this.Vu=()=>{const r=oD();r&&Ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=oD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=oD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Vi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,M.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!pd(t))throw t;Ie("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Jr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=cN.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ke()}verifyOperationInProgress(){}wu(){var e=this;return(0,M.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function tO(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Tve{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends PE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,M.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new xW(t),e._firestoreClient=void 0,yield t}})()}}function Cr(n){if(n._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MW(n),n._firestoreClient}function MW(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qme(n._databaseId,u,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,EW(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lve(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function nO(){return(nO=(0,M.A)(function*(n){No("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();kW(n,d_.provider,{build:t=>new fW(t,e.cacheSizeBytes)})})).apply(this,arguments)}function kW(n,e,t){if((n=Ht(n,Xn))._firestoreClient||n._terminated)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ve(ae.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},MW(n)}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(Fr.fromBase64String(e))}catch(t){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ju(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class If{constructor(e){this._methodName=e}}class pD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}class gD{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const Nve=/^__.*__$/;class Ove{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hm(e,this.data,t,this.fieldTransforms)}}class NW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class mD{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vD(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(OW(this.Cu)&&Nve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vve{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||DE(e)}Qu(e,t,r,i=!1){return new mD({Cu:e,methodName:t,qu:r,path:_r.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(n){const e=n._freezeSettings(),t=DE(n._databaseId);return new Vve(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _D(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);cO("Data must be an object, but it was:",o,r);const a=LW(r,o);let u,l;if(s.merge)u=new to(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const v=ME(e,g,t);if(!o.contains(v))throw new ve(ae.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);BW(h,v)||h.push(v)}u=new to(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new Ove(new Zi(a),u,l)}class xE extends If{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xE}}function VW(n,e,t){return new mD({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rO extends If{_toFieldTransform(e){return new fE(e.path,new qm)}isEqual(e){return e instanceof rO}}class iO extends If{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=VW(this,e,!0),r=this.Ku.map(s=>wf(s,t)),i=new df(r);return new fE(e.path,i)}isEqual(e){return e instanceof iO&&(0,xn.bD)(this.Ku,e.Ku)}}class sO extends If{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=VW(this,e,!0),r=this.Ku.map(s=>wf(s,t)),i=new hf(r);return new fE(e.path,i)}isEqual(e){return e instanceof sO&&(0,xn.bD)(this.Ku,e.Ku)}}class oO extends If{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Gm(e.serializer,w6(e.serializer,this.$u));return new fE(e.path,t)}isEqual(e){return e instanceof oO&&this.$u===e.$u}}function aO(n,e,t,r){const i=n.Qu(1,e,t);cO("Data must be an object, but it was:",i,r);const s=[],o=Zi.empty();gd(r,(u,l)=>{const h=yD(e,u,t);l=(0,xn.Ku)(l);const g=i.Nu(h);if(l instanceof xE)s.push(h);else{const v=wf(l,g);null!=v&&(s.push(h),o.set(h,v))}});const a=new to(s);return new NW(o,a,i.fieldTransforms)}function uO(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[ME(e,r,t)],u=[i];if(s.length%2!=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(ME(e,s[v])),u.push(s[v+1]);const l=[],h=Zi.empty();for(let v=a.length-1;v>=0;--v)if(!BW(l,a[v])){const E=a[v];let T=u[v];T=(0,xn.Ku)(T);const P=o.Nu(E);if(T instanceof xE)l.push(E);else{const R=wf(T,P);null!=R&&(l.push(E),h.set(E,R))}}const g=new to(l);return new NW(h,g,o.fieldTransforms)}function FW(n,e,t,r=!1){return wf(t,n.Qu(r?4:3,e))}function wf(n,e){if(UW(n=(0,xn.Ku)(n)))return cO("Unsupported field value:",e,n),LW(n,e);if(n instanceof If)return function(r,i){if(!OW(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=wf(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,xn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return w6(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Tr.fromDate(r);return{timestampValue:Km(i.serializer,s)}}if(r instanceof Tr){const s=new Tr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Km(i.serializer,s)}}if(r instanceof pD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ju)return{bytesValue:q6(i.serializer,r._byteString)};if(r instanceof vr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yk(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gD)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return dk(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${hD(r)}`)}(n,e)}function LW(n,e){const t={};return zG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gd(n,(r,i)=>{const s=wf(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function UW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Tr||n instanceof pD||n instanceof ju||n instanceof vr||n instanceof If||n instanceof gD)}function cO(n,e,t){if(!UW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=hD(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function ME(n,e,t){if((e=(0,xn.Ku)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return yD(n,e);throw vD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fve=new RegExp("[~\\*/\\[\\]]");function yD(n,e,t){if(e.search(Fve)>=0)throw vD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch{throw vD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vD(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ve(ae.INVALID_ARGUMENT,a+n+u)}function BW(n,e){return n.some(t=>t.isEqual(e))}class kE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lve extends kE{data(){return super.data()}}function ID(n,e){return"string"==typeof e?yD(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}function jW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ve(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lO{}class NE extends lO{}function Dd(n,e,...t){let r=[];e instanceof lO&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof p_).length,a=s.filter(u=>u instanceof OE).length;if(o>1||o>0&&a>0)throw new ve(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class OE extends NE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new OE(e,t,r)}_apply(e){const t=this._parse(e);return GW(e._query,t),new es(e.firestore,e.converter,ck(e._query,t))}_parse(e){const t=Ef(e.firestore);return function(s,o,a,u,l,h,g){let v;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){qW(g,h);const E=[];for(const T of g)E.push($W(u,s,T));v={arrayValue:{values:E}}}else v=$W(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||qW(g,h),v=FW(a,"where",g,"in"===h||"not-in"===h);return tn.create(l,h,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class p_ extends lO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new p_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)GW(o,u),o=ck(o,u)}(e._query,t),new es(e.firestore,e.converter,ck(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dO extends NE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dO(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aE(s,o)}(e._query,this._field,this._direction);return new es(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new kc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class ED extends NE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ED(e,t,r)}_apply(e){return new es(e.firestore,e.converter,UC(e._query,this._limit,this._limitType))}}class wD extends NE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wD(e,t,r)}_apply(e){const t=zW(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(s=t,new kc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class TD extends NE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new TD(e,t,r)}_apply(e){const t=zW(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(s=t,new kc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function zW(n,e,t,r){if(t[0]=(0,xn.Ku)(t[0]),t[0]instanceof kE)return function(s,o,a,u,l){if(!u)throw new ve(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of zm(s))if(g.field.isKeyField())h.push(cf(o,u.key));else{const v=u.data.field(g.field);if(xC(v))throw new ve(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const E=g.field.canonicalString();throw new ve(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new Id(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ef(n.firestore);return function(o,a,u,l,h,g){const v=o.explicitOrderBy;if(h.length>v.length)throw new ve(ae.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let T=0;T<h.length;T++){const P=h[T];if(v[T].field.isKeyField()){if("string"!=typeof P)throw new ve(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof P}`);if(!uk(o)&&-1!==P.indexOf("/"))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${P}' contains a slash.`);const R=o.path.child(en.fromString(P));if(!Ue.isDocumentKey(R))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const z=new Ue(R);E.push(cf(a,z))}else{const R=FW(u,l,P);E.push(R)}}return new Id(E,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $W(n,e,t){if("string"==typeof(t=(0,xn.Ku)(t))){if(""===t)throw new ve(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uk(e)&&-1!==t.indexOf("/"))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!Ue.isDocumentKey(r))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cf(n,new Ue(r))}if(t instanceof vr)return cf(n,t._key);throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hD(t)}.`)}function qW(n,e){if(!Array.isArray(n)||0===n.length)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GW(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ve(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hO{convertValue(e,t="none"){switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>br(o.doubleValue));return new gD(s)}convertGeoPoint(e){return new pD(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=MC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rE(e));default:return null}}convertTimestamp(e){const t=xc(e);return new Tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);et(nH(r));const i=new md(r.get(1),r.get(3)),s=new Ue(r.popFirst(5));return i.isEqual(t)||Jr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function bD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Wve extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class Tf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends kE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new VE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class VE extends Uc{data(e={}){return super.data(e)}}class Sd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new VE(this._firestore,this._userDataWriter,r.key,r,new Tf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new VE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new VE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Qve(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qve(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}function WW(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sd&&e instanceof Sd&&n._firestore===e._firestore&&eO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Pd extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function KW(n,e,t){n=Ht(n,vr);const r=Ht(n.firestore,Xn),i=bD(n.converter,e,t);return g_(r,[_D(Ef(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ar.none())])}function QW(n,e,t,...r){n=Ht(n,vr);const i=Ht(n.firestore,Xn),s=Ef(i);let o;return o="string"==typeof(e=(0,xn.Ku)(e))||e instanceof Lc?uO(s,"updateDoc",n._key,e,t,r):aO(s,"updateDoc",n._key,e),g_(i,[o.toMutation(n._key,Ar.exists(!0))])}function YW(n,...e){var t,r,i;n=(0,xn.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||tO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(tO(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(n instanceof vr)l=Ht(n.firestore,Xn),h=jm(n._key.path),u={next:g=>{e[o]&&e[o](fO(l,n,g))},error:e[o+1],complete:e[o+2]};else{const g=Ht(n,es);l=Ht(g.firestore,Xn),h=g._query;const v=new Pd(l);u={next:E=>{e[o]&&e[o](new Sd(l,v,g,E))},error:e[o+1],complete:e[o+2]},jW(n._query)}return function(v,E,T,P){const R=new lD(P),z=new mN(E,R,T);return v.asyncQueue.enqueueAndForget((0,M.A)(function*(){return lN(yield f_(v),z)})),()=>{R.Za(),v.asyncQueue.enqueueAndForget((0,M.A)(function*(){return hN(yield f_(v),z)}))}}(Cr(l),h,a,u)}function g_(n,e){return function(r,i){const s=new Vi;return r.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function qye(n,e,t){return bN.apply(this,arguments)}(yield JN(r),i,s)})),s.promise}(Cr(n),e)}function fO(n,e,t){const r=t.docs.get(e._key),i=new Pd(n);return new Uc(n,i,e._key,r,new Tf(t.hasPendingWrites,t.fromCache),e.converter)}const fIe={maxAttempts:5};class JW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ef(e)}set(e,t,r){this._verifyNotCommitted();const i=Rd(e,this._firestore),s=bD(i.converter,t,r),o=_D(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Rd(e,this._firestore);let o;return o="string"==typeof(t=(0,xn.Ku)(t))||t instanceof Lc?uO(this._dataReader,"WriteBatch.update",s._key,t,r,i):aO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rd(e,this._firestore);return this._mutations=this._mutations.concat(new Wm(t._key,Ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rd(n,e){if((n=(0,xn.Ku)(n)).firestore!==e)throw new ve(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pIe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ef(t)}get(t){const r=Rd(t,this._firestore),i=new Wve(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ke();const o=s[0];if(o.isFoundDocument())return new kE(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new kE(this._firestore,i,r._key,null,r.converter);throw Ke()})}set(t,r,i){const s=Rd(t,this._firestore),o=bD(s.converter,r,i),a=_D(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Rd(t,this._firestore);let a;return a="string"==typeof(r=(0,xn.Ku)(r))||r instanceof Lc?uO(this._dataReader,"Transaction.update",o._key,r,i,s):aO(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Rd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rd(e,this._firestore),r=new Pd(this._firestore);return super.get(e).then(i=>new Uc(this._firestore,r,t._key,i._document,new Tf(!1,!1),t.converter))}}function gO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function t8(){if(typeof Uint8Array>"u")throw new ve("unimplemented","Uint8Arrays are not available in this environment.")}function n8(){if(!function Wme(){return typeof atob<"u"}())throw new ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){km=Rm.SDK_VERSION,(0,Rm._registerComponent)(new fG.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Xn(new mme(r.getProvider("auth-internal")),new vme(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new md(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Rm.registerVersion)(wG,"4.7.3",e),(0,Rm.registerVersion)(wG,"4.7.3","esm2017")}();class FE{constructor(e){this._delegate=e}static fromBase64String(e){return n8(),new FE(ju.fromBase64String(e))}static fromUint8Array(e){return t8(),new FE(ju.fromUint8Array(e))}toBase64(){return n8(),this._delegate.toBase64()}toUint8Array(){return t8(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mO(n){return function bIe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class AIe{enableIndexedDbPersistence(e,t){return function Ave(n,e){No("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return kW(n,d_.provider,{build:r=>new qN(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Cve(n){return nO.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Dve(n){if(n._initialized&&!n._terminated)throw new ve(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{yield(t=(0,M.A)(function*(i){if(!Ou.D())return Promise.resolve();const s=i+"main";yield Ou.delete(s)}),function r(i){return t.apply(this,arguments)})(kk(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class r8{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof md||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&No("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function SW(n,e,t,r={}){var i;const s=(n=Ht(n,PE))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Oi.MOCK_USER;else{a=(0,xn.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ve(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Oi(l)}n._authCredentials=new gme(new TG(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function Pve(n){return function dve(n){return n.asyncQueue.enqueue((0,M.A)(function*(){const e=yield mW(n),t=yield _W(n);return e.setNetworkEnabled(!0),function(i){const s=Ve(i);return s.L_.delete(0),SE(s)}(t)}))}(Cr(n=Ht(n,Xn)))}(this._delegate)}disableNetwork(){return function Rve(n){return function hve(n){return n.asyncQueue.enqueue((0,M.A)(function*(){const e=yield mW(n),t=yield _W(n);return e.setNetworkEnabled(!1),(r=(0,M.A)(function*(s){const o=Ve(s);o.L_.add(0),yield n_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Cr(n=Ht(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TW("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sve(n){return function(t){const r=new Vi;return t.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function Kye(n,e){return PN.apply(this,arguments)}(yield JN(t),r)})),r.promise}(Cr(n=Ht(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function iIe(n,e){return function mve(n,e){const t=new lD(e);return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return i=yield f_(n),s=t,Ve(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return i=yield f_(n),s=t,void Ve(i).Y_.delete(s);var i,s}))}}(Cr(n=Ht(n,Xn)),tO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new m_(this,PW(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ua(this,fD(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function wve(n,e){if(n=Ht(n,PE),ZN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(r=e,new kc(en.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gIe(n,e,t){n=Ht(n,Xn);const r=Object.assign(Object.assign({},fIe),t);return function(s){if(s.maxAttempts<1)throw new ve(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Vi;return s.asyncQueue.enqueueAndForget((0,M.A)(function*(){const l=yield function yW(n){return dD(n).then(e=>e.datastore)}(s);new cve(s.asyncQueue,l,a,o,u).au()})),u.promise}(Cr(n),i=>e(new pIe(n,i)),r)}(this._delegate,t=>e(new i8(this,t)))}batch(){return Cr(this._delegate),new s8(new JW(this._delegate,e=>g_(this._delegate,e)))}loadBundle(e){return function xve(n,e){const t=Cr(n=Ht(n,Xn)),r=new Tve;return function _ve(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?V6().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return pW(h,g);if(h instanceof ArrayBuffer)return pW(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new ave(h,a);var h}(t,DE(e));n.asyncQueue.enqueueAndForget((0,M.A)(function*(){!function sve(n,e,t){const r=Ve(n);var i;(i=(0,M.A)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(T,P){const R=Ve(T),z=Xr(P.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",j=>R.Gr.getBundleMetadata(j,P.id)).then(j=>!!j&&j.createTime.compareTo(z)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=l).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(rW(l));const h=new Vye(l,o.localStore,a.serializer);let g=yield a.Ua();for(;g;){const E=yield h.la(g);E&&u._updateProgress(E),g=yield a.Ua()}const v=yield h.complete();return yield Fc(o,v.Ia,void 0),yield function(T,P){const R=Ve(T);return R.persistence.runTransaction("Save bundle","readwrite",z=>R.Gr.saveBundleMetadata(z,P))}(o.localStore,l),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(l){return No("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield JN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mve(n,e){return function yve(n,e){return n.asyncQueue.enqueue((0,M.A)(function*(){return function(r,i){const s=Ve(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield h_(n),e)}))}(Cr(n=Ht(n,Xn)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class CD extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new FE(new ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ua.forKey(t,this.firestore,null)}}class i8{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}get(e){const t=Af(e);return this._delegate.get(t).then(r=>new LE(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Af(e);return r?(gO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Af(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Af(e);return this._delegate.delete(t),this}}class s8{constructor(e){this._delegate=e}set(e,t,r){const i=Af(e);return r?(gO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Af(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Af(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new VE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new bf(e,new CD(e),t),i.set(t,s)),s}}bf.INSTANCES=new WeakMap;class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ua(t,new vr(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new ua(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new m_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new m_(this.firestore,PW(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xn.Ku)(e))instanceof vr&&RW(this._delegate,e)}set(e,t){t=gO("DocumentReference.set",t);try{return t?KW(this._delegate,e,t):KW(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?QW(this._delegate,e):QW(this._delegate,e,t,...r)}catch(i){throw Os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nIe(n){return g_(Ht(n.firestore,Xn),[new Wm(n._key,Ar.none())])}(this._delegate)}onSnapshot(...e){const t=o8(e),r=a8(e,i=>new LE(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return YW(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Jve(n){n=Ht(n,vr);const e=Ht(n.firestore,Xn),t=Cr(e),r=new Pd(e);return function fve(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return(r=(0,M.A)(function*(s,o,a){try{const u=yield function(h,g){const v=Ve(h);return v.persistence.runTransaction("read document","readonly",E=>v.localDocuments.getDocument(E,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ve(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=o_(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield h_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Uc(e,r,n._key,i,new Tf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Xve(n){n=Ht(n,vr);const e=Ht(n.firestore,Xn);return vW(Cr(e),n._key,{source:"server"}).then(t=>fO(e,n,t))}(this._delegate):function Yve(n){n=Ht(n,vr);const e=Ht(n.firestore,Xn);return vW(Cr(e),n._key).then(t=>fO(e,n,t))}(this._delegate),t.then(r=>new LE(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?bf.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function o8(n){for(const e of n)if("object"==typeof e&&!mO(e))return e;return{}}function a8(n,e){var t,r;let i;return i=mO(n[0])?n[0]:mO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WW(this._delegate,e._delegate)}}class UE extends LE{data(e){const t=this._delegate.data(e);return this._delegate._converter||function fme(n){n||Ke()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}where(e,t,r){try{return new Vs(this.firestore,Dd(this._delegate,function Uve(n,e,t){const r=e,i=ID("where",n);return OE._create(i,r,t)}(e,t,r)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,Dd(this._delegate,function Bve(n,e="asc"){const t=e,r=ID("orderBy",n);return dO._create(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,Dd(this._delegate,function jve(n){return CW("limit",n),ED._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,Dd(this._delegate,function zve(n){return CW("limitToLast",n),ED._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,Dd(this._delegate,function $ve(...n){return wD._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,Dd(this._delegate,function qve(...n){return wD._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,Dd(this._delegate,function Gve(...n){return TD._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,Dd(this._delegate,function Hve(...n){return TD._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return eO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eIe(n){n=Ht(n,es);const e=Ht(n.firestore,Xn),t=Cr(e),r=new Pd(e);return function pve(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return(r=(0,M.A)(function*(s,o,a){try{const u=yield nD(s,o,!0),l=new oW(o,u.Ts),h=l.ma(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=o_(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield h_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sd(e,r,n,i))}(this._delegate):"server"===e?.source?function tIe(n){n=Ht(n,es);const e=Ht(n.firestore,Xn),t=Cr(e),r=new Pd(e);return IW(t,n._query,{source:"server"}).then(i=>new Sd(e,r,n,i))}(this._delegate):function Zve(n){n=Ht(n,es);const e=Ht(n.firestore,Xn),t=Cr(e),r=new Pd(e);return jW(n._query),IW(t,n._query).then(i=>new Sd(e,r,n,i))}(this._delegate),t.then(r=>new _O(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=o8(e),r=a8(e,i=>new _O(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return YW(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?bf.getInstance(this.firestore,e):null))}}class DIe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new UE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _O{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new UE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DIe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new UE(this._firestore,r))})}isEqual(e){return WW(this._delegate,e._delegate)}}class m_ extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ua(this.firestore,e):null}doc(e){try{return new ua(this.firestore,void 0===e?fD(this._delegate):fD(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function rIe(n,e){const t=Ht(n.firestore,Xn),r=fD(n),i=bD(n.converter,e);return g_(t,[_D(Ef(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ua(this.firestore,t))}isEqual(e){return RW(this._delegate,e._delegate)}withConverter(e){return new m_(this.firestore,this._delegate.withConverter(e?bf.getInstance(this.firestore,e):null))}}function Af(n){return Ht(n,vr)}class yO{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new yO(_r.keyField().canonicalString())}isEqual(e){return(e=(0,xn.Ku)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _Ie(){return new rO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cf(e)}static delete(){const e=function mIe(){return new xE("deleteField")}();return e._methodName="FieldValue.delete",new Cf(e)}static arrayUnion(...e){const t=function yIe(...n){return new iO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cf(t)}static arrayRemove(...e){const t=function vIe(...n){return new sO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cf(t)}static increment(e){const t=function IIe(n){return new oO("increment",n)}(e);return t._methodName="FieldValue.increment",new Cf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SIe={Firestore:r8,GeoPoint:pD,Timestamp:Tr,Blob:FE,Transaction:i8,WriteBatch:s8,DocumentReference:ua,DocumentSnapshot:LE,Query:Vs,QueryDocumentSnapshot:UE,QuerySnapshot:_O,CollectionReference:m_,FieldPath:yO,FieldValue:Cf,setLogLevel:function CIe(n){!function hme(n){hd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function u8(n,e){return function xIe(n,e=J9){return new Vt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function vO(n,e){return u8(n,e).pipe(qe(t=>({payload:t,type:"query"})))}!function RIe(n){(function PIe(n,e){n.INTERNAL.registerComponent(new fG.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SIe)))})(n,(e,t)=>new r8(e,t,new AIe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Pc.A);class c8{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=g8(r,t);return new h8(i,s,this.afs)}snapshotChanges(){return function MIe(n,e){return u8(n,e).pipe(tC(void 0),WM(),qe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ko)}valueChanges(e={}){return this.snapshotChanges().pipe(qe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return ar(this.ref.get(e)).pipe(ko)}}function DD(n,e){return vO(n,e).pipe(tC(void 0),WM(),qe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function l8(n,e,t){return DD(n,t).pipe(nC((r,i)=>function kIe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function NIe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return IO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return IO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function cme(n,e=qi){return n=n??lme,Ce((t,r)=>{let i,s=!0;t.subscribe(Ne(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),qe(r=>r.map(i=>({type:i.type,payload:i}))))}function IO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function d8(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class h8{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=DD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(qe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(tC(void 0),WM(),zn(([r,i])=>i.length>0||!r),qe(([,r])=>r),ko)}auditTrail(e){return this.stateChanges(e).pipe(nC((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d8(e);return l8(this.query,t,this.afs.schedulers.outsideAngular).pipe(ko)}valueChanges(e={}){return vO(this.query,this.afs.schedulers.outsideAngular).pipe(qe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ko)}get(e){return ar(this.query.get(e)).pipe(ko)}add(e){return this.ref.add(e)}doc(e){return new c8(this.ref.doc(e),this.afs)}}class OIe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?DD(this.query,this.afs.schedulers.outsideAngular).pipe(qe(t=>t.filter(r=>e.indexOf(r.type)>-1)),zn(t=>t.length>0),ko):DD(this.query,this.afs.schedulers.outsideAngular).pipe(ko)}auditTrail(e){return this.stateChanges(e).pipe(nC((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d8(e);return l8(this.query,t,this.afs.schedulers.outsideAngular).pipe(ko)}valueChanges(e={}){return vO(this.query,this.afs.schedulers.outsideAngular).pipe(qe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ko)}get(e){return ar(this.query.get(e)).pipe(ko)}}const f8=new Ae("angularfire2.enableFirestorePersistence"),p8=new Ae("angularfire2.firestore.persistenceSettings"),VIe=new Ae("angularfire2.firestore.settings"),FIe=new Ae("angularfire2.firestore.use-emulator");function g8(n,e=t=>t){return{query:e(n),ref:n}}let zu=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,h,g,v,E,T,P,R,z,j){this.schedulers=u;const H=GM(t,a,r),te=h;g&&hG(H,a,v,T,P,R,E,z),[this.firestore,this.persistenceEnabled$]=nG(`${H.name}.firestore`,"AngularFirestore",H.name,()=>{const me=a.runOutsideAngular(()=>H.firestore());if(s&&me.settings(s),te&&me.useEmulator(...te),i&&!xI(o)){const _e=()=>{try{return ar(me.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(D){return typeof console<"u"&&console.warn(D),lt(!1)}};return[me,a.runOutsideAngular(_e)]}return[me,lt(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=g8(i,r),a=this.schedulers.ngZone.run(()=>s);return new h8(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new OIe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new c8(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Se(bC),Se(AC,8),Se(f8,8),Se(VIe,8),Se(To),Se(Qt),Se(eG),Se(p8,8),Se(FIe,8),Se(aa,8),Se(oG,8),Se(aG,8),Se(uG,8),Se(cG,8),Se(lG,8),Se(dG,8),Se(X9,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),LIe=(()=>{class n{constructor(){Pc.A.registerVersion("angularfire",TC.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:f8,useValue:!0},{provide:p8,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lu({type:n});static \u0275inj=Gs({providers:[zu]})}return n})(),Df=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}getTrainings(){return new Vt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Training",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{t.next(s)}):t.next([])}).catch(()=>t.next([]))})}getMeals(){return new Vt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("Meal",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{console.log("Pobrane posi\u0142ki:",s),t.next(s)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",r),t.next([])})})}addTraining(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{const i=r?.uid;i&&this.client.collection("Training").doc(t.id).set({...t,uid:i,date:t.date.toISOString()}).then(()=>console.log("Training added/updated successfully")).catch(s=>console.error("Error adding/updating training:",s))}).catch(r=>console.error("Error getting user:",r))}addMeal(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){const i=t.id||this.client.createId();this.client.collection("Meal").doc(i).set({...t,uid:r.uid,date:t.date.toISOString()}).then(()=>console.log("Meal added/updated successfully")).catch(s=>console.error("Error adding/updating meal:",s))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}updateTraining(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(t.id).update({...t,date:t.date.toISOString()}):Promise.reject("User not authenticated"))}getTrainingsByDate(t){return console.log("Pobieranie trening\xf3w dla daty:",t),new Vt(r=>{this.afAuth.currentUser.then(i=>{const s=i?.uid;if(s){const o=new Date(t);o.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",o),console.log("Koniec dnia:",a),this.client.collection("Training",u=>u.where("uid","==",s).where("date",">=",o.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane treningi:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(t){return console.log("Pobieranie posi\u0142k\xf3w dla daty:",t),new Vt(r=>{this.afAuth.currentUser.then(i=>{const s=i?.uid;if(s){const o=new Date(t);o.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",o),console.log("Koniec dnia:",a),this.client.collection("Meal",u=>u.where("uid","==",s).where("date",">=",o.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(u=>{console.log("Pobrane posi\u0142ki:",u),r.next(u)},u=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",u),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(t,r){return new Vt(i=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("Meal",a=>a.where("uid","==",o).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(t,r){return new Vt(i=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("Training",a=>a.where("uid","==",o).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xf3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(t).delete().then(()=>console.log("Training deleted successfully")).catch(s=>console.error("Error deleting training:",s)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(t).delete().then(()=>console.log("Meal deleted successfully")).catch(s=>console.error("Error deleting meal:",s)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Zr=void 0,BIe=["pl",[["a","p"],["AM","PM"],Zr],Zr,[["n","p","w","\u015b","c","p","s"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["N","P","W","\u015a","C","P","S"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],Zr,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",Zr,"{1} {0}",Zr],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[Zr,"$"],CAD:[Zr,"$"],CNY:[Zr,"\xa5"],GBP:[Zr,"\xa3"],HKD:[Zr,"$"],ILS:[Zr,"\u20aa"],INR:[Zr,"\u20b9"],JPY:[Zr,"\xa5"],KRW:[Zr,"\u20a9"],MXN:[Zr,"$"],NZD:[Zr,"$"],PHP:[Zr,"\u20b1"],PLN:["z\u0142"],RON:[Zr,"lej"],TWD:[Zr,"NT$"],USD:[Zr,"$"],VND:[Zr,"\u20ab"]},"ltr",function UIe(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:0===r&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:0===r&&1!==t&&t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||0===r&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===r&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14?4:5}];let m8=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(De(Ic),De(wo))}}static{this.\u0275dir=Et({type:n})}}return n})(),Sf=(()=>{class n extends m8{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,features:[Vn]})}}return n})();const $u=new Ae(""),$Ie={provide:$u,useExisting:Dn(()=>Fo),multi:!0},GIe=new Ae("");let Fo=(()=>{class n extends m8{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qIe(){const n=od()?od().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Ic),De(wo),De(GIe,8))}}static{this.\u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Oe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[mr([$Ie]),Vn]})}}return n})();function xd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const ws=new Ae(""),Md=new Ae("");function E8(n){return xd(n.value)?{required:!0}:null}function SD(n){return null}function D8(n){return null!=n}function S8(n){return TI(n)?ar(n):n}function P8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function R8(n,e){return e.map(t=>t(n))}function x8(n){return n.map(e=>function WIe(n){return!n.validate}(e)?e:t=>e.validate(t))}function EO(n){return null!=n?function M8(n){if(!n)return null;const e=n.filter(D8);return 0==e.length?null:function(t){return P8(R8(t,e))}}(x8(n)):null}function wO(n){return null!=n?function k8(n){if(!n)return null;const e=n.filter(D8);return 0==e.length?null:function(t){return function jIe(...n){const e=K$(n),{args:t,keys:r}=jq(n),i=new Vt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;xo(t[h]).subscribe(Ne(s,v=>{g||(g=!0,l--),a[h]=v},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?$q(r,a):a),s.complete())}))}});return e?i.pipe(zq(e)):i}(R8(t,e).map(S8)).pipe(qe(P8))}}(x8(n)):null}function N8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TO(n){return n?Array.isArray(n)?n:[n]:[]}function PD(n,e){return Array.isArray(n)?n.includes(e):n===e}function F8(n,e){const t=TO(e);return TO(n).forEach(i=>{PD(t,i)||t.push(i)}),t}function L8(n,e){return TO(e).filter(t=>!PD(n,t))}class U8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fs extends U8{get formDirective(){return null}get path(){return null}}class kd extends U8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class B8{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Ma=(()=>{class n extends B8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(kd,2))}}static{this.\u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&$h("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Vn]})}}return n})(),__=(()=>{class n extends B8{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(De(Fs,10))}}static{this.\u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&$h("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Vn]})}}return n})();const BE="VALID",xD="INVALID",y_="PENDING",jE="DISABLED";class v_{}class z8 extends v_{constructor(e,t){super(),this.value=e,this.source=t}}class CO extends v_{constructor(e,t){super(),this.pristine=e,this.source=t}}class DO extends v_{constructor(e,t){super(),this.touched=e,this.source=t}}class MD extends v_{constructor(e,t){super(),this.status=e,this.source=t}}function SO(n){return(kD(n)?n.validators:n)||null}function PO(n,e){return(kD(e)?e.asyncValidators:n)||null}function kD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class RO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=SI(()=>this.statusReactive()),this.statusReactive=ps(void 0),this._pristine=SI(()=>this.pristineReactive()),this.pristineReactive=ps(!0),this._touched=SI(()=>this.touchedReactive()),this.touchedReactive=ps(!1),this._events=new F,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ru(this.statusReactive)}set status(e){Ru(()=>this.statusReactive.set(e))}get valid(){return this.status===BE}get invalid(){return this.status===xD}get pending(){return this.status==y_}get disabled(){return this.status===jE}get enabled(){return this.status!==jE}get pristine(){return Ru(this.pristineReactive)}set pristine(e){Ru(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ru(this.touchedReactive)}set touched(e){Ru(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(F8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(F8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(L8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(L8(e,this._rawAsyncValidators))}hasValidator(e){return PD(this._rawValidators,e)}hasAsyncValidator(e){return PD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new DO(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new DO(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new CO(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new CO(!0,r))}markAsPending(e={}){this.status=y_;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new MD(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jE,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new z8(this.value,r)),this._events.next(new MD(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=BE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===BE||this.status===y_)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new z8(this.value,t)),this._events.next(new MD(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jE:BE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=y_,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=S8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new MD(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new jt,this.statusChanges=new jt}_calculateStatus(){return this._allControlsDisabled()?jE:this.errors?xD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(y_)?y_:this._anyControlsHaveStatus(xD)?xD:BE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new CO(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new DO(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function eEe(n){return Array.isArray(n)?EO(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tEe(n){return Array.isArray(n)?wO(n):n||null}(this._rawAsyncValidators)}}class xO extends RO{constructor(e,t,r){super(SO(t),PO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function q8(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new ye(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function $8(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new ye(1e3,"");if(!r[t])throw new ye(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const I_=new Ae("CallSetDisabledState",{providedIn:"root",factory:()=>ND}),ND="always";function zE(n,e,t=ND){MO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function iEe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&G8(n,e)})}(n,e),function oEe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sEe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&G8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rEe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MO(n,e){const t=function O8(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(N8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function V8(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(N8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();FD(e._rawValidators,i),FD(e._rawAsyncValidators,i)}function G8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const dEe={provide:Fs,useExisting:Dn(()=>Nd)},$E=Promise.resolve();let Nd=(()=>{class n extends Fs{get submitted(){return Ru(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=SI(()=>this.submittedReactive()),this.submittedReactive=ps(!1),this._directives=new Set,this.ngSubmit=new jt,this.form=new xO({},EO(t),wO(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$E.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),zE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$E.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$E.then(()=>{const r=this._findContainer(t.path),i=new xO({});(function H8(n,e){MO(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$E.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$E.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),function W8(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(De(ws,10),De(Md,10),De(I_,8))}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Oe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mr([dEe]),Vn]})}}return n})();function K8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Q8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Y8=class extends RO{constructor(e=null,t,r){super(SO(t),PO(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Q8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){K8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){K8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Q8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},pEe={provide:kd,useExisting:Dn(()=>ca)},Z8=Promise.resolve();let ca=(()=>{class n extends kd{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Y8,this._registered=!1,this.name="",this.update=new jt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function OO(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fo?t=s:function cEe(n){return Object.getPrototypeOf(n.constructor)===Sf}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function NO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Z8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&dm(r);Z8.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function OD(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(De(Fs,9),De(ws,10),De(Md,10),De($u,10),De(Gh,8),De(I_,8))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[mr([pEe]),Vn,Mi]})}}return n})(),E_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const gEe={provide:$u,useExisting:Dn(()=>Od),multi:!0};let Od=(()=>{class n extends Sf{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Oe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[mr([gEe]),Vn]})}}return n})();const bEe={provide:$u,useExisting:Dn(()=>UD),multi:!0};function oK(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let UD=(()=>{class n extends Sf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=oK(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function AEe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Oe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[mr([bEe]),Vn]})}}return n})(),aK=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(oK(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(De(wo),De(Ic),De(UD,9))}}static{this.\u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const CEe={provide:$u,useExisting:Dn(()=>UO),multi:!0};function uK(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let UO=(()=>{class n extends Sf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);i.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function DEe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Oe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[mr([CEe]),Vn]})}}return n})(),cK=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(uK(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(uK(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(De(wo),De(Ic),De(UO,9))}}static{this.\u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();let Pf=(()=>{class n{constructor(){this._validator=SD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):SD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,features:[Mi]})}}return n})();const PEe={provide:ws,useExisting:Dn(()=>BO),multi:!0};let BO=(()=>{class n extends Pf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function dK(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function v8(n){return e=>{if(xd(e.value)||xd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Au("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[mr([PEe]),Vn]})}}return n})();const REe={provide:ws,useExisting:Dn(()=>Vd),multi:!0};let Vd=(()=>{class n extends Pf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=dm,this.createValidator=t=>E8}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Au("required",i._enabled?"":null)},inputs:{required:"required"},features:[mr([REe]),Vn]})}}return n})();const OEe={provide:ws,useExisting:Dn(()=>jO),multi:!0};let jO=(()=>{class n extends Pf{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function C8(n){if(!n)return SD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xd(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=se(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Au("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[mr([OEe]),Vn]})}}return n})(),VEe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=lu({type:n})}static{this.\u0275inj=Gs({})}}return n})(),Li=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:I_,useValue:t.callSetDisabledState??ND}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=lu({type:n})}static{this.\u0275inj=Gs({imports:[VEe]})}}return n})();function LEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",9),G(2),O(),L(3,"input",10),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.calories,i)||(s.model.calories=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.caloriesLabel),K(),Dt("ngModel",t.model.calories)}}function UEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",11),G(2),O(),L(3,"input",12),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.burnedKcal,i)||(s.model.burnedKcal=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.burnedCalories),K(),Dt("ngModel",t.model.burnedKcal)}}function BEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",13),G(2),O(),L(3,"input",14),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.videoLink,i)||(s.model.videoLink=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.videoLinkLabel),K(),Dt("ngModel",t.model.videoLink)}}function jEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",15),G(2),O(),L(3,"input",16),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.weight,i)||(s.model.weight=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.weightLabel),K(),Dt("ngModel",t.model.weight)}}function zEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",17),G(2),O(),L(3,"input",18),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.time,i)||(s.model.time=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.timeLabel),K(),Dt("ngModel",t.model.time)}}function $Ee(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",19),G(2),O(),L(3,"input",20),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.date,i)||(s.model.date=i),st(i)}),Oe("ngModelChange",function(i){return ct(t),st(Le().onDateChange(i))}),O()()}if(2&n){const t=Le();K(2),pn(t.dateLabel),K(),Dt("ngModel",t.model.date)}}function qEe(n,e){if(1&n){const t=gr();L(0,"div",5)(1,"label",13),G(2),O(),L(3,"input",21),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.model.imageUrl,i)||(s.model.imageUrl=i),st(i)}),O()()}if(2&n){const t=Le();K(2),pn(t.imageLabel),K(),Dt("ngModel",t.model.imageUrl)}}let GEe=(()=>{class n{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.videoLinkLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.imageLabel="",this.imageSelected=new jt,this.save=new jt}onSubmit(){this.save.emit(this.model)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}onFileSelected(t){const r=t.target;r.files&&r.files.length>0&&this.imageSelected.emit(r.files[0])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",videoLinkLabel:"videoLinkLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model",imageLabel:"imageLabel"},outputs:{imageSelected:"imageSelected",save:"save"},standalone:!0,features:[sr],decls:19,vars:10,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoLink",1,"form-label"],["type","string","id","videoLink","name","videoLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","string","id","imageLabel","name","imageLabel","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h5",1),G(2),O(),Yr(3,"button",2),O(),L(4,"div",3)(5,"form",4),Oe("ngSubmit",function(){return i.onSubmit()}),L(6,"div",5)(7,"label",6),G(8),O(),L(9,"input",7),St("ngModelChange",function(o){return wt(i.model.name,o)||(i.model.name=o),o}),O()(),vn(10,LEe,4,2,"div",5)(11,UEe,4,2,"div",5)(12,BEe,4,2,"div",5)(13,jEe,4,2,"div",5)(14,zEe,4,2,"div",5)(15,$Ee,4,2,"div",5)(16,qEe,4,2,"div",5),L(17,"button",8),G(18," Zapisz zmiany "),O()()()),2&r&&(K(2),pn(i.title),K(6),pn(i.nameLabel),K(),Dt("ngModel",i.model.name),K(),zt(i.caloriesLabel?10:-1),K(),zt(i.burnedCalories?11:-1),K(),zt(i.videoLinkLabel?12:-1),K(),zt(i.weightLabel?13:-1),K(),zt(i.timeLabel?14:-1),K(),zt(i.dateLabel?15:-1),K(),zt(i.imageLabel?16:-1))},dependencies:[Li,E_,Fo,Od,Ma,__,Vd,ca,Nd],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:12px}label[_ngcontent-%COMP%]{font-size:14px}input.form-control[_ngcontent-%COMP%]{font-size:14px;padding:8px;border-radius:4px}button[type=submit][_ngcontent-%COMP%]{font-size:14px;padding:10px 20px}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#254636}}"]})}}return n})(),BD=(()=>{class n{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.videoLinkLabel="",this.dateLabel="",this.model={},this.imageLabel="",this.save=new jt,this.imageSelected=new jt}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",videoLinkLabel:"videoLinkLabel",dateLabel:"dateLabel",model:"model",imageLabel:"imageLabel"},outputs:{save:"save",imageSelected:"imageSelected"},standalone:!0,features:[sr],decls:5,vars:11,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"imageSelected","save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","videoLinkLabel","model","imageLabel"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),Oe("imageSelected",function(o){return i.imageSelected.emit(o)})("save",function(o){return i.save.emit(o)}),O()()()()()),2&r&&(Gt("id",i.modalId),K(4),Gt("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("videoLinkLabel",i.videoLinkLabel)("model",i.model)("imageLabel",i.imageLabel))},dependencies:[GEe],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:90%;margin:20px auto}.modal-content[_ngcontent-%COMP%]{padding:15px}.modal-header[_ngcontent-%COMP%]{padding-bottom:8px}.modal-title[_ngcontent-%COMP%], .btn-close[_ngcontent-%COMP%]{font-size:20px}.modal-body[_ngcontent-%COMP%]{padding:12px 0}}"]})}}return n})(),HEe=(()=>{class n{constructor(){this.trainingAndMealService=Q(Df),this.meals=[],this.model={name:"",uid:"",calories:0,weight:"",day:0,date:new Date,id:"",imageUrl:""}}addMeal(t){this.trainingAndMealService.addMeal(t),this.meals.push(t),console.log("Meal added:",t),this.resetForm()}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}resetForm(){this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:"",uid:"",imageUrl:""}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-meal-modal"]],standalone:!0,features:[sr],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","dateLabel","model","imageLabel"]],template:function(r,i){1&r&&(L(0,"app-modal",0),Oe("save",function(o){return i.addMeal(o)}),O()),2&r&&Gt("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("dateLabel","Data")("model",i.model)("imageLabel","Zdj\u0119cie posi\u0142ku")},dependencies:[Li,BD]})}}return n})(),WEe=(()=>{class n{constructor(){this.trainingAndMealService=Q(Df),this.router=Q(Ei),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:"",imageUrl:""}}addMeal(t){throw new Error("Method not implemented.")}addTraining(t){this.trainingAndMealService.addTraining(t),this.training.push(t),console.log("Meal added:",t),this.router.navigate(["/home"]),this.resetForm()}onDateChange(t){this.model.date=new Date(`${t}T00:00:00`)}resetForm(){this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:"",imageUrl:""}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-training-modal"]],standalone:!0,features:[sr],decls:1,vars:9,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","videoLinkLabel","imageLabel","model"]],template:function(r,i){1&r&&(L(0,"app-modal",0),Oe("save",function(o){return i.addTraining(o)}),O()),2&r&&Gt("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("videoLinkLabel","Link Youtube")("imageLabel","Zdj\u0119cie treningu")("model",i.model)},dependencies:[Li,BD]})}}return n})(),KEe=(()=>{class n{constructor(){this.meal=null,this.Save=new jt,this.close=new jt,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:"",uid:"",imageUrl:""}}ngOnChanges(t){t.meal&&this.meal&&(this.model={...this.meal,date:new Date(this.meal.date)})}saveMeal(t){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Mi,sr],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){1&r&&(L(0,"app-modal",0),Oe("save",function(o){return i.saveMeal(o)}),O()),2&r&&Gt("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[Li,BD]})}}return n})(),QEe=(()=>{class n{constructor(){this.training=null,this.Save=new jt,this.close=new jt,this.model={name:"",isDone:!1,burnedKcal:0,time:"",videoLink:"",date:new Date,id:"",imageUrl:""}}ngOnChanges(t){t.training&&this.training&&(this.model={...this.training,date:new Date(this.training.date)})}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Mi,sr],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","videoLinkLabel","model"]],template:function(r,i){1&r&&(L(0,"app-modal",0),Oe("save",function(){return i.saveTraining()}),O()),2&r&&Gt("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Li,BD]})}}return n})(),YEe=(()=>{class n{constructor(){this.client=Q(zu)}getQuotes(){return this.client.collection("quotes").valueChanges()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const JEe=n=>["/day-details",n];function XEe(n,e){if(1&n&&(L(0,"h2"),G(1),O()),2&n){const t=Le();K(),pn(t.currentQuote.name)}}function ZEe(n,e){if(1&n&&(L(0,"span"),G(1),O()),2&n){const t=e.$implicit;K(),pn(t)}}function e0e(n,e){if(1&n){const t=gr();L(0,"div",7),Oe("click",function(){const i=ct(t).$implicit;return st(Le().selectDay(i.date))}),G(1),O()}if(2&n){const t=e.$implicit,r=Le();$h("other-month",t.isOtherMonth)("has-events",r.hasEventsForDay(t.date)),K(),In(" ",t.date.getDate()," ")}}function t0e(n,e){if(1&n){const t=gr();L(0,"div"),G(1),O(),L(2,"div",18)(3,"button",19),Oe("click",function(){const i=ct(t).$implicit;return st(Le(2).editTraining(i))}),G(4," Edytuj "),O(),L(5,"button",20),Oe("click",function(){const i=ct(t).$implicit;return st(Le(2).deleteTraining(i.id))}),G(6," Usu\u0144 "),O(),L(7,"label",21)(8,"input",22),Oe("change",function(){const i=ct(t).$implicit;return st(Le(2).toggleTrainingDone(i))}),O(),G(9," Zrobiony "),O()()}if(2&n){const t=e.$implicit;K(),fA(" ",t.name," - ",t.burnedKcal," kcal ",t.time,"min "),K(7),Gt("checked",t.isDone)}}function n0e(n,e){if(1&n){const t=gr();L(0,"div"),G(1),O(),L(2,"div",18)(3,"button",23),Oe("click",function(){const i=ct(t).$implicit;return st(Le(2).editMeal(i))}),G(4," Edytuj "),O(),L(5,"button",20),Oe("click",function(){const i=ct(t).$implicit;return st(Le(2).deleteMeal(i.id))}),G(6," Usu\u0144 "),O()()}if(2&n){const t=e.$implicit;K(),fA(" ",t.name," - ",t.calories," kcal (",t.weight," g) ")}}function r0e(n,e){if(1&n&&(L(0,"div",14)(1,"h4",17),Po(2,"date"),G(3),Po(4,"date"),O(),L(5,"div")(6,"h4"),G(7,"Treningi"),O(),gs(8,t0e,10,4,null,null,So),O(),L(10,"div")(11,"h4"),G(12,"Posi\u0142ki"),O(),gs(13,n0e,7,3,null,null,So),O()()),2&n){const t=e.$implicit,r=Le();K(),Gt("routerLink",d1(8,JEe,id(2,2,t.date,"yyyy-MM-dd"))),K(2),In(" ",id(4,5,t.date,"EEEE, d MMMM")," "),K(5),ms(r.getTrainingsForDay(t.date)),K(5),ms(r.getMealsForDay(t.date))}}!function wle(n,e,t){(function zse(n,e,t){"string"!=typeof e&&(t=e,e=n[ir.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),om[e]=n,t&&(om[e][ir.ExtraData]=t)})(n,e,t)}(BIe);let i0e=(()=>{class n{constructor(){this.TrainingAndMealService=Q(Df),this.quotesService=Q(YEe),this.meals=ps([]),this.trainings=ps([]),this.calendarDays=[],this.currentWeek=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.quotes=[],this.currentIndex=0,this.showModal=ps(!1),this.selectedDay=null,this.dayNames=["Pn","Wt","\u015ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar(),this.generateWeek(new Date)}loadData(){this.TrainingAndMealService.getTrainings().subscribe(t=>{const r=t.map((i,s)=>({...i,id:i.id||`training-${s}-${(new Date).getTime()}`,date:new Date(i.date)}));this.trainings.set(r),this.quotesService.getQuotes().subscribe(i=>{this.quotes=i,this.quotes.length>0&&(this.currentQuote=this.quotes[0]),this.rotateQuotes()})}),this.TrainingAndMealService.getMeals().subscribe(t=>{const r=t.map((i,s)=>({...i,id:i.id||`meal-${s}-${(new Date).getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}rotateQuotes(){setInterval(()=>{this.quotes.length>0&&(this.currentIndex=(this.currentIndex+1)%this.quotes.length,this.currentQuote=this.quotes[this.currentIndex])},1e4)}generateWeek(t){const r=new Date(t.setDate(t.getDate()-t.getDay()+1));this.currentWeek=[];for(let i=0;i<7;i++){const s=new Date(r);s.setDate(r.getDate()+i),this.currentWeek.push({date:s,isOtherMonth:!1})}}generateCalendar(){const t=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),o=(t.getDay()||7)-1,u=7-(r.getDay()||7);this.calendarDays=[];for(let l=o;l>0;l--){const h=new Date(this.currentYear,this.currentMonth,1-l);this.calendarDays.push({date:h,isOtherMonth:!0})}for(let l=1;l<=i;l++){const h=new Date(this.currentYear,this.currentMonth,l);this.calendarDays.push({date:h,isOtherMonth:!1})}for(let l=1;l<=u;l++){const h=new Date(this.currentYear,this.currentMonth+1,l);this.calendarDays.push({date:h,isOtherMonth:!0})}}prevWeek(){const t=this.currentWeek[0].date,r=new Date(t.setDate(t.getDate()-7));this.generateWeek(r)}nextWeek(){const t=this.currentWeek[6].date,r=new Date(t.setDate(t.getDate()+1));this.generateWeek(r)}getWeekRange(){const r=this.currentWeek[6].date;return`${this.currentWeek[0].date.toLocaleDateString()} - ${r.toLocaleDateString()}`}selectDay(t){this.selectedDay=t,console.log("Wybrano dzie\u0144:",this.selectedDay),this.generateWeek(t)}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}getMealsForDay(t){return this.meals().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}getTrainingsForDay(t){return this.trainings().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}hasEventsForDay(t){return this.getMealsForDay(t).length>0||this.getTrainingsForDay(t).length>0}closeModal(){this.showModal.set(!1)}editMeal(t){this.selectedMeal={...t}}toggleTrainingDone(t){const r={...t,isDone:!t.isDone};this.saveEditedTraining(r)}saveEditedMeal(t){this.TrainingAndMealService.updateMeal(t).then(()=>{this.meals.set(this.meals().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}deleteMeal(t){this.TrainingAndMealService.deleteMeal(t).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xf3buj ponownie.")})}editTraining(t){this.selectedTraining={...t}}saveEditedTraining(t){this.TrainingAndMealService.updateTraining(t).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited training:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 treningu. Spr\xf3buj ponownie.")})}deleteTraining(t){this.TrainingAndMealService.deleteTraining(t).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xf3buj ponownie.")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-calendar"]],standalone:!0,features:[mr([{provide:Ec,useValue:"pl"}]),sr],decls:37,vars:6,consts:[[1,"quote-container"],[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"layout-container"],[1,"monthly-calendar"],[1,"calendar-navigation"],[3,"click"],[1,"day-names"],[1,"calendar-days"],[3,"other-month","has-events"],[1,"weekly-view"],[1,"week-header"],[1,"week-days"],[1,"day-details"],[3,"Save","close","meal"],[3,"Save","close","training"],[3,"routerLink"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"change","checked"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){1&r&&(L(0,"div",0),vn(1,XEe,2,1,"h2"),O(),L(2,"div",1)(3,"button",2),G(4," Dodaj Posi\u0142ek "),O(),L(5,"button",3),G(6," Dodaj Trening "),O()(),L(7,"div",4)(8,"div",5)(9,"div",6)(10,"button",7),Oe("click",function(){return i.prevMonth()}),G(11,"Poprzedni"),O(),L(12,"span"),G(13),O(),L(14,"button",7),Oe("click",function(){return i.nextMonth()}),G(15,"Nast\u0119pny"),O()(),L(16,"div",8),gs(17,ZEe,2,1,"span",null,So),O(),L(19,"div",9),gs(20,e0e,2,5,"div",10,So),O()(),L(22,"div",11)(23,"div",12)(24,"button",7),Oe("click",function(){return i.prevWeek()}),G(25,"Poprzedni tydzie\u0144"),O(),L(26,"span"),G(27),O(),L(28,"button",7),Oe("click",function(){return i.nextWeek()}),G(29,"Nast\u0119pny tydzie\u0144"),O()(),L(30,"div",13),gs(31,r0e,15,10,"div",14,So),O()()(),Yr(33,"app-meal-modal")(34,"app-training-modal"),L(35,"app-edit",15),Oe("Save",function(o){return i.saveEditedMeal(o)})("close",function(){return i.closeModal()}),O(),L(36,"app-edit-training",16),Oe("Save",function(o){return i.saveEditedTraining(o)})("close",function(){return i.closeModal()}),O()),2&r&&(K(),zt(i.currentQuote?1:-1),K(12),hA("",i.months[i.currentMonth]," ",i.currentYear,""),K(4),ms(i.dayNames),K(3),ms(i.calendarDays),K(7),In(" ",i.getWeekRange()," "),K(4),ms(i.currentWeek),K(4),Gt("meal",i.selectedMeal),K(),Gt("training",i.selectedTraining))},dependencies:[Ac,fm,HEe,$M,Pm,WEe,KEe,QEe,Li],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#f4f4f4;margin:0;padding:0}.layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;color:#333;width:80%;justify-content:center;margin:0 auto}.calendar-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;color:#333}.monthly-calendar[_ngcontent-%COMP%]{flex:0 1 350px;max-height:400px;overflow:hidden;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;display:flex;flex-direction:column;justify-content:space-between;background:var(--background-gradient)}.calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.day-names[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day-names[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;transition:background-color .3s}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.calendar-days[_ngcontent-%COMP%]   div.other-month[_ngcontent-%COMP%]{color:#aaa}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:1px solid #0056b3}.weekly-view[_ngcontent-%COMP%]{flex:2;padding:20px;background:#f8f8f8;height:900px;overflow-y:auto;border-radius:10px;box-shadow:0 2px 10px #0000001a}.week-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.day-details[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:8px;box-shadow:0 1px 5px #0000001a}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.day-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]{background-color:#d0e6e6}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]:hover{background-color:#b0d0d0}.btn-link[_ngcontent-%COMP%]{color:#000}.form-check-input[_ngcontent-%COMP%]{background-color:#000;border-color:#000}.form-check-label[_ngcontent-%COMP%]{color:#000}.quote-container[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;margin:20px 0;text-align:center}@media screen and (max-width: 768px){.layout-container[_ngcontent-%COMP%]{flex-direction:column;width:100%;padding:15px}.monthly-calendar[_ngcontent-%COMP%], .weekly-view[_ngcontent-%COMP%]{flex:1 1 100%;margin-bottom:20px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.week-days[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}@media screen and (max-width: 480px){.calendar-container[_ngcontent-%COMP%]{padding:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:10px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px}}"]})}}return n})(),_K=(()=>{class n{constructor(){this.afAuth=Q(aa),this.firestore=Q(zu)}setGradient(t){const r=document.documentElement;switch(t){case"green":default:r.style.setProperty("--background-gradient","linear-gradient(135deg, #e0f7fa, #254636)"),r.style.setProperty("--button-background","#254636");break;case"pastel-lavender":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6E6FA, #F4F0FF)"),r.style.setProperty("--button-background","#D8BFD8");break;case"powder-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #D6ECFA, #B3D9FF)"),r.style.setProperty("--button-background","#A9CCE3");break;case"emerald-gold":r.style.setProperty("--background-gradient","linear-gradient(135deg, #50C878, #FFD700)"),r.style.setProperty("--button-background","#468847");break;case"cloud":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F0F4FF, #E1E9FF)"),r.style.setProperty("--button-background","#CBD7FF");break;case"dusty-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F5E3E0, #EAC0C1)"),r.style.setProperty("--button-background","#E8AFAF");break;case"powder-mint":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E6F9F4, #D0F0E8)"),r.style.setProperty("--button-background","#B2E4D8");break;case"navy-ivory":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F9F8F6, #2C3E50)"),r.style.setProperty("--button-background","#34495E");break;case"cashmere-graphite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EFE1CE, #2F2F2F)"),r.style.setProperty("--button-background","#3C3C3C");break;case"pearl-ink":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F2F1F0, #1F2933)"),r.style.setProperty("--button-background","#20232A");break;case"beige-espresso":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F7F4ED, #4A332D)"),r.style.setProperty("--button-background","#3C2E2A");break;case"graphite-rose":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FDE9E8, #3D3D3D)"),r.style.setProperty("--button-background","#7A6C6C");break;case"turquoise-alabaster":r.style.setProperty("--background-gradient","linear-gradient(135deg, #EDF6F8, #005960)"),r.style.setProperty("--button-background","#003F45");break;case"burgundy-cream":r.style.setProperty("--background-gradient","linear-gradient(135deg, #F8ECE5, #641E16)"),r.style.setProperty("--button-background","#922B21");break;case"platinum-coal":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E5E5E5, #222222)"),r.style.setProperty("--button-background","#333333");break;case"pearl-pink-anthracite":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FCE4EC, #2B2B2B)"),r.style.setProperty("--button-background","#4C4C4C");break;case"opal-blue":r.style.setProperty("--background-gradient","linear-gradient(135deg, #E0E5EC, #5C87A3)"),r.style.setProperty("--button-background","#3B647A");break;case"mustard-caramel":r.style.setProperty("--background-gradient","linear-gradient(135deg, #FFF5E1, #A67B5B)"),r.style.setProperty("--button-background","#8C6239")}this.saveUserTheme(t)}saveUserTheme(t){this.afAuth.currentUser.then(i=>{i&&this.firestore.collection("users-theme").doc(i.uid).set({theme:t},{merge:!0})})}loadUserTheme(t){this.firestore.collection("users-theme").doc(t).get().subscribe(r=>{if(r.exists){const s=r.data().theme;s&&this.setGradient(s)}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const yK=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},vK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let v=(15&a)<<2|l>>6,E=63&l;u||(E=64,o||(v=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yK(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==g)throw new u0e;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==g&&r.push(l<<6&192|g))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class u0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jD=function(n){return function(n){const e=yK(n);return vK.encodeByteArray(e,!0)}(n).replace(/\./g,"")},zD=function(n){try{return vK.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},$D=()=>{try{return function d0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zD(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},EK=n=>{var e,t;return null===(t=null===(e=$D())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},wK=()=>{var n;return null===(n=$D())||void 0===n?void 0:n.config},TK=n=>{var e;return null===(e=$D())||void 0===e?void 0:e[`_${n}`]};class bK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function ei(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class Bc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Bc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qE.prototype.create)}}class qE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function C0e(n,e){return n.replace(D0e,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Bc(i,`${this.serviceName}: ${o} (${i}).`,r)}}const D0e=/\{\$([^}]+)}/g;function w_(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(SK(s)&&SK(o)){if(!w_(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function SK(n){return null!==n&&"object"==typeof n}function GE(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HE(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function WE(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class R0e{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function x0e(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=$O),void 0===i.error&&(i.error=$O),void 0===i.complete&&(i.complete=$O);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $O(){}function Ti(n){return n&&n._delegate?n._delegate:n}class Rf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xf="[DEFAULT]";class F0e{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new bK;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function U0e(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,M.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=xf){return this.instances.has(e)}getOptions(e=xf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===xf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=xf){return this.component?this.component.multipleInstances?e:xf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F0e(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const GO=[];var nn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(nn||{});const PK={debug:nn.DEBUG,verbose:nn.VERBOSE,info:nn.INFO,warn:nn.WARN,error:nn.ERROR,silent:nn.SILENT},j0e=nn.INFO,z0e={[nn.DEBUG]:"log",[nn.VERBOSE]:"log",[nn.INFO]:"info",[nn.WARN]:"warn",[nn.ERROR]:"error"},$0e=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=z0e[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class HO{constructor(e){this.name=e,this._logLevel=j0e,this._logHandler=$0e,this._userLogHandler=null,GO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?PK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nn.DEBUG,...e),this._logHandler(this,nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nn.VERBOSE,...e),this._logHandler(this,nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nn.INFO,...e),this._logHandler(this,nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nn.WARN,...e),this._logHandler(this,nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nn.ERROR,...e),this._logHandler(this,nn.ERROR,...e)}}var q0e=yt(749);class G0e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function H0e(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const GD="@firebase/app",WO="0.10.17",jc=new HO("@firebase/app"),W0e="@firebase/app-compat",K0e="@firebase/analytics-compat",Q0e="@firebase/analytics",Y0e="@firebase/app-check-compat",J0e="@firebase/app-check",X0e="@firebase/auth",Z0e="@firebase/auth-compat",ewe="@firebase/database",twe="@firebase/data-connect",nwe="@firebase/database-compat",rwe="@firebase/functions",iwe="@firebase/functions-compat",swe="@firebase/installations",owe="@firebase/installations-compat",awe="@firebase/messaging",uwe="@firebase/messaging-compat",cwe="@firebase/performance",lwe="@firebase/performance-compat",dwe="@firebase/remote-config",hwe="@firebase/remote-config-compat",fwe="@firebase/storage",pwe="@firebase/storage-compat",gwe="@firebase/firestore",mwe="@firebase/vertexai",_we="@firebase/firestore-compat",ywe="firebase",HD="[DEFAULT]",Iwe={[GD]:"fire-core",[W0e]:"fire-core-compat",[Q0e]:"fire-analytics",[K0e]:"fire-analytics-compat",[J0e]:"fire-app-check",[Y0e]:"fire-app-check-compat",[X0e]:"fire-auth",[Z0e]:"fire-auth-compat",[ewe]:"fire-rtdb",[twe]:"fire-data-connect",[nwe]:"fire-rtdb-compat",[rwe]:"fire-fn",[iwe]:"fire-fn-compat",[swe]:"fire-iid",[owe]:"fire-iid-compat",[awe]:"fire-fcm",[uwe]:"fire-fcm-compat",[cwe]:"fire-perf",[lwe]:"fire-perf-compat",[dwe]:"fire-rc",[hwe]:"fire-rc-compat",[fwe]:"fire-gcs",[pwe]:"fire-gcs-compat",[gwe]:"fire-fst",[_we]:"fire-fst-compat",[mwe]:"fire-vertex","fire-js":"fire-js",[ywe]:"fire-js-all"},Mf=new Map,KE=new Map,QE=new Map;function RK(n,e){try{n.container.addComponent(e)}catch(t){jc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function T_(n){const e=n.name;if(QE.has(e))return jc.debug(`There were multiple attempts to register component ${e}.`),!1;QE.set(e,n);for(const t of Mf.values())RK(t,n);for(const t of KE.values())RK(t,n);return!0}function WD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ka(n){return void 0!==n.settings}const la=new qE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xK{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}const b_="11.1.0";function MK(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:HD,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw la.create("bad-app-name",{appName:String(i)});if(t||(t=wK()),!t)throw la.create("no-options");const s=Mf.get(i);if(s){if(w_(t,s.options)&&w_(r,s.config))return s;throw la.create("duplicate-app",{appName:i})}const o=new B0e(i);for(const u of QE.values())o.addComponent(u);const a=new xK(t,r,o);return Mf.set(i,a),a}function kK(n=HD){const e=Mf.get(n);if(!e&&n===HD&&wK())return MK();if(!e)throw la.create("no-app",{appName:n});return e}function zc(n,e,t){var r;let i=null!==(r=Iwe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void jc.warn(a.join(" "))}T_(new Rf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Awe="firebase-heartbeat-database",Cwe=1,YE="firebase-heartbeat-store";let QO=null;function NK(){return QO||(QO=(0,q0e.P2)(Awe,Cwe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(YE)}catch(t){console.warn(t)}}}).catch(n=>{throw la.create("idb-open",{originalErrorMessage:n.message})})),QO}function YO(){return(YO=(0,M.A)(function*(n){try{const t=(yield NK()).transaction(YE),r=yield t.objectStore(YE).get(VK(n));return yield t.done,r}catch(e){if(e instanceof Bc)jc.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e?.message});jc.warn(t.message)}}})).apply(this,arguments)}function OK(n,e){return JO.apply(this,arguments)}function JO(){return(JO=(0,M.A)(function*(n,e){try{const r=(yield NK()).transaction(YE,"readwrite");yield r.objectStore(YE).put(e,VK(n)),yield r.done}catch(t){if(t instanceof Bc)jc.warn(t.message);else{const r=la.create("idb-set",{originalErrorMessage:t?.message});jc.warn(r.message)}}})).apply(this,arguments)}function VK(n){return`${n.name}!${n.options.appId}`}class Rwe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Mwe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,M.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=FK();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){jc.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,M.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=FK(),{heartbeatsToSend:i,unsentEntries:s}=function xwe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LK(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LK(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=jD(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return jc.warn(r),""}})()}}function FK(){return(new Date).toISOString().substring(0,10)}class Mwe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.A)(function*(){return!!function CK(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function b0e(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,M.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Dwe(n){return YO.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,M.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OK(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,M.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return OK(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function LK(n){return jD(JSON.stringify({version:2,heartbeats:n})).length}!function kwe(n){T_(new Rf("platform-logger",e=>new G0e(e),"PRIVATE")),T_(new Rf("heartbeat",e=>new Rwe(e),"PRIVATE")),zc(GD,WO,n),zc(GD,WO,"esm2017"),zc("fire-js","")}("");const Nwe=function UK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},BK=new qE("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),KD=new HO("@firebase/auth");function QD(n,...e){KD.logLevel<=nn.ERROR&&KD.error(`Auth (${b_}): ${n}`,...e)}function ro(n,...e){throw ZO(n,...e)}function Ls(n,...e){return ZO(n,...e)}function XO(n,e,t){const r=Object.assign(Object.assign({},Nwe()),{[e]:t});return new qE("auth","Firebase",r).create(e,{appName:n.name})}function Ui(n){return XO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZO(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BK.create(n,...e)}function xe(n,e,...t){if(!n)throw ZO(e,...t)}function qu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw QD(e),new Error(e)}function $c(n,e){n||qu(e)}function JE(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function jK(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function Vwe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function eV(){return"http:"===jK()||"https:"===jK()}()||function E0e(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class XE{constructor(e,t){this.shortDelay=e,this.longDelay=t,$c(t>e,"Short delay should be less than long delay!"),this.isMobile=function _0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ei())}()||function w0e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Vwe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tV(n,e){$c(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class zK{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void qu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void qu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void qu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Lwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Uwe=new XE(3e4,6e4);function Ir(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Er(n,e,t,r){return nV.apply(this,arguments)}function nV(){return(nV=(0,M.A)(function*(n,e,t,r,i={}){return $K(n,i,(0,M.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=GE(Object.assign({key:n.config.apiKey},o)).slice(1),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const l=Object.assign({method:e,headers:u},s);return function I0e(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(l.referrerPolicy="no-referrer"),zK.fetch()(qK(n,n.config.apiHost,t,a),l)}))})).apply(this,arguments)}function $K(n,e,t){return rV.apply(this,arguments)}function rV(){return(rV=(0,M.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Lwe),e);try{const i=new jwe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ZE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw ZE(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw ZE(n,"email-already-in-use",o);if("USER_DISABLED"===u)throw ZE(n,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw XO(n,h,l);ro(n,h)}}catch(i){if(i instanceof Bc)throw i;ro(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function qc(n,e,t,r){return iV.apply(this,arguments)}function iV(){return(iV=(0,M.A)(function*(n,e,t,r,i={}){const s=yield Er(n,e,t,r,i);return"mfaPendingCredential"in s&&ro(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function qK(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?tV(n.config,i):`${n.config.apiScheme}://${i}`}function Bwe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jwe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ls(this.auth,"network-request-failed")),Uwe.get())})}}function ZE(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ls(n,e,r);return i.customData._tokenResponse=t,i}function HK(n){return void 0!==n&&void 0!==n.enterprise}class WK{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Bwe(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function KK(n,e){return oV.apply(this,arguments)}function oV(){return(oV=(0,M.A)(function*(n,e){return Er(n,"GET","/v2/recaptchaConfig",Ir(n,e))})).apply(this,arguments)}function aV(){return(aV=(0,M.A)(function*(n,e){return Er(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function QK(n,e){return cV.apply(this,arguments)}function cV(){return(cV=(0,M.A)(function*(n,e){return Er(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function e0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lV(){return(lV=(0,M.A)(function*(n,e=!1){const t=Ti(n),r=yield t.getIdToken(e),i=YD(r);xe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:e0(dV(i.auth_time)),issuedAtTime:e0(dV(i.iat)),expirationTime:e0(dV(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function dV(n){return 1e3*Number(n)}function YD(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return QD("JWT malformed, contained fewer than 3 sections"),null;try{const i=zD(t);return i?JSON.parse(i):(QD("Failed to decode base64 JWT payload"),null)}catch(i){return QD("Caught error parsing JWT payload as JSON",i?.toString()),null}}function YK(n){const e=YD(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gc(n,e){return hV.apply(this,arguments)}function hV(){return(hV=(0,M.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Bc&&function Hwe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Wwe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,M.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,M.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class fV{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=e0(this.lastLoginAt),this.creationTime=e0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function t0(n){return pV.apply(this,arguments)}function pV(){return(pV=(0,M.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Gc(n,QK(t,{idToken:r}));xe(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?JK(s.providerUserInfo):[],a=function Qwe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),h=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fV(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})).apply(this,arguments)}function gV(){return(gV=(0,M.A)(function*(n){const e=Ti(n);yield t0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function JK(n){return n.map(e=>{var{providerId:t}=e,r=(0,Cc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function mV(){return(mV=(0,M.A)(function*(n,e){const t=yield $K(n,{},(0,M.A)(function*(){const r=GE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=qK(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zK.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function _V(){return(_V=(0,M.A)(function*(n,e){return Er(n,"POST","/v2/accounts:revokeToken",Ir(n,e))})).apply(this,arguments)}class C_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(0!==e.length,"internal-error");const t=YK(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,M.A)(function*(){return t||!r.accessToken||r.isExpired?(xe(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,M.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Ywe(n,e){return mV.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new C_;return r&&(xe("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(xe("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(xe("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new C_,this.toJSON())}_performRefresh(){return qu("not implemented")}}function Fd(n,e){xe("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Hc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Cc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wwe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fV(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,M.A)(function*(){const r=yield Gc(t,t.stsTokenManager.getToken(t.auth,e));return xe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Gwe(n){return lV.apply(this,arguments)}(this,e)}reload(){return function Kwe(n){return gV.apply(this,arguments)}(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,M.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield t0(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,M.A)(function*(){if(ka(e.auth.app))return Promise.reject(Ui(e.auth));const t=yield e.getIdToken();return yield Gc(e,function $we(n,e){return aV.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;const g=null!==(r=t.displayName)&&void 0!==r?r:void 0,v=null!==(i=t.email)&&void 0!==i?i:void 0,E=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,T=null!==(o=t.photoURL)&&void 0!==o?o:void 0,P=null!==(a=t.tenantId)&&void 0!==a?a:void 0,R=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,z=null!==(l=t.createdAt)&&void 0!==l?l:void 0,j=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:H,emailVerified:te,isAnonymous:me,providerData:_e,stsTokenManager:D}=t;xe(H&&D,e,"internal-error");const b=C_.fromJSON(this.name,D);xe("string"==typeof H,e,"internal-error"),Fd(g,e.name),Fd(v,e.name),xe("boolean"==typeof te,e,"internal-error"),xe("boolean"==typeof me,e,"internal-error"),Fd(E,e.name),Fd(T,e.name),Fd(P,e.name),Fd(R,e.name),Fd(z,e.name),Fd(j,e.name);const C=new Hc({uid:H,auth:e,email:v,emailVerified:te,displayName:g,isAnonymous:me,photoURL:T,phoneNumber:E,tenantId:P,stsTokenManager:b,createdAt:z,lastLoginAt:j});return _e&&Array.isArray(_e)&&(C.providerData=_e.map(x=>Object.assign({},x))),R&&(C._redirectEventId=R),C}static _fromIdTokenResponse(e,t,r=!1){return(0,M.A)(function*(){const i=new C_;i.updateFromServerResponse(t);const s=new Hc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield t0(s),s})()}static _fromGetAccountInfoResponse(e,t,r){return(0,M.A)(function*(){const i=t.users[0];xe(void 0!==i.localId,"internal-error");const s=void 0!==i.providerUserInfo?JK(i.providerUserInfo):[],o=!(i.email&&i.passwordHash||s?.length),a=new C_;a.updateFromIdToken(r);const u=new Hc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||s?.length)};return Object.assign(u,l),u})()}}const XK=new Map;function Wc(n){$c(n instanceof Function,"Expected a class definition");let e=XK.get(n);return e?($c(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,XK.set(n,e),e)}const ZK=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,M.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,M.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,M.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function JD(n,e,t){return`firebase:${n}:${e}:${t}`}class D_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=JD(this.userKey,i.apiKey,s),this.fullPersistenceKey=JD("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,M.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Hc._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,M.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,M.A)(function*(){if(!t.length)return new D_(Wc(ZK),e,r);const i=(yield Promise.all(t.map(function(){var l=(0,M.A)(function*(h){if(yield h._isAvailable())return h});return function(h){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||Wc(ZK);const o=JD(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const h=yield l._get(o);if(h){const g=Hc._fromJSON(e,h);l!==s&&(a=g),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=(0,M.A)(function*(h){if(h!==s)try{yield h._remove(o)}catch{}});return function(h){return l.apply(this,arguments)}}())),new D_(s,e,r)):new D_(s,e,r)})()}}function eQ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oQ(e))return"Blackberry";if(aQ(e))return"Webos";if(nQ(e))return"Safari";if((e.includes("chrome/")||rQ(e))&&!e.includes("edge/"))return"Chrome";if(sQ(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function tQ(n=ei()){return/firefox\//i.test(n)}function nQ(n=ei()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rQ(n=ei()){return/crios\//i.test(n)}function iQ(n=ei()){return/iemobile/i.test(n)}function sQ(n=ei()){return/android/i.test(n)}function oQ(n=ei()){return/blackberry/i.test(n)}function aQ(n=ei()){return/webos/i.test(n)}function yV(n=ei()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uQ(n=ei()){return yV(n)||sQ(n)||aQ(n)||oQ(n)||/windows phone/i.test(n)||iQ(n)}function cQ(n,e=[]){let t;switch(n){case"Browser":t=eQ(ei());break;case"Worker":t=`${eQ(ei())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${b_}/${r}`}class eTe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,M.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function vV(){return(vV=(0,M.A)(function*(n,e={}){return Er(n,"GET","/v2/passwordPolicy",Ir(n,e))})).apply(this,arguments)}class rTe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(s=u.containsUppercaseLetter)||void 0===s||s),u.isValid&&(u.isValid=null===(o=u.containsNumericCharacter)||void 0===o||o),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class iTe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lQ(this),this.idTokenSubscription=new lQ(this),this.beforeStateQueue=new eTe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Wc(t)),this._initializationPromise=this.queue((0,M.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield D_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,M.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,M.A)(function*(){try{const r=yield QK(t,{idToken:e}),i=yield Hc._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,M.A)(function*(){var r;if(ka(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(u,u))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return xe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,M.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,M.A)(function*(){try{yield t0(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Fwe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,M.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,M.A)(function*(){if(ka(t.app))return Promise.reject(Ui(t));const r=e?Ti(e):null;return r&&xe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,M.A)(function*(){if(!r._deleted)return e&&xe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,M.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,M.A)(function*(){return ka(e.app)?Promise.reject(Ui(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return ka(this.app)?Promise.reject(Ui(this)):this.queue((0,M.A)(function*(){yield t.assertedPersistence.setPersistence(Wc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,M.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,M.A)(function*(){const t=yield function tTe(n){return vV.apply(this,arguments)}(e),r=new rTe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qE("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,M.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function Jwe(n,e){return _V.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,M.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,M.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Wc(e)||t._popupRedirectResolver;xe(r,t,"argument-error"),t.redirectPersistenceManager=yield D_.create(t,[Wc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,M.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,M.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,M.A)(function*(){if(e===t.currentUser)return t.queue((0,M.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}{const u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){var t=this;return(0,M.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cQ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,M.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,M.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Owe(n,...e){KD.logLevel<=nn.WARN&&KD.warn(`Auth (${b_}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ti(n){return Ti(n)}class lQ{constructor(e){this.auth=e,this.observer=null,this.addObserver=function P0e(n,e){const t=new R0e(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let n0={loadJS:()=>(0,M.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IV(n){return n0.loadJS(n)}function dQ(n){return`__${n}${Math.floor(1e6*Math.random())}`}class hTe{constructor(){this.enterprise=new fTe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fTe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const r0="NO_RECAPTCHA";class hQ{constructor(e){this.type="recaptcha-enterprise",this.auth=ti(e)}verify(e="verify",t=!1){var r=this;return(0,M.A)(function*(){function s(){return s=(0,M.A)(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=(0,M.A)(function*(l,h){KK(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(void 0!==g.recaptchaKey){const v=new WK(g);return null==a.tenantId?a._agentRecaptchaConfig=v:a._tenantRecaptchaConfigs[a.tenantId]=v,l(v.siteKey)}h(new Error("recaptcha Enterprise site key undefined"))}).catch(g=>{h(g)})});return function(l,h){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,l){const h=window.grecaptcha;HK(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u(r0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return r.auth.settings.appVerificationDisabledForTesting?(new hTe).execute("siteKey",{action:"verify"}):new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(l=>{if(!t&&HK(window.grecaptcha))o(l,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));let h=function aTe(){return n0.recaptchaEnterpriseScript}();0!==h.length&&(h+=l),IV(h).then(()=>{o(l,a,u)}).catch(g=>{u(g)})}}).catch(l=>{u(l)})})})()}}function s0(n,e,t){return EV.apply(this,arguments)}function EV(){return(EV=(0,M.A)(function*(n,e,t,r=!1,i=!1){const s=new hQ(n);let o;if(i)o=r0;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}const a=Object.assign({},e);return"mfaSmsEnrollment"===t||"mfaSmsSignIn"===t?("phoneEnrollmentInfo"in a?Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:a.phoneEnrollmentInfo.phoneNumber,recaptchaToken:a.phoneEnrollmentInfo.recaptchaToken,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in a&&Object.assign(a,{phoneSignInInfo:{recaptchaToken:a.phoneSignInInfo.recaptchaToken,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),a):(Object.assign(a,r?{captchaResp:o}:{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a)})).apply(this,arguments)}function Ld(n,e,t,r,i){return wV.apply(this,arguments)}function wV(){return wV=(0,M.A)(function*(n,e,t,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null!==(s=n._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=yield s0(n,e,t,"getOobCode"===t);return r(n,a)}return r(n,e).catch(function(){var a=(0,M.A)(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=yield s0(n,e,t,"getOobCode"===t);return r(n,l)}return Promise.reject(u)});return function(u){return a.apply(this,arguments)}}())}if("PHONE_PROVIDER"===i){if(null!==(o=n._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const a=yield s0(n,e,t);return r(n,a).catch(function(){var u=(0,M.A)(function*(l){var h;if("AUDIT"===(null===(h=n._getRecaptchaConfig())||void 0===h?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===l.code||"auth/invalid-app-credential"===l.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const g=yield s0(n,e,t,!1,!0);return r(n,g)}return Promise.reject(l)});return function(l){return u.apply(this,arguments)}}())}{const a=yield s0(n,e,t,!1,!0);return r(n,a)}}return Promise.reject(i+" provider is not supported.")}),wV.apply(this,arguments)}function pQ(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gQ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class o0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qu("not implemented")}_getIdTokenResponse(e){return qu("not implemented")}_linkToIdToken(e,t){return qu("not implemented")}_getReauthenticationResolver(e){return qu("not implemented")}}function TTe(n,e){return CV.apply(this,arguments)}function CV(){return(CV=(0,M.A)(function*(n,e){return Er(n,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function ATe(n,e){return SV.apply(this,arguments)}function SV(){return(SV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithPassword",Ir(n,e))})).apply(this,arguments)}function NV(){return(NV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithEmailLink",Ir(n,e))})).apply(this,arguments)}function OV(){return(OV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithEmailLink",Ir(n,e))})).apply(this,arguments)}class a0 extends o0{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new a0(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new a0(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,M.A)(function*(){switch(t.signInMethod){case"password":return Ld(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ATe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function RTe(n,e){return NV.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:ro(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,M.A)(function*(){switch(r.signInMethod){case"password":return Ld(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TTe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function xTe(n,e){return OV.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:ro(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Kc(n,e){return VV.apply(this,arguments)}function VV(){return(VV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signInWithIdp",Ir(n,e))})).apply(this,arguments)}class S_ extends o0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new S_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ro("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,Cc.Tt)(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new S_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Kc(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=GE(t)}return e}}class c0{constructor(e){var t,r,i,s,o,a;const u=HE(WE(e)),l=null!==(t=u.apiKey)&&void 0!==t?t:null,h=null!==(r=u.oobCode)&&void 0!==r?r:null,g=function FTe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);xe(l&&h&&g,"argument-error"),this.apiKey=l,this.operation=g,this.code=h,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function LTe(n){const e=HE(WE(n)).link,t=e?HE(WE(e)).deep_link_id:null,r=HE(WE(n)).deep_link_id;return(r?HE(WE(r)).link:null)||r||t||e||n}(e);try{return new c0(t)}catch{return null}}}let yQ=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return a0._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=c0.parseLink(r);return xe(i,"argument-error"),a0._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Qc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vQ extends Qc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let UTe=(()=>{class n extends vQ{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return S_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function IQ(n,e){return zV.apply(this,arguments)}function zV(){return(zV=(0,M.A)(function*(n,e){return qc(n,"POST","/v1/accounts:signUp",Ir(n,e))})).apply(this,arguments)}class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,M.A)(function*(){const s=yield Hc._fromIdTokenResponse(e,r,i),o=EQ(r);return new da({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,M.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=EQ(r);return new da({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function EQ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class tS extends Bc{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,tS.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new tS(e,t,r,i)}}function wQ(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?tS._fromErrorAndOperation(n,s,e,r):s})}function HV(){return(HV=(0,M.A)(function*(n,e,t=!1){const r=yield Gc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return da._forOperation(n,"link",r)})).apply(this,arguments)}function KV(){return(KV=(0,M.A)(function*(n,e,t=!1){const{auth:r}=n;if(ka(r.app))return Promise.reject(Ui(r));const i="reauthenticate";try{const s=yield Gc(n,wQ(r,i,e,n),t);xe(s.idToken,r,"internal-error");const o=YD(s.idToken);xe(o,r,"internal-error");const{sub:a}=o;return xe(n.uid===a,r,"user-mismatch"),da._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&ro(r,"user-mismatch"),s}})).apply(this,arguments)}function AQ(n,e){return QV.apply(this,arguments)}function QV(){return(QV=(0,M.A)(function*(n,e,t=!1){if(ka(n.app))return Promise.reject(Ui(n));const r="signIn",i=yield wQ(n,r,e),s=yield da._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function YV(n,e){return JV.apply(this,arguments)}function JV(){return(JV=(0,M.A)(function*(n,e){return AQ(ti(n),e)})).apply(this,arguments)}function iF(n){return sF.apply(this,arguments)}function sF(){return(sF=(0,M.A)(function*(n){const e=ti(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function dF(){return(dF=(0,M.A)(function*(n,e,t){if(ka(n.app))return Promise.reject(Ui(n));const r=ti(n),o=yield Ld(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IQ,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw"auth/password-does-not-meet-requirements"===u.code&&iF(n),u}),a=yield da._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})).apply(this,arguments)}function yF(){return(yF=(0,M.A)(function*(n,e){return Er(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function vF(){return vF=(0,M.A)(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const r=Ti(n),s={idToken:yield r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=yield Gc(r,function QTe(n,e){return yF.apply(this,arguments)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>"password"===u);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)}),vF.apply(this,arguments)}const iS="__sak";class PQ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(iS,"1"),this.storage.removeItem(iS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lbe=(()=>{class n extends PQ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uQ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});const i=t.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function Zwe(){return function T0e(){const n=ei();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,M.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,M.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,M.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),RQ=(()=>{class n extends PQ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let hbe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,M.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(u).map(function(){var g=(0,M.A)(function*(v){return v(i.origin,a)});return function(v){return g.apply(this,arguments)}}()),h=yield function dbe(n){return Promise.all(n.map(function(){var e=(0,M.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:h})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function sS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class fbe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,M.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{const h=sS("",20);s.port1.start();const g=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(g),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function li(){return window}function CF(){return typeof li().WorkerGlobalScope<"u"&&"function"==typeof li().importScripts}function DF(){return(DF=(0,M.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xQ="firebaseLocalStorageDb",oS="firebaseLocalStorage",MQ="fbase_key";class h0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function aS(n,e){return n.transaction([oS],e?"readwrite":"readonly").objectStore(oS)}function SF(){const n=indexedDB.open(xQ,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(oS,{keyPath:MQ})}catch(i){t(i)}}),n.addEventListener("success",(0,M.A)(function*(){const r=n.result;r.objectStoreNames.contains(oS)?e(r):(r.close(),yield function vbe(){const n=indexedDB.deleteDatabase(xQ);return new h0(n).toPromise()}(),e(yield SF()))}))})}function kQ(n,e,t){return PF.apply(this,arguments)}function PF(){return(PF=(0,M.A)(function*(n,e,t){const r=aS(n,!0).put({[MQ]:e,value:t});return new h0(r).toPromise()})).apply(this,arguments)}function RF(){return(RF=(0,M.A)(function*(n,e){const t=aS(n,!1).get(e),r=yield new h0(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function NQ(n,e){const t=aS(n,!0).delete(e);return new h0(t).toPromise()}const Tbe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,M.A)(function*(){return t.db||(t.db=yield SF()),t.db})()}_withRetries(t){var r=this;return(0,M.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,M.A)(function*(){return CF()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,M.A)(function*(){t.receiver=hbe._getInstance(function _be(){return CF()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,M.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,M.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,M.A)(function*(){var r,i;if(t.activeServiceWorker=yield function gbe(){return DF.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new fbe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,M.A)(function*(){if(r.sender&&r.activeServiceWorker&&function mbe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,M.A)(function*(){try{if(!indexedDB)return!1;const t=yield SF();return yield kQ(t,iS,"1"),yield NQ(t,iS),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,M.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,M.A)(function*(){return i._withPendingWrite((0,M.A)(function*(){return yield i._withRetries(s=>kQ(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,M.A)(function*(){const i=yield r._withRetries(s=>function Ibe(n,e){return RF.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,M.A)(function*(){return r._withPendingWrite((0,M.A)(function*(){return yield r._withRetries(i=>NQ(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,M.A)(function*(){const r=yield t._withRetries(o=>{const a=aS(o,!1).getAll();return new h0(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;if(0!==r.length)for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,M.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Nf(n,e){return e?Wc(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}dQ("rcb"),new XE(3e4,6e4);class jF extends o0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mbe(n){return AQ(n.auth,new jF(n),n.bypassAuthState)}function kbe(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),function bQ(n,e){return KV.apply(this,arguments)}(t,new jF(n),n.bypassAuthState)}function Nbe(n){return zF.apply(this,arguments)}function zF(){return(zF=(0,M.A)(function*(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),function GV(n,e){return HV.apply(this,arguments)}(t,new jF(n),n.bypassAuthState)})).apply(this,arguments)}class VQ{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,M.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,M.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(l))}catch(h){t.reject(h)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mbe;case"linkViaPopup":case"linkViaRedirect":return Nbe;case"reauthViaPopup":case"reauthViaRedirect":return kbe;default:ro(this.auth,"internal-error")}}resolve(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Obe=new XE(2e3,1e4);function $F(){return($F=(0,M.A)(function*(n,e,t){if(ka(n.app))return Promise.reject(Ls(n,"operation-not-supported-in-this-environment"));const r=ti(n);!function A_(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&ro(n,"argument-error"),XO(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,Qc);const i=Nf(r,t);return new HF(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let HF=(()=>{class n extends VQ{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,M.A)(function*(){const r=yield t.execute();return xe(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,M.A)(function*(){$c(1===t.filter.length,"Popup operations only handle one event");const r=sS();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(Ls(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,Obe.get())};t()}}return n.currentPopupAction=null,n})();const Fbe="pendingRedirect",p0=new Map;class Lbe extends VQ{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,M.A)(function*(){let r=p0.get(t.auth._key());if(!r){try{const s=(yield function Ube(n,e){return WF.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}p0.set(t.auth._key(),r)}return t.bypassAuthState||p0.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,M.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,M.A)(function*(){})()}cleanUp(){}}function WF(){return(WF=(0,M.A)(function*(n,e){const t=function LQ(n){return JD(Fbe,n.config.apiKey,n.name)}(e),r=function FQ(n){return Wc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Bbe(n,e){p0.set(n._key(),e)}function UQ(n,e){return e2.apply(this,arguments)}function e2(){return(e2=(0,M.A)(function*(n,e,t=!1){if(ka(n.app))return Promise.reject(Ui(n));const r=ti(n),i=Nf(r,e),o=yield new Lbe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class Gbe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Hbe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zQ(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!zQ(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ls(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jQ(e))}saveEventToCache(e){this.cachedEventUids.add(jQ(e)),this.lastProcessedEventTime=Date.now()}}function jQ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zQ({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function n2(){return(n2=(0,M.A)(function*(n,e={}){return Er(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Kbe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qbe=/^https?/;function r2(){return r2=(0,M.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function Wbe(n){return n2.apply(this,arguments)}(n);for(const t of e)try{if(Jbe(t))return}catch{}ro(n,"unauthorized-domain")}),r2.apply(this,arguments)}function Jbe(n){const e=JE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!Qbe.test(t))return!1;if(Kbe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Xbe=new XE(3e4,6e4);function $Q(){const n=li().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let uS=null;const tAe=new XE(5e3,15e3),nAe="__/auth/iframe",rAe="emulator/auth/iframe",iAe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sAe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oAe(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?tV(e,rAe):`https://${n.config.authDomain}/${nAe}`,r={apiKey:e.apiKey,appName:n.name,v:b_},i=sAe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${GE(r).slice(1)}`}function i2(){return i2=(0,M.A)(function*(n){const e=yield function eAe(n){return uS=uS||function Zbe(n){return new Promise((e,t)=>{var r,i,s;function o(){$Q(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$Q(),t(Ls(n,"network-request-failed"))},timeout:Xbe.get()})}if(null!==(i=null===(r=li().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=li().gapi)||void 0===s||!s.load){const a=dQ("iframefcb");return li()[a]=()=>{gapi.load?o():t(Ls(n,"network-request-failed"))},IV(`${function uTe(){return n0.gapiScript}()}?onload=${a}`).catch(u=>t(u))}o()}}).catch(e=>{throw uS=null,e})}(n),uS}(n),t=li().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:oAe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iAe,dontclear:!0},r=>new Promise(function(){var i=(0,M.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Ls(n,"network-request-failed"),u=li().setTimeout(()=>{o(a)},tAe.get());function l(){li().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),i2.apply(this,arguments)}const uAe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qQ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const gAe="__/auth/handler",mAe="emulator/auth/handler",_Ae=encodeURIComponent("fac");function GQ(n,e,t,r,i,s){return s2.apply(this,arguments)}function s2(){return(s2=(0,M.A)(function*(n,e,t,r,i,s){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:b_,eventId:i};if(e instanceof Qc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",function S0e(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof vQ){const h=e.getScopes().filter(g=>""!==g);h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))void 0===a[h]&&delete a[h];const u=yield n._getAppCheckToken(),l=u?`#${_Ae}=${encodeURIComponent(u)}`:"";return`${function yAe({config:n}){return n.emulator?tV(n,mAe):`https://${n.authDomain}/${gAe}`}(n)}?${GE(a).slice(1)}${l}`})).apply(this,arguments)}const o2="webStorageSupport",IAe=class vAe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RQ,this._completeRedirectFn=UQ,this._overrideRedirectResult=Bbe}_openPopup(e,t,r,i){var s=this;return(0,M.A)(function*(){var o;$c(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield GQ(e,t,r,JE(),i);return function fAe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},uAe),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ei().toLowerCase();t&&(a=rQ(l)?"_blank":t),tQ(l)&&(e=e||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((v,[E,T])=>`${v}${E}=${T},`,"");if(function Xwe(n=ei()){var e;return yV(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function pAe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new qQ(null);const g=window.open(e||"",a,h);xe(g,n,"popup-blocked");try{g.focus()}catch{}return new qQ(g)}(e,a,sS())})()}_openRedirect(e,t,r,i){var s=this;return(0,M.A)(function*(){return yield s._originValidation(e),function pbe(n){li().location.href=n}(yield GQ(e,t,r,JE(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):($c(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,M.A)(function*(){const r=yield function aAe(n){return i2.apply(this,arguments)}(e),i=new Gbe(e);return r.register("authEvent",s=>(xe(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(o2,{type:o2},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[o2];void 0!==o&&t(!!o),ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Ybe(n){return r2.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uQ()||nQ()||yV()}};var QQ="@firebase/auth";class EAe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,M.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const AAe=TK("authIdTokenMaxAge")||300;let JQ=null;const CAe=n=>function(){var e=(0,M.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>AAe)return;const s=r?.token;JQ!==s&&(JQ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function g0(n=kK()){const e=WD(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function _Te(n,e){const t=WD(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(w_(t.getOptions(),e??{}))return i;ro(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:IAe,persistence:[Tbe,lbe,RQ]}),r=TK("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=CAe(s.toString());(function rbe(n,e,t){Ti(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function nbe(n,e,t,r){Ti(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}}const i=EK("auth");return i&&function vTe(n,e,t){const r=ti(n);xe(r._canInitEmulator,r,"emulator-config-failed"),xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=pQ(e),{host:o,port:a}=function ITe(n){const e=pQ(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gQ(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:gQ(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function ETe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function sTe(n){n0=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ls("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function DAe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function TAe(n){T_(new Rf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cQ(n)},l=new iTe(r,i,s,u);return function yTe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),T_(new Rf("auth-internal",e=>{const t=ti(e.getProvider("auth").getImmediate());return new EAe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zc(QQ,"1.8.1",function wAe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),zc(QQ,"1.8.1","esm2017")}("Browser");var Of,eY,XQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZQ={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(D,b,C){C||(C=0);var x=Array(16);if("string"==typeof b)for(var k=0;16>k;++k)x[k]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(k=0;16>k;++k)x[k]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;var V=D.g[3],A=(b=D.g[0])+(V^(C=D.g[1])&((k=D.g[2])^V))+x[0]+3614090360&4294967295;A=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=(C=(k=(V=(b=C+(A<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[1]+3905402710&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[2]+606105819&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[3]+3250441966&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[4]+4118548399&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[5]+1200080426&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[6]+2821735955&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[7]+4249261313&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[8]+1770035416&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[9]+2336552879&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[10]+4294925233&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[11]+2304563134&4294967295)<<22&4294967295|A>>>10))+((A=b+(V^C&(k^V))+x[12]+1804603682&4294967295)<<7&4294967295|A>>>25))+((A=V+(k^b&(C^k))+x[13]+4254626195&4294967295)<<12&4294967295|A>>>20))+((A=k+(C^V&(b^C))+x[14]+2792965006&4294967295)<<17&4294967295|A>>>15))+((A=C+(b^k&(V^b))+x[15]+1236535329&4294967295)<<22&4294967295|A>>>10))+((A=b+(k^V&(C^k))+x[1]+4129170786&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[6]+3225465664&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[11]+643717713&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[0]+3921069994&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[5]+3593408605&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[10]+38016083&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[15]+3634488961&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[4]+3889429448&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[9]+568446438&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[14]+3275163606&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[3]+4107603335&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[8]+1163531501&4294967295)<<20&4294967295|A>>>12))+((A=b+(k^V&(C^k))+x[13]+2850285829&4294967295)<<5&4294967295|A>>>27))+((A=V+(C^k&(b^C))+x[2]+4243563512&4294967295)<<9&4294967295|A>>>23))+((A=k+(b^C&(V^b))+x[7]+1735328473&4294967295)<<14&4294967295|A>>>18))+((A=C+(V^b&(k^V))+x[12]+2368359562&4294967295)<<20&4294967295|A>>>12))+((A=b+(C^k^V)+x[5]+4294588738&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[8]+2272392833&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[11]+1839030562&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[14]+4259657740&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[1]+2763975236&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[4]+1272893353&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[7]+4139469664&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[10]+3200236656&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[13]+681279174&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[0]+3936430074&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[3]+3572445317&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[6]+76029189&4294967295)<<23&4294967295|A>>>9))+((A=b+(C^k^V)+x[9]+3654602809&4294967295)<<4&4294967295|A>>>28))+((A=V+(b^C^k)+x[12]+3873151461&4294967295)<<11&4294967295|A>>>21))+((A=k+(V^b^C)+x[15]+530742520&4294967295)<<16&4294967295|A>>>16))+((A=C+(k^V^b)+x[2]+3299628645&4294967295)<<23&4294967295|A>>>9))+((A=b+(k^(C|~V))+x[0]+4096336452&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[7]+1126891415&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[14]+2878612391&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[5]+4237533241&4294967295)<<21&4294967295|A>>>11))+((A=b+(k^(C|~V))+x[12]+1700485571&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[3]+2399980690&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[10]+4293915773&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[1]+2240044497&4294967295)<<21&4294967295|A>>>11))+((A=b+(k^(C|~V))+x[8]+1873313359&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[15]+4264355552&4294967295)<<10&4294967295|A>>>22))+((A=k+(b^(V|~C))+x[6]+2734768916&4294967295)<<15&4294967295|A>>>17))+((A=C+(V^(k|~b))+x[13]+1309151649&4294967295)<<21&4294967295|A>>>11))+((V=(b=C+((A=b+(k^(C|~V))+x[4]+4149444226&4294967295)<<6&4294967295|A>>>26))+((A=V+(C^(b|~k))+x[11]+3174756917&4294967295)<<10&4294967295|A>>>22))^((k=V+((A=k+(b^(V|~C))+x[2]+718787259&4294967295)<<15&4294967295|A>>>17))|~b))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+V&4294967295}function o(D,b){this.h=b;for(var C=[],x=!0,k=D.length-1;0<=k;k--){var V=0|D[k];x&&V==b||(C[k]=V,x=!1)}this.g=C}(function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,k,V){for(var A=Array(arguments.length-2),Ai=2;Ai<arguments.length;Ai++)A[Ai-2]=arguments[Ai];return b.prototype[k].apply(x,A)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(D,b){void 0===b&&(b=D.length);for(var C=b-this.blockSize,x=this.B,k=this.h,V=0;V<b;){if(0==k)for(;V<=C;)i(this,D,V),V+=this.blockSize;if("string"==typeof D){for(;V<b;)if(x[k++]=D.charCodeAt(V++),k==this.blockSize){i(this,x),k=0;break}}else for(;V<b;)if(x[k++]=D[V++],k==this.blockSize){i(this,x),k=0;break}}this.h=k,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=255&C,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var x=0;32>x;x+=8)D[C++]=this.g[b]>>>x&255;return D};var a={};function u(D){return-128<=D&&128>D?function s(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}(D,function(b){return new o([0|b],0>b?-1:0)}):new o([0|D],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return R(l(-D));for(var b=[],C=1,x=0;D>=C;x++)b[x]=D/C|0,C*=4294967296;return new o(b,0)}var g=u(0),v=u(1),E=u(16777216);function T(D){if(0!=D.h)return!1;for(var b=0;b<D.g.length;b++)if(0!=D.g[b])return!1;return!0}function P(D){return-1==D.h}function R(D){for(var b=D.g.length,C=[],x=0;x<b;x++)C[x]=~D.g[x];return new o(C,~D.h).add(v)}function z(D,b){return D.add(R(b))}function j(D,b){for(;(65535&D[b])!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function H(D,b){this.g=D,this.h=b}function te(D,b){if(T(b))throw Error("division by zero");if(T(D))return new H(g,g);if(P(D))return b=te(R(D),b),new H(R(b.g),R(b.h));if(P(b))return b=te(D,R(b)),new H(R(b.g),b.h);if(30<D.g.length){if(P(D)||P(b))throw Error("slowDivide_ only works with positive integers.");for(var C=v,x=b;0>=x.l(D);)C=me(C),x=me(x);var k=_e(C,1),V=_e(x,1);for(x=_e(x,2),C=_e(C,2);!T(x);){var A=V.add(x);0>=A.l(D)&&(k=k.add(C),V=A),x=_e(x,1),C=_e(C,1)}return b=z(D,k.j(b)),new H(k,b)}for(k=g;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),x=48>=(x=Math.ceil(Math.log(C)/Math.LN2))?1:Math.pow(2,x-48),A=(V=l(C)).j(b);P(A)||0<A.l(D);)A=(V=l(C-=x)).j(b);T(V)&&(V=v),k=k.add(V),D=z(D,A)}return new H(k,D)}function me(D){for(var b=D.g.length+1,C=[],x=0;x<b;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new o(C,D.h)}function _e(D,b){var C=b>>5;b%=32;for(var x=D.g.length-C,k=[],V=0;V<x;V++)k[V]=0<b?D.i(V+C)>>>b|D.i(V+C+1)<<32-b:D.i(V+C);return new o(k,D.h)}(n=o.prototype).m=function(){if(P(this))return-R(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*b,b*=4294967296}return D},n.toString=function(D){if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var b=l(Math.pow(D,6)),C=this,x="";;){var k=te(C,b).g,V=((0<(C=z(C,k.j(b))).g.length?C.g[0]:C.h)>>>0).toString(D);if(T(C=k))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h},n.l=function(D){return P(D=z(this,D))?-1:T(D)?0:1},n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0,k=0;k<=b;k++){var V=x+(65535&this.i(k))+(65535&D.i(k)),A=(V>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);x=A>>>16,C[k]=(A&=65535)<<16|(V&=65535)}return new o(C,-2147483648&C[C.length-1]?-1:0)},n.j=function(D){if(T(this)||T(D))return g;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(E)&&0>D.l(E))return l(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],x=0;x<2*b;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<D.g.length;k++){var V=this.i(x)>>>16,A=65535&this.i(x),Ai=D.i(k)>>>16,Oa=65535&D.i(k);C[2*x+2*k]+=A*Oa,j(C,2*x+2*k),C[2*x+2*k+1]+=V*Oa,j(C,2*x+2*k+1),C[2*x+2*k+1]+=A*Ai,j(C,2*x+2*k+1),C[2*x+2*k+2]+=V*Ai,j(C,2*x+2*k+2)}for(x=0;x<b;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=b;x<2*b;x++)C[x]=0;return new o(C,0)},n.A=function(D){return te(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)&D.i(x);return new o(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)|D.i(x);return new o(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],x=0;x<b;x++)C[x]=this.i(x)^D.i(x);return new o(C,this.h^D.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eY=ZQ.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function h(D,b){if(0==D.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==D.charAt(0))return R(h(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(b,8)),x=g,k=0;k<D.length;k+=8){var V=Math.min(8,D.length-k),A=parseInt(D.substring(k,k+V),b);8>V?(V=l(Math.pow(b,V)),x=x.j(V).add(l(A))):x=(x=x.j(C)).add(l(A))}return x},Of=ZQ.Integer=o}).apply(typeof XQ<"u"?XQ:typeof self<"u"?self:typeof window<"u"?window:{});var tY,m0,nY,dS,u2,rY,iY,sY,lS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c},r=function t(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof lS&&lS];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}(this);!function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var N=c[I];if(!(N in _))break e;_=_[N]}(p=p(I=_[c=c[c.length-1]]))!=I&&null!=p&&e(_,c,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(c){return c||function(){return function s(c,p){c instanceof String&&(c+="");var _=0,I=!1,N={next:function(){if(!I&&_<c.length){var B=_++;return{value:p(B,c[B]),done:!1}}return I=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}(this,function(p,_){return _})}});var o=o||{},a=this||self;function u(c){var p=typeof c;return"array"==(p="object"!=p?p:c?Array.isArray(c)?"array":p:"null")||"object"==p&&"number"==typeof c.length}function l(c){var p=typeof c;return"object"==p&&null!=c||"function"==p}function h(c,p,_){return c.call.apply(c.bind,arguments)}function g(c,p,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,I),c.apply(p,N)}}return function(){return c.apply(p,arguments)}}function v(c,p,_){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function E(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function T(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,N,B){for(var ne=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ne[dt-2]=arguments[dt];return p.prototype[N].apply(I,ne)}}function P(c){const p=c.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=c[I];return _}return[]}function R(c,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const N=c.length||0,B=I.length||0;c.length=N+B;for(let ne=0;ne<B;ne++)c[N+ne]=I[ne]}else c.push(I)}}function j(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function te(c){return te[" "](c),c}te[" "]=function(){};var me=!(-1==H().indexOf("Gecko")||-1!=H().toLowerCase().indexOf("webkit")&&-1==H().indexOf("Edge")||-1!=H().indexOf("Trident")||-1!=H().indexOf("MSIE")||-1!=H().indexOf("Edge"));function _e(c,p,_){for(const I in c)p.call(_,c[I],I,c)}function b(c){const p={};for(const _ in c)p[_]=c[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,p){let _,I;for(let N=1;N<arguments.length;N++){for(_ in I=arguments[N],I)c[_]=I[_];for(let B=0;B<C.length;B++)_=C[B],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function k(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function V(c){a.setTimeout(()=>{throw c},0)}function A(){var c=np;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}var Oa=new class z{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new RU,c=>c.reset());class RU{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,Fa=!1,np=new class Ai{constructor(){this.h=this.g=null}add(p,_){const I=Oa.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}},tw=()=>{const c=a.Promise.resolve(void 0);Va=()=>{c.then(xU)}};var xU=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){V(_)}var p=Oa;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}Fa=!1};function is(){this.s=this.s,this.C=this.C}function En(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}is.prototype.s=!1,is.prototype.ma=function(){this.s||(this.s=!0,this.N())},is.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},En.prototype.h=function(){this.defaultPrevented=!0};var MU=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return c}();function La(c,p){if(En.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(me){e:{try{te(p.nodeName);var N=!0;break e}catch{}N=!1}N||(p=null)}}else"mouseover"==_?p=c.fromElement:"mouseout"==_&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType="string"==typeof c.pointerType?c.pointerType:kU[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&La.aa.h.call(this)}}T(La,En);var kU={2:"touch",3:"pen",4:"mouse"};La.prototype.h=function(){La.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ua="closure_listenable_"+(1e6*Math.random()|0),NU=0;function OU(c,p,_,I,N){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=N,this.key=++NU,this.da=this.fa=!1}function il(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sl(c){this.src=c,this.g={},this.h=0}function rp(c,p){var _=p.type;if(_ in c.g){var B,I=c.g[_],N=Array.prototype.indexOf.call(I,p,void 0);(B=0<=N)&&Array.prototype.splice.call(I,N,1),B&&(il(p),0==c.g[_].length&&(delete c.g[_],c.h--))}}function ip(c,p,_,I){for(var N=0;N<c.length;++N){var B=c[N];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==I)return N}return-1}sl.prototype.add=function(c,p,_,I,N){var B=c.toString();(c=this.g[B])||(c=this.g[B]=[],this.h++);var ne=ip(c,p,I,N);return-1<ne?(p=c[ne],_||(p.fa=!1)):((p=new OU(p,this.src,B,!!I,N)).fa=_,c.push(p)),p};var sp="closure_lm_"+(1e6*Math.random()|0),op={};function nw(c,p,_,I,N){if(I&&I.once)return iw(c,p,_,I,N);if(Array.isArray(p)){for(var B=0;B<p.length;B++)nw(c,p[B],_,I,N);return null}return _=lp(_),c&&c[Ua]?c.K(p,_,l(I)?!!I.capture:!!I,N):rw(c,p,_,!1,I,N)}function rw(c,p,_,I,N,B){if(!p)throw Error("Invalid event type");var ne=l(N)?!!N.capture:!!N,dt=up(c);if(dt||(c[sp]=dt=new sl(c)),(_=dt.add(p,_,I,ne,B)).proxy)return _;if(I=function VU(){const p=FU;return function c(_){return p.call(c.src,c.listener,_)}}(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)MU||(N=ne),void 0===N&&(N=!1),c.addEventListener(p.toString(),I,N);else if(c.attachEvent)c.attachEvent(ow(p.toString()),I);else{if(!c.addListener||!c.removeListener)throw Error("addEventListener and attachEvent are unavailable.");c.addListener(I)}return _}function iw(c,p,_,I,N){if(Array.isArray(p)){for(var B=0;B<p.length;B++)iw(c,p[B],_,I,N);return null}return _=lp(_),c&&c[Ua]?c.L(p,_,l(I)?!!I.capture:!!I,N):rw(c,p,_,!0,I,N)}function sw(c,p,_,I,N){if(Array.isArray(p))for(var B=0;B<p.length;B++)sw(c,p[B],_,I,N);else I=l(I)?!!I.capture:!!I,_=lp(_),c&&c[Ua]?(c=c.i,(p=String(p).toString())in c.g&&-1<(_=ip(B=c.g[p],_,I,N))&&(il(B[_]),Array.prototype.splice.call(B,_,1),0==B.length&&(delete c.g[p],c.h--))):c&&(c=up(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ip(p,_,I,N)),(_=-1<c?p[c]:null)&&ap(_))}function ap(c){if("number"!=typeof c&&c&&!c.da){var p=c.src;if(p&&p[Ua])rp(p.i,c);else{var _=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(_,I,c.capture):p.detachEvent?p.detachEvent(ow(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=up(p))?(rp(_,c),0==_.h&&(_.src=null,p[sp]=null)):il(c)}}}function ow(c){return c in op?op[c]:op[c]="on"+c}function FU(c,p){if(c.da)c=!0;else{p=new La(p,this);var _=c.listener,I=c.ha||c.src;c.fa&&ap(c),c=_.call(I,p)}return c}function up(c){return(c=c[sp])instanceof sl?c:null}var cp="__closure_events_fn_"+(1e9*Math.random()>>>0);function lp(c){return"function"==typeof c?c:(c[cp]||(c[cp]=function(p){return c.handleEvent(p)}),c[cp])}function wn(){is.call(this),this.i=new sl(this),this.M=this,this.F=null}function Mn(c,p){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=p.type||p,"string"==typeof p)p=new En(p,c);else if(p instanceof En)p.target=p.target||c;else{var N=p;x(p=new En(I,c),N)}if(N=!0,_)for(var B=_.length-1;0<=B;B--){var ne=p.g=_[B];N=ol(ne,I,!0,p)&&N}if(N=ol(ne=p.g=c,I,!0,p)&&N,N=ol(ne,I,!1,p)&&N,_)for(B=0;B<_.length;B++)N=ol(ne=p.g=_[B],I,!1,p)&&N}function ol(c,p,_,I){if(!(p=c.i.g[String(p)]))return!0;p=p.concat();for(var N=!0,B=0;B<p.length;++B){var ne=p[B];if(ne&&!ne.da&&ne.capture==_){var dt=ne.listener,dn=ne.ha||ne.src;ne.fa&&rp(c.i,ne),N=!1!==dt.call(dn,I)&&N}}return N&&!I.defaultPrevented}function aw(c,p,_){if("function"==typeof c)_&&(c=v(c,_));else{if(!c||"function"!=typeof c.handleEvent)throw Error("Invalid listener argument");c=v(c.handleEvent,c)}return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function uw(c){c.g=aw(()=>{c.g=null,c.i&&(c.i=!1,uw(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}T(wn,is),wn.prototype[Ua]=!0,wn.prototype.removeEventListener=function(c,p,_,I){sw(this,c,p,_,I)},wn.prototype.N=function(){if(wn.aa.N.call(this),this.i){var p,c=this.i;for(p in c.g){for(var _=c.g[p],I=0;I<_.length;I++)il(_[I]);delete c.g[p],c.h--}}this.F=null},wn.prototype.K=function(c,p,_,I){return this.i.add(String(c),p,!1,_,I)},wn.prototype.L=function(c,p,_,I){return this.i.add(String(c),p,!0,_,I)};class LU extends is{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ba(c){is.call(this),this.h=c,this.g={}}T(Ba,is);var cw=[];function lw(c){_e(c.g,function(p,_){this.g.hasOwnProperty(_)&&ap(p)},c),c.g={}}Ba.prototype.N=function(){Ba.aa.N.call(this),lw(this)},Ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dp=a.JSON.stringify,UU=a.JSON.parse,BU=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hp(){}function hw(){}hp.prototype.h=null;var ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fp(){En.call(this,"d")}function pp(){En.call(this,"c")}T(fp,En),T(pp,En);var Us={},fw=null;function al(){return fw=fw||new wn}function pw(c){En.call(this,Us.La,c)}function za(c){const p=al();Mn(p,new pw(p))}function gw(c,p){En.call(this,Us.STAT_EVENT,c),this.stat=p}function kn(c){const p=al();Mn(p,new gw(p,c))}function mw(c,p){En.call(this,Us.Ma,c),this.size=p}function $a(c,p){if("function"!=typeof c)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function qa(){this.g=!0}function Bo(c,p,_,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+function qU(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_)for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var N=I[1];if(Array.isArray(N)&&!(1>N.length)){var B=N[0];if("noop"!=B&&"stop"!=B&&"close"!=B)for(var ne=1;ne<N.length;ne++)N[ne]=""}}}return dp(_)}catch{return p}}(c,_)+(I?" "+I:"")})}Us.La="serverreachability",T(pw,En),Us.STAT_EVENT="statevent",T(gw,En),Us.Ma="timingevent",T(mw,En),qa.prototype.xa=function(){this.g=!1},qa.prototype.info=function(){};var gp,ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_w={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cl(){}function ss(c,p,_,I){this.j=c,this.i=p,this.l=_,this.R=I||1,this.U=new Ba(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yw}function yw(){this.i=null,this.g="",this.h=!1}T(cl,hp),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},gp=new cl;var vw={},mp={};function _p(c,p,_){c.L=1,c.v=fl(Ci(p)),c.m=_,c.P=!0,Iw(c,null)}function Iw(c,p){c.F=Date.now(),ll(c),c.A=Ci(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Nw(_.i,"t",I),c.C=0,_=c.j.J,c.h=new yw,c.g=Xw(c.j,_?p:null,!c.m),0<c.O&&(c.M=new LU(v(c.Y,c,c.g),c.O)),p=c.U,_=c.g,I=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(cw[0]=N.toString()),N=cw);for(var B=0;B<N.length;B++){var ne=nw(_,N[B],I||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),za(),function jU(c,p,_,I,N,B){c.info(function(){if(c.g)if(B)for(var ne="",dt=B.split("&"),dn=0;dn<dt.length;dn++){var Xe=dt[dn].split("=");if(1<Xe.length){var Tn=Xe[0];Xe=Xe[1];var bn=Tn.split("_");ne=2<=bn.length&&"type"==bn[1]?ne+(Tn+"=")+Xe+"&":ne+(Tn+"=redacted&")}}else ne=null;else ne=B;return"XMLHTTP REQ ("+I+") [attempt "+N+"]: "+p+"\n"+_+"\n"+ne})}(c.i,c.u,c.A,c.l,c.R,c.m)}function Ew(c){return!!c.g&&"GET"==c.u&&2!=c.L&&c.j.Ca}function GU(c,p){var _=c.C,I=p.indexOf("\n",_);return-1==I?mp:(_=Number(p.substring(_,I)),isNaN(_)?vw:(I+=1)+_>p.length?mp:(p=p.slice(I,I+_),c.C=I+_,p))}function ll(c){c.S=Date.now()+c.I,ww(c,c.I)}function ww(c,p){if(null!=c.B)throw Error("WatchDog timer not null");c.B=$a(v(c.ba,c),p)}function yp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}function Ga(c){0==c.j.G||c.J||Kw(c.j,c)}function Bs(c){yp(c);var p=c.M;p&&"function"==typeof p.ma&&p.ma(),c.M=null,lw(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function vp(c,p){try{var _=c.j;if(0!=_.G&&(_.g==c||Ip(_.h,c)))if(!c.K&&Ip(_.h,c)&&3==_.G){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&3==I.length){var N=I;if(0==N[0]){e:if(!_.u){if(_.g){if(!(_.g.F+3e3<c.F))break e;yl(_),ml(_)}bp(_),kn(18)}}else _.za=N[1],0<_.za-_.T&&37500>N[2]&&_.F&&0==_.v&&!_.C&&(_.C=$a(v(_.Za,_),6e3));if(1>=Aw(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else zs(_,11)}else if((c.K||_.g==c)&&yl(_),!j(p))for(N=_.Da.g.parse(p),p=0;p<N.length;p++){let Xe=N[p];if(_.T=Xe[0],Xe=Xe[1],2==_.G)if("c"==Xe[0]){_.K=Xe[1],_.ia=Xe[2];const Tn=Xe[3];null!=Tn&&(_.la=Tn,_.j.info("VER="+_.la));const bn=Xe[4];null!=bn&&(_.Aa=bn,_.j.info("SVER="+_.Aa));const $o=Xe[5];null!=$o&&"number"==typeof $o&&0<$o&&(_.L=I=1.5*$o,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Mr=c.g;if(Mr){const Il=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var B=I.h;B.g||-1==Il.indexOf("spdy")&&-1==Il.indexOf("quic")&&-1==Il.indexOf("h2")||(B.j=B.l,B.g=new Set,B.h&&(Ep(B,B.h),B.h=null))}if(I.D){const Cp=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cp&&(I.ya=Cp,pt(I.I,I.D,Cp))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms"));var ne=c;if((I=_).qa=Jw(I,I.J?I.ia:null,I.W),ne.K){Cw(I.h,ne);var dt=ne,dn=I.L;dn&&(dt.I=dn),dt.B&&(yp(dt),ll(dt)),I.g=ne}else Hw(I);0<_.i.length&&_l(_)}else"stop"!=Xe[0]&&"close"!=Xe[0]||zs(_,7);else 3==_.G&&("stop"==Xe[0]||"close"==Xe[0]?"stop"==Xe[0]?zs(_,7):Tp(_):"noop"!=Xe[0]&&_.l&&_.l.ta(Xe),_.v=0)}za()}catch{}}ss.prototype.ca=function(c){c=c.target;const p=this.M;p&&3==Di(c)?p.j():this.Y(c)},ss.prototype.Y=function(c){try{if(c==this.g)e:{const bn=Di(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>bn)&&(3!=bn||this.g&&(this.h.h||this.g.oa()||jw(this.g)))){this.J||4!=bn||7==p||za(),yp(this);var _=this.g.Z();this.X=_;t:if(Ew(this)){var I=jw(this.g);c="";var N=I.length,B=4==Di(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bs(this),Ga(this);var ne="";break t}this.h.i=new a.TextDecoder}for(p=0;p<N;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(B&&p==N-1)});I.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=200==_,function zU(c,p,_,I,N,B,ne){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+N+"]: "+p+"\n"+_+"\n"+B+" "+ne})}(this.i,this.u,this.A,this.l,this.R,bn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,dn=this.g;if((dt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(dt)){var Xe=dt;break t}}Xe=null}if(!(_=Xe)){this.o=!1,this.s=3,kn(12),Bs(this),Ga(this);break e}Bo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vp(this,_)}if(this.P){let Mr;for(_=!0;!this.J&&this.C<ne.length;){if(Mr=GU(this,ne),Mr==mp){4==bn&&(this.s=4,kn(14),_=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}if(Mr==vw){this.s=4,kn(15),Bo(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}Bo(this.i,this.l,Mr,null),vp(this,Mr)}if(Ew(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=bn||0!=ne.length||this.h.h||(this.s=1,kn(16),_=!1),this.o=this.o&&_,_){if(0<ne.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Ap(Tn),Tn.M=!0,kn(11))}}else Bo(this.i,this.l,ne,"[Invalid Chunked Response]"),Bs(this),Ga(this)}else Bo(this.i,this.l,ne,null),vp(this,ne);4==bn&&Bs(this),this.o&&!this.J&&(4==bn?Kw(this.j,this):(this.o=!1,ll(this)))}else(function uB(c){const p={};c=(c.g&&2<=Di(c)&&c.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<c.length;I++){if(j(c[I]))continue;var _=k(c[I]);const N=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();const B=p[N]||[];p[N]=B,B.push(_)}!function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}(p,function(I){return I.join(", ")})})(this.g),400==_&&0<ne.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Bs(this),Ga(this)}}}catch{}},ss.prototype.cancel=function(){this.J=!0,Bs(this)},ss.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(function $U(c,p){c.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(za(),kn(17)),Bs(this),this.s=2,Ga(this)):ww(this,this.S-c)};var HU=class{constructor(c,p){this.g=c,this.map=p}};function Tw(c){this.l=c||10,c=a.PerformanceNavigationTiming?0<(c=a.performance.getEntriesByType("navigation")).length&&("hq"==c[0].nextHopProtocol||"h2"==c[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bw(c){return!!c.h||!!c.g&&c.g.size>=c.j}function Aw(c){return c.h?1:c.g?c.g.size:0}function Ip(c,p){return c.h?c.h==p:!!c.g&&c.g.has(p)}function Ep(c,p){c.g?c.g.add(p):c.h=p}function Cw(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}function Dw(c){if(null!=c.h)return c.i.concat(c.h.D);if(null!=c.g&&0!==c.g.size){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return P(c.i)}function Sw(c,p){if(c.forEach&&"function"==typeof c.forEach)c.forEach(p,void 0);else if(u(c)||"string"==typeof c)Array.prototype.forEach.call(c,p,void 0);else for(var _=function KU(c){if(c.na&&"function"==typeof c.na)return c.na();if(!c.V||"function"!=typeof c.V){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||"string"==typeof c){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const I in c)p[_++]=I;return p}}}(c),I=function WU(c){if(c.V&&"function"==typeof c.V)return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if("string"==typeof c)return c.split("");if(u(c)){for(var p=[],_=c.length,I=0;I<_;I++)p.push(c[I]);return p}for(I in p=[],_=0,c)p[_++]=c[I];return p}(c),N=I.length,B=0;B<N;B++)p.call(void 0,I[B],_&&_[B],c)}Tw.prototype.cancel=function(){if(this.i=Dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const c of this.g.values())c.cancel();this.g.clear()}};var Pw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function js(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof js){this.h=c.h,dl(this,c.j),this.o=c.o,this.g=c.g,hl(this,c.s),this.l=c.l;var p=c.i,_=new Ka;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Rw(this,_),this.m=c.m}else c&&(p=String(c).match(Pw))?(this.h=!1,dl(this,p[1]||"",!0),this.o=Ha(p[2]||""),this.g=Ha(p[3]||"",!0),hl(this,p[4]),this.l=Ha(p[5]||"",!0),Rw(this,p[6]||"",!0),this.m=Ha(p[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}function Ci(c){return new js(c)}function dl(c,p,_){c.j=_?Ha(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hl(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Rw(c,p,_){p instanceof Ka?(c.i=p,function tB(c,p){p&&!c.j&&(os(c),c.i=null,c.g.forEach(function(_,I){var N=I.toLowerCase();I!=N&&(Mw(this,I),Nw(this,N,_))},c)),c.j=p}(c.i,c.h)):(_||(p=Wa(p,ZU)),c.i=new Ka(p,c.h))}function pt(c,p,_){c.i.set(p,_)}function fl(c){return pt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ha(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wa(c,p,_){return"string"==typeof c?(c=encodeURI(c).replace(p,YU),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YU(c){return"%"+((c=c.charCodeAt(0))>>4&15).toString(16)+(15&c).toString(16)}js.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Wa(p,xw,!0),":");var _=this.g;return(_||"file"==p)&&(c.push("//"),(p=this.o)&&c.push(Wa(p,xw,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.s)&&c.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&c.push("/"),c.push(Wa(_,"/"==_.charAt(0)?XU:JU,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Wa(_,eB)),c.join("")};var xw=/[#\/\?@]/g,JU=/[#\?:]/g,XU=/[#\?]/g,ZU=/[#\?@]/g,eB=/#/g;function Ka(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function os(c){c.g||(c.g=new Map,c.h=0,c.i&&function QU(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),N=null;if(0<=I){var B=c[_].substring(0,I);N=c[_].substring(I+1)}else B=c[_];p(B,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}function Mw(c,p){os(c),p=jo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function kw(c,p){return os(c),p=jo(c,p),c.g.has(p)}function Nw(c,p,_){Mw(c,p),0<_.length&&(c.i=null,c.g.set(jo(c,p),P(_)),c.h+=_.length)}function jo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function as(c,p,_,I,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),I(_)}catch{}}function iB(){this.g=new BU}function sB(c,p,_){const I=_||"";try{Sw(c,function(N,B){let ne=N;l(N)&&(ne=dp(N)),p.push(I+B+"="+encodeURIComponent(ne))})}catch(N){throw p.push(I+"type="+encodeURIComponent("_badmap")),N}}function Qa(c){this.l=c.Ub||null,this.j=c.eb||!1}function pl(c,p){wn.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ow(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}function Ya(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ja(c)}function Ja(c){c.onreadystatechange&&c.onreadystatechange.call(c)}function Vw(c){let p="";return _e(c,function(_,I){p+=I,p+=":",p+=_,p+="\r\n"}),p}function wp(c,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Vw(_),"string"==typeof c?null!=_&&encodeURIComponent(String(_)):pt(c,p,_))}function Pt(c){wn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ka.prototype).add=function(c,p){os(this),this.i=null,c=jo(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this},n.forEach=function(c,p){os(this),this.g.forEach(function(_,I){_.forEach(function(N){c.call(p,N,I,this)},this)},this)},n.na=function(){os(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const N=c[I];for(let B=0;B<N.length;B++)_.push(p[I])}return _},n.V=function(c){os(this);let p=[];if("string"==typeof c)kw(this,c)&&(p=p.concat(this.g.get(jo(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return os(this),this.i=null,kw(this,c=jo(this,c))&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c&&0<(c=this.V(c)).length?String(c[0]):p},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const B=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var N=B;""!==ne[I]&&(N+="="+encodeURIComponent(String(ne[I]))),c.push(N)}}return this.i=c.join("&")},T(Qa,hp),Qa.prototype.g=function(){return new pl(this.l,this.j)},Qa.prototype.i=function(c){return function(){return c}}({}),T(pl,wn),(n=pl.prototype).open=function(c,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ja(this)},n.send=function(c){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ya(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if("arraybuffer"===this.responseType)c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ow(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ya(this):Ja(this),3==this.readyState&&Ow(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ya(this))},n.Qa=function(c){this.g&&(this.response=c,Ya(this))},n.ga=function(){this.g&&Ya(this)},n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)c.push((_=_.value)[0]+": "+_[1]),_=p.next();return c.join("\r\n")},Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(c){this.m=c?"include":"same-origin"}}),T(Pt,wn);var oB=/^https?$/i,aB=["POST","PUT"];function Fw(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Lw(c),gl(c)}function Lw(c){c.A||(c.A=!0,Mn(c,"complete"),Mn(c,"error"))}function Uw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||4!=Di(c)||2!=c.Z()))if(c.u&&4==Di(c))aw(c.Ea,0,c);else if(Mn(c,"readystatechange"),4==Di(c)){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=0===ne){var N=String(c.D).match(Pw)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),I=!oB.test(N?N.toLowerCase():"")}_=I}if(_)Mn(c,"complete"),Mn(c,"success");else{c.m=6;try{var B=2<Di(c)?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.Z()+"]",Lw(c)}}finally{gl(c)}}}function gl(c,p){if(c.g){Bw(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Mn(c,"ready");try{_.onreadystatechange=I}catch{}}}function Bw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}function Di(c){return c.g?c.g.readyState:0}function jw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xa(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function zw(c){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,c),this.cb=Xa("retryDelaySeedMs",1e4,c),this.Wa=Xa("forwardChannelMaxRetries",2,c),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Tw(c&&c.concurrentRequestLimit),this.Da=new iB,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Tp(c){if($w(c),3==c.G){var p=c.U++,_=Ci(c.I);if(pt(_,"SID",c.K),pt(_,"RID",p),pt(_,"TYPE","terminate"),Za(c,_),(p=new ss(c,c.j,p)).L=2,p.v=fl(Ci(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&((new Image).src=p.v,_=!0),_||(p.g=Xw(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ll(p)}Yw(c)}function ml(c){c.g&&(Ap(c),c.g.cancel(),c.g=null)}function $w(c){ml(c),c.u&&(a.clearTimeout(c.u),c.u=null),yl(c),c.h.cancel(),c.s&&("number"==typeof c.s&&a.clearTimeout(c.s),c.s=null)}function _l(c){if(!bw(c.h)&&!c.s){c.s=!0;var p=c.Ga;Va||tw(),Fa||(Va(),Fa=!0),np.add(p,c),c.B=0}}function qw(c,p){var _;_=p?p.l:c.U++;const I=Ci(c.I);pt(I,"SID",c.K),pt(I,"RID",_),pt(I,"AID",c.T),Za(c,I),c.m&&c.o&&wp(I,c.m,c.o),_=new ss(c,c.j,_,c.B+1),null===c.m&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Gw(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ep(c.h,_),_p(_,I,p)}function Za(c,p){c.H&&_e(c.H,function(_,I){pt(p,I,_)}),c.l&&Sw({},function(_,I){pt(p,I,_)})}function Gw(c,p,_){_=Math.min(c.i.length,_);var I=c.l?v(c.l.Na,c.l,c):null;e:{var N=c.i;let B=-1;for(;;){const ne=["count="+_];-1==B?0<_?(B=N[0].g,ne.push("ofs="+B)):B=0:ne.push("ofs="+B);let dt=!0;for(let dn=0;dn<_;dn++){let Xe=N[dn].g;const Tn=N[dn].map;if(Xe-=B,0>Xe)B=Math.max(0,N[dn].g-100),dt=!1;else try{sB(Tn,ne,"req"+Xe+"_")}catch{I&&I(Tn)}}if(dt){I=ne.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,I}function Hw(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Va||tw(),Fa||(Va(),Fa=!0),np.add(p,c),c.v=0}}function bp(c){return!(c.g||c.u||3<=c.v||(c.Y++,c.u=$a(v(c.Fa,c),Qw(c,c.v)),c.v++,0))}function Ap(c){null!=c.A&&(a.clearTimeout(c.A),c.A=null)}function Ww(c){c.g=new ss(c,c.j,"rpc",c.Y),null===c.m&&(c.g.H=c.o),c.g.O=0;var p=Ci(c.qa);pt(p,"RID","rpc"),pt(p,"SID",c.K),pt(p,"AID",c.T),pt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&pt(p,"TO",c.ja),pt(p,"TYPE","xmlhttp"),Za(c,p),c.m&&c.o&&wp(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=fl(Ci(p)),_.m=null,_.P=!0,Iw(_,c)}function yl(c){null!=c.C&&(a.clearTimeout(c.C),c.C=null)}function Kw(c,p){var _=null;if(c.g==p){yl(c),Ap(c),c.g=null;var I=2}else{if(!Ip(c.h,p))return;_=p.D,Cw(c.h,p),I=1}if(0!=c.G)if(p.o)if(1==I){_=p.m?p.m.length:0,p=Date.now()-p.F;var N=c.B;Mn(I=al(),new mw(I,_)),_l(c)}else Hw(c);else if(3==(N=p.s)||0==N&&0<p.X||!(1==I&&function cB(c,p){return!(Aw(c.h)>=c.h.j-(c.s?1:0)||(c.s?(c.i=p.D.concat(c.i),0):1==c.G||2==c.G||c.B>=(c.Va?0:c.Wa)||(c.s=$a(v(c.Ga,c,p),Qw(c,c.B)),c.B++,0)))}(c,p)||2==I&&bp(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),N){case 1:zs(c,5);break;case 4:zs(c,10);break;case 3:zs(c,6);break;default:zs(c,2)}}function Qw(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function zs(c,p){if(c.j.info("Error code "+p),2==p){var _=v(c.fb,c),I=c.Xa;const N=!I;I=new js(I||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dl(I,"https"),fl(I),N?function nB(c,p){const _=new qa;if(a.Image){const I=new Image;I.onload=E(as,_,"TestLoadImage: loaded",!0,p,I),I.onerror=E(as,_,"TestLoadImage: error",!1,p,I),I.onabort=E(as,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(as,_,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}(I.toString(),_):function rB(c,p){new qa;const I=new AbortController,N=setTimeout(()=>{I.abort(),as(0,0,!1,p)},1e4);fetch(c,{signal:I.signal}).then(B=>{clearTimeout(N),as(0,0,!!B.ok,p)}).catch(()=>{clearTimeout(N),as(0,0,!1,p)})}(I.toString(),_)}else kn(2);c.G=0,c.l&&c.l.sa(p),Yw(c),$w(c)}function Yw(c){if(c.G=0,c.ka=[],c.l){const p=Dw(c.h);(0!=p.length||0!=c.i.length)&&(R(c.ka,p),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Jw(c,p,_){var I=_ instanceof js?Ci(_):new js(_);if(""!=I.g)p&&(I.g=p+"."+I.g),hl(I,I.s);else{var N=a.location;I=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;var B=new js(null);I&&dl(B,I),p&&(B.g=p),N&&hl(B,N),_&&(B.l=_),I=B}return p=c.ya,(_=c.D)&&p&&pt(I,_,p),pt(I,"VER",c.la),Za(c,I),I}function Xw(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new Pt(c.Ca&&!c.pa?new Qa({eb:_}):c.pa)).Ha(c.J),p}function Zw(){}function vl(){}function er(c,p){wn.call(this),this.g=new zw(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!j(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!j(p)&&(this.g.D=p,null!==(c=this.h)&&p in c&&p in(c=this.h)&&delete c[p]),this.j=new zo(this)}function eT(c){fp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=null!==p&&c in p?p[c]:void 0),this.data=p}else this.data=c}function tT(){pp.call(this),this.status=1}function zo(c){this.g=c}(n=Pt.prototype).Ha=function(c){this.J=c},n.ea=function(c,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gp.g(),this.v=function dw(c){return c.h||(c.h=c.i())}(this.o?this.o:gp),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(B){return void Fw(this,B)}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var N in I)_.set(N,I[N]);else{if("function"!=typeof I.keys||"function"!=typeof I.get)throw Error("Unknown input type for opt_headers: "+String(I));for(const B of I.keys())_.set(B,I.get(B))}I=Array.from(_.keys()).find(B=>"content-type"==B.toLowerCase()),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aB,p,void 0))||I||N||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of _)this.g.setRequestHeader(B,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bw(this),this.u=!0,this.g.send(c),this.u=!1}catch(B){Fw(this,B)}},n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Mn(this,"complete"),Mn(this,"abort"),gl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Uw(this):this.bb())},n.bb=function(){Uw(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&0==p.indexOf(c)&&(p=p.substring(c.length)),UU(p)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=zw.prototype).la=8,n.G=1,n.connect=function(c,p,_,I){kn(0),this.W=c,this.H=p||{},_&&void 0!==I&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Jw(this,null,this.W),_l(this)},n.Ga=function(c){if(this.s)if(this.s=null,1==this.G){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new ss(this,this.j,c);let B=this.o;if(this.S&&(B?(B=b(B),x(B,this.S)):B=this.S),null!==this.m||this.O||(N.H=B,B=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){var I=this.i[_];if(void 0===(I="__data__"in I.map&&"string"==typeof(I=I.map.__data__)?I.length:void 0))break;if(4096<(p+=I)){p=_;break e}if(4096===p||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Gw(this,N,p),pt(_=Ci(this.I),"RID",c),pt(_,"CVER",22),this.D&&pt(_,"X-HTTP-Session-Id",this.D),Za(this,_),B&&(this.O?p="headers="+encodeURIComponent(String(Vw(B)))+"&"+p:this.m&&wp(_,this.m,B)),Ep(this.h,N),this.Ua&&pt(_,"TYPE","init"),this.P?(pt(_,"$req",p),pt(_,"SID","null"),N.T=!0,_p(N,_,null)):_p(N,_,p),this.G=2}}else 3==this.G&&(c?qw(this,c):0==this.i.length||bw(this.h)||qw(this))},n.Fa=function(){if(this.u=null,Ww(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$a(v(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),ml(this),Ww(this))},n.Za=function(){null!=this.C&&(this.C=null,ml(this),bp(this),kn(19))},n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Zw.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},vl.prototype.g=function(c,p){return new er(c,p)},T(er,wn),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Tp(this.g)},er.prototype.o=function(c){var p=this.g;if("string"==typeof c){var _={};_.__data__=c,c=_}else this.u&&((_={}).__data__=dp(c),c=_);p.i.push(new HU(p.Ya++,c)),3==p.G&&_l(p)},er.prototype.N=function(){this.g.l=null,delete this.j,Tp(this.g),delete this.g,er.aa.N.call(this)},T(eT,fp),T(tT,pp),T(zo,Zw),zo.prototype.ua=function(){Mn(this.g,"a")},zo.prototype.ta=function(c){Mn(this.g,new eT(c))},zo.prototype.sa=function(c){Mn(this.g,new tT)},zo.prototype.ra=function(){Mn(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,sY=Yc.createWebChannelTransport=function(){return new vl},iY=Yc.getStatEventTarget=function(){return al()},rY=Yc.Event=Us,u2=Yc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,dS=Yc.ErrorCode=ul,_w.COMPLETE="complete",nY=Yc.EventType=_w,hw.EventType=ja,ja.OPEN="a",ja.CLOSE="b",ja.ERROR="c",ja.MESSAGE="d",wn.prototype.listen=wn.prototype.K,m0=Yc.WebChannel=hw,Yc.FetchXmlHttpFactory=Qa,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,tY=Yc.XhrIo=Pt}).apply(typeof lS<"u"?lS:typeof self<"u"?self:typeof window<"u"?window:{});const oY="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let R_="11.0.2";const Ud=new HO("@firebase/firestore");function x_(){return Ud.logLevel}function Ee(n,...e){if(Ud.logLevel<=nn.DEBUG){const t=e.map(c2);Ud.debug(`Firestore (${R_}): ${n}`,...t)}}function ni(n,...e){if(Ud.logLevel<=nn.ERROR){const t=e.map(c2);Ud.error(`Firestore (${R_}): ${n}`,...t)}}function ha(n,...e){if(Ud.logLevel<=nn.WARN){const t=e.map(c2);Ud.warn(`Firestore (${R_}): ${n}`,...t)}}function c2(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${R_}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function tt(n,e){n||Qe()}function Fe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Bc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ji{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class aY{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PAe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bi.UNAUTHENTICATED))}shutdown(){}}class RAe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xAe{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;tt(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ji,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,M.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ji)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt("string"==typeof r.accessToken),new aY(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(null===e||"string"==typeof e),new Bi(e)}}class MAe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kAe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new MAe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uY{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NAe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){tt(void 0===this.o);const r=s=>{null!=s.error&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt("string"==typeof t.token),this.R=t.token,new uY(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OAe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class cY{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=OAe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function M_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Rr{static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new we(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new Rr(0,0))}static max(){return new it(new Rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _0{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends _0{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const VAe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends _0{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return VAe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new we(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new we(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new we(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new we(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(rn.fromString(e))}static fromName(e){return new je(rn.fromString(e).popFirst(5))}static empty(){return new je(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new rn(e.slice()))}}class Lo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Lo(it.min(),je.empty(),-1)}static max(){return new Lo(it.max(),je.empty(),-1)}}function d2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const fY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bd(n){return h2.apply(this,arguments)}function h2(){return(h2=(0,M.A)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==fY)throw n;Ee("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,r)=>{t(e)})}static reject(e){return new Z((t,r)=>{r(e)})}static waitFor(e){return new Z((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next(i=>i?Z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Z((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function jd(n){return"IndexedDbTransactionError"===n.name}let Uo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function v0(n){return null==n}function I0(n){return 0===n&&1/n==-1/0}function $Ae(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function yY(n){return n+"\x01\x01"}function bY(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CY(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||ts.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pS(this.root,e,this.comparator,!1)}getReverseIterator(){return new pS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pS(this.root,e,this.comparator,!0)}}class pS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ts.RED,this.left=i??ts.EMPTY,this.right=s??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ts(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ts(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DY(this.data.getIterator())}getIteratorFrom(e){return new DY(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class DY{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class io{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new io([])}unionWith(e){let t=new Ln(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return M_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class SY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SY("Invalid base64 string: "+s):s}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const uCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jc(n){if(tt(!!n),"string"==typeof n){let e=0;const t=uCe.exec(n);if(tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function gS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mS(n){const e=n.mapValue.fields.__previous_value__;return gS(e)?mS(e):e}function E0(n){const e=Jc(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class cCe{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Uf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uf&&e.projectId===this.projectId&&e.database===this.database}}const $d={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gS(n)?4:kY(n)?9007199254740991:IS(n)?10:11:Qe()}function Wu(n,e){if(n===e)return!0;const t=qd(n);if(t!==qd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return E0(n).isEqual(E0(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jc(i.timestampValue),a=Jc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Xc(n.bytesValue).isEqual(Xc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Sr(i.geoPointValue.latitude)===Sr(s.geoPointValue.latitude)&&Sr(i.geoPointValue.longitude)===Sr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Sr(i.integerValue)===Sr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Sr(i.doubleValue),a=Sr(s.doubleValue);return o===a?I0(o)===I0(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return M_(n.arrayValue.values||[],e.arrayValue.values||[],Wu);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bY(o)!==bY(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Wu(o[u],a[u])))return!1;return!0}(n,e);default:return Qe()}var s}function w0(n,e){return void 0!==(n.values||[]).find(t=>Wu(t,e))}function Gd(n,e){if(n===e)return 0;const t=qd(n),r=qd(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Sr(s.integerValue||s.doubleValue),u=Sr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return PY(n.timestampValue,e.timestampValue);case 4:return PY(E0(n),E0(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Xc(s),u=Xc(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=Tt(a[l],u[l]);if(0!==h)return h}return Tt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(Sr(s.latitude),Sr(o.latitude));return 0!==a?a:Tt(Sr(s.longitude),Sr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return RY(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,P=Tt((null===(l=E?.values)||void 0===l?void 0:l.length)||0,(null===(h=T?.values)||void 0===h?void 0:h.length)||0);return 0!==P?P:RY(E,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===$d.mapValue&&o===$d.mapValue)return 0;if(s===$d.mapValue)return 1;if(o===$d.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const v=Tt(u[g],h[g]);if(0!==v)return v;const E=Gd(a[u[g]],l[h[g]]);if(0!==E)return E}return Tt(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function PY(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=Jc(n),r=Jc(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function RY(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Gd(t[i],r[i]);if(s)return s}return Tt(t.length,r.length)}function V_(n){return m2(n)}function m2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Jc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=m2(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${m2(t.fields[o])}`;return i+"}"}(n.mapValue):Qe()}function yS(n){switch(qd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mS(n);return e?16+yS(e):16;case 5:return 2*n.stringValue.length;case 6:return Xc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((i,s)=>i+yS(s),0);case 10:case 11:return function(r){let i=0;return zd(r.fields,(s,o)=>{i+=s.length+yS(o)}),i}(n.mapValue);default:throw Qe()}}function _2(n){return!!n&&"integerValue"in n}function T0(n){return!!n&&"arrayValue"in n}function xY(n){return!!n&&"nullValue"in n}function MY(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vS(n){return!!n&&"mapValue"in n}function IS(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function b0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=b0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=b0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kY(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=b0(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=b0(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());vS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ns(b0(this.value))}}function FY(n){const e=[];return zd(n.fields,(t,r)=>{const i=new Dr([t]);if(vS(r)){const s=FY(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new io(e)}class wr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wr(e,0,it.min(),it.min(),it.min(),ns.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,it.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,it.min(),it.min(),ns.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,it.min(),it.min(),ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hd{constructor(e,t){this.position=e,this.inclusive=t}}function LY(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?je.comparator(je.fromName(o.referenceValue),t.key):Gd(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function UY(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wu(n.position[t],e.position[t]))return!1;return!0}class A0{constructor(e,t="asc"){this.field=e,this.dir=t}}function hCe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class BY{}class sn extends BY{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new fCe(e,t,r):"array-contains"===t?new mCe(e,r):"in"===t?new HY(e,r):"not-in"===t?new _Ce(e,r):"array-contains-any"===t?new yCe(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new pCe(e,r):new gCe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gd(t,this.value)):null!==t&&qd(this.value)===qd(t)&&this.matchesComparison(Gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends BY{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Un(e,t)}matches(e){return F_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function F_(n){return"and"===n.op}function v2(n){return function jY(n){for(const e of n.filters)if(e instanceof Un)return!1;return!0}(n)&&F_(n)}function I2(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+V_(n.value);if(v2(n))return n.filters.map(e=>I2(e)).join(",");{const e=n.filters.map(t=>I2(t)).join(",");return`${n.op}(${e})`}}function zY(n,e){return n instanceof sn?(r=n,(i=e)instanceof sn&&r.op===i.op&&r.field.isEqual(i.field)&&Wu(r.value,i.value)):n instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&zY(o,i.filters[a]),!0)}(n,e):void Qe();var r,i}function qY(n){return n instanceof sn?`${(t=n).field.canonicalString()} ${t.op} ${V_(t.value)}`:n instanceof Un?function(t){return t.op.toString()+" {"+t.getFilters().map(qY).join(" ,")+"}"}(n):"Filter";var t}class fCe extends sn{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class pCe extends sn{constructor(e,t){super(e,"in",t),this.keys=GY(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gCe extends sn{constructor(e,t){super(e,"not-in",t),this.keys=GY(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GY(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class mCe extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return T0(t)&&w0(t.arrayValue,this.value)}}class HY extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&w0(this.value.arrayValue,t)}}class _Ce extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(w0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!w0(this.value.arrayValue,t)}}class yCe extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!T0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>w0(this.value.arrayValue,r))}}class vCe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function E2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new vCe(n,e,t,r,i,s,o)}function jf(n){const e=Fe(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>I2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),v0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>V_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>V_(r)).join(",")),e.ue=t}return e.ue}function C0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hCe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zY(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UY(n.startAt,e.startAt)&&UY(n.endAt,e.endAt)}function ES(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Zc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function L_(n){return new Zc(n)}function YY(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function U_(n){const e=Fe(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ln(Dr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new A0(s,r))}),t.has(Dr.keyField().canonicalString())||e.ce.push(new A0(Dr.keyField(),r))}return e.ce}function bs(n){const e=Fe(n);return e.le||(e.le=function XY(n,e){if("F"===n.limitType)return E2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new A0(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hd(n.startAt.position,n.startAt.inclusive):null;return E2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,U_(n))),e.le}function TS(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D0(n,e){return C0(bs(n),bs(e))&&n.limitType===e.limitType}function ZY(n){return`${jf(bs(n))}|lt:${n.limitType}`}function B_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qY(i)).join(", ")}]`),v0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>V_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>V_(i)).join(",")),`Target(${r})`}(bs(n))}; limitType=${n.limitType})`}function S0(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):je.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of U_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=LY(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,U_(r),i)||r.endAt&&!function(o,a,u){const l=LY(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,U_(r),i)));var r,i}function tJ(n){return(e,t)=>{let r=!1;for(const i of U_(n)){const s=ICe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ICe(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Gd(u,l):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}class el{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CY(this.inner)}size(){return this.innerSize}}const ECe=new cr(je.comparator);function so(){return ECe}const nJ=new cr(je.comparator);function P0(...n){let e=nJ;for(const t of n)e=e.insert(t.key,t);return e}function rJ(n){let e=nJ;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ku(){return R0()}function iJ(){return R0()}function R0(){return new el(n=>n.toString(),(n,e)=>n.isEqual(e))}const wCe=new cr(je.comparator),TCe=new Ln(je.comparator);function Nt(...n){let e=TCe;for(const t of n)e=e.add(t);return e}const bCe=new Ln(Tt);function A2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:I0(e)?"-0":e}}function sJ(n){return{integerValue:""+n}}function oJ(n,e){return function _Y(n){return"number"==typeof n&&Number.isInteger(n)&&!I0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?sJ(e):A2(n,e)}class bS{constructor(){this._=void 0}}function ACe(n,e,t){return n instanceof j_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gS(s)&&(s=mS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof zf?uJ(n,e):n instanceof $f?cJ(n,e):function(i,s){const o=aJ(i,s),a=lJ(o)+lJ(i.Pe);return _2(o)&&_2(i.Pe)?sJ(a):A2(i.serializer,a)}(n,e)}function CCe(n,e,t){return n instanceof zf?uJ(n,e):n instanceof $f?cJ(n,e):t}function aJ(n,e){return n instanceof z_?_2(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class j_ extends bS{}class zf extends bS{constructor(e){super(),this.elements=e}}function uJ(n,e){const t=dJ(e);for(const r of n.elements)t.some(i=>Wu(i,r))||t.push(r);return{arrayValue:{values:t}}}class $f extends bS{constructor(e){super(),this.elements=e}}function cJ(n,e){let t=dJ(e);for(const r of n.elements)t=t.filter(i=>!Wu(i,r));return{arrayValue:{values:t}}}class z_ extends bS{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lJ(n){return Sr(n.integerValue||n.doubleValue)}function dJ(n){return T0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class SCe{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class CS{}function hJ(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new q_(n.key,Pr.none()):new $_(n.key,n.data,Pr.none());{const t=n.data,r=ns.empty();let i=new Ln(Dr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new tl(n.key,r,new io(i.toArray()),Pr.none())}}function PCe(n,e,t){n instanceof $_?function(i,s,o){const a=i.value.clone(),u=gJ(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof tl?function(i,s,o){if(!AS(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gJ(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(pJ(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function M0(n,e,t,r){return n instanceof $_?function(s,o,a,u){if(!AS(s.precondition,o))return a;const l=s.value.clone(),h=mJ(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof tl?function(s,o,a,u){if(!AS(s.precondition,o))return a;const l=mJ(s.fieldTransforms,u,o),h=o.data;return h.setAll(pJ(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,AS(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function RCe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=aJ(r.transform,i||null);null!=s&&(null===t&&(t=ns.empty()),t.set(r.field,s))}return t||null}function fJ(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&M_(r,i,(s,o)=>function DCe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof zf&&i instanceof zf||r instanceof $f&&i instanceof $f?M_(r.elements,i.elements,Wu):r instanceof z_&&i instanceof z_?Wu(r.Pe,i.Pe):r instanceof j_&&i instanceof j_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class $_ extends CS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tl extends CS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pJ(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gJ(n,e,t){const r=new Map;tt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,CCe(o,a,t[i]))}return r}function mJ(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,ACe(s,o,e))}return r}class q_ extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C2 extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class D2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&PCe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=M0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=M0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iJ();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=hJ(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&M_(this.mutations,e.mutations,(t,r)=>fJ(t,r))&&M_(this.baseMutations,e.baseMutations,(t,r)=>fJ(t,r))}}class S2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tt(e.mutations.length===r.length);let i=function(){return wCe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new S2(e,t,r,i)}}class P2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xCe{constructor(e,t){this.count=e,this.unchangedNames=t}}var di,mn;function vJ(n){if(void 0===n)return ni("GRPC error has no .code"),ue.UNKNOWN;switch(n){case di.OK:return ue.OK;case di.CANCELLED:return ue.CANCELLED;case di.UNKNOWN:return ue.UNKNOWN;case di.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case di.INTERNAL:return ue.INTERNAL;case di.UNAVAILABLE:return ue.UNAVAILABLE;case di.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case di.NOT_FOUND:return ue.NOT_FOUND;case di.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case di.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case di.ABORTED:return ue.ABORTED;case di.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case di.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case di.DATA_LOSS:return ue.DATA_LOSS;default:return Qe()}}(mn=di||(di={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";const MCe=new Of([4294967295,4294967295],0);function EJ(n){const e=function IJ(){return new TextEncoder}().encode(n),t=new eY;return t.update(e),new Uint8Array(t.digest())}function wJ(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Of([t,r],0),new Of([i,s],0)]}class R2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new k0(`Invalid padding: ${t}`);if(r<0)throw new k0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new k0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new k0(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Of.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Of.fromNumber(r)));return 1===i.compare(MCe)&&(i=new Of([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=EJ(e),[r,i]=wJ(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new R2(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=EJ(e),[r,i]=wJ(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class k0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class N0{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,O0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new N0(it.min(),i,new cr(Tt),so(),Nt())}}class O0{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new O0(r,t,Nt(),Nt(),Nt())}}class SS{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class TJ{constructor(e,t){this.targetId=e,this.me=t}}class bJ{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AJ{constructor(){this.fe=0,this.ge=CJ(),this.pe=Lr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Nt(),t=Nt(),r=Nt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qe()}}),new O0(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=CJ()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kCe{constructor(e){this.Le=e,this.Be=new Map,this.ke=so(),this.qe=PS(),this.Qe=PS(),this.Ke=new cr(Tt)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(ES(s))if(0===r){const o=new je(s.path);this.We(t,o,wr.newNoDocument(o,it.min()))}else tt(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Xc(r).toUint8Array()}catch(u){if(u instanceof SY)return ha("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new R2(o,i,s)}catch(u){return ha(u instanceof k0?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&ES(a.target)){const u=new je(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,wr.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Nt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new N0(e,t,this.Ke,this.ke,r);return this.ke=so(),this.qe=PS(),this.Qe=PS(),this.Ke=new cr(Tt),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new AJ,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ln(Tt),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ln(Tt),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new AJ),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function PS(){return new cr(je.comparator)}function CJ(){return new cr(je.comparator)}const NCe={asc:"ASCENDING",desc:"DESCENDING"},OCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VCe={and:"AND",or:"OR"};class FCe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function x2(n,e){return n.useProto3Json||v0(e)?e:{value:e}}function G_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DJ(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LCe(n,e){return G_(n,e.toTimestamp())}function ri(n){return tt(!!n),it.fromTimestamp(function(t){const r=Jc(t);return new Rr(r.seconds,r.nanos)}(n))}function M2(n,e){return k2(n,e).canonicalString()}function k2(n,e){const t=(i=n,new rn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function SJ(n){const e=rn.fromString(n);return tt(UJ(e)),e}function V0(n,e){return M2(n.databaseId,e.path)}function Qu(n,e){const t=SJ(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(xJ(t))}function PJ(n,e){return M2(n.databaseId,e)}function N2(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xJ(n){return tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function MJ(n,e,t){return{name:V0(n,e),fields:t.value.mapValue.fields}}function NJ(n,e){return{documents:[PJ(n,e.path)]}}function RS(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PJ(n,i);const s=function(l){if(0!==l.length)return LJ(Un.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:Wd((v=h).field),direction:$Ce(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=x2(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i};var l}function VJ(n){let e=function RJ(n){const e=SJ(n);return 4===e.length?rn.emptyPath():xJ(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tt(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const v=FJ(g);return v instanceof Un&&v2(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new A0(H_((T=v).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(g){let v;return v="object"==typeof g?g.value:g,v0(v)?null:v}(t.limit));let u=null;var g;t.startAt&&(u=new Hd((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new Hd(g.values||[],!g.before)}(t.endAt)),function QY(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",u,l)}function FJ(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=H_(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=H_(t.unaryFilter.field);return sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=H_(t.unaryFilter.field);return sn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=H_(t.unaryFilter.field);return sn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(n):void 0!==n.fieldFilter?sn.create(H_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Un.create(t.compositeFilter.filters.map(r=>FJ(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe()}}(t.compositeFilter.op))}(n):Qe();var t}function $Ce(n){return NCe[n]}function qCe(n){return OCe[n]}function GCe(n){return VCe[n]}function Wd(n){return{fieldPath:n.canonicalString()}}function H_(n){return Dr.fromServerFormat(n.fieldPath)}function LJ(n){return n instanceof sn?function(t){if("=="===t.op){if(MY(t.value))return{unaryFilter:{field:Wd(t.field),op:"IS_NAN"}};if(xY(t.value))return{unaryFilter:{field:Wd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(MY(t.value))return{unaryFilter:{field:Wd(t.field),op:"IS_NOT_NAN"}};if(xY(t.value))return{unaryFilter:{field:Wd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wd(t.field),op:qCe(t.op),value:t.value}}}(n):n instanceof Un?function(t){const r=t.getFilters().map(i=>LJ(i));return 1===r.length?r[0]:{compositeFilter:{op:GCe(t.op),filters:r}}}(n):Qe()}function HCe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UJ(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class nl{constructor(e,t,r,i,s=it.min(),o=it.min(),a=Lr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BJ{constructor(e){this.ht=e}}function V2(n){const e=VJ({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TS(e,e.limit,"L"):e}class Wf{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),I0(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),"string"==typeof r&&(r=Jc(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Xc(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?kY(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):IS(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):Qe()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const r=e.fields||{};this.Rt(t,55);for(const i of Object.keys(r))this.gt(i,t),this.dt(r[i],t)}bt(e,t){var r,i;const s=e.fields||{};this.Rt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Rt(t,15),t.Vt(Sr(a)),this.gt(o,t),this.dt(s[o],t)}vt(e,t){const r=e.values||[];this.Rt(t,50);for(const i of r)this.dt(i,t)}St(e,t){this.Rt(t,37),je.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}Wf.Ft=new Wf;class tDe{constructor(){this.ln=new z2}addToCollectionParentIndex(e,t){return this.ln.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Lo.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Lo.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class z2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(rn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(rn.comparator)).toArray()}}new Uint8Array(0);const tX={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(41943040,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class Qf{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Qf(0)}static Qn(){return new Qf(-1)}}function oX([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class iDe{constructor(e){this.Gn=e,this.buffer=new Ln(oX),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oX(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aX{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){var t=this;Ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,M.A)(function*(){t.Jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){jd(r)?Ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bd(r)}yield t.Yn(3e5)}))}}class sDe{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Z.resolve(Uo.oe);const r=new iDe(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(tX)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tX):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),x_()<=nn.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class cX{constructor(){this.changes=new el(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cDe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pX{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&M0(r.mutation,i,io.empty(),Rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=Ku();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=P0();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ku();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=so();const o=R0(),a=R0();return t.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof tl)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),M0(h.mutation,l,h.mutation.getFieldMask(),Rr.now())):o.set(l.key,io.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new cDe(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=R0();let i=new cr((o,a)=>o-a),s=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let h=r.get(u)||io.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Nt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=iJ();h.forEach(v=>{if(!s.has(v)){const E=hJ(t.get(v),r.get(v));null!==E&&g.set(v,E),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function w2(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Z.resolve(Ku());let a=-1,u=s;return o.next(l=>Z.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{u=u.insert(h,v)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Nt())).next(h=>({batchId:a,changes:rJ(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let i=P0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=P0();return this.indexManager.getCollectionParents(e,s).next(a=>Z.forEach(a,u=>{const l=(g=t,v=u.child(s),new Zc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,v;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,wr.newInvalidDocument(h)))});let a=P0();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&M0(h.mutation,l,io.empty(),Rr.now()),S0(t,l)&&(a=a.insert(u,l))}),a})}}class lDe{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Z.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,{id:(i=t).id,version:i.version,createTime:ri(i.createTime)}),Z.resolve();var i}getNamedQuery(e,t){return Z.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,{name:(i=t).name,query:V2(i.bundledQuery),readTime:ri(i.readTime)}),Z.resolve();var i}}class dDe{constructor(){this.overlays=new cr(je.comparator),this.Er=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ku();return Z.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const i=Ku(),s=t.length+1,o=new je(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new cr((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Ku(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Ku(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return Z.resolve(a)}Tt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new P2(t,r));let s=this.Er.get(t);void 0===s&&(s=Nt(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}class hDe{constructor(){this.sessionToken=Lr.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}class $2{constructor(){this.dr=new Ln(zi.Ar),this.Rr=new Ln(zi.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new zi(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new zi(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new je(new rn([])),r=new zi(t,e),i=new zi(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new je(new rn([])),r=new zi(t,e),i=new zi(t,e+1);let s=Nt();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new zi(e,0),r=this.dr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zi{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return je.comparator(e.key,t.key)||Tt(e.br,t.br)}static Vr(e,t){return Tt(e.br,t.br)||je.comparator(e.key,t.key)}}class fDe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ln(zi.Ar)}checkEmpty(e){return Z.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++;const o=new D2(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new zi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,t){return Z.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Fr(t+1),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zi(t,0),i=new zi(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Tt);return t.forEach(i=>{const s=new zi(i,0),o=new zi(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),Z.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;je.isDocumentKey(s)||(s=s.child(""));const o=new zi(new je(s),0);let a=new Ln(Tt);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),Z.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){tt(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let r=this.vr;return Z.forEach(t.mutations,i=>{const s=new zi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new zi(t,0),i=this.vr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Z.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pDe{constructor(e){this.Nr=e,this.docs=new cr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=so();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=so();const o=t.path,a=new je(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||d2(new Lo((n=h).readTime,n.key,-1),r)<=0||(i.has(h.key)||S0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}var n;return Z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Qe()}Lr(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gDe(this)}getSize(e){return Z.resolve(this.size)}}class gDe extends cX{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class mDe{constructor(e){this.persistence=e,this.Br=new el(t=>jf(t),C0),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.kr=0,this.qr=new $2,this.targetCount=0,this.Qr=Qf.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),Z.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Qf(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Un(t),Z.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(s).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.qr.containsKey(t))}}class q2{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Uo(0),this.Ur=!1,this.Ur=!0,this.Wr=new hDe,this.referenceDelegate=e(this),this.Gr=new mDe(this),this.indexManager=new tDe,this.remoteDocumentCache=new pDe(r=>this.referenceDelegate.zr(r)),this.serializer=new BJ(t),this.jr=new lDe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dDe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new fDe(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new _De(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return Z.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class _De extends pY{constructor(e){super(),this.currentSequenceNumber=e}}class LS{constructor(e){this.persistence=e,this.Zr=new $2,this.Xr=null}static ei(e){return new LS(e)}get ti(){if(this.Xr)return this.Xr;throw Qe()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ti,r=>{const i=je.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,it.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Z.or([()=>Z.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class US{constructor(e,t){this.persistence=e,this.ri=new el(r=>function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yY(e)),e=$Ae(n.get(t),e);return yY(e)}(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=function uX(n,e){return new sDe(n,e)}(this,t)}static ei(e,t){return new US(e,t)}Hr(){}Jr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return Z.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?Z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(r++,s.removeEntry(o,it.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yS(e.data.value)),t}ir(e,t,r){return Z.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return Z.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class K2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Nt(),i=Nt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new K2(e,t.fromCache,r,i)}}class vDe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mX{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function AK(){return!function y0e(){var n;const e=null===(n=$D())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function gY(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(ei())>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new vDe;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(x_()<=nn.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",B_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Z.resolve()):(x_()<=nn.DEBUG&&Ee("QueryEngine","Query:",B_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(x_()<=nn.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",B_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bs(t))):Z.resolve())}Xi(e,t){if(YY(t))return Z.resolve(null);let r=bs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=TS(t,null,"F"),r=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Nt(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.rs(t,a);return this.ss(t,l,o,u.readTime)?this.Xi(e,TS(t,null,"F")):this.os(e,l,t,u)}))})))}es(e,t,r,i){return YY(t)||i.isEqual(it.min())?Z.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?Z.resolve(null):(x_()<=nn.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),B_(t)),this.os(e,o,t,function dY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=it.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new Lo(i,je.empty(),e)}(i,-1)).next(a=>a))})}rs(e,t){let r=new Ln(tJ(e));return t.forEach((i,s)=>{S0(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return x_()<=nn.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",B_(t)),this.Zi.getDocumentsMatchingQuery(e,t,Lo.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class IDe{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new cr(Tt),this.cs=new el(s=>jf(s),C0),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pX(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function yX(n,e){return Q2.apply(this,arguments)}function Q2(){return(Q2=(0,M.A)(function*(n,e){const t=Fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Nt();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function vX(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function TDe(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X_(n,e,t){return Y2.apply(this,arguments)}function Y2(){return(Y2=(0,M.A)(function*(n,e,t){const r=Fe(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!jd(o))throw o;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})).apply(this,arguments)}function jS(n,e,t){const r=Fe(n);let i=it.min(),s=Nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=Fe(u),v=g.cs.get(h);return void 0!==v?Z.resolve(g.us.get(v)):g.Gr.getTargetData(l,h)}(r,o,bs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:it.min(),t?s:Nt())).next(a=>(function TX(n,e,t){let r=n.ls.get(e)||it.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}(r,function eJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ds:s})))}class tL{constructor(){this.activeTargetIds=function b2(){return bCe}()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CX{constructor(){this._o=new tL,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new tL,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CDe{uo(e){}shutdown(){}}class DX{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qS=null;function rL(){return null===qS?qS=268435456+Math.round(2147483648*Math.random()):qS++,"0x"+qS.toString(16)}const DDe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SDe{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const Cs="WebChannelConnection";class PDe extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const a=rL(),u=this.No(t,r.toUriEncodedString());Ee("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(l,s,o),this.Bo(t,u,l,i).then(h=>(Ee("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ha("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(t,r,i,s,o,a){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+R_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){return`${this.Fo}/v1/${r}:${DDe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=rL();return new Promise((o,a)=>{const u=new tY;u.setWithCredentials(!0),u.listenOnce(nY.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case dS.NO_ERROR:const h=u.getResponseJson();Ee(Cs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case dS.TIMEOUT:Ee(Cs,`RPC '${e}' ${s} timed out`),a(new we(ue.DEADLINE_EXCEEDED,"Request time out"));break;case dS.HTTP_ERROR:const g=u.getStatus();if(Ee(Cs,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v?.error;if(E&&E.status&&E.message){const T=function(R){const z=R.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(z)>=0?z:ue.UNKNOWN}(E.status);a(new we(T,E.message))}else a(new we(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new we(ue.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Ee(Cs,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ee(Cs,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}qo(e,t,r){const i=rL(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sY(),a=iY(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Ee(Cs,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let v=!1,E=!1;const T=new SDe({Eo:R=>{E?Ee(Cs,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(Ee(Cs,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Ee(Cs,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},Ao:()=>g.close()}),P=(R,z,j)=>{R.listen(z,H=>{try{j(H)}catch(te){setTimeout(()=>{throw te},0)}})};return P(g,m0.EventType.OPEN,()=>{E||(Ee(Cs,`RPC '${e}' stream ${i} transport opened.`),T.So())}),P(g,m0.EventType.CLOSE,()=>{E||(E=!0,Ee(Cs,`RPC '${e}' stream ${i} transport closed`),T.Do())}),P(g,m0.EventType.ERROR,R=>{E||(E=!0,ha(Cs,`RPC '${e}' stream ${i} transport errored:`,R),T.Do(new we(ue.UNAVAILABLE,"The operation could not be completed")))}),P(g,m0.EventType.MESSAGE,R=>{var z;if(!E){const j=R.data[0];tt(!!j);const H=j,te=H?.error||(null===(z=H[0])||void 0===z?void 0:z.error);if(te){Ee(Cs,`RPC '${e}' stream ${i} received error:`,te);const me=te.status;let _e=function(C){const x=di[C];if(void 0!==x)return vJ(x)}(me),D=te.message;void 0===_e&&(_e=ue.INTERNAL,D="Unknown error status: "+me+" with message "+te.message),E=!0,T.Do(new we(_e,D)),g.close()}else Ee(Cs,`RPC '${e}' stream ${i} received:`,j),T.vo(j)}}),P(a,rY.STAT_EVENT,R=>{R.stat===u2.PROXY?Ee(Cs,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===u2.NOPROXY&&Ee(Cs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.bo()},0),T}}function GS(){return typeof document<"u"?document:null}function G0(n){return new FCe(n,!0)}class iL{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class PX{constructor(e,t,r,i,s,o,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new iL(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}stop(){var e=this;return(0,M.A)(function*(){e.i_()&&(yield e.close(0))})()}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){var e=this;return(0,M.A)(function*(){if(e.s_())return e.close(0)})()}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){var r=this;return(0,M.A)(function*(){r.l_(),r.h_(),r.r_.cancel(),r.Xo++,4!==e?r.r_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),r.r_.zo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.P_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.po(t)})()}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new we(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.n_?this.A_(i):this.onNext(i))})}o_(){var e=this;this.state=5,this.r_.jo((0,M.A)(function*(){e.state=0,e.start()}))}E_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RDe extends PX{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function BCe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Qe(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(tt(void 0===h||"string"==typeof h),Lr.fromBase64String(h||"")):(tt(void 0===h||h instanceof Buffer||h instanceof Uint8Array),Lr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ue.UNKNOWN:vJ(l.code);return new we(h,l.message||"")}(o);t=new bJ(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Qu(n,r.document.name),s=ri(r.document.updateTime),o=r.document.createTime?ri(r.document.createTime):it.min(),a=new ns({mapValue:{fields:r.document.fields}}),u=wr.newFoundDocument(i,s,o,a);t=new SS(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Qu(n,r.document),s=r.readTime?ri(r.readTime):it.min(),o=wr.newNoDocument(i,s);t=new SS([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Qu(n,r.document);t=new SS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new xCe(i,s);t=new TJ(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return it.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?it.min():o.readTime?ri(o.readTime):it.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=N2(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=ES(u)?{documents:NJ(s,u)}:{query:RS(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DJ(s,o.resumeToken);const l=x2(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(it.min())>0){a.readTime=G_(s,o.snapshotVersion.toTimestamp());const l=x2(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function zCe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=N2(this.serializer),t.removeTarget=e,this.c_(t)}}class xDe extends PX{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||0===e.writeResults.length),this.listener.p_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=function jCe(n,e){return n&&n.length>0?(tt(void 0!==e),n.map(t=>function(i,s){let o=ri(i.updateTime?i.updateTime:s);return o.isEqual(it.min())&&(o=ri(s)),new SCe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=N2(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function F0(n,e){let t;if(e instanceof $_)t={update:MJ(n,e.key,e.value)};else if(e instanceof q_)t={delete:V0(n,e.key)};else if(e instanceof tl)t={update:MJ(n,e.key,e.data),updateMask:HCe(e.fieldMask)};else{if(!(e instanceof C2))return Qe();t={verify:V0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof j_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $f)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof z_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:LCe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qe()),t;var s}(this.serializer,r))};this.c_(t)}}class MDe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new we(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,k2(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(ue.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,k2(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ue.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class kDe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ni(t),this.C_=!1):Ee("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class NDe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{r.enqueueAndForget((0,M.A)(function*(){var u;Jd(o)&&(Ee("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,M.A)(function*(h){const g=Fe(h);g.k_.add(4),yield Z_(g),g.K_.set("Unknown"),g.k_.delete(4),yield H0(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.K_=new kDe(r,i)}}function H0(n){return sL.apply(this,arguments)}function sL(){return(sL=(0,M.A)(function*(n){if(Jd(n))for(const e of n.q_)yield e(!0)})).apply(this,arguments)}function Z_(n){return oL.apply(this,arguments)}function oL(){return(oL=(0,M.A)(function*(n){for(const e of n.q_)yield e(!1)})).apply(this,arguments)}function HS(n,e){const t=Fe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),cL(t)?uL(t):ny(t).s_()&&aL(t,e))}function ey(n,e){const t=Fe(n),r=ny(t);t.B_.delete(e),r.s_()&&RX(t,e),0===t.B_.size&&(r.s_()?r.a_():Jd(t)&&t.K_.set("Unknown"))}function aL(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ny(n).V_(e)}function RX(n,e){n.U_.xe(e),ny(n).m_(e)}function uL(n){n.U_=new kCe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),ny(n).start(),n.K_.F_()}function cL(n){return Jd(n)&&!ny(n).i_()&&n.B_.size>0}function Jd(n){return 0===Fe(n).k_.size}function xX(n){n.U_=void 0}function ODe(n){return lL.apply(this,arguments)}function lL(){return(lL=(0,M.A)(function*(n){n.K_.set("Online")})).apply(this,arguments)}function VDe(n){return dL.apply(this,arguments)}function dL(){return(dL=(0,M.A)(function*(n){n.B_.forEach((e,t)=>{aL(n,e)})})).apply(this,arguments)}function FDe(n,e){return hL.apply(this,arguments)}function hL(){return(hL=(0,M.A)(function*(n,e){xX(n),cL(n)?(n.K_.O_(e),uL(n)):n.K_.set("Unknown")})).apply(this,arguments)}function LDe(n,e,t){return fL.apply(this,arguments)}function fL(){return fL=(0,M.A)(function*(n,e,t){if(n.K_.set("Online"),e instanceof bJ&&2===e.state&&e.cause)try{yield(r=(0,M.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.B_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.B_.delete(u),s.U_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WS(n,r)}else if(e instanceof SS?n.U_.$e(e):e instanceof TJ?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(it.min()))try{const r=yield vX(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.B_.get(l);h&&s.B_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.B_.get(u);if(!h)return;s.B_.set(u,h.withResumeToken(Lr.EMPTY_BYTE_STRING,h.snapshotVersion)),RX(s,u);const g=new nl(h.target,u,l,h.sequenceNumber);aL(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ee("RemoteStore","Failed to raise snapshot:",r),yield WS(n,r)}var r}),fL.apply(this,arguments)}function WS(n,e,t){return pL.apply(this,arguments)}function pL(){return(pL=(0,M.A)(function*(n,e,t){if(!jd(e))throw e;n.k_.add(1),yield Z_(n),n.K_.set("Offline"),t||(t=()=>vX(n.localStore)),n.asyncQueue.enqueueRetryable((0,M.A)(function*(){Ee("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield H0(n)}))})).apply(this,arguments)}function MX(n,e){return e().catch(t=>WS(n,t,e))}function ty(n){return gL.apply(this,arguments)}function gL(){return(gL=(0,M.A)(function*(n){const e=Fe(n),t=Xd(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;UDe(e);)try{const i=yield TDe(e.localStore,r);if(null===i){0===e.L_.length&&t.a_();break}r=i.batchId,BDe(e,i)}catch(i){yield WS(e,i)}kX(e)&&NX(e)})).apply(this,arguments)}function UDe(n){return Jd(n)&&n.L_.length<10}function BDe(n,e){n.L_.push(e);const t=Xd(n);t.s_()&&t.f_&&t.g_(e.mutations)}function kX(n){return Jd(n)&&!Xd(n).i_()&&n.L_.length>0}function NX(n){Xd(n).start()}function jDe(n){return mL.apply(this,arguments)}function mL(){return(mL=(0,M.A)(function*(n){Xd(n).w_()})).apply(this,arguments)}function zDe(n){return _L.apply(this,arguments)}function _L(){return(_L=(0,M.A)(function*(n){const e=Xd(n);for(const t of n.L_)e.g_(t.mutations)})).apply(this,arguments)}function $De(n,e,t){return yL.apply(this,arguments)}function yL(){return(yL=(0,M.A)(function*(n,e,t){const r=n.L_.shift(),i=S2.from(r,e,t);yield MX(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ty(n)})).apply(this,arguments)}function qDe(n,e){return vL.apply(this,arguments)}function vL(){return vL=(0,M.A)(function*(n,e){var t;e&&Xd(n).f_&&(yield(t=(0,M.A)(function*(i,s){if(function yJ(n){switch(n){default:return Qe();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}(a=s.code)&&a!==ue.ABORTED){const o=i.L_.shift();Xd(i).__(),yield MX(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ty(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),kX(n)&&NX(n)}),vL.apply(this,arguments)}function OX(n,e){return IL.apply(this,arguments)}function IL(){return(IL=(0,M.A)(function*(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const r=Jd(t);t.k_.add(3),yield Z_(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield H0(t)})).apply(this,arguments)}function EL(n,e){return wL.apply(this,arguments)}function wL(){return(wL=(0,M.A)(function*(n,e){const t=Fe(n);e?(t.k_.delete(2),yield H0(t)):e||(t.k_.add(2),yield Z_(t),t.K_.set("Unknown"))})).apply(this,arguments)}function ny(n){return n.W_||(n.W_=function(t,r,i){const s=Fe(t);return s.b_(),new RDe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:ODe.bind(null,n),mo:VDe.bind(null,n),po:FDe.bind(null,n),R_:LDe.bind(null,n)}),n.q_.push(function(){var e=(0,M.A)(function*(t){t?(n.W_.__(),cL(n)?uL(n):n.K_.set("Unknown")):(yield n.W_.stop(),xX(n))});return function(t){return e.apply(this,arguments)}}())),n.W_}function Xd(n){return n.G_||(n.G_=function(t,r,i){const s=Fe(t);return s.b_(),new xDe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:jDe.bind(null,n),po:qDe.bind(null,n),p_:zDe.bind(null,n),y_:$De.bind(null,n)}),n.q_.push(function(){var e=(0,M.A)(function*(t){t?(n.G_.__(),yield ty(n)):(yield n.G_.stop(),n.L_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))});return function(t){return e.apply(this,arguments)}}())),n.G_}class TL{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new TL(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new we(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(n,e){if(ni("AsyncQueue",`${e}: ${n}`),jd(n))return new we(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class iy{static emptySet(e){return new iy(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=P0(),this.sortedSet=new cr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new iy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VX{constructor(){this.z_=new cr(je.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?0!==e.type&&3===r.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==r.type?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.z_=this.z_.remove(t):1===e.type&&2===r.type?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Qe():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class sy{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new sy(e,t,iy.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class GDe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class HDe{constructor(){this.queries=FX(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,r){const i=Fe(t),s=i.queries;i.queries=FX(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})}(this,new we(ue.ABORTED,"Firestore shutting down"))}}function FX(){return new el(n=>ZY(n),D0)}function AL(){return(AL=(0,M.A)(function*(n,e){const t=Fe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new GDe,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=yield t.onListen(i,!0);break;case 1:s.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=ry(o,`Initialization of query '${B_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&SL(t)})).apply(this,arguments)}function DL(){return(DL=(0,M.A)(function*(n,e){const t=Fe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),0===s.J_.length?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function WDe(n,e){const t=Fe(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&SL(t)}function KDe(n,e,t){const r=Fe(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function SL(n){n.X_.forEach(e=>{e.next()})}var PL,LX;(LX=PL||(PL={})).na="default",LX.Cache="cache";class RL{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new sy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){return!e.fromCache||!this.Z_()||(!this.options.ua||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}aa(e){e=sy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==PL.Cache}}class jX{constructor(e){this.key=e}}class zX{constructor(e){this.key=e}}class $X{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Nt(),this.mutatedKeys=Nt(),this.Va=tJ(e),this.ma=new iy(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new VX,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const v=i.get(h),E=S0(this.query,g)?g:null,T=!!v&&this.mutatedKeys.has(v.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;v&&E?v.data.isEqual(E.data)?T!==P&&(r.track({type:3,doc:E}),R=!0):this.ya(v,E)||(r.track({type:2,doc:E}),R=!0,(u&&this.Va(E,u)>0||l&&this.Va(E,l)<0)&&(a=!0)):!v&&E?(r.track({type:0,doc:E}),R=!0):v&&!E&&(r.track({type:1,doc:v}),R=!0,(u||l)&&(a=!0)),R&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,g)=>function(E,T){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return P(E)-P(T)}(h.type,g.type)||this.Va(h.doc,g.doc)),this.wa(r),i=null!=i&&i;const a=t&&!i?this.Sa():[],u=0===this.Ra.size&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,0!==o.length||l?{snapshot:new sy(this.query,e.ma,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new VX,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Nt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new zX(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new jX(r))}),t}va(e){this.da=e.ds,this.Ra=Nt();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return sy.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class JDe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XDe{constructor(e){this.key=e,this.Fa=!1}}class ZDe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new el(a=>ZY(a),D0),this.Oa=new Map,this.Na=new Set,this.La=new cr(je.comparator),this.Ba=new Map,this.ka=new $2,this.qa={},this.Qa=new Map,this.Ka=Qf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}function eSe(n,e){return xL.apply(this,arguments)}function xL(){return(xL=(0,M.A)(function*(n,e,t=!0){const r=KS(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=yield qX(r,e,t,!0),i})).apply(this,arguments)}function tSe(n,e){return ML.apply(this,arguments)}function ML(){return(ML=(0,M.A)(function*(n,e){const t=KS(n);yield qX(t,e,!0,!1)})).apply(this,arguments)}function qX(n,e,t,r){return kL.apply(this,arguments)}function kL(){return(kL=(0,M.A)(function*(n,e,t,r){const i=yield function J_(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,Z.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new nl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}(n.localStore,bs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield function NL(n,e,t,r,i){return OL.apply(this,arguments)}(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&HS(n.remoteStore,i),a})).apply(this,arguments)}function OL(){return OL=(0,M.A)(function*(n,e,t,r,i){n.Ua=(g,v,E)=>{return(T=(0,M.A)(function*(R,z,j,H){let te=z.view.ga(j);te.ss&&(te=yield jS(R.localStore,z.query,!1).then(({documents:b})=>z.view.ga(b,te)));const me=H&&H.targetChanges.get(z.targetId),_e=H&&null!=H.targetMismatches.get(z.targetId),D=z.view.applyChanges(te,R.isPrimaryClient,me,_e);return HL(R,z.targetId,D.ba),D.snapshot}),function P(R,z,j,H){return T.apply(this,arguments)})(n,g,v,E);var T};const s=yield jS(n.localStore,e,!0),o=new $X(e,s.ds),a=o.ga(s.documents),u=O0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);HL(n,t,l.ba);const h=new JDe(e,t,o);return n.xa.set(e,h),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot}),OL.apply(this,arguments)}function nSe(n,e,t){return VL.apply(this,arguments)}function VL(){return(VL=(0,M.A)(function*(n,e,t){const r=Fe(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!D0(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield X_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ey(r.remoteStore,i.targetId),oy(r,i.targetId)}).catch(Bd))):(oy(r,i.targetId),yield X_(r.localStore,i.targetId,!0))})).apply(this,arguments)}function rSe(n,e){return FL.apply(this,arguments)}function FL(){return(FL=(0,M.A)(function*(n,e){const t=Fe(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ey(t.remoteStore,r.targetId))})).apply(this,arguments)}function LL(){return(LL=(0,M.A)(function*(n,e,t){const r=function rU(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oSe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aSe.bind(null,e),e}(n);try{const i=yield function(o,a){const u=Fe(o),l=Rr.now(),h=a.reduce((E,T)=>E.add(T.key),Nt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=so(),P=Nt();return u.hs.getEntries(E,h).next(R=>{T=R,T.forEach((z,j)=>{j.isValidDocument()||(P=P.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,T)).next(R=>{g=R;const z=[];for(const j of a){const H=RCe(j,g.get(j.key).overlayedDocument);null!=H&&z.push(new tl(j.key,H,FY(H.value.mapValue),Pr.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,z,a)}).next(R=>{v=R;const z=R.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(E,R.batchId,z)})}).then(()=>({batchId:v.batchId,changes:rJ(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new cr(Tt)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield rl(r,i.changes),yield ty(r.remoteStore)}catch(i){const s=ry(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function GX(n,e){return UL.apply(this,arguments)}function UL(){return(UL=(0,M.A)(function*(n,e){const t=Fe(n);try{const r=yield function wDe(n,e){const t=Fe(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const a=[];e.targetChanges.forEach((h,g)=>{const v=i.get(g);if(!v)return;a.push(t.Gr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Gr.addMatchingKeys(s,h.addedDocuments,g)));let E=v.withSequenceNumber(s.currentSequenceNumber);var P,R,z;null!==e.targetMismatches.get(g)?E=E.withResumeToken(Lr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),R=E,z=h,(0===(P=v).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Gr.updateTargetData(s,E))});let u=so(),l=Nt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(function IX(n,e,t){let r=Nt(),i=Nt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=so();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(it.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,Es:i}})}(s,o,e.documentUpdates).next(h=>{u=h.Is,l=h.Es})),!r.isEqual(it.min())){const h=t.Gr.getLastRemoteSnapshotVersion(s).next(g=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.us=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ba.get(s);o&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?tt(o.Fa):i.removedDocuments.size>0&&(tt(o.Fa),o.Fa=!1))}),yield rl(t,r,e)}catch(r){yield Bd(r)}})).apply(this,arguments)}function HX(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Fe(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const v of g.J_)v.ea(a)&&(l=!0)}),l&&SL(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sSe(n,e,t){return BL.apply(this,arguments)}function BL(){return(BL=(0,M.A)(function*(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new cr(je.comparator);o=o.insert(s,wr.newNoDocument(s,it.min()));const a=Nt().add(s),u=new N0(it.min(),new Map,new cr(Tt),o,a);yield GX(r,u),r.La=r.La.remove(s),r.Ba.delete(e),WL(r)}else yield X_(r.localStore,e,!1).then(()=>oy(r,e,t)).catch(Bd)})).apply(this,arguments)}function oSe(n,e){return jL.apply(this,arguments)}function jL(){return(jL=(0,M.A)(function*(n,e){const t=Fe(n),r=e.batch.batchId;try{const i=yield function EDe(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,v=g.keys();let E=Z.resolve();return v.forEach(T=>{E=E.next(()=>h.getEntry(u,T)).next(P=>{const R=l.docVersions.get(T);tt(null!==R),P.version.compareTo(R)<0&&(g.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Nt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);GL(t,r,null),qL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rl(t,i)}catch(i){yield Bd(i)}})).apply(this,arguments)}function aSe(n,e,t){return zL.apply(this,arguments)}function zL(){return(zL=(0,M.A)(function*(n,e,t){const r=Fe(n);try{const i=yield function(o,a){const u=Fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(tt(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);GL(r,e,t),qL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rl(r,i)}catch(i){yield Bd(i)}})).apply(this,arguments)}function qL(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function GL(n,e,t){const r=Fe(n);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function oy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||WX(n,r)})}function WX(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);null!==t&&(ey(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),WL(n))}function HL(n,e,t){for(const r of t)r instanceof jX?(n.ka.addReference(r.key,e),cSe(n,r)):r instanceof zX?(Ee("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||WX(n,r.key)):Qe()}function cSe(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(Ee("SyncEngine","New document in limbo: "+t),n.Na.add(r),WL(n))}function WL(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new je(rn.fromString(e)),r=n.Ka.next();n.Ba.set(r,new XDe(t)),n.La=n.La.insert(t,r),HS(n.remoteStore,new nl(bs(L_(t.path)),r,"TargetPurposeLimboResolution",Uo.oe))}}function rl(n,e,t){return KL.apply(this,arguments)}function KL(){return KL=(0,M.A)(function*(n,e,t){const r=Fe(n),i=[],s=[],o=[];var a;r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(u.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(l){i.push(l);const g=K2.zi(u.targetId,l);s.push(g)}}))}),yield Promise.all(o),r.Ma.R_(i),yield(a=(0,M.A)(function*(l,h){const g=Fe(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Z.forEach(h,E=>Z.forEach(E.Wi,T=>g.persistence.referenceDelegate.addReference(v,E.targetId,T)).next(()=>Z.forEach(E.Gi,T=>g.persistence.referenceDelegate.removeReference(v,E.targetId,T)))))}catch(v){if(!jd(v))throw v;Ee("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const T=g.us.get(E),R=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);g.us=g.us.insert(E,R)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),KL.apply(this,arguments)}function lSe(n,e){return QL.apply(this,arguments)}function QL(){return(QL=(0,M.A)(function*(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const r=yield yX(t.localStore,e);t.currentUser=e,(s=t).Qa.forEach(a=>{a.forEach(u=>{u.reject(new we(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Qa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rl(t,r.Ts)}var s})).apply(this,arguments)}function dSe(n,e){const t=Fe(n),r=t.Ba.get(e);if(r&&r.Fa)return Nt().add(r.key);{let i=Nt();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const a=t.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function KS(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GX.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dSe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sSe.bind(null,e),e.Ma.R_=WDe.bind(null,e.eventManager),e.Ma.Wa=KDe.bind(null,e.eventManager),e}let QS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,M.A)(function*(){r.serializer=G0(t.databaseInfo.databaseId),r.sharedClientState=r.za(t),r.persistence=r.ja(t),yield r.persistence.start(),r.localStore=r.Ha(t),r.gcScheduler=r.Ja(t,r.localStore),r.indexBackfillerScheduler=r.Ya(t,r.localStore)})()}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return function _X(n,e,t,r){return new IDe(n,e,t,r)}(this.persistence,new mX,t.initialUser,this.serializer)}ja(t){return new q2(LS.ei,this.serializer)}za(t){return new CX}terminate(){var t=this;return(0,M.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class iU extends QS{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){return tt(this.persistence.referenceDelegate instanceof US),new aX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new q2(r=>US.ei(r,t),this.serializer)}}let ay=(()=>{class n{initialize(t,r){var i=this;return(0,M.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>HX(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=lSe.bind(null,i.syncEngine),yield EL(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new HDe}createDatastore(t){const r=G0(t.databaseInfo.databaseId),i=new PDe(t.databaseInfo);return new MDe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>HX(this.syncEngine,r,0),u=DX.p()?new DX:new CDe,new NDe(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,l,h,g){const v=new ZDe(s,o,a,u,l,h);return g&&(v.$a=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,M.A)(function*(){var r,i,s;yield(s=(0,M.A)(function*(a){const u=Fe(a);Ee("RemoteStore","RemoteStore shutting down."),u.k_.add(5),yield Z_(u),u.Q_.shutdown(),u.K_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();class YS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class TSe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bi.UNAUTHENTICATED,this.clientId=cY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,M.A)(function*(u){Ee("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ee("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,M.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ry(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function oU(n,e){return aU.apply(this,arguments)}function aU(){return aU=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,M.A)(function*(s){r.isEqual(s)||(yield yX(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),aU.apply(this,arguments)}function XX(n,e){return uU.apply(this,arguments)}function uU(){return(uU=(0,M.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function cU(n){return lU.apply(this,arguments)}(n);Ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OX(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OX(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function lU(){return(lU=(0,M.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oU(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;ha("Error using user provided cache. Falling back to memory cache: "+e),yield oU(n,new QS)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),yield oU(n,new iU(void 0));var i;return n._offlineComponents})).apply(this,arguments)}function JS(n){return dU.apply(this,arguments)}function dU(){return(dU=(0,M.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield XX(n,n._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),yield XX(n,new ay))),n._onlineComponents})).apply(this,arguments)}function fU(){return(fU=(0,M.A)(function*(n){const e=yield JS(n),t=e.eventManager;return t.onListen=eSe.bind(null,e.syncEngine),t.onUnlisten=nSe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tSe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rSe.bind(null,e.syncEngine),t})).apply(this,arguments)}function nZ(n,e,t={}){const r=new ji;return n.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function(s,o,a,u,l){const h=new YS({next:v=>{h.eu(),o.enqueueAndForget(()=>function CL(n,e){return DL.apply(this,arguments)}(s,g));const E=v.docs.has(a);!E&&v.fromCache?l.reject(new we(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&u&&"server"===u.source?l.reject(new we(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),g=new RL(L_(a.path),h,{includeMetadataChanges:!0,ua:!0});return function bL(n,e){return AL.apply(this,arguments)}(s,g)}(yield function cy(n){return fU.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function iZ(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const sZ=new Map;function oZ(n){if(!je.isDocumentKey(n))throw new we(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Qe()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XS(n);throw new we(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class cZ{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new we(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new we(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function OSe(n,e,t,r){if(!0===e&&!0===r)throw new we(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iZ(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cZ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new we(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cZ(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new PAe;switch(r.type){case"firstParty":return new kAe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,M.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sZ.get(t);r&&(Ee("ComponentProvider","Removing Datastore"),sZ.delete(t),r.terminate())}(this),Promise.resolve()}}class rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class ii{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ii(this.firestore,e,this._key)}}class Yu extends rs{constructor(e,t,r){super(e,t,L_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ii(this.firestore,null,new je(e))}withConverter(e){return new Yu(this.firestore,e,this._path)}}function lZ(n,e,...t){if(n=Ti(n),1===arguments.length&&(e=cY.newId()),function pU(n,e,t){if(!t)throw new we(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("doc","path",e),n instanceof W0){const r=rn.fromString(e,...t);return oZ(r),new ii(n,null,new je(r))}{if(!(n instanceof ii||n instanceof Yu))throw new we(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return oZ(r),new ii(n.firestore,n instanceof Yu?n.converter:null,new je(r))}}class hZ{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new iL(this,"async_queue_retry"),this.fu=()=>{const r=GS();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=GS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=GS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new ji;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){var e=this;return(0,M.A)(function*(){if(0!==e.Iu.length){try{yield e.Iu[0](),e.Iu.shift(),e.r_.reset()}catch(t){if(!jd(t))throw t;Ee("AsyncQueue","Operation failed with retryable error: "+t)}e.Iu.length>0&&e.r_.jo(()=>e.wu())}})()}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{throw this.Au=r,this.Ru=!1,ni("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=TL.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&Qe()}verifyOperationInProgress(){}bu(){var e=this;return(0,M.A)(function*(){let t;do{t=e.gu,yield t}while(t!==e.gu)})()}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Zn extends W0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,M.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new hZ(t),e._firestoreClient=void 0,yield t}})()}}function fZ(n,e){const r="string"==typeof n?n:e||"(default)",i=WD("object"==typeof n?n:kK(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(()=>{const e=EK("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();s&&function VSe(n,e,t,r={}){var i;const s=(n=Yt(n,W0))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Bi.MOCK_USER;else{a=function m0e(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jD(JSON.stringify({alg:"none",type:"JWT"})),jD(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new we(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Bi(l)}n._authCredentials=new RAe(new aY(a,u))}}(i,...s)}return i}function xr(n){if(n._terminated)throw new we(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||function pZ(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cCe(n._databaseId,u,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iZ(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TSe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}(n),n._firestoreClient}class Jf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jf(Lr.fromBase64String(e))}catch(t){throw new we(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jf(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new we(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ly{constructor(e){this._methodName=e}}class _U{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}class ZS{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const USe=/^__.*__$/;class BSe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new $_(e,this.data,t,this.fieldTransforms)}}function _Z(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class eP{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new eP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return rP(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(0===e.length)throw this.qu("Document fields must not be empty");if(_Z(this.Mu)&&USe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class jSe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||G0(e)}$u(e,t,r,i=!1){return new eP({Mu:e,methodName:t,Ku:r,path:Dr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(n){const e=n._freezeSettings(),t=G0(n._databaseId);return new jSe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tP(n,e,t,r,i,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,e,t,i);bU("Data must be an object, but it was:",o,r);const a=IZ(r,o);let u,l;if(s.merge)u=new io(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const v=Y0(e,g,t);if(!o.contains(v))throw new we(ue.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);wZ(h,v)||h.push(v)}u=new io(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new BSe(new ns(a),u,l)}function ep(n,e){if(EZ(n=Ti(n)))return bU("Unsupported field value:",e,n),IZ(n,e);if(n instanceof ly)return function(r,i){if(!_Z(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&4!==e.Mu)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ep(a,i.ku(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=Ti(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oJ(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Rr.fromDate(r);return{timestampValue:G_(i.serializer,s)}}if(r instanceof Rr){const s=new Rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:G_(i.serializer,s)}}if(r instanceof _U)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jf)return{bytesValue:DJ(i.serializer,r._byteString)};if(r instanceof ii){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:M2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ZS)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.qu("VectorValues must only contain numeric values.");return A2(a.serializer,u)})}}}}};var a;throw i.qu(`Unsupported field value: ${XS(r)}`)}(n,e)}function IZ(n,e){const t={};return CY(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zd(n,(r,i)=>{const s=ep(i,e.Ou(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function EZ(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof _U||n instanceof Jf||n instanceof ii||n instanceof ly||n instanceof ZS)}function bU(n,e,t){if(!EZ(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=XS(t);throw e.qu("an object"===r?n+" a custom object":n+" "+r)}var i}function Y0(n,e,t){if((e=Ti(e))instanceof Xf)return e._internalPath;if("string"==typeof e)return nP(n,e);throw rP("Field path arguments must be of type string or ",n,!1,void 0,t)}const zSe=new RegExp("[~\\*/\\[\\]]");function nP(n,e,t){if(e.search(zSe)>=0)throw rP(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw rP(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rP(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new we(ue.INVALID_ARGUMENT,a+n+u)}function wZ(n,e){return n.some(t=>t.isEqual(e))}class J0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $Se(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $Se extends J0{data(){return super.data()}}function iP(n,e){return"string"==typeof e?nP(n,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}class PZ{convertValue(e,t="none"){switch(qd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Sr(o.doubleValue));return new ZS(s)}convertGeoPoint(e){return new _U(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(E0(e));default:return null}}convertTimestamp(e){const t=Jc(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);tt(UJ(r));const i=new Uf(r.get(1),r.get(3)),s=new je(r.popFirst(5));return i.isEqual(t)||ni(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hy extends J0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iP("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cP extends hy{data(e={}){return super.data(e)}}class Zd extends PZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,t)}}function ew(n,e){return function(r,i){const s=new ji;return r.asyncQueue.enqueueAndForget((0,M.A)(function*(){return function iSe(n,e,t){return LL.apply(this,arguments)}(yield function hU(n){return JS(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(xr(n),e)}!function(e,t=!0){R_=b_,T_(new Rf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zn(new xAe(r.getProvider("auth-internal")),new NAe(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new we(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zc(oY,"4.7.5",e),zc(oY,"4.7.5","esm2017")}();let py=(()=>{class n{constructor(){this.currentUserSubject=new ee(null),this.themeService=Q(_K),this.db=fZ(),g0().onAuthStateChanged(r=>{r?(this.saveUserToFirestore(r),this.currentUserSubject.next({uid:r.uid,email:r.email,displayName:r.displayName}),this.themeService.loadUserTheme(r.uid)):this.currentUserSubject.next(null)})}register(t,r,i){return function HTe(n,e,t){return dF.apply(this,arguments)}(g0(),t,r).then(o=>{if(o.user)return function YTe(n,e){return vF.apply(this,arguments)}(o.user,{displayName:i}).then(()=>(this.saveUserToFirestore(o.user),o))}).catch(o=>{throw console.error("B\u0142\u0105d rejestracji u\u017cytkownika:",o),o})}login(t,r){return function WTe(n,e,t){return ka(n.app)?Promise.reject(Ui(n)):YV(Ti(n),yQ.credential(e,t)).catch(function(){var r=(0,M.A)(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&iF(n),i});return function(i){return r.apply(this,arguments)}}())}(g0(),t,r).then(s=>{s.user&&this.saveUserToFirestore(s.user)})}loginWithGoogle(){return function Vbe(n,e,t){return $F.apply(this,arguments)}(g0(),new UTe).then(i=>{const s=i.user;s&&(this.saveUserToFirestore(s),this.themeService.loadUserTheme(s.uid),this.currentUserSubject.next({uid:s.uid,email:s.email,displayName:s.displayName}))})}isAuthenticated(){return null!==this.currentUserSubject.value}logout(){return function ibe(n){return Ti(n).signOut()}(g0())}getCurrentUser(){return this.currentUserSubject.asObservable()}saveUserToFirestore(t){const i=lZ(fZ(),"users",t.uid);(function WSe(n){n=Yt(n,ii);const e=Yt(n.firestore,Zn);return nZ(xr(e),n._key).then(t=>function DU(n,e,t){const r=t.docs.get(e._key),i=new Zd(n);return new hy(n,i,e._key,r,new tp(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))})(i).then(s=>{s.exists()||function KSe(n,e,t){n=Yt(n,ii);const r=Yt(n.firestore,Zn),i=function uP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return ew(r,[tP(Zf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pr.none())])}(i,{uid:t.uid,email:t.email,displayName:t.displayName||"",photoURL:t.photoURL||"",createdAt:(new Date).toISOString()},{merge:!0}).catch(o=>{console.error("B\u0142\u0105d zapisu u\u017cytkownika do Firestore:",o)})}).catch(s=>{console.error("B\u0142\u0105d podczas sprawdzania istnienia dokumentu:",s)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aPe(n,e){1&n&&(L(0,"p"),G(1,"Nazwa u\u017cytkownika jest wymagana."),O())}function uPe(n,e){1&n&&(L(0,"p"),G(1," Nazwa u\u017cytkownika mo\u017ce zawiera\u0107 tylko ma\u0142e litery i cyfry oraz musi zaczyna\u0107 si\u0119 od litery. "),O())}function cPe(n,e){if(1&n&&(L(0,"div",10),vn(1,aPe,2,0,"p")(2,uPe,2,0,"p"),O()),2&n){Le();const t=Pu(4);K(),zt(null!=t.errors&&t.errors.required?1:-1),K(),zt(null!=t.errors&&t.errors.pattern?2:-1)}}function lPe(n,e){if(1&n){const t=gr();L(0,"div",7)(1,"label",15),G(2,"Nazwa u\u017cytkownika"),O(),L(3,"input",16,3),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.displayName,i)||(s.displayName=i),st(i)}),O(),vn(5,cPe,3,2,"div",10),O()}if(2&n){const t=Pu(4),r=Le();K(3),Dt("ngModel",r.displayName),K(2),zt(null!=t&&t.touched&&null!=t&&t.invalid?5:-1)}}function dPe(n,e){1&n&&(L(0,"p"),G(1,"E-mail jest wymagany."),O())}function hPe(n,e){if(1&n&&(L(0,"div",10),vn(1,dPe,2,0,"p"),O()),2&n){Le();const t=Pu(10);K(),zt(null!=t.errors&&t.errors.required?1:-1)}}function fPe(n,e){1&n&&(L(0,"p"),G(1,"Has\u0142o jest wymagane."),O())}function pPe(n,e){1&n&&(L(0,"p"),G(1," Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 ma\u0142\u0105 liter\u0119, jedn\u0105 wielk\u0105 liter\u0119, jedn\u0105 cyfr\u0119, jeden znak specjalny i musi mie\u0107 co najmniej 6 znak\xf3w d\u0142ugo\u015bci. "),O())}function gPe(n,e){if(1&n&&(L(0,"div",10),vn(1,fPe,2,0,"p")(2,pPe,2,0,"p"),O()),2&n){Le();const t=Pu(16);K(),zt(null!=t.errors&&t.errors.required?1:-1),K(),zt(null!=t.errors&&t.errors.pattern?2:-1)}}function mPe(n,e){1&n&&(L(0,"p"),G(1,"Potwierdzenie has\u0142a jest wymagane."),O())}function _Pe(n,e){if(1&n&&(L(0,"div",10),vn(1,mPe,2,0,"p"),O()),2&n){Le();const t=Pu(4);K(),zt(null!=t.errors&&t.errors.required?1:-1)}}function yPe(n,e){1&n&&(L(0,"div",10)(1,"p"),G(2,"Has\u0142a nie s\u0105 zgodne."),O()())}function vPe(n,e){if(1&n){const t=gr();L(0,"div",7)(1,"label",17),G(2,"Potwierd\u017a has\u0142o"),O(),L(3,"input",18,4),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.confirmPassword,i)||(s.confirmPassword=i),st(i)}),O(),vn(5,_Pe,2,1,"div",10)(6,yPe,3,0,"div",10),O()}if(2&n){const t=Pu(4),r=Le();K(3),Dt("ngModel",r.confirmPassword),K(2),zt(t.touched&&t.invalid?5:-1),K(),zt(r.password!==r.confirmPassword&&t.touched?6:-1)}}let kZ=(()=>{class n{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.confirmPassword="",this.displayName="",this.emailChange=new jt,this.displayNameChange=new jt,this.passwordChange=new jt,this.confirmPasswordChange=new jt,this.usernameChange=new jt,this.googleLogin=new jt,this.formSubmit=new jt}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onConfirmPasswordChange(){this.confirmPasswordChange.emit(this.confirmPassword)}onUsernameChange(){this.usernameChange.emit(this.displayName)}onSubmit(){this.isLogin?this.email&&this.password?this.formSubmit.emit({email:this.email,displayName:this.displayName,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o."):this.email&&this.displayName&&this.password&&this.password===this.confirmPassword?this.formSubmit.emit({email:this.email,displayName:this.displayName,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}onGoogleLogin(){this.googleLogin.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password",confirmPassword:"confirmPassword",displayName:"displayName"},outputs:{emailChange:"emailChange",displayNameChange:"displayNameChange",passwordChange:"passwordChange",confirmPasswordChange:"confirmPasswordChange",usernameChange:"usernameChange",googleLogin:"googleLogin",formSubmit:"formSubmit"},standalone:!0,features:[sr],decls:23,vars:9,consts:[["authForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],["displayNameField","ngModel"],["confirmPasswordField","ngModel"],[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-]).{6,}$",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"disabled"],["type","button",1,"btn","google-login",3,"click"],["for","displayName"],["id","displayName","type","text","name","displayName","required","","pattern","^[a-z][a-z0-9]*$","placeholder","Wpisz nazw\u0119 u\u017cytkownika",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","","placeholder","Potwierd\u017a has\u0142o",3,"ngModelChange","ngModel"]],template:function(r,i){if(1&r){const s=gr();L(0,"div",5)(1,"h2"),G(2),O(),L(3,"form",6,0),Oe("ngSubmit",function(){return ct(s),st(i.onSubmit())}),vn(5,lPe,6,2,"div",7),L(6,"div",7)(7,"label",8),G(8,"E-mail"),O(),L(9,"input",9,1),St("ngModelChange",function(a){return ct(s),wt(i.email,a)||(i.email=a),st(a)}),O(),vn(11,hPe,2,1,"div",10),O(),L(12,"div",7)(13,"label",11),G(14,"Has\u0142o"),O(),L(15,"input",12,2),St("ngModelChange",function(a){return ct(s),wt(i.password,a)||(i.password=a),st(a)}),O(),vn(17,gPe,3,2,"div",10),O(),vn(18,vPe,7,3,"div",7),L(19,"button",13),G(20),O(),L(21,"button",14),Oe("click",function(){return ct(s),st(i.onGoogleLogin())}),G(22," Zaloguj przez Google "),O()()()}if(2&r){const s=Pu(4),o=Pu(10),a=Pu(16);K(2),pn(i.isLogin?"Logowanie":"Rejestracja"),K(3),zt(i.isLogin?-1:5),K(4),Dt("ngModel",i.email),K(2),zt(o.touched&&o.invalid?11:-1),K(4),Dt("ngModel",i.password),K(2),zt(a.touched&&a.invalid?17:-1),K(),zt(i.isLogin?-1:18),K(),Gt("disabled",s.invalid),K(),In(" ",i.buttonText," ")}},dependencies:[Li,E_,Fo,Ma,__,Vd,jO,ca,Nd],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:20px auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:var(--background-gradient);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:var(--button-background, #254636);color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return n})(),IPe=(()=>{class n{constructor(){this.router=Q(Ei),this.authService=Q(py),this.cdr=Q(Gh),this.email="",this.password="",this.isLogin=!0}login({email:t,password:r}){console.log("Attempting to log in with email:",t),t&&r?this.authService.login(t,r).then(()=>{console.log("Login successful, navigating to /home"),this.router.navigate(["/home"]),this.cdr.detectChanges()}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}loginWithGoogle(){this.authService.loginWithGoogle().then(()=>{console.log("Zalogowano za pomoc\u0105 Google")}).catch(t=>{console.error("B\u0142\u0105d logowania przez Google: ",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-login"]],standalone:!0,features:[sr],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","googleLogin","isLogin","buttonText","email","password"]],template:function(r,i){1&r&&(L(0,"app-auth-form",0),St("emailChange",function(o){return wt(i.email,o)||(i.email=o),o})("passwordChange",function(o){return wt(i.password,o)||(i.password=o),o}),Oe("formSubmit",function(o){return i.login(o)})("googleLogin",function(){return i.loginWithGoogle()}),O()),2&r&&(Gt("isLogin",!0)("buttonText","Zaloguj si\u0119"),Dt("email",i.email)("password",i.password))},dependencies:[Li,kZ]})}}return n})(),EPe=(()=>{class n{constructor(){this.email="",this.password="",this.confirmPassword="",this.displayName="",this.authService=Q(py),this.router=Q(Ei)}register({email:t,password:r,confirmPassword:i,displayName:s}){t&&r&&s?r===i?this.authService.register(t,r,s).then(()=>{this.router.navigate(["/home"]),console.log(`Zarejestrowano pomy\u015blnie u\u017cytkownika: ${s}`)}).catch(o=>{console.error("B\u0142\u0105d rejestracji:",o.message)}):console.error("Has\u0142a nie s\u0105 zgodne."):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-register"]],standalone:!0,features:[sr],decls:1,vars:6,consts:[[3,"emailChange","passwordChange","confirmPasswordChange","displayNameChange","formSubmit","isLogin","buttonText","email","password","confirmPassword","displayName"]],template:function(r,i){1&r&&(L(0,"app-auth-form",0),St("emailChange",function(o){return wt(i.email,o)||(i.email=o),o})("passwordChange",function(o){return wt(i.password,o)||(i.password=o),o})("confirmPasswordChange",function(o){return wt(i.confirmPassword,o)||(i.confirmPassword=o),o})("displayNameChange",function(o){return wt(i.displayName,o)||(i.displayName=o),o}),Oe("formSubmit",function(o){return i.register(o)}),O()),2&r&&(Gt("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Dt("email",i.email)("password",i.password)("confirmPassword",i.confirmPassword)("displayName",i.displayName))},dependencies:[Li,kZ]})}}return n})();const Na=()=>{const n=Q(py),e=Q(Ei);return console.log("AuthGuard: Checking authentication status"),n.isAuthenticated()?(console.log("AuthGuard: User is authenticated"),!0):(console.log("AuthGuard: User is not authenticated, redirecting to /login"),e.navigate(["/login"]),!1)},NZ_firebaseConfig={apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"};let wPe=(()=>{class n{constructor(){this.http=Q(iM),this.apiUrl="https://www.googleapis.com/youtube/v3"}getVideoDetails(t){return this.http.get(`https://www.googleapis.com/youtube/v3/videos?id=${t}&part=snippet,contentDetails,statistics&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}searchVideos(t,r=10){return this.http.get(`${this.apiUrl}/search?part=snippet&q=${t}&maxResults=${r}&key=AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VZ=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}saveTdee(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("calorie-calculations").add({...t,uid:r.uid,date:(new Date).toISOString()}).then(()=>console.log("Calorie calculation saved")).catch(i=>console.error("Error saving calorie calculation:",i)):Promise.reject("User not authenticated"))}loadTdee(){return new Vt(t=>{this.afAuth.currentUser.then(r=>{r?this.client.collection("calorie-calculations",i=>i.where("uid","==",r.uid).orderBy("date","desc").limit(1)).get().subscribe(i=>{if(i.empty)t.next(null);else{const s=i.docs[0].data();t.next(s)}}):t.error("User not authenticated")})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TPe=(()=>{class n{transform(t,r,i){return i-t.reduce((a,u)=>a+(u.calories||0),0)+r.reduce((a,u)=>a+(u.burnedKcal||0),0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=gi({name:"caloriesBalance",type:n,pure:!0,standalone:!0})}}return n})(),bPe=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}getComments(){return new Vt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("comments",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{console.log("Pobrane komentarze:",s),t.next(s)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania komentarzy:",r),t.next([])})})}addComment(t,r){t.trim()&&this.afAuth.currentUser.then(i=>{if(i){const s=this.client.createId();this.client.collection("comments").doc(s).set({text:t,uid:i.uid,date:r.toISOString().split("T")[0]}).then(()=>{console.log("Komentarz dodany do Firebase")}).catch(o=>{console.error("B\u0142\u0105d podczas dodawania komentarza do Firebase:",o)})}else console.error("Brak u\u017cytkownika")}).catch(i=>{console.error("B\u0142\u0105d podczas pobierania u\u017cytkownika:",i)})}getCommentsForDay(t){return new Vt(r=>{this.afAuth.currentUser.then(i=>{const s=i?.uid;if(s){const o=t.toISOString().split("T")[0];this.client.collection("comments",a=>a.where("uid","==",s).where("date","==",o)).valueChanges().subscribe(a=>{console.log("Pobrane komentarze:",a),r.next(a)})}else r.next([])}).catch(i=>{console.error("B\u0142\u0105d podczas pobierania komentarzy:",i),r.next([])})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const APe=(n,e)=>e.id;function CPe(n,e){1&n&&(L(0,"p"),G(1,"Nie przekroczy\u0142e\u015b zapotrzebowania kalorycznego"),O())}function DPe(n,e){1&n&&(L(0,"p",12),G(1,"Przekroczy\u0142e\u015b zapotrzebowanie kaloryczne"),O())}function SPe(n,e){if(1&n&&(L(0,"div",2)(1,"h3"),G(2,"Bilans kaloryczny:"),O(),L(3,"p"),G(4,"(Twoje zapotrzebowanie kaloryczne, minus spo\u017cyte kalorie, plus kalorie spalone podczas aktywno\u015bci fizycznej)"),O(),L(5,"p",11),G(6),Po(7,"caloriesBalance"),Po(8,"number"),O(),vn(9,CPe,2,0,"p"),Po(10,"caloriesBalance"),vn(11,DPe,2,0,"p",12),O()),2&n){const t=Le();K(6),In(" ",id(8,6,h1(7,2,t.meals(),t.trainings(),t.tdee),"1.0-0")," kcal "),K(3),zt(h1(10,9,t.meals(),t.trainings(),t.tdee)>0?9:11)}}function PPe(n,e){if(1&n&&(L(0,"li",7)(1,"p",13),G(2),O(),L(3,"p",14),G(4),O()()),2&n){const t=e.$implicit;K(2),pn(t.text),K(2),pn(t.date)}}function RPe(n,e){1&n&&Yr(0,"img",19),2&n&&Gt("src",Le().$implicit.imageUrl,kg)}function xPe(n,e){if(1&n&&(L(0,"div",9)(1,"div",15)(2,"h3",16),G(3),O()(),L(4,"div",17)(5,"p",18),G(6),O(),vn(7,RPe,1,1,"img",19),O()()),2&n){const t=e.$implicit;K(3),pn(t.name),K(3),In("Kalorie: ",t.calories," kcal"),K(),zt(t.imageUrl?7:-1)}}function MPe(n,e){1&n&&Yr(0,"img",20),2&n&&Gt("src",Le().$implicit.imageUrl,kg)}function kPe(n,e){if(1&n&&(L(0,"div",9)(1,"div",15)(2,"h3",16),G(3),O()(),L(4,"div",17)(5,"p",18),G(6),O(),L(7,"p",18),G(8),O(),vn(9,MPe,1,1,"img",20),O()()),2&n){const t=e.$implicit;K(3),pn(t.name),K(3),In("Spalone kalorie: ",t.burnedKcal," kcal"),K(2),In("Czas: ",t.time," min"),K(),zt(t.imageUrl?9:-1)}}function NPe(n,e){if(1&n&&(L(0,"div",10)(1,"h3"),G(2,"Watch the video:"),O(),Yr(3,"iframe",21),O()),2&n){const t=Le();K(3),Gt("src",t.videoUrl,Sb)}}function OPe(n,e){1&n&&(L(0,"p"),G(1,"No video available for this training."),O())}let VPe=(()=>{class n{constructor(){this.commentsService=Q(bPe),this.comment=ps(""),this.comments=ps([]),this.day=ps(null),this.meals=ps([]),this.trainings=ps([]),this.tdee=0,this.calorieService=Q(VZ),this.youtubeService=Q(wPe),this.route=Q(dd),this.trainingAndMealService=Q(Df),this.videoDetails=null,this.videoId=null,this.sanitizer=Q(gM),this.videoUrl=null,this.calorieData={tdee:0},this.route.paramMap.subscribe(t=>{const r=t.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){const i=new Date(r);this.day.set(i),this.loadDetails(i)}}),this.loadTdeeFromFirebase()}loadDetails(t){this.trainingAndMealService.getMealsByDate(t).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(t).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r),this.checkForVideo(r)}),this.loadComments()}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}checkForVideo(t){const r=t.find(i=>i.videoLink);r?(console.log("Training with video link found:",r),this.videoId=this.extractVideoId(r.videoLink),this.videoId?this.loadVideoDetails(this.videoId):(console.error("Brak ID wideo w linku"),this.videoUrl=null)):(console.log("Brak linku do wideo"),this.videoId=null,this.videoDetails=null,this.videoUrl=null)}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}loadVideoDetails(t){t&&this.youtubeService.getVideoDetails(t).subscribe(r=>{console.log("Odpowied\u017a z YouTube:",r),r.items&&r.items.length>0?(this.videoDetails=r.items[0],this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${t}`)):(console.error("Brak wynik\xf3w dla wideo"),this.videoDetails=null,this.videoUrl=null)},r=>{console.error("B\u0142\u0105d \u0142adowania wideo:",r)})}loadComments(){const t=this.day();t&&this.commentsService.getCommentsForDay(t).subscribe(r=>{this.comments.set(r)})}addComment(){const t=this.comment();if(console.log("Nowy komentarz:",t),!t.trim())return;const r=new Date;this.commentsService.addComment(t,r),this.comments.update(i=>[...i,{text:t,date:r.toISOString().split("T")[0]}]),this.comment.set("")}onCommentChange(t){this.comment.set(t.target.value)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-day-details"]],standalone:!0,features:[sr],decls:23,vars:7,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"comment-section"],["placeholder","Dodaj komentarz",1,"comment-input",3,"input","value"],[1,"comment-button",3,"click"],[1,"comments-list"],[1,"comment-item"],[1,"cards-container"],[1,"card"],[1,"youtube-video"],[1,"balance-value"],[1,"text-danger"],[1,"comment-text"],[1,"comment-date"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"card-text"],["alt","Meal image",1,"card-image",3,"src"],["alt","Training image",1,"card-image",3,"src"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h2",1),G(2),Po(3,"date"),O(),vn(4,SPe,12,13,"div",2),L(5,"div",3)(6,"h2"),G(7,"Dodaj komentarz"),O(),L(8,"input",4),Oe("input",function(o){return i.onCommentChange(o)}),O(),L(9,"button",5),Oe("click",function(){return i.addComment()}),G(10,"Dodaj"),O()(),L(11,"h2"),G(12,"Komentarze"),O(),L(13,"ul",6),gs(14,PPe,5,2,"li",7,So),O(),L(16,"div",8),gs(17,xPe,8,3,"div",9,So),gs(19,kPe,10,4,"div",9,APe),O(),vn(21,NPe,4,1,"div",10)(22,OPe,2,0,"p"),O()),2&r&&(K(2),In("Details for ",id(3,4,i.day(),"fullDate"),""),K(2),zt(i.tdee?4:-1),K(4),Gt("value",i.comment()),K(6),ms(i.comments()),K(3),ms(i.meals()),K(2),ms(i.trainings()),K(2),zt(i.videoUrl?21:22))},dependencies:[fm,TPe,Ac,Q1,Li],styles:[".day-details[_ngcontent-%COMP%]{background:var(--background-gradient);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:1200px;margin:30px auto;color:#fff}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.cards-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:20px}.card[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:10px;box-shadow:0 4px 6px #0000001a;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026}.card-header[_ngcontent-%COMP%]{background-color:#000000b3;padding:15px;color:#fff}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0}.card-body[_ngcontent-%COMP%]{padding:15px;color:#333}.card-text[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0}.card-image[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;margin-top:10px}.youtube-video[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.youtube-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{max-width:100%;border-radius:10px}.comment-section[_ngcontent-%COMP%]{background-color:#00000080;padding:20px;border-radius:8px;margin-bottom:20px;color:#fff}.comment-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px;text-align:center}.comment-input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;font-size:1rem;border:1px solid #ddd;border-radius:8px;color:#333}.comment-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;font-size:1rem;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s}.comment-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.comments-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.comment-item[_ngcontent-%COMP%]{background-color:#ffffffe6;padding:10px;margin-bottom:10px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.comment-text[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;color:#333}.comment-date[_ngcontent-%COMP%]{font-size:.9rem;color:#888;text-align:right;margin-top:5px}.comment-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #0000001a}.comment-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.comment-button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;padding:10px 20px;font-size:1rem;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s}.comment-button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.cards-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.card[_ngcontent-%COMP%]{margin-bottom:20px}}"]})}}return n})(),FPe=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}addMeasurement(t){return new Promise((r,i)=>{this.afAuth.currentUser.then(s=>{const o=s?.uid;o?this.client.collection("measurements").add({...t,uid:o,date:t.date.toString()}).then(()=>{console.log("Measurement added successfully"),r()}).catch(a=>{console.error("Error adding measurement:",a),i(a)}):i(new Error("No user found"))}).catch(s=>{console.error("Error getting user:",s),i(s)})})}getMeasurements(){return new Vt(t=>{this.afAuth.currentUser.then(r=>{const i=r?.uid;i?this.client.collection("measurements",s=>s.where("uid","==",i)).valueChanges().subscribe(s=>{t.next(s)}):t.next([])}).catch(()=>t.next([]))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LPe(n,e){if(1&n&&(L(0,"tr")(1,"td"),G(2),O(),L(3,"td"),G(4),O(),L(5,"td",8),G(6),O(),L(7,"td",8),G(8),O(),L(9,"td",8),G(10),O(),L(11,"td",8),G(12),O(),L(13,"td",8),G(14),O(),L(15,"td",8),G(16),O()()),2&n){const t=e.$implicit,r=e.$index,i=Le(2);K(2),pn(t.date),K(2),pn(t.weight),K(),Gt("ngStyle",i.getStyle(t,r,"waist")),K(),pn(t.waist),K(),Gt("ngStyle",i.getStyle(t,r,"hips")),K(),pn(t.hips),K(),Gt("ngStyle",i.getStyle(t,r,"thigh")),K(),pn(t.thigh),K(),Gt("ngStyle",i.getStyle(t,r,"buttocks")),K(),pn(t.buttocks),K(),Gt("ngStyle",i.getStyle(t,r,"arms")),K(),pn(t.arms),K(),Gt("ngStyle",i.getStyle(t,r,"chest")),K(),pn(t.chest)}}function UPe(n,e){if(1&n&&(L(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),G(5,"Data"),O(),L(6,"th"),G(7,"Waga (kg)"),O(),L(8,"th"),G(9,"Talia (cm)"),O(),L(10,"th"),G(11,"Biodra (cm)"),O(),L(12,"th"),G(13,"Uda (cm)"),O(),L(14,"th"),G(15,"Po\u015bladki (cm)"),O(),L(16,"th"),G(17,"Ramiona (cm)"),O(),L(18,"th"),G(19,"Klatka piersiowa (cm)"),O()()(),L(20,"tbody"),gs(21,LPe,17,14,"tr",null,So),O()()()),2&n){const t=Le();K(21),ms(t.measurements)}}function BPe(n,e){if(1&n){const t=gr();L(0,"div",7)(1,"form",9),Oe("ngSubmit",function(){return ct(t),st(Le().addMeasurement())}),L(2,"div",10)(3,"label",11),G(4,"Data:"),O(),L(5,"input",12),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.date,i)||(s.newMeasurement.date=i),st(i)}),O()(),L(6,"div",10)(7,"label",13),G(8,"Talia:"),O(),L(9,"input",14),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.waist,i)||(s.newMeasurement.waist=i),st(i)}),O()(),L(10,"div",10)(11,"label",15),G(12,"Biodra:"),O(),L(13,"input",16),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.hips,i)||(s.newMeasurement.hips=i),st(i)}),O()(),L(14,"div",10)(15,"label",17),G(16,"Po\u015bladki:"),O(),L(17,"input",18),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.buttocks,i)||(s.newMeasurement.buttocks=i),st(i)}),O()(),L(18,"div",10)(19,"label",19),G(20,"Uda:"),O(),L(21,"input",20),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.thigh,i)||(s.newMeasurement.thigh=i),st(i)}),O()(),L(22,"div",10)(23,"label",21),G(24,"Ramiona:"),O(),L(25,"input",22),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.arms,i)||(s.newMeasurement.arms=i),st(i)}),O()(),L(26,"div",10)(27,"label",23),G(28,"Klatka piersiowa:"),O(),L(29,"input",24),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.chest,i)||(s.newMeasurement.chest=i),st(i)}),O()(),L(30,"div",10)(31,"label",25),G(32,"Waga:"),O(),L(33,"input",26),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newMeasurement.weight,i)||(s.newMeasurement.weight=i),st(i)}),O()(),L(34,"div",10)(35,"button",27),G(36,"Dodaj pomiar"),O()()()()}if(2&n){const t=Le();K(5),Dt("ngModel",t.newMeasurement.date),K(4),Dt("ngModel",t.newMeasurement.waist),K(4),Dt("ngModel",t.newMeasurement.hips),K(4),Dt("ngModel",t.newMeasurement.buttocks),K(4),Dt("ngModel",t.newMeasurement.thigh),K(4),Dt("ngModel",t.newMeasurement.arms),K(4),Dt("ngModel",t.newMeasurement.chest),K(4),Dt("ngModel",t.newMeasurement.weight)}}let FZ=(()=>{class n{constructor(t){this.measurementsService=t,this.measurements=[],this.isFormVisible=!1,this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}ngOnInit(){this.loadMeasurements()}loadMeasurements(){this.measurementsService.getMeasurements().subscribe(t=>{this.measurements=t})}addMeasurement(){this.measurementsService.addMeasurement(this.newMeasurement).then(()=>{this.loadMeasurements()}),this.newMeasurement={id:"",date:(new Date).toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}calculateChange(t,r){return 0===r?"-":(t.weight-this.measurements[r-1].weight).toFixed(2)}getStyle(t,r,i){if(0===r)return{};const o=t[i],a=this.measurements[r-1][i];if("number"==typeof o&&"number"==typeof a){const u=o-a;return u>0?{color:"red"}:u<0?{color:"green"}:{color:"black"}}return{}}toggleForm(){this.isFormVisible=!this.isFormVisible}static{this.\u0275fac=function(r){return new(r||n)(De(FPe))}}static{this.\u0275cmp=$n({type:n,selectors:[["app-weight-control"]],standalone:!0,features:[sr],decls:10,vars:2,consts:[[1,"measurements-summary"],[1,"justify-content-center"],[1,"measurements-content"],[1,"measurements-table"],[4,"ngIf"],[1,"btn-container"],[1,"btn-toggle",3,"click"],[1,"measurement-form-container"],[3,"ngStyle"],[1,"measurement-form",3,"ngSubmit"],[1,"form-group"],["for","date"],["type","date","id","date","name","date","required","",3,"ngModelChange","ngModel"],["for","waist"],["type","number","id","waist","name","waist","required","",3,"ngModelChange","ngModel"],["for","hips"],["type","number","id","hips","name","hips","required","",3,"ngModelChange","ngModel"],["for","buttocks"],["type","number","id","buttocks","name","buttocks","required","",3,"ngModelChange","ngModel"],["for","thigh"],["type","number","id","thigh","name","thigh","required","",3,"ngModelChange","ngModel"],["for","arms"],["type","number","id","arms","name","arms","required","",3,"ngModelChange","ngModel"],["for","chest"],["type","number","id","chest","name","chest","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h3",1),G(2,"Zestawienie Pomiar\xf3w cia\u0142a:"),O(),L(3,"div",2)(4,"div",3),vn(5,UPe,23,0,"div",4),O(),L(6,"div",5)(7,"button",6),Oe("click",function(){return i.toggleForm()}),G(8,"Dodaj pomiar"),O()(),vn(9,BPe,37,8,"div",7),O()()),2&r&&(K(5),Gt("ngIf",i.measurements.length>1),K(4),zt(i.isFormVisible?9:-1))},dependencies:[Li,E_,Fo,Od,Ma,__,Vd,ca,Nd,Ac,R$,k$],styles:[".measurements-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.measurements-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.measurements-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.measurement-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .measurement-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}@media (max-width: 768px){.measurement-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.justify-content-center[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{text-align:center;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .btn-toggle[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:auto;margin:0 auto}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}"]})}}return n})(),jPe=(()=>{class n{constructor(){this.meals=ps([]),this.trainings=ps([]),this.currentMonth=new Date,this.trainingAndMealService=Q(Df),this.cdr=Q(Gh),this.loadMonthlyDetails()}changeMonth(t){const r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+t),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){const t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(t,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(t,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().filter(i=>!0===i.isDone).reduce((i,s)=>i+(s.burnedKcal?Number(s.burnedKcal):0),0)}totalTrainingTime(){const r=this.trainings().filter(i=>!0===i.isDone);return console.log("Completed Trainings:",r),r.reduce((i,s)=>{const o=s.time?Number(s.time):0;return console.log("Training Time:",o),i+(isNaN(o)?0:o)},0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-monthly-summary"]],standalone:!0,features:[sr],decls:32,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Oe("click",function(){return i.changeMonth(-1)}),G(4," \u2190 Poprzedni miesi\u0105c "),O(),L(5,"h2",4),G(6),Po(7,"date"),O(),L(8,"button",3),Oe("click",function(){return i.changeMonth(1)}),G(9," Nast\u0119pny miesi\u0105c \u2192 "),O()(),L(10,"p"),G(11,"W tej sekcji zobaczysz podsumowanie swojego miesi\u0105ca: ile kalorii spo\u017cy\u0142e\u015b, ile uda\u0142o Ci si\u0119 spali\u0107 oraz jak d\u0142ugo \u0107wiczy\u0142e\u015b w danym miesi\u0105cu. Mo\u017cesz nawigowa\u0107 mi\u0119dzy miesi\u0105cami, aby \u015bledzi\u0107 swoje post\u0119py w czasie."),O(),L(12,"div",5)(13,"p")(14,"strong"),G(15,"\u0141\u0105czna liczba kalorii:"),O(),G(16),O(),L(17,"p"),G(18,"To \u0142\u0105czna liczba kalorii, kt\xf3re spo\u017cy\u0142e\u015b w tym miesi\u0105cu. Umo\u017cliwia Ci to monitorowanie Twojej diety i pomaga w ocenie, czy jeste\u015b na drodze do osi\u0105gni\u0119cia swoich cel\xf3w zdrowotnych."),O(),L(19,"p")(20,"strong"),G(21,"\u0141\u0105czna liczba spalonych kalorii:"),O(),G(22),O(),L(23,"p"),G(24,"To \u0142\u0105czna liczba kalorii, kt\xf3re spali\u0142e\u015b podczas aktywno\u015bci fizycznej. Jest to kluczowa informacja, je\u015bli chcesz \u015bledzi\u0107, jak efektywne s\u0105 Twoje treningi."),O(),L(25,"p")(26,"strong"),G(27,"\u0141\u0105czny czas trening\xf3w:"),O(),G(28),O(),L(29,"p"),G(30,"Ten czas pokazuje, ile minut po\u015bwi\u0119ci\u0142e\u015b na \u0107wiczenia w tym miesi\u0105cu. Dzi\u0119ki temu mo\u017cesz monitorowa\u0107 swoje zaanga\u017cowanie w aktywno\u015b\u0107 fizyczn\u0105 i dostosowa\u0107 plan treningowy."),O()()()(),Yr(31,"app-weight-control")),2&r&&(K(6),In(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",id(7,4,i.currentMonth,"MMMM yyyy")," "),K(10),In(" ",i.totalCalories()," kcal"),K(6),In(" ",i.totalBurnedCalories()," kcal"),K(6),In(" ",i.totalTrainingTime()," min"))},dependencies:[fm,FZ],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:30px;border-radius:12px;background-color:#fff;box-shadow:0 4px 15px #0000001a;max-width:900px;margin:20px auto;font-family:Arial,sans-serif}.monthly-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;text-align:center;color:#254636;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s,transform .2s}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #2d6762);transform:scale(1.05)}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333;margin:0;padding:0 20px}.calories-summary[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#f5f5f5;border-radius:8px;box-shadow:0 2px 8px #0000000d}.calories-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin:10px 0;line-height:1.5}.calories-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:#254636}.monthly-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.monthly-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .monthly-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%;transition:background-color .3s}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:var(--button-background, #2d6762)}@media (max-width: 768px){.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:22px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{padding:12px 18px;font-size:14px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;padding:0 10px}.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.calories-summary[_ngcontent-%COMP%]{padding:15px;background-color:#fafafa}}"]})}}return n})(),PU=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}getAllFitnessPlans(){return this.client.collection("FitnessPlans").valueChanges()}createFitnessPlan(t){const r={...t};this.client.collection("FitnessPlans").add(r).then(()=>console.log("Plan fitness dodany")).catch(i=>console.error("B\u0142\u0105d przy dodawaniu planu fitness",i))}getFitnessPlanById(t){return this.client.collection("FitnessPlans",r=>r.where("id","==",t)).valueChanges().pipe(qe(r=>r.length>0?r[0]:void 0),Ni(r=>{console.log("Fetched Plan Data from Firestore:",r)}),qe(r=>{if(r)return r;console.log("Brak planu dla podanego ID:",t)}))}updateFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t.id)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).update(t).then(()=>console.log("Plan fitness zaktualizowany")).catch(s=>console.error("B\u0142\u0105d przy aktualizacji planu fitness",s))})})}deleteFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).delete().then(()=>console.log("Plan fitness usuni\u0119ty")).catch(s=>console.error("B\u0142\u0105d przy usuwaniu planu fitness",s))})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zPe(n,e){if(1&n){const t=gr();L(0,"div",6)(1,"div",8)(2,"input",9),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.videoLink,i)||(s.videoLink=i),st(i)}),O(),L(3,"input",10),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.time,i)||(s.time=i),st(i)}),O(),L(4,"input",11),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.burnedKcal,i)||(s.burnedKcal=i),st(i)}),O(),L(5,"button",12),Oe("click",function(){const i=ct(t).$index;return st(Le().removeDay(i))}),G(6,"Usu\u0144 dzie\u0144"),O()()()}if(2&n){const t=e.$implicit;K(2),Dt("ngModel",t.videoLink),K(),Dt("ngModel",t.time),K(),Dt("ngModel",t.burnedKcal)}}let $Pe=(()=>{class n{constructor(){this.fitnessPlanService=Q(PU),this.router=Q(Ei),this.plans=[],this.planName="",this.days=[],this.planDescription="",this.loadAllPlans()}loadAllPlans(){this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Wszystkie plany:",t),this.plans=t})}addDay(){this.days.push({date:"",videoLink:"",time:"",burnedKcal:0})}removeDay(t){this.days.splice(t,1)}savePlan(){const t={id:this.fitnessPlanService.client.createId(),name:this.planName,description:this.planDescription,days:this.days,uid:""};this.fitnessPlanService.createFitnessPlan(t),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-training-plans"]],standalone:!0,features:[sr],decls:16,vars:2,consts:[[1,"plan-form"],[1,"image-container"],["src","assets/foto.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"form-description"],["placeholder","Nazwa planu",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Opis planu",1,"form-control",3,"ngModelChange","ngModel"],[1,"day-card"],[1,"btn-primary",3,"click"],[1,"day-form"],["placeholder","Link do YouTube",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Czas trwania (min)","type","number",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Spalone kcal","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-danger",3,"click"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"div",1),Yr(2,"img",2),O(),L(3,"div",3)(4,"h2"),G(5,"Stw\xf3rz sw\xf3j wymarzony plan fitness!"),O(),L(6,"p"),G(7," Zaprojektuj idealny harmonogram \u0107wicze\u0144 dostosowany do Twoich cel\xf3w i potrzeb. Dodaj dni treningowe, ustal czas trwania sesji, wprowad\u017a linki do inspiruj\u0105cych film\xf3w na YouTube i oszacuj kalorie, kt\xf3re planujesz spali\u0107. Twoja aktywno\u015b\u0107 fizyczna zaczyna si\u0119 tutaj! "),O()(),L(8,"input",4),St("ngModelChange",function(o){return wt(i.planName,o)||(i.planName=o),o}),O(),L(9,"input",5),St("ngModelChange",function(o){return wt(i.planDescription,o)||(i.planDescription=o),o}),O(),gs(10,zPe,7,3,"div",6,So),L(12,"button",7),Oe("click",function(){return i.addDay()}),G(13,"Dodaj dzie\u0144"),O(),L(14,"button",7),Oe("click",function(){return i.savePlan()}),G(15,"Zapisz plan"),O()()),2&r&&(K(8),Dt("ngModel",i.planName),K(),Dt("ngModel",i.planDescription),K(),ms(i.days))},dependencies:[Li,Fo,Od,Ma,ca],styles:[".plan-form[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0 auto;padding:20px;max-width:900px;width:100%;display:flex;flex-direction:column;align-items:center}.input-container[_ngcontent-%COMP%]{width:100%}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:60%;margin-top:10px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}.day-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;padding:15px;margin-bottom:15px;width:60%}.day-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:60%;text-align:center;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:10px}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-bottom:20px}.plan-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:10px}@media (max-width: 768px){.plan-form[_ngcontent-%COMP%]{width:100%;padding:15px}.input-container[_ngcontent-%COMP%]{width:100%}input.form-control[_ngcontent-%COMP%]{width:100%;font-size:14px}.day-card[_ngcontent-%COMP%]{width:100%;padding:10px}button.btn-primary[_ngcontent-%COMP%], button.btn-danger[_ngcontent-%COMP%]{width:100%;font-size:14px;padding:10px}.image-container[_ngcontent-%COMP%]{width:100%}.plan-image[_ngcontent-%COMP%]{max-width:100%;height:auto}}.form-description[_ngcontent-%COMP%]{margin:16px 0;text-align:center}.form-description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#2a9d8f}.form-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#264653;line-height:1.5}"]})}}return n})();const qPe=n=>["/plan",n];function GPe(n,e){if(1&n){const t=gr();L(0,"div",8),Oe("click",function(){const i=ct(t).$implicit;return st(Le().selectPlan(i))}),L(1,"h5",9),G(2),O(),L(3,"p"),G(4),O(),L(5,"div",10)(6,"button",11),G(7," Wi\u0119cej "),O(),L(8,"button",12),Oe("click",function(){const i=ct(t).$implicit;return st(Le().deletePlan(i))}),G(9," Usu\u0144 "),O()()()}if(2&n){const t=e.$implicit,r=Le();$h("selected",t.id===(null==r.selectedPlan?null:r.selectedPlan.id)),K(2),pn(t.name),K(2),pn(t.description),K(2),Gt("routerLink",d1(5,qPe,t.id))}}let HPe=(()=>{class n{constructor(){this.fitnessPlanService=Q(PU),this.calendarService=Q(Df),this.fitnessPlans=[],this.selectedPlan=null,this.startDate=new Date,this.router=Q(Ei),this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Plany w komponencie:",t),this.fitnessPlans=t})}selectPlan(t){console.log("Wybrano plan:",t),this.selectedPlan=t}goToPlanDetails(t){this.router.navigate([`/plan/${t}`])}startPlan(){if(console.log("Rozpoczynanie planu:",this.selectedPlan),this.selectedPlan){let t=this.startDate;t instanceof Date||(t=new Date(t)),this.selectedPlan.days.forEach((r,i)=>{const s=new Date(t);s.setDate(t.getDate()+i),this.calendarService.addTraining({name:r.name?`Trening: ${r.name}`:`Trening: Dzie\u0144 ${i+1}`,date:s,burnedKcal:r.burnedKcal||0,time:r.time||0,videoLink:r.videoLink}),this.router.navigate(["/home"]),console.log(`Dodano trening dnia ${s.toISOString()}: ${r.videoLink}`)})}}deletePlan(t){this.fitnessPlanService.deleteFitnessPlan(t.id),this.fitnessPlans=this.fitnessPlans.filter(r=>r.id!==t.id),console.log("Plan usuni\u0119ty",t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-training-plans-select"]],standalone:!0,features:[sr],decls:15,vars:1,consts:[["src","assets/foto2.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"fitness-plan-select"],[1,"plan-cards-container"],[1,"plan-card",3,"selected"],[1,"form-group"],["for","startDate"],["id","startDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"plan-card",3,"click"],[1,"plan-title"],[1,"button-group"],[1,"btn","btn-link","btn-sm",3,"routerLink"],[1,"btn","btn-link","btn-sm",3,"click"]],template:function(r,i){1&r&&(Yr(0,"img",0),L(1,"div",1)(2,"h3"),G(3,"Wybierz sw\xf3j plan fitness i rozpocznij now\u0105 podr\xf3\u017c!"),O(),L(4,"p"),G(5," Znajd\u017a idealny plan dopasowany do Twoich potrzeb. Wybierz, przejrzyj szczeg\xf3\u0142y i zdecyduj, kiedy rozpocz\u0105\u0107. Pami\u0119taj, ka\u017cdy krok to zbli\u017cenie si\u0119 do zdrowszej wersji Ciebie! "),O(),L(6,"div",2),gs(7,GPe,10,7,"div",3,So),O(),L(9,"div",4)(10,"label",5),G(11,"Wybierz dat\u0119 rozpocz\u0119cia:"),O(),L(12,"input",6),St("ngModelChange",function(o){return wt(i.startDate,o)||(i.startDate=o),o}),O()(),L(13,"button",7),Oe("click",function(){return i.startPlan()}),G(14,"Rozpocznij Plan"),O()()),2&r&&(K(7),ms(i.fitnessPlans),K(5),Dt("ngModel",i.startDate))},dependencies:[Li,Fo,Ma,ca,Ac,$M,Pm],styles:[".plan-image[_ngcontent-%COMP%]{width:50%;max-width:900px;height:auto;margin:0 auto 20px;display:block;border-radius:8px;padding:20px}.fitness-plan-select[_ngcontent-%COMP%]{padding:20px;background:var(--background-gradient);border-radius:10px;color:#333;max-width:900px;margin:0 auto;text-align:center}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px}.plan-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;margin:0 auto;max-width:780px}.plan-card[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:20px;width:250px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease}.plan-card.selected[_ngcontent-%COMP%]{background:#dcdcdc}.plan-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin-bottom:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;border-radius:5px;padding:8px 12px}.form-group[_ngcontent-%COMP%]{margin-top:20px}#startDate[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{margin-top:20px;background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#254636}"]})}}return n})();function WPe(n,e){if(1&n&&(L(0,"div"),Yr(1,"iframe",10),O()),2&n){const t=Le().$implicit,r=Le();K(),Gt("src",r.getVideoUrl(t.videoLink),Sb)}}function KPe(n,e){if(1&n){const t=gr();L(0,"div",2)(1,"div",4)(2,"h5",5),G(3),O(),L(4,"div",6)(5,"label",7),G(6,"Spalone kalorie"),O(),L(7,"input",8),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.burnedKcal,i)||(s.burnedKcal=i),st(i)}),O()(),L(8,"div",6)(9,"label",7),G(10,"Czas treningu (w minutach)"),O(),L(11,"input",8),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.time,i)||(s.time=i),st(i)}),O()(),L(12,"div",6)(13,"label",7),G(14,"Link wideo"),O(),L(15,"input",9),St("ngModelChange",function(i){const s=ct(t).$implicit;return wt(s.videoLink,i)||(s.videoLink=i),st(i)}),O()(),L(16,"div",6)(17,"label"),G(18,"Filmik z YouTube"),O(),vn(19,WPe,2,1,"div"),O()()()}if(2&n){const t=e.$implicit,r=e.$index;K(3),In("Dzie\u0144 ",r+1,""),K(2),Su("for","burnedKcal",r,""),K(2),Su("id","burnedKcal",r,""),Dt("ngModel",t.burnedKcal),K(2),Su("for","duration",r,""),K(2),Su("id","duration",r,""),Dt("ngModel",t.time),K(2),Su("for","videoLink",r,""),K(2),Su("id","videoLink",r,""),Dt("ngModel",t.videoLink),K(4),zt(t.videoLink?19:-1)}}let QPe=(()=>{class n{constructor(){this.fitnessPlanService=Q(PU),this.route=Q(dd),this.planId=null,this.plan=void 0,this.sanitizer=Q(gM)}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");console.log("Fetched Plan ID:",t),t&&this.fitnessPlanService.getFitnessPlanById(t).subscribe(r=>{r?this.plan=r:console.log("Brak planu dla ID:",t)})}savePlanEdits(){this.plan&&(this.fitnessPlanService.updateFitnessPlan(this.plan),console.log("Zmiany zapisane dla planu:",this.plan))}getVideoUrl(t){if(t){const i=`https://www.youtube.com/embed/${this.extractVideoId(t)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}return""}extractVideoId(t){const i=t.match(/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-training-plan-detail"]],standalone:!0,features:[sr],decls:8,vars:1,consts:[[1,"plan-details"],[1,"card-container"],[1,"card","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[3,"for"],["type","number",1,"form-control",3,"ngModelChange","ngModel","id"],["type","text",1,"form-control",3,"ngModelChange","ngModel","id"],["width","100%","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h4"),G(2),O(),L(3,"div",1),gs(4,KPe,20,17,"div",2,So),O(),L(6,"button",3),Oe("click",function(){return i.savePlanEdits()}),G(7," Zapisz zmiany "),O()()),2&r&&(K(2),In("Szczeg\xf3\u0142y planu: ",null==i.plan?null:i.plan.name,""),K(2),ms(null==i.plan?null:i.plan.days))},dependencies:[Li,Fo,Od,Ma,ca],styles:[".plan-details[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-radius:10px;color:#333}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}.card[_ngcontent-%COMP%]{width:30%;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;padding:20px;color:#333}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}.card-body[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}iframe[_ngcontent-%COMP%]{border-radius:10px}.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}@media (max-width: 768px){.card-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.card[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:15px}.card-title[_ngcontent-%COMP%]{font-size:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px}iframe[_ngcontent-%COMP%]{width:100%;height:auto}.btn-primary[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px}}"]})}}return n})(),YPe=(()=>{class n{constructor(){this.router=Q(Ei)}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-welcome"]],standalone:!0,features:[sr],decls:13,vars:0,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-images"],["src","assets/welcome.jpg","alt","Fitness Image 1",1,"welcome-image"],["src","assets/welcome2.jpeg","alt","Fitness Image 2",1,"welcome-image"],[1,"welcome-description"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h1",1),G(2,"Witaj w swoim kalendarzu fitness!"),O(),L(3,"p",2),G(4,"U nas mo\u017cesz \u015bledzi\u0107 swoje plany treningowe, spalone kalorie i wiele wi\u0119cej."),O(),L(5,"div",3),Yr(6,"img",4)(7,"img",5),O(),L(8,"div",6)(9,"p"),G(10,"Wybierz jeden z naszych plan\xf3w treningowych, aby rozpocz\u0105\u0107 swoj\u0105 fitnessow\u0105 podr\xf3\u017c!"),O()(),L(11,"button",7),Oe("click",function(){return i.goToLogin()}),G(12,"Zaloguj si\u0119"),O()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-image:url(/assets/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;color:#fff;text-align:center;position:relative;z-index:1;padding:20px}.welcome-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out;margin-bottom:20px}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin:20px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s 1s forwards}.welcome-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:15px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 3s 1.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease,transform .3s ease;text-transform:uppercase;letter-spacing:1px;margin-top:30px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff);transform:scale(1.05)}.welcome-images[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:30px;flex-wrap:wrap;justify-content:space-evenly}.welcome-image[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;border-radius:10px;opacity:0;animation:_ngcontent-%COMP%_fadeInImage 2s 2s forwards}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0}to{opacity:1}}.welcome-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}"]})}}return n})(),JPe=(()=>{class n{constructor(){this.client=Q(zu),this.afAuth=Q(aa)}getUser(){return new Vt(t=>{this.afAuth.onAuthStateChanged(r=>{r?this.client.collection("users").doc(r.uid).get().subscribe({next:i=>{t.next(i.exists?i.data():null)},error:i=>{t.error(i)}}):t.next(null)})})}updateAvatarInFirestore(t,r){this.client.collection("users").doc(r).update({photoURL:t}).then(()=>{console.log("Avatar updated successfully")}).catch(i=>{console.error("Error updating avatar:",i)})}updateUserData(t,r){return new Vt(i=>{this.client.collection("users").doc(t).update({displayName:r}).then(()=>{i.next()}).catch(s=>{i.error(s)})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XPe(n,e){1&n&&Yr(0,"img",6),2&n&&Gt("src",Le(2).userPhotoURL,kg)}function ZPe(n,e){1&n&&Yr(0,"img",7)}function eRe(n,e){if(1&n){const t=gr();L(0,"div",1)(1,"div",5),vn(2,XPe,1,1,"img",6)(3,ZPe,1,0,"img",7),O(),L(4,"p",1)(5,"strong"),G(6,"Email:"),O(),G(7),O(),L(8,"p",1)(9,"strong"),G(10,"nick:"),O(),G(11),O(),L(12,"input",8),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.newAvatarURL,i)||(s.newAvatarURL=i),st(i)}),O(),L(13,"button",9),Oe("click",function(){ct(t);const i=Le();return st(i.saveAvatar(i.newAvatarURL))}),G(14," Zaktualizuj Awatar "),O(),L(15,"button",9),Oe("click",function(){return ct(t),st(Le().authService.logout())}),G(16,"Wyloguj"),O()()}if(2&n){const t=Le();K(2),zt(t.userPhotoURL?2:3),K(5),In(" ",t.email,""),K(4),In(" ",t.displayName,""),K(),Dt("ngModel",t.newAvatarURL)}}function tRe(n,e){1&n&&(L(0,"p",1),G(1,"No user is logged in."),O())}let nRe=(()=>{class n{constructor(){this.userPhotoURL="",this.displayName="",this.email="",this.newAvatarURL="",this.avatarFile=null,this.authService=Q(py),this.userService=Q(JPe),this.themeService=Q(_K),this.userSignal=this.authService.getCurrentUser(),this.afAuth=Q(aa),this.authService.getCurrentUser().subscribe(t=>{t?(this.userPhotoURL=t.photoURL||"",this.displayName=t.displayName||"Nieznany u\u017cytkownik",this.email=t.email||"Brak adresu e-mail",this.loadUser()):console.log("Nie ma zalogowanego u\u017cytkownika")})}changeGradient(t){this.themeService.setGradient(t)}loadUser(){this.userService.getUser().subscribe(t=>{t&&(this.userPhotoURL=t.photoURL||"",this.displayName=t.displayName||"Nieznany u\u017cytkownik",this.email=t.email||"Brak adresu e-mail")})}onAvatarChange(t){const r=t.target;r&&r.files&&r.files.length>0&&(this.avatarFile=r.files[0])}saveAvatar(t){this.afAuth.currentUser.then(r=>{r&&r.uid&&(this.userService.updateAvatarInFirestore(t,r.uid),this.userPhotoURL=t,console.log("Awatar zapisany pomy\u015blnie!"))}).catch(r=>{console.error("B\u0142\u0105d przy zapisywaniu awatara:",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-user"]],standalone:!0,features:[sr],decls:45,vars:1,consts:[[1,"user-details"],[1,"user-info"],[1,"color-container"],[1,"color-buttons"],[3,"click"],[1,"user-avatar"],["alt","User Avatar",1,"avatar",3,"src"],["src","assets/default-avatar.png","alt","User Avatar",1,"avatar"],["type","text","placeholder","Wprowad\u017a URL awatara",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h2"),G(2,"User Details"),O(),vn(3,eRe,17,4,"div",1)(4,tRe,2,0,"p",1),O(),L(5,"h1"),G(6,"Wybierz kolor swojej aplikacji"),O(),L(7,"div",2)(8,"div",3)(9,"button",4),Oe("click",function(){return i.changeGradient("green")}),G(10,"Zielony Gradient"),O(),L(11,"button",4),Oe("click",function(){return i.changeGradient("pastel-lavender")}),G(12,"Pastel Lavender"),O(),L(13,"button",4),Oe("click",function(){return i.changeGradient("powder-blue")}),G(14,"Powder Blue"),O(),L(15,"button",4),Oe("click",function(){return i.changeGradient("cloud")}),G(16,"Cloud"),O(),L(17,"button",4),Oe("click",function(){return i.changeGradient("dusty-rose")}),G(18,"Dusty Rose"),O(),L(19,"button",4),Oe("click",function(){return i.changeGradient("powder-mint")}),G(20,"Powder Mint"),O(),L(21,"button",4),Oe("click",function(){return i.changeGradient("navy-ivory")}),G(22,"Navy Ivory"),O(),L(23,"button",4),Oe("click",function(){return i.changeGradient("cashmere-graphite")}),G(24," Cashmere Graphite "),O(),L(25,"button",4),Oe("click",function(){return i.changeGradient("pearl-ink")}),G(26,"Pearl Ink"),O(),L(27,"button",4),Oe("click",function(){return i.changeGradient("beige-espresso")}),G(28,"Beige Espresso"),O(),L(29,"button",4),Oe("click",function(){return i.changeGradient("graphite-rose")}),G(30,"Graphite Rose"),O(),L(31,"button",4),Oe("click",function(){return i.changeGradient("turquoise-alabaster")}),G(32," Turquoise Alabaster "),O(),L(33,"button",4),Oe("click",function(){return i.changeGradient("burgundy-cream")}),G(34,"Burgundy Cream"),O(),L(35,"button",4),Oe("click",function(){return i.changeGradient("platinum-coal")}),G(36,"Platinum Coal"),O(),L(37,"button",4),Oe("click",function(){return i.changeGradient("pearl-pink-anthracite")}),G(38," Pearl Pink Anthracite "),O(),L(39,"button",4),Oe("click",function(){return i.changeGradient("opal-blue")}),G(40,"Opal Blue"),O(),L(41,"button",4),Oe("click",function(){return i.changeGradient("mustard-caramel")}),G(42,"Mustard Caramel"),O(),L(43,"button",4),Oe("click",function(){return i.changeGradient("emerald-gold")}),G(44,"Emerald Gold"),O()()()),2&r&&(K(3),zt(i.displayName&&i.email?3:4))},dependencies:[Ac,Li,Fo,Ma,ca],styles:[".user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px auto;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a;max-width:500px;text-align:center}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#254636;margin-bottom:15px}.user-info[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;color:#333}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#254636}.user-avatar[_ngcontent-%COMP%]{margin-bottom:15px}.user-avatar[_ngcontent-%COMP%]   img.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;border:3px solid #254636}button.btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:20px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.color-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:30px}.color-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;width:100%;max-width:1000px;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0e0e0);border:1px solid #ccc;border-radius:8px;padding:12px 20px;font-size:14px;color:#333;cursor:pointer;transition:all .3s ease;width:100%;max-width:160px}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f0f0f0,#d0d0d0);border-color:#999;transform:translateY(-2px)}.color-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);background:linear-gradient(135deg,#e0e0e0,silver)}input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 15px;font-size:16px;border:2px solid #ccc;border-radius:8px;margin-top:10px;transition:border-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus{border-color:#254636;box-shadow:0 0 5px #2546364d}input[type=text][_ngcontent-%COMP%]::placeholder{color:#aaa;font-style:italic}h1[_ngcontent-%COMP%]{text-align:center;font-size:28px;color:#254636;margin:20px 0}"]})}}return n})(),rRe=(()=>{class n{constructor(){this.calorieService=Q(VZ),this.tdeeCalculated=new jt,this.calorieData={gender:"male",age:25,height:170,weight:70,activityLevel:1.2,tdee:0}}ngOnInit(){this.loadTdeeFromFirebase()}calculateCalories(){const{gender:t,age:r,height:i,weight:s,activityLevel:o}=this.calorieData;this.calorieData.tdee=("male"===t?10*s+6.25*i-5*r+5:10*s+6.25*i-5*r-161)*o,console.log("TDEE:",this.calorieData.tdee),this.tdeeCalculated.emit(this.calorieData.tdee),this.saveTdeeToFirebase()}saveTdeeToFirebase(){this.calorieService.saveTdee(this.calorieData).catch(t=>{console.error("Error saving calorie calculation:",t)})}loadTdeeFromFirebase(){this.calorieService.loadTdee().subscribe(t=>{t?(this.calorieData.tdee=t.tdee,console.log("Pobrano TDEE z Firebase:",this.calorieData.tdee)):console.log("Brak danych o TDEE w Firebase")},t=>{console.error("B\u0142\u0105d \u0142adowania TDEE:",t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-calorie-calculator"]],outputs:{tdeeCalculated:"tdeeCalculated"},standalone:!0,features:[sr],decls:50,vars:9,consts:[[1,"calorie-form-container"],[1,"calorie-description"],["src","assets/foto 4.jpg","alt","Zrzut ekranu kalkulatora",1,"calorie-image"],[3,"ngSubmit"],[1,"form-group"],["for","gender"],["id","gender","name","gender",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["for","age"],["type","number","id","age","name","age","required","",3,"ngModelChange","ngModel"],["for","height"],["type","number","id","height","name","height","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["for","activity"],["id","activity","name","activity",3,"ngModelChange","ngModel"],["value","1.2"],["value","1.375"],["value","1.55"],["value","1.725"],["value","1.9"],["type","submit"],[1,"calorie-image-container"],["src","assets/foto5.jpg","alt","Zdj\u0119cie zwi\u0105zane z aktywno\u015bci\u0105 fizyczn\u0105",1,"calorie-image"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"h3"),G(2,"Kalkulator zapotrzebowania kalorycznego"),O(),L(3,"div",1),Yr(4,"img",2),L(5,"p"),G(6," Nasz kalkulator zapotrzebowania kalorycznego pomo\u017ce Ci okre\u015bli\u0107, ile kalorii powiniene\u015b spo\u017cywa\u0107 codziennie, aby utrzyma\u0107 swoj\u0105 wag\u0119, zbudowa\u0107 mas\u0119 mi\u0119\u015bniow\u0105 lub schudn\u0105\u0107. Wprowad\u017a swoje dane, takie jak p\u0142e\u0107, wiek, wzrost, waga oraz poziom aktywno\u015bci fizycznej, aby uzyska\u0107 dok\u0142adne obliczenia. Kalkulator obliczy Twoje dzienne zapotrzebowanie kaloryczne (TDEE) na podstawie wzoru uwzgl\u0119dniaj\u0105cego wszystkie te czynniki. "),O()(),L(7,"form",3),Oe("ngSubmit",function(){return i.calculateCalories()}),L(8,"div",4)(9,"label",5),G(10,"P\u0142e\u0107:"),O(),L(11,"select",6),St("ngModelChange",function(o){return wt(i.calorieData.gender,o)||(i.calorieData.gender=o),o}),L(12,"option",7),G(13,"M\u0119\u017cczyzna"),O(),L(14,"option",8),G(15,"Kobieta"),O()()(),L(16,"div",4)(17,"label",9),G(18,"Wiek:"),O(),L(19,"input",10),St("ngModelChange",function(o){return wt(i.calorieData.age,o)||(i.calorieData.age=o),o}),O()(),L(20,"div",4)(21,"label",11),G(22,"Wzrost (cm):"),O(),L(23,"input",12),St("ngModelChange",function(o){return wt(i.calorieData.height,o)||(i.calorieData.height=o),o}),O()(),L(24,"div",4)(25,"label",13),G(26,"Waga (kg):"),O(),L(27,"input",14),St("ngModelChange",function(o){return wt(i.calorieData.weight,o)||(i.calorieData.weight=o),o}),O()(),L(28,"div",4)(29,"label",15),G(30,"Poziom aktywno\u015bci:"),O(),L(31,"select",16),St("ngModelChange",function(o){return wt(i.calorieData.activityLevel,o)||(i.calorieData.activityLevel=o),o}),L(32,"option",17),G(33,"Siedz\u0105cy tryb \u017cycia"),O(),L(34,"option",18),G(35,"Lekka aktywno\u015b\u0107"),O(),L(36,"option",19),G(37,"\u015arednia aktywno\u015b\u0107"),O(),L(38,"option",20),G(39,"Du\u017ca aktywno\u015b\u0107"),O(),L(40,"option",21),G(41,"Bardzo du\u017ca aktywno\u015b\u0107"),O()()(),L(42,"button",22),G(43,"Oblicz"),O()(),L(44,"div")(45,"h4"),G(46),Po(47,"number"),O()(),L(48,"div",23),Yr(49,"img",24),O()()),2&r&&(K(11),Dt("ngModel",i.calorieData.gender),K(8),Dt("ngModel",i.calorieData.age),K(4),Dt("ngModel",i.calorieData.height),K(4),Dt("ngModel",i.calorieData.weight),K(4),Dt("ngModel",i.calorieData.activityLevel),K(15),In(" Twoje dzienne zapotrzebowanie kaloryczne (TDEE): ",id(47,6,i.calorieData.tdee,"1.0-0")," kcal "))},dependencies:[Li,E_,aK,cK,Fo,Od,UD,Ma,__,Vd,ca,Nd,Ac,Q1],styles:[".calorie-form-container[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;background:var(--background-gradient);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;text-align:center;margin-bottom:20px}.calorie-form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;gap:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:4px;background-color:#f9f9f9}button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#2f5957}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333;text-align:center;margin-top:20px}@media screen and (max-width: 768px){.calorie-form-container[_ngcontent-%COMP%]{padding:15px;width:90%}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:14px;padding:8px}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}}@media screen and (max-width: 480px){.calorie-form-container[_ngcontent-%COMP%]{padding:10px;width:95%}.calorie-form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:12px;padding:6px}.calorie-form-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px}}.calorie-description[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.calorie-description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:10px}.calorie-image-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.calorie-image[_ngcontent-%COMP%]{width:100%;max-width:500px;border-radius:10px}"]})}}return n})(),iRe=(()=>{class n{constructor(t,r){this.firestore=t,this.afAuth=r}getThreads(){return this.firestore.collection("threads").valueChanges({idField:"id"})}createThread(t){return this.afAuth.currentUser.then(r=>{if(r){const i=this.firestore.createId();return this.firestore.collection("threads").doc(i).set({...t,authorId:r.uid,createdAt:new Date})}return Promise.reject("User not authenticated")})}addComment(t,r){return this.afAuth.currentUser.then(i=>{if(i){const s=this.firestore.createId();return this.firestore.collection("threads").doc(t).collection("comments").doc(s).set({...r,authorId:i.uid,createdAt:new Date})}return Promise.reject("User not authenticated")})}getComments(t){return this.firestore.collection("threads").doc(t).collection("comments").valueChanges({idField:"id"}).pipe(qe(r=>r.map(i=>({id:i.id,content:i.content,authorId:i.authorId,createdAt:i.createdAt?.toDate()||new Date,threadId:t}))))}getUserEmail(t){return this.firestore.collection("users").doc(t).valueChanges()}static{this.\u0275fac=function(r){return new(r||n)(Se(zu),Se(aa))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const LZ=(n,e)=>e.id;function sRe(n,e){if(1&n&&(L(0,"div",16)(1,"small"),G(2),Po(3,"date"),L(4,"span"),G(5),O()(),L(6,"p"),G(7),O()()),2&n){const t=e.$implicit;K(2),In(" ",id(3,3,t.createdAt,"short")," - Autor: "),K(3),pn(t.authorEmail||"Nieznany autor"),K(2),pn(t.content)}}function oRe(n,e){1&n&&gs(0,sRe,8,6,"div",16,LZ),2&n&&ms(Le(2).$implicit.comments)}function aRe(n,e){1&n&&(L(0,"p"),G(1,"Brak komentarzy"),O())}function uRe(n,e){if(1&n){const t=gr();L(0,"div",12)(1,"h4"),G(2,"Komentarze:"),O(),vn(3,oRe,2,0)(4,aRe,2,0,"p"),L(5,"div",13)(6,"textarea",14),St("ngModelChange",function(i){ct(t);const s=Le().$implicit;return wt(s.newComment,i)||(s.newComment=i),st(i)}),G(7,"                "),O(),L(8,"button",15),Oe("click",function(){ct(t);const i=Le().$implicit;return st(Le().addComment(i.id))}),G(9," Dodaj komentarz "),O()()()}if(2&n){const t=Le().$implicit;K(3),zt(t.comments&&t.comments.length>0?3:4),K(3),Dt("ngModel",t.newComment)}}function cRe(n,e){if(1&n){const t=gr();L(0,"div",10)(1,"h3"),G(2),O(),L(3,"p"),G(4),O(),L(5,"button",11),Oe("click",function(){const i=ct(t).$implicit;return st(Le().toggleComments(i.id))}),G(6),O(),vn(7,uRe,10,2,"div",12),O()}if(2&n){const t=e.$implicit;K(2),pn(t.title),K(2),pn(t.content),K(2),In(" ",t.showComments?"Ukryj komentarze":"Poka\u017c komentarze"," "),K(),zt(t.showComments?7:-1)}}let lRe=(()=>{class n{constructor(t){this.forumService=t,this.threads=[],this.model={id:"",title:"",content:"",authorId:"",createdAt:new Date},this.authService=Q(py),this.authorCache=new Map}ngOnInit(){this.loadThreads()}toggleComments(t){const r=this.threads.find(i=>i.id===t);r&&(r.showComments=!r.showComments)}loadThreads(){this.forumService.getThreads().subscribe(t=>{this.threads=t,this.threads.forEach(r=>{this.forumService.getComments(r.id).subscribe(i=>{r.comments=i,r.comments.forEach(s=>{this.loadUserEmail(s)})})})})}loadUserEmail(t){this.authorCache.has(t.authorId)?t.authorEmail=this.authorCache.get(t.authorId):this.forumService.getUserEmail(t.authorId).subscribe(r=>{r?(t.authorEmail=r.email,this.authorCache.set(t.authorId,r.email)):t.authorEmail="Nieznany autor"})}addThread(){this.model.title&&this.model.content&&this.forumService.createThread(this.model).then(()=>{this.model={id:"",title:"",content:"",authorId:"",createdAt:new Date},this.loadThreads()})}showCommentForm(t){const r=this.threads.find(i=>i.id===t);r&&(r.showCommentForm=!r.showCommentForm)}addComment(t){const r=this.threads.find(i=>i.id===t);if(r){const i=r.newComment||"";i&&this.authService.getCurrentUser().subscribe(s=>{s&&this.forumService.addComment(t,{id:"",content:i,authorId:s.uid,createdAt:new Date,threadId:t}).then(()=>{r.newComment="",r.showCommentForm=!1,this.loadThreads()}).catch(a=>{console.error("Error adding comment:",a)})})}}static{this.\u0275fac=function(r){return new(r||n)(De(iRe))}}static{this.\u0275cmp=$n({type:n,selectors:[["app-forum"]],standalone:!0,features:[sr],decls:22,vars:2,consts:[[1,"wrapper"],[1,"forum-header"],[1,"forum-container"],[3,"ngSubmit"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","content"],["id","content","name","content","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"threads-list"],[1,"thread-card"],[1,"btn","btn-secondary","add-comment-btn",3,"click"],[1,"comments"],[1,"comment-form"],["placeholder","Wpisz komentarz",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","add-comment-btn",3,"click"],[1,"comment"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"header",1)(2,"h1"),G(3,"Forum Dyskusyjne"),O()(),L(4,"div",2)(5,"h2"),G(6,"Dodaj nowy w\u0105tek"),O(),L(7,"form",3),Oe("ngSubmit",function(){return i.addThread()}),L(8,"label",4),G(9,"Tytu\u0142"),O(),L(10,"input",5),St("ngModelChange",function(o){return wt(i.model.title,o)||(i.model.title=o),o}),O(),L(11,"label",6),G(12,"Tre\u015b\u0107"),O(),L(13,"textarea",7),St("ngModelChange",function(o){return wt(i.model.content,o)||(i.model.content=o),o}),G(14,"      "),O(),L(15,"button",8),G(16,"Dodaj w\u0105tek"),O()(),L(17,"div",9)(18,"h2"),G(19,"W\u0105tki"),O(),gs(20,cRe,8,4,"div",10,LZ),O()()()),2&r&&(K(10),Dt("ngModel",i.model.title),K(3),Dt("ngModel",i.model.content),K(7),ms(i.threads))},dependencies:[Li,E_,Fo,Ma,__,Vd,ca,Nd,Ac,fm],styles:[".forum-container{width:100%;max-width:1200px;margin:0 auto;padding:40px;background:var(--background-gradient);border-radius:10px;box-shadow:0 4px 8px #0000001a}.forum-header{text-align:center;margin-bottom:30px}.forum-header h1{font-size:32px;color:#fff;font-weight:700;letter-spacing:1px}form{display:flex;flex-direction:column;gap:15px;margin-bottom:30px}form label{font-size:16px;color:#333;font-weight:500}.form-control{padding:10px;font-size:14px;border-radius:5px;border:1px solid #ccc;background-color:#f9f9f9;width:100%;transition:border-color .3s ease}.form-control:focus{border-color:var(--button-background);outline:none}button[type=submit]{background-color:var(--button-background, #254636);color:#fff;padding:10px 20px;font-size:16px;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s ease,transform .3s ease}button[type=submit]:hover{background-color:darken(var(--button-background, #254636),10%);transform:scale(1.05)}.threads-list{margin-top:20px}.threads-list h2{font-size:24px;color:#333;text-align:center;font-weight:500}.thread-card{background-color:#ffffffe6;padding:15px;border-radius:8px;box-shadow:0 2px 6px #0000001a;margin-bottom:20px;transition:transform .3s ease,box-shadow .3s ease}.thread-card:hover{transform:translateY(-5px);box-shadow:0 6px 12px #0003}.thread-card h3{font-size:20px;font-weight:700;color:#333;margin-bottom:10px}.thread-card p{font-size:14px;color:#555;margin-bottom:15px}.add-comment-btn{background-color:var(--button-background, #254636);color:#fff;padding:8px 15px;font-size:14px;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.add-comment-btn:hover{background-color:darken(var(--button-background, #254636),10%);transform:scale(1.05)}.comment-form{display:flex;flex-direction:column;gap:10px;margin-top:15px}.comment-input{padding:10px;font-size:14px;border-radius:5px;border:1px solid #ccc;background-color:#f9f9f9;width:100%;transition:border-color .3s ease}.comment-input:focus{border-color:var(--button-background);outline:none}.comment-submit{background-color:var(--button-background, #254636);color:#fff;padding:8px 15px;font-size:14px;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.comment-submit:hover{background-color:darken(var(--button-background, #254636),10%);transform:scale(1.05)}.comments h4{font-size:18px;color:#333;margin-bottom:10px}.comment{background-color:#fffffff2;padding:10px;margin-bottom:10px;border-radius:5px;box-shadow:0 1px 4px #0000001a}.comment small{display:block;color:#777;font-size:12px;margin-bottom:5px}.comment p{color:#333;font-size:14px}.comment-section p{font-size:14px;color:#333;font-style:italic;text-align:center}@media (max-width: 768px){.forum-container{padding:20px}.forum-header h1{font-size:28px}.thread-card{padding:10px}.form-control,.comment-input,button[type=submit],.comment-submit,.add-comment-btn{font-size:14px}}\n"],encapsulation:3})}}return n})(),dRe=(()=>{class n{constructor(){this.http=Q(iM),this.apiUrl="https://world.openfoodfacts.org/api/v0/product",this.apiBaseUrl="https://world.openfoodfacts.org/api/v0/product"}getProductByBarcode(t){return this.http.get(`${this.apiUrl}/${t}.json`)}searchProducts(t){return this.http.get(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${t}&search_simple=1&json=1`)}getProductNutrition(t){return this.http.get(`${this.apiBaseUrl}/${t}.json`)}searchProductsByName(t){const r=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(t)}&search_simple=1&action=process&json=1`;return console.log("Wysy\u0142anie \u017c\u0105dania do URL:",r),this.http.get(r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hRe(n,e){if(1&n){const t=gr();L(0,"li",9),Oe("click",function(){const i=ct(t).$implicit;return st(Le().selectProduct(i))}),G(1),O()}if(2&n){const t=e.$implicit,r=Le();$h("selected",t.id===(null==r.selectedProduct?null:r.selectedProduct.id)),K(),hA(" ",t.product_name||"Brak nazwy"," - ",t.brands||"Brak marki"," ")}}function fRe(n,e){if(1&n&&Yr(0,"img",10),2&n){const t=Le(2);Su("alt","Zdj\u0119cie produktu ",t.selectedProduct.product_name,""),Gt("src",t.selectedProduct.image_url,kg)}}function pRe(n,e){if(1&n){const t=gr();L(0,"div",7)(1,"h2"),G(2),O(),vn(3,fRe,1,3,"img",10),L(4,"h4"),G(5,"Warto\u015bci od\u017cywcze:"),O(),L(6,"p")(7,"strong"),G(8,"Kalorie:"),O(),G(9),O(),L(10,"div",11)(11,"p")(12,"strong"),G(13,"T\u0142uszcz:"),O(),G(14),O(),L(15,"p")(16,"strong"),G(17,"Kwasy t\u0142uszczowe nasycone:"),O(),G(18),O(),L(19,"p")(20,"strong"),G(21,"W\u0119glowodany:"),O(),G(22),O(),L(23,"p")(24,"strong"),G(25,"Cukry:"),O(),G(26),O(),L(27,"p")(28,"strong"),G(29,"B\u0142onnik:"),O(),G(30),O(),L(31,"p")(32,"strong"),G(33,"Bia\u0142ko:"),O(),G(34),O(),L(35,"p")(36,"strong"),G(37,"S\xf3l:"),O(),G(38),O()(),L(39,"h4"),G(40,"Obliczenia:"),O(),L(41,"div",12)(42,"label",13),G(43,"Podaj wag\u0119 produktu (g):"),O(),L(44,"input",14),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.mealWeight,i)||(s.mealWeight=i),st(i)}),Oe("input",function(){return ct(t),st(Le().calculateCalories())}),O()(),L(45,"p")(46,"strong"),G(47,"Przeliczone kalorie:"),O(),G(48),O(),L(49,"div",12)(50,"label",15),G(51,"Wybierz dat\u0119 posi\u0142ku:"),O(),L(52,"input",16),St("ngModelChange",function(i){ct(t);const s=Le();return wt(s.selectedMealDate,i)||(s.selectedMealDate=i),st(i)}),O()(),L(53,"div",17)(54,"button",3),Oe("click",function(){return ct(t),st(Le().addMealToCalendar())}),G(55,"Dodaj"),O(),L(56,"button",18),Oe("click",function(){return ct(t),st(Le().cancelAddMeal())}),G(57,"Anuluj"),O()()()}if(2&n){const t=Le();K(2),pn(t.selectedProduct.product_name),K(),zt(t.selectedProduct.image_url?3:-1),K(6),In(" ",t.selectedProduct.nutriments["energy-kcal"]||"Brak danych"," kcal"),K(5),In(" ",t.selectedProduct.nutriments.fat||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments["saturated-fat"]||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments.carbohydrates||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments.sugars||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments.fiber||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments.proteins||"Brak danych"," g"),K(4),In(" ",t.selectedProduct.nutriments.salt||"Brak danych"," g"),K(6),Dt("ngModel",t.mealWeight),K(4),In(" ",t.calculatedCalories," kcal"),K(4),Dt("ngModel",t.selectedMealDate)}}function gRe(n,e){if(1&n&&(L(0,"p",8),G(1),O()),2&n){const t=Le();K(),pn(t.error)}}const mRe={providers:[function wge(n,...e){return va([{provide:Sm,multi:!0,useValue:n},[],{provide:dd,useFactory:$9,deps:[Ei]},{provide:lm,multi:!0,useFactory:q9},e.map(t=>t.\u0275providers)])}([{path:"",component:YPe},{path:"home",component:i0e,canActivate:[Na]},{path:"login",component:IPe},{path:"register",component:EPe},{path:"day-details/:day",component:VPe,canActivate:[Na]},{path:"summary",component:jPe,canActivate:[Na]},{path:"trainig-plans",component:$Pe,canActivate:[Na]},{path:"select-plan",component:HPe,canActivate:[Na]},{path:"plan/:id",component:QPe,canActivate:[Na]},{path:"user",component:nRe,canActivate:[Na]},{path:"weight",component:FZ,canActivate:[Na]},{path:"calories-calculator",component:rRe,canActivate:[Na]},{path:"forum",component:lRe,canActivate:[Na]},{path:"nutriments",component:(()=>{class n{constructor(){this.searchQuery="",this.products=[],this.error="",this.nutriments=0,this.router=Q(Ei),this.openFoodFactsService=Q(dRe),this.trainingAndMealService=Q(Df),this.selectedProduct=null,this.showDialog=!1,this.calories=0,this.selectedMealDate="",this.mealWeight=100,this.calculatedCalories=0}searchProducts(){if(!this.searchQuery.trim())return this.error="Wprowad\u017a fraz\u0119 do wyszukiwania.",void(this.products=[]);this.openFoodFactsService.searchProductsByName(this.searchQuery).subscribe({next:t=>{console.log("Odpowied\u017a z API:",t),t.products&&t.products.length>0?(this.products=t.products,this.error=""):(this.products=[],this.error="Nie znaleziono produkt\xf3w dla podanej frazy.")},error:t=>{console.error("B\u0142\u0105d podczas \u017c\u0105dania:",t),this.products=[],this.error="Wyst\u0105pi\u0142 b\u0142\u0105d podczas pobierania danych."}})}calculateCalories(){this.selectedProduct&&this.selectedProduct.nutriments&&(this.calculatedCalories=this.mealWeight>0?(this.selectedProduct.nutriments["energy-kcal"]||0)/100*this.mealWeight:0,console.log("Obliczone kalorie:",this.calculatedCalories))}selectProduct(t){this.selectedProduct=t,this.mealWeight=100,this.calculateCalories(),this.showDialog=!0}addMealToCalendar(){if(this.selectedProduct){console.log("Dodawanie posi\u0142ku:",this.selectedProduct);const t=this.calculatedCalories,r=this.selectedMealDate?new Date(this.selectedMealDate):new Date,i={id:this.trainingAndMealService.client.createId(),name:this.selectedProduct.product_name||"Nieznany produkt",calories:t,weight:`${this.mealWeight} g`,date:r,day:0,uid:"currentUserUid",imageUrl:this.selectedProduct.image_url||""};console.log("Dodany posi\u0142ek:",i),this.trainingAndMealService.addMeal(i),this.showDialog=!1}this.router.navigate(["/home"])}cancelAddMeal(){this.showDialog=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-product-nutriments"]],standalone:!0,features:[sr],decls:16,vars:3,consts:[[1,"search-container"],[1,"search-bar"],["placeholder","Wprowad\u017a nazw\u0119 produktu",1,"search-input",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"results-container"],[1,"product-list"],[1,"product-item",3,"selected"],[1,"product-details"],[1,"error-message"],[1,"product-item",3,"click"],[1,"product-image",3,"src","alt"],[1,"nutrients"],[1,"form-group"],["for","mealWeight"],["type","number","id","mealWeight","min","1",1,"input-field",3,"ngModelChange","input","ngModel"],["for","mealDate"],["type","date","id","mealDate",1,"input-field",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"btn-secondary",3,"click"]],template:function(r,i){1&r&&(L(0,"div",0)(1,"div",1)(2,"h3"),G(3,"Wyszukaj produkt i sprawd\u017a jego warto\u015bci od\u017cywcze"),O(),L(4,"input",2),St("ngModelChange",function(o){return wt(i.searchQuery,o)||(i.searchQuery=o),o}),O(),L(5,"button",3),Oe("click",function(){return i.searchProducts()}),G(6,"Szukaj"),O()(),Yr(7,"hr"),L(8,"div",4)(9,"h4"),G(10,"Lista produkt\xf3w:"),O(),L(11,"ul",5),gs(12,hRe,2,4,"li",6,So),O(),vn(14,pRe,58,13,"div",7),O(),vn(15,gRe,2,1,"p",8),O()),2&r&&(K(4),Dt("ngModel",i.searchQuery),K(8),ms(i.products),K(2),zt(i.selectedProduct?14:-1),K(),zt(i.error?15:-1))},dependencies:[Li,Fo,Od,Ma,BO,ca],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#f4f4f4;margin:0;padding:0;color:#333}.layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:var(--background-gradient);padding:20px;border-radius:10px;width:80%;justify-content:center;margin:0 auto}.search-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:20px}.search-bar[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;background-color:#fff}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.results-container[_ngcontent-%COMP%]{display:flex;gap:20px}.product-list[_ngcontent-%COMP%]{flex:1;max-height:400px;overflow-y:auto;list-style:none;padding:0;margin:0;border:1px solid #ccc;border-radius:5px;background:#fff}.product-item[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #eee;cursor:pointer;transition:background-color .3s ease}.product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-item[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.product-details[_ngcontent-%COMP%]{flex:1;padding:20px;background:#fff;border:1px solid #ccc;border-radius:5px}.product-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}.product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-bottom:5px}.error-message[_ngcontent-%COMP%]{color:red;font-size:16px;text-align:center}.dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;box-shadow:0 4px 8px #0000001a;z-index:1000}.product-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}.product-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;margin:10px 0;width:100%;border:1px solid #ccc;border-radius:5px}.product-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff;border:none;padding:10px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.product-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--button-background, #254636)}.product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}@media screen and (max-width: 768px){.layout-container[_ngcontent-%COMP%]{flex-direction:column;width:100%}.product-list[_ngcontent-%COMP%]{max-height:300px;margin-bottom:20px}.product-details[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}.product-item[_ngcontent-%COMP%]{font-size:14px;padding:12px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;padding:8px}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;padding:8px 16px}.product-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media screen and (max-width: 480px){.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px;font-size:12px}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.product-item[_ngcontent-%COMP%]{font-size:12px;padding:8px}.product-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.product-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.product-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px;font-size:12px}.product-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.error-message[_ngcontent-%COMP%]{font-size:14px}}"]})}}return n})(),canActivate:[Na]}]),function rfe(...n){const e=[],t=new Set,r=t.has(Jh.HttpTransferCacheOptions);for(const{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return va([[],wce(),t.has(Jh.NoHttpTransferCache)||r?[]:Che({}),e])}(),function yhe(...n){const e=[iM,_q,gq,{provide:KA,useExisting:gq},{provide:QA,useFactory:()=>Q(sM,{optional:!0})??Q(_q)},{provide:VI,useValue:_he,multi:!0},{provide:aM,useValue:!0},{provide:Iq,useClass:mhe}];for(const t of n)e.push(...t.\u0275providers);return va(e)}(),bT([LIe,ume,tme.initializeApp(NZ_firebaseConfig)]),fm]},_Re=()=>["/summary"],yRe=()=>["/home"],vRe=()=>["/select-plan"],IRe=()=>["/trainig-plans"],ERe=()=>["/calories-calculator"],wRe=()=>["/forum"],TRe=()=>["/nutriments"];function bRe(n,e){1&n&&(L(0,"div",1)(1,"button",4),G(2," Osi\u0105gni\u0119cia "),O(),L(3,"button",4),G(4,"Kalnedarz"),O(),L(5,"button",4),G(6," Fitness Plany "),O(),L(7,"button",4),G(8," Stw\xf3rz Fitness Plan "),O(),L(9,"button",4),G(10," Kalkulator zapotrzebowania kalorycznego "),O(),L(11,"button",4),G(12,"Forum"),O(),L(13,"button",4),G(14,"Warto\u015bci od\u017cywcze"),O()()),2&n&&(K(),Gt("routerLink",rd(7,_Re)),K(2),Gt("routerLink",rd(8,yRe)),K(2),Gt("routerLink",rd(9,vRe)),K(2),Gt("routerLink",rd(10,IRe)),K(2),Gt("routerLink",rd(11,ERe)),K(2),Gt("routerLink",rd(12,wRe)),K(2),Gt("routerLink",rd(13,TRe)))}function ARe(n,e){if(1&n){const t=gr();L(0,"div",2)(1,"button",5),Oe("click",function(){return ct(t),st(Le().navigateToLogin())}),G(2," Zaloguj si\u0119 "),O(),L(3,"button",5),Oe("click",function(){return ct(t),st(Le().navigateToRegister())}),G(4," Zarejestruj si\u0119 "),O()()}}function CRe(n,e){if(1&n){const t=gr();L(0,"div",3)(1,"p"),G(2),O(),L(3,"button",6),G(4,"Moje konto"),O(),L(5,"button",7),Oe("click",function(){return ct(t),st(Le().logout())}),G(6,"Wyloguj"),O()()}2&n&&(K(2),In("Witaj, ",e.email,""),K(),Gt("routerLink","/user"))}let DRe=(()=>{class n{constructor(){this.authService=Q(py),this.router=Q(Ei),this.formChange=new jt,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(t){this.formChange.emit(t)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[sr],decls:7,vars:9,consts:[[1,"navbar"],[1,"nav-links"],[1,"auth-buttons"],[1,"user-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){if(1&r&&(L(0,"div",0),vn(1,bRe,15,14,"div",1),Po(2,"async"),vn(3,ARe,5,0,"div",2),Po(4,"async"),vn(5,CRe,7,2,"div",3),Po(6,"async"),O()),2&r){let s,o;K(),zt((s=mA(2,3,i.user$))?1:-1,s),K(2),zt(mA(4,5,i.user$)?-1:3),K(2),zt((o=mA(6,7,i.user$))?5:-1,o)}},dependencies:[Ac,N$,$M,Pm],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:var(--background-gradient);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:var(--button-background, #254636);color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return n})(),SRe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-footer"]],standalone:!0,features:[sr],decls:11,vars:0,consts:[[1,"app-footer"],[1,"footer-content"],[1,"footer-links"],["href","#"]],template:function(r,i){1&r&&(L(0,"footer",0)(1,"div",1)(2,"p"),G(3,"\xa9 2025 Fitness Planer. Wszelkie prawa zastrze\u017cone."),O(),L(4,"div",2)(5,"a",3),G(6,"Regulamin"),O(),L(7,"a",3),G(8,"Polityka prywatno\u015bci"),O(),L(9,"a",3),G(10,"Pomoc"),O()()()())},styles:["body[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;margin:0}.forum-container[_ngcontent-%COMP%]{flex:1;width:100%;max-width:1200px;margin:0 auto;padding:40px;background:var(--background-gradient);border-radius:10px;box-shadow:0 4px 8px #0000001a}.app-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;background:var(--background-gradient);color:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;text-align:center;width:100%}.app-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:1200px;width:100%}.app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px}.app-footer[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px}.app-footer[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:14px;text-decoration:none;transition:color .3s ease}.app-footer[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e0f7fa}@media (max-width: 768px){.app-footer[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:10px}}"]})}}return n})(),PRe=(()=>{class n{constructor(){this.currentForm="login"}showForm(t){this.currentForm=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$n({type:n,selectors:[["app-root"]],standalone:!0,features:[sr],decls:4,vars:0,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){1&r&&(L(0,"app-navbar",0),Oe("formChange",function(o){return i.showForm(o)}),O(),L(1,"div",1),Yr(2,"router-outlet"),O(),Yr(3,"app-footer"))},dependencies:[MM,Ac,DRe,SRe],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}app-footer[_ngcontent-%COMP%]{background-color:#f1f1f1;position:fixed;bottom:0;width:100%;height:70px}"]})}}return n})();zc("firebase","11.1.0","app"),MK(NZ_firebaseConfig),function Ghe(n,e){return rce({rootComponent:n,...Lq(e)})}(PRe,mRe).catch(n=>console.error(n))},574:(qo,si,yt)=>{yt.d(si,{A:()=>kr});var $=yt(401),We=yt(779),$e=yt(631),le=yt(398);class _n{constructor(vt,gt){this._delegate=vt,this.firebase=gt,(0,$e._addComponent)(vt,new We.uA("app-compat",()=>this,"PUBLIC")),this.container=vt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this._delegate.automaticDataCollectionEnabled=vt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(vt=>{this._delegate.checkDestroyed(),vt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$e.deleteApp)(this._delegate)))}_getService(vt,gt=$e._DEFAULT_ENTRY_NAME){var lr;this._delegate.checkDestroyed();const Ur=this._delegate.container.getProvider(vt);return!Ur.isInitialized()&&"EXPLICIT"===(null===(lr=Ur.getComponent())||void 0===lr?void 0:lr.instantiationMode)&&Ur.initialize(),Ur.getImmediate({identifier:gt})}_removeServiceInstance(vt,gt=$e._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(vt).clearInstance(gt)}_addComponent(vt){(0,$e._addComponent)(this._delegate,vt)}_addOrOverwriteComponent(vt){(0,$e._addOrOverwriteComponent)(this._delegate,vt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Wn=new $.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function $t(){const on=function tr(on){const vt={},gt={__esModule:!0,initializeApp:function Br(at,Re={}){const Be=$e.initializeApp(at,Re);if((0,$.gR)(vt,Be.name))return vt[Be.name];const oe=new on(Be,gt);return vt[Be.name]=oe,oe},app:Ur,registerVersion:$e.registerVersion,setLogLevel:$e.setLogLevel,onLog:$e.onLog,apps:null,SDK_VERSION:$e.SDK_VERSION,INTERNAL:{registerComponent:function Jt(at){const Re=at.name,Be=Re.replace("-compat","");if($e._registerComponent(at)&&"PUBLIC"===at.type){const oe=(Rt=Ur())=>{if("function"!=typeof Rt[Be])throw Wn.create("invalid-app-argument",{appName:Re});return Rt[Be]()};void 0!==at.serviceProps&&(0,$.zw)(oe,at.serviceProps),gt[Be]=oe,on.prototype[Be]=function(...Rt){return this._getService.bind(this,Re).apply(this,at.multipleInstances?Rt:[])}}return"PUBLIC"===at.type?gt[Be]:null},removeApp:function lr(at){delete vt[at]},useAsService:function jr(at,Re){return"serverAuth"===Re?null:Re},modularAPIs:$e}};function Ur(at){if(!(0,$.gR)(vt,at=at||$e._DEFAULT_ENTRY_NAME))throw Wn.create("no-app",{appName:at});return vt[at]}return gt.default=gt,Object.defineProperty(gt,"apps",{get:function hn(){return Object.keys(vt).map(at=>vt[at])}}),Ur.App=on,gt}(_n);return on.INTERNAL=Object.assign(Object.assign({},on.INTERNAL),{createFirebaseNamespace:$t,extendNamespace:function vt(gt){(0,$.zw)(on,gt)},createSubscribe:$.tD,ErrorFactory:$.FA,deepExtend:$.zw}),on}(),be=new le.Vy("@firebase/app-compat");try{const on=(0,$.mS)();if(void 0!==on.firebase){be.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const vt=on.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&be.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const kr=fe;!function qt(on){(0,$e.registerVersion)("@firebase/app-compat","0.2.43",on)}()},631:(qo,si,yt)=>{yt.r(si),yt.d(si,{FirebaseError:()=>le.g,SDK_VERSION:()=>cs,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Te,_addOrOverwriteComponent:()=>nt,_apps:()=>de,_clearComponents:()=>$s,_components:()=>pe,_getProvider:()=>fn,_isFirebaseApp:()=>yn,_isFirebaseServerApp:()=>It,_registerComponent:()=>Bt,_removeServiceInstance:()=>ft,_serverApps:()=>re,deleteApp:()=>Go,getApp:()=>oo,getApps:()=>th,initializeApp:()=>tu,initializeServerApp:()=>Ss,onLog:()=>nh,registerVersion:()=>ao,setLogLevel:()=>fa});var $=yt(467),We=yt(779),$e=yt(398),le=yt(401),_n=yt(749);class Ze{constructor(ge){this.container=ge}getPlatformInfoString(){return this.container.getProviders().map(U=>{if(function Wn(ze){const ge=ze.getComponent();return"VERSION"===ge?.type}(U)){const F=U.getImmediate();return`${F.library}/${F.version}`}return null}).filter(U=>U).join(" ")}}const tr="@firebase/app",$t="0.10.13",fe=new $e.Vy("@firebase/app"),be="@firebase/app-compat",Je="@firebase/analytics-compat",Ot="@firebase/analytics",qt="@firebase/app-check-compat",kr="@firebase/app-check",on="@firebase/auth",vt="@firebase/auth-compat",gt="@firebase/database",lr="@firebase/data-connect",Ur="@firebase/database-compat",Br="@firebase/functions",hn="@firebase/functions-compat",Jt="@firebase/installations",jr="@firebase/installations-compat",at="@firebase/messaging",Re="@firebase/messaging-compat",Be="@firebase/performance",oe="@firebase/performance-compat",Rt="@firebase/remote-config",Xt="@firebase/remote-config-compat",dr="@firebase/storage",Kn="@firebase/storage-compat",us="@firebase/firestore",hr="@firebase/vertexai-preview",Ds="@firebase/firestore-compat",hi="firebase",ie="[DEFAULT]",ce={[tr]:"fire-core",[be]:"fire-core-compat",[Ot]:"fire-analytics",[Je]:"fire-analytics-compat",[kr]:"fire-app-check",[qt]:"fire-app-check-compat",[on]:"fire-auth",[vt]:"fire-auth-compat",[gt]:"fire-rtdb",[lr]:"fire-data-connect",[Ur]:"fire-rtdb-compat",[Br]:"fire-fn",[hn]:"fire-fn-compat",[Jt]:"fire-iid",[jr]:"fire-iid-compat",[at]:"fire-fcm",[Re]:"fire-fcm-compat",[Be]:"fire-perf",[oe]:"fire-perf-compat",[Rt]:"fire-rc",[Xt]:"fire-rc-compat",[dr]:"fire-gcs",[Kn]:"fire-gcs-compat",[us]:"fire-fst",[Ds]:"fire-fst-compat",[hr]:"fire-vertex","fire-js":"fire-js",[hi]:"fire-js-all"},de=new Map,re=new Map,pe=new Map;function Te(ze,ge){try{ze.container.addComponent(ge)}catch(U){fe.debug(`Component ${ge.name} failed to register with FirebaseApp ${ze.name}`,U)}}function nt(ze,ge){ze.container.addOrOverwriteComponent(ge)}function Bt(ze){const ge=ze.name;if(pe.has(ge))return fe.debug(`There were multiple attempts to register component ${ge}.`),!1;pe.set(ge,ze);for(const U of de.values())Te(U,ze);for(const U of re.values())Te(U,ze);return!0}function fn(ze,ge){const U=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return U&&U.triggerHeartbeat(),ze.container.getProvider(ge)}function ft(ze,ge,U=ie){fn(ze,ge).clearInstance(U)}function yn(ze){return void 0!==ze.options}function It(ze){return void 0!==ze.settings}function $s(){pe.clear()}const an=new le.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zt{constructor(ge,U,F){this._isDeleted=!1,this._options=Object.assign({},ge),this._config=Object.assign({},U),this._name=U.name,this._automaticDataCollectionEnabled=U.automaticDataCollectionEnabled,this._container=F,this.container.addComponent(new We.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ge){this._isDeleted=ge}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}class Si extends Zt{constructor(ge,U,F,W){const ee=void 0!==U.automaticDataCollectionEnabled&&U.automaticDataCollectionEnabled,Y={name:F,automaticDataCollectionEnabled:ee};super(void 0!==ge.apiKey?ge:ge.options,Y,W),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ee},U),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,U.releaseOnDeref=void 0,ao(tr,$t,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(ge){this.isDeleted||(this._refCount++,void 0!==ge&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(ge,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Go(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw an.create("server-app-deleted")}}const cs="10.14.1";function tu(ze,ge={}){let U=ze;"object"!=typeof ge&&(ge={name:ge});const F=Object.assign({name:ie,automaticDataCollectionEnabled:!1},ge),W=F.name;if("string"!=typeof W||!W)throw an.create("bad-app-name",{appName:String(W)});if(U||(U=(0,le.T9)()),!U)throw an.create("no-options");const ee=de.get(W);if(ee){if((0,le.bD)(U,ee.options)&&(0,le.bD)(F,ee.config))return ee;throw an.create("duplicate-app",{appName:W})}const Y=new We.h1(W);for(const Ne of pe.values())Y.addComponent(Ne);const Ce=new Zt(U,F,Y);return de.set(W,Ce),Ce}function Ss(ze,ge){if((0,le.Bd)()&&!(0,le.p7)())throw an.create("invalid-server-app-environment");let U;void 0===ge.automaticDataCollectionEnabled&&(ge.automaticDataCollectionEnabled=!1),U=yn(ze)?ze.options:ze;const F=Object.assign(Object.assign({},ge),U);if(void 0!==F.releaseOnDeref&&delete F.releaseOnDeref,void 0!==ge.releaseOnDeref&&typeof FinalizationRegistry>"u")throw an.create("finalization-registry-not-supported",{});const ee=""+(Bn=JSON.stringify(F),[...Bn].reduce((qe,jn)=>Math.imul(31,qe)+jn.charCodeAt(0)|0,0)),Y=re.get(ee);var Bn;if(Y)return Y.incRefCount(ge.releaseOnDeref),Y;const Ce=new We.h1(ee);for(const Bn of pe.values())Ce.addComponent(Bn);const Ne=new Si(U,ge,ee,Ce);return re.set(ee,Ne),Ne}function oo(ze=ie){const ge=de.get(ze);if(!ge&&ze===ie&&(0,le.T9)())return tu();if(!ge)throw an.create("no-app",{appName:ze});return ge}function th(){return Array.from(de.values())}function Go(ze){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,$.A)(function*(ze){let ge=!1;const U=ze.name;de.has(U)?(ge=!0,de.delete(U)):re.has(U)&&ze.decRefCount()<=0&&(re.delete(U),ge=!0),ge&&(yield Promise.all(ze.container.getProviders().map(F=>F.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function ao(ze,ge,U){var F;let W=null!==(F=ce[ze])&&void 0!==F?F:ze;U&&(W+=`-${U}`);const ee=W.match(/\s|\//),Y=ge.match(/\s|\//);if(ee||Y){const Ce=[`Unable to register library "${W}" with version "${ge}":`];return ee&&Ce.push(`library name "${W}" contains illegal characters (whitespace or "/")`),ee&&Y&&Ce.push("and"),Y&&Ce.push(`version name "${ge}" contains illegal characters (whitespace or "/")`),void fe.warn(Ce.join(" "))}Bt(new We.uA(`${W}-version`,()=>({library:W,version:ge}),"VERSION"))}function nh(ze,ge){if(null!==ze&&"function"!=typeof ze)throw an.create("invalid-log-argument");(0,$e.Ey)(ze,ge)}function fa(ze){(0,$e.He)(ze)}const $i="firebase-heartbeat-database",El=1,pa="firebase-heartbeat-store";let Ps=null;function Xu(){return Ps||(Ps=(0,_n.P2)($i,El,{upgrade:(ze,ge)=>{if(0===ge)try{ze.createObjectStore(pa)}catch(U){console.warn(U)}}}).catch(ze=>{throw an.create("idb-open",{originalErrorMessage:ze.message})})),Ps}function Zu(){return(Zu=(0,$.A)(function*(ze){try{const U=(yield Xu()).transaction(pa),F=yield U.objectStore(pa).get(rh(ze));return yield U.done,F}catch(ge){if(ge instanceof le.g)fe.warn(ge.message);else{const U=an.create("idb-get",{originalErrorMessage:ge?.message});fe.warn(U.message)}}})).apply(this,arguments)}function fi(ze,ge){return uo.apply(this,arguments)}function uo(){return(uo=(0,$.A)(function*(ze,ge){try{const F=(yield Xu()).transaction(pa,"readwrite");yield F.objectStore(pa).put(ge,rh(ze)),yield F.done}catch(U){if(U instanceof le.g)fe.warn(U.message);else{const F=an.create("idb-set",{originalErrorMessage:U?.message});fe.warn(F.message)}}})).apply(this,arguments)}function rh(ze){return`${ze.name}!${ze.options.appId}`}class co{constructor(ge){this.container=ge,this._heartbeatsCache=null;const U=this.container.getProvider("app").getImmediate();this._storage=new nu(U),this._heartbeatsCachePromise=this._storage.read().then(F=>(this._heartbeatsCache=F,F))}triggerHeartbeat(){var ge=this;return(0,$.A)(function*(){var U,F;try{const ee=ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Y=qi();return null==(null===(U=ge._heartbeatsCache)||void 0===U?void 0:U.heartbeats)&&(ge._heartbeatsCache=yield ge._heartbeatsCachePromise,null==(null===(F=ge._heartbeatsCache)||void 0===F?void 0:F.heartbeats))||ge._heartbeatsCache.lastSentHeartbeatDate===Y||ge._heartbeatsCache.heartbeats.some(Ce=>Ce.date===Y)?void 0:(ge._heartbeatsCache.heartbeats.push({date:Y,agent:ee}),ge._heartbeatsCache.heartbeats=ge._heartbeatsCache.heartbeats.filter(Ce=>{const Ne=new Date(Ce.date).valueOf();return Date.now()-Ne<=2592e6}),ge._storage.overwrite(ge._heartbeatsCache))}catch(W){fe.warn(W)}})()}getHeartbeatsHeader(){var ge=this;return(0,$.A)(function*(){var U;try{if(null===ge._heartbeatsCache&&(yield ge._heartbeatsCachePromise),null==(null===(U=ge._heartbeatsCache)||void 0===U?void 0:U.heartbeats)||0===ge._heartbeatsCache.heartbeats.length)return"";const F=qi(),{heartbeatsToSend:W,unsentEntries:ee}=function ih(ze,ge=1024){const U=[];let F=ze.slice();for(const W of ze){const ee=U.find(Y=>Y.agent===W.agent);if(ee){if(ee.dates.push(W.date),Vt(U)>ge){ee.dates.pop();break}}else if(U.push({agent:W.agent,dates:[W.date]}),Vt(U)>ge){U.pop();break}F=F.slice(1)}return{heartbeatsToSend:U,unsentEntries:F}}(ge._heartbeatsCache.heartbeats),Y=(0,le.Uj)(JSON.stringify({version:2,heartbeats:W}));return ge._heartbeatsCache.lastSentHeartbeatDate=F,ee.length>0?(ge._heartbeatsCache.heartbeats=ee,yield ge._storage.overwrite(ge._heartbeatsCache)):(ge._heartbeatsCache.heartbeats=[],ge._storage.overwrite(ge._heartbeatsCache)),Y}catch(F){return fe.warn(F),""}})()}}function qi(){return(new Date).toISOString().substring(0,10)}class nu{constructor(ge){this.app=ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,$.A)(function*(){return!!(0,le.zW)()&&(0,le.eX)().then(()=>!0).catch(()=>!1)})()}read(){var ge=this;return(0,$.A)(function*(){if(yield ge._canUseIndexedDBPromise){const F=yield function qs(ze){return Zu.apply(this,arguments)}(ge.app);return F?.heartbeats?F:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ge){var U=this;return(0,$.A)(function*(){var F;if(yield U._canUseIndexedDBPromise){const ee=yield U.read();return fi(U.app,{lastSentHeartbeatDate:null!==(F=ge.lastSentHeartbeatDate)&&void 0!==F?F:ee.lastSentHeartbeatDate,heartbeats:ge.heartbeats})}})()}add(ge){var U=this;return(0,$.A)(function*(){var F;if(yield U._canUseIndexedDBPromise){const ee=yield U.read();return fi(U.app,{lastSentHeartbeatDate:null!==(F=ge.lastSentHeartbeatDate)&&void 0!==F?F:ee.lastSentHeartbeatDate,heartbeats:[...ee.heartbeats,...ge.heartbeats]})}})()}}function Vt(ze){return(0,le.Uj)(JSON.stringify({version:2,heartbeats:ze})).length}!function bl(ze){Bt(new We.uA("platform-logger",ge=>new Ze(ge),"PRIVATE")),Bt(new We.uA("heartbeat",ge=>new co(ge),"PRIVATE")),ao(tr,$t,ze),ao(tr,$t,"esm2017"),ao("fire-js","")}("")},779:(qo,si,yt)=>{yt.d(si,{h1:()=>tr,uA:()=>$e});var $=yt(467),We=yt(401);class $e{constructor(fe,be,Je){this.name=fe,this.instanceFactory=be,this.type=Je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const le="[DEFAULT]";class _n{constructor(fe,be){this.name=fe,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const be=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(be)){const Je=new We.cY;if(this.instancesDeferred.set(be,Je),this.isInitialized(be)||this.shouldAutoInitialize())try{const Ot=this.getOrInitializeService({instanceIdentifier:be});Ot&&Je.resolve(Ot)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(fe){var be;const Je=this.normalizeInstanceIdentifier(fe?.identifier),Ot=null!==(be=fe?.optional)&&void 0!==be&&be;if(!this.isInitialized(Je)&&!this.shouldAutoInitialize()){if(Ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Je})}catch(qt){if(Ot)return null;throw qt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Wn($t){return"EAGER"===$t.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[be,Je]of this.instancesDeferred.entries()){const Ot=this.normalizeInstanceIdentifier(be);try{const qt=this.getOrInitializeService({instanceIdentifier:Ot});Je.resolve(qt)}catch{}}}}clearInstance(fe=le){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,$.A)(function*(){const be=Array.from(fe.instances.values());yield Promise.all([...be.filter(Je=>"INTERNAL"in Je).map(Je=>Je.INTERNAL.delete()),...be.filter(Je=>"_delete"in Je).map(Je=>Je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=le){return this.instances.has(fe)}getOptions(fe=le){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:be={}}=fe,Je=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Je))throw Error(`${this.name}(${Je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ot=this.getOrInitializeService({instanceIdentifier:Je,options:be});for(const[qt,kr]of this.instancesDeferred.entries())Je===this.normalizeInstanceIdentifier(qt)&&kr.resolve(Ot);return Ot}onInit(fe,be){var Je;const Ot=this.normalizeInstanceIdentifier(be),qt=null!==(Je=this.onInitCallbacks.get(Ot))&&void 0!==Je?Je:new Set;qt.add(fe),this.onInitCallbacks.set(Ot,qt);const kr=this.instances.get(Ot);return kr&&fe(kr,Ot),()=>{qt.delete(fe)}}invokeOnInitCallbacks(fe,be){const Je=this.onInitCallbacks.get(be);if(Je)for(const Ot of Je)try{Ot(fe,be)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:be={}}){let Je=this.instances.get(fe);if(!Je&&this.component&&(Je=this.component.instanceFactory(this.container,{instanceIdentifier:($t=fe,$t===le?void 0:$t),options:be}),this.instances.set(fe,Je),this.instancesOptions.set(fe,be),this.invokeOnInitCallbacks(Je,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Je)}catch{}var $t;return Je||null}normalizeInstanceIdentifier(fe=le){return this.component?this.component.multipleInstances?fe:le:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tr{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const be=this.getProvider(fe.name);if(be.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);be.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const be=new _n(fe,this);return this.providers.set(fe,be),be}getProviders(){return Array.from(this.providers.values())}}},398:(qo,si,yt)=>{yt.d(si,{$b:()=>We,Ey:()=>$t,He:()=>tr,Vy:()=>Wn});const $=[];var We=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(We||{});const $e={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},le=We.INFO,_n={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},Ze=(fe,be,...Je)=>{if(be<fe.logLevel)return;const Ot=(new Date).toISOString(),qt=_n[be];if(!qt)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[qt](`[${Ot}]  ${fe.name}:`,...Je)};class Wn{constructor(be){this.name=be,this._logLevel=le,this._logHandler=Ze,this._userLogHandler=null,$.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in We))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?$e[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...be),this._logHandler(this,We.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...be),this._logHandler(this,We.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,We.INFO,...be),this._logHandler(this,We.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,We.WARN,...be),this._logHandler(this,We.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...be),this._logHandler(this,We.ERROR,...be)}}function tr(fe){$.forEach(be=>{be.setLogLevel(fe)})}function $t(fe,be){for(const Je of $){let Ot=null;be&&be.level&&(Ot=$e[be.level]),Je.userLogHandler=null===fe?null:(qt,kr,...on)=>{const vt=on.map(gt=>{if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch{return null}}).filter(gt=>gt).join(" ");kr>=(Ot??qt.logLevel)&&fe({level:We[kr].toLowerCase(),message:vt,args:on,type:qt.name})}}}},324:(qo,si,yt)=>{var $=yt(467),We=yt(574),$e=yt(631),le=yt(401),_n=yt(398),Ze=yt(635),Wn=yt(779);const $t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const kr=function Ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},on=function qt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new le.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lr=new _n.Vy("@firebase/auth");function Br(m,...d){lr.logLevel<=_n.$b.ERROR&&lr.error(`Auth (${$e.SDK_VERSION}): ${m}`,...d)}function hn(m,...d){throw Be(m,...d)}function Jt(m,...d){return Be(m,...d)}function jr(m,d,f){const y=Object.assign(Object.assign({},on()),{[d]:f});return new le.FA("auth","Firebase",y).create(d,{appName:m.name})}function at(m){return jr(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Re(m,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&hn(m,"argument-error"),jr(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(m,...d){if("string"!=typeof m){const f=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(f,...y)}return vt.create(m,...d)}function oe(m,d,...f){if(!m)throw Be(d,...f)}function Rt(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Br(d),new Error(d)}function Xt(m,d){m||Rt(d)}function dr(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Kn(){return"http:"===us()||"https:"===us()}function us(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class hi{constructor(d,f){this.shortDelay=d,this.longDelay=f,Xt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,le.jZ)()||(0,le.lV)()}get(){return function hr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kn()||(0,le.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function eu(m,d){Xt(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ie{static initialize(d,f,y){this.fetchImpl=d,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Rt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Rt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Rt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},de=new hi(3e4,6e4);function re(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function pe(m,d,f,y){return Te.apply(this,arguments)}function Te(){return(Te=(0,$.A)(function*(m,d,f,y,w={}){return nt(m,w,(0,$.A)(function*(){let S={},q={};y&&("GET"===d?q=y:S={body:JSON.stringify(y)});const J=(0,le.Am)(Object.assign({key:m.config.apiKey},q)).slice(1),se=yield m._getAdditionalHeaders();se["Content-Type"]="application/json",m.languageCode&&(se["X-Firebase-Locale"]=m.languageCode);const Me=Object.assign({method:d,headers:se},S);return(0,le.c1)()||(Me.referrerPolicy="no-referrer"),ie.fetch()(yn(m,m.config.apiHost,f,J),Me)}))})).apply(this,arguments)}function nt(m,d,f){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,$.A)(function*(m,d,f){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},ce),d);try{const w=new $s(m),S=yield Promise.race([f(),w.promise]);w.clearNetworkTimeout();const q=yield S.json();if("needConfirmation"in q)throw Wt(m,"account-exists-with-different-credential",q);if(S.ok&&!("errorMessage"in q))return q;{const J=S.ok?q.errorMessage:q.error.message,[se,Me]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw Wt(m,"credential-already-in-use",q);if("EMAIL_EXISTS"===se)throw Wt(m,"email-already-in-use",q);if("USER_DISABLED"===se)throw Wt(m,"user-disabled",q);const He=y[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(Me)throw jr(m,He,Me);hn(m,He)}}catch(w){if(w instanceof le.g)throw w;hn(m,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function fn(m,d,f,y){return ft.apply(this,arguments)}function ft(){return(ft=(0,$.A)(function*(m,d,f,y,w={}){const S=yield pe(m,d,f,y,w);return"mfaPendingCredential"in S&&hn(m,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function yn(m,d,f,y){const w=`${d}${f}?${y}`;return m.config.emulator?eu(m.config,w):`${m.config.apiScheme}://${w}`}function It(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $s{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(Jt(this.auth,"network-request-failed")),de.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wt(m,d,f){const y={appName:m.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const w=Jt(m,d,y);return w.customData._tokenResponse=f,w}function an(m){return void 0!==m&&void 0!==m.getResponse}function Zt(m){return void 0!==m&&void 0!==m.enterprise}class Si{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return It(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function tu(){return(tu=(0,$.A)(function*(m){return(yield pe(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ss(m,d){return oo.apply(this,arguments)}function oo(){return(oo=(0,$.A)(function*(m,d){return pe(m,"GET","/v2/recaptchaConfig",re(m,d))})).apply(this,arguments)}function Go(){return(Go=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function ao(){return(ao=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function nh(m,d){return fa.apply(this,arguments)}function fa(){return(fa=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function $i(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Ps(){return(Ps=(0,$.A)(function*(m,d=!1){const f=(0,le.Ku)(m),y=yield f.getIdToken(d),w=qs(y);oe(w&&w.exp&&w.auth_time&&w.iat,f.auth,"internal-error");const S="object"==typeof w.firebase?w.firebase:void 0,q=S?.sign_in_provider;return{claims:w,token:y,authTime:$i(Xu(w.auth_time)),issuedAtTime:$i(Xu(w.iat)),expirationTime:$i(Xu(w.exp)),signInProvider:q||null,signInSecondFactor:S?.sign_in_second_factor||null}})).apply(this,arguments)}function Xu(m){return 1e3*Number(m)}function qs(m){const[d,f,y]=m.split(".");if(void 0===d||void 0===f||void 0===y)return Br("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,le.u)(f);return w?JSON.parse(w):(Br("Failed to decode base64 JWT payload"),null)}catch(w){return Br("Caught error parsing JWT payload as JSON",w?.toString()),null}}function Zu(m){const d=qs(m);return oe(d,"internal-error"),oe(typeof d.exp<"u","internal-error"),oe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function fi(m,d){return uo.apply(this,arguments)}function uo(){return(uo=(0,$.A)(function*(m,d,f=!1){if(f)return d;try{return yield d}catch(y){throw y instanceof le.g&&function rh({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class wl{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const w=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,$.A)(function*(){yield f.iteration()}),y)}iteration(){var d=this;return(0,$.A)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Tl{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=$i(this.lastLoginAt),this.creationTime=$i(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function co(m){return qi.apply(this,arguments)}function qi(){return(qi=(0,$.A)(function*(m){var d;const f=m.auth,y=yield m.getIdToken(),w=yield fi(m,nh(f,{idToken:y}));oe(w?.users.length,f,"internal-error");const S=w.users[0];m._notifyReloadListener(S);const q=null!==(d=S.providerUserInfo)&&void 0!==d&&d.length?bl(S.providerUserInfo):[],J=function Vt(m,d){return[...m.filter(y=>!d.some(w=>w.providerId===y.providerId)),...d]}(m.providerData,q),He=!!m.isAnonymous&&!(m.email&&S.passwordHash||J?.length),Ge={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:J,metadata:new Tl(S.createdAt,S.lastLoginAt),isAnonymous:He};Object.assign(m,Ge)})).apply(this,arguments)}function nu(){return(nu=(0,$.A)(function*(m){const d=(0,le.Ku)(m);yield co(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function bl(m){return m.map(d=>{var{providerId:f}=d,y=(0,Ze.Tt)(d,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function ge(){return(ge=(0,$.A)(function*(m,d){const f=yield nt(m,{},(0,$.A)(function*(){const y=(0,le.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:w,apiKey:S}=m.config,q=yn(m,w,"/v1/token",`key=${S}`),J=yield m._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(q,{method:"POST",headers:J,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function F(){return(F=(0,$.A)(function*(m,d){return pe(m,"POST","/v2/accounts:revokeToken",re(m,d))})).apply(this,arguments)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){oe(d.idToken,"internal-error"),oe(typeof d.idToken<"u","internal-error"),oe(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Zu(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){oe(0!==d.length,"internal-error");const f=Zu(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var y=this;return(0,$.A)(function*(){return f||!y.accessToken||y.isExpired?(oe(y.refreshToken,d,"user-token-expired"),y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var y=this;return(0,$.A)(function*(){const{accessToken:w,refreshToken:S,expiresIn:q}=yield function ze(m,d){return ge.apply(this,arguments)}(d,f);y.updateTokensAndExpiration(w,S,Number(q))})()}updateTokensAndExpiration(d,f,y){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,f){const{refreshToken:y,accessToken:w,expirationTime:S}=f,q=new W;return y&&(oe("string"==typeof y,"internal-error",{appName:d}),q.refreshToken=y),w&&(oe("string"==typeof w,"internal-error",{appName:d}),q.accessToken=w),S&&(oe("number"==typeof S,"internal-error",{appName:d}),q.expirationTime=S),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return Rt("not implemented")}}function ee(m,d){oe("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class Y{constructor(d){var{uid:f,auth:y,stsTokenManager:w}=d,S=(0,Ze.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.providerData=S.providerData?[...S.providerData]:[],this.metadata=new Tl(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,$.A)(function*(){const y=yield fi(f,f.stsTokenManager.getToken(f.auth,d));return oe(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(d){return function pa(m){return Ps.apply(this,arguments)}(this,d)}reload(){return function ih(m){return nu.apply(this,arguments)}(this)}_assign(d){this!==d&&(oe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new Y(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var y=this;return(0,$.A)(function*(){let w=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),w=!0),f&&(yield co(y)),yield y.auth._persistUserIfCurrent(y),w&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,$.A)(function*(){if((0,$e._isFirebaseServerApp)(d.auth.app))return Promise.reject(at(d.auth));const f=yield d.getIdToken();return yield fi(d,function th(m,d){return Go.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var y,w,S,q,J,se,Me,He;const Ge=null!==(y=f.displayName)&&void 0!==y?y:void 0,On=null!==(w=f.email)&&void 0!==w?w:void 0,Eo=null!==(S=f.phoneNumber)&&void 0!==S?S:void 0,Rh=null!==(q=f.photoURL)&&void 0!==q?q:void 0,Cg=null!==(J=f.tenantId)&&void 0!==J?J:void 0,Ql=null!==(se=f._redirectEventId)&&void 0!==se?se:void 0,Cv=null!==(Me=f.createdAt)&&void 0!==Me?Me:void 0,fb=null!==(He=f.lastLoginAt)&&void 0!==He?He:void 0,{uid:Dv,emailVerified:pb,isAnonymous:Sv,providerData:Pv,stsTokenManager:Rv}=f;oe(Dv&&Rv,d,"internal-error");const cR=W.fromJSON(this.name,Rv);oe("string"==typeof Dv,d,"internal-error"),ee(Ge,d.name),ee(On,d.name),oe("boolean"==typeof pb,d,"internal-error"),oe("boolean"==typeof Sv,d,"internal-error"),ee(Eo,d.name),ee(Rh,d.name),ee(Cg,d.name),ee(Ql,d.name),ee(Cv,d.name),ee(fb,d.name);const xv=new Y({uid:Dv,auth:d,email:On,emailVerified:pb,displayName:Ge,isAnonymous:Sv,photoURL:Rh,phoneNumber:Eo,tenantId:Cg,stsTokenManager:cR,createdAt:Cv,lastLoginAt:fb});return Pv&&Array.isArray(Pv)&&(xv.providerData=Pv.map(LB=>Object.assign({},LB))),Ql&&(xv._redirectEventId=Ql),xv}static _fromIdTokenResponse(d,f,y=!1){return(0,$.A)(function*(){const w=new W;w.updateFromServerResponse(f);const S=new Y({uid:f.localId,auth:d,stsTokenManager:w,isAnonymous:y});return yield co(S),S})()}static _fromGetAccountInfoResponse(d,f,y){return(0,$.A)(function*(){const w=f.users[0];oe(void 0!==w.localId,"internal-error");const S=void 0!==w.providerUserInfo?bl(w.providerUserInfo):[],q=!(w.email&&w.passwordHash||S?.length),J=new W;J.updateFromIdToken(y);const se=new Y({uid:w.localId,auth:d,stsTokenManager:J,isAnonymous:q}),Me={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:S,metadata:new Tl(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||S?.length)};return Object.assign(se,Me),se})()}}const Ce=new Map;function Ne(m){Xt(m instanceof Function,"Expected a class definition");let d=Ce.get(m);return d?(Xt(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Ce.set(m,d),d)}const qe=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,$.A)(function*(){return!0})()}_set(f,y){var w=this;return(0,$.A)(function*(){w.storage[f]=y})()}_get(f){var y=this;return(0,$.A)(function*(){const w=y.storage[f];return void 0===w?null:w})()}_remove(f){var y=this;return(0,$.A)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return m.type="NONE",m})();function jn(m,d,f){return`firebase:${m}:${d}:${f}`}class zn{constructor(d,f,y){this.persistence=d,this.auth=f,this.userKey=y;const{config:w,name:S}=this.auth;this.fullUserKey=jn(this.userKey,w.apiKey,S),this.fullPersistenceKey=jn("persistence",w.apiKey,S),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,$.A)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?Y._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,$.A)(function*(){if(f.persistence===d)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,y="authUser"){return(0,$.A)(function*(){if(!f.length)return new zn(Ne(qe),d,y);const w=(yield Promise.all(f.map(function(){var Me=(0,$.A)(function*(He){if(yield He._isAvailable())return He});return function(He){return Me.apply(this,arguments)}}()))).filter(Me=>Me);let S=w[0]||Ne(qe);const q=jn(y,d.config.apiKey,d.name);let J=null;for(const Me of f)try{const He=yield Me._get(q);if(He){const Ge=Y._fromJSON(d,He);Me!==S&&(J=Ge),S=Me;break}}catch{}const se=w.filter(Me=>Me._shouldAllowMigration);return S._shouldAllowMigration&&se.length?(S=se[0],J&&(yield S._set(q,J.toJSON())),yield Promise.all(f.map(function(){var Me=(0,$.A)(function*(He){if(He!==S)try{yield He._remove(q)}catch{}});return function(He){return Me.apply(this,arguments)}}())),new zn(S,d,y)):new zn(S,d,y)})()}}function xt(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(sh(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(lo(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(nT(d))return"Blackberry";if(Ho(d))return"Webos";if(ec(d))return"Safari";if((d.includes("chrome/")||ga(d))&&!d.includes("edge/"))return"Chrome";if(Al(d))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function lo(m=(0,le.ZQ)()){return/firefox\//i.test(m)}function ec(m=(0,le.ZQ)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ga(m=(0,le.ZQ)()){return/crios\//i.test(m)}function sh(m=(0,le.ZQ)()){return/iemobile/i.test(m)}function Al(m=(0,le.ZQ)()){return/android/i.test(m)}function nT(m=(0,le.ZQ)()){return/blackberry/i.test(m)}function Ho(m=(0,le.ZQ)()){return/webos/i.test(m)}function Dp(m=(0,le.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function oh(m=(0,le.ZQ)()){return Dp(m)||Al(m)||Ho(m)||nT(m)||/windows phone/i.test(m)||sh(m)}function gy(m,d=[]){let f;switch(m){case"Browser":f=xt((0,le.ZQ)());break;case"Worker":f=`${xt((0,le.ZQ)())}-${m}`;break;default:f=m}const y=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${$e.SDK_VERSION}/${y}`}class lB{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const y=S=>new Promise((q,J)=>{try{q(d(S))}catch(se){J(se)}});y.onAbort=f,this.queue.push(y);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,$.A)(function*(){if(f.auth.currentUser===d)return;const y=[];try{for(const w of f.queue)yield w(d),w.onAbort&&y.push(w.onAbort)}catch(w){y.reverse();for(const S of y)try{S()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Sp(){return(Sp=(0,$.A)(function*(m,d={}){return pe(m,"GET","/v2/passwordPolicy",re(m,d))})).apply(this,arguments)}class Cl{constructor(d){var f,y,w,S;const q=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=q.minPasswordLength)&&void 0!==f?f:6,q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=q.maxPasswordLength),void 0!==q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=q.containsLowercaseCharacter),void 0!==q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=q.containsUppercaseCharacter),void 0!==q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=q.containsNumericCharacter),void 0!==q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=q.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(y=d.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(S=d.forceUpgradeOnSignin)&&void 0!==S&&S,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,y,w,S,q,J;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,se),this.validatePasswordCharacterOptions(d,se),se.isValid&&(se.isValid=null===(f=se.meetsMinPasswordLength)||void 0===f||f),se.isValid&&(se.isValid=null===(y=se.meetsMaxPasswordLength)||void 0===y||y),se.isValid&&(se.isValid=null===(w=se.containsLowercaseLetter)||void 0===w||w),se.isValid&&(se.isValid=null===(S=se.containsUppercaseLetter)||void 0===S||S),se.isValid&&(se.isValid=null===(q=se.containsNumericCharacter)||void 0===q||q),se.isValid&&(se.isValid=null===(J=se.containsNonAlphanumericCharacter)||void 0===J||J),se}validatePasswordLengthOptions(d,f){const y=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;y&&(f.meetsMinPasswordLength=d.length>=y),w&&(f.meetsMaxPasswordLength=d.length<=w)}validatePasswordCharacterOptions(d,f){let y;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let w=0;w<d.length;w++)y=d.charAt(w),this.updatePasswordCharacterOptionsStatuses(f,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(d,f,y,w,S){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=S))}}class Dl{constructor(d,f,y,w){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=y,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new lB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,f){var y=this;return f&&(this._popupRedirectResolver=Ne(f)),this._initializationPromise=this.queue((0,$.A)(function*(){var w,S;if(!y._deleted&&(y.persistenceManager=yield zn.create(y,d),!y._deleted)){if(null!==(w=y._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(S=y.currentUser)||void 0===S?void 0:S.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,$.A)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,$.A)(function*(){try{const y=yield nh(f,{idToken:d}),w=yield Y._fromGetAccountInfoResponse(f,y,d);yield f.directlySetCurrentUser(w)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,$.A)(function*(){var y;if((0,$e._isFirebaseServerApp)(f.app)){const J=f.app.settings.authIdToken;return J?new Promise(se=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(J).then(se,se))}):f.directlySetCurrentUser(null)}const w=yield f.assertedPersistence.getCurrentUser();let S=w,q=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const J=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,se=S?._redirectEventId,Me=yield f.tryRedirectSignIn(d);(!J||J===se)&&Me?.user&&(S=Me.user,q=!0)}if(!S)return f.directlySetCurrentUser(null);if(!S._redirectEventId){if(q)try{yield f.beforeStateQueue.runMiddleware(S)}catch(J){S=w,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(J))}return S?f.reloadAndSetCurrentUserOrClear(S):f.directlySetCurrentUser(null)}return oe(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===S._redirectEventId?f.directlySetCurrentUser(S):f.reloadAndSetCurrentUserOrClear(S)})()}tryRedirectSignIn(d){var f=this;return(0,$.A)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,$.A)(function*(){try{yield co(d)}catch(y){if("auth/network-request-failed"!==y?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ds(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,$.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,$.A)(function*(){if((0,$e._isFirebaseServerApp)(f.app))return Promise.reject(at(f));const y=d?(0,le.Ku)(d):null;return y&&oe(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(d,f=!1){var y=this;return(0,$.A)(function*(){if(!y._deleted)return d&&oe(y.tenantId===d.tenantId,y,"tenant-id-mismatch"),f||(yield y.beforeStateQueue.runMiddleware(d)),y.queue((0,$.A)(function*(){yield y.directlySetCurrentUser(d),y.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,$.A)(function*(){return(0,$e._isFirebaseServerApp)(d.app)?Promise.reject(at(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,$e._isFirebaseServerApp)(this.app)?Promise.reject(at(this)):this.queue((0,$.A)(function*(){yield f.assertedPersistence.setPersistence(Ne(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,$.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const y=f._getPasswordPolicyInternal();return y.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,$.A)(function*(){const f=yield function dB(m){return Sp.apply(this,arguments)}(d),y=new Cl(f);null===d.tenantId?d._projectPasswordPolicy=y:d._tenantPasswordPolicies[d.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new le.FA("auth","Firebase",d())}onAuthStateChanged(d,f,y){return this.registerStateListener(this.authStateSubscription,d,f,y)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,y){return this.registerStateListener(this.idTokenSubscription,d,f,y)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const y=this.onAuthStateChanged(()=>{y(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,$.A)(function*(){if(f.currentUser){const y=yield f.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:y};null!=f.tenantId&&(w.tenantId=f.tenantId),yield function U(m,d){return F.apply(this,arguments)}(f,w)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var y=this;return(0,$.A)(function*(){const w=yield y.getOrInitRedirectPersistenceManager(f);return null===d?w.removeCurrentUser():w.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,$.A)(function*(){if(!f.redirectPersistenceManager){const y=d&&Ne(d)||f._popupRedirectResolver;oe(y,f,"argument-error"),f.redirectPersistenceManager=yield zn.create(f,[Ne(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,$.A)(function*(){var y,w;return f._isInitialized&&(yield f.queue((0,$.A)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===d?f._currentUser:(null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,$.A)(function*(){if(d===f.currentUser)return f.queue((0,$.A)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,y,w){if(this._deleted)return()=>{};const S="function"==typeof f?f:f.next.bind(f);let q=!1;const J=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(J,this,"internal-error"),J.then(()=>{q||S(this.currentUser)}),"function"==typeof f){const se=d.addObserver(f,y,w);return()=>{q=!0,se()}}{const se=d.addObserver(f);return()=>{q=!0,se()}}}directlySetCurrentUser(d){var f=this;return(0,$.A)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=gy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,$.A)(function*(){var f;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const w=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();w&&(y["X-Firebase-Client"]=w);const S=yield d._getAppCheckToken();return S&&(y["X-Firebase-AppCheck"]=S),y})()}_getAppCheckToken(){var d=this;return(0,$.A)(function*(){var f;const y=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return y?.error&&function Ur(m,...d){lr.logLevel<=_n.$b.WARN&&lr.warn(`Auth (${$e.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function An(m){return(0,le.Ku)(m)}class my{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,le.tD)(f=>this.observer=f)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tc={loadJS:()=>(0,$.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iT(m){return tc.loadJS(m)}function Cn(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Pp{constructor(d){this.type="recaptcha-enterprise",this.auth=An(d)}verify(d="verify",f=!1){var y=this;return(0,$.A)(function*(){function S(){return S=(0,$.A)(function*(J){if(!f){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var se=(0,$.A)(function*(Me,He){Ss(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ge=>{if(void 0!==Ge.recaptchaKey){const On=new Si(Ge);return null==J.tenantId?J._agentRecaptchaConfig=On:J._tenantRecaptchaConfigs[J.tenantId]=On,Me(On.siteKey)}He(new Error("recaptcha Enterprise site key undefined"))}).catch(Ge=>{He(Ge)})});return function(Me,He){return se.apply(this,arguments)}}())}),S.apply(this,arguments)}function q(J,se,Me){const He=window.grecaptcha;Zt(He)?He.enterprise.ready(()=>{He.enterprise.execute(J,{action:d}).then(Ge=>{se(Ge)}).catch(()=>{se("NO_RECAPTCHA")})}):Me(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,se)=>{(function w(J){return S.apply(this,arguments)})(y.auth).then(Me=>{if(!f&&Zt(window.grecaptcha))q(Me,J,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));let He=function hB(){return tc.recaptchaEnterpriseScript}();0!==He.length&&(He+=Me),iT(He).then(()=>{q(Me,J,se)}).catch(Ge=>{se(Ge)})}}).catch(Me=>{se(Me)})})})()}}function sT(m,d,f){return _y.apply(this,arguments)}function _y(){return(_y=(0,$.A)(function*(m,d,f,y=!1){const w=new Pp(m);let S;try{S=yield w.verify(f)}catch{S=yield w.verify(f,!0)}const q=Object.assign({},d);return Object.assign(q,y?{captchaResp:S}:{captchaResponse:S}),Object.assign(q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),q})).apply(this,arguments)}function Dn(m,d,f,y){return ht.apply(this,arguments)}function ht(){return ht=(0,$.A)(function*(m,d,f,y){var w;if(null!==(w=m._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const S=yield sT(m,d,f,"getOobCode"===f);return y(m,S)}return y(m,d).catch(function(){var S=(0,$.A)(function*(q){if("auth/missing-recaptcha-token"===q.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const J=yield sT(m,d,f,"getOobCode"===f);return y(m,J)}return Promise.reject(q)});return function(q){return S.apply(this,arguments)}}())}),ht.apply(this,arguments)}function _a(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function pP(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class ah{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Rt("not implemented")}_getIdTokenResponse(d){return Rt("not implemented")}_linkToIdToken(d,f){return Rt("not implemented")}_getReauthenticationResolver(d){return Rt("not implemented")}}function oT(m,d){return aT.apply(this,arguments)}function aT(){return(aT=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:resetPassword",re(m,d))})).apply(this,arguments)}function uT(){return(uT=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Rs(m,d){return ut.apply(this,arguments)}function ut(){return(ut=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function cT(){return(cT=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",re(m,d))})).apply(this,arguments)}function yB(m,d){return lT.apply(this,arguments)}function lT(){return(lT=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithPassword",re(m,d))})).apply(this,arguments)}function yy(m,d){return ke.apply(this,arguments)}function ke(){return(ke=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:sendOobCode",re(m,d))})).apply(this,arguments)}function Gs(){return(Gs=(0,$.A)(function*(m,d){return yy(m,d)})).apply(this,arguments)}function xp(m,d){return vy.apply(this,arguments)}function vy(){return(vy=(0,$.A)(function*(m,d){return yy(m,d)})).apply(this,arguments)}function dT(m,d){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,$.A)(function*(m,d){return yy(m,d)})).apply(this,arguments)}function Pl(){return(Pl=(0,$.A)(function*(m,d){return yy(m,d)})).apply(this,arguments)}function kp(){return(kp=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithEmailLink",re(m,d))})).apply(this,arguments)}function Ae(){return(Ae=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithEmailLink",re(m,d))})).apply(this,arguments)}class nc extends ah{constructor(d,f,y,w=null){super("password",y),this._email=d,this._password=f,this._tenantId=w}static _fromEmailAndPassword(d,f){return new nc(d,f,"password")}static _fromEmailAndCode(d,f,y=null){return new nc(d,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,$.A)(function*(){switch(f.signInMethod){case"password":return Dn(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",yB);case"emailLink":return function Ey(m,d){return kp.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:hn(d,"internal-error")}})()}_linkToIdToken(d,f){var y=this;return(0,$.A)(function*(){switch(y.signInMethod){case"password":return Dn(d,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rs);case"emailLink":return function mP(m,d){return Ae.apply(this,arguments)}(d,{idToken:f,email:y._email,oobCode:y._password});default:hn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ho(m,d){return Np.apply(this,arguments)}function Np(){return(Np=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithIdp",re(m,d))})).apply(this,arguments)}class Wo extends ah{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Wo(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):hn("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:w}=f,S=(0,Ze.Tt)(f,["providerId","signInMethod"]);if(!y||!w)return null;const q=new Wo(y,w);return q.idToken=S.idToken||void 0,q.accessToken=S.accessToken||void 0,q.secret=S.secret,q.nonce=S.nonce,q.pendingToken=S.pendingToken||null,q}_getIdTokenResponse(d){return ho(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,ho(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ho(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,le.Am)(f)}return d}}function hT(){return(hT=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:sendVerificationCode",re(m,d))})).apply(this,arguments)}function fT(){return(fT=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,d))})).apply(this,arguments)}function uh(){return(uh=(0,$.A)(function*(m,d){const f=yield fn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,d));if(f.temporaryProof)throw Wt(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ch={USER_NOT_FOUND:"user-not-found"};function lh(){return(lh=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithPhoneNumber",re(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ch)})).apply(this,arguments)}class iu extends ah{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new iu({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new iu({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function IB(m,d){return fT.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function EB(m,d){return uh.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function by(m,d){return lh.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:y,verificationCode:w}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:y,code:w}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:y,phoneNumber:w,temporaryProof:S}=d;return y||f||w||S?new iu({verificationId:f,verificationCode:y,phoneNumber:w,temporaryProof:S}):null}}class Rl{constructor(d){var f,y,w,S,q,J;const se=(0,le.I9)((0,le.hp)(d)),Me=null!==(f=se.apiKey)&&void 0!==f?f:null,He=null!==(y=se.oobCode)&&void 0!==y?y:null,Ge=function ya(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=se.mode)&&void 0!==w?w:null);oe(Me&&He&&Ge,"argument-error"),this.apiKey=Me,this.operation=Ge,this.code=He,this.continueUrl=null!==(S=se.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(q=se.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(J=se.tenantId)&&void 0!==J?J:null}static parseLink(d){const f=function dh(m){const d=(0,le.I9)((0,le.hp)(m)).link,f=d?(0,le.I9)((0,le.hp)(d)).deep_link_id:null,y=(0,le.I9)((0,le.hp)(m)).deep_link_id;return(y?(0,le.I9)((0,le.hp)(y)).link:null)||y||f||d||m}(d);try{return new Rl(f)}catch{return null}}}let un=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,y){return nc._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const w=Rl.parseLink(y);return oe(w,"argument-error"),nc._fromEmailAndCode(f,w.code,w.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class su{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class xl extends su{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ml extends xl{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return oe("providerId"in f&&"signInMethod"in f,"argument-error"),Wo._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return oe(d.idToken||d.accessToken,"argument-error"),Wo._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ml.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ml.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:w,pendingToken:S,nonce:q,providerId:J}=d;if(!y&&!w&&!f&&!S||!J)return null;try{return new Ml(J)._credential({idToken:f,accessToken:y,nonce:q,pendingToken:S})}catch{return null}}}let _P=(()=>{class m extends xl{constructor(){super("facebook.com")}static credential(f){return Wo._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),pT=(()=>{class m extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return Wo._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:w}=f;if(!y&&!w)return null;try{return m.credential(y,w)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Op=(()=>{class m extends xl{constructor(){super("github.com")}static credential(f){return Wo._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class ou extends ah{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return ho(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,ho(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ho(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:w,pendingToken:S}=f;return y&&w&&S&&y===w?new ou(y,S):null}static _create(d,f){return new ou(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pi extends su{constructor(d){oe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return pi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return pi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=ou.fromJSON(d);return oe(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:y}=d;if(!f||!y)return null;try{return ou._create(y,f)}catch{return null}}}let Ay=(()=>{class m extends xl{constructor(){super("twitter.com")}static credential(f,y){return Wo._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:w}=f;if(!y||!w)return null;try{return m.credential(y,w)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function yP(m,d){return mT.apply(this,arguments)}function mT(){return(mT=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signUp",re(m,d))})).apply(this,arguments)}class Pi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,y,w=!1){return(0,$.A)(function*(){const S=yield Y._fromIdTokenResponse(d,y,w),q=Vp(y);return new Pi({user:S,providerId:q,_tokenResponse:y,operationType:f})})()}static _forOperation(d,f,y){return(0,$.A)(function*(){yield d._updateTokensIfNecessary(y,!0);const w=Vp(y);return new Pi({user:d,providerId:w,_tokenResponse:y,operationType:f})})()}}function Vp(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Cy(){return(Cy=(0,$.A)(function*(m){var d;if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const f=An(m);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Pi({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield yP(f,{returnSecureToken:!0}),w=yield Pi._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(w.user),w})).apply(this,arguments)}class Lp extends le.g{constructor(d,f,y,w){var S;super(f.code,f.message),this.operationType=y,this.user=w,Object.setPrototypeOf(this,Lp.prototype),this.customData={appName:d.name,tenantId:null!==(S=d.tenantId)&&void 0!==S?S:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,f,y,w){return new Lp(d,f,y,w)}}function _T(m,d,f,y){return("reauthenticate"===d?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?Lp._fromErrorAndOperation(m,S,d,y):S})}function Dy(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Sy(){return Sy=(0,$.A)(function*(m,d){const f=(0,le.Ku)(m);yield Se(!0,f,d);const{providerUserInfo:y}=yield function Ju(m,d){return ao.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),w=Dy(y||[]);return f.providerData=f.providerData.filter(S=>w.has(S.providerId)),w.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Sy.apply(this,arguments)}function Ko(m,d){return Py.apply(this,arguments)}function Py(){return(Py=(0,$.A)(function*(m,d,f=!1){const y=yield fi(m,d._linkToIdToken(m.auth,yield m.getIdToken()),f);return Pi._forOperation(m,"link",y)})).apply(this,arguments)}function Se(m,d,f){return Up.apply(this,arguments)}function Up(){return(Up=(0,$.A)(function*(m,d,f){yield co(d);const w=!1===m?"provider-already-linked":"no-such-provider";oe(Dy(d.providerData).has(f)===m,d.auth,w)})).apply(this,arguments)}function Q(m,d){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,$.A)(function*(m,d,f=!1){const{auth:y}=m;if((0,$e._isFirebaseServerApp)(y.app))return Promise.reject(at(y));const w="reauthenticate";try{const S=yield fi(m,_T(y,w,d,m),f);oe(S.idToken,y,"internal-error");const q=qs(S.idToken);oe(q,y,"internal-error");const{sub:J}=q;return oe(m.uid===J,y,"user-mismatch"),Pi._forOperation(m,w,S)}catch(S){throw"auth/user-not-found"===S?.code&&hn(y,"user-mismatch"),S}})).apply(this,arguments)}function Bp(m,d){return rc.apply(this,arguments)}function rc(){return(rc=(0,$.A)(function*(m,d,f=!1){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y="signIn",w=yield _T(m,y,d),S=yield Pi._fromIdTokenResponse(m,y,w);return f||(yield m._updateCurrentUser(S.user)),S})).apply(this,arguments)}function jp(m,d){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,$.A)(function*(m,d){return Bp(An(m),d)})).apply(this,arguments)}function yT(m,d){return xy.apply(this,arguments)}function xy(){return(xy=(0,$.A)(function*(m,d){const f=(0,le.Ku)(m);return yield Se(!1,f,d.providerId),Ko(f,d)})).apply(this,arguments)}function Ol(m,d){return My.apply(this,arguments)}function My(){return(My=(0,$.A)(function*(m,d){return Q((0,le.Ku)(m),d)})).apply(this,arguments)}function ky(){return(ky=(0,$.A)(function*(m,d){return fn(m,"POST","/v1/accounts:signInWithCustomToken",re(m,d))})).apply(this,arguments)}function Ny(){return Ny=(0,$.A)(function*(m,d){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const f=An(m),y=yield function zp(m,d){return ky.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),w=yield Pi._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(w.user),w}),Ny.apply(this,arguments)}class oi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?au._fromServerResponse(d,f):"totpInfo"in f?$p._fromServerResponse(d,f):hn(d,"internal-error")}}class au extends oi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new au(f)}}class $p extends oi{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new $p(f)}}function sc(m,d,f){var y;oe((null===(y=f.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),oe(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(oe(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(oe(f.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Vl(m){return hh.apply(this,arguments)}function hh(){return(hh=(0,$.A)(function*(m){const d=An(m);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function qp(){return(qp=(0,$.A)(function*(m,d,f){const y=An(m),w={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&sc(y,w,f),yield Dn(y,w,"getOobCode",xp)})).apply(this,arguments)}function Hi(){return Hi=(0,$.A)(function*(m,d,f){yield oT((0,le.Ku)(m),{oobCode:d,newPassword:f}).catch(function(){var y=(0,$.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Vl(m),w});return function(w){return y.apply(this,arguments)}}())}),Hi.apply(this,arguments)}function uu(){return uu=(0,$.A)(function*(m,d){yield function _B(m,d){return cT.apply(this,arguments)}((0,le.Ku)(m),{oobCode:d})}),uu.apply(this,arguments)}function vP(m,d){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,$.A)(function*(m,d){const f=(0,le.Ku)(m),y=yield oT(f,{oobCode:d}),w=y.requestType;switch(oe(w,f,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(y.mfaInfo,f,"internal-error");default:oe(y.email,f,"internal-error")}let S=null;return y.mfaInfo&&(S=oi._fromServerResponse(An(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:S},operation:w}})).apply(this,arguments)}function Kt(){return(Kt=(0,$.A)(function*(m,d){const{data:f}=yield vP((0,le.Ku)(m),d);return f.email})).apply(this,arguments)}function Hp(){return(Hp=(0,$.A)(function*(m,d,f){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y=An(m),q=yield Dn(y,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yP).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&Vl(m),se}),J=yield Pi._fromIdTokenResponse(y,"signIn",q);return yield y._updateCurrentUser(J.user),J})).apply(this,arguments)}function Fl(){return(Fl=(0,$.A)(function*(m,d,f){const y=An(m),w={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function S(q,J){oe(J.handleCodeInApp,y,"argument-error"),J&&sc(y,q,J)})(w,f),yield Dn(y,w,"getOobCode",dT)})).apply(this,arguments)}function Fy(){return(Fy=(0,$.A)(function*(m,d,f){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y=(0,le.Ku)(m),w=un.credentialWithLink(d,f||dr());return oe(w._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),jp(y,w)})).apply(this,arguments)}function Kp(){return(Kp=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:createAuthUri",re(m,d))})).apply(this,arguments)}function oc(){return oc=(0,$.A)(function*(m,d){const y={identifier:d,continueUri:Kn()?dr():"http://localhost"},{signinMethods:w}=yield function Ly(m,d){return Kp.apply(this,arguments)}((0,le.Ku)(m),y);return w||[]}),oc.apply(this,arguments)}function Qp(){return Qp=(0,$.A)(function*(m,d){const f=(0,le.Ku)(m),w={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&sc(f.auth,w,d);const{email:S}=yield function vB(m,d){return Gs.apply(this,arguments)}(f.auth,w);S!==m.email&&(yield m.reload())}),Qp.apply(this,arguments)}function fh(){return fh=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};f&&sc(y.auth,S,f);const{email:q}=yield function Mp(m,d){return Pl.apply(this,arguments)}(y.auth,S);q!==m.email&&(yield m.reload())}),fh.apply(this,arguments)}function Uy(){return(Uy=(0,$.A)(function*(m,d){return pe(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function By(){return By=(0,$.A)(function*(m,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const y=(0,le.Ku)(m),S={idToken:yield y.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},q=yield fi(y,function EP(m,d){return Uy.apply(this,arguments)}(y.auth,S));y.displayName=q.displayName||null,y.photoURL=q.photoUrl||null;const J=y.providerData.find(({providerId:se})=>"password"===se);J&&(J.displayName=y.displayName,J.photoURL=y.photoURL),yield y._updateTokensIfNecessary(q)}),By.apply(this,arguments)}function wT(m,d,f){return jy.apply(this,arguments)}function jy(){return jy=(0,$.A)(function*(m,d,f){const{auth:y}=m,S={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(S.email=d),f&&(S.password=f);const q=yield fi(m,function gP(m,d){return uT.apply(this,arguments)}(y,S));yield m._updateTokensIfNecessary(q,!0)}),jy.apply(this,arguments)}class ac{constructor(d,f,y={}){this.isNewUser=d,this.providerId=f,this.profile=y}}class TT extends ac{constructor(d,f,y,w){super(d,f,y),this.username=w}}class bP extends ac{constructor(d,f){super(d,"facebook.com",f)}}class AP extends TT{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class $n extends ac{constructor(d,f){super(d,"google.com",f)}}class CP extends TT{constructor(d,f,y){super(d,"twitter.com",f,y)}}function DP(m){const{user:d,_tokenResponse:f}=m;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function TP(m){var d,f;if(!m)return null;const{providerId:y}=m,w=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},S=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const q=null===(f=null===(d=qs(m.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(q)return new ac(S,"anonymous"!==q&&"custom"!==q?q:null)}if(!y)return null;switch(y){case"facebook.com":return new bP(S,w);case"github.com":return new AP(S,w);case"google.com":return new $n(S,w);case"twitter.com":return new CP(S,w,m.screenName||null);case"custom":case"anonymous":return new ac(S,null);default:return new ac(S,y,w)}}(f)}class cc{constructor(d,f,y){this.type=d,this.credential=f,this.user=y}static _fromIdtoken(d,f){return new cc("enroll",d,f)}static _fromMfaPendingCredential(d){return new cc("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,y;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return cc._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(y=d.multiFactorSession)&&void 0!==y&&y.idToken)return cc._fromIdtoken(d.multiFactorSession.idToken)}return null}}class va{constructor(d,f,y){this.session=d,this.hints=f,this.signInResolver=y}static _fromError(d,f){const y=An(d),w=f.customData._serverResponse,S=(w.mfaInfo||[]).map(J=>oi._fromServerResponse(y,J));oe(w.mfaPendingCredential,y,"internal-error");const q=cc._fromMfaPendingCredential(w.mfaPendingCredential);return new va(q,S,function(){var J=(0,$.A)(function*(se){const Me=yield se._process(y,q);delete w.mfaInfo,delete w.mfaPendingCredential;const He=Object.assign(Object.assign({},w),{idToken:Me.idToken,refreshToken:Me.refreshToken});switch(f.operationType){case"signIn":const Ge=yield Pi._fromIdTokenResponse(y,f.operationType,He);return yield y._updateCurrentUser(Ge.user),Ge;case"reauthenticate":return oe(f.user,y,"internal-error"),Pi._forOperation(f.user,f.operationType,He);default:hn(y,"internal-error")}});return function(se){return J.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,$.A)(function*(){return f.signInResolver(d)})()}}class Wy{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>oi._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new Wy(d)}getSession(){var d=this;return(0,$.A)(function*(){return cc._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var y=this;return(0,$.A)(function*(){const w=d,S=yield y.getSession(),q=yield fi(y.user,w._process(y.user.auth,S,f));return yield y.user._updateTokensIfNecessary(q),y.user.reload()})()}unenroll(d){var f=this;return(0,$.A)(function*(){const y="string"==typeof d?d:d.uid,w=yield f.user.getIdToken();try{const S=yield fi(f.user,function Hy(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:withdraw",re(m,d))}(f.user.auth,{idToken:w,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:q})=>q!==y),yield f.user._updateTokensIfNecessary(S),yield f.user.reload()}catch(S){throw S}})()}}const ph=new WeakMap,gh="__sak";class du{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yp=(()=>{class m extends du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oh(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const w=this.storage.getItem(y),S=this.localCache[y];w!==S&&f(y,S,w)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((J,se,Me)=>{this.notifyListeners(J,Me)});const w=f.key;y?this.detachListener():this.stopPolling();const S=()=>{const J=this.storage.getItem(w);!y&&this.localCache[w]===J||this.notifyListeners(w,J)},q=this.storage.getItem(w);!function ru(){return(0,le.lT)()&&10===document.documentMode}()||q===f.newValue||f.newValue===f.oldValue?S():setTimeout(S,10)}notifyListeners(f,y){this.localCache[f]=y;const w=this.listeners[f];if(w)for(const S of Array.from(w))S(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var w=()=>super._set,S=this;return(0,$.A)(function*(){yield w().call(S,f,y),S.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,w=this;return(0,$.A)(function*(){const S=yield y().call(w,f);return w.localCache[f]=JSON.stringify(S),S})()}_remove(f){var y=()=>super._remove,w=this;return(0,$.A)(function*(){yield y().call(w,f),delete w.localCache[f]})()}}return m.type="LOCAL",m})(),mo=(()=>{class m extends du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return m.type="SESSION",m})();let Ll=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(S=>S.isListeningto(f));if(y)return y;const w=new m(f);return this.receivers.push(w),w}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,$.A)(function*(){const w=f,{eventId:S,eventType:q,data:J}=w.data,se=y.handlersMap[q];if(!se?.size)return;w.ports[0].postMessage({status:"ack",eventId:S,eventType:q});const Me=Array.from(se).map(function(){var Ge=(0,$.A)(function*(On){return On(w.origin,J)});return function(On){return Ge.apply(this,arguments)}}()),He=yield function Ki(m){return Promise.all(m.map(function(){var d=(0,$.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return d.apply(this,arguments)}}()))}(Me);w.ports[0].postMessage({status:"done",eventId:S,eventType:q,response:He})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function lc(m="",d=10){let f="";for(let y=0;y<d;y++)f+=Math.floor(10*Math.random());return m+f}class MP{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,y=50){var w=this;return(0,$.A)(function*(){const S=typeof MessageChannel<"u"?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let q,J;return new Promise((se,Me)=>{const He=lc("",20);S.port1.start();const Ge=setTimeout(()=>{Me(new Error("unsupported_event"))},y);J={messageChannel:S,onMessage(On){const Eo=On;if(Eo.data.eventId===He)switch(Eo.data.status){case"ack":clearTimeout(Ge),q=setTimeout(()=>{Me(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),se(Eo.data.response);break;default:clearTimeout(Ge),clearTimeout(q),Me(new Error("invalid_response"))}}},w.handlers.add(J),S.port1.addEventListener("message",J.onMessage),w.target.postMessage({eventType:d,eventId:He,data:f},[S.port2])}).finally(()=>{J&&w.removeMessageHandler(J)})})()}}function Nr(){return window}function hu(){return typeof Nr().WorkerGlobalScope<"u"&&"function"==typeof Nr().importScripts}function Yy(){return(Yy=(0,$.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _o="firebaseLocalStorageDb",Ul="firebaseLocalStorage",dc="fbase_key";class mh{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Jp(m,d){return m.transaction([Ul],d?"readwrite":"readonly").objectStore(Ul)}function Xp(){const m=indexedDB.open(_o,1);return new Promise((d,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Ul,{keyPath:dc})}catch(w){f(w)}}),m.addEventListener("success",(0,$.A)(function*(){const y=m.result;y.objectStoreNames.contains(Ul)?d(y):(y.close(),yield function qr(){const m=indexedDB.deleteDatabase(_o);return new mh(m).toPromise()}(),d(yield Xp()))}))})}function RT(m,d,f){return hc.apply(this,arguments)}function hc(){return(hc=(0,$.A)(function*(m,d,f){const y=Jp(m,!0).put({[dc]:d,value:f});return new mh(y).toPromise()})).apply(this,arguments)}function Xy(){return(Xy=(0,$.A)(function*(m,d){const f=Jp(m,!1).get(d),y=yield new mh(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function xT(m,d){const f=Jp(m,!0).delete(d);return new mh(f).toPromise()}const fu=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,$.A)(function*(){return f.db||(f.db=yield Xp()),f.db})()}_withRetries(f){var y=this;return(0,$.A)(function*(){let w=0;for(;;)try{const S=yield y._openDb();return yield f(S)}catch(S){if(w++>3)throw S;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,$.A)(function*(){return hu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,$.A)(function*(){f.receiver=Ll._getInstance(function Jy(){return hu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,$.A)(function*(w,S){return{keyProcessed:(yield f._poll()).includes(S.key)}});return function(w,S){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,$.A)(function*(w,S){return["keyChanged"]});return function(w,S){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,$.A)(function*(){var y,w;if(f.activeServiceWorker=yield function kP(){return Yy.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new MP(f.activeServiceWorker);const S=yield f.sender._send("ping",{},800);S&&null!==(y=S[0])&&void 0!==y&&y.fulfilled&&null!==(w=S[0])&&void 0!==w&&w.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,$.A)(function*(){if(y.sender&&y.activeServiceWorker&&function NP(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,$.A)(function*(){try{if(!indexedDB)return!1;const f=yield Xp();return yield RT(f,gh,"1"),yield xT(f,gh),!0}catch{}return!1})()}_withPendingWrite(f){var y=this;return(0,$.A)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var w=this;return(0,$.A)(function*(){return w._withPendingWrite((0,$.A)(function*(){return yield w._withRetries(S=>RT(S,f,y)),w.localCache[f]=y,w.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,$.A)(function*(){const w=yield y._withRetries(S=>function OP(m,d){return Xy.apply(this,arguments)}(S,f));return y.localCache[f]=w,w})()}_remove(f){var y=this;return(0,$.A)(function*(){return y._withPendingWrite((0,$.A)(function*(){return yield y._withRetries(w=>xT(w,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,$.A)(function*(){const y=yield f._withRetries(q=>{const J=Jp(q,!1).getAll();return new mh(J).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const w=[],S=new Set;if(0!==y.length)for(const{fbase_key:q,value:J}of y)S.add(q),JSON.stringify(f.localCache[q])!==JSON.stringify(J)&&(f.notifyListeners(q,J),w.push(q));for(const q of Object.keys(f.localCache))f.localCache[q]&&!S.has(q)&&(f.notifyListeners(q,null),w.push(q));return w})()}notifyListeners(f,y){this.localCache[f]=y;const w=this.listeners[f];if(w)for(const S of Array.from(w))S(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,$.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),ls=1e12;class mi{constructor(d){this.auth=d,this.counter=ls,this._widgets=new Map}render(d,f){const y=this.counter;return this._widgets.set(y,new Qi(d,this.auth.name,f||{})),this.counter++,y}reset(d){var f;const y=d||ls;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(d){var f;return(null===(f=this._widgets.get(d||ls))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,$.A)(function*(){var y;return null===(y=f._widgets.get(d||ls))||void 0===y||y.execute(),""})()}}class Qi{constructor(d,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof d?document.getElementById(d):d;oe(w,"argument-error",{appName:f}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bl(m){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nn=Cn("rcb"),Vr=new hi(3e4,6e4);class Yo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Nr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return oe(function mt(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&an(Nr().grecaptcha)?Promise.resolve(Nr().grecaptcha):new Promise((y,w)=>{const S=Nr().setTimeout(()=>{w(Jt(d,"network-request-failed"))},Vr.get());Nr()[Nn]=()=>{Nr().clearTimeout(S),delete Nr()[Nn];const J=Nr().grecaptcha;if(!J||!an(J))return void w(Jt(d,"internal-error"));const se=J.render;J.render=(Me,He)=>{const Ge=se(Me,He);return this.counter++,Ge},this.hostLanguage=f,y(J)},iT(`${function Qn(){return tc.recaptchaV2Script}()}?${(0,le.Am)({onload:Nn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(S),w(Jt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Nr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _h{load(d){return(0,$.A)(function*(){return new mi(d)})()}clearedOneInstance(){}}const Zy="recaptcha",jl={theme:"light",type:"image"};class rr{constructor(d,f,y=Object.assign({},jl)){this.parameters=y,this.type=Zy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(d),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof f?document.getElementById(f):f;oe(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _h:new Yo,this.validateStartingState()}verify(){var d=this;return(0,$.A)(function*(){d.assertNotDestroyed();const f=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(f)||new Promise(S=>{const q=J=>{J&&(d.tokenChangeListeners.delete(q),S(J))};d.tokenChangeListeners.add(q),d.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof d)d(f);else if("string"==typeof d){const y=Nr()[d];"function"==typeof y&&y(f)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,$.A)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,$.A)(function*(){oe(Kn()&&!hu(),d.auth,"internal-error"),yield function fc(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function cs(m){return tu.apply(this,arguments)}(d.auth);oe(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pu{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=iu._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function gu(){return(gu=(0,$.A)(function*(m,d,f){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y=An(m),w=yield Ye(y,d,(0,le.Ku)(f));return new pu(w,S=>jp(y,S))})).apply(this,arguments)}function Jo(){return(Jo=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);yield Se(!1,y,"phone");const w=yield Ye(y.auth,d,(0,le.Ku)(f));return new pu(w,S=>yT(y,S))})).apply(this,arguments)}function ds(){return(ds=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);if((0,$e._isFirebaseServerApp)(y.auth.app))return Promise.reject(at(y.auth));const w=yield Ye(y.auth,d,(0,le.Ku)(f));return new pu(w,S=>Ol(y,S))})).apply(this,arguments)}function Ye(m,d,f){return yh.apply(this,arguments)}function yh(){return yh=(0,$.A)(function*(m,d,f){var y;const w=yield f.verify();try{let S;if(oe("string"==typeof w,m,"argument-error"),oe(f.type===Zy,m,"argument-error"),S="string"==typeof d?{phoneNumber:d}:d,"session"in S){const q=S.session;if("phoneNumber"in S)return oe("enroll"===q.type,m,"internal-error"),(yield function qy(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:start",re(m,d))}(m,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{oe("signin"===q.type,m,"internal-error");const J=(null===(y=S.multiFactorHint)||void 0===y?void 0:y.uid)||S.multiFactorUid;return oe(J,m,"missing-multi-factor-info"),(yield function Zp(m,d){return pe(m,"POST","/v2/accounts/mfaSignIn:start",re(m,d))}(m,{mfaPendingCredential:q.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function Ty(m,d){return hT.apply(this,arguments)}(m,{phoneNumber:S.phoneNumber,recaptchaToken:w});return q}}finally{f._reset()}}),yh.apply(this,arguments)}function Hs(){return(Hs=(0,$.A)(function*(m,d){const f=(0,le.Ku)(m);if((0,$e._isFirebaseServerApp)(f.auth.app))return Promise.reject(at(f.auth));yield Ko(f,d)})).apply(this,arguments)}let mu=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=An(f)}verifyPhoneNumber(f,y){return Ye(this.auth,f,(0,le.Ku)(y))}static credential(f,y){return iu._fromVerification(f,y)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:w}=f;return y&&w?iu._fromTokenResponse(y,w):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ws(m,d){return d?Ne(d):(oe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class fr extends ah{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ho(d,this._buildIdpRequest())}_linkToIdToken(d,f){return ho(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return ho(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function tg(m){return Bp(m.auth,new fr(m),m.bypassAuthState)}function Gr(m){const{auth:d,user:f}=m;return oe(f,d,"internal-error"),Q(f,new fr(m),m.bypassAuthState)}function xi(m){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,$.A)(function*(m){const{auth:d,user:f}=m;return oe(f,d,"internal-error"),Ko(f,new fr(m),m.bypassAuthState)})).apply(this,arguments)}class _u{constructor(d,f,y,w,S=!1){this.auth=d,this.resolver=y,this.user=w,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,$.A)(function*(y,w){d.pendingPromise={resolve:y,reject:w};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(S){d.reject(S)}});return function(y,w){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,$.A)(function*(){const{urlResponse:y,sessionId:w,postBody:S,tenantId:q,error:J,type:se}=d;if(J)return void f.reject(J);const Me={auth:f.auth,requestUri:y,sessionId:w,tenantId:q||void 0,postBody:S||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(se)(Me))}catch(He){f.reject(He)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return tg;case"linkViaPopup":case"linkViaRedirect":return xi;case"reauthViaPopup":case"reauthViaRedirect":return Gr;default:hn(this.auth,"internal-error")}}resolve(d){Xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ng=new hi(2e3,1e4);function pc(){return(pc=(0,$.A)(function*(m,d,f){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(Jt(m,"operation-not-supported-in-this-environment"));const y=An(m);Re(m,d,su);const w=Ws(y,f);return new nv(y,"signInViaPopup",d,w).executeNotNull()})).apply(this,arguments)}function ev(){return(ev=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);if((0,$e._isFirebaseServerApp)(y.auth.app))return Promise.reject(Jt(y.auth,"operation-not-supported-in-this-environment"));Re(y.auth,d,su);const w=Ws(y.auth,f);return new nv(y.auth,"reauthViaPopup",d,w,y).executeNotNull()})).apply(this,arguments)}function rg(){return(rg=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);Re(y.auth,d,su);const w=Ws(y.auth,f);return new nv(y.auth,"linkViaPopup",d,w,y).executeNotNull()})).apply(this,arguments)}let nv=(()=>{class m extends _u{constructor(f,y,w,S,q){super(f,y,S,q),this.provider=w,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,$.A)(function*(){const y=yield f.execute();return oe(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,$.A)(function*(){Xt(1===f.filter.length,"Popup operations only handle one event");const y=lc();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(w=>{f.reject(w)}),f.resolver._isIframeWebStorageSupported(f.auth,w=>{w||f.reject(Jt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,w;this.pollId=null!==(w=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,ng.get())};f()}}return m.currentPopupAction=null,m})();const rv="pendingRedirect",ig=new Map;class CB extends _u{constructor(d,f,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,$.A)(function*(){let y=ig.get(f.auth._key());if(!y){try{const S=(yield function DB(m,d){return NT.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;y=()=>Promise.resolve(S)}catch(w){y=()=>Promise.reject(w)}ig.set(f.auth._key(),y)}return f.bypassAuthState||ig.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,y=this;return(0,$.A)(function*(){if("signInViaRedirect"===d.type)return f().call(y,d);if("unknown"!==d.type){if(d.eventId){const w=yield y.auth._redirectUserForId(d.eventId);if(w)return y.user=w,f().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,$.A)(function*(){})()}cleanUp(){}}function NT(){return(NT=(0,$.A)(function*(m,d){const f=UP(d),y=LP(m);if(!(yield y._isAvailable()))return!1;const w="true"===(yield y._get(f));return yield y._remove(f),w})).apply(this,arguments)}function OT(m,d){return VT.apply(this,arguments)}function VT(){return(VT=(0,$.A)(function*(m,d){return LP(m)._set(UP(d),"true")})).apply(this,arguments)}function FT(m,d){ig.set(m._key(),d)}function LP(m){return Ne(m._redirectPersistence)}function UP(m){return jn(rv,m.config.apiKey,m.name)}function PB(m,d,f){return function RB(m,d,f){return sg.apply(this,arguments)}(m,d,f)}function sg(){return(sg=(0,$.A)(function*(m,d,f){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y=An(m);Re(m,d,su),yield y._initializationPromise;const w=Ws(y,f);return yield OT(w,y),w._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function LT(m,d,f){return function xB(m,d,f){return UT.apply(this,arguments)}(m,d,f)}function UT(){return(UT=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);if(Re(y.auth,d,su),(0,$e._isFirebaseServerApp)(y.auth.app))return Promise.reject(at(y.auth));yield y.auth._initializationPromise;const w=Ws(y.auth,f);yield OT(w,y.auth);const S=yield jT(y);return w._openRedirect(y.auth,d,"reauthViaRedirect",S)})).apply(this,arguments)}function MB(m,d,f){return function kB(m,d,f){return iv.apply(this,arguments)}(m,d,f)}function iv(){return(iv=(0,$.A)(function*(m,d,f){const y=(0,le.Ku)(m);Re(y.auth,d,su),yield y.auth._initializationPromise;const w=Ws(y.auth,f);yield Se(!1,y,d.providerId),yield OT(w,y.auth);const S=yield jT(y);return w._openRedirect(y.auth,d,"linkViaRedirect",S)})).apply(this,arguments)}function Mi(){return(Mi=(0,$.A)(function*(m,d){return yield An(m)._initializationPromise,Eh(m,d,!1)})).apply(this,arguments)}function Eh(m,d){return sv.apply(this,arguments)}function sv(){return(sv=(0,$.A)(function*(m,d,f=!1){if((0,$e._isFirebaseServerApp)(m.app))return Promise.reject(at(m));const y=An(m),w=Ws(y,d),q=yield new CB(y,w,f).execute();return q&&!f&&(delete q.user._redirectEventId,yield y._persistUserIfCurrent(q.user),yield y._setRedirectUser(null,d)),q})).apply(this,arguments)}function jT(m){return og.apply(this,arguments)}function og(){return(og=(0,$.A)(function*(m){const d=lc(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class $T{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(f=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Xo(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qT(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var y;if(d.error&&!qT(d)){const w=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(Jt(this.auth,w))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const y=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ag(d))}saveEventToCache(d){this.cachedEventUids.add(ag(d)),this.lastProcessedEventTime=Date.now()}}function ag(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function qT({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function ov(m){return ug.apply(this,arguments)}function ug(){return(ug=(0,$.A)(function*(m,d={}){return pe(m,"GET","/v1/projects",d)})).apply(this,arguments)}const cn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,av=/^https?/;function _i(){return(_i=(0,$.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield ov(m);for(const f of d)try{if(BP(f))return}catch{}hn(m,"unauthorized-domain")})).apply(this,arguments)}function BP(m){const d=dr(),{protocol:f,hostname:y}=new URL(d);if(m.startsWith("chrome-extension://")){const q=new URL(m);return""===q.hostname&&""===y?"chrome-extension:"===f&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&q.hostname===y}if(!av.test(f))return!1;if(cn.test(m))return y===m;const w=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(y)}const Th=new hi(3e4,6e4);function yu(){const m=Nr().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let cg=null;const jP=new hi(5e3,15e3),Ks="__/auth/iframe",GT="emulator/auth/iframe",HT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lg(m){const d=m.config;oe(d.authDomain,m,"auth-domain-config-required");const f=d.emulator?eu(d,GT):`https://${m.config.authDomain}/${Ks}`,y={apiKey:d.apiKey,appName:m.name,v:$e.SDK_VERSION},w=WT.get(m.config.apiHost);w&&(y.eid=w);const S=m._getFrameworks();return S.length&&(y.fw=S.join(",")),`${f}?${(0,le.Am)(y).slice(1)}`}function zl(){return zl=(0,$.A)(function*(m){const d=yield function uv(m){return cg=cg||function xs(m){return new Promise((d,f)=>{var y,w,S;function q(){yu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{yu(),f(Jt(m,"network-request-failed"))},timeout:Th.get()})}if(null!==(w=null===(y=Nr().gapi)||void 0===y?void 0:y.iframes)&&void 0!==w&&w.Iframe)d(gapi.iframes.getContext());else{if(null===(S=Nr().gapi)||void 0===S||!S.load){const J=Cn("iframefcb");return Nr()[J]=()=>{gapi.load?q():f(Jt(m,"network-request-failed"))},iT(`${function fB(){return tc.gapiScript}()}?onload=${J}`).catch(se=>f(se))}q()}}).catch(d=>{throw cg=null,d})}(m),cg}(m),f=Nr().gapi;return oe(f,m,"internal-error"),d.open({where:document.body,url:lg(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HT,dontclear:!0},y=>new Promise(function(){var w=(0,$.A)(function*(S,q){yield y.restyle({setHideOnLeave:!1});const J=Jt(m,"network-request-failed"),se=Nr().setTimeout(()=>{q(J)},jP.get());function Me(){Nr().clearTimeout(se),S(y)}y.ping(Me).then(Me,()=>{q(J)})});return function(S,q){return w.apply(this,arguments)}}()))}),zl.apply(this,arguments)}const dg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fg{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zP="__/auth/handler",$P="emulator/auth/handler",qP=encodeURIComponent("fac");function pg(m,d,f,y,w,S){return wa.apply(this,arguments)}function wa(){return(wa=(0,$.A)(function*(m,d,f,y,w,S){oe(m.config.authDomain,m,"auth-domain-config-required"),oe(m.config.apiKey,m,"invalid-api-key");const q={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:y,v:$e.SDK_VERSION,eventId:w};if(d instanceof su){d.setDefaultLanguage(m.languageCode),q.providerId=d.providerId||"",(0,le.Im)(d.getCustomParameters())||(q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[He,Ge]of Object.entries(S||{}))q[He]=Ge}if(d instanceof xl){const He=d.getScopes().filter(Ge=>""!==Ge);He.length>0&&(q.scopes=He.join(","))}m.tenantId&&(q.tid=m.tenantId);const J=q;for(const He of Object.keys(J))void 0===J[He]&&delete J[He];const se=yield m._getAppCheckToken(),Me=se?`#${qP}=${encodeURIComponent(se)}`:"";return`${function GP({config:m}){return m.emulator?eu(m,$P):`https://${m.authDomain}/${zP}`}(m)}?${(0,le.Am)(J).slice(1)}${Me}`})).apply(this,arguments)}const dv="webStorageSupport",QT=class HP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Eh,this._overrideRedirectResult=FT}_openPopup(d,f,y,w){var S=this;return(0,$.A)(function*(){var q;Xt(null===(q=S.eventManagers[d._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const J=yield pg(d,f,y,dr(),w);return function KT(m,d,f,y=500,w=600){const S=Math.max((window.screen.availHeight-w)/2,0).toString(),q=Math.max((window.screen.availWidth-y)/2,0).toString();let J="";const se=Object.assign(Object.assign({},dg),{width:y.toString(),height:w.toString(),top:S,left:q}),Me=(0,le.ZQ)().toLowerCase();f&&(J=ga(Me)?"_blank":f),lo(Me)&&(d=d||"http://localhost",se.scrollbars="yes");const He=Object.entries(se).reduce((On,[Eo,Rh])=>`${On}${Eo}=${Rh},`,"");if(function ye(m=(0,le.ZQ)()){var d;return Dp(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Me)&&"_self"!==J)return function NB(m,d){const f=document.createElement("a");f.href=m,f.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(d||"",J),new fg(null);const Ge=window.open(d||"",J,He);oe(Ge,m,"popup-blocked");try{Ge.focus()}catch{}return new fg(Ge)}(d,J,lc())})()}_openRedirect(d,f,y,w){var S=this;return(0,$.A)(function*(){return yield S._originValidation(d),function ST(m){Nr().location.href=m}(yield pg(d,f,y,dr(),w)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:w,promise:S}=this.eventManagers[f];return w?Promise.resolve(w):(Xt(S,"If manager is not set, promise should be"),S)}const y=this.initAndGetManager(d);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(d){var f=this;return(0,$.A)(function*(){const y=yield function cv(m){return zl.apply(this,arguments)}(d),w=new $T(d);return y.register("authEvent",S=>(oe(S?.authEvent,d,"invalid-auth-event"),{status:w.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:w},f.iframes[d._key()]=y,w})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(dv,{type:dv},w=>{var S;const q=null===(S=w?.[0])||void 0===S?void 0:S[dv];void 0!==q&&f(!!q),hn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function wh(m){return _i.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return oh()||ec()||Dp()}};class YT{constructor(d){this.factorId=d}_process(d,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,y);case"signin":return this._finalizeSignIn(d,f.credential);default:return Rt("unexpected MultiFactorSessionType")}}}class he extends YT{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new he(d)}_finalizeEnroll(d,f,y){return function AT(m,d){return pe(m,"POST","/v2/accounts/mfaEnrollment:finalize",re(m,d))}(d,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function nr(m,d){return pe(m,"POST","/v2/accounts/mfaSignIn:finalize",re(m,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mt=(()=>{class m{constructor(){}static assertion(f){return he._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var $l="@firebase/auth";class hv{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,$.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(y=>{d(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ji(){return window}(0,le.XA)("authIdTokenMaxAge"),function Sl(m){tc=m}({loadJS:m=>new Promise((d,f)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=d,y.onerror=w=>{const S=Jt("internal-error");S.customData=w,f(S)},y.type="text/javascript",y.charset="UTF-8",function Yi(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function JT(m){(0,$e._registerComponent)(new Wn.uA("auth",(d,{options:f})=>{const y=d.getProvider("app").getImmediate(),w=d.getProvider("heartbeat"),S=d.getProvider("app-check-internal"),{apiKey:q,authDomain:J}=y.options;oe(q&&!q.includes(":"),"invalid-api-key",{appName:y.name});const se={apiKey:q,authDomain:J,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gy(m)},Me=new Dl(y,w,S,se);return function hP(m,d){const f=d?.persistence||[],y=(Array.isArray(f)?f:[f]).map(Ne);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(y,d?.popupRedirectResolver)}(Me,f),Me},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,y)=>{d.getProvider("auth-internal").initialize()})),(0,$e._registerComponent)(new Wn.uA("auth-internal",d=>{const f=An(d.getProvider("auth").getImmediate());return new hv(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)($l,"1.7.9",function fv(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,$e.registerVersion)($l,"1.7.9","esm2017")}("Browser");function Io(){return Io=(0,$.A)(function*(m,d,f){var y;const{BuildInfo:w}=Ji();Xt(d.sessionId,"AuthEvent did not contain a session ID");const S=yield function mv(m){return ql.apply(this,arguments)}(d.sessionId),q={};return Dp()?q.ibi=w.packageName:Al()?q.apn=w.packageName:hn(m,"operation-not-supported-in-this-environment"),w.displayName&&(q.appDisplayName=w.displayName),q.sessionId=S,pg(m,f,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,q)}),Io.apply(this,arguments)}function gg(){return(gg=(0,$.A)(function*(m){const{BuildInfo:d}=Ji(),f={};Dp()?f.iosBundleId=d.packageName:Al()?f.androidPackageName=d.packageName:hn(m,"operation-not-supported-in-this-environment"),yield ov(m,f)})).apply(this,arguments)}function Ah(){return(Ah=(0,$.A)(function*(m,d,f){const{cordova:y}=Ji();let w=()=>{};try{yield new Promise((S,q)=>{let J=null;function se(){var Ge;S();const On=null===(Ge=y.plugins.browsertab)||void 0===Ge?void 0:Ge.close;"function"==typeof On&&On(),"function"==typeof f?.close&&f.close()}function Me(){J||(J=window.setTimeout(()=>{q(Jt(m,"redirect-cancelled-by-user"))},2e3))}function He(){"visible"===document?.visibilityState&&Me()}d.addPassiveListener(se),document.addEventListener("resume",Me,!1),Al()&&document.addEventListener("visibilitychange",He,!1),w=()=>{d.removePassiveListener(se),document.removeEventListener("resume",Me,!1),document.removeEventListener("visibilitychange",He,!1),J&&window.clearTimeout(J)}})}finally{w()}})).apply(this,arguments)}function ql(){return(ql=(0,$.A)(function*(m){const d=function JP(m){if(Xt(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),f=new Uint8Array(d);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return f}(m),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(w=>w.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class _v extends $T{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInitialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInitialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,$.A)(function*(){yield d.initPromise})()}}function yv(m){return mg.apply(this,arguments)}function mg(){return(mg=(0,$.A)(function*(m){const d=yield Hr()._get(Ta(m));return d&&(yield Hr()._remove(Ta(m))),d})).apply(this,arguments)}function XP(){const m=[];for(let f=0;f<20;f++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function Hr(){return Ne(Yp)}function Ta(m){return jn("authEvent",m.config.apiKey,m.name)}function _g(m){if(!m?.includes("?"))return{};const[d,...f]=m.split("?");return(0,le.I9)(f.join("?"))}const rb=class tR{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eh,this._overrideRedirectResult=FT}_initialize(d){var f=this;return(0,$.A)(function*(){const y=d._key();let w=f.eventManagers.get(y);return w||(w=new _v(d),f.eventManagers.set(y,w),f.attachCallbackListeners(d,w)),w})()}_openPopup(d){hn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,y,w){var S=this;return(0,$.A)(function*(){!function gv(m){var d,f,y,w,S,q,J,se,Me,He;const Ge=Ji();oe("function"==typeof(null===(d=Ge?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(f=Ge?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(S=null===(w=null===(y=Ge?.cordova)||void 0===y?void 0:y.plugins)||void 0===w?void 0:w.browsertab)||void 0===S?void 0:S.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(se=null===(J=null===(q=Ge?.cordova)||void 0===q?void 0:q.plugins)||void 0===J?void 0:J.browsertab)||void 0===se?void 0:se.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(He=null===(Me=Ge?.cordova)||void 0===Me?void 0:Me.InAppBrowser)||void 0===He?void 0:He.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const q=yield S._initialize(d);yield q.initialized(),q.resetRedirect(),function SB(){ig.clear()}(),yield S._originValidation(d);const J=function tb(m,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:XP(),postBody:null,tenantId:m.tenantId,error:Jt(m,"no-auth-event")}}(d,y,w);yield function nb(m,d){return Hr()._set(Ta(m),d)}(d,J);const se=yield function vo(m,d,f){return Io.apply(this,arguments)}(d,J,f),Me=yield function QP(m){const{cordova:d}=Ji();return new Promise(f=>{d.plugins.browsertab.isAvailable(y=>{let w=null;y?d.plugins.browsertab.openUrl(m):w=d.InAppBrowser.open(m,function rT(m=(0,le.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(w)})})}(se);return function YP(m,d,f){return Ah.apply(this,arguments)}(d,q,Me)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function KP(m){return gg.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:y,handleOpenURL:w,BuildInfo:S}=Ji(),q=setTimeout((0,$.A)(function*(){yield yv(d),f.onEvent(Iv())}),500),J=function(){var He=(0,$.A)(function*(Ge){clearTimeout(q);const On=yield yv(d);let Eo=null;On&&Ge?.url&&(Eo=function vv(m,d){var f,y;const w=function ZP(m){const d=_g(m),f=d.link?decodeURIComponent(d.link):void 0,y=_g(f).link,w=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return _g(w).link||w||y||f||m}(d);if(w.includes("/__/auth/callback")){const S=_g(w),q=S.firebaseError?function qn(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(S.firebaseError)):null,J=null===(y=null===(f=q?.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],se=J?Jt(J):null;return se?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:se,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:w,postBody:null}}return null}(On,Ge.url)),f.onEvent(Eo||Iv())});return function(On){return He.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,J);const se=w,Me=`${S.packageName.toLowerCase()}://`;Ji().handleOpenURL=function(){var He=(0,$.A)(function*(Ge){if(Ge.toLowerCase().startsWith(Me)&&J({url:Ge}),"function"==typeof se)try{se(Ge)}catch(On){console.error(On)}});return function(Ge){return He.apply(this,arguments)}}()}};function Iv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jt("no-auth-event")}}function vu(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Ig(m=(0,le.ZQ)()){return!("file:"!==vu()&&"ionic:"!==vu()&&"capacitor:"!==vu()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hl(){try{const m=self.localStorage,d=lc();if(m)return m.setItem(d,"1"),m.removeItem(d),!function Gl(m=(0,le.ZQ)()){return function sb(){return(0,le.lT)()&&11===document?.documentMode}()||function rR(m=(0,le.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,le.zW)()}catch{return Ev()&&(0,le.zW)()}return!1}function Ev(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dh(){return(function vg(){return"http:"===vu()||"https:"===vu()}()||(0,le.sr)()||Ig())&&!function ib(){return(0,le.lV)()||(0,le.Ll)()}()&&Hl()&&!Ev()}function wv(){return Ig()&&typeof document<"u"}function Tv(){return(Tv=(0,$.A)(function*(){return!!wv()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const Ys={LOCAL:"local",NONE:"none",SESSION:"session"},Eg=oe,wg="persistence";function Sh(m){return mc.apply(this,arguments)}function mc(){return(mc=(0,$.A)(function*(m){yield m._initializationPromise;const d=Wl(),f=jn(wg,m.config.apiKey,m.name);d&&d.setItem(f,m._getPersistence())})).apply(this,arguments)}function Wl(){var m;try{return(null===(m=function sR(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const aR=oe;class ea{constructor(){this.browserResolver=Ne(QT),this.cordovaResolver=Ne(rb),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=Eh,this._overrideRedirectResult=FT}_initialize(d){var f=this;return(0,$.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,y,w){var S=this;return(0,$.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openPopup(d,f,y,w)})()}_openRedirect(d,f,y,w){var S=this;return(0,$.A)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openRedirect(d,f,y,w)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return wv()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aR(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,$.A)(function*(){if(d.underlyingResolver)return;const f=yield function iR(){return Tv.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Ph(m){return m.unwrap()}function ob(m){return ub(m)}function ub(m){const{_tokenResponse:d}=m instanceof le.g?m.customData:m;if(!d)return null;if(!(m instanceof le.g)&&"temporaryProof"in d&&"phoneNumber"in d)return mu.credentialFromResult(m);const f=d.providerId;if(!f||f===$t.PASSWORD)return null;let y;switch(f){case $t.GOOGLE:y=pT;break;case $t.FACEBOOK:y=_P;break;case $t.GITHUB:y=Op;break;case $t.TWITTER:y=Ay;break;default:const{oauthIdToken:w,oauthAccessToken:S,oauthTokenSecret:q,pendingToken:J,nonce:se}=d;return S||q||w||J?J?f.startsWith("saml.")?ou._create(f,J):Wo._fromParams({providerId:f,signInMethod:f,pendingToken:J,idToken:w,accessToken:S}):new Ml(f).credential({idToken:w,accessToken:S,rawNonce:se}):null}return m instanceof le.g?y.credentialFromError(m):y.credentialFromResult(m)}function pr(m,d){return d.catch(f=>{throw f instanceof le.g&&function ab(m,d){var f;const y=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Av(m,function bT(m,d){var f;const y=(0,le.Ku)(m),w=d;return oe(d.customData.operationType,y,"argument-error"),oe(null===(f=w.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),va._fromError(y,w)}(m,d));else if(y){const w=ub(d),S=d;w&&(S.credential=w,S.tenantId=y.tenantId||void 0,S.email=y.email||void 0,S.phoneNumber=y.phoneNumber||void 0)}}(m,f),f}).then(f=>{const w=f.user;return{operationType:f.operationType,credential:ob(f),additionalUserInfo:DP(f),user:ta.getOrCreate(w)}})}function bv(m,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,$.A)(function*(m,d){const f=yield d;return{verificationId:f.verificationId,confirm:y=>pr(m,f.confirm(y))}})).apply(this,arguments)}class Av{constructor(d,f){this.resolver=f,this.auth=function FB(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return pr(Ph(this.auth),this.resolver.resolveSignIn(d))}}class ta{constructor(d){this._delegate=d,this.multiFactor=function CT(m){const d=(0,le.Ku)(m);return ph.has(d)||ph.set(d,Wy._fromUser(d)),ph.get(d)}(d)}static getOrCreate(d){return ta.USER_MAP.has(d)||ta.USER_MAP.set(d,new ta(d)),ta.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,$.A)(function*(){return pr(f.auth,yT(f._delegate,d))})()}linkWithPhoneNumber(d,f){var y=this;return(0,$.A)(function*(){return bv(y.auth,function MT(m,d,f){return Jo.apply(this,arguments)}(y._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,$.A)(function*(){return pr(f.auth,function tv(m,d,f){return rg.apply(this,arguments)}(f._delegate,d,ea))})()}linkWithRedirect(d){var f=this;return(0,$.A)(function*(){return yield Sh(An(f.auth)),MB(f._delegate,d,ea)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,$.A)(function*(){return pr(f.auth,Ol(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return bv(this.auth,function eg(m,d,f){return ds.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return pr(this.auth,function kT(m,d,f){return ev.apply(this,arguments)}(this._delegate,d,ea))}reauthenticateWithRedirect(d){var f=this;return(0,$.A)(function*(){return yield Sh(An(f.auth)),LT(f._delegate,d,ea)})()}sendEmailVerification(d){return function IT(m,d){return Qp.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,$.A)(function*(){return yield function kl(m,d){return Sy.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function ET(m,d){const f=(0,le.Ku)(m);return(0,$e._isFirebaseServerApp)(f.auth.app)?Promise.reject(at(f.auth)):wT(f,d,null)}(this._delegate,d)}updatePassword(d){return function wP(m,d){return wT((0,le.Ku)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function vh(m,d){return Hs.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function go(m,d){return By.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function IP(m,d,f){return fh.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ta.USER_MAP=new WeakMap;const Iu=oe;let Tg=(()=>{class m{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:w}=f.options;Iu(w,"invalid-api-key",{appName:f.name}),Iu(w,"invalid-api-key",{appName:f.name});const S=typeof window<"u"?ea:void 0;this._delegate=y.initialize({options:{persistence:lb(w,f.name),popupRedirectResolver:S}}),this._delegate._updateErrorMap(kr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ta.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function fP(m,d,f){const y=An(m);oe(y._canInitEmulator,y,"emulator-config-failed"),oe(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const w=!!f?.disableWarnings,S=_a(d),{host:q,port:J}=function gB(m){const d=_a(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(y);if(w){const S=w[1];return{host:S,port:pP(y.substr(S.length+1))}}{const[S,q]=y.split(":");return{host:S,port:pP(q)}}}(d);y.config.emulator={url:`${S}//${q}${null===J?"":`:${J}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:q,port:J,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function mB(){function m(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,y)}applyActionCode(f){return function Oy(m,d){return uu.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return vP(this._delegate,f)}confirmPasswordReset(f,y){return function TB(m,d,f){return Hi.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var w=this;return(0,$.A)(function*(){return pr(w._delegate,function fo(m,d,f){return Hp.apply(this,arguments)}(w._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function vT(m,d){return oc.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function po(m,d){const f=Rl.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,$.A)(function*(){Iu(Dh(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function BT(m,d){return Mi.apply(this,arguments)}(f._delegate,ea);return y?pr(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ch(m,d){An(m)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,y,w){const{next:S,error:q,complete:J}=cb(f,y,w);return this._delegate.onAuthStateChanged(S,q,J)}onIdTokenChanged(f,y,w){const{next:S,error:q,complete:J}=cb(f,y,w);return this._delegate.onIdTokenChanged(S,q,J)}sendSignInLinkToEmail(f,y){return function Wp(m,d,f){return Fl.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function wB(m,d,f){return qp.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,$.A)(function*(){let w;switch(function gc(m,d){Eg(Object.values(Ys).includes(d),m,"invalid-persistence-type"),(0,le.lV)()?Eg(d!==Ys.SESSION,m,"unsupported-persistence-type"):(0,le.Ll)()?Eg(d===Ys.NONE,m,"unsupported-persistence-type"):Ev()?Eg(d===Ys.NONE||d===Ys.LOCAL&&(0,le.zW)(),m,"unsupported-persistence-type"):Eg(d===Ys.NONE||Hl(),m,"unsupported-persistence-type")}(y._delegate,f),f){case Ys.SESSION:w=mo;break;case Ys.LOCAL:w=(yield Ne(fu)._isAvailable())?fu:Yp;break;case Ys.NONE:w=qe;break;default:return hn("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(w)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return pr(this._delegate,function Fp(m){return Cy.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return pr(this._delegate,jp(this._delegate,f))}signInWithCustomToken(f){return pr(this._delegate,function ic(m,d){return Ny.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return pr(this._delegate,function Vy(m,d,f){return(0,$e._isFirebaseServerApp)(m.app)?Promise.reject(at(m)):jp((0,le.Ku)(m),un.credential(d,f)).catch(function(){var y=(0,$.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Vl(m),w});return function(w){return y.apply(this,arguments)}}())}(this._delegate,f,y))}signInWithEmailLink(f,y){return pr(this._delegate,function cu(m,d,f){return Fy.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return bv(this._delegate,function Ia(m,d,f){return gu.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,$.A)(function*(){return Iu(Dh(),y._delegate,"operation-not-supported-in-this-environment"),pr(y._delegate,function yo(m,d,f){return pc.apply(this,arguments)}(y._delegate,f,ea))})()}signInWithRedirect(f){var y=this;return(0,$.A)(function*(){return Iu(Dh(),y._delegate,"operation-not-supported-in-this-environment"),yield Sh(y._delegate),PB(y._delegate,f,ea)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Qo(m,d){return Kt.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Ys,m})();function cb(m,d,f){let y=m;"function"!=typeof m&&({next:y,error:d,complete:f}=m);const w=y;return{next:q=>w(q&&ta.getOrCreate(q)),error:d,complete:f}}function lb(m,d){const f=function oR(m,d){const f=Wl();if(!f)return[];const y=jn(wg,m,d);switch(f.getItem(y)){case Ys.NONE:return[qe];case Ys.LOCAL:return[fu,mo];case Ys.SESSION:return[mo];default:return[]}}(m,d);if(typeof self<"u"&&!f.includes(fu)&&f.push(fu),typeof window<"u")for(const y of[Yp,mo])f.includes(y)||f.push(y);return f.includes(qe)||f.push(qe),f}class bg{constructor(){this.providerId="phone",this._delegate=new mu(Ph(We.A.auth()))}static credential(d,f){return mu.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}bg.PHONE_SIGN_IN_METHOD=mu.PHONE_SIGN_IN_METHOD,bg.PROVIDER_ID=mu.PROVIDER_ID;const db=oe;class hb{constructor(d,f,y=We.A.app()){var w;db(null===(w=y.options)||void 0===w?void 0:w.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new rr(y.auth(),d,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ag(m){m.INTERNAL.registerComponent(new Wn.uA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new Tg(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:un,FacebookAuthProvider:_P,GithubAuthProvider:Op,GoogleAuthProvider:pT,OAuthProvider:Ml,SAMLAuthProvider:pi,PhoneAuthProvider:bg,PhoneMultiFactorGenerator:Mt,RecaptchaVerifier:hb,TwitterAuthProvider:Ay,Auth:Tg,AuthCredential:ah,Error:le.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(We.A)},749:(qo,si,yt)=>{yt.d(si,{P2:()=>Ur});var $=yt(467);const We=(Re,Be)=>Be.some(oe=>Re instanceof oe);let $e,le;const Wn=new WeakMap,tr=new WeakMap,$t=new WeakMap,fe=new WeakMap,be=new WeakMap;let qt={get(Re,Be,oe){if(Re instanceof IDBTransaction){if("done"===Be)return tr.get(Re);if("objectStoreNames"===Be)return Re.objectStoreNames||$t.get(Re);if("store"===Be)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return gt(Re[Be])},set:(Re,Be,oe)=>(Re[Be]=oe,!0),has:(Re,Be)=>Re instanceof IDBTransaction&&("done"===Be||"store"===Be)||Be in Re};function vt(Re){return"function"==typeof Re?function on(Re){return Re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ze(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Re)?function(...Be){return Re.apply(lr(this),Be),gt(Wn.get(this))}:function(...Be){return gt(Re.apply(lr(this),Be))}:function(Be,...oe){const Rt=Re.call(lr(this),Be,...oe);return $t.set(Rt,Be.sort?Be.sort():[Be]),gt(Rt)}}(Re):(Re instanceof IDBTransaction&&function Ot(Re){if(tr.has(Re))return;const Be=new Promise((oe,Rt)=>{const Xt=()=>{Re.removeEventListener("complete",dr),Re.removeEventListener("error",Kn),Re.removeEventListener("abort",Kn)},dr=()=>{oe(),Xt()},Kn=()=>{Rt(Re.error||new DOMException("AbortError","AbortError")),Xt()};Re.addEventListener("complete",dr),Re.addEventListener("error",Kn),Re.addEventListener("abort",Kn)});tr.set(Re,Be)}(Re),We(Re,function _n(){return $e||($e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Re,qt):Re)}function gt(Re){if(Re instanceof IDBRequest)return function Je(Re){const Be=new Promise((oe,Rt)=>{const Xt=()=>{Re.removeEventListener("success",dr),Re.removeEventListener("error",Kn)},dr=()=>{oe(gt(Re.result)),Xt()},Kn=()=>{Rt(Re.error),Xt()};Re.addEventListener("success",dr),Re.addEventListener("error",Kn)});return Be.then(oe=>{oe instanceof IDBCursor&&Wn.set(oe,Re)}).catch(()=>{}),be.set(Be,Re),Be}(Re);if(fe.has(Re))return fe.get(Re);const Be=vt(Re);return Be!==Re&&(fe.set(Re,Be),be.set(Be,Re)),Be}const lr=Re=>be.get(Re);function Ur(Re,Be,{blocked:oe,upgrade:Rt,blocking:Xt,terminated:dr}={}){const Kn=indexedDB.open(Re,Be),us=gt(Kn);return Rt&&Kn.addEventListener("upgradeneeded",hr=>{Rt(gt(Kn.result),hr.oldVersion,hr.newVersion,gt(Kn.transaction),hr)}),oe&&Kn.addEventListener("blocked",hr=>oe(hr.oldVersion,hr.newVersion,hr)),us.then(hr=>{dr&&hr.addEventListener("close",()=>dr()),Xt&&hr.addEventListener("versionchange",Ds=>Xt(Ds.oldVersion,Ds.newVersion,Ds))}).catch(()=>{}),us}const hn=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],jr=new Map;function at(Re,Be){if(!(Re instanceof IDBDatabase)||Be in Re||"string"!=typeof Be)return;if(jr.get(Be))return jr.get(Be);const oe=Be.replace(/FromIndex$/,""),Rt=Be!==oe,Xt=Jt.includes(oe);if(!(oe in(Rt?IDBIndex:IDBObjectStore).prototype)||!Xt&&!hn.includes(oe))return;const dr=function(){var Kn=(0,$.A)(function*(us,...hr){const Ds=this.transaction(us,Xt?"readwrite":"readonly");let hi=Ds.store;return Rt&&(hi=hi.index(hr.shift())),(yield Promise.all([hi[oe](...hr),Xt&&Ds.done]))[0]});return function(hr){return Kn.apply(this,arguments)}}();return jr.set(Be,dr),dr}!function kr(Re){qt=Re(qt)}(Re=>({...Re,get:(Be,oe,Rt)=>at(Be,oe)||Re.get(Be,oe,Rt),has:(Be,oe)=>!!at(Be,oe)||Re.has(Be,oe)}))},467:(qo,si,yt)=>{function $($e,le,_n,Ze,Wn,tr,$t){try{var fe=$e[tr]($t),be=fe.value}catch(Je){return void _n(Je)}fe.done?le(be):Promise.resolve(be).then(Ze,Wn)}function We($e){return function(){var le=this,_n=arguments;return new Promise(function(Ze,Wn){var tr=$e.apply(le,_n);function $t(be){$(tr,Ze,Wn,$t,fe,"next",be)}function fe(be){$(tr,Ze,Wn,$t,fe,"throw",be)}$t(void 0)})}}yt.d(si,{A:()=>We})},635:(qo,si,yt)=>{function le(ie,ce){var de={};for(var re in ie)Object.prototype.hasOwnProperty.call(ie,re)&&ce.indexOf(re)<0&&(de[re]=ie[re]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(re=Object.getOwnPropertySymbols(ie);pe<re.length;pe++)ce.indexOf(re[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,re[pe])&&(de[re[pe]]=ie[re[pe]])}return de}function Je(ie,ce,de,re){return new(de||(de=Promise))(function(Te,nt){function Bt(yn){try{ft(re.next(yn))}catch(It){nt(It)}}function fn(yn){try{ft(re.throw(yn))}catch(It){nt(It)}}function ft(yn){yn.done?Te(yn.value):function pe(Te){return Te instanceof de?Te:new de(function(nt){nt(Te)})}(yn.value).then(Bt,fn)}ft((re=re.apply(ie,ce||[])).next())})}function Br(ie){return this instanceof Br?(this.v=ie,this):new Br(ie)}function hn(ie,ce,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,re=de.apply(ie,ce||[]),Te=[];return pe=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Bt("next"),Bt("throw"),Bt("return",function nt(Wt){return function(an){return Promise.resolve(an).then(Wt,It)}}),pe[Symbol.asyncIterator]=function(){return this},pe;function Bt(Wt,an){re[Wt]&&(pe[Wt]=function(Zt){return new Promise(function(Si,cs){Te.push([Wt,Zt,Si,cs])>1||fn(Wt,Zt)})},an&&(pe[Wt]=an(pe[Wt])))}function fn(Wt,an){try{!function ft(Wt){Wt.value instanceof Br?Promise.resolve(Wt.value.v).then(yn,It):$s(Te[0][2],Wt)}(re[Wt](an))}catch(Zt){$s(Te[0][3],Zt)}}function yn(Wt){fn("next",Wt)}function It(Wt){fn("throw",Wt)}function $s(Wt,an){Wt(an),Te.shift(),Te.length&&fn(Te[0][0],Te[0][1])}}function jr(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function on(ie){var ce="function"==typeof Symbol&&Symbol.iterator,de=ce&&ie[ce],re=0;if(de)return de.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&re>=ie.length&&(ie=void 0),{value:ie&&ie[re++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),de={},re("next"),re("throw"),re("return"),de[Symbol.asyncIterator]=function(){return this},de);function re(Te){de[Te]=ie[Te]&&function(nt){return new Promise(function(Bt,fn){!function pe(Te,nt,Bt,fn){Promise.resolve(fn).then(function(ft){Te({value:ft,done:Bt})},nt)}(Bt,fn,(nt=ie[Te](nt)).done,nt.value)})}}}yt.d(si,{AQ:()=>hn,N3:()=>Br,Tt:()=>le,sH:()=>Je,xN:()=>jr}),"function"==typeof SuppressedError&&SuppressedError}},qo=>{qo(qo.s=14)}]);