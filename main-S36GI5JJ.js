import{A as rn,a as $,b as ae,c as JI,d as wm,e as V,f as XI,g as Id,h as eb,i as tb,j as nb,k as Cm,l as rb,m as eu,n as Em,o as bd,p as ib,q as ob,r as Im,s as lt,t as Fo,u as vr,v as Dd,w as tu,x as sb,y as ab,z as Fi}from"./chunk-DA3O343V.js";function cb(n,e){return Object.is(n,e)}var At=null,Td=!1,Sd=1,Qr=Symbol("SIGNAL");function Ae(n){let e=At;return At=n,e}function ub(){return At}var ru={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tm(n){if(Td)throw new Error("");if(At===null)return;At.consumerOnSignalRead(n);let e=At.nextProducerIndex++;if(Pd(At),e<At.producerNode.length&&At.producerNode[e]!==n&&nu(At)){let t=At.producerNode[e];xd(t,At.producerIndexOfThis[e])}At.producerNode[e]!==n&&(At.producerNode[e]=n,At.producerIndexOfThis[e]=nu(At)?fb(n,At,e):0),At.producerLastReadVersion[e]=n.version}function zk(){Sd++}function lb(n){if(!(nu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Sd)){if(!n.producerMustRecompute(n)&&!Mm(n)){n.dirty=!1,n.lastCleanEpoch=Sd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Sd}}function db(n){if(n.liveConsumerNode===void 0)return;let e=Td;Td=!0;try{for(let t of n.liveConsumerNode)t.dirty||qk(t)}finally{Td=e}}function hb(){return At?.consumerAllowSignalWrites!==!1}function qk(n){n.dirty=!0,db(n),n.consumerMarkedDirty?.(n)}function Ad(n){return n&&(n.nextProducerIndex=0),Ae(n)}function Sm(n,e){if(Ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)xd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Mm(n){Pd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lb(t),r!==t.version))return!0}return!1}function Am(n){if(Pd(n),nu(n))for(let e=0;e<n.producerNode.length;e++)xd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fb(n,e,t){if(pb(n),n.liveConsumerNode.length===0&&gb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=fb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function xd(n,e){if(pb(n),n.liveConsumerNode.length===1&&gb(n))for(let r=0;r<n.producerNode.length;r++)xd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Pd(i),i.producerIndexOfThis[r]=e}}function nu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function pb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function gb(n){return n.producerNode!==void 0}function mb(n){let e=Object.create(Hk);e.computation=n;let t=()=>{if(lb(e),Tm(e),e.value===Md)throw e.error;return e.value};return t[Qr]=e,t}var bm=Symbol("UNSET"),Dm=Symbol("COMPUTING"),Md=Symbol("ERRORED"),Hk=ae($({},ru),{value:bm,dirty:!0,error:null,equal:cb,producerMustRecompute(n){return n.value===bm||n.value===Dm},producerRecomputeValue(n){if(n.value===Dm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Dm;let t=Ad(n),r;try{r=n.computation()}catch(i){r=Md,n.error=i}finally{Sm(n,t)}if(e!==bm&&e!==Md&&r!==Md&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function Gk(){throw new Error}var yb=Gk;function vb(){yb()}function _b(n){yb=n}var Wk=null;function wb(n){let e=Object.create(Eb);e.value=n;let t=()=>(Tm(e),e.value);return t[Qr]=e,t}function xm(n,e){hb()||vb(),n.equal(n.value,e)||(n.value=e,Kk(n))}function Cb(n,e){hb()||vb(),xm(n,e(n.value))}var Eb=ae($({},ru),{equal:cb,value:void 0});function Kk(n){n.version++,zk(),db(n),Wk?.()}function de(n){return typeof n=="function"}function Bs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Rd=Bs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(de(r))try{r()}catch(o){e=o instanceof Rd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ib(o)}catch(s){e=e??[],s instanceof Rd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Rd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ib(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vo(t,e)}remove(e){let{_finalizers:t}=this;t&&Vo(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var Pm=mt.EMPTY;function Nd(n){return n instanceof mt||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function Ib(n){de(n)?n():n.unsubscribe()}var Jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Us={setTimeout(n,e,...t){let{delegate:r}=Us;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Us;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kd(n){Us.setTimeout(()=>{let{onUnhandledError:e}=Jn;if(e)e(n);else throw n})}function iu(){}var bb=Rm("C",void 0,void 0);function Db(n){return Rm("E",void 0,n)}function Tb(n){return Rm("N",n,void 0)}function Rm(n,e,t){return{kind:n,value:e,error:t}}var Lo=null;function $s(n){if(Jn.useDeprecatedSynchronousErrorHandling){let e=!Lo;if(e&&(Lo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Lo;if(Lo=null,t)throw r}}else n()}function Sb(n){Jn.useDeprecatedSynchronousErrorHandling&&Lo&&(Lo.errorThrown=!0,Lo.error=n)}var jo=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nd(e)&&e.add(this)):this.destination=Zk}static create(e,t,r){return new Yr(e,t,r)}next(e){this.isStopped?km(Tb(e),this):this._next(e)}error(e){this.isStopped?km(Db(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?km(bb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Qk=Function.prototype.bind;function Nm(n,e){return Qk.call(n,e)}var Om=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Od(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Od(r)}else Od(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Od(t)}}},Yr=class extends jo{constructor(e,t,r){super();let i;if(de(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Jn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nm(e.next,o),error:e.error&&Nm(e.error,o),complete:e.complete&&Nm(e.complete,o)}):i=e}this.destination=new Om(i)}};function Od(n){Jn.useDeprecatedSynchronousErrorHandling?Sb(n):kd(n)}function Yk(n){throw n}function km(n,e){let{onStoppedNotification:t}=Jn;t&&Us.setTimeout(()=>t(n,e))}var Zk={closed:!0,next:iu,error:Yk,complete:iu};var zs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function on(n){return n}function Fm(...n){return Vm(n)}function Vm(n){return n.length===0?on:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Xk(t)?t:new Yr(t,r,i);return $s(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Mb(r),new r((i,o)=>{let s=new Yr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zs](){return this}pipe(...t){return Vm(t)(this)}toPromise(t){return t=Mb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Mb(n){var e;return(e=n??Jn.Promise)!==null&&e!==void 0?e:Promise}function Jk(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function Xk(n){return n&&n instanceof jo||Jk(n)&&Nd(n)}function Lm(n){return de(n?.lift)}function Ce(n){return e=>{if(Lm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new jm(n,e,t,r,i)}var jm=class extends jo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qs(){return Ce((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Hs=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return qs()(this)}};var Ab=Bs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Fd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ab}next(t){$s(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$s(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$s(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pm:(this.currentObservers=null,o.push(t),new mt(()=>{this.currentObservers=null,Vo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new Fd(e,t),n})(),Fd=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pm}};var xt=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ou={now(){return(ou.delegate||Date).now()},delegate:void 0};var Vd=class extends st{constructor(e=1/0,t=1/0,r=ou){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ld=class extends mt{constructor(e,t){super()}schedule(e,t=0){return this}};var su={setInterval(n,e,...t){let{delegate:r}=su;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=su;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Gs=class extends Ld{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return su.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&su.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ws=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ws.now=ou.now;var Ks=class extends Ws{constructor(e,t=Ws.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var au=new Ks(Gs);var jd=class extends Gs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Bd=class extends Ks{};var Bm=new Bd(jd);var sn=new ce(n=>n.complete());function xb(n){return n&&de(n.schedule)}function Um(n){return n[n.length-1]}function Ud(n){return de(Um(n))?n.pop():void 0}function _r(n){return xb(Um(n))?n.pop():void 0}function Pb(n,e){return typeof Um(n)=="number"?n.pop():e}var $d=n=>n&&typeof n.length=="number"&&typeof n!="function";function zd(n){return de(n?.then)}function qd(n){return de(n[zs])}function Hd(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function Gd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wd=eO();function Kd(n){return de(n?.[Wd])}function Qd(n){return eb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Id(t.read());if(i)return yield Id(void 0);yield yield Id(r)}}finally{t.releaseLock()}})}function Yd(n){return de(n?.getReader)}function tt(n){if(n instanceof ce)return n;if(n!=null){if(qd(n))return tO(n);if($d(n))return nO(n);if(zd(n))return rO(n);if(Hd(n))return Rb(n);if(Kd(n))return iO(n);if(Yd(n))return oO(n)}throw Gd(n)}function tO(n){return new ce(e=>{let t=n[zs]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nO(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rO(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,kd)})}function iO(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Rb(n){return new ce(e=>{sO(n,e).catch(t=>e.error(t))})}function oO(n){return Rb(Qd(n))}function sO(n,e){var t,r,i,o;return XI(this,void 0,void 0,function*(){try{for(t=tb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function yn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vn(n,e=0){return Ce((t,r)=>{t.subscribe(Ee(r,i=>yn(r,n,()=>r.next(i),e),()=>yn(r,n,()=>r.complete(),e),i=>yn(r,n,()=>r.error(i),e)))})}function Xn(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Nb(n,e){return tt(n).pipe(Xn(e),Vn(e))}function kb(n,e){return tt(n).pipe(Xn(e),Vn(e))}function Ob(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Fb(n,e){return new ce(t=>{let r;return yn(t,e,()=>{r=n[Wd](),yn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>de(r?.return)&&r.return()})}function Zd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{yn(t,e,()=>{let r=n[Symbol.asyncIterator]();yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Vb(n,e){return Zd(Qd(n),e)}function Lb(n,e){if(n!=null){if(qd(n))return Nb(n,e);if($d(n))return Ob(n,e);if(zd(n))return kb(n,e);if(Hd(n))return Zd(n,e);if(Kd(n))return Fb(n,e);if(Yd(n))return Vb(n,e)}throw Gd(n)}function Ne(n,e){return e?Lb(n,e):tt(n)}function oe(...n){let e=_r(n);return Ne(n,e)}function Qs(n,e){let t=de(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function $m(n){return!!n&&(n instanceof ce||de(n.lift)&&de(n.subscribe))}var Zr=Bs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function re(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ee(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:aO}=Array;function cO(n,e){return aO(e)?n(...e):n(e)}function Jd(n){return re(e=>cO(n,e))}var{isArray:uO}=Array,{getPrototypeOf:lO,prototype:dO,keys:hO}=Object;function Xd(n){if(n.length===1){let e=n[0];if(uO(e))return{args:e,keys:null};if(fO(e)){let t=hO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function fO(n){return n&&typeof n=="object"&&lO(n)===dO}function eh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function cu(...n){let e=_r(n),t=Ud(n),{args:r,keys:i}=Xd(n);if(r.length===0)return Ne([],e);let o=new ce(pO(r,e,i?s=>eh(i,s):on));return t?o.pipe(Jd(t)):o}function pO(n,e,t=on){return r=>{jb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)jb(e,()=>{let l=Ne(n[c],e),d=!1;l.subscribe(Ee(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jb(n,e,t){n?yn(t,n,e):e()}function Bb(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=T=>l<r?I(T):c.push(T),I=T=>{o&&e.next(T),l++;let S=!1;tt(t(T,d++)).subscribe(Ee(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let j=c.shift();s?yn(e,s,()=>I(j)):I(j)}g()}catch(j){e.error(j)}}))};return n.subscribe(Ee(e,y,()=>{f=!0,g()})),()=>{a?.()}}function It(n,e,t=1/0){return de(e)?It((r,i)=>re((o,s)=>e(r,o,i,s))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>Bb(r,i,n,t)))}function Vi(n=1/0){return It(on,n)}function Ub(){return Vi(1)}function Ys(...n){return Ub()(Ne(n,_r(n)))}function th(n){return new ce(e=>{tt(n()).subscribe(e)})}function zm(...n){let e=Ud(n),{args:t,keys:r}=Xd(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;tt(t[d]).subscribe(Ee(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?eh(r,a):a),o.complete())}))}});return e?i.pipe(Jd(e)):i}function qm(...n){let e=_r(n),t=Pb(n,1/0),r=n;return r.length?r.length===1?tt(r[0]):Vi(t)(Ne(r,e)):sn}function Pt(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ee(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Li(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ee(t,void 0,void 0,s=>{o=tt(n(s,Li(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function $b(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Ee(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Jr(n,e){return de(e)?It(n,e,1):It(n,1)}function ji(n){return Ce((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xr(n){return n<=0?()=>sn:Ce((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hm(n){return re(()=>n)}function Gm(n,e=on){return n=n??gO,Ce((t,r)=>{let i,o=!0;t.subscribe(Ee(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function gO(n,e){return n===e}function nh(n=mO){return Ce((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mO(){return new Zr}function Bo(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function bn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pt((i,o)=>n(i,o,r)):on,Xr(1),t?ji(e):nh(()=>new Zr))}function Zs(n){return n<=0?()=>sn:Ce((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Pt((i,o)=>n(i,o,r)):on,Zs(1),t?ji(e):nh(()=>new Zr))}function uu(){return Ce((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Uo(n,e){return Ce($b(n,e,arguments.length>=2,!0))}function zb(n={}){let{connector:e=()=>new st,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,d=f=!1},I=()=>{let T=s;y(),T?.unsubscribe()};return Ce((T,S)=>{l++,!f&&!d&&g();let j=c=c??e();S.add(()=>{l--,l===0&&!f&&!d&&(a=Km(I,i))}),j.subscribe(S),!s&&l>0&&(s=new Yr({next:q=>j.next(q),error:q=>{f=!0,g(),a=Km(y,t,q),j.error(q)},complete:()=>{d=!0,g(),a=Km(y,r),j.complete()}}),tt(T).subscribe(s))})(o)}}function Km(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Yr({next:()=>{r.unsubscribe(),n()}});return tt(e(...t)).subscribe(r)}function rh(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,zb({connector:()=>new Vd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $o(...n){let e=_r(n);return Ce((t,r)=>{(e?Ys(n,t,e):Ys(n,t)).subscribe(r)})}function at(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let l=0,d=o++;tt(n(c,d)).subscribe(i=Ee(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ih(n,e){return de(e)?at(()=>n,e):at(()=>n)}function Qm(n){return Ce((e,t)=>{tt(n).subscribe(Ee(t,()=>t.complete(),iu)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=de(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ee(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):on}var ND="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(Gh(e,t)),this.code=e}};function Gh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function bu(n){return{toString:n}.toString()}var oh="__parameters__";function yO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kD(n,e,t){return bu(()=>{let r=yO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(oh)?c[oh]:Object.defineProperty(c,oh,{value:[]})[oh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ei=globalThis;function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function vO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function cn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(cn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var _O=Ke({__forward_ref__:Ke});function si(n){return n.__forward_ref__=si,n.toString=function(){return cn(this())},n}function an(n){return OD(n)?n():n}function OD(n){return typeof n=="function"&&n.hasOwnProperty(_O)&&n.__forward_ref__===si}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wh(n){return Hb(n,VD)||Hb(n,LD)}function FD(n){return Wh(n)!==null}function Hb(n,e){return n.hasOwnProperty(e)?n[e]:null}function wO(n){let e=n&&(n[VD]||n[LD]);return e||null}function Gb(n){return n&&(n.hasOwnProperty(Wb)||n.hasOwnProperty(CO))?n[Wb]:null}var VD=Ke({\u0275prov:Ke}),Wb=Ke({\u0275inj:Ke}),LD=Ke({ngInjectableDef:Ke}),CO=Ke({ngInjectorDef:Ke}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jD(n){return n&&!!n.\u0275providers}var EO=Ke({\u0275cmp:Ke}),IO=Ke({\u0275dir:Ke}),bO=Ke({\u0275pipe:Ke}),DO=Ke({\u0275mod:Ke}),_h=Ke({\u0275fac:Ke}),hu=Ke({__NG_ELEMENT_ID__:Ke}),Kb=Ke({__NG_ENV_ID__:Ke});function ti(n){return typeof n=="string"?n:n==null?"":String(n)}function TO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ti(n)}function SO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function mv(n,e){throw new X(-201,!1)}var be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(be||{}),hy;function BD(){return hy}function vn(n){let e=hy;return hy=n,e}function UD(n,e,t){let r=Wh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&be.Optional)return null;if(e!==void 0)return e;mv(n,"Injector")}var MO={},pu=MO,fy="__NG_DI_FLAG__",wh="ngTempTokenPath",AO="ngTokenPath",xO=/\n/gm,PO="\u0275",Qb="__source",na;function RO(){return na}function Bi(n){let e=na;return na=n,e}function NO(n,e=be.Default){if(na===void 0)throw new X(-203,!1);return na===null?UD(n,void 0,e):na.get(n,e&be.Optional?null:void 0,e)}function z(n,e=be.Default){return(BD()||NO)(an(n),e)}function x(n,e=be.Default){return z(n,Kh(e))}function Kh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function py(n){let e=[];for(let t=0;t<n.length;t++){let r=an(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=be.Default;for(let s=0;s<r.length;s++){let a=r[s],c=kO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function $D(n,e){return n[fy]=e,n.prototype[fy]=e,n}function kO(n){return n[fy]}function OO(n,e,t,r){let i=n[wh];throw e[Qb]&&i.unshift(e[Qb]),n.message=FO(`
`+n.message,i,t,r),n[AO]=i,n[wh]=null,n}function FO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==PO?n.slice(2):n;let i=cn(e);if(Array.isArray(e))i=e.map(cn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):cn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(xO,`
  `)}`}var ma=$D(kD("Optional"),8);var yv=$D(kD("SkipSelf"),4);function Ho(n,e){let t=n.hasOwnProperty(_h);return t?n[_h]:null}function vv(n,e){n.forEach(t=>Array.isArray(t)?vv(t,e):e(t))}function zD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ch(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function LO(n,e,t){let r=Du(n,e);return r>=0?n[r|1]=t:(r=~r,VO(n,r,e,t)),r}function Ym(n,e){let t=Du(n,e);if(t>=0)return n[t|1]}function Du(n,e){return jO(n,e,1)}function jO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ia={},Dn=[],Go=new K(""),qD=new K("",-1),HD=new K(""),Eh=class{get(e,t=pu){if(t===pu){let r=new Error(`NullInjectorError: No provider for ${cn(e)}!`);throw r.name="NullInjectorError",r}return t}},GD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(GD||{}),Er=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Er||{}),$i=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($i||{});function BO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function gy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];UO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function WD(n){return n===3||n===4||n===6}function UO(n){return n.charCodeAt(0)===64}function gu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Yb(n,t,i,null,e[++r]):Yb(n,t,i,null,null))}}return n}function Yb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var KD="ng-template";function $O(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(_v(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function _v(n){return n.type===4&&n.value!==KD}function zO(n,e,t){let r=n.type===4&&!t?KD:n.value;return e===r}function qO(n,e,t){let r=4,i=n.attrs,o=i!==null?WO(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!er(r)&&!er(c))return!1;if(s&&er(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!zO(n,c,t)||c===""&&e.length===1){if(er(r))return!1;s=!0}}else if(r&8){if(i===null||!$O(n,i,c,t)){if(er(r))return!1;s=!0}}else{let l=e[++a],d=HO(c,i,_v(n),t);if(d===-1){if(er(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(er(r))return!1;s=!0}}}}return er(r)||s}function er(n){return(n&1)===0}function HO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KO(e,n)}function GO(n,e,t=!1){for(let r=0;r<e.length;r++)if(qO(n,e[r],t))return!0;return!1}function WO(n){for(let e=0;e<n.length;e++){let t=n[e];if(WD(t))return e}return n.length}function KO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Zb(n,e){return n?":not("+e.trim()+")":e}function QO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!er(s)&&(e+=Zb(o,i),i=""),r=s,o=o||!er(r);t++}return i!==""&&(e+=Zb(o,i)),e}function YO(n){return n.map(QO).join(",")}function ZO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!er(i))break;i=o}r++}return{attrs:e,classes:t}}function fe(n){return bu(()=>{let e=XD(n),t=ae($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===GD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Er.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});eT(t);let r=n.dependencies;return t.directiveDefs=Xb(r,!1),t.pipeDefs=Xb(r,!0),t.id=eF(t),t})}function JO(n){return zi(n)||QD(n)}function XO(n){return n!==null}function dn(n){return bu(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Jb(n,e){if(n==null)return ia;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=$i.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==$i.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Rt(n){return bu(()=>{let e=XD(n);return eT(e),e})}function Tu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zi(n){return n[EO]||null}function QD(n){return n[IO]||null}function YD(n){return n[bO]||null}function ZD(n){let e=zi(n)||QD(n)||YD(n);return e!==null?e.standalone:!1}function JD(n,e){let t=n[DO]||null;if(!t&&e===!0)throw new Error(`Type ${cn(n)} does not have '\u0275mod' property.`);return t}function XD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ia,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jb(n.inputs,e),outputs:Jb(n.outputs),debugInfo:null}}function eT(n){n.features?.forEach(e=>e(n))}function Xb(n,e){if(!n)return null;let t=e?YD:JO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(XO)}function eF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Xo(n){return{\u0275providers:n}}function wv(...n){return{\u0275providers:tT(!0,n),\u0275fromNgModule:!0}}function tT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return vv(e,s=>{let a=s;my(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nT(i,o),t}function nT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Cv(i,o=>{e(o,r)})}}function my(n,e,t,r){if(n=an(n),!n)return!1;let i=null,o=Gb(n),s=!o&&zi(n);if(!o&&!s){let c=n.ngModule;if(o=Gb(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)my(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{vv(o.imports,d=>{my(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&nT(l,e)}if(!a){let l=Ho(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:HD,useValue:i,multi:!0},i),e({provide:Go,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Cv(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Cv(n,e){for(let t of n)jD(t)&&(t=t.\u0275providers),Array.isArray(t)?Cv(t,e):e(t)}var tF=Ke({provide:String,useValue:Ke});function rT(n){return n!==null&&typeof n=="object"&&tF in n}function nF(n){return!!(n&&n.useExisting)}function rF(n){return!!(n&&n.useFactory)}function oa(n){return typeof n=="function"}function iF(n){return!!n.useClass}var Qh=new K(""),ph={},oF={},Zm;function Ev(){return Zm===void 0&&(Zm=new Eh),Zm}var un=class{},mu=class extends un{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vy(e,s=>this.processProvider(s)),this.records.set(qD,Js(void 0,this)),i.has("environment")&&this.records.set(un,Js(void 0,this));let o=this.records.get(Qh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(HD,Dn,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Bi(this),r=vn(void 0),i;try{return e()}finally{Bi(t),vn(r)}}get(e,t=pu,r=be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Kb))return e[Kb](this);r=Kh(r);let i,o=Bi(this),s=vn(void 0);try{if(!(r&be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=lF(e)&&Wh(e);l&&this.injectableDefInScope(l)?c=Js(yy(e),ph):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&be.Self?Ev():this.parent;return t=r&be.Optional&&t===pu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[wh]=a[wh]||[]).unshift(cn(e)),o)throw a;return OO(a,e,"R3InjectorError",this.source)}else throw a}finally{vn(s),Bi(o)}}resolveInjectorInitializers(){let e=Ae(null),t=Bi(this),r=vn(void 0),i;try{let o=this.get(Go,Dn,be.Self);for(let s of o)s()}finally{Bi(t),vn(r),Ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=an(e);let t=oa(e)?e:an(e&&e.provide),r=aF(e);if(!oa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Js(void 0,ph,!0),i.factory=()=>py(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ae(null);try{return t.value===ph&&(t.value=oF,t.value=t.factory()),typeof t.value=="object"&&t.value&&uF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=an(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yy(n){let e=Wh(n),t=e!==null?e.factory:Ho(n);if(t!==null)return t;if(n instanceof K)throw new X(204,!1);if(n instanceof Function)return sF(n);throw new X(204,!1)}function sF(n){if(n.length>0)throw new X(204,!1);let t=wO(n);return t!==null?()=>t.factory(n):()=>new n}function aF(n){if(rT(n))return Js(void 0,n.useValue);{let e=iT(n);return Js(e,ph)}}function iT(n,e,t){let r;if(oa(n)){let i=an(n);return Ho(i)||yy(i)}else if(rT(n))r=()=>an(n.useValue);else if(rF(n))r=()=>n.useFactory(...py(n.deps||[]));else if(nF(n))r=()=>z(an(n.useExisting));else{let i=an(n&&(n.useClass||n.provide));if(cF(n))r=()=>new i(...py(n.deps));else return Ho(i)||yy(i)}return r}function Js(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cF(n){return!!n.deps}function uF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lF(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function vy(n,e){for(let t of n)Array.isArray(t)?vy(t,e):t&&jD(t)?vy(t.\u0275providers,e):e(t)}function Bn(n,e){n instanceof mu&&n.assertNotDestroyed();let t,r=Bi(n),i=vn(void 0);try{return e()}finally{Bi(r),vn(i)}}function oT(){return BD()!==void 0||RO()!=null}function dF(n){if(!oT())throw new X(-203,!1)}function hF(n){return typeof n=="function"}var Tn=0,me=1,he=2,Qt=3,tr=4,sr=5,rr=6,Ih=7,Wt=8,sa=9,Ir=10,nt=11,yu=12,eD=13,ya=14,Sn=15,aa=16,Xs=17,ca=18,Yh=19,sT=20,Ui=21,Jm=22,Ln=23,vt=25,aT=1,vu=6,ni=7,bh=8,Dh=9,Kt=10,Th=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Th||{});function nr(n){return Array.isArray(n)&&typeof n[aT]=="object"}function Dr(n){return Array.isArray(n)&&n[aT]===!0}function cT(n){return(n.flags&4)!==0}function Su(n){return n.componentOffset>-1}function Iv(n){return(n.flags&1)===1}function qi(n){return!!n.template}function Sh(n){return(n[he]&512)!==0}var _y=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function uT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Un(){return lT}function lT(n){return n.type.prototype.ngOnChanges&&(n.setInput=pF),fF}Un.ngInherit=!0;function fF(){let n=hT(this),e=n?.current;if(e){let t=n.previous;if(t===ia)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function pF(n,e,t,r,i){let o=this.declaredInputs[r],s=hT(n)||gF(n,{previous:ia,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new _y(l&&l.currentValue,t,c===ia),uT(n,e,i,t)}var dT="__ngSimpleChanges__";function hT(n){return n[dT]||null}function gF(n,e){return n[dT]=e}var tD=null;var wr=function(n,e,t){tD?.(n,e,t)},mF="svg",yF="math";function ir(n){for(;Array.isArray(n);)n=n[Tn];return n}function fT(n,e){return ir(e[n])}function Mn(n,e){return ir(e[n.index])}function bv(n,e){return n.data[e]}function Dv(n,e){return n[e]}function Gi(n,e){let t=e[n];return nr(t)?t:t[Tn]}function Tv(n){return(n[he]&128)===128}function vF(n){return Dr(n[Qt])}function ua(n,e){return e==null?null:n[e]}function pT(n){n[Xs]=0}function gT(n){n[he]&1024||(n[he]|=1024,Tv(n)&&Jh(n))}function _F(n,e){for(;n>0;)e=e[ya],n--;return e}function Zh(n){return!!(n[he]&9216||n[Ln]?.dirty)}function wy(n){n[Ir].changeDetectionScheduler?.notify(8),n[he]&64&&(n[he]|=1024),Zh(n)&&Jh(n)}function Jh(n){n[Ir].changeDetectionScheduler?.notify(0);let e=Wo(n);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!Tv(e)));)e=Wo(e)}function mT(n,e){if((n[he]&256)===256)throw new X(911,!1);n[Ui]===null&&(n[Ui]=[]),n[Ui].push(e)}function wF(n,e){if(n[Ui]===null)return;let t=n[Ui].indexOf(e);t!==-1&&n[Ui].splice(t,1)}function Wo(n){let e=n[Qt];return Dr(e)?e[Qt]:e}var Ie={lFrame:TT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var yT=!1;function CF(){return Ie.lFrame.elementDepthCount}function EF(){Ie.lFrame.elementDepthCount++}function IF(){Ie.lFrame.elementDepthCount--}function vT(){return Ie.bindingsEnabled}function Mu(){return Ie.skipHydrationRootTNode!==null}function bF(n){return Ie.skipHydrationRootTNode===n}function DF(n){Ie.skipHydrationRootTNode=n}function TF(){Ie.skipHydrationRootTNode=null}function xe(){return Ie.lFrame.lView}function Yt(){return Ie.lFrame.tView}function ue(n){return Ie.lFrame.contextLView=n,n[Wt]}function le(n){return Ie.lFrame.contextLView=null,n}function hn(){let n=_T();for(;n!==null&&n.type===64;)n=n.parent;return n}function _T(){return Ie.lFrame.currentTNode}function SF(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Au(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function wT(){return Ie.lFrame.isParent}function MF(){Ie.lFrame.isParent=!1}function AF(){return Ie.lFrame.contextLView}function CT(){return yT}function nD(n){yT=n}function Xh(){let n=Ie.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ET(){return Ie.lFrame.bindingIndex}function xF(n){return Ie.lFrame.bindingIndex=n}function va(){return Ie.lFrame.bindingIndex++}function Sv(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PF(){return Ie.lFrame.inI18n}function RF(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cy(e)}function NF(){return Ie.lFrame.currentDirectiveIndex}function Cy(n){Ie.lFrame.currentDirectiveIndex=n}function kF(n){let e=Ie.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function IT(n){Ie.lFrame.currentQueryIndex=n}function OF(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[sr]:null}function bT(n,e,t){if(t&be.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&be.Host);)if(i=OF(o),i===null||(o=o[ya],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ie.lFrame=DT();return r.currentTNode=e,r.lView=n,!0}function Mv(n){let e=DT(),t=n[me];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function DT(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?TT(n):e}function TT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ST(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var MT=ST;function Av(){let n=ST();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function FF(n){return(Ie.lFrame.contextLView=_F(n,Ie.lFrame.contextLView))[Wt]}function ai(){return Ie.lFrame.selectedIndex}function Ko(n){Ie.lFrame.selectedIndex=n}function ef(){let n=Ie.lFrame;return bv(n.tView,n.selectedIndex)}function AT(){return Ie.lFrame.currentNamespace}var xT=!0;function xv(){return xT}function Wi(n){xT=n}function VF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Pv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function gh(n,e,t){PT(n,e,3,t)}function mh(n,e,t,r){(n[he]&3)===t&&PT(n,e,t,r)}function Xm(n,e){let t=n[he];(t&3)===e&&(t&=16383,t+=1,n[he]=t)}function PT(n,e,t,r){let i=r!==void 0?n[Xs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Xs]+=65536),(a<o||o==-1)&&(LF(n,t,e,c),n[Xs]=(n[Xs]&4294901760)+c+2),c++}function rD(n,e){wr(4,n,e);let t=Ae(null);try{e.call(n)}finally{Ae(t),wr(5,n,e)}}function LF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[he]>>14<n[Xs]>>16&&(n[he]&3)===e&&(n[he]+=16384,rD(a,o)):rD(a,o)}var ra=-1,Qo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function jF(n){return n instanceof Qo}function BF(n){return(n.flags&8)!==0}function UF(n){return(n.flags&16)!==0}var ey={},Ey=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Kh(r);let i=this.injector.get(e,ey,r);return i!==ey||t===ey?i:this.parentInjector.get(e,t,r)}};function RT(n){return n!==ra}function Mh(n){return n&32767}function $F(n){return n>>16}function Ah(n,e){let t=$F(n),r=e;for(;t>0;)r=r[ya],t--;return r}var Iy=!0;function xh(n){let e=Iy;return Iy=n,e}var zF=256,NT=zF-1,kT=5,qF=0,Cr={};function HF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(hu)&&(r=t[hu]),r==null&&(r=t[hu]=qF++);let i=r&NT,o=1<<i;e.data[n+(i>>kT)]|=o}function Ph(n,e){let t=OT(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,ty(r.data,n),ty(e,null),ty(r.blueprint,null));let i=Rv(n,e),o=n.injectorIndex;if(RT(i)){let s=Mh(i),a=Ah(i,e),c=a[me].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function ty(n,e){n.push(0,0,0,0,0,0,0,0,e)}function OT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=BT(i),r===null)return ra;if(t++,i=i[ya],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ra}function by(n,e,t){HF(n,e,t)}function GF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(WD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function FT(n,e,t){if(t&be.Optional||n!==void 0)return n;mv(e,"NodeInjector")}function VT(n,e,t,r){if(t&be.Optional&&r===void 0&&(r=null),!(t&(be.Self|be.Host))){let i=n[sa],o=vn(void 0);try{return i?i.get(e,r,t&be.Optional):UD(e,r,t&be.Optional)}finally{vn(o)}}return FT(r,e,t)}function LT(n,e,t,r=be.Default,i){if(n!==null){if(e[he]&2048&&!(r&be.Self)){let s=ZF(n,e,t,r,Cr);if(s!==Cr)return s}let o=jT(n,e,t,r,Cr);if(o!==Cr)return o}return VT(e,t,r,i)}function jT(n,e,t,r,i){let o=QF(t);if(typeof o=="function"){if(!bT(e,n,r))return r&be.Host?FT(i,t,r):VT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&be.Optional))mv(t);else return s}finally{MT()}}else if(typeof o=="number"){let s=null,a=OT(n,e),c=ra,l=r&be.Host?e[Sn][sr]:null;for((a===-1||r&be.SkipSelf)&&(c=a===-1?Rv(n,e):e[a+8],c===ra||!oD(r,!1)?a=-1:(s=e[me],a=Mh(c),e=Ah(c,e)));a!==-1;){let d=e[me];if(iD(o,a,d.data)){let f=WF(a,e,t,s,r,l);if(f!==Cr)return f}c=e[a+8],c!==ra&&oD(r,e[me].data[a+8]===l)&&iD(o,a,e)?(s=d,a=Mh(c),e=Ah(c,e)):a=-1}}return i}function WF(n,e,t,r,i,o){let s=e[me],a=s.data[n+8],c=r==null?Su(a)&&Iy:r!=s&&(a.type&3)!==0,l=i&be.Host&&o===a,d=KF(a,s,t,c,l);return d!==null?la(e,s,d,a):Cr}function KF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let I=s[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){let y=s[c];if(y&&qi(y)&&y.type===t)return c}return null}function la(n,e,t,r){let i=n[t],o=e.data;if(jF(i)){let s=i;s.resolving&&SO(TO(o[t]));let a=xh(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?vn(s.injectImpl):null,d=bT(n,r,be.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&VF(t,o[t],e)}finally{l!==null&&vn(l),xh(a),s.resolving=!1,MT()}}return i}function QF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(hu)?n[hu]:void 0;return typeof e=="number"?e>=0?e&NT:YF:e}function iD(n,e,t){let r=1<<n;return!!(t[e+(n>>kT)]&r)}function oD(n,e){return!(n&be.Self)&&!(n&be.Host&&e)}var qo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return LT(this._tNode,this._lView,e,Kh(r),t)}};function YF(){return new qo(hn(),xe())}function Ki(n){return bu(()=>{let e=n.prototype.constructor,t=e[_h]||Dy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[_h]||Dy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Dy(n){return OD(n)?()=>{let e=Dy(an(n));return e&&e()}:Ho(n)}function ZF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[he]&2048&&!(s[he]&512);){let a=jT(o,s,t,r|be.Self,Cr);if(a!==Cr)return a;let c=o.parent;if(!c){let l=s[sT];if(l){let d=l.get(t,Cr,r);if(d!==Cr)return d}c=BT(s),s=s[ya]}o=c}return i}function BT(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[sr]:null}function Nv(n){return GF(hn(),n)}function sD(n,e=null,t=null,r){let i=UT(n,e,t,r);return i.resolveInjectorInitializers(),i}function UT(n,e=null,t=null,r,i=new Set){let o=[t||Dn,wv(n)];return r=r||(typeof n=="object"?void 0:cn(n)),new mu(o,e||Ev(),r||null,i)}var jn=class n{static{this.THROW_IF_NOT_FOUND=pu}static{this.NULL=new Eh}static create(e,t){if(Array.isArray(e))return sD({name:""},t,e,"");{let r=e.name??"";return sD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Q({token:n,providedIn:"any",factory:()=>z(qD)})}static{this.__NG_ELEMENT_ID__=-1}};var JF=new K("");JF.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&be.Optional)return null;throw new X(204,!1)};var XF="ngOriginalError";function ny(n){return n[XF]}var $T=!0,kv=(()=>{class n{static{this.__NG_ELEMENT_ID__=eV}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ty=class extends kv{constructor(e){super(),this._lView=e}onDestroy(e){return mT(this._lView,e),()=>wF(this._lView,e)}};function eV(){return new Ty(xe())}var Qi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Sy=class extends st{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,oT()&&(this.destroyRef=x(kv,{optional:!0})??void 0,this.pendingTasks=x(Qi,{optional:!0})??void 0)}emit(e){let t=Ae(null);try{super.next(e)}finally{Ae(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},De=Sy;function Rh(...n){}function zT(n){let e,t;function r(){n=Rh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function aD(n){return queueMicrotask(()=>n()),()=>{n=Rh}}var Ov="isAngularZone",Nh=Ov+"_ID",tV=0,je=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new De(!1),this.onMicrotaskEmpty=new De(!1),this.onStable=new De(!1),this.onError=new De(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$T}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ov)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nV,Rh,Rh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},nV={};function Fv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){zT(()=>{n.callbackScheduled=!1,My(n),n.isCheckStableRunning=!0,Fv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),My(n)}function iV(n){let e=()=>{rV(n)},t=tV++;n._inner=n._inner.fork({name:"angular",properties:{[Ov]:!0,[Nh]:t,[Nh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(oV(c))return r.invokeTask(o,s,a,c);try{return cD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),uD(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return cD(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!sV(c)&&e(),uD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,My(n),Fv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function My(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uD(n){n._nesting--,Fv(n)}var Ay=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new De,this.onMicrotaskEmpty=new De,this.onStable=new De,this.onError=new De}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oV(n){return qT(n,"__ignore_ng_zone__")}function sV(n){return qT(n,"__scheduler_tick__")}function qT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ri=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ny(e);for(;t&&ny(t);)t=ny(t);return t||null}},aV=new K("",{providedIn:"root",factory:()=>{let n=x(je),e=x(ri);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function cV(){return tf(hn(),xe())}function tf(n,e){return new ci(Mn(n,e))}var ci=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=cV}}return n})();var uV="ngSkipHydration",lV="ngskiphydration";function HT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===lV)return!0}return!1}function GT(n){return n.hasAttribute(uV)}function kh(n){return(n.flags&128)===128}function dV(n){if(kh(n))return!0;let e=n.parent;for(;e;){if(kh(n)||HT(e))return!0;e=e.parent}return!1}var WT=new Map,hV=0;function fV(){return hV++}function pV(n){WT.set(n[Yh],n)}function xy(n){WT.delete(n[Yh])}var lD="__ngContext__";function Yo(n,e){nr(e)?(n[lD]=e[Yh],pV(e)):n[lD]=e}function KT(n){return YT(n[yu])}function QT(n){return YT(n[tr])}function YT(n){for(;n!==null&&!Dr(n);)n=n[tr];return n}var Py;function ZT(n){Py=n}function nf(){if(Py!==void 0)return Py;if(typeof document<"u")return document;throw new X(210,!1)}var rf=new K("",{providedIn:"root",factory:()=>gV}),gV="ng",Vv=new K(""),Ot=new K("",{providedIn:"platform",factory:()=>"unknown"});var Lv=new K("",{providedIn:"root",factory:()=>nf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mV(){let n=new _a;return x(Ot)==="browser"&&(n.store=yV(nf(),x(rf))),n}var _a=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:mV})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function yV(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var JT="h",XT="b",Ry=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Ry||{}),vV="e",_V="t",jv="c",eS="x",Oh="r",wV="i",CV="n",tS="d";var EV="__nghData__",nS=EV,ry="ngh",IV="nghm",rS=()=>null;function bV(n,e,t=!1){let r=n.getAttribute(ry);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,c={};if(r!==""){let d=e.get(_a,null,{optional:!0});d!==null&&(c=d.get(nS,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,of(l,0,n.nextSibling)),a?n.setAttribute(ry,a):n.removeAttribute(ry),l}function DV(){rS=bV}function Bv(n,e,t=!1){return rS(n,e,t)}function TV(n){let e=n._lView;return e[me].type===2?null:(Sh(e)&&(e=e[vt]),e)}function SV(n){return n.textContent?.replace(/\s/gm,"")}function MV(n){let e=nf(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=SV(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function of(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Ny(n,e){return n.segmentHeads?.[e]??null}function AV(n,e){let t=n.data,r=t[vV]?.[e]??null;return r===null&&t[jv]?.[e]&&(r=Uv(n,e)),r}function iS(n,e){return n.data[jv]?.[e]??null}function Uv(n,e){let t=iS(n,e)??[],r=0;for(let i of t)r+=i[Oh]*(i[eS]??1);return r}function xV(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[tS];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function xu(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[tS];n.disconnectedNodes=t?new Set(t):null}return!!xV(n)?.has(e)}var sh=new K(""),oS=!1,sS=new K("",{providedIn:"root",factory:()=>oS});var ah;function PV(){if(ah===void 0&&(ah=null,ei.trustedTypes))try{ah=ei.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ah}function sf(n){return PV()?.createHTML(n)||n}var ch;function RV(){if(ch===void 0&&(ch=null,ei.trustedTypes))try{ch=ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ch}function dD(n){return RV()?.createScriptURL(n)||n}var ii=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ND})`}},ky=class extends ii{getTypeName(){return"HTML"}},Oy=class extends ii{getTypeName(){return"Style"}},Fy=class extends ii{getTypeName(){return"Script"}},Vy=class extends ii{getTypeName(){return"URL"}},Ly=class extends ii{getTypeName(){return"ResourceURL"}};function Tr(n){return n instanceof ii?n.changingThisBreaksApplicationSecurity:n}function Yi(n,e){let t=NV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ND})`)}return t===e}function NV(n){return n instanceof ii&&n.getTypeName()||null}function aS(n){return new ky(n)}function cS(n){return new Oy(n)}function uS(n){return new Fy(n)}function lS(n){return new Vy(n)}function dS(n){return new Ly(n)}function kV(n){let e=new By(n);return OV()?new jy(e):e}var jy=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(sf(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},By=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=sf(e),t}};function OV(){try{return!!new window.DOMParser().parseFromString(sf(""),"text/html")}catch{return!1}}var FV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function af(n){return n=String(n),n.match(FV)?n:"unsafe:"+n}function ui(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Pu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var hS=ui("area,br,col,hr,img,wbr"),fS=ui("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pS=ui("rp,rt"),VV=Pu(pS,fS),LV=Pu(fS,ui("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jV=Pu(pS,ui("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hD=Pu(hS,LV,jV,VV),gS=ui("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),BV=ui("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),UV=ui("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),$V=Pu(gS,BV,UV),zV=ui("script,style,template"),Uy=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=GV(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=HV(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=fD(e).toLowerCase();if(!hD.hasOwnProperty(t))return this.sanitizedSomething=!0,!zV.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!$V.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;gS[a]&&(c=af(c)),this.buf.push(" ",s,'="',pD(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=fD(e).toLowerCase();hD.hasOwnProperty(t)&&!hS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(pD(e))}};function qV(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function HV(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw mS(e);return e}function GV(n){let e=n.firstChild;if(e&&qV(n,e))throw mS(e);return e}function fD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function mS(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var WV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KV=/([^\#-~ |!])/g;function pD(n){return n.replace(/&/g,"&amp;").replace(WV,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(KV,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var uh;function yS(n,e){let t=null;try{uh=uh||kV(n);let r=e?String(e):"";t=uh.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=uh.getInertBodyElement(r)}while(r!==o);let a=new Uy().sanitizeChildren(gD(t)||t);return sf(a)}finally{if(t){let r=gD(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function gD(n){return"content"in n&&QV(n)?n.content:null}function QV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Sr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sr||{});function YV(n){let e=_S();return e?e.sanitize(Sr.URL,n)||"":Yi(n,"URL")?Tr(n):af(ti(n))}function Ru(n){let e=_S();if(e)return dD(e.sanitize(Sr.RESOURCE_URL,n)||"");if(Yi(n,"ResourceURL"))return dD(Tr(n));throw new X(904,!1)}function ZV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Ru:YV}function vS(n,e,t){return ZV(e,t)(n)}function _S(){let n=xe();return n&&n[Ir].sanitizer}var JV=/^>|^->|<!--|-->|--!>|<!-$/g,XV=/(<|>)/g,eL="\u200B$1\u200B";function tL(n){return n.replace(JV,e=>e.replace(XV,eL))}function nL(n){return n.ownerDocument.body}function wS(n){return n instanceof Function?n():n}function lu(n){return(n??x(jn)).get(Ot)==="browser"}var br=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(br||{}),rL;function $v(n,e){return rL(n,e)}function ea(n,e,t,r,i){if(r!=null){let o,s=!1;Dr(r)?o=r:nr(r)&&(s=!0,r=r[Tn]);let a=ir(r);n===0&&t!==null?i==null?DS(e,t,a):Fh(e,t,a,i||null,!0):n===1&&t!==null?Fh(e,t,a,i||null,!0):n===2?Gv(e,a,s):n===3&&e.destroyNode(a),o!=null&&vL(e,n,o,t,i)}}function CS(n,e){return n.createText(e)}function iL(n,e,t){n.setValue(e,t)}function ES(n,e){return n.createComment(tL(e))}function zv(n,e,t){return n.createElement(e,t)}function oL(n,e){IS(n,e),e[Tn]=null,e[sr]=null}function sL(n,e,t,r,i,o){r[Tn]=i,r[sr]=e,uf(n,r,t,1,i,o)}function IS(n,e){e[Ir].changeDetectionScheduler?.notify(9),uf(n,e,e[nt],2,null,null)}function aL(n){let e=n[yu];if(!e)return iy(n[me],n);for(;e;){let t=null;if(nr(e))t=e[yu];else{let r=e[Kt];r&&(t=r)}if(!t){for(;e&&!e[tr]&&e!==n;)nr(e)&&iy(e[me],e),e=e[Qt];e===null&&(e=n),nr(e)&&iy(e[me],e),t=e&&e[tr]}e=t}}function cL(n,e,t,r){let i=Kt+r,o=t.length;r>0&&(t[i-1][tr]=e),r<o-Kt?(e[tr]=t[i],zD(t,Kt+r,e)):(t.push(e),e[tr]=null),e[Qt]=t;let s=e[aa];s!==null&&t!==s&&bS(s,e);let a=e[ca];a!==null&&a.insertView(n),wy(e),e[he]|=128}function bS(n,e){let t=n[Dh],r=e[Qt];if(nr(r))n[he]|=Th.HasTransplantedViews;else{let i=r[Qt][Sn];e[Sn]!==i&&(n[he]|=Th.HasTransplantedViews)}t===null?n[Dh]=[e]:t.push(e)}function qv(n,e){let t=n[Dh],r=t.indexOf(e);t.splice(r,1)}function _u(n,e){if(n.length<=Kt)return;let t=Kt+e,r=n[t];if(r){let i=r[aa];i!==null&&i!==n&&qv(i,r),e>0&&(n[t-1][tr]=r[tr]);let o=Ch(n,Kt+e);oL(r[me],r);let s=o[ca];s!==null&&s.detachView(o[me]),r[Qt]=null,r[tr]=null,r[he]&=-129}return r}function cf(n,e){if(!(e[he]&256)){let t=e[nt];t.destroyNode&&uf(n,e,t,3,null,null),aL(e)}}function iy(n,e){if(e[he]&256)return;let t=Ae(null);try{e[he]&=-129,e[he]|=256,e[Ln]&&Am(e[Ln]),lL(n,e),uL(n,e),e[me].type===1&&e[nt].destroy();let r=e[aa];if(r!==null&&Dr(e[Qt])){r!==e[Qt]&&qv(r,e);let i=e[ca];i!==null&&i.detachView(n)}xy(e)}finally{Ae(t)}}function uL(n,e){let t=n.cleanup,r=e[Ih];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ih]=null);let i=e[Ui];if(i!==null){e[Ui]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function lL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Qo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wr(4,a,c);try{c.call(a)}finally{wr(5,a,c)}}else{wr(4,i,o);try{o.call(i)}finally{wr(5,i,o)}}}}}function dL(n,e,t){return hL(n,e.parent,t)}function hL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Er.None||o===Er.Emulated)return null}return Mn(r,t)}}function Fh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function DS(n,e,t){n.appendChild(e,t)}function mD(n,e,t,r,i){r!==null?Fh(n,e,t,r,i):DS(n,e,t)}function TS(n,e){return n.parentNode(e)}function fL(n,e){return n.nextSibling(e)}function pL(n,e,t){return mL(n,e,t)}function gL(n,e,t){return n.type&40?Mn(n,t):null}var mL=gL,yD;function Hv(n,e,t,r){let i=dL(n,r,e),o=e[nt],s=r.parent||e[sr],a=pL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)mD(o,i,t[c],a,!1);else mD(o,i,t,a,!1);yD!==void 0&&yD(o,r,e,t,i)}function du(n,e){if(e!==null){let t=e.type;if(t&3)return Mn(e,n);if(t&4)return $y(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return du(n,r);{let i=n[e.index];return Dr(i)?$y(-1,i):ir(i)}}else{if(t&128)return du(n,e.next);if(t&32)return $v(e,n)()||ir(n[e.index]);{let r=SS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wo(n[Sn]);return du(i,r)}else return du(n,e.next)}}}return null}function SS(n,e){if(e!==null){let r=n[Sn][sr],i=e.projection;return r.projection[i]}return null}function $y(n,e){let t=Kt+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return du(r,i)}return e[ni]}function Gv(n,e,t){n.removeChild(null,e,t)}function MS(n){n.textContent=""}function Wv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Yo(ir(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Wv(n,e,t.child,r,i,o,!1),ea(e,n,i,a,o);else if(c&32){let l=$v(t,r),d;for(;d=l();)ea(e,n,i,d,o);ea(e,n,i,a,o)}else c&16?yL(n,e,r,t,i,o):ea(e,n,i,a,o);t=s?t.projectionNext:t.next}}function uf(n,e,t,r,i,o){Wv(t,r,n.firstChild,e,i,o,!1)}function yL(n,e,t,r,i,o){let s=t[Sn],c=s[sr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];ea(e,n,i,d,o)}else{let l=c,d=s[Qt];kh(r)&&(l.flags|=128),Wv(n,e,l,d,i,o,!0)}}function vL(n,e,t,r,i){let o=t[ni],s=ir(t);o!==s&&ea(e,n,r,o,i);for(let a=Kt;a<t.length;a++){let c=t[a];uf(c[me],c,n,e,r,o)}}function _L(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:br.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=br.Important),n.setStyle(t,r,i,o))}}function wL(n,e,t){n.setAttribute(e,"style",t)}function AS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function xS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&gy(n,e,r),i!==null&&AS(n,e,i),o!==null&&wL(n,e,o)}var _n={};function R(n=1){PS(Yt(),xe(),ai()+n,!1)}function PS(n,e,t,r){if(!r)if((e[he]&3)===3){let o=n.preOrderCheckHooks;o!==null&&gh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&mh(e,o,0,t)}Ko(t)}function Te(n,e=be.Default){let t=xe();if(t===null)return z(n,e);let r=hn();return LT(r,t,an(n),e)}function RS(){let n="invalid";throw new Error(n)}function NS(n,e,t,r,i,o){let s=Ae(null);try{let a=null;i&$i.SignalBased&&(a=e[r][Qr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&$i.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):uT(e,a,r,o)}finally{Ae(s)}}function CL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ko(~i);else{let o=i,s=t[++r],a=t[++r];RF(s,o);let c=e[o];a(2,c)}}}finally{Ko(-1)}}function lf(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Tn]=i,f[he]=r|4|128|8|64,(l!==null||n&&n[he]&2048)&&(f[he]|=2048),pT(f),f[Qt]=f[ya]=n,f[Wt]=t,f[Ir]=s||n&&n[Ir],f[nt]=a||n&&n[nt],f[sa]=c||n&&n[sa]||null,f[sr]=o,f[Yh]=fV(),f[rr]=d,f[sT]=l,f[Sn]=e.type==2?n[Sn]:f,f}function df(n,e,t,r,i){let o=n.data[e];if(o===null)o=EL(n,e,t,r,i),PF()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=SF();o.injectorIndex=s===null?-1:s.injectorIndex}return Au(o,!0),o}function EL(n,e,t,r,i){let o=_T(),s=wT(),a=s?o:o&&o.parent,c=n.data[e]=ML(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function kS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function OS(n,e,t,r,i){let o=ai(),s=r&2;try{Ko(-1),s&&e.length>vt&&PS(n,e,vt,!1),wr(s?2:0,i),t(r,i)}finally{Ko(o),wr(s?3:1,i)}}function FS(n,e,t){if(cT(e)){let r=Ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ae(r)}}}function VS(n,e,t){vT()&&(kL(n,e,t,Mn(t,e)),(t.flags&64)===64&&zS(n,e,t))}function LS(n,e,t=Mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function jS(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Kv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Kv(n,e,t,r,i,o,s,a,c,l,d){let f=vt+r,g=f+i,y=IL(f,g),I=typeof l=="function"?l():l;return y[me]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function IL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_n);return t}function bL(n,e,t,r){let o=r.get(sS,oS)||t===Er.ShadowDom,s=n.selectRootElement(e,o);return DL(s),s}function DL(n){BS(n)}var BS=()=>null;function TL(n){GT(n)?MS(n):MV(n)}function SL(){BS=TL}function ML(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Mu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=$i.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?_D(r,t,l,a,c):_D(r,t,l,a)}return r}function _D(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function AL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,I=g?g.outputs:null;c=vD(0,f.inputs,d,c,y),l=vD(1,f.outputs,d,l,I);let T=c!==null&&s!==null&&!_v(e)?HL(c,d,s):null;a.push(T)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function xL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Qv(n,e,t,r,i,o,s,a){let c=Mn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Yv(n,t,d,r,i),Su(e)&&PL(t,e.index)):e.type&3?(r=xL(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function PL(n,e){let t=Gi(e,n);t[he]&16||(t[he]|=64)}function US(n,e,t,r){if(vT()){let i=r===null?null:{"":-1},o=FL(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&$S(n,e,t,s,i,a),i&&VL(t,r,i)}t.mergedAttrs=gu(t.mergedAttrs,t.attrs)}function $S(n,e,t,r,i,o){for(let l=0;l<r.length;l++)by(Ph(t,e),n,r[l].type);jL(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=kS(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=gu(t.mergedAttrs,d.hostAttrs),BL(n,t,e,c,d),LL(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}AL(n,t,o)}function RL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;NL(s)!=a&&s.push(a),s.push(t,r,o)}}function NL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function kL(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Su(t)&&UL(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ph(t,e),Yo(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=la(e,n,a,t);if(Yo(l,e),s!==null&&qL(e,a-i,l,c,t,s),qi(c)){let d=Gi(t.index,e);d[Wt]=la(e,n,a,t)}}}function zS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=NF();try{Ko(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Cy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&OL(c,l)}}finally{Ko(-1),Cy(s)}}function OL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function FL(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(GO(e,s.selectors,!1))if(r||(r=[]),qi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;zy(n,e,c)}else r.unshift(s),zy(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function zy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function VL(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function LL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;qi(e)&&(t[""]=n)}}function jL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function BL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ho(i.type,!0)),s=new Qo(o,qi(i),Te);n.blueprint[r]=s,t[r]=s,RL(n,e,r,kS(n,t,i.hostVars,_n),i)}function UL(n,e,t){let r=Mn(e,n),i=jS(t),o=n[Ir].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=hf(n,lf(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function $L(n,e,t,r,i,o){let s=Mn(n,e);zL(e[nt],s,o,n.value,t,r,i)}function zL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ti(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function qL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];NS(r,t,c,l,d,f)}}function HL(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function qS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HS(n,e){let t=n.contentQueries;if(t!==null){let r=Ae(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];IT(o),a.contentQueries(2,e[s],s)}}}finally{Ae(r)}}}function hf(n,e){return n[yu]?n[eD][tr]=e:n[yu]=e,n[eD]=e,e}function qy(n,e,t){IT(0);let r=Ae(null);try{e(n,t)}finally{Ae(r)}}function GL(n){return n[Ih]??=[]}function WL(n){return n.cleanup??=[]}function GS(n,e){let t=n[sa],r=t?t.get(ri,null):null;r&&r.handleError(e)}function Yv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];NS(d,l,r,a,c,i)}}function Zv(n,e,t){let r=fT(e,n);iL(n[nt],r,t)}function KL(n,e){let t=Gi(e,n),r=t[me];QL(r,t);let i=t[Tn];i!==null&&t[rr]===null&&(t[rr]=Bv(i,t[sa])),Jv(r,t,t[Wt])}function QL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Jv(n,e,t){Mv(e);try{let r=n.viewQuery;r!==null&&qy(1,r,t);let i=n.template;i!==null&&OS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ca]?.finishViewCreation(n),n.staticContentQueries&&HS(n,e),n.staticViewQueries&&qy(2,n.viewQuery,t);let o=n.components;o!==null&&YL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[he]&=-5,Av()}}function YL(n,e){for(let t=0;t<e.length;t++)KL(n,e[t])}function ff(n,e,t,r){let i=Ae(null);try{let o=e.tView,a=n[he]&4096?4096:16,c=lf(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[aa]=l;let d=n[ca];return d!==null&&(c[ca]=d.createEmbeddedView(o)),Jv(o,c,t),c}finally{Ae(i)}}function WS(n,e){let t=Kt+e;if(t<n.length)return n[t]}function wu(n,e){return!e||e.firstChild===null||kh(n)}function pf(n,e,t,r=!0){let i=e[me];if(cL(i,e,n,t),r){let s=$y(t,n),a=e[nt],c=TS(a,n[ni]);c!==null&&sL(i,n[sr],a,e,c,s)}let o=e[rr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function KS(n,e){let t=_u(n,e);return t!==void 0&&cf(t[me],t),t}function Vh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ir(o)),Dr(o)&&ZL(o,r);let s=t.type;if(s&8)Vh(n,e,t.child,r);else if(s&32){let a=$v(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=SS(e,t);if(Array.isArray(a))r.push(...a);else{let c=Wo(e[Sn]);Vh(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ZL(n,e){for(let t=Kt;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Vh(r[me],r,i,e)}n[ni]!==n[Tn]&&e.push(n[ni])}var QS=[];function JL(n){return n[Ln]??XL(n)}function XL(n){let e=QS.pop()??Object.create(t2);return e.lView=n,e}function e2(n){n.lView[Ln]!==n&&(n.lView=null,QS.push(n))}var t2=ae($({},ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Jh(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function n2(n){let e=n[Ln]??Object.create(r2);return e.lView=n,e}var r2=ae($({},ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Wo(n.lView);for(;e&&!YS(e[me]);)e=Wo(e);e&&gT(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function YS(n){return n.type!==2}var i2=100;function ZS(n,e=!0,t=0){let r=n[Ir],i=r.rendererFactory,o=!1;o||i.begin?.();try{o2(n,t)}catch(s){throw e&&GS(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function o2(n,e){let t=CT();try{nD(!0),Hy(n,e);let r=0;for(;Zh(n);){if(r===i2)throw new X(103,!1);r++,Hy(n,1)}}finally{nD(t)}}function s2(n,e,t,r){let i=e[he];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Ir].inlineEffectRunner?.flush(),Mv(e);let a=!0,c=null,l=null;o||(YS(n)?(l=JL(e),c=Ad(l)):ub()===null?(a=!1,l=n2(e),c=Ad(l)):e[Ln]&&(Am(e[Ln]),e[Ln]=null));try{pT(e),xF(n.bindingStartIndex),t!==null&&OS(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&gh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&mh(e,y,0,null),Xm(e,0)}if(s||a2(e),JS(e,0),n.contentQueries!==null&&HS(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&gh(e,y)}else{let y=n.contentHooks;y!==null&&mh(e,y,1),Xm(e,1)}CL(n,e);let f=n.components;f!==null&&eM(e,f,0);let g=n.viewQuery;if(g!==null&&qy(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&gh(e,y)}else{let y=n.viewHooks;y!==null&&mh(e,y,2),Xm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Jm]){for(let y of e[Jm])y();e[Jm]=null}o||(e[he]&=-73)}catch(d){throw o||Jh(e),d}finally{l!==null&&(Sm(l,c),a&&e2(l)),Av()}}function JS(n,e){for(let t=KT(n);t!==null;t=QT(t))for(let r=Kt;r<t.length;r++){let i=t[r];XS(i,e)}}function a2(n){for(let e=KT(n);e!==null;e=QT(e)){if(!(e[he]&Th.HasTransplantedViews))continue;let t=e[Dh];for(let r=0;r<t.length;r++){let i=t[r];gT(i)}}}function c2(n,e,t){let r=Gi(e,n);XS(r,t)}function XS(n,e){Tv(n)&&Hy(n,e)}function Hy(n,e){let r=n[me],i=n[he],o=n[Ln],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Mm(o)),s||=!1,o&&(o.dirty=!1),n[he]&=-9217,s)s2(r,n,r.template,n[Wt]);else if(i&8192){JS(n,1);let a=r.components;a!==null&&eM(n,a,1)}}function eM(n,e,t){for(let r=0;r<e.length;r++)c2(n,e[r],t)}function Xv(n,e){let t=CT()?64:1088;for(n[Ir].changeDetectionScheduler?.notify(e);n;){n[he]|=t;let r=Wo(n);if(Sh(n)&&!r)return n;n=r}return null}var Zo=class{get rootNodes(){let e=this._lView,t=e[me];return Vh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wt]}set context(e){this._lView[Wt]=e}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qt];if(Dr(e)){let t=e[bh],r=t?t.indexOf(this):-1;r>-1&&(_u(e,r),Ch(t,r))}this._attachedToViewContainer=!1}cf(this._lView[me],this._lView)}onDestroy(e){mT(this._lView,e)}markForCheck(){Xv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){wy(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,ZS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sh(this._lView),t=this._lView[aa];t!==null&&!e&&qv(t,this._lView),IS(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Sh(this._lView),r=this._lView[aa];r!==null&&!t&&bS(r,this._lView),wy(this._lView)}},e_=(()=>{class n{static{this.__NG_ELEMENT_ID__=d2}}return n})(),u2=e_,l2=class extends u2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ff(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Zo(i)}};function d2(){return h2(hn(),xe())}function h2(n,e){return n.type&4?new l2(e,n,tf(n,e)):null}var f2=new RegExp(`^(\\d+)*(${XT}|${JT})*(.*)`);function p2(n){let e=n.match(f2),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,d]of o.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(l,f)}return[s,...a]}function g2(n){return!n.prev&&n.parent?.type===8}function oy(n){return n.index-vt}function m2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function gf(n,e,t,r){let i=oy(r),o=m2(n,i);if(o===void 0){let s=n.data[CV];if(s?.[i])o=v2(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(g2(r)){let l=oy(r.parent);o=Ny(n,l)}else{let l=Mn(c,t);if(a)o=l.firstChild;else{let d=oy(c),f=Ny(n,d);if(c.type===2&&f){let y=Uv(n,d)+1;o=mf(y,f)}else o=l.nextSibling}}}}return o}function mf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function y2(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Ry.FirstChild:t=t.firstChild;break;case Ry.NextSibling:t=t.nextSibling;break}}return t}function v2(n,e){let[t,...r]=p2(n),i;if(t===JT)i=e[Sn][Tn];else if(t===XT)i=nL(e[Sn][Tn]);else{let o=Number(t);i=ir(e[o+vt])}return y2(i,r)}var _2=!1;function w2(n){_2=n}function C2(n){let e=n[rr];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[nt];for(let o of r.values())E2(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function E2(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-vt);i&&Gv(n,i,!1)}}function tM(n){let e=n[vu]??[],r=n[Qt][nt];for(let i of e)I2(i,r);n[vu]=Dn}function I2(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Oh];for(;t<i;){let o=r.nextSibling;Gv(e,r,!1),r=o,t++}}}function nM(n){tM(n);let e=n[Tn];nr(e)&&Lh(e);for(let t=Kt;t<n.length;t++)Lh(n[t])}function Lh(n){C2(n);let e=n[me];for(let t=vt;t<e.bindingStartIndex;t++)if(Dr(n[t])){let r=n[t];nM(r)}else nr(n[t])&&Lh(n[t])}function b2(n){let e=n._views;for(let t of e){let r=TV(t);r!==null&&r[Tn]!==null&&(nr(r)?Lh(r):nM(r))}}function D2(n,e){let t=[];for(let r of e)for(let i=0;i<(r[eS]??1);i++){let o={data:r,firstChild:null};r[Oh]>0&&(o.firstChild=n,n=mf(r[Oh],n)),t.push(o)}return[n,t]}var rM=()=>null;function T2(n,e){let t=n[vu];return!e||t===null||t.length===0?null:t[0].data[wV]===e?t.shift():(tM(n),null)}function S2(){rM=T2}function Cu(n,e){return rM(n,e)}var da=class{},t_=new K("",{providedIn:"root",factory:()=>!1});var iM=new K(""),oM=new K(""),Gy=class{},jh=class{};function M2(n){let e=Error(`No component factory found for ${cn(n)}.`);return e[A2]=n,e}var A2="ngComponent";var Wy=class{resolveComponentFactory(e){throw M2(e)}},ha=class{static{this.NULL=new Wy}},fa=class{},Zi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>x2()}}return n})();function x2(){let n=xe(),e=hn(),t=Gi(e.index,n);return(nr(t)?t:n)[nt]}var P2=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ky(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qb(i,a);else if(o==2){let c=a,l=e[++s];r=qb(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Bh=class extends ha{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zi(e);return new pa(t,this.ngModule)}};function wD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:$i.None;e?t.push({propName:s,templateName:r,isSignal:(a&$i.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function R2(n){let e=n.toLowerCase();return e==="svg"?mF:e==="math"?yF:null}var pa=class extends jh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=wD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return wD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ae(null);try{i=i||this.ngModule;let s=i instanceof un?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ey(e,s):e,c=a.get(fa,null);if(c===null)throw new X(407,!1);let l=a.get(P2,null),d=a.get(da,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?bL(g,r,this.componentDef.encapsulation,a):zv(g,y,R2(y)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let S=null;I!==null&&(S=Bv(I,a,!0));let j=Kv(0,null,null,1,0,null,null,null,null,null,null),q=lf(null,j,null,T,null,null,f,g,a,null,S);Mv(q);let L,Y,ie=null;try{let te=this.componentDef,b,v=null;te.findHostDirectiveDefs?(b=[],v=new Map,te.findHostDirectiveDefs(te,b,v),b.push(te)):b=[te];let C=N2(q,I);ie=k2(C,I,te,b,q,f,g),Y=bv(j,vt),I&&V2(g,te,I,r),t!==void 0&&L2(Y,this.ngContentSelectors,t),L=F2(ie,te,b,v,q,[j2]),Jv(j,q,null)}catch(te){throw ie!==null&&xy(ie),xy(q),te}finally{Av()}return new Qy(this.componentType,L,tf(Y,q),q,Y)}finally{Ae(o)}}},Qy=class extends Gy{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Zo(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Yv(o[me],o,i,e,t),this.previousInputValues.set(e,t);let s=Gi(this._tNode.index,o);Xv(s,1)}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function N2(n,e){let t=n[me],r=vt;return n[r]=e,df(t,r,2,"#host",null)}function k2(n,e,t,r,i,o,s){let a=i[me];O2(r,n,e,s);let c=null;e!==null&&(c=Bv(e,i[sa]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=lf(i,jS(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&zy(a,n,r.length-1),hf(i,f),i[n.index]=f}function O2(n,e,t,r){for(let i of n)e.mergedAttrs=gu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ky(e,e.mergedAttrs,!0),t!==null&&xS(r,t,e))}function F2(n,e,t,r,i,o){let s=hn(),a=i[me],c=Mn(s,i);$S(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=la(i,a,f,s);Yo(g,i)}zS(a,i,s),c&&Yo(c,i);let l=la(i,a,s.directiveStart+s.componentOffset,s);if(n[Wt]=i[Wt]=l,o!==null)for(let d of o)d(l,e);return FS(a,s,i),l}function V2(n,e,t,r){if(r)gy(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=ZO(e.selectors[0]);i&&gy(n,t,i),o&&o.length>0&&AS(n,t,o.join(" "))}}function L2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function j2(){let n=hn();Pv(xe()[me],n)}var Nu=(()=>{class n{static{this.__NG_ELEMENT_ID__=B2}}return n})();function B2(){let n=hn();return $2(n,xe())}var U2=Nu,sM=class extends U2{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return tf(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rv(this._hostTNode,this._hostLView);if(RT(e)){let t=Ah(e,this._hostLView),r=Mh(e),i=t[me].data[r+8];return new qo(i,t)}else return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=CD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Cu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,wu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!hF(e),a;if(s)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new pa(zi(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let T=(s?l:this.parentInjector).get(un,null);T&&(o=T)}let d=zi(c.componentType??{}),f=Cu(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,o);return this.insertImpl(y.hostView,a,wu(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(vF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Qt],l=new sM(c,c[sr],c[Qt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return pf(s,i,o,r),e.attachToViewContainerRef(),zD(sy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=CD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_u(this._lContainer,t);r&&(Ch(sy(this._lContainer),t),cf(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=_u(this._lContainer,t);return r&&Ch(sy(this._lContainer),t)!=null?new Zo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function CD(n){return n[bh]}function sy(n){return n[bh]||(n[bh]=[])}function $2(n,e){let t,r=e[n.index];return Dr(r)?t=r:(t=qS(r,e,null,n),e[n.index]=t,hf(e,t)),aM(t,e,n,r),new sM(t,n,e)}function z2(n,e){let t=n[nt],r=t.createComment(""),i=Mn(e,n),o=TS(t,i);return Fh(t,o,r,fL(t,i),!1),r}var aM=cM,n_=()=>!1;function q2(n,e,t){return n_(n,e,t)}function cM(n,e,t,r){if(n[ni])return;let i;t.type&8?i=ir(r):i=z2(e,t),n[ni]=i}function H2(n,e,t){if(n[ni]&&n[vu])return!0;let r=t[rr],i=e.index-vt;if(!r||dV(e)||xu(r,i))return!1;let s=Ny(r,i),a=r.data[jv]?.[i],[c,l]=D2(s,a);return n[ni]=c,n[vu]=l,!0}function G2(n,e,t,r){n_(n,t,e)||cM(n,e,t,r)}function W2(){aM=G2,n_=H2}var ED=new Set;function Mr(n){ED.has(n)||(ED.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function K2(n){return typeof n=="function"&&n[Qr]!==void 0}function Zt(n,e){Mr("NgSignals");let t=wb(n),r=t[Qr];return e?.equal&&(r.equal=e.equal),t.set=i=>xm(r,i),t.update=i=>Cb(r,i),t.asReadonly=Q2.bind(t),t}function Q2(){let n=this[Qr];if(n.readonlyFn===void 0){let e=()=>this();e[Qr]=n,n.readonlyFn=e}return n.readonlyFn}function uM(n){return K2(n)&&typeof n.set=="function"}function Y2(n){return Object.getPrototypeOf(n.prototype).constructor}function ar(n){let e=Y2(n.type),t=!0,r=[n];for(;e;){let i;if(qi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=lh(n.inputs),s.inputTransforms=lh(n.inputTransforms),s.declaredInputs=lh(n.declaredInputs),s.outputs=lh(n.outputs);let a=i.hostBindings;a&&tj(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&X2(n,c),l&&ej(n,l),Z2(n,i),vO(n.outputs,i.outputs),qi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ar&&(t=!1)}}e=Object.getPrototypeOf(e)}J2(r)}function Z2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function J2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gu(i.hostAttrs,t=gu(t,i.hostAttrs))}}function lh(n){return n===ia?{}:n===Dn?[]:n}function X2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function ej(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function r_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Hi=class{},Eu=class{};var Yy=class extends Hi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bh(this);let o=JD(e);this._bootstrapComponents=wS(o.bootstrap),this._r3Injector=UT(e,t,[{provide:Hi,useValue:this},{provide:ha,useValue:this.componentFactoryResolver},...r],cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zy=class extends Eu{constructor(e){super(),this.moduleType=e}create(e){return new Yy(this.moduleType,e,[])}};var Uh=class extends Hi{constructor(e){super(),this.componentFactoryResolver=new Bh(this),this.instance=null;let t=new mu([...e.providers,{provide:Hi,useValue:this},{provide:ha,useValue:this.componentFactoryResolver}],e.parent||Ev(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yf(n,e,t=null){return new Uh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function lM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function i_(n,e,t){return n[e]=t}function nj(n,e){return n[e]}function or(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function o_(n,e,t,r){let i=or(n,e,t);return or(n,e+1,r)||i}function rj(n,e,t,r,i){let o=o_(n,e,t,r);return or(n,e+2,i)||o}function ku(n){return(n.flags&32)===32}function ij(n,e,t,r,i,o,s,a,c){let l=e.consts,d=df(e,n,4,s||null,a||null);US(e,t,d,ua(l,c)),Pv(e,d);let f=d.tView=Kv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Jy(n,e,t,r,i,o,s,a,c,l){let d=t+vt,f=e.firstCreatePass?ij(d,e,n,r,i,o,s,a,c):e.data[d];Au(f,!1);let g=dM(e,n,f,t);xv()&&Hv(e,n,g,f),Yo(g,n);let y=qS(g,n,g,f);return n[d]=y,hf(n,y),q2(y,f,n),Iv(f)&&VS(e,n,f),c!=null&&LS(n,f,l),f}function He(n,e,t,r,i,o,s,a){let c=xe(),l=Yt(),d=ua(l.consts,o);return Jy(c,l,n,e,t,r,i,d,s,a),He}var dM=hM;function hM(n,e,t,r){return Wi(!0),e[nt].createComment("")}function oj(n,e,t,r){let i=e[rr],o=!i||Mu()||ku(t)||xu(i,r);if(Wi(o),o)return hM(n,e,t,r);let s=i.data[_V]?.[r]??null;s!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=s);let a=gf(i,n,e,t);of(i,r,a);let c=Uv(i,r);return mf(c,a)}function sj(){dM=oj}var ta=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ta||{}),fM=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Xy=class n{constructor(){this.ngZone=x(je),this.scheduler=x(da),this.errorHandler=x(ri,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ta.EarlyRead,ta.Write,ta.MixedReadWrite,ta.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}},ev=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function s_(n,e){!e?.injector&&dF(s_);let t=e?.injector??x(jn);return lu(t)?(Mr("NgAfterNextRender"),cj(n,t,e,!0)):uj}function aj(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function cj(n,e,t,r){let i=e.get(fM);i.impl??=e.get(Xy);let o=t?.phase??ta.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(kv):null,a=new ev(i.impl,aj(n,o),r,s);return i.impl.register(a),a}var uj={destroy(){}};function wa(n,e,t,r){let i=xe(),o=va();if(or(i,o,e)){let s=Yt(),a=ef();$L(a,i,n,e,t,r)}return wa}function pM(n,e,t,r){return or(n,va(),t)?e+ti(t)+r:_n}function lj(n,e,t,r,i,o){let s=ET(),a=o_(n,s,t,i);return Sv(2),a?e+ti(t)+r+ti(i)+o:_n}function dj(n,e,t,r,i,o,s,a){let c=ET(),l=rj(n,c,t,i,s);return Sv(3),l?e+ti(t)+r+ti(i)+o+ti(s)+a:_n}function dh(n,e){return n<<17|e<<2}function Jo(n){return n>>17&32767}function hj(n){return(n&2)==2}function fj(n,e){return n&131071|e<<17}function tv(n){return n|2}function ga(n){return(n&131068)>>2}function ay(n,e){return n&-131069|e<<2}function pj(n){return(n&1)===1}function nv(n){return n|1}function gj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Jo(s),c=ga(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Du(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Jo(n[a+1]);n[r+1]=dh(g,a),g!==0&&(n[g+1]=ay(n[g+1],r)),n[a+1]=fj(n[a+1],r)}else n[r+1]=dh(a,0),a!==0&&(n[a+1]=ay(n[a+1],r)),a=r;else n[r+1]=dh(c,0),a===0?a=r:n[c+1]=ay(n[c+1],r),c=r;l&&(n[r+1]=tv(n[r+1])),ID(n,d,r,!0),ID(n,d,r,!1),mj(e,d,n,r,o),s=dh(a,c),o?e.classBindings=s:e.styleBindings=s}function mj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Du(o,e)>=0&&(t[r+1]=nv(t[r+1]))}function ID(n,e,t,r){let i=n[t+1],o=e===null,s=r?Jo(i):ga(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];yj(c,e)&&(a=!0,n[s+1]=r?nv(l):tv(l)),s=r?Jo(l):ga(l)}a&&(n[t+1]=r?tv(i):nv(i))}function yj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Du(n,e)>=0:!1}function ye(n,e,t){let r=xe(),i=va();if(or(r,i,e)){let o=Yt(),s=ef();Qv(o,s,r,n,e,r[nt],t,!1)}return ye}function bD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Yv(n,t,o[s],s,r)}function Ji(n,e){return vj(n,e,null,!0),Ji}function vj(n,e,t,r){let i=xe(),o=Yt(),s=Sv(2);if(o.firstUpdatePass&&wj(o,n,s,r),e!==_n&&or(i,s,e)){let a=o.data[ai()];Dj(o,a,i,i[nt],n,i[s+1]=Tj(e,t),r,s)}}function _j(n,e){return e>=n.expandoStartIndex}function wj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=_j(n,t);Sj(o,r)&&e===null&&!s&&(e=!1),e=Cj(i,o,e,r),gj(i,o,e,t,s,r)}}function Cj(n,e,t,r){let i=kF(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=cy(null,n,e,t,r),t=Iu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=cy(i,n,e,t,r),o===null){let c=Ej(n,e,r);c!==void 0&&Array.isArray(c)&&(c=cy(null,n,e,c[1],r),c=Iu(c,e.attrs,r),Ij(n,e,r,c))}else o=bj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Ej(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ga(r)!==0)return n[Jo(r)]}function Ij(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Jo(i)]=r}function bj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Iu(r,s,t)}return Iu(r,e.attrs,t)}function cy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Iu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Iu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),LO(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Dj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=pj(l)?DD(c,e,t,i,ga(l),s):void 0;if(!$h(d)){$h(o)||hj(l)&&(o=DD(c,null,t,i,a,s));let f=fT(ai(),t);_L(r,s,f,i,o)}}function DD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===_n&&(g=f?Dn:void 0);let y=f?Ym(g,r):d===r?g:void 0;if(l&&!$h(y)&&(y=Ym(c,r)),$h(y)&&(a=y,s))return a;let I=n[i+1];i=s?Jo(I):ga(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ym(c,r))}return a}function $h(n){return n!==void 0}function Tj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=cn(Tr(n)))),n}function Sj(n,e){return(n.flags&(e?8:16))!==0}var rv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function uy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Mj(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=n.at(o),d=e[o],f=uy(o,l,o,d,t);if(f!==0){f<0&&n.updateValue(o,d),o++;continue}let g=n.at(s),y=e[c],I=uy(s,g,c,y,t);if(I!==0){I<0&&n.updateValue(s,y),s--,c--;continue}let T=t(o,l),S=t(s,g),j=t(o,d);if(Object.is(j,S)){let q=t(c,y);Object.is(q,T)?(n.swap(o,s),n.updateValue(s,y),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new zh,i??=SD(n,o,s,t),iv(n,r,o,j))n.updateValue(o,d),o++,s++;else if(i.has(j))r.set(T,n.detach(o)),s--;else{let q=n.create(o,e[o]);n.attach(o,q),o++,s++}}for(;o<=c;)TD(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let d=n.at(o),f=l.value,g=uy(o,d,o,f,t);if(g!==0)g<0&&n.updateValue(o,f),o++,l=c.next();else{r??=new zh,i??=SD(n,o,s,t);let y=t(o,f);if(iv(n,r,o,y))n.updateValue(o,f),o++,s++,l=c.next();else if(!i.has(y))n.attach(o,n.create(o,f)),o++,s++,l=c.next();else{let I=t(o,d);r.set(I,n.detach(o)),s--}}}for(;!l.done;)TD(n,r,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function iv(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function TD(n,e,t,r,i){if(iv(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function SD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var zh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ke(n,e){Mr("NgControlFlow");let t=xe(),r=va(),i=t[r]!==_n?t[r]:-1,o=i!==-1?qh(t,vt+i):void 0,s=0;if(or(t,r,n)){let a=Ae(null);try{if(o!==void 0&&KS(o,s),n!==-1){let c=vt+n,l=qh(t,c),d=cv(t[me],c),f=Cu(l,d.tView.ssrId),g=ff(t,d,e,{dehydratedView:f});pf(l,g,s,wu(d,f))}}finally{Ae(a)}}else if(o!==void 0){let a=WS(o,s);a!==void 0&&(a[Wt]=e)}}var ov=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Kt}};function Jt(n,e){return e}var sv=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Lt(n,e,t,r,i,o,s,a,c,l,d,f,g){Mr("NgControlFlow");let y=xe(),I=Yt(),T=c!==void 0,S=xe(),j=a?s.bind(S[Sn][Wt]):s,q=new sv(T,j);S[vt+n]=q,Jy(y,I,n+1,e,t,r,i,ua(I.consts,o)),T&&Jy(y,I,n+2,c,l,d,f,ua(I.consts,g))}var av=class extends rv{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Kt}at(e){return this.getLView(e)[Wt].$implicit}attach(e,t){let r=t[rr];this.needsIndexUpdate||=e!==this.length,pf(this.lContainer,t,e,wu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Aj(this.lContainer,e)}create(e,t){let r=Cu(this.lContainer,this.templateTNode.tView.ssrId),i=ff(this.hostLView,this.templateTNode,new ov(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){cf(e[me],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Wt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Wt].$index=e}getLView(e){return xj(this.lContainer,e)}};function jt(n){let e=Ae(null),t=ai();try{let r=xe(),i=r[me],o=r[t],s=t+1,a=qh(r,s);if(o.liveCollection===void 0){let l=cv(i,s);o.liveCollection=new av(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(Mj(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=va(),d=c.length===0;if(or(r,l,d)){let f=t+2,g=qh(r,f);if(d){let y=cv(i,f),I=Cu(g,y.tView.ssrId),T=ff(r,y,void 0,{dehydratedView:I});pf(g,T,0,wu(y,I))}else KS(g,0)}}}finally{Ae(e)}}function qh(n,e){return n[e]}function Aj(n,e){return _u(n,e)}function xj(n,e){return WS(n,e)}function cv(n,e){return bv(n,e)}function Pj(n,e,t,r,i,o){let s=e.consts,a=ua(s,i),c=df(e,n,2,r,a);return US(e,t,c,ua(s,o)),c.attrs!==null&&Ky(c,c.attrs,!1),c.mergedAttrs!==null&&Ky(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function E(n,e,t,r){let i=xe(),o=Yt(),s=vt+n,a=i[nt],c=o.firstCreatePass?Pj(s,o,i,e,t,r):o.data[s],l=gM(o,i,c,a,e,n);i[s]=l;let d=Iv(c);return Au(c,!0),xS(a,l,c),!ku(c)&&xv()&&Hv(o,i,l,c),CF()===0&&Yo(l,i),EF(),d&&(VS(o,i,c),FS(o,c,i)),r!==null&&LS(i,c),E}function _(){let n=hn();wT()?MF():(n=n.parent,Au(n,!1));let e=n;bF(e)&&TF(),IF();let t=Yt();return t.firstCreatePass&&(Pv(t,n),cT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&BF(e)&&bD(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UF(e)&&bD(t,e,xe(),e.stylesWithoutHost,!1),_}function ht(n,e,t,r){return E(n,e,t,r),_(),ht}var gM=(n,e,t,r,i,o)=>(Wi(!0),zv(r,i,AT()));function Rj(n,e,t,r,i,o){let s=e[rr],a=!s||Mu()||ku(t)||xu(s,o);if(Wi(a),a)return zv(r,i,AT());let c=gf(s,n,e,t);return iS(s,o)&&of(s,o,c.nextSibling),s&&(HT(t)||GT(c))&&Su(t)&&(DF(t),MS(c)),c}function Nj(){gM=Rj}var kj=(n,e,t,r)=>(Wi(!0),ES(e[nt],""));function Oj(n,e,t,r){let i,o=e[rr],s=!o||Mu()||xu(o,r)||ku(t);if(Wi(s),s)return ES(e[nt],"");let a=gf(o,n,e,t),c=AV(o,r);return of(o,r,a),i=mf(c,a),i}function Fj(){kj=Oj}function Ge(){return xe()}var zo=void 0;function Vj(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var Lj=["en",[["a","p"],["AM","PM"],zo],[["AM","PM"],zo,zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zo,"{1} 'at' {0}",zo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Vj],fu={};function mM(n,e,t){typeof e!="string"&&(t=e,e=n[dt.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),fu[e]=n,t&&(fu[e][dt.ExtraData]=t)}function $n(n){let e=jj(n),t=MD(e);if(t)return t;let r=e.split("-")[0];if(t=MD(r),t)return t;if(r==="en")return Lj;throw new X(701,!1)}function MD(n){return n in fu||(fu[n]=ei.ng&&ei.ng.common&&ei.ng.common.locales&&ei.ng.common.locales[n]),fu[n]}var dt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(dt||{});function jj(n){return n.toLowerCase().replace(/_/g,"-")}var Hh="en-US";var Bj=Hh;function Uj(n){typeof n=="string"&&(Bj=n.toLowerCase().replace(/_/g,"-"))}var $j=(n,e,t)=>{};function J(n,e,t,r){let i=xe(),o=Yt(),s=hn();return yM(o,i,i[nt],s,n,e,r),J}function zj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ih],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function yM(n,e,t,r,i,o,s){let a=Iv(r),l=n.firstCreatePass&&WL(n),d=e[Wt],f=GL(e),g=!0;if(r.type&3||s){let T=Mn(r,e),S=s?s(T):T,j=f.length,q=s?Y=>s(ir(Y[r.index])):r.index,L=null;if(!s&&a&&(L=zj(n,e,i,r.index)),L!==null){let Y=L.__ngLastListenerFn__||L;Y.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,g=!1}else{o=xD(r,e,d,o),$j(T,i,o);let Y=t.listen(S,i,o);f.push(o,Y),l&&l.push(i,q,j,j+1)}}else o=xD(r,e,d,o);let y=r.outputs,I;if(g&&y!==null&&(I=y[i])){let T=I.length;if(T)for(let S=0;S<T;S+=2){let j=I[S],q=I[S+1],ie=e[j][q].subscribe(o),te=f.length;f.push(o,ie),l&&l.push(i,r.index,te,-(te+1))}}}function AD(n,e,t,r){let i=Ae(null);try{return wr(6,e,t),t(r)!==!1}catch(o){return GS(n,o),!1}finally{wr(7,e,t),Ae(i)}}function xD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Gi(n.index,e):e;Xv(s,5);let a=AD(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=AD(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function ee(n=1){return FF(n)}function Xi(n,e,t,r,i){let o=xe(),s=pM(o,e,t,r);if(s!==_n){let a=Yt(),c=ef();Qv(a,c,o,n,s,o[nt],i,!1)}return Xi}function qj(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n){let e=AF();return Dv(e,vt+n)}function k(n,e=""){let t=xe(),r=Yt(),i=n+vt,o=r.firstCreatePass?df(r,i,1,e,null):r.data[i],s=vM(r,t,o,e,n);t[i]=s,xv()&&Hv(r,t,s,o),Au(o,!1)}var vM=(n,e,t,r,i)=>(Wi(!0),CS(e[nt],r));function Hj(n,e,t,r,i){let o=e[rr],s=!o||Mu()||ku(t)||xu(o,i);return Wi(s),s?CS(e[nt],r):gf(o,n,e,t)}function Gj(){vM=Hj}function Be(n){return rt("",n,""),Be}function rt(n,e,t){let r=xe(),i=pM(r,n,e,t);return i!==_n&&Zv(r,ai(),i),rt}function a_(n,e,t,r,i){let o=xe(),s=lj(o,n,e,t,r,i);return s!==_n&&Zv(o,ai(),s),a_}function vf(n,e,t,r,i,o,s){let a=xe(),c=dj(a,n,e,t,r,i,o,s);return c!==_n&&Zv(a,ai(),c),vf}function Se(n,e,t){uM(e)&&(e=e());let r=xe(),i=va();if(or(r,i,e)){let o=Yt(),s=ef();Qv(o,s,r,n,e,r[nt],t,!1)}return Se}function ve(n,e){let t=uM(n);return t&&n.set(e),t}function Me(n,e){let t=xe(),r=Yt(),i=hn();return yM(r,t,t[nt],i,n,e),Me}function Wj(n,e,t){let r=Yt();if(r.firstCreatePass){let i=qi(n);uv(t,r.data,r.blueprint,i,!0),uv(e,r.data,r.blueprint,i,!1)}}function uv(n,e,t,r,i){if(n=an(n),Array.isArray(n))for(let o=0;o<n.length;o++)uv(n[o],e,t,r,i);else{let o=Yt(),s=xe(),a=hn(),c=oa(n)?n:an(n.provide),l=iT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(oa(n)||!n.multi){let y=new Qo(l,i,Te),I=dy(c,e,i?d:d+g,f);I===-1?(by(Ph(a,s),o,c),ly(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=dy(c,e,d+g,f),I=dy(c,e,d,d+g),T=y>=0&&t[y],S=I>=0&&t[I];if(i&&!S||!i&&!T){by(Ph(a,s),o,c);let j=Yj(i?Qj:Kj,t.length,i,r,l);!i&&S&&(t[I].providerFactory=j),ly(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=_M(t[i?I:y],l,!i&&r);ly(o,n,y>-1?y:I,j)}!i&&r&&S&&t[I].componentProviders++}}}function ly(n,e,t,r){let i=oa(e),o=iF(e);if(i||o){let c=(o?an(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function _M(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Kj(n,e,t,r){return lv(this.multi,[])}function Qj(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=la(t,t[me],this.providerFactory.index,r);o=a.slice(0,s),lv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],lv(i,o);return o}function lv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Yj(n,e,t,r,i){let o=new Qo(n,t,Te);return o.multi=[],o.index=e,o.componentProviders=0,_M(o,i,r&&!t),o}function li(n,e=[]){return t=>{t.providersResolver=(r,i)=>Wj(r,i?i(n):n,e)}}var Zj=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=tT(!1,t.type),i=r.length>0?yf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(z(un))})}}return n})();function pe(n){Mr("NgStandalone"),n.getStandaloneInjector=e=>e.get(Zj).getOrCreateStandaloneInjector(n)}function Ou(n,e,t){let r=Xh()+n,i=xe();return i[r]===_n?i_(i,r,t?e.call(t):e()):nj(i,r)}function wM(n,e,t,r){return EM(xe(),Xh(),n,e,t,r)}function CM(n,e){let t=n[e];return t===_n?void 0:t}function EM(n,e,t,r,i,o){let s=e+t;return or(n,s,i)?i_(n,s+1,o?r.call(o,i):r(i)):CM(n,s+1)}function Jj(n,e,t,r,i,o,s){let a=e+t;return o_(n,a,i,o)?i_(n,a+2,s?r.call(s,i,o):r(i,o)):CM(n,a+2)}function An(n,e){let t=Yt(),r,i=n+vt;t.firstCreatePass?(r=Xj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ho(r.type,!0)),s,a=vn(Te);try{let c=xh(!1),l=o();return xh(c),qj(t,xe(),i,l),l}finally{vn(a)}}function Xj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ca(n,e,t){let r=n+vt,i=xe(),o=Dv(i,r);return IM(i,r)?EM(i,Xh(),e,o.transform,t,o):o.transform(t)}function es(n,e,t,r){let i=n+vt,o=xe(),s=Dv(o,i);return IM(o,i)?Jj(o,Xh(),e,s.transform,t,r,s):s.transform(t,r)}function IM(n,e){return n[me].data[e].pure}var oi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},bM=new oi("18.2.13");var _f=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var DM=new K("");function eo(n){return!!n&&typeof n.then=="function"}function c_(n){return!!n&&typeof n.subscribe=="function"}var wf=new K(""),TM=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=x(wf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(eo(o))t.push(o);else if(c_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ts=new K("");function eB(){_b(()=>{throw new X(600,!1)})}function tB(n){return n.isBoundToModule}var nB=10;function rB(n,e,t){try{let r=t();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var xr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(aV),this.afterRenderManager=x(fM),this.zonelessEnabled=x(t_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new st,this.afterTick=new st,this.componentTypes=[],this.components=[],this.isStable=x(Qi).hasPendingTasks.pipe(re(t=>!t)),this._injector=x(un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof jh;if(!this._injector.get(TM).done){let g=!i&&ZD(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(ha).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=tB(s)?void 0:this._injector.get(Hi),c=r||s.selector,l=s.create(jn.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(DM,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),yh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ae(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(fa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<nB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)iB(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Zh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ts,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var hh;function Cf(n){hh??=new WeakMap;let e=hh.get(n);if(e)return e;let t=n.isStable.pipe(bn(r=>r)).toPromise().then(()=>{});return hh.set(n,t),n.onDestroy(()=>hh?.delete(n)),t}function iB(n,e,t,r){if(!t&&!Zh(n))return;ZS(n,e,t&&!r?0:1)}var dv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ef=(()=>{class n{compileModuleSync(t){return new Zy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=JD(t),o=wS(i.declarations).reduce((s,a)=>{let c=zi(a);return c&&s.push(new pa(c)),s},[]);return new dv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oB=(()=>{class n{constructor(){this.zone=x(je),this.changeDetectionScheduler=x(da),this.applicationRef=x(xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sB({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new je(ae($({},aB()),{scheduleInRootZone:t})),[{provide:je,useFactory:n},{provide:Go,multi:!0,useFactory:()=>{let r=x(oB,{optional:!0});return()=>r.initialize()}},{provide:Go,multi:!0,useFactory:()=>{let r=x(cB);return()=>{r.initialize()}}},e===!0?{provide:iM,useValue:!0}:[],{provide:oM,useValue:t??$T}]}function aB(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var cB=(()=>{class n{constructor(){this.subscription=new mt,this.initialized=!1,this.zone=x(je),this.pendingTasks=x(Qi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{je.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{je.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uB=(()=>{class n{constructor(){this.appRef=x(xr),this.taskService=x(Qi),this.ngZone=x(je),this.zonelessEnabled=x(t_),this.disableScheduling=x(iM,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new mt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(oM,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ay||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?aD:zT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lB(){return typeof $localize<"u"&&$localize.locale||Hh}var Ea=new K("",{providedIn:"root",factory:()=>x(Ea,be.Optional|be.SkipSelf)||lB()});var hv=new K("");function fh(n){return!n.moduleRef}function dB(n){let e=fh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(je);return t.run(()=>{fh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ri,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),fh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(hv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(hv);s.add(o),n.moduleRef.onDestroy(()=>{yh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return rB(r,t,()=>{let o=e.get(TM);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ea,Hh);if(Uj(s||Hh),fh(n)){let a=e.get(xr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return hB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function hB(n,e){let t=n.injector.get(xr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var vh=null;function fB(n=[],e){return jn.create({name:e,providers:[{provide:Qh,useValue:"platform"},{provide:hv,useValue:new Set([()=>vh=null])},...n]})}function pB(n=[]){if(vh)return vh;let e=fB(n);return vh=e,eB(),gB(e),e}function gB(n){n.get(Vv,null)?.forEach(t=>t())}function u_(){return!1}var Pr=(()=>{class n{static{this.__NG_ELEMENT_ID__=mB}}return n})();function mB(n){return yB(hn(),xe(),(n&16)===16)}function yB(n,e,t){if(Su(n)&&!t){let r=Gi(n.index,e);return new Zo(r,r)}else if(n.type&175){let r=e[Sn];return new Zo(r,e)}return null}var fv=class{constructor(){}supports(e){return e instanceof Map||lM(e)}create(){return new pv}},pv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||lM(e)))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new gv(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},gv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function PD(){return new l_([new fv])}var l_=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:PD})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PD()),deps:[[n,new yv,new ma]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new X(901,!1)}}return n})();function SM(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=pB(r),o=[sB({}),{provide:da,useExisting:uB},...t||[]],s=new Uh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return dB({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var RD=!1;function vB(){RD||(RD=!0,DV(),Nj(),Gj(),Fj(),sj(),W2(),S2(),SL())}function _B(n,e){return Cf(n)}function MM(){return Xo([{provide:sh,useFactory:()=>{let n=!0;return lu()&&(n=!!x(_a,{optional:!0})?.get(nS,null)),n&&Mr("NgHydration"),n}},{provide:Go,useValue:()=>{w2(!1),lu()&&x(sh)&&(wB(),vB())},multi:!0},{provide:sS,useFactory:()=>lu()&&x(sh)},{provide:ts,useFactory:()=>{if(lu()&&x(sh)){let n=x(xr),e=x(jn);return()=>{_B(n,e).then(()=>{b2(n)})}}return()=>{}},multi:!0}])}function wB(){let n=nf(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===IV){e=t;break}if(!e)throw new X(-507,!1)}function to(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Fu(n,e){Mr("NgSignals");let t=mb(n);return e?.equal&&(t[Qr].equal=e.equal),t}function cr(n){let e=Ae(null);try{return n()}finally{Ae(e)}}function AM(n){let e=zi(n);if(!e)return null;let t=new pa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kM=null;function pi(){return kM}function OM(n){kM??=n}var Pf=class{};var Bt=new K(""),__=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(CB),providedIn:"platform"})}}return n})(),FM=new K(""),CB=(()=>{class n extends __{constructor(){super(),this._doc=x(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pi().getBaseHref(this._doc)}onPopState(t){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function w_(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function xM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function hi(n){return n&&n[0]!=="?"?"?"+n:n}var gi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(C_),providedIn:"root"})}}return n})(),VM=new K(""),C_=(()=>{class n extends gi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return w_(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+hi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(__),z(VM,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LM=(()=>{class n extends gi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=w_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+hi(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(z(__),z(VM,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),ba=(()=>{class n{constructor(t){this._subject=new De,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bB(xM(PM(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+hi(r))}normalize(t){return n.stripTrailingSlash(IB(this._basePath,PM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=hi}static{this.joinWithSlash=w_}static{this.stripTrailingSlash=xM}static{this.\u0275fac=function(r){return new(r||n)(z(gi))}}static{this.\u0275prov=Q({token:n,factory:()=>EB(),providedIn:"root"})}}return n})();function EB(){return new ba(z(gi))}function IB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function PM(n){return n.replace(/\/index.html$/,"")}function bB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var fn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(fn||{}),Qe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Qe||{}),xn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(xn||{}),no={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function DB(n){return $n(n)[dt.LocaleId]}function TB(n,e,t){let r=$n(n),i=[r[dt.DayPeriodsFormat],r[dt.DayPeriodsStandalone]],o=zn(i,e);return zn(o,t)}function SB(n,e,t){let r=$n(n),i=[r[dt.DaysFormat],r[dt.DaysStandalone]],o=zn(i,e);return zn(o,t)}function MB(n,e,t){let r=$n(n),i=[r[dt.MonthsFormat],r[dt.MonthsStandalone]],o=zn(i,e);return zn(o,t)}function AB(n,e){let r=$n(n)[dt.Eras];return zn(r,e)}function If(n,e){let t=$n(n);return zn(t[dt.DateFormat],e)}function bf(n,e){let t=$n(n);return zn(t[dt.TimeFormat],e)}function Df(n,e){let r=$n(n)[dt.DateTimeFormat];return zn(r,e)}function Nf(n,e){let t=$n(n),r=t[dt.NumberSymbols][e];if(typeof r>"u"){if(e===no.CurrencyDecimal)return t[dt.NumberSymbols][no.Decimal];if(e===no.CurrencyGroup)return t[dt.NumberSymbols][no.Group]}return r}function jM(n){if(!n[dt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[dt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xB(n){let e=$n(n);return jM(e),(e[dt.ExtraData][2]||[]).map(r=>typeof r=="string"?d_(r):[d_(r[0]),d_(r[1])])}function PB(n,e,t){let r=$n(n);jM(r);let i=[r[dt.ExtraData][0],r[dt.ExtraData][1]],o=zn(i,e)||[];return zn(o,t)||[]}function zn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function d_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var RB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tf={},NB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,fi=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(fi||{}),$e=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}($e||{}),Ue=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ue||{});function kB(n,e,t,r){let i=zB(n);e=di(t,e)||e;let s=[],a;for(;e;)if(a=NB.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=UM(r,c),i=$B(i,r,!0));let l="";return s.forEach(d=>{let f=BB(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Rf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function di(n,e){let t=DB(n);if(Tf[t]??={},Tf[t][e])return Tf[t][e];let r="";switch(e){case"shortDate":r=If(n,xn.Short);break;case"mediumDate":r=If(n,xn.Medium);break;case"longDate":r=If(n,xn.Long);break;case"fullDate":r=If(n,xn.Full);break;case"shortTime":r=bf(n,xn.Short);break;case"mediumTime":r=bf(n,xn.Medium);break;case"longTime":r=bf(n,xn.Long);break;case"fullTime":r=bf(n,xn.Full);break;case"short":let i=di(n,"shortTime"),o=di(n,"shortDate");r=Sf(Df(n,xn.Short),[i,o]);break;case"medium":let s=di(n,"mediumTime"),a=di(n,"mediumDate");r=Sf(Df(n,xn.Medium),[s,a]);break;case"long":let c=di(n,"longTime"),l=di(n,"longDate");r=Sf(Df(n,xn.Long),[c,l]);break;case"full":let d=di(n,"fullTime"),f=di(n,"fullDate");r=Sf(Df(n,xn.Full),[d,f]);break}return r&&(Tf[t][e]=r),r}function Sf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ur(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function OB(n,e){return ur(n,3).substring(0,e)}function bt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=FB(n,o);if((t>0||a>-t)&&(a+=t),n===$e.Hours)a===0&&t===-12&&(a=12);else if(n===$e.FractionalSeconds)return OB(a,e);let c=Nf(s,no.MinusSign);return ur(a,e,c,r,i)}}function FB(n,e){switch(n){case $e.FullYear:return e.getFullYear();case $e.Month:return e.getMonth();case $e.Date:return e.getDate();case $e.Hours:return e.getHours();case $e.Minutes:return e.getMinutes();case $e.Seconds:return e.getSeconds();case $e.FractionalSeconds:return e.getMilliseconds();case $e.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ze(n,e,t=fn.Format,r=!1){return function(i,o){return VB(i,o,n,e,t,r)}}function VB(n,e,t,r,i,o){switch(t){case Ue.Months:return MB(e,i,r)[n.getMonth()];case Ue.Days:return SB(e,i,r)[n.getDay()];case Ue.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=xB(e),d=PB(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,I]=g,T=s>=y.hours&&a>=y.minutes,S=s<I.hours||s===I.hours&&a<I.minutes;if(y.hours<I.hours){if(T&&S)return!0}else if(T||S)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return TB(e,i,r)[s<12?0:1];case Ue.Eras:return AB(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Mf(n){return function(e,t,r){let i=-1*r,o=Nf(t,no.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case fi.Short:return(i>=0?"+":"")+ur(s,2,o)+ur(Math.abs(i%60),2,o);case fi.ShortGMT:return"GMT"+(i>=0?"+":"")+ur(s,1,o);case fi.Long:return"GMT"+(i>=0?"+":"")+ur(s,2,o)+":"+ur(Math.abs(i%60),2,o);case fi.Extended:return r===0?"Z":(i>=0?"+":"")+ur(s,2,o)+":"+ur(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var LB=0,xf=4;function jB(n){let e=Rf(n,LB,1).getDay();return Rf(n,0,1+(e<=xf?xf:xf+7)-e)}function BM(n){let e=n.getDay(),t=e===0?-3:xf-e;return Rf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function h_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=BM(t),s=jB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ur(i,n,Nf(r,no.MinusSign))}}function Af(n,e=!1){return function(t,r){let o=BM(t).getFullYear();return ur(o,n,Nf(r,no.MinusSign),e)}}var f_={};function BB(n){if(f_[n])return f_[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ze(Ue.Eras,Qe.Abbreviated);break;case"GGGG":e=Ze(Ue.Eras,Qe.Wide);break;case"GGGGG":e=Ze(Ue.Eras,Qe.Narrow);break;case"y":e=bt($e.FullYear,1,0,!1,!0);break;case"yy":e=bt($e.FullYear,2,0,!0,!0);break;case"yyy":e=bt($e.FullYear,3,0,!1,!0);break;case"yyyy":e=bt($e.FullYear,4,0,!1,!0);break;case"Y":e=Af(1);break;case"YY":e=Af(2,!0);break;case"YYY":e=Af(3);break;case"YYYY":e=Af(4);break;case"M":case"L":e=bt($e.Month,1,1);break;case"MM":case"LL":e=bt($e.Month,2,1);break;case"MMM":e=Ze(Ue.Months,Qe.Abbreviated);break;case"MMMM":e=Ze(Ue.Months,Qe.Wide);break;case"MMMMM":e=Ze(Ue.Months,Qe.Narrow);break;case"LLL":e=Ze(Ue.Months,Qe.Abbreviated,fn.Standalone);break;case"LLLL":e=Ze(Ue.Months,Qe.Wide,fn.Standalone);break;case"LLLLL":e=Ze(Ue.Months,Qe.Narrow,fn.Standalone);break;case"w":e=h_(1);break;case"ww":e=h_(2);break;case"W":e=h_(1,!0);break;case"d":e=bt($e.Date,1);break;case"dd":e=bt($e.Date,2);break;case"c":case"cc":e=bt($e.Day,1);break;case"ccc":e=Ze(Ue.Days,Qe.Abbreviated,fn.Standalone);break;case"cccc":e=Ze(Ue.Days,Qe.Wide,fn.Standalone);break;case"ccccc":e=Ze(Ue.Days,Qe.Narrow,fn.Standalone);break;case"cccccc":e=Ze(Ue.Days,Qe.Short,fn.Standalone);break;case"E":case"EE":case"EEE":e=Ze(Ue.Days,Qe.Abbreviated);break;case"EEEE":e=Ze(Ue.Days,Qe.Wide);break;case"EEEEE":e=Ze(Ue.Days,Qe.Narrow);break;case"EEEEEE":e=Ze(Ue.Days,Qe.Short);break;case"a":case"aa":case"aaa":e=Ze(Ue.DayPeriods,Qe.Abbreviated);break;case"aaaa":e=Ze(Ue.DayPeriods,Qe.Wide);break;case"aaaaa":e=Ze(Ue.DayPeriods,Qe.Narrow);break;case"b":case"bb":case"bbb":e=Ze(Ue.DayPeriods,Qe.Abbreviated,fn.Standalone,!0);break;case"bbbb":e=Ze(Ue.DayPeriods,Qe.Wide,fn.Standalone,!0);break;case"bbbbb":e=Ze(Ue.DayPeriods,Qe.Narrow,fn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ze(Ue.DayPeriods,Qe.Abbreviated,fn.Format,!0);break;case"BBBB":e=Ze(Ue.DayPeriods,Qe.Wide,fn.Format,!0);break;case"BBBBB":e=Ze(Ue.DayPeriods,Qe.Narrow,fn.Format,!0);break;case"h":e=bt($e.Hours,1,-12);break;case"hh":e=bt($e.Hours,2,-12);break;case"H":e=bt($e.Hours,1);break;case"HH":e=bt($e.Hours,2);break;case"m":e=bt($e.Minutes,1);break;case"mm":e=bt($e.Minutes,2);break;case"s":e=bt($e.Seconds,1);break;case"ss":e=bt($e.Seconds,2);break;case"S":e=bt($e.FractionalSeconds,1);break;case"SS":e=bt($e.FractionalSeconds,2);break;case"SSS":e=bt($e.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Mf(fi.Short);break;case"ZZZZZ":e=Mf(fi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Mf(fi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Mf(fi.Long);break;default:return null}return f_[n]=e,e}function UM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function UB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function $B(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=UM(e,i);return UB(n,r*(o-i))}function zB(n){if(RM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Rf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(RB))return qB(r)}let e=new Date(n);if(!RM(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function qB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function RM(n){return n instanceof Date&&!isNaN(n.valueOf())}function $M(n,e,t){return mM(n,e,t)}function kf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var zM=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new p_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){NM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){NM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Te(Nu),Te(e_))}}static{this.\u0275dir=Rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),p_=class{constructor(){this.$implicit=null,this.ngIf=null}};function NM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${cn(e)}'.`)}var qM=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:br.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Te(ci),Te(l_),Te(Zi))}}static{this.\u0275dir=Rt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function HM(n,e){return new X(2100,!1)}var g_=class{createSubscription(e,t){return cr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){cr(()=>e.unsubscribe())}},m_=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},HB=new m_,GB=new g_,Of=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(eo(t))return HB;if(c_(t))return GB;throw HM(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Te(Pr,16))}}static{this.\u0275pipe=Tu({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var WB="mediumDate",KB=new K(""),QB=new K(""),ro=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??WB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return kB(t,s,o||this.locale,a)}catch(s){throw HM(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Te(Ea,16),Te(KB,24),Te(QB,24))}}static{this.\u0275pipe=Tu({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Pn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=ln({})}}return n})(),E_="browser",YB="server";function ZB(n){return n===E_}function mi(n){return n===YB}var GM=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>ZB(x(Ot))?new y_(x(Bt),window):new v_})}}return n})(),y_=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=JB(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function JB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var v_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ia=class{};var Lu=class{},Lf=class{},Rr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var b_=class{encodeKey(e){return WM(e)}encodeValue(e){return WM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function XB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var eU=/%(\d[a-f0-9])/gi,tU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function WM(n){return encodeURIComponent(n).replace(eU,(e,t)=>tU[t]??e)}function Ff(n){return`${n}`}var oo=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new b_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=XB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ff):[Ff(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ff(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ff(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var D_=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function nU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function KM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function QM(n){return typeof Blob<"u"&&n instanceof Blob}function YM(n){return typeof FormData<"u"&&n instanceof FormData}function rU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Vu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(nU(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Rr,this.context??=new D_,!this.params)this.params=new oo,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||KM(this.body)||QM(this.body)||YM(this.body)||rU(this.body)?this.body:this.body instanceof oo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||YM(this.body)?null:QM(this.body)?this.body.type||null:KM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof oo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},so=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(so||{}),ju=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Rr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},jf=class n extends ju{constructor(e={}){super(e),this.type=so.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ns=class n extends ju{constructor(e={}){super(e),this.type=so.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},io=class extends ju{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},aA=200,iU=204;function I_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var M_=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Vu)o=t;else{let c;i.headers instanceof Rr?c=i.headers:c=new Rr(i.headers);let l;i.params&&(i.params instanceof oo?l=i.params:l=new oo({fromObject:i.params})),o=new Vu(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=oe(o).pipe(Jr(c=>this.handler.handle(c)));if(t instanceof Vu||i.observe==="events")return s;let a=s.pipe(Pt(c=>c instanceof ns));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(re(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(re(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(re(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(re(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new oo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,I_(i,r))}post(t,r,i={}){return this.request("POST",t,I_(i,r))}put(t,r,i={}){return this.request("PUT",t,I_(i,r))}static{this.\u0275fac=function(r){return new(r||n)(z(Lu))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),oU=/^\)\]\}',?\n/,sU="X-Request-URL";function ZM(n){if(n.url)return n.url;let e=sU.toLocaleLowerCase();return n.headers.get(e)}var aU=(()=>{class n{constructor(){this.fetchImpl=x(T_,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=x(je)}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(S_,o=>r.error(new io({error:o}))),()=>i.abort()})}doRequest(t,r,i){return V(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,$({signal:r},o)));cU(y),i.next({type:so.Sent}),s=yield y}catch(y){i.error(new io({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new Rr(s.headers),c=s.statusText,l=ZM(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&i.next(new jf({headers:a,status:d,statusText:c,url:l})),s.body){let y=s.headers.get("content-length"),I=[],T=s.body.getReader(),S=0,j,q,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>V(this,null,function*(){for(;;){let{done:ie,value:te}=yield T.read();if(ie)break;if(I.push(te),S+=te.length,t.reportProgress){q=t.responseType==="text"?(q??"")+(j??=new TextDecoder).decode(te,{stream:!0}):void 0;let b=()=>i.next({type:so.DownloadProgress,total:y?+y:void 0,loaded:S,partialText:q});L?L.run(b):b()}}}));let Y=this.concatChunks(I,S);try{let ie=s.headers.get("Content-Type")??"";f=this.parseBody(t,Y,ie)}catch(ie){i.error(new io({error:ie,headers:new Rr(s.headers),status:s.status,statusText:s.statusText,url:ZM(s)??t.urlWithParams}));return}}d===0&&(d=f?aA:0),d>=200&&d<300?(i.next(new ns({body:f,headers:a,status:d,statusText:c,url:l})),i.complete()):i.error(new io({error:f,headers:a,status:d,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(oU,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),T_=class{};function S_(){}function cU(n){n.then(S_,S_)}function uU(n,e){return e(n)}function lU(n,e,t){return(r,i)=>Bn(t,()=>e(r,o=>n(o,i)))}var cA=new K(""),uA=new K(""),dU=new K("",{providedIn:"root",factory:()=>!0});var JM=(()=>{class n extends Lu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=x(Qi),this.contributeToStability=x(dU)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(cA),...this.injector.get(uA,[])]));this.chain=r.reduceRight((i,o)=>lU(i,o,this.injector),uU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Bo(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(z(Lf),z(un))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();var hU=/^\)\]\}',?\n/;function fU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var XM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new X(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ne(r.\u0275loadImpl()):oe(null)).pipe(at(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((T,S)=>s.setRequestHeader(T,S.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let T=t.detectContentTypeHeader();T!==null&&s.setRequestHeader("Content-Type",T)}if(t.responseType){let T=t.responseType.toLowerCase();s.responseType=T!=="json"?T:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let T=s.statusText||"OK",S=new Rr(s.getAllResponseHeaders()),j=fU(s)||t.url;return c=new jf({headers:S,status:s.status,statusText:T,url:j}),c},d=()=>{let{headers:T,status:S,statusText:j,url:q}=l(),L=null;S!==iU&&(L=typeof s.response>"u"?s.responseText:s.response),S===0&&(S=L?aA:0);let Y=S>=200&&S<300;if(t.responseType==="json"&&typeof L=="string"){let ie=L;L=L.replace(hU,"");try{L=L!==""?JSON.parse(L):null}catch(te){L=ie,Y&&(Y=!1,L={error:te,text:L})}}Y?(o.next(new ns({body:L,headers:T,status:S,statusText:j,url:q||void 0})),o.complete()):o.error(new io({error:L,headers:T,status:S,statusText:j,url:q||void 0}))},f=T=>{let{url:S}=l(),j=new io({error:T,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(j)},g=!1,y=T=>{g||(o.next(l()),g=!0);let S={type:so.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(S.total=T.total),t.responseType==="text"&&s.responseText&&(S.partialText=s.responseText),o.next(S)},I=T=>{let S={type:so.UploadProgress,loaded:T.loaded};T.lengthComputable&&(S.total=T.total),o.next(S)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:so.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(z(Ia))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),lA=new K(""),pU="XSRF-TOKEN",gU=new K("",{providedIn:"root",factory:()=>pU}),mU="X-XSRF-TOKEN",yU=new K("",{providedIn:"root",factory:()=>mU}),Bf=class{},vU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=kf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(z(Bt),z(Ot),z(gU))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function _U(n,e){let t=n.url.toLowerCase();if(!x(lA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=x(Bf).getToken(),i=x(yU);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function dA(...n){let e=[M_,XM,JM,{provide:Lu,useExisting:JM},{provide:Lf,useFactory:()=>x(aU,{optional:!0})??x(XM)},{provide:cA,useValue:_U,multi:!0},{provide:lA,useValue:!0},{provide:Bf,useClass:vU}];for(let t of n)e.push(...t.\u0275providers);return Xo(e)}var wU=new K(""),eA="b",tA="h",nA="s",rA="st",iA="u",oA="rt",Vf=new K(""),CU=["GET","HEAD"];function EU(n,e){let y=x(Vf),{isCacheActive:t}=y,r=JI(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!CU.includes(o)||!r.includeRequestsWithAuthHeaders&&IU(n)||r.filter?.(n)===!1)return e(n);let s=x(_a),a=x(wU,{optional:!0}),c=mi(x(Ot));if(a&&!c)throw new X(2803,!1);let l=c&&a?SU(n.url,a):n.url,d=DU(n,l),f=s.get(d,null),g=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(g=i.includeHeaders),f){let{[eA]:I,[oA]:T,[tA]:S,[nA]:j,[rA]:q,[iA]:L}=f,Y=I;switch(T){case"arraybuffer":Y=new TextEncoder().encode(I).buffer;break;case"blob":Y=new Blob([I]);break}let ie=new Rr(S);return oe(new ns({body:Y,headers:ie,status:j,statusText:q,url:L}))}return e(n).pipe(ct(I=>{I instanceof ns&&c&&s.set(d,{[eA]:I.body,[tA]:bU(I.headers,g),[nA]:I.status,[rA]:I.statusText,[iA]:l,[oA]:n.responseType})}))}function IU(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function bU(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function sA(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function DU(n,e){let{params:t,method:r,responseType:i}=n,o=sA(t),s=n.serializeBody();s instanceof URLSearchParams?s=sA(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=TU(a);return c}function TU(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function hA(n){return[{provide:Vf,useFactory:()=>(Mr("NgHttpTransferCache"),$({isCacheActive:!0},n))},{provide:uA,useValue:EU,multi:!0,deps:[_a,Vf]},{provide:ts,multi:!0,useFactory:()=>{let e=x(xr),t=x(Vf);return()=>{Cf(e).then(()=>{t.isCacheActive=!1})}}}]}function SU(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var P_=class extends Pf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},R_=class n extends P_{static makeCurrent(){OM(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=MU();return t==null?null:AU(t)}resetBaseElement(){Bu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kf(document.cookie,e)}},Bu=null;function MU(){return Bu=Bu||document.querySelector("base"),Bu?Bu.getAttribute("href"):null}function AU(n){return new URL(n,document.baseURI).pathname}var xU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),N_=new K(""),mA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(z(N_),z(je))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Uf=class{constructor(e){this._doc=e}},A_="ng-app-id",yA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${A_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(A_),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(A_,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(z(Bt),z(rf),z(Lv,8),z(Ot))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),x_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},F_=/%COMP%/g,vA="%COMP%",PU=`_nghost-${vA}`,RU=`_ngcontent-${vA}`,NU=!0,kU=new K("",{providedIn:"root",factory:()=>NU});function OU(n){return RU.replace(F_,n)}function FU(n){return PU.replace(F_,n)}function _A(n,e){return e.map(t=>t.replace(F_,n))}var fA=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=mi(a),this.defaultRenderer=new Uu(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Er.ShadowDom&&(r=ae($({},r),{encapsulation:Er.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof $f?i.applyToHost(t):i instanceof $u&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Er.Emulated:o=new $f(c,l,r,this.appId,d,s,a,f);break;case Er.ShadowDom:return new k_(c,l,t,r,s,a,this.nonce,f);default:o=new $u(c,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(z(mA),z(yA),z(rf),z(kU),z(Bt),z(Ot),z(je),z(Lv))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Uu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(x_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(pA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(pA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=x_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=x_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(br.DashCase|br.Important)?e.style.setProperty(t,r,i&br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function pA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var k_=class extends Uu{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=_A(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$u=class extends Uu{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?_A(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$f=class extends $u{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=OU(l),this.hostAttr=FU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},VU=(()=>{class n extends Uf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(z(Bt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),gA=["alt","control","meta","shift"],LU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},BU=(()=>{class n extends Uf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),gA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=LU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gA.forEach(s=>{if(s!==i){let a=jU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(z(Bt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function wA(n,e){return SM($({rootComponent:n},UU(e)))}function UU(n){return{appProviders:[...GU,...n?.providers??[]],platformProviders:HU}}function $U(){R_.makeCurrent()}function zU(){return new ri}function qU(){return ZT(document),document}var HU=[{provide:Ot,useValue:E_},{provide:Vv,useValue:$U,multi:!0},{provide:Bt,useFactory:qU,deps:[]}];var GU=[{provide:Qh,useValue:"root"},{provide:ri,useFactory:zU,deps:[]},{provide:N_,useClass:VU,multi:!0,deps:[Bt,je,Ot]},{provide:N_,useClass:BU,multi:!0,deps:[Bt]},fA,yA,mA,{provide:fa,useExisting:fA},{provide:Ia,useClass:xU,deps:[]},[]];var CA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(z(Bt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=z(WU),i},providedIn:"root"})}}return n})(),WU=(()=>{class n extends zu{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Sr.NONE:return r;case Sr.HTML:return Yi(r,"HTML")?Tr(r):yS(this._doc,String(r)).toString();case Sr.STYLE:return Yi(r,"Style")?Tr(r):r;case Sr.SCRIPT:if(Yi(r,"Script"))return Tr(r);throw new X(5200,!1);case Sr.URL:return Yi(r,"URL")?Tr(r):af(String(r));case Sr.RESOURCE_URL:if(Yi(r,"ResourceURL"))return Tr(r);throw new X(5201,!1);default:throw new X(5202,!1)}}bypassSecurityTrustHtml(t){return aS(t)}bypassSecurityTrustStyle(t){return cS(t)}bypassSecurityTrustScript(t){return uS(t)}bypassSecurityTrustUrl(t){return lS(t)}bypassSecurityTrustResourceUrl(t){return dS(t)}static{this.\u0275fac=function(r){return new(r||n)(z(Bt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),O_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(O_||{});function EA(...n){let e=[],t=new Set,r=t.has(O_.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);return Xo([[],MM(),t.has(O_.NoHttpTransferCache)||r?[]:hA({}),e])}var we="primary",il=Symbol("RouteTitle"),U_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Pa(n){return new U_(n)}function QU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nr(n[t],e[t]))return!1;return!0}function Nr(n,e){let t=n?$_(n):void 0,r=e?$_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!NA(n[i],e[i]))return!1;return!0}function $_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function kA(n){return n.length>0?n[n.length-1]:null}function co(n){return $m(n)?n:eo(n)?Ne(Promise.resolve(n)):oe(n)}var ZU={exact:FA,subset:VA},OA={exact:JU,subset:XU,ignored:()=>!0};function IA(n,e,t){return ZU[t.paths](n.root,e.root,t.matrixParams)&&OA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JU(n,e){return Nr(n,e)}function FA(n,e,t){if(!is(n.segments,e.segments)||!Hf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!FA(n.children[r],e.children[r],t))return!1;return!0}function XU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NA(n[t],e[t]))}function VA(n,e,t){return LA(n,e,e.segments,t)}function LA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!is(i,t)||e.hasChildren()||!Hf(i,t,r))}else if(n.segments.length===t.length){if(!is(n.segments,t)||!Hf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!VA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!is(n.segments,i)||!Hf(n.segments,i,r)||!n.children[we]?!1:LA(n.children[we],e,o,r)}}function Hf(n,e,t){return e.every((r,i)=>OA[t](n[i].parameters,r.parameters))}var vi=class{constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pa(this.queryParams),this._queryParamMap}toString(){return n$.serialize(this)}},ze=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gf(this)}},rs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Pa(this.parameters),this._parameterMap}toString(){return BA(this)}};function e$(n,e){return is(n,e)&&n.every((t,r)=>Nr(t.parameters,e[r].parameters))}function is(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function t$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var ol=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new Ra,providedIn:"root"})}}return n})(),Ra=class{parse(e){let t=new q_(e);return new vi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qu(e.root,!0)}`,r=o$(e.queryParams),i=typeof e.fragment=="string"?`#${r$(e.fragment)}`:"";return`${t}${r}${i}`}},n$=new Ra;function Gf(n){return n.segments.map(e=>BA(e)).join("/")}function qu(n,e){if(!n.hasChildren())return Gf(n);if(e){let t=n.children[we]?qu(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==we&&r.push(`${i}:${qu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=t$(n,(r,i)=>i===we?[qu(n.children[we],!1)]:[`${i}:${qu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${Gf(n)}/${t[0]}`:`${Gf(n)}/(${t.join("//")})`}}function jA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zf(n){return jA(n).replace(/%3B/gi,";")}function r$(n){return encodeURI(n)}function z_(n){return jA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wf(n){return decodeURIComponent(n)}function bA(n){return Wf(n.replace(/\+/g,"%20"))}function BA(n){return`${z_(n.path)}${i$(n.parameters)}`}function i$(n){return Object.entries(n).map(([e,t])=>`;${z_(e)}=${z_(t)}`).join("")}function o$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${zf(t)}=${zf(i)}`).join("&"):`${zf(t)}=${zf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var s$=/^[^\/()?;#]+/;function V_(n){let e=n.match(s$);return e?e[0]:""}var a$=/^[^\/()?;=#]+/;function c$(n){let e=n.match(a$);return e?e[0]:""}var u$=/^[^=?&#]+/;function l$(n){let e=n.match(u$);return e?e[0]:""}var d$=/^[^&#]+/;function h$(n){let e=n.match(d$);return e?e[0]:""}var q_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new ze(e,t)),r}parseSegment(){let e=V_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new rs(Wf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=c$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=V_(this.remaining);i&&(r=i,this.capture(r))}e[Wf(t)]=Wf(r)}parseQueryParam(e){let t=l$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=h$(this.remaining);s&&(r=s,this.capture(r))}let i=bA(t),o=bA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=V_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[we]:new ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function UA(n){return n.segments.length>0?new ze([],{[we]:n}):n}function $A(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=$A(i);if(r===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ze(n.segments,e);return f$(t)}function f$(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new ze(n.segments.concat(e.segments),e.children)}return n}function os(n){return n instanceof vi}function p$(n,e,t=null,r=null){let i=zA(n);return qA(i,e,t,r)}function zA(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=UA(r);return e??i}function qA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return L_(i,i,i,t,r);let o=g$(e);if(o.toRoot())return L_(i,i,new ze([],{}),t,r);let s=m$(o,i,n),a=s.processChildren?Wu(s.segmentGroup,s.index,o.commands):GA(s.segmentGroup,s.index,o.commands);return L_(i,s.segmentGroup,a,t,r)}function Kf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yu(n){return typeof n=="object"&&n!=null&&n.outlets}function L_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=HA(n,e,t);let a=UA($A(s));return new vi(a,o,i)}function HA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=HA(o,e,t)}),new ze(n.segments,r)}var Qf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Kf(r[0]))throw new X(4003,!1);let i=r.find(Yu);if(i&&i!==kA(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function g$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Qf(t,e,r)}var Ma=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function m$(n,e,t){if(n.isAbsolute)return new Ma(e,!0,0);if(!t)return new Ma(e,!1,NaN);if(t.parent===null)return new Ma(t,!0,0);let r=Kf(n.commands[0])?0:1,i=t.segments.length-1+r;return y$(t,i,n.numberOfDoubleDots)}function y$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Ma(r,!1,i-o)}function v$(n){return Yu(n[0])?n[0].outlets:{[we]:n}}function GA(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return Wu(n,e,t);let r=_$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ze(n.segments.slice(0,r.pathIndex),{});return o.children[we]=new ze(n.segments.slice(r.pathIndex),n.children),Wu(o,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?H_(n,e,t):r.match?Wu(n,0,i):H_(n,e,t)}function Wu(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=v$(t),i={};if(Object.keys(r).some(o=>o!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let o=Wu(n.children[we],e,t);return new ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=GA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ze(n.segments,i)}}function _$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Yu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!TA(c,l,s))return o;r+=2}else{if(!TA(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function H_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Yu(o)){let c=w$(o.outlets);return new ze(r,c)}if(i===0&&Kf(t[0])){let c=n.segments[e];r.push(new rs(c.path,DA(t[0]))),i++;continue}let s=Yu(o)?o.outlets[we]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Kf(a)?(r.push(new rs(s,DA(a))),i+=2):(r.push(new rs(s,{})),i++)}return new ze(r,{})}function w$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=H_(new ze([],{}),0,r))}),e}function DA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function TA(n,e,t){return n==t.path&&Nr(e,t.parameters)}var Ku="imperative",Ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ft||{}),qn=class{constructor(e,t){this.id=e,this.url=t}},Na=class extends qn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kr=class extends qn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Nn||{}),Yf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Yf||{}),yi=class extends qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ao=class extends qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},Zu=class extends qn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zf=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},G_=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},W_=class extends qn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},K_=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q_=class extends qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Y_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Z_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},J_=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},X_=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e0=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t0=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ju=class{},ka=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function C$(n,e){return n.providers&&!n._injector&&(n._injector=yf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lr(n){return n.outlet||we}function E$(n,e){let t=n.filter(r=>lr(r)===e);return t.push(...n.filter(r=>lr(r)!==e)),t}function sl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var n0=class{get injector(){return sl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new al(this.rootInjector),this.attachRef=null}},al=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new n0(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(z(un))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=r0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=r0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=i0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return i0(e,this._root).map(t=>t.value)}};function r0(n,e){if(n===e.value)return e;for(let t of e.children){let r=r0(n,t);if(r)return r}return null}function i0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=i0(n,t);if(r.length)return r.unshift(e),r}return[]}var Rn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Sa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ep=class extends Xf{constructor(e,t){super(e),this.snapshot=t,f0(this,e)}toString(){return this.snapshot.toString()}};function WA(n){let e=I$(n),t=new xt([new rs("",{})]),r=new xt({}),i=new xt({}),o=new xt({}),s=new xt(""),a=new Hn(t,r,o,s,i,we,n,e.root);return a.snapshot=e.root,new ep(new Rn(a,[]),e)}function I$(n){let e={},t={},r={},i="",o=new Aa([],e,r,i,t,we,n,null,{});return new np("",new Rn(o,[]))}var Hn=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(re(l=>l[il]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Pa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Pa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&QA(i)&&(r.resolve[il]=i.title),r}var Aa=class{get title(){return this.data?.[il]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},np=class extends Xf{constructor(e,t){super(t),this.url=e,f0(this,t)}toString(){return KA(this._root)}};function f0(n,e){e.value._routerState=n,e.children.forEach(t=>f0(n,t))}function KA(n){let e=n.children.length>0?` { ${n.children.map(KA).join(", ")} } `:"";return`${n.value}${e}`}function j_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nr(e.params,t.params)||n.paramsSubject.next(t.params),YU(e.url,t.url)||n.urlSubject.next(t.url),Nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function o0(n,e){let t=Nr(n.params,e.params)&&e$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||o0(n.parent,e.parent))}function QA(n){return typeof n.title=="string"||n.title===null}var p0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new De,this.deactivateEvents=new De,this.attachEvents=new De,this.detachEvents=new De,this.parentContexts=x(al),this.location=x(Nu),this.changeDetector=x(Pr),this.inputBinder=x(sp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new s0(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Un]})}}return n})(),s0=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hn?this.route:e===al?this.childContexts:this.parent.get(e,t)}},sp=new K(""),SA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=cu([r.queryParams,r.params,r.data]).pipe(at(([o,s,a],c)=>(a=$($($({},o),s),a),c===0?oe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=AM(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function b$(n,e,t){let r=Xu(n,e._root,t?t._root:void 0);return new ep(r,e)}function Xu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=D$(n,e,t);return new Rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xu(n,a)),s}}let r=T$(e.value),i=e.children.map(o=>Xu(n,o));return new Rn(r,i)}}function D$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xu(n,r,i);return Xu(n,r)})}function T$(n){return new Hn(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var el=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},YA="ngNavigationCancelingError";function rp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=os(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ZA(!1,Nn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ZA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[YA]=!0,t.cancellationCode=e,t}function S$(n){return JA(n)&&os(n.url)}function JA(n){return!!n&&n[YA]}var M$=(n,e,t,r)=>re(i=>(new a0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),a0=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),j_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Sa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Sa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Sa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new t0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new X_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(j_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),j_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ip=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xa=class{constructor(e,t){this.component=e,this.route=t}};function A$(n,e,t){let r=n._root,i=e?e._root:null;return Hu(r,i,t,[r.value])}function x$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!FD(n)?n:e.get(n):r}function Hu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Sa(e);return n.children.forEach(s=>{P$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qu(a,t.getContext(s),i)),i}function P$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=R$(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ip(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hu(n,e,a?a.children:null,r,i):Hu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xa(a.outlet.component,s))}else s&&Qu(e,a,i),i.canActivateChecks.push(new ip(r)),o.component?Hu(n,null,a?a.children:null,r,i):Hu(n,null,t,r,i);return i}function R$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!is(n.url,e.url);case"pathParamsOrQueryParamsChange":return!is(n.url,e.url)||!Nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!o0(n,e)||!Nr(n.queryParams,e.queryParams);case"paramsChange":default:return!o0(n,e)}}function Qu(n,e,t){let r=Sa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Qu(s,e.children.getContext(o),t):Qu(s,null,t):Qu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xa(e.outlet.component,i)):t.canDeactivateChecks.push(new xa(null,i)):t.canDeactivateChecks.push(new xa(null,i))}function cl(n){return typeof n=="function"}function N$(n){return typeof n=="boolean"}function k$(n){return n&&cl(n.canLoad)}function O$(n){return n&&cl(n.canActivate)}function F$(n){return n&&cl(n.canActivateChild)}function V$(n){return n&&cl(n.canDeactivate)}function L$(n){return n&&cl(n.canMatch)}function XA(n){return n instanceof Zr||n?.name==="EmptyError"}var qf=Symbol("INITIAL_VALUE");function Oa(){return at(n=>cu(n.map(e=>e.pipe(Xr(1),$o(qf)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===qf)return qf;if(t===!1||j$(t))return t}return!0}),Pt(e=>e!==qf),Xr(1)))}function j$(n){return os(n)||n instanceof el}function B$(n,e){return It(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?oe(ae($({},t),{guardsResult:!0})):U$(s,r,i,n).pipe(It(a=>a&&N$(a)?$$(r,o,n,e):oe(a)),re(a=>ae($({},t),{guardsResult:a})))})}function U$(n,e,t,r){return Ne(n).pipe(It(i=>W$(i.component,i.route,t,e,r)),bn(i=>i!==!0,!0))}function $$(n,e,t,r){return Ne(e).pipe(Jr(i=>Ys(q$(i.route.parent,r),z$(i.route,r),G$(n,i.path,t),H$(n,i.route,t))),bn(i=>i!==!0,!0))}function z$(n,e){return n!==null&&e&&e(new e0(n)),oe(!0)}function q$(n,e){return n!==null&&e&&e(new J_(n)),oe(!0)}function H$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>th(()=>{let s=sl(e)??t,a=Fa(o,s),c=O$(a)?a.canActivate(e,n):Bn(s,()=>a(e,n));return co(c).pipe(bn())}));return oe(i).pipe(Oa())}function G$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>x$(s)).filter(s=>s!==null).map(s=>th(()=>{let a=s.guards.map(c=>{let l=sl(s.node)??t,d=Fa(c,l),f=F$(d)?d.canActivateChild(r,n):Bn(l,()=>d(r,n));return co(f).pipe(bn())});return oe(a).pipe(Oa())}));return oe(o).pipe(Oa())}function W$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let c=sl(e)??i,l=Fa(a,c),d=V$(l)?l.canDeactivate(n,e,t,r):Bn(c,()=>l(n,e,t,r));return co(d).pipe(bn())});return oe(s).pipe(Oa())}function K$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let o=i.map(s=>{let a=Fa(s,n),c=k$(a)?a.canLoad(e,t):Bn(n,()=>a(e,t));return co(c)});return oe(o).pipe(Oa(),ex(r))}function ex(n){return Fm(ct(e=>{if(typeof e!="boolean")throw rp(n,e)}),re(e=>e===!0))}function Q$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let o=i.map(s=>{let a=Fa(s,n),c=L$(a)?a.canMatch(e,t):Bn(n,()=>a(e,t));return co(c)});return oe(o).pipe(Oa(),ex(r))}var tl=class{constructor(e){this.segmentGroup=e||null}},nl=class extends Error{constructor(e){super(),this.urlTree=e}};function Ta(n){return Qs(new tl(n))}function Y$(n){return Qs(new X(4e3,!1))}function Z$(n){return Qs(ZA(!1,Nn.GuardRejected))}var c0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[we])return Y$(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:I,title:T}=i,S=Bn(o,()=>a({params:y,data:I,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:T}));if(S instanceof vi)throw new nl(S);t=S}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new nl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new vi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},u0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J$(n,e,t,r,i){let o=tx(n,e,t);return o.matched?(r=C$(e,r),Q$(r,e,t,i).pipe(re(s=>s===!0?o:$({},u0)))):oe(o)}function tx(n,e,t){if(e.path==="**")return X$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},u0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QU)(t,n,e);if(!i)return $({},u0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function X$(n){return{matched:!0,parameters:n.length>0?kA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MA(n,e,t,r){return t.length>0&&n4(n,t,r)?{segmentGroup:new ze(e,t4(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&r4(n,t,r)?{segmentGroup:new ze(n.segments,e4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function e4(n,e,t,r){let i={};for(let o of t)if(ap(n,e,o)&&!r[lr(o)]){let s=new ze([],{});i[lr(o)]=s}return $($({},r),i)}function t4(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&lr(r)!==we){let i=new ze([],{});t[lr(r)]=i}return t}function n4(n,e,t){return t.some(r=>ap(n,e,r)&&lr(r)!==we)}function r4(n,e,t){return t.some(r=>ap(n,e,r))}function ap(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function i4(n,e,t){return e.length===0&&!n.children[t]}var l0=class{};function o4(n,e,t,r,i,o,s="emptyOnly"){return new d0(n,e,t,r,i,s,o).recognize()}var s4=31,d0=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new c0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=MA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new Rn(r,t),o=new np("",i),s=p$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Aa([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(re(r=>({children:r,rootSnapshot:t})),Li(r=>{if(r instanceof nl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(re(s=>s instanceof Rn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(Jr(s=>{let a=r.children[s],c=E$(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Uo((s,a)=>(s.push(...a),s)),ji(null),Wm(),It(s=>{if(s===null)return Ta(r);let a=nx(s);return a4(a),oe(a)}))}processSegment(e,t,r,i,o,s,a){return Ne(t).pipe(Jr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Li(l=>{if(l instanceof tl)return oe(null);throw l}))),bn(c=>!!c),Li(c=>{if(XA(c))return i4(r,i,o)?oe(new l0):Ta(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return lr(r)!==s&&(s===we||!ap(i,o,r))?Ta(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ta(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=tx(t,i,o);if(!c)return Ta(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s4&&(this.allowRedirects=!1));let y=new Aa(o,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,AA(i),lr(i),i.component??i._loadedComponent??null,i,xA(i)),I=tp(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(I.params),y.data=Object.freeze(I.data);let T=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(It(S=>this.processSegment(e,r,t,S.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=J$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(at(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(at(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,I=new Aa(g,f,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,AA(r),lr(r),r.component??r._loadedComponent??null,r,xA(r)),T=tp(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(T.params),I.data=Object.freeze(T.data);let{segmentGroup:S,slicedSegments:j}=MA(t,g,y,l);if(j.length===0&&S.hasChildren())return this.processChildren(d,l,S,I).pipe(re(L=>new Rn(I,L)));if(l.length===0&&j.length===0)return oe(new Rn(I,[]));let q=lr(r)===o;return this.processSegment(d,l,S,j,q?we:o,!0,I).pipe(re(L=>new Rn(I,L instanceof Rn?[L]:[])))}))):Ta(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):K$(e,t,r,this.urlSerializer).pipe(It(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Z$(t))):oe({routes:[],injector:e})}};function a4(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function c4(n){let e=n.value.routeConfig;return e&&e.path===""}function nx(n){let e=[],t=new Set;for(let r of n){if(!c4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=nx(r.children);e.push(new Rn(r.value,i))}return e.filter(r=>!t.has(r))}function AA(n){return n.data||{}}function xA(n){return n.resolve||{}}function u4(n,e,t,r,i,o){return It(s=>o4(n,e,t,r,s.extractedUrl,i,o).pipe(re(({state:a,tree:c})=>ae($({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function l4(n,e){return It(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of rx(c))s.add(l);let a=0;return Ne(s).pipe(Jr(c=>o.has(c)?d4(c,r,n,e):(c.data=tp(c,c.parent,n).resolve,oe(void 0))),ct(()=>a++),Zs(1),It(c=>a===s.size?oe(t):sn))})}function rx(n){let e=n.children.map(t=>rx(t)).flat();return[n,...e]}function d4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!QA(i)&&(o[il]=i.title),h4(o,n,e,r).pipe(re(s=>(n._resolvedData=s,n.data=tp(n,n.parent,t).resolve,null)))}function h4(n,e,t,r){let i=$_(n);if(i.length===0)return oe({});let o={};return Ne(i).pipe(It(s=>f4(n[s],e,t,r).pipe(bn(),ct(a=>{if(a instanceof el)throw rp(new Ra,a);o[s]=a}))),Zs(1),Hm(o),Li(s=>XA(s)?sn:Qs(s)))}function f4(n,e,t,r){let i=sl(e)??r,o=Fa(n,i),s=o.resolve?o.resolve(e,t):Bn(i,()=>o(e,t));return co(s)}function B_(n){return at(e=>{let t=n(e);return t?Ne(t).pipe(re(()=>e)):oe(e)})}var ix=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[il]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(p4),providedIn:"root"})}}return n})(),p4=(()=>{class n extends ix{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(z(CA))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ul=new K("",{providedIn:"root",factory:()=>({})}),g4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["ng-component"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,i){r&1&&ht(0,"router-outlet")},dependencies:[p0],encapsulation:2})}}return n})();function g0(n){let e=n.children&&n.children.map(g0),t=e?ae($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=g4),t}var rl=new K(""),m0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Ef)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=co(t.loadComponent()).pipe(re(ox),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Bo(()=>{this.componentLoaders.delete(t)})),i=new Hs(r,()=>new st).pipe(qs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=m4(r,this.compiler,t,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(r)})),s=new Hs(o,()=>new st).pipe(qs());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m4(n,e,t,r){return co(n.loadChildren()).pipe(re(ox),It(i=>i instanceof Eu||Array.isArray(i)?oe(i):Ne(e.compileModuleAsync(i))),re(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(rl,[],{optional:!0,self:!0}).flat()),{routes:s.map(g0),injector:o}}))}function y4(n){return n&&typeof n=="object"&&"default"in n}function ox(n){return y4(n)?n.default:n}var y0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(v4),providedIn:"root"})}}return n})(),v4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sx=new K(""),ax=new K("");function _4(n,e,t){let r=n.get(ax),i=n.get(Bt);return n.get(je).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),w4(n))),{onViewTransitionCreated:c}=r;return c&&Bn(n,()=>c({transition:a,from:e,to:t})),s})}function w4(n){return new Promise(e=>{s_({read:()=>setTimeout(e)},{injector:n})})}var C4=new K(""),v0=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=x(m0),this.environmentInjector=x(un),this.urlSerializer=x(ol),this.rootContexts=x(al),this.location=x(ba),this.inputBindingEnabled=x(sp,{optional:!0})!==null,this.titleStrategy=x(ix),this.options=x(ul,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(y0),this.createViewTransition=x(sx,{optional:!0}),this.navigationErrorHandler=x(C4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Y_(i)),r=i=>this.events.next(new Z_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae($($({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new xt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ku,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pt(o=>o.id!==0),re(o=>ae($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),at(o=>{let s=!1,a=!1;return oe(o).pipe(at(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),sn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ae($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new ao(c.id,this.urlSerializer.serialize(c.rawUrl),f,Yf.IgnoredSameUrlNavigation)),c.resolve(!1),sn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return oe(c).pipe(at(f=>{let g=this.transitions?.getValue();return this.events.next(new Na(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?sn:Promise.resolve(f)}),u4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ae($({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Zf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:I,extras:T}=c,S=new Na(f,this.urlSerializer.serialize(g),y,I);this.events.next(S);let j=WA(this.rootComponentType).snapshot;return this.currentTransition=o=ae($({},c),{targetSnapshot:j,urlAfterRedirects:g,extras:ae($({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,oe(o)}else{let f="";return this.events.next(new ao(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Yf.IgnoredByUrlHandlingStrategy)),c.resolve(!1),sn}}),ct(c=>{let l=new G_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),re(c=>(this.currentTransition=o=ae($({},c),{guards:A$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),B$(this.environmentInjector,c=>this.events.next(c)),ct(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw rp(this.urlSerializer,c.guardsResult);let l=new W_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Nn.GuardRejected),!1)),B_(c=>{if(c.guards.canActivateChecks.length)return oe(c).pipe(ct(l=>{let d=new K_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),at(l=>{let d=!1;return oe(l).pipe(l4(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Nn.NoDataFromResolver)}}))}),ct(l=>{let d=new Q_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),B_(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ct(g=>{d.component=g}),re(()=>{})));for(let g of d.children)f.push(...l(g));return f};return cu(l(c.targetSnapshot.root)).pipe(ji(null),Xr(1))}),B_(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Ne(d).pipe(re(()=>o)):oe(o)}),re(c=>{let l=b$(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ae($({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ct(()=>{this.events.next(new Ju)}),M$(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xr(1),ct({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Qm(this.transitionAbortSubject.pipe(ct(c=>{throw c}))),Bo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Nn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Li(c=>{if(a=!0,JA(c))this.events.next(new yi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),S$(c)?this.events.next(new ka(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Zu(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Bn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof el){let{message:f,cancellationCode:g}=rp(this.urlSerializer,d);this.events.next(new yi(o.id,this.urlSerializer.serialize(o.extractedUrl),f,g)),this.events.next(new ka(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return sn}))}))}cancelNavigationTransition(t,r,i){let o=new yi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function E4(n){return n!==Ku}var I4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(b4),providedIn:"root"})}}return n})(),h0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},b4=(()=>{class n extends h0{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>x(D4),providedIn:"root"})}}return n})(),D4=(()=>{class n extends cx{constructor(){super(...arguments),this.location=x(ba),this.urlSerializer=x(ol),this.options=x(ul,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(y0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=WA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Na)this.stateMemento=this.createStateMemento();else if(t instanceof ao)this.rawUrlTree=r.initialUrl;else if(t instanceof Zf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ju?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof yi&&(t.code===Nn.GuardRejected||t.code===Nn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Zu?this.restoreHistory(r,!0):t instanceof kr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof vi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=$($({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=$($({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Gu||{});function ux(n,e){n.events.pipe(Pt(t=>t instanceof kr||t instanceof yi||t instanceof Zu||t instanceof ao),re(t=>t instanceof kr||t instanceof ao?Gu.COMPLETE:(t instanceof yi?t.code===Nn.Redirect||t.code===Nn.SupersededByNewNavigation:!1)?Gu.REDIRECTING:Gu.FAILED),Pt(t=>t!==Gu.REDIRECTING),Xr(1)).subscribe(()=>{e()})}function T4(n){throw n}var S4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},it=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(_f),this.stateManager=x(cx),this.options=x(ul,{optional:!0})||{},this.pendingTasks=x(Qi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(v0),this.urlSerializer=x(ol),this.location=x(ba),this.urlHandlingStrategy=x(y0),this._events=new st,this.errorHandler=this.options.errorHandler||T4,this.navigated=!1,this.routeReuseStrategy=x(I4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(rl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(sp,{optional:!0}),this.eventsSubscription=new mt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof yi&&r.code!==Nn.Redirect&&r.code!==Nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kr)this.navigated=!0;else if(r instanceof ka){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||E4(i.source)},s);this.scheduleNavigation(a,Ku,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ku,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(g0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=zA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return qA(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=os(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ku,null,r)}navigate(t,r={skipLocationChange:!1}){return A4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},S4):r===!1?i=$({},M4):i=r,os(t))return IA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return IA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return ux(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function x4(n){return!(n instanceof Ju)&&!(n instanceof ka)}var cp=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new st,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof kr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(os(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vS(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:os(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Te(it),Te(Hn),Nv("tabindex"),Te(Zi),Te(ci),Te(gi))}}static{this.\u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&J("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&wa("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",to],skipLocationChange:[2,"skipLocationChange","skipLocationChange",to],replaceUrl:[2,"replaceUrl","replaceUrl",to],routerLink:"routerLink"},standalone:!0,features:[r_,Un]})}}return n})();var op=class{};var P4=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Pt(t=>t instanceof kr),Jr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=yf(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ne(i).pipe(Vi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=oe(null);let o=i.pipe(It(s=>s===null?oe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ne([o,s]).pipe(Vi())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(z(it),z(Ef),z(un),z(op),z(m0))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lx=new K(""),R4=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Na?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ao&&t.code===Yf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jf&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Jf(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){RS()}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function dx(n,...e){return Xo([{provide:rl,multi:!0,useValue:n},[],{provide:Hn,useFactory:hx,deps:[it]},{provide:ts,multi:!0,useFactory:fx},e.map(t=>t.\u0275providers)])}function hx(n){return n.routerState.root}function ll(n,e){return{\u0275kind:n,\u0275providers:e}}function fx(){let n=x(jn);return e=>{let t=n.get(xr);if(e!==t.components[0])return;let r=n.get(it),i=n.get(px);n.get(_0)===1&&r.initialNavigation(),n.get(gx,null,be.Optional)?.setUpPreloading(),n.get(lx,null,be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var px=new K("",{factory:()=>new st}),_0=new K("",{providedIn:"root",factory:()=>1});function N4(){return ll(2,[{provide:_0,useValue:0},{provide:wf,multi:!0,deps:[jn],useFactory:e=>{let t=e.get(FM,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(it),o=e.get(px);ux(i,()=>{r(!0)}),e.get(v0).afterPreactivation=()=>(r(!0),o.closed?oe(void 0):o),i.initialNavigation()}))}}])}function k4(){return ll(3,[{provide:wf,multi:!0,useFactory:()=>{let e=x(it);return()=>{e.setUpLocationChangeListener()}}},{provide:_0,useValue:2}])}var gx=new K("");function O4(n){return ll(0,[{provide:gx,useExisting:P4},{provide:op,useExisting:n}])}function F4(){return ll(8,[SA,{provide:sp,useExisting:SA}])}function V4(n){let e=[{provide:sx,useValue:_4},{provide:ax,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return ll(9,e)}var PA=new K("ROUTER_FORROOT_GUARD"),L4=[ba,{provide:ol,useClass:Ra},it,al,{provide:Hn,useFactory:hx,deps:[it]},m0,[]],Va=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[L4,[],{provide:rl,multi:!0,useValue:t},{provide:PA,useFactory:$4,deps:[[it,new ma,new yv]]},{provide:ul,useValue:r||{}},r?.useHash?B4():U4(),j4(),r?.preloadingStrategy?O4(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?z4(r):[],r?.bindToComponentInputs?F4().\u0275providers:[],r?.enableViewTransitions?V4().\u0275providers:[],q4()]}}static forChild(t){return{ngModule:n,providers:[{provide:rl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(z(PA,8))}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=ln({})}}return n})();function j4(){return{provide:lx,useFactory:()=>{let n=x(GM),e=x(je),t=x(ul),r=x(v0),i=x(ol);return t.scrollOffset&&n.setOffset(t.scrollOffset),new R4(i,r,n,e,t)}}}function B4(){return{provide:gi,useClass:LM}}function U4(){return{provide:gi,useClass:C_}}function $4(n){return"guarded"}function z4(n){return[n.initialNavigation==="disabled"?k4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?N4().\u0275providers:[]]}var RA=new K("");function q4(){return[{provide:RA,useFactory:fx},{provide:ts,multi:!0,useExisting:RA}]}var H4="firebase",G4="10.14.1";Fi(H4,G4,"app");var as=new oi("ANGULARFIRE2_VERSION");var W4=(n,e)=>{let t=e?[e]:ab(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ss=class{constructor(){return W4(K4)}},K4="app-check";function w0(){}var up=class{zone;delegate;constructor(e,t=Bm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},C0=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",w0,{},w0,w0)),t.pipe(ct({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},lp=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new up(Zone.current)),this.insideAngular=t.run(()=>new up(Zone.current,au)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(z(je))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q4(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function wn(n){return Y4(Q4())(n)}function Y4(n){return function(t){return t=t.lift(new C0(n.ngZone)),t.pipe(Xn(n.outsideAngular),Vn(n.insideAngular))}}var X4=new Map,e3={activated:!1,tokenObservers:[]},t3={initialized:!1,enabled:!1};function dr(n){return X4.get(n)||Object.assign({},e3)}function Ex(){return t3}var n3="https://content-firebaseappcheck.googleapis.com/v1";var r3="exchangeDebugToken",vx={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},WQ=24*60*60*1e3;var I0=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return V(this,null,function*(){this.stop();try{this.pending=new Cm,this.pending.promise.catch(t=>{}),yield i3(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Cm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function i3(n){return new Promise(e=>{setTimeout(e,n)})}var o3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},uo=new ob("appCheck","AppCheck",o3);function Ix(n){if(!dr(n).activated)throw uo.create("use-before-activation",{appName:n.name})}function bx(r,i){return V(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw uo.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw uo.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw uo.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function Dx(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${n3}/projects/${t}/apps/${r}:${r3}?key=${i}`,body:{debug_token:e}}}var s3="firebase-app-check-database",a3=1,b0="firebase-app-check-store";var dp=null;function c3(){return dp||(dp=new Promise((n,e)=>{try{let t=indexedDB.open(s3,a3);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(uo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(b0,{keyPath:"compositeKey"})}}}catch(t){e(uo.create("storage-open",{originalErrorMessage:t?.message}))}}),dp)}function u3(n,e){return l3(d3(n),e)}function l3(n,e){return V(this,null,function*(){let r=(yield c3()).transaction(b0,"readwrite"),o=r.objectStore(b0).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(uo.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function d3(n){return`${n.options.appId}-${n.name}`}var D0=new Dd("@firebase/app-check");function E0(n,e){return bd()?u3(n,e).catch(t=>{D0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tx(){return Ex().enabled}function Sx(){return V(this,null,function*(){let n=Ex();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var h3={error:"UNKNOWN_ERROR"};function f3(n){return nb.encodeString(JSON.stringify(n),!1)}function T0(n,e=!1){return V(this,null,function*(){let t=n.app;Ix(t);let r=dr(t),i=r.token,o;if(i&&!dl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(dl(c)?i=c:yield E0(t,void 0))}if(!e&&i&&dl(i))return{token:i.token};let s=!1;if(Tx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bx(Dx(t,yield Sx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield E0(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield dr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?D0.warn(c.message):D0.error(c),o=c}let a;return i?o?dl(i)?a={token:i.token,internalError:o}:a=wx(o):(a={token:i.token},r.token=i,yield E0(t,i)):a=wx(o),s&&y3(t,a),a})}function p3(n){return V(this,null,function*(){let e=n.app;Ix(e);let{provider:t}=dr(e);if(Tx()){let r=yield Sx(),{token:i}=yield bx(Dx(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function g3(n,e,t,r){let{app:i}=n,o=dr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&dl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),_x(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_x(n))}function Mx(n,e){let t=dr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _x(n){let{app:e}=n,t=dr(e),r=t.tokenRefresher;r||(r=m3(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function m3(n){let{app:e}=n;return new I0(()=>V(this,null,function*(){let t=dr(e),r;if(t.token?r=yield T0(n,!0):r=yield T0(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=dr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},vx.RETRIAL_MIN_WAIT,vx.RETRIAL_MAX_WAIT)}function y3(n,e){let t=dr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function dl(n){return n.expireTimeMillis-Date.now()>0}function wx(n){return{token:f3(h3),error:n}}var S0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=dr(this.app);for(let t of e)Mx(this.app,t.next);return Promise.resolve()}};function v3(n,e){return new S0(n,e)}function _3(n){return{getToken:e=>T0(n,e),getLimitedUseToken:()=>p3(n),addTokenListener:e=>g3(n,"INTERNAL",e),removeTokenListener:e=>Mx(n.app,e)}}var w3="@firebase/app-check",C3="0.8.8";var E3="app-check",Cx="app-check-internal";function I3(){tu(new Fo(E3,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return v3(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Cx).initialize()})),tu(new Fo(Cx,n=>{let e=n.getProvider("app-check").getImmediate();return _3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fi(w3,C3)}I3();var b3=["localhost","0.0.0.0","127.0.0.1"],oY=typeof window<"u"&&b3.includes(window.location.hostname);var D3="firebase",T3="10.14.1";rn.registerVersion(D3,T3,"app-compat");var S3=["ngOnDestroy"],Px=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(S3.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var hp=class{constructor(e){return e}},La=new K("angularfire2.app.options"),ja=new K("angularfire2.app.name");function hl(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=rn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>rn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;M3("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hp(s)}var M3=(n,...e)=>{u_()&&typeof console<"u"&&console[n](...e)},A3={provide:hp,useFactory:hl,deps:[La,je,[new ma,ja]]},Rx=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:La,useValue:t},{provide:ja,useValue:r}]}}constructor(t){rn.registerVersion("angularfire",as.full,"core"),rn.registerVersion("angularfire",as.full,"app-compat"),rn.registerVersion("angular",bM.full,t.toString())}static \u0275fac=function(r){return new(r||n)(z(Ot))};static \u0275mod=dn({type:n});static \u0275inj=ln({providers:[A3]})}return n})();function fp(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return x3(i,s)||(xx("error",`${e} was already initialized on the ${t} Firebase App with different settings.${P3?" You may need to reload as Firebase is not HMR aware.":""}`),xx("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function x3(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var P3=typeof module<"u"&&!!module.hot,xx=(n,...e)=>{u_()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var M0=new K("angularfire2.auth.use-emulator"),A0=new K("angularfire2.auth.settings"),x0=new K("angularfire2.auth.tenant-id"),P0=new K("angularfire2.auth.langugage-code"),R0=new K("angularfire2.auth.use-device-language"),N0=new K("angularfire.auth.persistence"),k0=(n,e,t,r,i,o,s,a)=>fp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),hr=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,f,g,y){let I=new st,T=oe(void 0).pipe(Vn(s.outsideAngular),at(()=>o.runOutsideAngular(()=>import("./chunk-SJDVR6DC.js"))),re(()=>hl(t,o,r)),re(S=>k0(S,o,a,l,d,f,c,g)),rh({bufferSize:1,refCount:!1}));if(mi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=oe(null);else{T.pipe(bn()).subscribe();let S=T.pipe(at(L=>L.getRedirectResult().then(Y=>Y,()=>null)),wn,rh({bufferSize:1,refCount:!1})),j=T.pipe(at(L=>new ce(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ie=>Y.next(ie),ie=>Y.error(ie),()=>Y.complete()))})))),q=T.pipe(at(L=>new ce(Y=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ie=>Y.next(ie),ie=>Y.error(ie),()=>Y.complete()))}))));this.authState=S.pipe(ih(j),Xn(s.outsideAngular),Vn(s.insideAngular)),this.user=S.pipe(ih(q),Xn(s.outsideAngular),Vn(s.insideAngular)),this.idToken=this.user.pipe(at(L=>L?Ne(L.getIdToken()):oe(null))),this.idTokenResult=this.user.pipe(at(L=>L?Ne(L.getIdTokenResult()):oe(null))),this.credential=qm(S,I,this.authState.pipe(Pt(L=>!L))).pipe(re(L=>L?.user?L:null),Xn(s.outsideAngular),Vn(s.insideAngular))}return Px(this,T,o,{spy:{apply:(S,j,q)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&q.then(L=>I.next(L))}}})}static \u0275fac=function(r){return new(r||n)(z(La),z(ja,8),z(Ot),z(je),z(lp),z(M0,8),z(A0,8),z(x0,8),z(P0,8),z(R0,8),z(N0,8),z(ss,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Nx=(()=>{class n{constructor(){rn.registerVersion("angularfire",as.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dn({type:n});static \u0275inj=ln({providers:[hr]})}return n})();var kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ox={};var lo,O0;(function(){var n;function e(b,v){function C(){}C.prototype=v.prototype,b.D=v.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(D,M,P){for(var w=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)w[Gr-2]=arguments[Gr];return v.prototype[M].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,C){C||(C=0);var D=Array(16);if(typeof v=="string")for(var M=0;16>M;++M)D[M]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(M=0;16>M;++M)D[M]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=b.g[0],C=b.g[1],M=b.g[2];var P=b.g[3],w=v+(P^C&(M^P))+D[0]+3614090360&4294967295;v=C+(w<<7&4294967295|w>>>25),w=P+(M^v&(C^M))+D[1]+3905402710&4294967295,P=v+(w<<12&4294967295|w>>>20),w=M+(C^P&(v^C))+D[2]+606105819&4294967295,M=P+(w<<17&4294967295|w>>>15),w=C+(v^M&(P^v))+D[3]+3250441966&4294967295,C=M+(w<<22&4294967295|w>>>10),w=v+(P^C&(M^P))+D[4]+4118548399&4294967295,v=C+(w<<7&4294967295|w>>>25),w=P+(M^v&(C^M))+D[5]+1200080426&4294967295,P=v+(w<<12&4294967295|w>>>20),w=M+(C^P&(v^C))+D[6]+2821735955&4294967295,M=P+(w<<17&4294967295|w>>>15),w=C+(v^M&(P^v))+D[7]+4249261313&4294967295,C=M+(w<<22&4294967295|w>>>10),w=v+(P^C&(M^P))+D[8]+1770035416&4294967295,v=C+(w<<7&4294967295|w>>>25),w=P+(M^v&(C^M))+D[9]+2336552879&4294967295,P=v+(w<<12&4294967295|w>>>20),w=M+(C^P&(v^C))+D[10]+4294925233&4294967295,M=P+(w<<17&4294967295|w>>>15),w=C+(v^M&(P^v))+D[11]+2304563134&4294967295,C=M+(w<<22&4294967295|w>>>10),w=v+(P^C&(M^P))+D[12]+1804603682&4294967295,v=C+(w<<7&4294967295|w>>>25),w=P+(M^v&(C^M))+D[13]+4254626195&4294967295,P=v+(w<<12&4294967295|w>>>20),w=M+(C^P&(v^C))+D[14]+2792965006&4294967295,M=P+(w<<17&4294967295|w>>>15),w=C+(v^M&(P^v))+D[15]+1236535329&4294967295,C=M+(w<<22&4294967295|w>>>10),w=v+(M^P&(C^M))+D[1]+4129170786&4294967295,v=C+(w<<5&4294967295|w>>>27),w=P+(C^M&(v^C))+D[6]+3225465664&4294967295,P=v+(w<<9&4294967295|w>>>23),w=M+(v^C&(P^v))+D[11]+643717713&4294967295,M=P+(w<<14&4294967295|w>>>18),w=C+(P^v&(M^P))+D[0]+3921069994&4294967295,C=M+(w<<20&4294967295|w>>>12),w=v+(M^P&(C^M))+D[5]+3593408605&4294967295,v=C+(w<<5&4294967295|w>>>27),w=P+(C^M&(v^C))+D[10]+38016083&4294967295,P=v+(w<<9&4294967295|w>>>23),w=M+(v^C&(P^v))+D[15]+3634488961&4294967295,M=P+(w<<14&4294967295|w>>>18),w=C+(P^v&(M^P))+D[4]+3889429448&4294967295,C=M+(w<<20&4294967295|w>>>12),w=v+(M^P&(C^M))+D[9]+568446438&4294967295,v=C+(w<<5&4294967295|w>>>27),w=P+(C^M&(v^C))+D[14]+3275163606&4294967295,P=v+(w<<9&4294967295|w>>>23),w=M+(v^C&(P^v))+D[3]+4107603335&4294967295,M=P+(w<<14&4294967295|w>>>18),w=C+(P^v&(M^P))+D[8]+1163531501&4294967295,C=M+(w<<20&4294967295|w>>>12),w=v+(M^P&(C^M))+D[13]+2850285829&4294967295,v=C+(w<<5&4294967295|w>>>27),w=P+(C^M&(v^C))+D[2]+4243563512&4294967295,P=v+(w<<9&4294967295|w>>>23),w=M+(v^C&(P^v))+D[7]+1735328473&4294967295,M=P+(w<<14&4294967295|w>>>18),w=C+(P^v&(M^P))+D[12]+2368359562&4294967295,C=M+(w<<20&4294967295|w>>>12),w=v+(C^M^P)+D[5]+4294588738&4294967295,v=C+(w<<4&4294967295|w>>>28),w=P+(v^C^M)+D[8]+2272392833&4294967295,P=v+(w<<11&4294967295|w>>>21),w=M+(P^v^C)+D[11]+1839030562&4294967295,M=P+(w<<16&4294967295|w>>>16),w=C+(M^P^v)+D[14]+4259657740&4294967295,C=M+(w<<23&4294967295|w>>>9),w=v+(C^M^P)+D[1]+2763975236&4294967295,v=C+(w<<4&4294967295|w>>>28),w=P+(v^C^M)+D[4]+1272893353&4294967295,P=v+(w<<11&4294967295|w>>>21),w=M+(P^v^C)+D[7]+4139469664&4294967295,M=P+(w<<16&4294967295|w>>>16),w=C+(M^P^v)+D[10]+3200236656&4294967295,C=M+(w<<23&4294967295|w>>>9),w=v+(C^M^P)+D[13]+681279174&4294967295,v=C+(w<<4&4294967295|w>>>28),w=P+(v^C^M)+D[0]+3936430074&4294967295,P=v+(w<<11&4294967295|w>>>21),w=M+(P^v^C)+D[3]+3572445317&4294967295,M=P+(w<<16&4294967295|w>>>16),w=C+(M^P^v)+D[6]+76029189&4294967295,C=M+(w<<23&4294967295|w>>>9),w=v+(C^M^P)+D[9]+3654602809&4294967295,v=C+(w<<4&4294967295|w>>>28),w=P+(v^C^M)+D[12]+3873151461&4294967295,P=v+(w<<11&4294967295|w>>>21),w=M+(P^v^C)+D[15]+530742520&4294967295,M=P+(w<<16&4294967295|w>>>16),w=C+(M^P^v)+D[2]+3299628645&4294967295,C=M+(w<<23&4294967295|w>>>9),w=v+(M^(C|~P))+D[0]+4096336452&4294967295,v=C+(w<<6&4294967295|w>>>26),w=P+(C^(v|~M))+D[7]+1126891415&4294967295,P=v+(w<<10&4294967295|w>>>22),w=M+(v^(P|~C))+D[14]+2878612391&4294967295,M=P+(w<<15&4294967295|w>>>17),w=C+(P^(M|~v))+D[5]+4237533241&4294967295,C=M+(w<<21&4294967295|w>>>11),w=v+(M^(C|~P))+D[12]+1700485571&4294967295,v=C+(w<<6&4294967295|w>>>26),w=P+(C^(v|~M))+D[3]+2399980690&4294967295,P=v+(w<<10&4294967295|w>>>22),w=M+(v^(P|~C))+D[10]+4293915773&4294967295,M=P+(w<<15&4294967295|w>>>17),w=C+(P^(M|~v))+D[1]+2240044497&4294967295,C=M+(w<<21&4294967295|w>>>11),w=v+(M^(C|~P))+D[8]+1873313359&4294967295,v=C+(w<<6&4294967295|w>>>26),w=P+(C^(v|~M))+D[15]+4264355552&4294967295,P=v+(w<<10&4294967295|w>>>22),w=M+(v^(P|~C))+D[6]+2734768916&4294967295,M=P+(w<<15&4294967295|w>>>17),w=C+(P^(M|~v))+D[13]+1309151649&4294967295,C=M+(w<<21&4294967295|w>>>11),w=v+(M^(C|~P))+D[4]+4149444226&4294967295,v=C+(w<<6&4294967295|w>>>26),w=P+(C^(v|~M))+D[11]+3174756917&4294967295,P=v+(w<<10&4294967295|w>>>22),w=M+(v^(P|~C))+D[2]+718787259&4294967295,M=P+(w<<15&4294967295|w>>>17),w=C+(P^(M|~v))+D[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(M+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+M&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var C=v-this.blockSize,D=this.B,M=this.h,P=0;P<v;){if(M==0)for(;P<=C;)i(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<v;)if(D[M++]=b.charCodeAt(P++),M==this.blockSize){i(this,D),M=0;break}}else for(;P<v;)if(D[M++]=b[P++],M==this.blockSize){i(this,D),M=0;break}}this.h=M,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var C=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=C&255,C/=256;for(this.u(b),b=Array(16),v=C=0;4>v;++v)for(var D=0;32>D;D+=8)b[C++]=this.g[v]>>>D&255;return b};function o(b,v){var C=a;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=v(b)}function s(b,v){this.h=v;for(var C=[],D=!0,M=b.length-1;0<=M;M--){var P=b[M]|0;D&&P==v||(C[M]=P,D=!1)}this.g=C}var a={};function c(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return S(l(-b));for(var v=[],C=1,D=0;b>=C;D++)v[D]=b/C|0,C*=4294967296;return new s(v,0)}function d(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return S(d(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(v,8)),D=f,M=0;M<b.length;M+=8){var P=Math.min(8,b.length-M),w=parseInt(b.substring(M,M+P),v);8>P?(P=l(Math.pow(v,P)),D=D.j(P).add(l(w))):(D=D.j(C),D=D.add(l(w)))}return D}var f=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(T(this))return-S(this).m();for(var b=0,v=1,C=0;C<this.g.length;C++){var D=this.i(C);b+=(0<=D?D:4294967296+D)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(T(this))return"-"+S(this).toString(b);for(var v=l(Math.pow(b,6)),C=this,D="";;){var M=Y(C,v).g;C=j(C,M.j(v));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=M,I(C))return P+D;for(;6>P.length;)P="0"+P;D=P+D}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function T(b){return b.h==-1}n.l=function(b){return b=j(this,b),T(b)?-1:I(b)?0:1};function S(b){for(var v=b.g.length,C=[],D=0;D<v;D++)C[D]=~b.g[D];return new s(C,~b.h).add(g)}n.abs=function(){return T(this)?S(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),C=[],D=0,M=0;M<=v;M++){var P=D+(this.i(M)&65535)+(b.i(M)&65535),w=(P>>>16)+(this.i(M)>>>16)+(b.i(M)>>>16);D=w>>>16,P&=65535,w&=65535,C[M]=w<<16|P}return new s(C,C[C.length-1]&-2147483648?-1:0)};function j(b,v){return b.add(S(v))}n.j=function(b){if(I(this)||I(b))return f;if(T(this))return T(b)?S(this).j(S(b)):S(S(this).j(b));if(T(b))return S(this.j(S(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,C=[],D=0;D<2*v;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<b.g.length;M++){var P=this.i(D)>>>16,w=this.i(D)&65535,Gr=b.i(M)>>>16,Oc=b.i(M)&65535;C[2*D+2*M]+=w*Oc,q(C,2*D+2*M),C[2*D+2*M+1]+=P*Oc,q(C,2*D+2*M+1),C[2*D+2*M+1]+=w*Gr,q(C,2*D+2*M+1),C[2*D+2*M+2]+=P*Gr,q(C,2*D+2*M+2)}for(D=0;D<v;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=v;D<2*v;D++)C[D]=0;return new s(C,0)};function q(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function L(b,v){this.g=b,this.h=v}function Y(b,v){if(I(v))throw Error("division by zero");if(I(b))return new L(f,f);if(T(b))return v=Y(S(b),v),new L(S(v.g),S(v.h));if(T(v))return v=Y(b,S(v)),new L(S(v.g),v.h);if(30<b.g.length){if(T(b)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var C=g,D=v;0>=D.l(b);)C=ie(C),D=ie(D);var M=te(C,1),P=te(D,1);for(D=te(D,2),C=te(C,2);!I(D);){var w=P.add(D);0>=w.l(b)&&(M=M.add(C),P=w),D=te(D,1),C=te(C,1)}return v=j(b,M.j(v)),new L(M,v)}for(M=f;0<=b.l(v);){for(C=Math.max(1,Math.floor(b.m()/v.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),P=l(C),w=P.j(v);T(w)||0<w.l(b);)C-=D,P=l(C),w=P.j(v);I(P)&&(P=g),M=M.add(P),b=j(b,w)}return new L(M,b)}n.A=function(b){return Y(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),C=[],D=0;D<v;D++)C[D]=this.i(D)&b.i(D);return new s(C,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),C=[],D=0;D<v;D++)C[D]=this.i(D)|b.i(D);return new s(C,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),C=[],D=0;D<v;D++)C[D]=this.i(D)^b.i(D);return new s(C,this.h^b.h)};function ie(b){for(var v=b.g.length+1,C=[],D=0;D<v;D++)C[D]=b.i(D)<<1|b.i(D-1)>>>31;return new s(C,b.h)}function te(b,v){var C=v>>5;v%=32;for(var D=b.g.length-C,M=[],P=0;P<D;P++)M[P]=0<v?b.i(P+C)>>>v|b.i(P+C+1)<<32-v:b.i(P+C);return new s(M,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,O0=Ox.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,lo=Ox.Integer=s}).apply(typeof kx<"u"?kx:typeof self<"u"?self:typeof window<"u"?window:{});var pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_i={};var F0,N3,Ba,V0,fl,gp,L0,j0,B0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pp=="object"&&pp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var A=u[m];if(!(A in p))break e;p=p[A]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,m=!1,A={next:function(){if(!m&&p<u.length){var O=p++;return{value:h(O,u[O]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),u.apply(h,A)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,A,O){for(var H=Array(arguments.length-2),We=2;We<arguments.length;We++)H[We-2]=arguments[We];return h.prototype[A].apply(m,H)}}function T(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let A=u.length||0,O=m.length||0;u.length=A+O;for(let H=0;H<O;H++)u[A+H]=m[H]}else u.push(m)}}class j{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ie=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function te(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function b(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(p in m)u[p]=m[p];for(let O=0;O<C.length;O++)p=C[O],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function M(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Qg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Gr{constructor(){this.h=this.g=null}add(h,p){let m=Oc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Oc=new j(()=>new uk,u=>u.reset());class uk{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Fc,Vc=!1,Qg=new Gr,ZE=()=>{let u=a.Promise.resolve(void 0);Fc=()=>{u.then(lk)}};var lk=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){P(p)}var h=Oc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Vc=!1};function Ri(){this.s=this.s,this.C=this.C}Ri.prototype.s=!1,Ri.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ri.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var dk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Lc(u,h){if(zt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ie){e:{try{Y(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:hk[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Lc.aa.h.call(this)}}I(Lc,zt);var hk={2:"touch",3:"pen",4:"mouse"};Lc.prototype.h=function(){Lc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var jc="closure_listenable_"+(1e6*Math.random()|0),fk=0;function pk(u,h,p,m,A){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=A,this.key=++fk,this.da=this.fa=!1}function sd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ad(u){this.src=u,this.g={},this.h=0}ad.prototype.add=function(u,h,p,m,A){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var H=Zg(u,h,m,A);return-1<H?(h=u[H],p||(h.fa=!1)):(h=new pk(h,this.src,O,!!m,A),h.fa=p,u.push(h)),h};function Yg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],A=Array.prototype.indexOf.call(m,h,void 0),O;(O=0<=A)&&Array.prototype.splice.call(m,A,1),O&&(sd(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Zg(u,h,p,m){for(var A=0;A<u.length;++A){var O=u[A];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==m)return A}return-1}var Jg="closure_lm_"+(1e6*Math.random()|0),Xg={};function JE(u,h,p,m,A){if(m&&m.once)return eI(u,h,p,m,A);if(Array.isArray(h)){for(var O=0;O<h.length;O++)JE(u,h[O],p,m,A);return null}return p=rm(p),u&&u[jc]?u.K(h,p,l(m)?!!m.capture:!!m,A):XE(u,h,p,!1,m,A)}function XE(u,h,p,m,A,O){if(!h)throw Error("Invalid event type");var H=l(A)?!!A.capture:!!A,We=tm(u);if(We||(u[Jg]=We=new ad(u)),p=We.add(h,p,m,H,O),p.proxy)return p;if(m=gk(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)dk||(A=H),A===void 0&&(A=!1),u.addEventListener(h.toString(),m,A);else if(u.attachEvent)u.attachEvent(nI(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function gk(){function u(p){return h.call(u.src,u.listener,p)}let h=mk;return u}function eI(u,h,p,m,A){if(Array.isArray(h)){for(var O=0;O<h.length;O++)eI(u,h[O],p,m,A);return null}return p=rm(p),u&&u[jc]?u.L(h,p,l(m)?!!m.capture:!!m,A):XE(u,h,p,!0,m,A)}function tI(u,h,p,m,A){if(Array.isArray(h))for(var O=0;O<h.length;O++)tI(u,h[O],p,m,A);else m=l(m)?!!m.capture:!!m,p=rm(p),u&&u[jc]?(u=u.i,h=String(h).toString(),h in u.g&&(O=u.g[h],p=Zg(O,p,m,A),-1<p&&(sd(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete u.g[h],u.h--)))):u&&(u=tm(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Zg(h,p,m,A)),(p=-1<u?h[u]:null)&&em(p))}function em(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[jc])Yg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(nI(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=tm(h))?(Yg(p,u),p.h==0&&(p.src=null,h[Jg]=null)):sd(u)}}}function nI(u){return u in Xg?Xg[u]:Xg[u]="on"+u}function mk(u,h){if(u.da)u=!0;else{h=new Lc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&em(u),u=p.call(m,h)}return u}function tm(u){return u=u[Jg],u instanceof ad?u:null}var nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(u){return typeof u=="function"?u:(u[nm]||(u[nm]=function(h){return u.handleEvent(h)}),u[nm])}function qt(){Ri.call(this),this.i=new ad(this),this.M=this,this.F=null}I(qt,Ri),qt.prototype[jc]=!0,qt.prototype.removeEventListener=function(u,h,p,m){tI(this,u,h,p,m)};function tn(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new zt(h,u);else if(h instanceof zt)h.target=h.target||u;else{var A=h;h=new zt(m,u),D(h,A)}if(A=!0,p)for(var O=p.length-1;0<=O;O--){var H=h.g=p[O];A=cd(H,m,!0,h)&&A}if(H=h.g=u,A=cd(H,m,!0,h)&&A,A=cd(H,m,!1,h)&&A,p)for(O=0;O<p.length;O++)H=h.g=p[O],A=cd(H,m,!1,h)&&A}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)sd(p[m]);delete u.g[h],u.h--}}this.F=null},qt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},qt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function cd(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,O=0;O<h.length;++O){var H=h[O];if(H&&!H.da&&H.capture==p){var We=H.listener,Vt=H.ha||H.src;H.fa&&Yg(u.i,H),A=We.call(Vt,m)!==!1&&A}}return A&&!m.defaultPrevented}function rI(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function iI(u){u.g=rI(()=>{u.g=null,u.i&&(u.i=!1,iI(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class yk extends Ri{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:iI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bc(u){Ri.call(this),this.h=u,this.g={}}I(Bc,Ri);var oI=[];function sI(u){te(u.g,function(h,p){this.g.hasOwnProperty(p)&&em(h)},u),u.g={}}Bc.prototype.N=function(){Bc.aa.N.call(this),sI(this)},Bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var im=a.JSON.stringify,vk=a.JSON.parse,_k=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function om(){}om.prototype.h=null;function aI(u){return u.h||(u.h=u.i())}function cI(){}var Uc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sm(){zt.call(this,"d")}I(sm,zt);function am(){zt.call(this,"c")}I(am,zt);var Ro={},uI=null;function ud(){return uI=uI||new qt}Ro.La="serverreachability";function lI(u){zt.call(this,Ro.La,u)}I(lI,zt);function $c(u){let h=ud();tn(h,new lI(h))}Ro.STAT_EVENT="statevent";function dI(u,h){zt.call(this,Ro.STAT_EVENT,u),this.stat=h}I(dI,zt);function nn(u){let h=ud();tn(h,new dI(h,u))}Ro.Ma="timingevent";function hI(u,h){zt.call(this,Ro.Ma,u),this.size=h}I(hI,zt);function zc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function qc(){this.g=!0}qc.prototype.xa=function(){this.g=!1};function wk(u,h,p,m,A,O){u.info(function(){if(u.g)if(O)for(var H="",We=O.split("&"),Vt=0;Vt<We.length;Vt++){var Le=We[Vt].split("=");if(1<Le.length){var Ht=Le[0];Le=Le[1];var Gt=Ht.split("_");H=2<=Gt.length&&Gt[1]=="type"?H+(Ht+"="+Le+"&"):H+(Ht+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+h+`
`+p+`
`+H})}function Ck(u,h,p,m,A,O,H){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+h+`
`+p+`
`+O+" "+H})}function Fs(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ik(u,p)+(m?" "+m:"")})}function Ek(u,h){u.info(function(){return"TIMEOUT: "+h})}qc.prototype.info=function(){};function Ik(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var O=A[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<A.length;H++)A[H]=""}}}}return im(p)}catch{return h}}var ld={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cm;function dd(){}I(dd,om),dd.prototype.g=function(){return new XMLHttpRequest},dd.prototype.i=function(){return{}},cm=new dd;function Ni(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Bc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pI}function pI(){this.i=null,this.g="",this.h=!1}var gI={},um={};function lm(u,h,p){u.L=1,u.v=gd(Wr(h)),u.m=p,u.P=!0,mI(u,null)}function mI(u,h){u.F=Date.now(),hd(u),u.A=Wr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),xI(p.i,"t",m),u.C=0,p=u.j.J,u.h=new pI,u.g=KI(u.j,p?h:null,!u.m),0<u.O&&(u.M=new yk(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(oI[0]=A.toString()),A=oI);for(var O=0;O<A.length;O++){var H=JE(p,A[O],m||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),$c(),wk(u.i,u.u,u.A,u.l,u.R,u.m)}Ni.prototype.ca=function(u){u=u.target;let h=this.M;h&&Kr(u)==3?h.j():this.Y(u)},Ni.prototype.Y=function(u){try{if(u==this.g)e:{let Gt=Kr(this.g);var h=this.g.Ba();let js=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||VI(this.g)))){this.J||Gt!=4||h==7||(h==8||0>=js?$c(3):$c(2)),dm(this);var p=this.g.Z();this.X=p;t:if(yI(this)){var m=VI(this.g);u="";var A=m.length,O=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){No(this),Hc(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(O&&h==A-1)});m.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,Ck(this.i,this.u,this.A,this.l,this.R,Gt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Vt=this.g;if((We=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(We)){var Le=We;break t}}Le=null}if(p=Le)Fs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hm(this,p);else{this.o=!1,this.s=3,nn(12),No(this),Hc(this);break e}}if(this.P){p=!0;let Zn;for(;!this.J&&this.C<H.length;)if(Zn=bk(this,H),Zn==um){Gt==4&&(this.s=4,nn(14),p=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==gI){this.s=4,nn(15),Fs(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else Fs(this.i,this.l,Zn,null),hm(this,Zn);if(yI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||H.length!=0||this.h.h||(this.s=1,nn(16),p=!1),this.o=this.o&&p,!p)Fs(this.i,this.l,H,"[Invalid Chunked Response]"),No(this),Hc(this);else if(0<H.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),vm(Ht),Ht.M=!0,nn(11))}}else Fs(this.i,this.l,H,null),hm(this,H);Gt==4&&No(this),this.o&&!this.J&&(Gt==4?qI(this.j,this):(this.o=!1,hd(this)))}else Uk(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),No(this),Hc(this)}}}catch{}finally{}};function yI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function bk(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?um:(p=Number(h.substring(p,m)),isNaN(p)?gI:(m+=1,m+p>h.length?um:(h=h.slice(m,m+p),u.C=m+p,h)))}Ni.prototype.cancel=function(){this.J=!0,No(this)};function hd(u){u.S=Date.now()+u.I,vI(u,u.I)}function vI(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zc(g(u.ba,u),h)}function dm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ni.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Ek(this.i,this.A),this.L!=2&&($c(),nn(17)),No(this),this.s=2,Hc(this)):vI(this,this.S-u)};function Hc(u){u.j.G==0||u.J||qI(u.j,u)}function No(u){dm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,sI(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function hm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||fm(p.h,u))){if(!u.K&&fm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)wd(p),vd(p);else break e;ym(p),nn(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=zc(g(p.Za,p),6e3));if(1>=CI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Oo(p,11)}else if((u.K||p.g==u)&&wd(p),!q(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Le=A[h];if(p.T=Le[0],Le=Le[1],p.G==2)if(Le[0]=="c"){p.K=Le[1],p.ia=Le[2];let Ht=Le[3];Ht!=null&&(p.la=Ht,p.j.info("VER="+p.la));let Gt=Le[4];Gt!=null&&(p.Aa=Gt,p.j.info("SVER="+p.Aa));let js=Le[5];js!=null&&typeof js=="number"&&0<js&&(m=1.5*js,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Zn=u.g;if(Zn){let Ed=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ed){var O=m.h;O.g||Ed.indexOf("spdy")==-1&&Ed.indexOf("quic")==-1&&Ed.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(pm(O,O.h),O.h=null))}if(m.D){let _m=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;_m&&(m.ya=_m,et(m.I,m.D,_m))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var H=u;if(m.qa=WI(m,m.J?m.ia:null,m.W),H.K){EI(m.h,H);var We=H,Vt=m.L;Vt&&(We.I=Vt),We.B&&(dm(We),hd(We)),m.g=H}else $I(m);0<p.i.length&&_d(p)}else Le[0]!="stop"&&Le[0]!="close"||Oo(p,7);else p.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Oo(p,7):mm(p):Le[0]!="noop"&&p.l&&p.l.ta(Le),p.v=0)}}$c(4)}catch{}}var Dk=class{constructor(u,h){this.g=u,this.map=h}};function _I(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function CI(u){return u.h?1:u.g?u.g.size:0}function fm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function pm(u,h){u.g?u.g.add(h):u.h=h}function EI(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}_I.prototype.cancel=function(){if(this.i=II(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function II(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return T(u.i)}function Tk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function Sk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function bI(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=Sk(u),m=Tk(u),A=m.length,O=0;O<A;O++)h.call(void 0,m[O],p&&p[O],u)}var DI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mk(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),A=null;if(0<=m){var O=u[p].substring(0,m);A=u[p].substring(m+1)}else O=u[p];h(O,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function ko(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ko){this.h=u.h,fd(this,u.j),this.o=u.o,this.g=u.g,pd(this,u.s),this.l=u.l;var h=u.i,p=new Kc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),TI(this,p),this.m=u.m}else u&&(h=String(u).match(DI))?(this.h=!1,fd(this,h[1]||"",!0),this.o=Gc(h[2]||""),this.g=Gc(h[3]||"",!0),pd(this,h[4]),this.l=Gc(h[5]||"",!0),TI(this,h[6]||"",!0),this.m=Gc(h[7]||"")):(this.h=!1,this.i=new Kc(null,this.h))}ko.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Wc(h,SI,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Wc(h,SI,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Wc(p,p.charAt(0)=="/"?Pk:xk,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Wc(p,Nk)),u.join("")};function Wr(u){return new ko(u)}function fd(u,h,p){u.j=p?Gc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function pd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function TI(u,h,p){h instanceof Kc?(u.i=h,kk(u.i,u.h)):(p||(h=Wc(h,Rk)),u.i=new Kc(h,u.h))}function et(u,h,p){u.i.set(h,p)}function gd(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Gc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,Ak),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ak(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var SI=/[#\/\?@]/g,xk=/[#\?:]/g,Pk=/[#\?]/g,Rk=/[#\?@]/g,Nk=/#/g;function Kc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ki(u){u.g||(u.g=new Map,u.h=0,u.i&&Mk(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Kc.prototype,n.add=function(u,h){ki(this),this.i=null,u=Vs(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function MI(u,h){ki(u),h=Vs(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function AI(u,h){return ki(u),h=Vs(u,h),u.g.has(h)}n.forEach=function(u,h){ki(this),this.g.forEach(function(p,m){p.forEach(function(A){u.call(h,A,m,this)},this)},this)},n.na=function(){ki(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let A=u[m];for(let O=0;O<A.length;O++)p.push(h[m])}return p},n.V=function(u){ki(this);let h=[];if(typeof u=="string")AI(this,u)&&(h=h.concat(this.g.get(Vs(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return ki(this),this.i=null,u=Vs(this,u),AI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function xI(u,h,p){MI(u,h),0<p.length&&(u.i=null,u.g.set(Vs(u,h),T(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let O=encodeURIComponent(String(m)),H=this.V(m);for(m=0;m<H.length;m++){var A=O;H[m]!==""&&(A+="="+encodeURIComponent(String(H[m]))),u.push(A)}}return this.i=u.join("&")};function Vs(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function kk(u,h){h&&!u.j&&(ki(u),u.i=null,u.g.forEach(function(p,m){var A=m.toLowerCase();m!=A&&(MI(this,m),xI(this,A,p))},u)),u.j=h}function Ok(u,h){let p=new qc;if(a.Image){let m=new Image;m.onload=y(Oi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Oi,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Oi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Oi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function Fk(u,h){let p=new qc,m=new AbortController,A=setTimeout(()=>{m.abort(),Oi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(O=>{clearTimeout(A),O.ok?Oi(p,"TestPingServer: ok",!0,h):Oi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Oi(p,"TestPingServer: error",!1,h)})}function Oi(u,h,p,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(p)}catch{}}function Vk(){this.g=new _k}function Lk(u,h,p){let m=p||"";try{bI(u,function(A,O){let H=A;l(A)&&(H=im(A)),h.push(m+O+"="+encodeURIComponent(H))})}catch(A){throw h.push(m+"type="+encodeURIComponent("_badmap")),A}}function Qc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Qc,om),Qc.prototype.g=function(){return new md(this.l,this.j)},Qc.prototype.i=function(u){return function(){return u}}({});function md(u,h){qt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(md,qt),n=md.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Zc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zc(this)),this.g&&(this.readyState=3,Zc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function PI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Yc(this):Zc(this),this.readyState==3&&PI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Yc(this))},n.Qa=function(u){this.g&&(this.response=u,Yc(this))},n.ga=function(){this.g&&Yc(this)};function Yc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Zc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function RI(u){let h="";return te(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function gm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=RI(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):et(u,h,p))}function gt(u){qt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(gt,qt);var jk=/^https?$/i,Bk=["POST","PUT"];n=gt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cm.g(),this.v=this.o?aI(this.o):aI(cm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(O){NI(this,O);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)p.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let O of m.keys())p.set(O,m.get(O));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Bk,h,void 0))||m||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,H]of p)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FI(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){NI(this,O)}};function NI(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,kI(u),yd(u)}function kI(u){u.A||(u.A=!0,tn(u,"complete"),tn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,tn(this,"complete"),tn(this,"abort"),yd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yd(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?OI(this):this.bb())},n.bb=function(){OI(this)};function OI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Kr(u)!=4||u.Z()!=2)){if(u.u&&Kr(u)==4)rI(u.Ea,0,u);else if(tn(u,"readystatechange"),Kr(u)==4){u.h=!1;try{let H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=H===0){var A=String(u.D).match(DI)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),m=!jk.test(A?A.toLowerCase():"")}p=m}if(p)tn(u,"complete"),tn(u,"success");else{u.m=6;try{var O=2<Kr(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",kI(u)}}finally{yd(u)}}}}function yd(u,h){if(u.g){FI(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||tn(u,"ready");try{p.onreadystatechange=m}catch{}}}function FI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Kr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),vk(h)}};function VI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(u){let h={};u=(u.g&&2<=Kr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(q(u[m]))continue;var p=M(u[m]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[A]||[];h[A]=O,O.push(p)}b(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function LI(u){this.Aa=0,this.i=[],this.j=new qc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jc("baseRetryDelayMs",5e3,u),this.cb=Jc("retryDelaySeedMs",1e4,u),this.Wa=Jc("forwardChannelMaxRetries",2,u),this.wa=Jc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _I(u&&u.concurrentRequestLimit),this.Da=new Vk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=LI.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){nn(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=WI(this,null,this.W),_d(this)};function mm(u){if(jI(u),u.G==3){var h=u.U++,p=Wr(u.I);if(et(p,"SID",u.K),et(p,"RID",h),et(p,"TYPE","terminate"),Xc(u,p),h=new Ni(u,u.j,h),h.L=2,h.v=gd(Wr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=KI(h.j,null),h.g.ea(h.v)),h.F=Date.now(),hd(h)}GI(u)}function vd(u){u.g&&(vm(u),u.g.cancel(),u.g=null)}function jI(u){vd(u),u.u&&(a.clearTimeout(u.u),u.u=null),wd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _d(u){if(!wI(u.h)&&!u.s){u.s=!0;var h=u.Ga;Fc||ZE(),Vc||(Fc(),Vc=!0),Qg.add(h,u),u.B=0}}function $k(u,h){return CI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zc(g(u.Ga,u,h),HI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new Ni(this,this.j,u),O=this.o;if(this.S&&(O?(O=v(O),D(O,this.S)):O=this.S),this.m!==null||this.O||(A.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=UI(this,A,h),p=Wr(this.I),et(p,"RID",u),et(p,"CVER",22),this.D&&et(p,"X-HTTP-Session-Id",this.D),Xc(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(RI(O)))+"&"+h:this.m&&gm(p,this.m,O)),pm(this.h,A),this.Ua&&et(p,"TYPE","init"),this.P?(et(p,"$req",h),et(p,"SID","null"),A.T=!0,lm(A,p,null)):lm(A,p,h),this.G=2}}else this.G==3&&(u?BI(this,u):this.i.length==0||wI(this.h)||BI(this))};function BI(u,h){var p;h?p=h.l:p=u.U++;let m=Wr(u.I);et(m,"SID",u.K),et(m,"RID",p),et(m,"AID",u.T),Xc(u,m),u.m&&u.o&&gm(m,u.m,u.o),p=new Ni(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=UI(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pm(u.h,p),lm(p,m,h)}function Xc(u,h){u.H&&te(u.H,function(p,m){et(h,m,p)}),u.l&&bI({},function(p,m){et(h,m,p)})}function UI(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var A=u.i;let O=-1;for(;;){let H=["count="+p];O==-1?0<p?(O=A[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let We=!0;for(let Vt=0;Vt<p;Vt++){let Le=A[Vt].g,Ht=A[Vt].map;if(Le-=O,0>Le)O=Math.max(0,A[Vt].g-100),We=!1;else try{Lk(Ht,H,"req"+Le+"_")}catch{m&&m(Ht)}}if(We){m=H.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function $I(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Fc||ZE(),Vc||(Fc(),Vc=!0),Qg.add(h,u),u.v=0}}function ym(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zc(g(u.Fa,u),HI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,zI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),vd(this),zI(this))};function vm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zI(u){u.g=new Ni(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Wr(u.qa);et(h,"RID","rpc"),et(h,"SID",u.K),et(h,"AID",u.T),et(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(h,"TO",u.ja),et(h,"TYPE","xmlhttp"),Xc(u,h),u.m&&u.o&&gm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=gd(Wr(h)),p.m=null,p.P=!0,mI(p,u)}n.Za=function(){this.C!=null&&(this.C=null,vd(this),ym(this),nn(19))};function wd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qI(u,h){var p=null;if(u.g==h){wd(u),vm(u),u.g=null;var m=2}else if(fm(u.h,h))p=h.D,EI(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=u.B;m=ud(),tn(m,new hI(m,p)),_d(u)}else $I(u);else if(A=h.s,A==3||A==0&&0<h.X||!(m==1&&$k(u,h)||m==2&&ym(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),A){case 1:Oo(u,5);break;case 4:Oo(u,10);break;case 3:Oo(u,6);break;default:Oo(u,2)}}}function HI(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Oo(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let A=!m;m=new ko(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fd(m,"https"),gd(m),A?Ok(m.toString(),p):Fk(m.toString(),p)}else nn(2);u.G=0,u.l&&u.l.sa(h),GI(u),jI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function GI(u){if(u.G=0,u.ka=[],u.l){let h=II(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function WI(u,h,p){var m=p instanceof ko?Wr(p):new ko(p);if(m.g!="")h&&(m.g=h+"."+m.g),pd(m,m.s);else{var A=a.location;m=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var O=new ko(null);m&&fd(O,m),h&&(O.g=h),A&&pd(O,A),p&&(O.l=p),m=O}return p=u.D,h=u.ya,p&&h&&et(m,p,h),et(m,"VER",u.la),Xc(u,m),m}function KI(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new gt(new Qc({eb:p})):new gt(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function QI(){}n=QI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cd(){}Cd.prototype.g=function(u,h){return new In(u,h)};function In(u,h){qt.call(this),this.g=new LI(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Ls(this)}I(In,qt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){mm(this.g)},In.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=im(u),u=p);h.i.push(new Dk(h.Ya++,u)),h.G==3&&_d(h)},In.prototype.N=function(){this.g.l=null,delete this.j,mm(this.g),delete this.g,In.aa.N.call(this)};function YI(u){sm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(YI,sm);function ZI(){am.call(this),this.status=1}I(ZI,am);function Ls(u){this.g=u}I(Ls,QI),Ls.prototype.ua=function(){tn(this.g,"a")},Ls.prototype.ta=function(u){tn(this.g,new YI(u))},Ls.prototype.sa=function(u){tn(this.g,new ZI)},Ls.prototype.ra=function(){tn(this.g,"b")},Cd.prototype.createWebChannel=Cd.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,B0=_i.createWebChannelTransport=function(){return new Cd},j0=_i.getStatEventTarget=function(){return ud()},L0=_i.Event=Ro,gp=_i.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ld.NO_ERROR=0,ld.TIMEOUT=8,ld.HTTP_ERROR=6,fl=_i.ErrorCode=ld,fI.COMPLETE="complete",V0=_i.EventType=fI,cI.EventType=Uc,Uc.OPEN="a",Uc.CLOSE="b",Uc.ERROR="c",Uc.MESSAGE="d",qt.prototype.listen=qt.prototype.K,Ba=_i.WebChannel=cI,N3=_i.FetchXmlHttpFactory=Qc,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,F0=_i.XhrIo=gt}).apply(typeof pp<"u"?pp:typeof self<"u"?self:typeof window<"u"?window:{});var Fx="@firebase/firestore";var St=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");var yc="10.14.0";var vo=new Dd("@firebase/firestore");function Ha(){return vo.logLevel}function j1(n){vo.setLogLevel(n)}function U(n,...e){if(vo.logLevel<=vr.DEBUG){let t=e.map(HC);vo.debug(`Firestore (${yc}): ${n}`,...t)}}function _t(n,...e){if(vo.logLevel<=vr.ERROR){let t=e.map(HC);vo.error(`Firestore (${yc}): ${n}`,...t)}}function fr(n,...e){if(vo.logLevel<=vr.WARN){let t=e.map(HC);vo.warn(`Firestore (${yc}): ${n}`,...t)}}function HC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: `+n;throw _t(e),new Error(e)}function ne(n,e){n||Z()}function B1(n,e){n||Z()}function G(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends ib{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},G0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(St.UNAUTHENTICATED))}shutdown(){}},W0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},K0=class{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ne(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>V(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new Dp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new St(e)}},Q0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Y0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Q0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Z0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},J0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ne(this.o===void 0);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ne(typeof t.token=="string"),this.R=t.token,new Z0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Tp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=k3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function ec(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function U1(n){return n+"\0"}var ft=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ft(0,0))}static max(){return new n(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Fe=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},O3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return O3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Fe.fromString(e))}static fromName(e){return new n(Fe.fromString(e).popFirst(5))}static empty(){return new n(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Fe(e.slice()))}};var tc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function X0(n){return n.fields.find(e=>e.kind===2)}function us(n){return n.fields.filter(e=>e.kind!==2)}tc.UNKNOWN_ID=-1;var Za=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Dl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Wn.min())}};function $1(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new Wn(i,W.empty(),e)}function z1(n){return new Wn(n.readTime,n.key,-1)}var Wn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),W.empty(),-1)}static max(){return new n(se.max(),W.empty(),-1)}};function GC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Mo(n){return V(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==q1)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Ap=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new gs(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=WC(r.target.error);this.V.reject(new gs(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new gs(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new tw(t)}},_o=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(eu())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),ls(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!bd())return!1;if(n.v())return!0;let e=eu(),t=n.S(e),r=0<t&&t<10,i=H1(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return V(this,null,function*(){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new gs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new B(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new B(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new gs(e,s))},i.onupgradeneeded=o=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return V(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Ap.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),N.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(U("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function H1(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ew=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ls(this.B.delete())}},gs=class extends B{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ao(n){return n.name==="IndexedDbTransactionError"}var tw=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(U("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ls(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),ls(this.store.add(e))}get(e){return ls(this.store.get(e)).next(t=>(t===void 0&&(t=null),U("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),ls(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),ls(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new N((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new N((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){U("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new N((r,i)=>{t.onerror=o=>{let s=WC(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new N((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new ew(a),l=t(a.primaryKey,a.value,c);if(l instanceof N){let d=l.catch(f=>(c.done(),N.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>N.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ls(n){return new N((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=WC(r.target.error);t(i)}})}var Vx=!1;function WC(n){let e=_o.S(eu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vx||(Vx=!0,setTimeout(()=>{throw r},0)),r}}return n}var nw=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>V(this,null,function*(){this.task=null;try{U("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ao(t)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Mo(t)}yield this.X(6e4)}))}},rw=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return V(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return N.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return U("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=z1(o);GC(s,r)>0&&(r=s)}),new Wn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var kn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Gl(n){return n==null}function Tl(n){return n===0&&1/n==-1/0}function G1(n){return typeof n=="number"&&Number.isInteger(n)&&!Tl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lx(e)),e=F3(n.get(t),e);return Lx(e)}function F3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Lx(n){return n+""}function Or(n){let e=n.length;if(ne(e>=2),e===2)return ne(n.charAt(0)===""&&n.charAt(1)===""),Fe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Z()}o=s+2}return new Fe(r)}var jx=["userId","batchId"];function wp(n,e){return[n,pn(e)]}function W1(n,e,t){return[n,pn(e),t]}var V3={},L3=["prefixPath","collectionGroup","readTime","documentId"],j3=["prefixPath","collectionGroup","documentId"],B3=["collectionGroup","readTime","prefixPath","documentId"],U3=["canonicalId","targetId"],$3=["targetId","path"],z3=["path","targetId"],q3=["collectionId","parent"],H3=["indexId","uid"],G3=["uid","sequenceNumber"],W3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K3=["indexId","uid","orderedDocumentKey"],Q3=["userId","collectionPath","documentId"],Y3=["userId","collectionPath","largestBatchId"],Z3=["userId","collectionGroup","largestBatchId"],K1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],J3=[...K1,"documentOverlays"],Q1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Y1=Q1,KC=[...Y1,"indexConfiguration","indexState","indexEntries"],X3=KC,ez=[...KC,"globals"];var Sl=class extends Mp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function kt(n,e){let t=G(n);return _o.F(t._e,e)}function Bx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ss(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ot=class n{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}},Ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Vr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Vr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class n{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xp(this.data.getIterator())}getIteratorFrom(e){return new xp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ua(n){return n.hasNext()?n.getNext():void 0}var On=class n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ye(wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function J1(){return typeof atob<"u"}var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var tz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(n){if(ne(!!n),typeof n=="string"){let e=0,t=tz.exec(n);if(ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wo(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}function Eg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function QC(n){let e=n.mapValue.fields.__previous_value__;return Eg(e)?QC(e):e}function Ml(n){let e=Ei(n.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}var iw=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Co=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cp={nullValue:"NULL_VALUE"};function ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Eg(n)?4:X1(n)?9007199254740991:Ig(n)?10:11:Z()}function Br(n,e){if(n===e)return!0;let t=ms(n);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ml(n).isEqual(Ml(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ei(i.timestampValue),a=Ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wo(i.bytesValue).isEqual(wo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ut(i.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ut(i.integerValue)===ut(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ut(i.doubleValue),a=ut(o.doubleValue);return s===a?Tl(s)===Tl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Bx(s)!==Bx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Br(s[c],a[c])))return!1;return!0}(n,e);default:return Z()}}function Al(n,e){return(n.values||[]).find(t=>Br(t,e))!==void 0}function Eo(n,e){if(n===e)return 0;let t=ms(n),r=ms(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ut(o.integerValue||o.doubleValue),c=ut(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Ux(n.timestampValue,e.timestampValue);case 4:return Ux(Ml(n),Ml(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wo(o),c=wo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ge(a[l],c[l]);if(d!==0)return d}return ge(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ge(ut(o.latitude),ut(s.latitude));return a!==0?a:ge(ut(o.longitude),ut(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $x(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,T=ge(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:$x(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mo.mapValue&&s===mo.mapValue)return 0;if(o===mo.mapValue)return 1;if(s===mo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ge(c[f],d[f]);if(g!==0)return g;let y=Eo(a[c[f]],l[d[f]]);if(y!==0)return y}return ge(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Z()}}function Ux(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=Ei(n),r=Ei(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function $x(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Eo(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function nc(n){return ow(n)}function ow(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ei(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ow(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ow(t.fields[s])}`;return i+"}"}(n.mapValue):Z()}function ys(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sw(n){return!!n&&"integerValue"in n}function xl(n){return!!n&&"arrayValue"in n}function zx(n){return!!n&&"nullValue"in n}function qx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ep(n){return!!n&&"mapValue"in n}function Ig(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function wl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ss(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function X1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var eP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function nz(n){return"nullValue"in n?Cp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ys(Co.empty(),W.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ig(n)?eP:{mapValue:{}}:Z()}function rz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ys(Co.empty(),W.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?eP:"mapValue"in n?Ig(n)?{mapValue:{}}:mo:Z()}function Hx(n,e){let t=Eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gx(n,e){let t=Eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var en=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ep(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(t)}setAll(e){let t=wt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=wl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ep(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ep(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ss(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(wl(this.value))}};function tP(n){let e=[];return Ss(n.fields,(t,r)=>{let i=new wt([t]);if(Ep(r)){let o=tP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var Mt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),en.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),en.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ur=class{constructor(e,t){this.position=e,this.inclusive=t}};function Wx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=Eo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Br(n.position[t],e.position[t]))return!1;return!0}var vs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Rp=class{},Re=class n extends Rp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uw(e,t,r):t==="array-contains"?new hw(e,r):t==="in"?new Np(e,r):t==="not-in"?new fw(e,r):t==="array-contains-any"?new pw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lw(e,r):new dw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Eo(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(Eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},qe=class n extends Rp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return rc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function rc(n){return n.op==="and"}function aw(n){return n.op==="or"}function YC(n){return nP(n)&&rc(n)}function nP(n){for(let e of n.filters)if(e instanceof qe)return!1;return!0}function cw(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(YC(n))return n.filters.map(e=>cw(e)).join(",");{let e=n.filters.map(t=>cw(t)).join(",");return`${n.op}(${e})`}}function rP(n,e){return n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&Br(r.value,i.value)}(n,e):n instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&rP(s,i.filters[a]),!0):!1}(n,e):void Z()}function iP(n,e){let t=n.filters.concat(e);return qe.create(t,n.op)}function oP(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`}(n):n instanceof qe?function(t){return t.op.toString()+" {"+t.getFilters().map(oP).join(" ,")+"}"}(n):"Filter"}var uw=class extends Re{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},lw=class extends Re{constructor(e,t){super(e,"in",t),this.keys=sP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},dw=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=sP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function sP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var hw=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xl(t)&&Al(t.arrayValue,this.value)}},Np=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}},fw=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Al(this.value.arrayValue,t)}},pw=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Al(this.value.arrayValue,r))}};var gw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function mw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new gw(n,e,t,r,i,o,s)}function _s(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nc(r)).join(",")),e.ue=t}return e.ue}function Wl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kx(n.startAt,e.startAt)&&Kx(n.endAt,e.endAt)}function kp(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Op(n,e){return n.filters.filter(t=>t instanceof Re&&t.field.isEqual(e))}function Qx(n,e,t){let r=Cp,i=!0;for(let o of Op(n,e)){let s=Cp,a=!0;switch(o.op){case"<":case"<=":s=nz(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Cp}Hx({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Hx({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Yx(n,e,t){let r=mo,i=!0;for(let o of Op(n,e)){let s=mo,a=!0;switch(o.op){case">=":case">":s=rz(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=mo}Gx({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Gx({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var pr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aP(n,e,t,r,i,o,s,a){return new pr(n,e,t,r,i,o,s,a)}function vc(n){return new pr(n)}function Zx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZC(n){return n.collectionGroup!==null}function Ja(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(wt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new vs(o,r))}),t.has(wt.keyField().canonicalString())||e.ce.push(new vs(wt.keyField(),r))}return e.ce}function gn(n){let e=G(n);return e.le||(e.le=oz(e,Ja(n))),e.le}function oz(n,e){if(n.limitType==="F")return mw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new vs(i.field,o)});let t=n.endAt?new Ur(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ur(n.startAt.position,n.startAt.inclusive):null;return mw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yw(n,e){let t=n.filters.concat([e]);return new pr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fp(n,e,t){return new pr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kl(n,e){return Wl(gn(n),gn(e))&&n.limitType===e.limitType}function cP(n){return`${_s(gn(n))}|lt:${n.limitType}`}function Ga(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>oP(i)).join(", ")}]`),Gl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>nc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(gn(n))}; limitType=${n.limitType})`}function Ql(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ja(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Wx(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Ja(r),i)||r.endAt&&!function(s,a,c){let l=Wx(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Ja(r),i))}(n,e)}function uP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lP(n){return(e,t)=>{let r=!1;for(let i of Ja(n)){let o=sz(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sz(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Eo(c,l):Z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var $r=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Z1(this.inner)}size(){return this.innerSize}};var az=new ot(W.comparator);function Cn(){return az}var dP=new ot(W.comparator);function vl(...n){let e=dP;for(let t of n)e=e.insert(t.key,t);return e}function hP(n){let e=dP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fr(){return Cl()}function fP(){return Cl()}function Cl(){return new $r(n=>n.toString(),(n,e)=>n.isEqual(e))}var cz=new ot(W.comparator),uz=new Ye(W.comparator);function _e(...n){let e=uz;for(let t of n)e=e.add(t);return e}var lz=new Ye(ge);function JC(){return lz}function XC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(e)?"-0":e}}function pP(n){return{integerValue:""+n}}function gP(n,e){return G1(e)?pP(e):XC(n,e)}var ic=class{constructor(){this._=void 0}};function dz(n,e,t){return n instanceof Io?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Eg(o)&&(o=QC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ii?yP(n,e):n instanceof bi?vP(n,e):function(i,o){let s=mP(i,o),a=Jx(s)+Jx(i.Pe);return sw(s)&&sw(i.Pe)?pP(a):XC(i.serializer,a)}(n,e)}function hz(n,e,t){return n instanceof Ii?yP(n,e):n instanceof bi?vP(n,e):t}function mP(n,e){return n instanceof bo?function(r){return sw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Io=class extends ic{},Ii=class extends ic{constructor(e){super(),this.elements=e}};function yP(n,e){let t=_P(e);for(let r of n.elements)t.some(i=>Br(i,r))||t.push(r);return{arrayValue:{values:t}}}var bi=class extends ic{constructor(e){super(),this.elements=e}};function vP(n,e){let t=_P(e);for(let r of n.elements)t=t.filter(i=>!Br(i,r));return{arrayValue:{values:t}}}var bo=class extends ic{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Jx(n){return ut(n.integerValue||n.doubleValue)}function _P(n){return xl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ws=class{constructor(e,t){this.field=e,this.transform=t}};function fz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ii&&i instanceof Ii||r instanceof bi&&i instanceof bi?ec(r.elements,i.elements,Br):r instanceof bo&&i instanceof bo?Br(r.Pe,i.Pe):r instanceof Io&&i instanceof Io}(n.transform,e.transform)}var vw=class{constructor(e,t){this.version=e,this.transformResults=t}},yt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ip(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var oc=class{};function wP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new To(n.key,yt.none()):new Do(n.key,n.data,yt.none());{let t=n.data,r=en.empty(),i=new Ye(wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gr(n.key,r,new On(i.toArray()),yt.none())}}function pz(n,e,t){n instanceof Do?function(i,o,s){let a=i.value.clone(),c=e1(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gr?function(i,o,s){if(!Ip(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=e1(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(CP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function El(n,e,t,r){return n instanceof Do?function(o,s,a,c){if(!Ip(o.precondition,s))return a;let l=o.value.clone(),d=t1(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof gr?function(o,s,a,c){if(!Ip(o.precondition,s))return a;let l=t1(o.fieldTransforms,c,s),d=s.data;return d.setAll(CP(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Ip(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function gz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=mP(r.transform,i||null);o!=null&&(t===null&&(t=en.empty()),t.set(r.field,o))}return t||null}function Xx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ec(r,i,(o,s)=>fz(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Do=class extends oc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gr=class extends oc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function e1(n,e,t){let r=new Map;ne(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,hz(s,a,t[i]))}return r}function t1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,dz(o,s,e))}return r}var To=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pl=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Rl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pz(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=fP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=wP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(t,r)=>Xx(t,r))&&ec(this.baseMutations,e.baseMutations,(t,r)=>Xx(t,r))}},_w=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ne(e.mutations.length===r.length);let i=function(){return cz}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Nl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ww=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Dt,Oe;function EP(n){switch(n){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function IP(n){if(n===void 0)return _t("GRPC error has no .code"),F.UNKNOWN;switch(n){case Dt.OK:return F.OK;case Dt.CANCELLED:return F.CANCELLED;case Dt.UNKNOWN:return F.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return F.INTERNAL;case Dt.UNAVAILABLE:return F.UNAVAILABLE;case Dt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Dt.NOT_FOUND:return F.NOT_FOUND;case Dt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Dt.ABORTED:return F.ABORTED;case Dt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Dt.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(Oe=Dt||(Dt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var n1=null;function bP(){return new TextEncoder}var mz=new lo([4294967295,4294967295],0);function r1(n){let e=bP().encode(n),t=new O0;return t.update(e),new Uint8Array(t.digest())}function i1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lo([t,r],0),new lo([i,o],0)]}var Cw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ps(`Invalid padding: ${t}`);if(r<0)throw new ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ps(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ps(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=lo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(lo.fromNumber(r)));return i.compare(mz)===1&&(i=new lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=r1(e),[r,i]=i1(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=r1(e),[r,i]=i1(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ps=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new ot(ge),Cn(),_e())}},Ol=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var Xa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Vp=class{constructor(e,t){this.targetId=e,this.me=t}},Lp=class{constructor(e,t,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},jp=class{constructor(){this.fe=0,this.ge=s1(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),t=_e(),r=_e();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Ol(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=s1()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ew=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=o1(),this.Qe=new ot(ge)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(kp(o))if(r===0){let s=new W(o.path);this.Ue(t,s,Mt.newNoDocument(s,se.min()))}else ne(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}n1?.et(function(d,f,g,y,I){var T,S,j,q,L,Y;let ie={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},te=f.unchangedNames;return te&&(ie.bloomFilter={applied:I===0,hashCount:(T=te?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(q=(j=(S=te?.bits)===null||S===void 0?void 0:S.bitmap)===null||j===void 0?void 0:j.length)!==null&&q!==void 0?q:0,padding:(Y=(L=te?.bits)===null||L===void 0?void 0:L.padding)!==null&&Y!==void 0?Y:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),ie}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wo(r).toUint8Array()}catch(c){if(c instanceof Pp)return fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Cw(s,i,o)}catch(c){return fr(c instanceof ps?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&kp(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Mt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=_e();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new kl(e,t,this.Qe,this.ke,r);return this.ke=Cn(),this.qe=o1(),this.Qe=new ot(ge),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new jp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ye(ge),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function o1(){return new ot(W.comparator)}function s1(){return new ot(W.comparator)}var yz={asc:"ASCENDING",desc:"DESCENDING"},vz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_z={and:"AND",or:"OR"},Iw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function bw(n,e){return n.useProto3Json||Gl(e)?e:{value:e}}function sc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wz(n,e){return sc(n,e.toTimestamp())}function Ct(n){return ne(!!n),se.fromTimestamp(function(t){let r=Ei(t);return new ft(r.seconds,r.nanos)}(n))}function eE(n,e){return Dw(n,e).canonicalString()}function Dw(n,e){let t=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TP(n){let e=Fe.fromString(n);return ne(FP(e)),e}function Fl(n,e){return eE(n.databaseId,e.path)}function Lr(n,e){let t=TP(e);if(t.get(1)!==n.databaseId.projectId)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(AP(t))}function SP(n,e){return eE(n.databaseId,e)}function MP(n){let e=TP(n);return e.length===4?Fe.emptyPath():AP(e)}function Tw(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AP(n){return ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function a1(n,e,t){return{name:Fl(n,e),fields:t.value.mapValue.fields}}function xP(n,e,t){let r=Lr(n,e.name),i=Ct(e.updateTime),o=e.createTime?Ct(e.createTime):se.min(),s=new en({mapValue:{fields:e.fields}}),a=Mt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Cz(n,e){return"found"in e?function(r,i){ne(!!i.found),i.found.name,i.found.updateTime;let o=Lr(r,i.found.name),s=Ct(i.found.updateTime),a=i.found.createTime?Ct(i.found.createTime):se.min(),c=new en({mapValue:{fields:i.found.fields}});return Mt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){ne(!!i.missing),ne(!!i.readTime);let o=Lr(r,i.missing),s=Ct(i.readTime);return Mt.newNoDocument(o,s)}(n,e):Z()}function Ez(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(ne(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?F.UNKNOWN:IP(l.code);return new B(d,l.message||"")}(s);t=new Lp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Lr(n,r.document.name),o=Ct(r.document.updateTime),s=r.document.createTime?Ct(r.document.createTime):se.min(),a=new en({mapValue:{fields:r.document.fields}}),c=Mt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Xa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Lr(n,r.document),o=r.readTime?Ct(r.readTime):se.min(),s=Mt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Xa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Lr(n,r.document),o=r.removedTargetIds||[];t=new Xa([],o,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ww(i,o),a=r.targetId;t=new Vp(a,s)}}return t}function Vl(n,e){let t;if(e instanceof Do)t={update:a1(n,e.key,e.value)};else if(e instanceof To)t={delete:Fl(n,e.key)};else if(e instanceof gr)t={update:a1(n,e.key,e.data),updateMask:Mz(e.fieldMask)};else{if(!(e instanceof Pl))return Z();t={verify:Fl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Io)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ii)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:wz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z()}(n,e.precondition)),t}function Sw(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?yt.updateTime(Ct(o.updateTime)):o.exists!==void 0?yt.exists(o.exists):yt.none()}(e.currentDocument):yt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),c=new Io;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ii(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new bi(d)}else"increment"in a?c=new bo(s,a.increment):Z();let l=wt.fromServerFormat(a.fieldPath);return new ws(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Lr(n,e.update.name),o=new en({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new On(l.map(d=>wt.fromServerFormat(d)))}(e.updateMask);return new gr(i,o,s,t,r)}return new Do(i,o,t,r)}if(e.delete){let i=Lr(n,e.delete);return new To(i,t)}if(e.verify){let i=Lr(n,e.verify);return new Pl(i,t)}return Z()}function Iz(n,e){return n&&n.length>0?(ne(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ct(i.updateTime):Ct(o);return s.isEqual(se.min())&&(s=Ct(o)),new vw(s,i.transformResults||[])}(t,e))):[]}function PP(n,e){return{documents:[SP(n,e.path)]}}function RP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SP(n,i);let o=function(l){if(l.length!==0)return OP(qe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Wa(g.field),direction:Dz(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=bw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function NP(n){let e=MP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ne(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=kP(f);return g instanceof qe&&YC(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(I){return new vs(Ka(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Gl(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new Ur(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Ur(y,g)}(t.endAt)),aP(e,i,s,o,a,"F",c,l)}function bz(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ka(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ka(t.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ka(t.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ka(t.unaryFilter.field);return Re.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(Ka(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return qe.create(t.compositeFilter.filters.map(r=>kP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(t.compositeFilter.op))}(n):Z()}function Dz(n){return yz[n]}function Tz(n){return vz[n]}function Sz(n){return _z[n]}function Wa(n){return{fieldPath:n.canonicalString()}}function Ka(n){return wt.fromServerFormat(n.fieldPath)}function OP(n){return n instanceof Re?function(t){if(t.op==="=="){if(qx(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(zx(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qx(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(zx(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:Tz(t.op),value:t.value}}}(n):n instanceof qe?function(t){let r=t.getFilters().map(i=>OP(i));return r.length===1?r[0]:{compositeFilter:{op:Sz(t.op),filters:r}}}(n):Z()}function Mz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ac=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bp=class{constructor(e){this.ct=e}};function Az(n,e){let t;if(e.document)t=xP(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=W.fromSegments(e.noDocument.path),i=Es(e.noDocument.readTime);t=Mt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{let r=W.fromSegments(e.unknownDocument.path),i=Es(e.unknownDocument.version);t=Mt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ft(i[0],i[1]);return se.fromTimestamp(o)}(e.readTime)),t}function c1(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Up(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Fl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:sc(o,s.version.toTimestamp()),createTime:sc(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cs(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:t.path.toArray(),version:Cs(e.version)}}return r}function Up(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cs(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Es(n){let e=new ft(n.seconds,n.nanoseconds);return se.fromTimestamp(e)}function ds(n,e){let t=(e.baseMutations||[]).map(o=>Sw(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Sw(n.ct,o)),i=ft.fromMillis(e.localWriteTimeMs);return new Rl(e.batchId,i,t,r)}function _l(n){let e=Es(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Es(n.lastLimboFreeSnapshotVersion):se.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ne(o.documents.length===1),gn(vc(MP(o.documents[0])))}(n.query):function(o){return gn(NP(o))}(n.query),new ac(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Et.fromBase64String(n.resumeToken))}function VP(n,e){let t=Cs(e.snapshotVersion),r=Cs(e.lastLimboFreeSnapshotVersion),i;i=kp(e.target)?PP(n.ct,e.target):RP(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_s(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tE(n){let e=NP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fp(e,e.limit,"L"):e}function U0(n,e){return new Nl(e.largestBatchId,Sw(n.ct,e.overlayMutation))}function u1(n,e){let t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function l1(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Cs(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}var Mw=class{getBundleMetadata(e,t){return d1(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Es(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return d1(e).put(function(i){return{bundleId:i.id,createTime:Cs(Ct(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return h1(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:tE(o.bundledQuery),readTime:Es(o.readTime)}}(r)})}saveNamedQuery(e,t){return h1(e).put(function(i){return{name:i.name,readTime:Cs(Ct(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function d1(n){return kt(n,"bundles")}function h1(n){return kt(n,"namedQueries")}var $p=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return pl(e).get(u1(this.userId,t)).next(r=>r?U0(this.serializer,r):null)}getOverlays(e,t){let r=Fr();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Nl(t,s);i.push(this.ht(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(pn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(pl(e).j("collectionPathOverlayIndex",a))}),N.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Fr(),o=pn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return pl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=U0(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Fr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=U0(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return pl(e).put(function(i,o,s){let[a,c,l]=u1(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Vl(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function pl(n){return kt(n,"documentOverlays")}var Aw=class{Pt(e){return kt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var wi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ut(e.integerValue));else if("doubleValue"in e){let r=ut(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Tl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ei(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?X1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ig(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ut(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};wi.vt=new wi;function xz(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function f1(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=xz(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var xw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=f1(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=f1(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Pw=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Rw=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},hs=class{constructor(){this.jt=new xw,this.Ht=new Pw(this.jt),this.Jt=new Rw(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var fs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ho(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=p1(n.arrayValue,e.arrayValue),t!==0?t:(t=p1(n.directionalValue,e.directionalValue),t!==0?t:W.comparator(n.documentKey,e.documentKey)))}function p1(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var zp=class{constructor(e){this.Xt=new Ye((t,r)=>wt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;let t=X0(e);if(t!==void 0&&!this.sn(t))return!1;let r=us(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ye(wt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Za(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Za(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Za(r.field,r.dir==="asc"?0:1)));return new tc(tc.UNKNOWN_ID,this.collectionId,t,Dl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function LP(n){var e,t;if(ne(n instanceof Re||n instanceof qe),n instanceof Re){if(n instanceof Np){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Re.create(n.field,"==",o)))||[];return qe.create(i,"or")}return n}let r=n.filters.map(i=>LP(i));return qe.create(r,n.op)}function Pz(n){if(n.getFilters().length===0)return[];let e=Ow(LP(n));return ne(jP(e)),Nw(e)||kw(e)?[e]:e.getFilters()}function Nw(n){return n instanceof Re}function kw(n){return n instanceof qe&&YC(n)}function jP(n){return Nw(n)||kw(n)||function(t){if(t instanceof qe&&aw(t)){for(let r of t.getFilters())if(!Nw(r)&&!kw(r))return!1;return!0}return!1}(n)}function Ow(n){if(ne(n instanceof Re||n instanceof qe),n instanceof Re)return n;if(n.filters.length===1)return Ow(n.filters[0]);let e=n.filters.map(r=>Ow(r)),t=qe.create(e,n.op);return t=qp(t),jP(t)?t:(ne(t instanceof qe),ne(rc(t)),ne(t.filters.length>1),t.filters.reduce((r,i)=>nE(r,i)))}function nE(n,e){let t;return ne(n instanceof Re||n instanceof qe),ne(e instanceof Re||e instanceof qe),t=n instanceof Re?e instanceof Re?function(i,o){return qe.create([i,o],"and")}(n,e):g1(n,e):e instanceof Re?g1(e,n):function(i,o){if(ne(i.filters.length>0&&o.filters.length>0),rc(i)&&rc(o))return iP(i,o.getFilters());let s=aw(i)?i:o,a=aw(i)?o:i,c=s.filters.map(l=>nE(l,a));return qe.create(c,"or")}(n,e),qp(t)}function g1(n,e){if(rc(e))return iP(e,n.getFilters());{let t=e.filters.map(r=>nE(n,r));return qe.create(t,"or")}}function qp(n){if(ne(n instanceof Re||n instanceof qe),n instanceof Re)return n;let e=n.getFilters();if(e.length===1)return qp(e[0]);if(nP(n))return n;let t=e.map(i=>qp(i)),r=[];return t.forEach(i=>{i instanceof Re?r.push(i):i instanceof qe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:qe.create(r,n.op)}var Fw=class{constructor(){this.un=new Ll}addToCollectionParentIndex(e,t){return this.un.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Wn.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},Ll=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(Fe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Fe.comparator)).toArray()}};var mp=new Uint8Array(0),Vw=class{constructor(e,t){this.databaseId=t,this.cn=new Ll,this.ln=new $r(r=>_s(r),(r,i)=>Wl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:pn(i)};return m1(e).put(o)}return N.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[U1(t),""],!1,!0);return m1(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Or(s.parent))}return r})}addFieldIndex(e,t){let r=gl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=za(e);return o.next(a=>{s.put(l1(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=gl(e),i=za(e),o=$a(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=gl(e),r=$a(e),i=za(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return N.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new zp(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=$a(e),i=!0,o=new Map;return N.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=_e(),a=[];return N.forEach(o,(c,l)=>{U("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${_s(t)}`);let d=function(L,Y){let ie=X0(Y);if(ie===void 0)return null;for(let te of Op(L,ie.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(l,c),f=function(L,Y){let ie=new Map;for(let te of us(Y))for(let b of Op(L,te.fieldPath))switch(b.op){case"==":case"in":ie.set(te.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return ie.set(te.fieldPath.canonicalString(),b.value),Array.from(ie.values())}return null}(l,c),g=function(L,Y){let ie=[],te=!0;for(let b of us(Y)){let v=b.kind===0?Qx(L,b.fieldPath,L.startAt):Yx(L,b.fieldPath,L.startAt);ie.push(v.value),te&&(te=v.inclusive)}return new Ur(ie,te)}(l,c),y=function(L,Y){let ie=[],te=!0;for(let b of us(Y)){let v=b.kind===0?Yx(L,b.fieldPath,L.endAt):Qx(L,b.fieldPath,L.endAt);ie.push(v.value),te&&(te=v.inclusive)}return new Ur(ie,te)}(l,c),I=this.In(c,l,g),T=this.In(c,l,y),S=this.Tn(c,l,f),j=this.En(c.indexId,d,I,g.inclusive,T,y.inclusive,S);return N.forEach(j,q=>r.G(q,t.limit).next(L=>{L.forEach(Y=>{let ie=W.fromSegments(Y.documentKey);s.has(ie)||(s=s.add(ie),a.push(ie))})}))}).next(()=>a)}return N.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Pz(qe.create(e.filters,"and")).map(r=>mw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/l]):mp,y=this.An(e,g,r[f%l],i),I=this.Rn(e,g,o[f%l],s),T=a.map(S=>this.An(e,g,S,!0));d.push(...this.createRange(y,I,T))}return d}An(e,t,r,i){let o=new fs(e,W.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new fs(e,W.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new zp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return N.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ye(wt.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new hs;for(let i of us(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);wi.vt.It(o,s)}return r.zt()}dn(e){let t=new hs;return wi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new hs;return wi.vt.It(ys(this.databaseId,t),r.Yt(function(o){let s=us(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new hs);let o=0;for(let s of us(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&xl(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);wi.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new hs;c.seed(a.zt()),wi.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=gl(e),i=za(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return N.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new Dl(f.sequenceNumber,new Wn(Es(f.readTime),new W(Or(f.documentKey)),f.largestBatchId)):Dl.empty(),y=d.fields.map(([I,T])=>new Za(wt.fromServerFormat(I),T));return new tc(d.indexId,d.collectionGroup,y,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=gl(e),o=za(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>N.forEach(a,c=>o.put(l1(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return N.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?N.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(o,c);return l.isEqual(d)?N.resolve():this.bn(e,o,c,l,d)}))))})}Dn(e,t,r,i){return $a(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return $a(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=$a(e),o=new Ye(ho);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new fs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ye(ho),i=this.Vn(t,e);if(i==null)return r;let o=X0(t);if(o!=null){let s=e.data.field(o.fieldPath);if(xl(s))for(let a of s.arrayValue.values||[])r=r.add(new fs(t.indexId,e.key,this.dn(a),i))}else r=r.add(new fs(t.indexId,e.key,mp,i));return r}bn(e,t,r,i,o){U("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,g){let y=c.getIterator(),I=l.getIterator(),T=Ua(y),S=Ua(I);for(;T||S;){let j=!1,q=!1;if(T&&S){let L=d(T,S);L<0?q=!0:L>0&&(j=!0)}else T!=null?q=!0:j=!0;j?(f(S),S=Ua(I)):q?(g(T),T=Ua(y)):(T=Ua(y),S=Ua(I))}}(i,o,ho,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),N.waitFor(s)}yn(e){let t=1;return za(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ho(s,a)).filter((s,a,c)=>!a||ho(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ho(s,e),c=ho(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,mp,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,mp,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return ho(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(y1)}getMinOffset(e,t){return N.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Z())).next(y1)}};function m1(n){return kt(n,"collectionParents")}function $a(n){return kt(n,"indexEntries")}function gl(n){return kt(n,"indexConfiguration")}function za(n){return kt(n,"indexState")}function y1(n){ne(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;GC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wn(e.readTime,e.documentKey,t)}var v1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function BP(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{ne(a===1)}));let l=[];for(let d of t.mutations){let f=W1(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return N.waitFor(o).next(()=>l)}function Hp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Z();e=n.noDocument}return JSON.stringify(e).length}Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);var Gp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ne(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fo(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Qa(e),s=fo(e);return s.add({}).next(a=>{ne(typeof a=="number");let c=new Rl(a,t,r,i),l=function(y,I,T){let S=T.baseMutations.map(q=>Vl(y.ct,q)),j=T.mutations.map(q=>Vl(y.ct,q));return{userId:I,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:S,mutations:j}}(this.serializer,this.userId,c),d=[],f=new Ye((g,y)=>ge(g.canonicalString(),y.canonicalString()));for(let g of i){let y=W1(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,V3))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),N.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return fo(e).get(t).next(r=>r?(ne(r.userId===this.userId),ds(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?N.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fo(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(ne(a.batchId>=r),o=ds(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fo(e).U("userMutationsIndex",t).next(r=>r.map(i=>ds(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=wp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Qa(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,g=Or(d);if(l===this.userId&&t.path.isEqual(g))return fo(e).get(f).next(y=>{if(!y)throw Z();ne(y.userId===this.userId),o.push(ds(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(ge),i=[];return t.forEach(o=>{let s=wp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Qa(e).J({range:a},(l,d,f)=>{let[g,y,I]=l,T=Or(y);g===this.userId&&o.path.isEqual(T)?r=r.add(I):f.done()});i.push(c)}),N.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=wp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ye(ge);return Qa(e).J({range:s},(c,l,d)=>{let[f,g,y]=c,I=Or(g);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fo(e).get(o).next(s=>{if(s===null)throw Z();ne(s.userId===this.userId),r.push(ds(this.serializer,s))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return N.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Qa(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Or(o[1]);i.push(c)}else a.done()}).next(()=>{ne(i.length===0)})})}containsKey(e,t){return UP(e,this.userId,t)}Nn(e){return $P(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function UP(n,e,t){let r=wp(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Qa(n).J({range:o,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function fo(n){return kt(n,"mutations")}function Qa(n){return kt(n,"documentMutations")}function $P(n){return kt(n,"mutationQueues")}var cc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Lw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new cc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>se.fromTimestamp(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return qa(e).J((s,a)=>{let c=_l(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>N.waitFor(o)).next(()=>i)}forEachTarget(e,t){return qa(e).J((r,i)=>{let o=_l(i);t(o)})}qn(e){return _1(e).get("targetGlobalKey").next(t=>(ne(t!==null),t))}Qn(e,t){return _1(e).put("targetGlobalKey",t)}Kn(e,t){return qa(e).put(VP(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=_s(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return qa(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=_l(a);Wl(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=po(e);return t.forEach(s=>{let a=pn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),N.waitFor(i)}removeMatchingKeys(e,t,r){let i=po(e);return N.forEach(t,o=>{let s=pn(o.path);return N.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=po(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=po(e),o=_e();return i.J({range:r,H:!0},(s,a,c)=>{let l=Or(s[1]),d=new W(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=pn(t.path),i=IDBKeyRange.bound([r],[U1(r)],!1,!0),o=0;return po(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return qa(e).get(t).next(r=>r?_l(r):null)}};function qa(n){return kt(n,"targets")}function _1(n){return kt(n,"targetGlobal")}function po(n){return kt(n,"targetDocuments")}function w1([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var jw=class{constructor(e){this.Un=e,this.buffer=new Ye(w1),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();w1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Bw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ao(t)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Mo(t)}yield this.Hn(3e5)}))}},Uw=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(kn.oe);let r=new jw(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(v1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v1):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Ha()<=vr.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Rz(n,e){return new Uw(n,e)}var $w=class{constructor(e,t){this.db=e,this.garbageCollector=Rz(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return yp(e,r)}removeReference(e,t,r){return yp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yp(e,t)}nr(e,t){return function(i,o){let s=!1;return $P(i).Y(a=>UP(i,a,o).next(c=>(c&&(s=!0),N.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,se.min()),po(e).delete(function(f){return[0,pn(f.path)]}(s))))});i.push(c)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yp(e,t)}tr(e,t){let r=po(e),i,o=kn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==kn.oe&&t(new W(Or(i)),o),o=l,i=c):o=kn.oe}).next(()=>{o!==kn.oe&&t(new W(Or(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function yp(n,e){return po(n).put(function(r,i){return{targetId:0,path:pn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Wp=class{constructor(){this.changes=new $r(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cs(e).put(r)}removeEntry(e,t,r){return cs(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Up(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Mt.newInvalidDocument(t);return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ml(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Mt.newInvalidDocument(t)};return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ml(t))},(i,o)=>{r={document:this.ir(t,o),size:Hp(o)}}).next(()=>r)}getEntries(e,t){let r=Cn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Cn(),i=new ot(W.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Hp(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return N.resolve();let i=new Ye(I1);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ml(i.first()),ml(i.last())),s=i.getIterator(),a=s.getNext();return cs(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=W.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&I1(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(ml(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Up(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Cn();for(let f of l){let g=this.ir(W.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Ql(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Cn(),s=E1(t,r),a=E1(t,Wn.max());return cs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.ir(W.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new qw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return C1(e).get("remoteDocumentGlobalKey").next(t=>(ne(!!t),t))}rr(e,t){return C1(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=Az(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(se.min())))return r}return Mt.newInvalidDocument(e)}};function zP(n){return new zw(n)}var qw=class extends Wp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new $r(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ye((o,s)=>ge(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=c1(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Hp(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=c1(this.cr.serializer,s.convertToNoDocument(se.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),N.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function C1(n){return kt(n,"remoteDocumentGlobal")}function cs(n){return kt(n,"remoteDocumentsV14")}function ml(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function E1(n,e){let t=e.documentKey.path.toArray();return[n,Up(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function I1(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ge(t[o],r[o]),i)return i;return i=ge(t.length,r.length),i||(i=ge(t[t.length-2],r[r.length-2]),i||ge(t[t.length-1],r[r.length-1]))}var Hw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Kp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&El(r.mutation,i,On.empty(),ft.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=Fr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=vl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Cn(),s=Cl(),a=function(){return Cl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof gr)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),El(d.mutation,l,d.mutation.getFieldMask(),ft.now())):s.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Hw(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Cl(),i=new ot((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||On.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=fP();d.forEach(g=>{if(!o.has(g)){let y=wP(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(Fr()),a=-1,c=o;return s.next(l=>N.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,_e())).next(d=>({batchId:a,changes:hP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=vl();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,c=>{let l=function(f,g){return new pr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Mt.newInvalidDocument(d)))});let a=vl();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&El(d.mutation,l,On.empty(),ft.now()),Ql(t,l)&&(a=a.insert(c,l))}),a})}};var Gw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return N.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ct(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:tE(i.bundledQuery),readTime:Ct(i.readTime)}}(t)),N.resolve()}};var Ww=class{constructor(){this.overlays=new ot(W.comparator),this.Ir=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fr();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=Fr(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ot((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Fr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Fr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return N.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Nl(t,r));let o=this.Ir.get(t);o===void 0&&(o=_e(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Kw=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var jl=class{constructor(){this.Tr=new Ye(Tt.Er),this.dr=new Ye(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Fe([])),r=new Tt(t,e),i=new Tt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Fe([])),r=new Tt(t,e),i=new Tt(t,e+1),o=_e();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||W.comparator(e.key,t.key)}};var Qw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Tt.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Rl(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Tt(t,0),i=new Tt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(ge);return t.forEach(i=>{let o=new Tt(i,0),s=new Tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new Tt(new W(o),0),a=new Ye(ge);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),N.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ne(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return N.forEach(t.mutations,i=>{let o=new Tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Tt(t,0),i=this.br.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Yw=class{constructor(e){this.Mr=e,this.docs=function(){return new ot(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Mt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Cn(),s=t.path,a=new W(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||GC(z1(d),r)<=0||(i.has(d.key)||Ql(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Zw(this)}getSize(e){return N.resolve(this.size)}},Zw=class extends Wp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Jw=class{constructor(e){this.persistence=e,this.Nr=new $r(t=>_s(t),Wl),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jl,this.targetCount=0,this.kr=cc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),N.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new cc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Kn(t),N.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.Br.containsKey(t))}};var Qp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new kn(0),this.Kr=!1,this.Kr=!0,this.$r=new Kw,this.referenceDelegate=e(this),this.Ur=new Jw(this),this.indexManager=new Fw,this.remoteDocumentCache=function(i){return new Yw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Bp(t),this.Gr=new Gw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ww,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Qw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new Xw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Xw=class extends Mp{constructor(e){super(),this.currentSequenceNumber=e}},Yp=class n{constructor(e){this.persistence=e,this.Jr=new jl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),N.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return N.or([()=>N.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var eC=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Ap("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jx,{unique:!0}),c.createObjectStore("documentMutations")}(e),b1(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=N.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),b1(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jx,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return N.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Q3});l.createIndex("collectionPathOverlayIndex",Y3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Z3,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:L3});l.createIndex("documentKeyIndex",j3),l.createIndex("collectionGroupIndex",B3)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:H3}).createIndex("sequenceNumberIndex",G3,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:W3}).createIndex("documentKeyIndex",K3,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Hp(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>N.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>N.forEach(a,c=>{ne(c.userId===o.userId);let l=ds(this.serializer,c);return BP(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Fe(s),l=function(f){return[0,pn(f)]}(c);o.push(t.get(l).next(d=>d?N.resolve():(f=>t.put({targetId:0,path:pn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>N.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:q3});let r=t.store("collectionParents"),i=new Ll,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:pn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Fe(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=Or(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=_l(i),s=VP(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new W(Fe.fromString(f.document.name).popFirst(5)):f.noDocument?W.fromSegments(f.noDocument.path):f.unknownDocument?W.fromSegments(f.unknownDocument.path):Z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>N.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=zP(this.serializer),o=new Qp(Yp.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:_e();ds(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),N.forEach(a,(c,l)=>{let d=new St(l),f=$p.lt(this.serializer,d),g=o.getIndexManager(d),y=Gp.lt(d,this.serializer,g,o.referenceDelegate);return new Kp(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Sl(t,kn.oe),c).next()})})}};function b1(n){n.createObjectStore("targetDocuments",{keyPath:$3}).createIndex("documentTargetsIndex",z3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",U3,{unique:!0}),n.createObjectStore("targetGlobal")}var $0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tC=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new B(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $w(this,i),this.Ai=t+"main",this.serializer=new Bp(c),this.Ri=new _o(this.Ai,this.hi,new eC(this.serializer)),this.$r=new Aw,this.Ur=new Lw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zP(this.serializer),this.Gr=new Mw,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&_t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,$0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new kn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>V(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>V(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>V(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ao(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return yl(e).get("owner").next(t=>N.resolve(this.vi(t)))}Ci(e){return vp(e).delete(this.clientId)}Fi(){return V(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=kt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return N.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?N.resolve(!0):yl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,$0);return!1}}return!(!this.networkEnabled||!this.inForeground)||vp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&U("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return V(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Sl(e,kn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Gp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Vw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $p.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?ez:c===16?X3:c===15?KC:c===14?Y1:c===13?Q1:c===12?J3:c===11?K1:void Z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Sl(a,this.Qr?this.Qr.next():kn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new B(F.FAILED_PRECONDITION,q1);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return yl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(F.FAILED_PRECONDITION,$0)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yl(e).put("owner",t)}static D(){return _o.D()}bi(e){let t=yl(e);return t.get("owner").next(r=>this.vi(r)?(U("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):N.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Em()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function yl(n){return kt(n,"owner")}function vp(n){return kt(n,"clientMetadata")}function rE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var nC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=_e(),i=_e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var rC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Em()?8:H1(eu())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new rC;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ha()<=vr.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(Ha()<=vr.DEBUG&&U("QueryEngine","Query:",Ga(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ha()<=vr.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(t))):N.resolve())}Yi(e,t){if(Zx(t))return N.resolve(null);let r=gn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fp(t,null,"F"),r=gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=_e(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Fp(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return Zx(t)||i.isEqual(se.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?N.resolve(null):(Ha()<=vr.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ga(t)),this.rs(e,s,t,$1(i,-1)).next(a=>a))})}ts(e,t){let r=new Ye(lP(e));return t.forEach((i,o)=>{Ql(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ha()<=vr.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Ga(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iC=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ot(ge),this._s=new $r(o=>_s(o),Wl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qP(n,e,t,r){return new iC(n,e,t,r)}function HP(n,e){return V(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=_e();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Nz(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=N.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(c,I)).next(T=>{let S=l.docVersions.get(I);ne(S!==null),T.version.compareTo(S)<0&&(f.applyToRemoteDocument(T,l),T.isValidDocument()&&(T.setReadTime(l.commitVersion),d.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function GP(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function kz(n,e){let t=G(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Et.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(T,S,j){return T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let c=Cn(),l=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(WP(o,s,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(se.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function WP(n,e,t){let r=_e(),i=_e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Cn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function Oz(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uc(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ac(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function lc(n,e,t){return V(this,null,function*(){let r=G(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ao(s))throw s;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Jp(n,e,t){let r=G(n),i=se.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=G(c),g=f._s.get(d);return g!==void 0?N.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:_e())).next(a=>(YP(r,uP(e),a),{documents:a,Ts:o})))}function KP(n,e){let t=G(n),r=G(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function QP(n,e){let t=G(n),r=t.us.get(e)||se.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,$1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YP(t,e,i),i))}function YP(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function Fz(n,e,t,r){return V(this,null,function*(){let i=G(n),o=_e(),s=Cn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield uc(i,function(d){return gn(vc(Fe.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>WP(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function Vz(r,i){return V(this,arguments,function*(n,e,t=_e()){let o=yield uc(n,gn(tE(e.bundledQuery))),s=G(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ct(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Et.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function D1(n,e){return`firestore_clients_${n}_${e}`}function T1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function z0(n,e){return`firestore_targets_${n}_${e}`}var Xp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new B(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(_t("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Il=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new B(r.error.code,r.error.message))),o?new n(e,r.state,i):(_t("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=JC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=G1(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(_t("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},oC=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(_t("SharedClientState",`Failed to parse online state: ${e}`),null)}},Bl=class{constructor(){this.activeTargetIds=JC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},bl=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ot(ge),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=D1(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Bl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return V(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(D1(this.persistenceKey,r));if(i){let o=eg.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(z0(this.persistenceKey,e));if(i){let o=Il.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(z0(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return U("SharedClientState","READ",e,t),t}setItem(e,t){U("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(U("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>V(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=kn.oe;if(o!=null)try{let a=JSON.parse(o);ne(typeof a=="number"),s=a}catch(a){_t("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==kn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Xp(this.currentUser,e,t,r),o=T1(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=T1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=z0(this.persistenceKey,e),o=new Il(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return eg.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Xp.Rs(new St(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Il.Rs(i,t)}Ls(e){return oC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return V(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=JC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},tg=class{constructor(){this.so=new Bl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sC=class{_o(e){}shutdown(){}};var ng=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _p=null;function q0(){return _p===null?_p=function(){return 268435456+Math.round(2147483648*Math.random())}():_p++,"0x"+_p.toString(16)}var Lz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var aC=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Xt="WebChannelConnection",cC=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=q0(),c=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(d=>(U("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw fr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Lz[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=q0();return new Promise((s,a)=>{let c=new F0;c.setWithCredentials(!0),c.listenOnce(V0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fl.NO_ERROR:let d=c.getResponseJson();U(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case fl.TIMEOUT:U(Xt,`RPC '${e}' ${o} timed out`),a(new B(F.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:let f=c.getStatus();if(U(Xt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let I=function(S){let j=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(j)>=0?j:F.UNKNOWN}(y.status);a(new B(I,y.message))}else a(new B(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{U(Xt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);U(Xt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=q0(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=B0(),a=j0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");U(Xt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,y=!1,I=new aC({Io:S=>{y?U(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(U(Xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),U(Xt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),T=(S,j,q)=>{S.listen(j,L=>{try{q(L)}catch(Y){setTimeout(()=>{throw Y},0)}})};return T(f,Ba.EventType.OPEN,()=>{y||(U(Xt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),T(f,Ba.EventType.CLOSE,()=>{y||(y=!0,U(Xt,`RPC '${e}' stream ${i} transport closed`),I.So())}),T(f,Ba.EventType.ERROR,S=>{y||(y=!0,fr(Xt,`RPC '${e}' stream ${i} transport errored:`,S),I.So(new B(F.UNAVAILABLE,"The operation could not be completed")))}),T(f,Ba.EventType.MESSAGE,S=>{var j;if(!y){let q=S.data[0];ne(!!q);let L=q,Y=L.error||((j=L[0])===null||j===void 0?void 0:j.error);if(Y){U(Xt,`RPC '${e}' stream ${i} received error:`,Y);let ie=Y.status,te=function(C){let D=Dt[C];if(D!==void 0)return IP(D)}(ie),b=Y.message;te===void 0&&(te=F.INTERNAL,b="Unknown error status: "+ie+" with message "+Y.message),y=!0,I.So(new B(te,b)),f.close()}else U(Xt,`RPC '${e}' stream ${i} received:`,q),I.bo(q)}}),T(a,L0.STAT_EVENT,S=>{S.stat===gp.PROXY?U(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===gp.NOPROXY&&U(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function ZP(){return typeof window<"u"?window:null}function bp(){return typeof document<"u"?document:null}function Yl(n){return new Iw(n,!0)}var Ul=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var rg=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ul(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return V(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return V(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return V(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(_t(t.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new B(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>V(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uC=class extends rg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Ez(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Ct(s.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Tw(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=kp(c)?{documents:PP(o,c)}:{query:RP(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DP(o,s.resumeToken);let l=bw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=sc(o,s.snapshotVersion.toTimestamp());let l=bw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bz(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Tw(this.serializer),t.removeTarget=e,this.a_(t)}},lC=class extends rg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Iz(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Tw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Vl(this.serializer,r))};this.a_(t)}};var dC=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Dw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(F.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Dw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(F.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},hC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_t(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var fC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>V(this,null,function*(){xo(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(c){return V(this,null,function*(){let l=G(c);l.L_.add(4),yield _c(l),l.q_.set("Unknown"),l.L_.delete(4),yield Zl(l)})}(this))}))}),this.q_=new hC(r,i)}};function Zl(n){return V(this,null,function*(){if(xo(n))for(let e of n.B_)yield e(!0)})}function _c(n){return V(this,null,function*(){for(let e of n.B_)yield e(!1)})}function bg(n,e){let t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sE(t)?oE(t):Cc(t).r_()&&iE(t,e))}function dc(n,e){let t=G(n),r=Cc(t);t.N_.delete(e),r.r_()&&JP(t,e),t.N_.size===0&&(r.r_()?r.o_():xo(t)&&t.q_.set("Unknown"))}function iE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cc(n).A_(e)}function JP(n,e){n.Q_.xe(e),Cc(n).R_(e)}function oE(n){n.Q_=new Ew({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Cc(n).start(),n.q_.v_()}function sE(n){return xo(n)&&!Cc(n).n_()&&n.N_.size>0}function xo(n){return G(n).L_.size===0}function XP(n){n.Q_=void 0}function jz(n){return V(this,null,function*(){n.q_.set("Online")})}function Bz(n){return V(this,null,function*(){n.N_.forEach((e,t)=>{iE(n,e)})})}function Uz(n,e){return V(this,null,function*(){XP(n),sE(n)?(n.q_.M_(e),oE(n)):n.q_.set("Unknown")})}function $z(n,e,t){return V(this,null,function*(){if(n.q_.set("Online"),e instanceof Lp&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ig(n,r)}else if(e instanceof Xa?n.Q_.Ke(e):e instanceof Vp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield GP(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),JP(o,c);let f=new ac(d.target,c,l,d.sequenceNumber);iE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield ig(n,r)}})}function ig(n,e,t){return V(this,null,function*(){if(!Ao(e))throw e;n.L_.add(1),yield _c(n),n.q_.set("Offline"),t||(t=()=>GP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zl(n)}))})}function eR(n,e){return e().catch(t=>ig(n,t,e))}function wc(n){return V(this,null,function*(){let e=G(n),t=So(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zz(e);)try{let i=yield Oz(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,qz(e,i)}catch(i){yield ig(e,i)}tR(e)&&nR(e)})}function zz(n){return xo(n)&&n.O_.length<10}function qz(n,e){n.O_.push(e);let t=So(n);t.r_()&&t.V_&&t.m_(e.mutations)}function tR(n){return xo(n)&&!So(n).n_()&&n.O_.length>0}function nR(n){So(n).start()}function Hz(n){return V(this,null,function*(){So(n).p_()})}function Gz(n){return V(this,null,function*(){let e=So(n);for(let t of n.O_)e.m_(t.mutations)})}function Wz(n,e,t){return V(this,null,function*(){let r=n.O_.shift(),i=_w.from(r,e,t);yield eR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wc(n)})}function Kz(n,e){return V(this,null,function*(){e&&So(n).V_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return EP(s)&&s!==F.ABORTED}(i.code)){let o=r.O_.shift();So(r).s_(),yield eR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield wc(r)}})}(n,e)),tR(n)&&nR(n)})}function S1(n,e){return V(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=xo(t);t.L_.add(3),yield _c(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zl(t)})}function pC(n,e){return V(this,null,function*(){let t=G(n);e?(t.L_.delete(2),yield Zl(t)):e||(t.L_.add(2),yield _c(t),t.q_.set("Unknown"))})}function Cc(n){return n.K_||(n.K_=function(t,r,i){let o=G(t);return o.w_(),new uC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:jz.bind(null,n),Ro:Bz.bind(null,n),mo:Uz.bind(null,n),d_:$z.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.K_.s_(),sE(n)?oE(n):n.q_.set("Unknown")):(yield n.K_.stop(),XP(n))}))),n.K_}function So(n){return n.U_||(n.U_=function(t,r,i){let o=G(t);return o.w_(),new lC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hz.bind(null,n),mo:Kz.bind(null,n),f_:Gz.bind(null,n),g_:Wz.bind(null,n)}),n.B_.push(e=>V(this,null,function*(){e?(n.U_.s_(),yield wc(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var gC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ec(n,e){if(_t("AsyncQueue",`${e}: ${n}`),Ao(n))return new B(F.UNAVAILABLE,`${e}: ${n}`);throw n}var og=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=vl(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sg=class{constructor(){this.W_=new ot(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},hc=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,og.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var mC=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},yC=class{constructor(){this.queries=M1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=G(t),o=i.queries;i.queries=M1(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new B(F.ABORTED,"Firestore shutting down"))}};function M1(){return new $r(n=>cP(n),Kl)}function aE(n,e){return V(this,null,function*(){let t=G(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new mC,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ec(s,`Initialization of query '${Ga(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&uE(t)})}function cE(n,e){return V(this,null,function*(){let t=G(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Qz(n,e){let t=G(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&uE(t)}function Yz(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function uE(n){n.Y_.forEach(e=>{e.next()})}var vC,A1;(A1=vC||(vC={})).ea="default",A1.Cache="cache";var $l=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vC.Cache}};var _C=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var ag=class{constructor(e){this.serializer=e}Es(e){return Lr(this.serializer,e)}ds(e){return e.metadata.exists?xP(this.serializer,e.document,!1):Mt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ct(e)}},wC=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rR(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Fe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new ag(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||_e()).add(o);t.set(s,a)}}return t}complete(){return V(this,null,function*(){let e=yield Fz(this.localStore,new ag(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield Vz(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function rR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var cg=class{constructor(e){this.key=e}},ug=class{constructor(e){this.key=e}},lg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=lP(e),this.Ra=new og(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new sg,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Ql(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?I!==T&&(r.track({type:3,doc:y}),S=!0):this.ga(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(s=s.add(y),o=T?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,I){let T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return T(y)-T(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new hc(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ug(r))}),this.da.forEach(r=>{e.has(r)||t.push(new cg(r))}),t}ba(e){this.Ta=e.Ts,this.da=_e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return hc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},CC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},EC=class{constructor(e){this.key=e,this.va=!1}},IC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new $r(a=>cP(a),Kl),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(W.comparator),this.Na=new Map,this.La=new jl,this.Ba={},this.ka=new Map,this.qa=cc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Zz(n,e,t=!0){return V(this,null,function*(){let r=Dg(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield iR(r,e,t,!0),i})}function Jz(n,e){return V(this,null,function*(){let t=Dg(n);yield iR(t,e,!0,!1)})}function iR(n,e,t,r){return V(this,null,function*(){let i=yield uc(n.localStore,gn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield lE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&bg(n.remoteStore,i),a})}function lE(n,e,t,r,i){return V(this,null,function*(){n.Ka=(f,g,y)=>function(T,S,j,q){return V(this,null,function*(){let L=S.view.ma(j);L.ns&&(L=yield Jp(T.localStore,S.query,!1).then(({documents:b})=>S.view.ma(b,L)));let Y=q&&q.targetChanges.get(S.targetId),ie=q&&q.targetMismatches.get(S.targetId)!=null,te=S.view.applyChanges(L,T.isPrimaryClient,Y,ie);return bC(T,S.targetId,te.wa),te.snapshot})}(n,f,g,y);let o=yield Jp(n.localStore,e,!0),s=new lg(e,o.Ts),a=s.ma(o.documents),c=Ol.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);bC(n,t,l.wa);let d=new CC(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Xz(n,e,t){return V(this,null,function*(){let r=G(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Kl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&dc(r.remoteStore,i.targetId),fc(r,i.targetId)}).catch(Mo))):(fc(r,i.targetId),yield lc(r.localStore,i.targetId,!0))})}function e5(n,e){return V(this,null,function*(){let t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),dc(t.remoteStore,r.targetId))})}function t5(n,e,t){return V(this,null,function*(){let r=pE(n);try{let i=yield function(s,a){let c=G(s),l=ft.now(),d=a.reduce((y,I)=>y.add(I.key),_e()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Cn(),T=_e();return c.cs.getEntries(y,d).next(S=>{I=S,I.forEach((j,q)=>{q.isValidDocument()||(T=T.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(S=>{f=S;let j=[];for(let q of a){let L=gz(q,f.get(q.key).overlayedDocument);L!=null&&j.push(new gr(q.key,L,tP(L.value.mapValue),yt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,j,a)}).next(S=>{g=S;let j=S.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(y,S.batchId,j)})}).then(()=>({batchId:g.batchId,changes:hP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new ot(ge)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Si(r,i.changes),yield wc(r.remoteStore)}catch(i){let o=Ec(i,"Failed to persist write");t.reject(o)}})}function oR(n,e){return V(this,null,function*(){let t=G(n);try{let r=yield kz(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ne(s.va):i.removedDocuments.size>0&&(ne(s.va),s.va=!1))}),yield Si(t,r,e)}catch(r){yield Mo(r)}})}function x1(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=G(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&uE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function n5(n,e,t){return V(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ot(W.comparator);s=s.insert(o,Mt.newNoDocument(o,se.min()));let a=_e().add(o),c=new kl(se.min(),new Map,new ot(ge),s,a);yield oR(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),fE(r)}else yield lc(r.localStore,e,!1).then(()=>fc(r,e,t)).catch(Mo)})}function r5(n,e){return V(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield Nz(t.localStore,e);hE(t,r,null),dE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Si(t,i)}catch(i){yield Mo(i)}})}function i5(n,e,t){return V(this,null,function*(){let r=G(n);try{let i=yield function(s,a){let c=G(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ne(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);hE(r,e,t),dE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Si(r,i)}catch(i){yield Mo(i)}})}function o5(n,e){return V(this,null,function*(){let t=G(n);xo(t.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=G(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ec(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function dE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function hE(n,e,t){let r=G(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function fc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||sR(n,r)})}function sR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(dc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),fE(n))}function bC(n,e,t){for(let r of t)r instanceof cg?(n.La.addReference(r.key,e),s5(n,r)):r instanceof ug?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||sR(n,r.key)):Z()}function s5(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),fE(n))}function fE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Fe.fromString(e)),r=n.qa.next();n.Na.set(r,new EC(t)),n.Oa=n.Oa.insert(t,r),bg(n.remoteStore,new ac(gn(vc(t.path)),r,"TargetPurposeLimboResolution",kn.oe))}}function Si(n,e,t){return V(this,null,function*(){let r=G(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=nC.Wi(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return V(this,null,function*(){let d=G(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>N.forEach(l,g=>N.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>N.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Ao(f))throw f;U("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),I=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,T)}}})}(r.localStore,o))})}function a5(n,e){return V(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield HP(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new B(F.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Si(t,r.hs)}})}function c5(n,e){let t=G(n),r=t.Na.get(e);if(r&&r.va)return _e().add(r.key);{let i=_e(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function u5(n,e){return V(this,null,function*(){let t=G(n),r=yield Jp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&bC(t,e.targetId,i.wa),i})}function l5(n,e){return V(this,null,function*(){let t=G(n);return QP(t.localStore,e).then(r=>Si(t,r))})}function d5(n,e,t,r){return V(this,null,function*(){let i=G(n),o=yield function(a,c){let l=G(a),d=G(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):N.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield wc(i.remoteStore):t==="acknowledged"||t==="rejected"?(hE(i,e,r||null),dE(i,e),function(a,c){G(G(a).mutationQueue).On(c)}(i.localStore,e)):Z(),yield Si(i,o)):U("SyncEngine","Cannot apply mutation batch with id: "+e)})}function h5(n,e){return V(this,null,function*(){let t=G(n);if(Dg(t),pE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield P1(t,r.toArray());t.Qa=!0,yield pC(t.remoteStore,!0);for(let o of i)bg(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(fc(t,s),lc(t.localStore,s,!0))),dc(t.remoteStore,s)}),yield i,yield P1(t,r),function(s){let a=G(s);a.Na.forEach((c,l)=>{dc(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ot(W.comparator)}(t),t.Qa=!1,yield pC(t.remoteStore,!1)}})}function P1(n,e,t){return V(this,null,function*(){let r=G(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield uc(r.localStore,gn(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield u5(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield KP(r.localStore,s);a=yield uc(r.localStore,l),yield lE(r,aR(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function aR(n){return aP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function f5(n){return function(t){return G(G(t).persistence).Qi()}(G(n).localStore)}function p5(n,e,t,r){return V(this,null,function*(){let i=G(n);if(i.Qa)return void U("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield QP(i.localStore,uP(o[0])),a=kl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Et.EMPTY_BYTE_STRING);yield Si(i,s,a);break}case"rejected":yield lc(i.localStore,e,!0),fc(i,e,r);break;default:Z()}})}function g5(n,e,t){return V(this,null,function*(){let r=Dg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U("SyncEngine","Adding an already active target "+i);continue}let o=yield KP(r.localStore,i),s=yield uc(r.localStore,o);yield lE(r,aR(o),s.targetId,!1,s.resumeToken),bg(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield lc(r.localStore,i,!1).then(()=>{dc(r.remoteStore,i),fc(r,i)}).catch(Mo))}})}function Dg(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n5.bind(null,e),e.Ca.d_=Qz.bind(null,e.eventManager),e.Ca.$a=Yz.bind(null,e.eventManager),e}function pE(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i5.bind(null,e),e}function m5(n,e,t){let r=G(n);(function(o,s,a){return V(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,I){let T=G(y),S=Ct(I.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",j=>T.Gr.getBundleMetadata(j,I.id)).then(j=>!!j&&j.createTime.compareTo(S)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(rR(c));let l=new wC(c,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield Si(o,f.Ia,void 0),yield function(y,I){let T=G(y);return T.persistence.runTransaction("Save bundle","readwrite",S=>T.Gr.saveBundleMetadata(S,I))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return fr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var DC=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return V(this,null,function*(){this.serializer=Yl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return qP(this.persistence,new Zp,t.initialUser,this.serializer)}Ga(t){return new Qp(Yp.Zr,this.serializer)}Wa(t){return new tg}terminate(){return V(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var dg=class n extends DC{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return V(this,null,function*(){yield wm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield pE(this.Ja.syncEngine),yield wc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return qP(this.persistence,new Zp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Bw(r,e.asyncQueue,t)}Ha(e,t){let r=new rw(t,this.persistence);return new nw(e.asyncQueue,r)}Ga(e){let t=rE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new tC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ZP(),bp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new tg}},TC=class n extends dg{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return V(this,null,function*(){yield wm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof bl&&(this.sharedClientState.syncEngine={no:d5.bind(null,t),ro:p5.bind(null,t),io:g5.bind(null,t),Qi:f5.bind(null,t),eo:l5.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>V(this,null,function*(){yield h5(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=ZP();if(!bl.D(t))throw new B(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=rE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},gE=(()=>{class n{initialize(t,r){return V(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>x1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a5.bind(null,this.syncEngine),yield pC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new yC}()}createDatastore(t){let r=Yl(t.databaseInfo.databaseId),i=function(s){return new cC(s)}(t.databaseInfo);return function(s,a,c,l){return new dC(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new fC(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>x1(this.syncEngine,r,0),function(){return ng.D()?new ng:new sC}())}createSyncEngine(t,r){return function(o,s,a,c,l,d,f){let g=new IC(o,s,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return V(this,null,function*(){var t,r;yield function(o){return V(this,null,function*(){let s=G(o);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield _c(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function R1(n,e=10240){let t=0;return{read(){return V(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return V(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var pc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var SC=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Nt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return V(this,null,function*(){return this.metadata.promise})}Ua(){return V(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return V(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new _C(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return V(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return V(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return V(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var MC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return V(this,null,function*(){let s=G(i),a={documents:o.map(f=>Fl(s.serializer,f))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Fe.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=Cz(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());ne(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new To(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return V(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=W.fromPath(r);this.mutations.push(new Pl(i,this.precondition(i)))}),yield function(r,i){return V(this,null,function*(){let o=G(r),s={writes:i.map(a=>Vl(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Fe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Z();t=se.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new B(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(se.min())?yt.exists(!1):yt.updateTime(t):yt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(se.min()))throw new B(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yt.updateTime(t)}return yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var AC=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Ul(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>V(this,null,function*(){let e=new MC(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Gl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!EP(t)}return!1}};var xC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>V(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ec(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function H0(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(this,null,function*(){r.isEqual(i)||(yield HP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function N1(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mE(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>S1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>S1(e.remoteStore,i)),n._onlineComponents=e})}function mE(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield H0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fr("Error using user provided cache. Falling back to memory cache: "+t),yield H0(n,new DC)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield H0(n,new DC);return n._offlineComponents})}function Tg(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield N1(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield N1(n,new gE))),n._onlineComponents})}function cR(n){return mE(n).then(e=>e.persistence)}function yE(n){return mE(n).then(e=>e.localStore)}function uR(n){return Tg(n).then(e=>e.remoteStore)}function vE(n){return Tg(n).then(e=>e.syncEngine)}function y5(n){return Tg(n).then(e=>e.datastore)}function gc(n){return V(this,null,function*(){let e=yield Tg(n),t=e.eventManager;return t.onListen=Zz.bind(null,e.syncEngine),t.onUnlisten=Xz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Jz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e5.bind(null,e.syncEngine),t})}function v5(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield cR(n),t=yield uR(n);return e.setNetworkEnabled(!0),function(i){let o=G(i);return o.L_.delete(0),Zl(o)}(t)}))}function _5(n){return n.asyncQueue.enqueue(()=>V(this,null,function*(){let e=yield cR(n),t=yield uR(n);return e.setNetworkEnabled(!1),function(i){return V(this,null,function*(){let o=G(i);o.L_.add(0),yield _c(o),o.q_.set("Offline")})}(t)}))}function w5(n,e){let t=new Nt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield function(l,d){let f=G(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ec(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield yE(n),e,t)})),t.promise}function lR(n,e,t={}){let r=new Nt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new pc({next:g=>{d.Za(),s.enqueueAndForget(()=>cE(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new B(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new B(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new $l(vc(a.path),d,{includeMetadataChanges:!0,_a:!0});return aE(o,f)}(yield gc(n),n.asyncQueue,e,t,r)})),r.promise}function C5(n,e){let t=new Nt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o,s){return V(this,null,function*(){try{let a=yield Jp(i,o,!0),c=new lg(o,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Ec(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield yE(n),e,t)})),t.promise}function dR(n,e,t={}){let r=new Nt;return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(o,s,a,c,l){let d=new pc({next:g=>{d.Za(),s.enqueueAndForget(()=>cE(o,f)),g.fromCache&&c.source==="server"?l.reject(new B(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new $l(a,d,{includeMetadataChanges:!0,_a:!0});return aE(o,f)}(yield gc(n),n.asyncQueue,e,t,r)})),r.promise}function E5(n,e){let t=new pc(e);return n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){G(i).Y_.add(o),o.next()}(yield gc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return function(i,o){G(i).Y_.delete(o)}(yield gc(n),t)}))}}function I5(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?bP().encode(s):s,function(d,f){return new SC(d,f)}(function(d,f){if(d instanceof Uint8Array)return R1(d,f);if(d instanceof ArrayBuffer)return R1(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Yl(e));n.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){m5(yield vE(n),i,r)}))}function b5(n,e){return n.asyncQueue.enqueue(()=>V(this,null,function*(){return function(r,i){let o=G(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield yE(n),e)}))}function hR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var k1=new Map;function _E(n,e,t){if(!t)throw new B(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wE(n,e,t,r){if(e===!0&&r===!0)throw new B(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function O1(n){if(!W.isDocumentKey(n))throw new B(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F1(n){if(W.isDocumentKey(n))throw new B(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function Ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sg(n);throw new B(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fR(n,e){if(e<=0)throw new B(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var hg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Is=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new G0;switch(r.type){case"firstParty":return new Y0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=k1.get(t);r&&(U("ComponentProvider","Removing Datastore"),k1.delete(t),r.terminate())}(this),Promise.resolve()}};function pR(n,e,t,r={}){var i;let o=(n=Ve(n,Is))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=St.MOCK_USER;else{a=rb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new St(l)}n._authCredentials=new W0(new Dp(a,c))}}var Ut=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},jr=class n extends Ut{constructor(e,t,r){super(e,t,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function CE(n,e,...t){if(n=lt(n),_E("collection","path",e),n instanceof Is){let r=Fe.fromString(e,...t);return F1(r),new jr(n,null,r)}{if(!(n instanceof Je||n instanceof jr))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return F1(r),new jr(n.firestore,null,r)}}function gR(n,e){if(n=Ve(n,Is),_E("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ut(n,null,function(r){return new pr(Fe.emptyPath(),r)}(e))}function Jl(n,e,...t){if(n=lt(n),arguments.length===1&&(e=Tp.newId()),_E("doc","path",e),n instanceof Is){let r=Fe.fromString(e,...t);return O1(r),new Je(n,null,new W(r))}{if(!(n instanceof Je||n instanceof jr))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return O1(r),new Je(n.firestore,n instanceof jr?n.converter:null,new W(r))}}function EE(n,e){return n=lt(n),e=lt(e),(n instanceof Je||n instanceof jr)&&(e instanceof Je||e instanceof jr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IE(n,e){return n=lt(n),e=lt(e),n instanceof Ut&&e instanceof Ut&&n.firestore===e.firestore&&Kl(n._query,e._query)&&n.converter===e.converter}var fg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ul(this,"async_queue_retry"),this.Vu=()=>{let r=bp();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=bp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=bp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Nt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return V(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ao(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw _t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=gC.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}wu(){return V(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function PC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var RC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var mR=-1,pt=class extends Is{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fg(e),this._firestoreClient=void 0,yield e}})}};function $t(n){if(n._terminated)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yR(n),n._firestoreClient}function yR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new iw(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function vR(n,e){fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return wR(n,gE.provider,{build:r=>new dg(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function _R(n){return V(this,null,function*(){fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();wR(n,gE.provider,{build:t=>new TC(t,e.cacheSizeBytes)})})}function wR(n,e,t){if((n=Ve(n,pt))._firestoreClient||n._terminated)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new B(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yR(n)}function CR(n){if(n._initialized&&!n._terminated)throw new B(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Nt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{yield function(r){return V(this,null,function*(){if(!_o.D())return Promise.resolve();let i=r+"main";yield _o.delete(i)})}(rE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ER(n){return function(t){let r=new Nt;return t.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return o5(yield vE(t),r)})),r.promise}($t(n=Ve(n,pt)))}function IR(n){return v5($t(n=Ve(n,pt)))}function bR(n){return _5($t(n=Ve(n,pt)))}function DR(n,e){let t=$t(n=Ve(n,pt)),r=new RC;return I5(t,n._databaseId,e,r),r}function TR(n,e){return b5($t(n=Ve(n,pt)),e).then(t=>t?new Ut(n,null,t.query):null)}var zr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new B(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var mr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Di=class{constructor(e){this._methodName=e}};var bs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var zl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var D5=/^__.*__$/,NC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Do(e,this.data,t,this.fieldTransforms)}},pg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function SR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var gg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(SR(this.Cu)&&D5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},kC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yl(e)}Qu(e,t,r,i=!1){return new gg({Cu:e,methodName:t,qu:r,path:wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ms(n){let e=n._freezeSettings(),t=Yl(n._databaseId);return new kC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mg(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);TE("Data must be an object, but it was:",s,r);let a=xR(r,s),c,l;if(o.merge)c=new On(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=jC(e,f,t);if(!s.contains(g))throw new B(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);RR(d,g)||d.push(g)}c=new On(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new NC(new en(a),c,l)}var ql=class n extends Di{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function MR(n,e,t){return new gg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var OC=class n extends Di{_toFieldTransform(e){return new ws(e.path,new Io)}isEqual(e){return e instanceof n}},FC=class n extends Di{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=MR(this,e,!0),r=this.Ku.map(o=>As(o,t)),i=new Ii(r);return new ws(e.path,i)}isEqual(e){return e instanceof n&&Im(this.Ku,e.Ku)}},VC=class n extends Di{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=MR(this,e,!0),r=this.Ku.map(o=>As(o,t)),i=new bi(r);return new ws(e.path,i)}isEqual(e){return e instanceof n&&Im(this.Ku,e.Ku)}},LC=class n extends Di{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new bo(e.serializer,gP(e.serializer,this.$u));return new ws(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function bE(n,e,t,r){let i=n.Qu(1,e,t);TE("Data must be an object, but it was:",i,r);let o=[],s=en.empty();Ss(r,(c,l)=>{let d=SE(e,c,t);l=lt(l);let f=i.Nu(d);if(l instanceof ql)o.push(d);else{let g=As(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new On(o);return new pg(s,a,i.fieldTransforms)}function DE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[jC(e,r,t)],c=[i];if(o.length%2!=0)throw new B(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(jC(e,o[g])),c.push(o[g+1]);let l=[],d=en.empty();for(let g=a.length-1;g>=0;--g)if(!RR(l,a[g])){let y=a[g],I=c[g];I=lt(I);let T=s.Nu(y);if(I instanceof ql)l.push(y);else{let S=As(I,T);S!=null&&(l.push(y),d.set(y,S))}}let f=new On(l);return new pg(d,f,s.fieldTransforms)}function AR(n,e,t,r=!1){return As(t,n.Qu(r?4:3,e))}function As(n,e){if(PR(n=lt(n)))return TE("Unsupported field value:",e,n),xR(n,e);if(n instanceof Di)return function(r,i){if(!SR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=As(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ft.fromDate(r);return{timestampValue:sc(i.serializer,o)}}if(r instanceof ft){let o=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sc(i.serializer,o)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:DP(i.serializer,r._byteString)};if(r instanceof Je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zl)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return XC(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Sg(r)}`)}(n,e)}function xR(n,e){let t={};return Z1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(n,(r,i)=>{let o=As(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function PR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof bs||n instanceof zr||n instanceof Je||n instanceof Di||n instanceof zl)}function TE(n,e,t){if(!PR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Sg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function jC(n,e,t){if((e=lt(e))instanceof mr)return e._internalPath;if(typeof e=="string")return SE(n,e);throw mg("Field path arguments must be of type string or ",n,!1,void 0,t)}var T5=new RegExp("[~\\*/\\[\\]]");function SE(n,e,t){if(e.search(T5)>=0)throw mg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mr(...e.split("."))._internalPath}catch{throw mg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(F.INVALID_ARGUMENT,a+n+c)}function RR(n,e){return n.some(t=>t.isEqual(e))}var Ds=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new BC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ag("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},BC=class extends Ds{data(){return super.data()}};function Ag(n,e){return typeof e=="string"?SE(n,e):e instanceof mr?e._internalPath:e._delegate._internalPath}function NR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hl=class{},Ts=class extends Hl{};function Mi(n,e,...t){let r=[];e instanceof Hl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof UC).length,a=o.filter(c=>c instanceof yg).length;if(s>1||s>0&&a>0)throw new B(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var yg=class n extends Ts{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return zR(e._query,t),new Ut(e.firestore,e.converter,yw(e._query,t))}_parse(e){let t=Ms(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){L1(f,d);let y=[];for(let I of f)y.push(V1(c,o,I));g={arrayValue:{values:y}}}else g=V1(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||L1(f,d),g=AR(a,s,f,d==="in"||d==="not-in");return Re.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function kR(n,e,t){let r=e,i=Ag("where",n);return yg._create(i,r,t)}var UC=class n extends Hl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:qe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)zR(s,c),s=yw(s,c)}(e._query,t),new Ut(e.firestore,e.converter,yw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $C=class n extends Ts{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vs(o,s)}(e._query,this._field,this._direction);return new Ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new pr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function OR(n,e="asc"){let t=e,r=Ag("orderBy",n);return $C._create(r,t)}var vg=class n extends Ts{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ut(e.firestore,e.converter,Fp(e._query,this._limit,this._limitType))}};function FR(n){return fR("limit",n),vg._create("limit",n,"F")}function VR(n){return fR("limitToLast",n),vg._create("limitToLast",n,"L")}var _g=class n extends Ts{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=$R(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,o){return new pr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function LR(...n){return _g._create("startAt",n,!0)}function jR(...n){return _g._create("startAfter",n,!1)}var wg=class n extends Ts{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=$R(e,this.type,this._docOrFields,this._inclusive);return new Ut(e.firestore,e.converter,function(i,o){return new pr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function BR(...n){return wg._create("endBefore",n,!1)}function UR(...n){return wg._create("endAt",n,!0)}function $R(n,e,t,r){if(t[0]=lt(t[0]),t[0]instanceof Ds)return function(o,s,a,c,l){if(!c)throw new B(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ja(o))if(f.field.isKeyField())d.push(ys(s,c.key));else{let g=c.data.field(f.field);if(Eg(g))throw new B(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new B(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Ur(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ms(n.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new B(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<d.length;I++){let T=d[I];if(g[I].field.isKeyField()){if(typeof T!="string")throw new B(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof T}`);if(!ZC(s)&&T.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${T}' contains a slash.`);let S=s.path.child(Fe.fromString(T));if(!W.isDocumentKey(S))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let j=new W(S);y.push(ys(a,j))}else{let S=AR(c,l,T);y.push(S)}}return new Ur(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function V1(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new B(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZC(e)&&t.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Fe.fromString(t));if(!W.isDocumentKey(r))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ys(n,new W(r))}if(t instanceof Je)return ys(n,t._key);throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sg(t)}.`)}function L1(n,e){if(!Array.isArray(n)||n.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var mc=class{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ss(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ut(s.doubleValue));return new zl(o)}convertGeoPoint(e){return new bs(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=QC(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){let t=Ei(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Fe.fromString(e);ne(FP(r));let i=new Co(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||_t(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function xg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var zC=class extends mc{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,t)}};var Ci=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Kn=class extends Ds{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yo=class extends Kn{data(e={}){return super.data(e)}},yr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ci(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yo(this._firestore,this._userDataWriter,r.key,r,new Ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:S5(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function S5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}function ME(n,e){return n instanceof Kn&&e instanceof Kn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yr&&e instanceof yr&&n._firestore===e._firestore&&IE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qR(n){n=Ve(n,Je);let e=Ve(n.firestore,pt);return lR($t(e),n._key).then(t=>RE(e,n,t))}var Ti=class extends mc{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,t)}};function HR(n){n=Ve(n,Je);let e=Ve(n.firestore,pt),t=$t(e),r=new Ti(e);return w5(t,n._key).then(i=>new Kn(e,r,n._key,i,new Ci(i!==null&&i.hasLocalMutations,!0),n.converter))}function GR(n){n=Ve(n,Je);let e=Ve(n.firestore,pt);return lR($t(e),n._key,{source:"server"}).then(t=>RE(e,n,t))}function WR(n){n=Ve(n,Ut);let e=Ve(n.firestore,pt),t=$t(e),r=new Ti(e);return NR(n._query),dR(t,n._query).then(i=>new yr(e,r,n,i))}function KR(n){n=Ve(n,Ut);let e=Ve(n.firestore,pt),t=$t(e),r=new Ti(e);return C5(t,n._query).then(i=>new yr(e,r,n,i))}function QR(n){n=Ve(n,Ut);let e=Ve(n.firestore,pt),t=$t(e),r=new Ti(e);return dR(t,n._query,{source:"server"}).then(i=>new yr(e,r,n,i))}function AE(n,e,t){n=Ve(n,Je);let r=Ve(n.firestore,pt),i=xg(n.converter,e,t);return Ic(r,[Mg(Ms(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yt.none())])}function xE(n,e,t,...r){n=Ve(n,Je);let i=Ve(n.firestore,pt),o=Ms(i),s;return s=typeof(e=lt(e))=="string"||e instanceof mr?DE(o,"updateDoc",n._key,e,t,r):bE(o,"updateDoc",n._key,e),Ic(i,[s.toMutation(n._key,yt.exists(!0))])}function YR(n){return Ic(Ve(n.firestore,pt),[new To(n._key,yt.none())])}function ZR(n,e){let t=Ve(n.firestore,pt),r=Jl(n),i=xg(n.converter,e);return Ic(t,[Mg(Ms(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,yt.exists(!1))]).then(()=>r)}function PE(n,...e){var t,r,i;n=lt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||PC(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(PC(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Je)l=Ve(n.firestore,pt),d=vc(n._key.path),c={next:f=>{e[s]&&e[s](RE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Ve(n,Ut);l=Ve(f.firestore,pt),d=f._query;let g=new Ti(l);c={next:y=>{e[s]&&e[s](new yr(l,g,f,y))},error:e[s+1],complete:e[s+2]},NR(n._query)}return function(g,y,I,T){let S=new pc(T),j=new $l(y,S,I);return g.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return aE(yield gc(g),j)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return cE(yield gc(g),j)}))}}($t(l),d,a,c)}function JR(n,e){return E5($t(n=Ve(n,pt)),PC(e)?e:{next:e})}function Ic(n,e){return function(r,i){let o=new Nt;return r.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){return t5(yield vE(r),i,o)})),o.promise}($t(n),e)}function RE(n,e,t){let r=t.docs.get(e._key),i=new Ti(n);return new Kn(n,i,e._key,r,new Ci(t.hasPendingWrites,t.fromCache),e.converter)}var M5={maxAttempts:5};var Cg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ms(e)}set(e,t,r){this._verifyNotCommitted();let i=go(e,this._firestore),o=xg(i.converter,t,r),s=Mg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,yt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=go(e,this._firestore),s;return s=typeof(t=lt(t))=="string"||t instanceof mr?DE(this._dataReader,"WriteBatch.update",o._key,t,r,i):bE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,yt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=go(e,this._firestore);return this._mutations=this._mutations.concat(new To(t._key,yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function go(n,e){if((n=lt(n)).firestore!==e)throw new B(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var qC=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ms(t)}get(t){let r=go(t,this._firestore),i=new zC(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Z();let s=o[0];if(s.isFoundDocument())return new Ds(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ds(this._firestore,i,r._key,null,r.converter);throw Z()})}set(t,r,i){let o=go(t,this._firestore),s=xg(o.converter,r,i),a=Mg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=go(t,this._firestore),a;return a=typeof(r=lt(r))=="string"||r instanceof mr?DE(this._dataReader,"Transaction.update",s._key,r,i,o):bE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=go(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=go(e,this._firestore),r=new Ti(this._firestore);return super.get(e).then(i=>new Kn(this._firestore,r,t._key,i._document,new Ci(!1,!1),t.converter))}};function XR(n,e,t){n=Ve(n,pt);let r=Object.assign(Object.assign({},M5),t);return function(o){if(o.maxAttempts<1)throw new B(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Nt;return o.asyncQueue.enqueueAndForget(()=>V(this,null,function*(){let l=yield y5(o);new AC(o.asyncQueue,l,a,s,c).au()})),c.promise}($t(n),i=>e(new qC(n,i)),r)}function eN(){return new ql("deleteField")}function tN(){return new OC("serverTimestamp")}function nN(...n){return new FC("arrayUnion",n)}function rN(...n){return new VC("arrayRemove",n)}function iN(n){return new LC("increment",n)}(function(e,t=!0){(function(i){yc=i})(sb),tu(new Fo("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new pt(new K0(r.getProvider("auth-internal")),new J0(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fi(Fx,"4.7.3",e),Fi(Fx,"4.7.3","esm2017")})();var A5="@firebase/firestore-compat",x5="0.3.38";function LE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oN(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function sN(){if(!J1())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Pg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return sN(),new n(zr.fromBase64String(e))}static fromUint8Array(e){return oN(),new n(zr.fromUint8Array(e))}toBase64(){return sN(),this._delegate.toBase64()}toUint8Array(){return oN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function NE(n){return P5(n,["next","error","complete"])}function P5(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var kE=class{enableIndexedDbPersistence(e,t){return vR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return _R(e._delegate)}clearIndexedDbPersistence(e){return CR(e._delegate)}},Rg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Co||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){pR(this._delegate,e,t,r)}enableNetwork(){return IR(this._delegate)}disableNetwork(){return bR(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ER(this._delegate)}onSnapshotsInSync(e){return JR(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Tc(this,CE(this._delegate,e))}catch(t){throw mn(t,"collection()","Firestore.collection()")}}doc(e){try{return new qr(this,Jl(this._delegate,e))}catch(t){throw mn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,gR(this._delegate,e))}catch(t){throw mn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return XR(this._delegate,t=>e(new Ng(this,t)))}batch(){return $t(this._delegate),new kg(new Cg(this._delegate,e=>Ic(this._delegate,e)))}loadBundle(e){return DR(this._delegate,e)}namedQuery(e){return TR(this._delegate,e).then(t=>t?new Ns(this,t):null)}},bc=class extends mc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pg(new zr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return qr.forKey(t,this.firestore,null)}};function R5(n){j1(n)}var Ng=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}get(e){let t=xs(e);return this._delegate.get(t).then(r=>new Ps(this._firestore,new Kn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=xs(e);return r?(LE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=xs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=xs(e);return this._delegate.delete(t),this}},kg=class{constructor(e){this._delegate=e}set(e,t,r){let i=xs(e);return r?(LE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=xs(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=xs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Dc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new yo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rs(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new bc(e),t),i.set(t,o)),o}};Dc.INSTANCES=new WeakMap;var qr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Je(t._delegate,r,new W(e)))}static forKey(e,t,r){return new n(t,new Je(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Tc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Tc(this.firestore,CE(this._delegate,e))}catch(t){throw mn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=lt(e),e instanceof Je?EE(this._delegate,e):!1}set(e,t){t=LE("DocumentReference.set",t);try{return t?AE(this._delegate,e,t):AE(this._delegate,e)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?xE(this._delegate,e):xE(this._delegate,e,t,...r)}catch(i){throw mn(i,"updateDoc()","DocumentReference.update()")}}delete(){return YR(this._delegate)}onSnapshot(...e){let t=aN(e),r=cN(e,i=>new Ps(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return PE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=HR(this._delegate):e?.source==="server"?t=GR(this._delegate):t=qR(this._delegate),t.then(r=>new Ps(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function mn(n,e,t){return n.message=n.message.replace(e,t),n}function aN(n){for(let e of n)if(typeof e=="object"&&!NE(e))return e;return{}}function cN(n,e){var t,r;let i;return NE(n[0])?i=n[0]:NE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ps=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ME(this._delegate,e._delegate)}},Rs=class extends Ps{data(e){let t=this._delegate.data(e);return this._delegate._converter||B1(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ns=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}where(e,t,r){try{return new n(this.firestore,Mi(this._delegate,kR(e,t,r)))}catch(i){throw mn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Mi(this._delegate,OR(e,t)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Mi(this._delegate,FR(e)))}catch(t){throw mn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Mi(this._delegate,VR(e)))}catch(t){throw mn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Mi(this._delegate,LR(...e)))}catch(t){throw mn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Mi(this._delegate,jR(...e)))}catch(t){throw mn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Mi(this._delegate,BR(...e)))}catch(t){throw mn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Mi(this._delegate,UR(...e)))}catch(t){throw mn(t,"endAt()","Query.endAt()")}}isEqual(e){return IE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=KR(this._delegate):e?.source==="server"?t=QR(this._delegate):t=WR(this._delegate),t.then(r=>new Xl(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=aN(e),r=cN(e,i=>new Xl(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return PE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},OE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Rs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Xl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new OE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Rs(this._firestore,r))})}isEqual(e){return ME(this._delegate,e._delegate)}},Tc=class n extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new qr(this.firestore,e):null}doc(e){try{return e===void 0?new qr(this.firestore,Jl(this._delegate)):new qr(this.firestore,Jl(this._delegate,e))}catch(t){throw mn(t,"doc()","CollectionReference.doc()")}}add(e){return ZR(this._delegate,e).then(t=>new qr(this.firestore,t))}isEqual(e){return EE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xs(n){return Ve(n,Je)}var FE=class n{constructor(...e){this._delegate=new mr(...e)}static documentId(){return new n(wt.keyField().canonicalString())}isEqual(e){return e=lt(e),e instanceof mr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var VE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=tN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=eN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=nN(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=rN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=iN(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var N5={Firestore:Rg,GeoPoint:bs,Timestamp:ft,Blob:Pg,Transaction:Ng,WriteBatch:kg,DocumentReference:qr,DocumentSnapshot:Ps,Query:Ns,QueryDocumentSnapshot:Rs,QuerySnapshot:Xl,CollectionReference:Tc,FieldPath:FE,FieldValue:VE,setLogLevel:R5,CACHE_SIZE_UNLIMITED:mR};function k5(n,e){n.INTERNAL.registerComponent(new Fo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},N5)))}function O5(n){k5(n,(e,t)=>new Rg(e,t,new kE)),n.registerVersion(A5,x5)}O5(rn);function F5(n,e=au){return new ce(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function uN(n,e){return F5(n,e)}function V5(n,e){return uN(n,e).pipe($o(void 0),uu(),re(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function UE(n,e){return uN(n,e).pipe(re(t=>({payload:t,type:"query"})))}var Og=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=pN(r,t);return new Vg(i,o,this.afs)}snapshotChanges(){return V5(this.ref,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return this.snapshotChanges().pipe(re(({payload:t})=>e.idField?ae($({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ne(this.ref.get(e)).pipe(wn)}};function Fg(n,e){return UE(n,e).pipe($o(void 0),uu(),re(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function lN(n,e,t){return Fg(n,t).pipe(Uo((r,i)=>L5(r,i.map(o=>o.payload),e),[]),Gm(),re(r=>r.map(i=>({type:i.type,payload:i}))))}function L5(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=j5(n,r))}),n}function jE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function j5(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return jE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return jE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jE(n,e.oldIndex,1);break}return n}function dN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Vg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Fg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe($o(void 0),uu(),Pt(([r,i])=>i.length>0||!r),re(([,r])=>r),wn)}auditTrail(e){return this.stateChanges(e).pipe(Uo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=dN(e);return lN(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return UE(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.payload.docs.map(r=>e.idField?ae($({},r.data()),{[e.idField]:r.id}):r.data())),wn)}get(e){return Ne(this.query.get(e)).pipe(wn)}add(e){return this.ref.add(e)}doc(e){return new Og(this.ref.doc(e),this.afs)}},BE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Fg(this.query,this.afs.schedulers.outsideAngular).pipe(wn):Fg(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pt(t=>t.length>0),wn)}auditTrail(e){return this.stateChanges(e).pipe(Uo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=dN(e);return lN(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return UE(this.query,this.afs.schedulers.outsideAngular).pipe(re(r=>r.payload.docs.map(i=>e.idField?$({[e.idField]:i.id},i.data()):i.data())),wn)}get(e){return Ne(this.query.get(e)).pipe(wn)}},hN=new K("angularfire2.enableFirestorePersistence"),fN=new K("angularfire2.firestore.persistenceSettings"),B5=new K("angularfire2.firestore.settings"),U5=new K("angularfire2.firestore.use-emulator");function pN(n,e=t=>t){return{query:e(n),ref:n}}var Ai=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,f,g,y,I,T,S,j,q){this.schedulers=c;let L=hl(t,a,r),Y=d;f&&k0(L,a,g,I,T,S,y,j),[this.firestore,this.persistenceEnabled$]=fp(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ie=a.runOutsideAngular(()=>L.firestore());if(o&&ie.settings(o),Y&&ie.useEmulator(...Y),i&&!mi(s)){let te=()=>{try{return Ne(ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(b){return typeof console<"u"&&console.warn(b),oe(!1)}};return[ie,a.runOutsideAngular(te)]}else return[ie,oe(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=pN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Vg(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new BE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Og(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(z(La),z(ja,8),z(hN,8),z(B5,8),z(Ot),z(je),z(lp),z(fN,8),z(U5,8),z(hr,8),z(M0,8),z(A0,8),z(x0,8),z(P0,8),z(R0,8),z(N0,8),z(ss,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),gN=(()=>{class n{constructor(){rn.registerVersion("angularfire",as.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hN,useValue:!0},{provide:fN,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dn({type:n});static \u0275inj=ln({providers:[Ai]})}return n})();var Qn=(()=>{class n{constructor(){this.client=x(Ai),this.afAuth=x(hr)}getTrainings(){return new ce(t=>{this.afAuth.currentUser.then(r=>{let i=r?.uid;i?this.client.collection("Training",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{t.next(o)}):t.next([])}).catch(()=>t.next([]))})}getMeals(){return new ce(t=>{this.afAuth.currentUser.then(r=>{let i=r?.uid;i?this.client.collection("Meal",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{console.log("Pobrane posi\u0142ki:",o),t.next(o)}):t.next([])}).catch(r=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",r),t.next([])})})}addTraining(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{let i=r?.uid;i&&this.client.collection("Training").doc(t.id).set(ae($({},t),{uid:i,date:t.date.toISOString()})).then(()=>console.log("Training added/updated successfully")).catch(o=>console.error("Error adding/updating training:",o))}).catch(r=>console.error("Error getting user:",r))}addMeal(t){t.id||(t.id=this.client.createId()),this.afAuth.currentUser.then(r=>{if(r){let i=t.id||this.client.createId();this.client.collection("Meal").doc(i).set(ae($({},t),{uid:r.uid,date:t.date.toISOString()})).then(()=>console.log("Meal added/updated successfully")).catch(o=>console.error("Error adding/updating meal:",o))}}).catch(r=>console.error("Error getting user:",r))}updateMeal(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Meal").doc(t.id).update(ae($({},t),{date:t.date.toISOString()})):Promise.reject("User not authenticated"))}updateTraining(t){return this.afAuth.currentUser.then(r=>r?this.client.collection("Training").doc(t.id).update(ae($({},t),{date:t.date.toISOString()})):Promise.reject("User not authenticated"))}getTrainingsByDate(t){return console.log("Pobieranie trening\xF3w dla daty:",t),new ce(r=>{this.afAuth.currentUser.then(i=>{let o=i?.uid;if(o){let s=new Date(t);s.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Training",c=>c.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(c=>{console.log("Pobrane treningi:",c),r.next(c)},c=>{console.error("B\u0142\u0105d podczas pobierania trening\xF3w:",c),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDate(t){return console.log("Pobieranie posi\u0142k\xF3w dla daty:",t),new ce(r=>{this.afAuth.currentUser.then(i=>{let o=i?.uid;if(o){let s=new Date(t);s.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999),console.log("Start dnia:",s),console.log("Koniec dnia:",a),this.client.collection("Meal",c=>c.where("uid","==",o).where("date",">=",s.toISOString()).where("date","<=",a.toISOString())).valueChanges().subscribe(c=>{console.log("Pobrane posi\u0142ki:",c),r.next(c)},c=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",c),r.next([])})}else r.next([])}).catch(()=>r.next([]))})}getMealsByDateRange(t,r){return new ce(i=>{this.afAuth.currentUser.then(o=>{let s=o?.uid;s?this.client.collection("Meal",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania posi\u0142k\xF3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}getTrainingsByDateRange(t,r){return new ce(i=>{this.afAuth.currentUser.then(o=>{let s=o?.uid;s?this.client.collection("Training",a=>a.where("uid","==",s).where("date",">=",t.toISOString()).where("date","<=",r.toISOString())).valueChanges().subscribe(a=>{i.next(a)},a=>{console.error("B\u0142\u0105d podczas pobierania trening\xF3w:",a),i.next([])}):i.next([])}).catch(()=>i.next([]))})}deleteTraining(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Training").doc(t).delete().then(()=>console.log("Training deleted successfully")).catch(o=>console.error("Error deleting training:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}deleteMeal(t){return this.afAuth.currentUser.then(r=>r?.uid?this.client.collection("Meal").doc(t).delete().then(()=>console.log("Meal deleted successfully")).catch(o=>console.error("Error deleting meal:",o)):Promise.reject("User not authenticated")).catch(r=>(console.error("Error getting user:",r),Promise.reject(r)))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $5(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:r===0&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:r===0&&t!==1&&t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||r===0&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||r===0&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14?4:5}var mN=["pl",[["a","p"],["AM","PM"],void 0],void 0,[["n","p","w","\u015B","c","p","s"],["niedz.","pon.","wt.","\u015Br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015Broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015Bro","czw","pi\u0105","sob"]],[["N","P","W","\u015A","C","P","S"],["niedz.","pon.","wt.","\u015Br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015Broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015Bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017A","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015Bnia","pa\u017Adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017A","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017Adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],void 0,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",","\xA0",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[void 0,"$"],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],PLN:["z\u0142"],RON:[void 0,"lej"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",$5];var bN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Zi),Te(ci))}}static{this.\u0275dir=Rt({type:n})}}return n})(),DN=(()=>{class n extends bN{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275dir=Rt({type:n,features:[ar]})}}return n})(),qE=new K("");var z5={provide:qE,useExisting:si(()=>En),multi:!0};function q5(){let n=pi()?pi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var H5=new K(""),En=(()=>{class n extends bN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!q5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Zi),Te(ci),Te(H5,8))}}static{this.\u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&J("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[li([z5]),ar]})}}return n})();function TN(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Hg=new K(""),SN=new K("");function G5(n){return TN(n.value)?{required:!0}:null}function W5(n){if(!n)return $E;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(TN(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function $E(n){return null}function MN(n){return n!=null}function AN(n){return eo(n)?Ne(n):n}function xN(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function PN(n,e){return e.map(t=>t(n))}function K5(n){return!n.validate}function RN(n){return n.map(e=>K5(e)?e:t=>e.validate(t))}function Q5(n){if(!n)return null;let e=n.filter(MN);return e.length==0?null:function(t){return xN(PN(t,e))}}function HE(n){return n!=null?Q5(RN(n)):null}function Y5(n){if(!n)return null;let e=n.filter(MN);return e.length==0?null:function(t){let r=PN(t,e).map(AN);return zm(r).pipe(re(xN))}}function GE(n){return n!=null?Y5(RN(n)):null}function yN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Z5(n){return n._rawValidators}function J5(n){return n._rawAsyncValidators}function zE(n){return n?Array.isArray(n)?n:[n]:[]}function jg(n,e){return Array.isArray(n)?n.includes(e):n===e}function vN(n,e){let t=zE(e);return zE(n).forEach(i=>{jg(t,i)||t.push(i)}),t}function _N(n,e){return zE(e).filter(t=>!jg(n,t))}var Bg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ac=class extends Bg{get formDirective(){return null}get path(){return null}},od=class extends Bg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ug=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},X5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jZ=ae($({},X5),{"[class.ng-submitted]":"isSubmitted"}),Yn=(()=>{class n extends Ug{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(od,2))}}static{this.\u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ji("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ar]})}}return n})(),Pc=(()=>{class n extends Ug{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Te(Ac,10))}}static{this.\u0275dir=Rt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ji("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ar]})}}return n})();var ed="VALID",Lg="INVALID",Sc="PENDING",td="DISABLED",xc=class{},$g=class extends xc{constructor(e,t){super(),this.value=e,this.source=t}},rd=class extends xc{constructor(e,t){super(),this.pristine=e,this.source=t}},id=class extends xc{constructor(e,t){super(),this.touched=e,this.source=t}},Mc=class extends xc{constructor(e,t){super(),this.status=e,this.source=t}};function NN(n){return(Gg(n)?n.validators:n)||null}function eq(n){return Array.isArray(n)?HE(n):n||null}function kN(n,e){return(Gg(e)?e.asyncValidators:n)||null}function tq(n){return Array.isArray(n)?GE(n):n||null}function Gg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function nq(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function rq(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var zg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Fu(()=>this.statusReactive()),this.statusReactive=Zt(void 0),this._pristine=Fu(()=>this.pristineReactive()),this.pristineReactive=Zt(!0),this._touched=Fu(()=>this.touchedReactive()),this.touchedReactive=Zt(!1),this._events=new st,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cr(this.statusReactive)}set status(e){cr(()=>this.statusReactive.set(e))}get valid(){return this.status===ed}get invalid(){return this.status===Lg}get pending(){return this.status==Sc}get disabled(){return this.status===td}get enabled(){return this.status!==td}get pristine(){return cr(this.pristineReactive)}set pristine(e){cr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return cr(this.touchedReactive)}set touched(e){cr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_N(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_N(e,this._rawAsyncValidators))}hasValidator(e){return jg(this._rawValidators,e)}hasAsyncValidator(e){return jg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new id(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new id(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae($({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new rd(!0,r))}markAsPending(e={}){this.status=Sc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=td,this.errors=null,this._forEachChild(i=>{i.disable(ae($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $g(this.value,r)),this._events.next(new Mc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ed,this._forEachChild(r=>{r.enable(ae($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ed||this.status===Sc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $g(this.value,t)),this._events.next(new Mc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?td:ed}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=AN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Mc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new De,this.statusChanges=new De}_calculateStatus(){return this._allControlsDisabled()?td:this.errors?Lg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sc)?Sc:this._anyControlsHaveStatus(Lg)?Lg:ed}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new rd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new id(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=eq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tq(this._rawAsyncValidators)}},qg=class extends zg{constructor(e,t,r){super(NN(t),kN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rq(this,!0,e),Object.keys(e).forEach(r=>{nq(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var WE=new K("CallSetDisabledState",{providedIn:"root",factory:()=>KE}),KE="always";function iq(n,e){return[...e.path,n]}function ON(n,e,t=KE){FN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),sq(n,e),cq(n,e),aq(n,e),oq(n,e)}function wN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function FN(n,e){let t=Z5(n);e.validator!==null?n.setValidators(yN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=J5(n);e.asyncValidator!==null?n.setAsyncValidators(yN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();wN(e._rawValidators,i),wN(e._rawAsyncValidators,i)}function sq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&VN(n,e)})}function aq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&VN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function VN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function cq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function uq(n,e){n==null,FN(n,e)}function lq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dq(n){return Object.getPrototypeOf(n.constructor)===DN}function hq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function fq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===En?t=o:dq(o)?r=o:i=o}),i||r||t||null}var pq={provide:Ac,useExisting:si(()=>ks)},nd=Promise.resolve(),ks=(()=>{class n extends Ac{get submitted(){return cr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Fu(()=>this.submittedReactive()),this.submittedReactive=Zt(!1),this._directives=new Set,this.ngSubmit=new De,this.form=new qg({},HE(t),GE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ON(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nd.then(()=>{let r=this._findContainer(t.path),i=new qg({});uq(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){nd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),hq(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Te(Hg,10),Te(SN,10),Te(WE,8))}}static{this.\u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&J("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([pq]),ar]})}}return n})();function CN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var gq=class extends zg{constructor(e=null,t,r){super(NN(t),kN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(EN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){EN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var mq={provide:od,useExisting:si(()=>Fn)},IN=Promise.resolve(),Fn=(()=>{class n extends od{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new gq,this._registered=!1,this.name="",this.update=new De,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ON(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){IN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&to(r);IN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iq(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Te(Ac,9),Te(Hg,10),Te(SN,10),Te(qE,10),Te(Pr,8),Te(WE,8))}}static{this.\u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[li([mq]),ar,Un]})}}return n})(),Rc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),yq={provide:qE,useExisting:si(()=>xi),multi:!0},xi=(()=>{class n extends DN{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275dir=Rt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&J("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[li([yq]),ar]})}}return n})();var LN=(()=>{class n{constructor(){this._validator=$E}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$E,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Rt({type:n,features:[Un]})}}return n})();var vq={provide:Hg,useExisting:si(()=>Os),multi:!0};var Os=(()=>{class n extends LN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=to,this.createValidator=t=>G5}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275dir=Rt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wa("required",i._enabled?"":null)},inputs:{required:"required"},features:[li([vq]),ar]})}}return n})();var _q={provide:Hg,useExisting:si(()=>QE),multi:!0},QE=(()=>{class n extends LN{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>W5(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ki(n)))(i||n)}})()}static{this.\u0275dir=Rt({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&wa("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[li([_q]),ar]})}}return n})();var wq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=ln({})}}return n})();var Xe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WE,useValue:t.callSetDisabledState??KE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=dn({type:n})}static{this.\u0275inj=ln({imports:[wq]})}}return n})();function Cq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",9),k(2),_(),E(3,"input",10),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.calories,i)||(o.model.calories=i),le(i)}),_()()}if(n&2){let t=ee();R(2),Be(t.caloriesLabel),R(),Se("ngModel",t.model.calories)}}function Eq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",11),k(2),_(),E(3,"input",12),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.burnedKcal,i)||(o.model.burnedKcal=i),le(i)}),_()()}if(n&2){let t=ee();R(2),Be(t.burnedCalories),R(),Se("ngModel",t.model.burnedKcal)}}function Iq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",13),k(2),_(),E(3,"input",14),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.videoLink,i)||(o.model.videoLink=i),le(i)}),_()()}if(n&2){let t=ee();R(2),Be(t.videoLinkLabel),R(),Se("ngModel",t.model.videoLink)}}function bq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",15),k(2),_(),E(3,"input",16),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.weight,i)||(o.model.weight=i),le(i)}),_()()}if(n&2){let t=ee();R(2),Be(t.weightLabel),R(),Se("ngModel",t.model.weight)}}function Dq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",17),k(2),_(),E(3,"input",18),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.time,i)||(o.model.time=i),le(i)}),_()()}if(n&2){let t=ee();R(2),Be(t.timeLabel),R(),Se("ngModel",t.model.time)}}function Tq(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"label",19),k(2),_(),E(3,"input",20),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.model.date,i)||(o.model.date=i),le(i)}),J("ngModelChange",function(i){ue(t);let o=ee();return le(o.onDateChange(i))}),_()()}if(n&2){let t=ee();R(2),Be(t.dateLabel),R(),Se("ngModel",t.model.date)}}var jN=(()=>{class n{constructor(){this.title="",this.nameLabel="",this.caloriesLabel="",this.weightLabel="",this.videoLinkLabel="",this.burnedCalories="",this.dateLabel="",this.timeLabel="",this.model={},this.save=new De}onSubmit(){this.save.emit(this.model)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-form"]],inputs:{title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",weightLabel:"weightLabel",videoLinkLabel:"videoLinkLabel",burnedCalories:"burnedCalories",dateLabel:"dateLabel",timeLabel:"timeLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[pe],decls:18,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Zamknij",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["for","calories",1,"form-label"],["type","number","id","calories","name","calories","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","burnedKcal",1,"form-label"],["type","number","id","burnedKcal","name","burnedKcal","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoLink",1,"form-label"],["type","string","id","videoLink","name","videoLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","weight",1,"form-label"],["type","number","id","weight","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","time",1,"form-label"],["type","number","id","time","name","time","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"h5",1),k(2),_(),ht(3,"button",2),_(),E(4,"div",3)(5,"form",4),J("ngSubmit",function(){return i.onSubmit()}),E(6,"div",5)(7,"label",6),k(8),_(),E(9,"input",7),Me("ngModelChange",function(s){return ve(i.model.name,s)||(i.model.name=s),s}),_()(),He(10,Cq,4,2,"div",5)(11,Eq,4,2,"div",5)(12,Iq,4,2,"div",5)(13,bq,4,2,"div",5)(14,Dq,4,2,"div",5)(15,Tq,4,2,"div",5),E(16,"button",8),k(17," Zapisz zmiany "),_()()()),r&2&&(R(2),Be(i.title),R(6),Be(i.nameLabel),R(),Se("ngModel",i.model.name),R(),ke(i.caloriesLabel?10:-1),R(),ke(i.burnedCalories?11:-1),R(),ke(i.videoLinkLabel?12:-1),R(),ke(i.weightLabel?13:-1),R(),ke(i.timeLabel?14:-1),R(),ke(i.dateLabel?15:-1))},dependencies:[Xe,Rc,En,xi,Yn,Pc,Os,Fn,ks],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:5px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return n})();var Po=(()=>{class n{constructor(){this.modalId="",this.title="",this.nameLabel="",this.caloriesLabel="",this.burnedCaloriesLabel="",this.weightLabel="",this.timeLabel="",this.videoLinkLabel="",this.dateLabel="",this.model={},this.save=new De}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-modal"]],inputs:{modalId:"modalId",title:"title",nameLabel:"nameLabel",caloriesLabel:"caloriesLabel",burnedCaloriesLabel:"burnedCaloriesLabel",weightLabel:"weightLabel",timeLabel:"timeLabel",videoLinkLabel:"videoLinkLabel",dateLabel:"dateLabel",model:"model"},outputs:{save:"save"},standalone:!0,features:[pe],decls:5,vars:10,consts:[["tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[3,"save","title","nameLabel","caloriesLabel","burnedCalories","weightLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-form",4),J("save",function(s){return i.save.emit(s)}),_()()()()()),r&2&&(ye("id",i.modalId),R(4),ye("title",i.title)("nameLabel",i.nameLabel)("caloriesLabel",i.caloriesLabel)("burnedCalories",i.burnedCaloriesLabel)("weightLabel",i.weightLabel)("timeLabel",i.timeLabel)("dateLabel",i.dateLabel)("videoLinkLabel",i.videoLinkLabel)("model",i.model))},dependencies:[jN],styles:[".modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;border-radius:8px}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 15px #0000001a;padding:20px;color:#333}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding-bottom:10px}.modal-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#333;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{color:#28a745}.modal-body[_ngcontent-%COMP%]{padding:15px 0}"]})}}return n})();var BN=(()=>{class n{constructor(){this.trainingAndMealService=x(Qn),this.meals=[],this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}addMeal(t){this.trainingAndMealService.addMeal(t),this.meals.push(t),console.log("Meal added:",t)}onDateChange(t){this.model.date=new Date(t+"T00:00:00")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-meal-modal"]],standalone:!0,features:[pe],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","dateLabel","model"]],template:function(r,i){r&1&&(E(0,"app-modal",0),J("save",function(s){return i.addMeal(s)}),_()),r&2&&ye("modalId","mealModal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("dateLabel","Data")("model",i.model)},dependencies:[Xe,Po]})}}return n})();var UN=(()=>{class n{constructor(){this.trainingAndMealService=x(Qn),this.router=x(it),this.training=[],this.traingns=[],this.model={name:"",burnedKcal:0,isDone:!1,time:"",date:new Date,id:"",videoLink:""}}addMeal(t){throw new Error("Method not implemented.")}addTraining(t){this.trainingAndMealService.addTraining(t),this.training.push(t),console.log("Meal added:",t),this.router.navigate(["/home"])}onDateChange(t){this.model.date=new Date(`${t}T00:00:00`)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-training-modal"]],standalone:!0,features:[pe],decls:1,vars:8,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","dateLabel","videoLinkLabel","model"]],template:function(r,i){r&1&&(E(0,"app-modal",0),J("save",function(s){return i.addTraining(s)}),_()),r&2&&ye("modalId","trainingModal")("title","Dodaj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("dateLabel","Data")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Xe,Po]})}}return n})();var $N=(()=>{class n{constructor(){this.meal=null,this.Save=new De,this.close=new De,this.model={name:"",calories:0,weight:"",day:0,date:new Date,id:""}}ngOnChanges(t){t.meal&&this.meal&&(this.model=ae($({},this.meal),{date:new Date(this.meal.date)}))}saveMeal(t){this.model.name&&this.model.calories>0&&this.model.weight?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-edit"]],inputs:{meal:"meal"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Un,pe],decls:1,vars:6,consts:[[3,"save","modalId","title","nameLabel","caloriesLabel","weightLabel","model"]],template:function(r,i){r&1&&(E(0,"app-modal",0),J("save",function(s){return i.saveMeal(s)}),_()),r&2&&ye("modalId","meal2Modal")("title","Dodaj posi\u0142ek")("nameLabel","Nazwa posi\u0142ku")("caloriesLabel","Kalorie")("weightLabel","Waga (g)")("model",i.model)},dependencies:[Xe,Po]})}}return n})();var zN=(()=>{class n{constructor(){this.training=null,this.Save=new De,this.close=new De,this.model={name:"",isDone:!1,burnedKcal:0,time:"",videoLink:"",date:new Date,id:""}}ngOnChanges(t){t.training&&this.training&&(this.model=ae($({},this.training),{date:new Date(this.training.date)}))}saveTraining(){this.model.name&&this.model.burnedKcal>0&&this.model.time?this.Save.emit(this.model):console.error("Model jest niekompletny lub zawiera b\u0142\u0119dy:",this.model)}closeModal(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-edit-training"]],inputs:{training:"training"},outputs:{Save:"Save",close:"close"},standalone:!0,features:[Un,pe],decls:1,vars:7,consts:[[3,"save","modalId","title","nameLabel","burnedCaloriesLabel","timeLabel","videoLinkLabel","model"]],template:function(r,i){r&1&&(E(0,"app-modal",0),J("save",function(){return i.saveTraining()}),_()),r&2&&ye("modalId","meal3Modal")("title","Edytuj trening")("nameLabel","Nazwa treningu")("burnedCaloriesLabel","Spalone kalorie")("timeLabel","Czas trwania (min)")("videoLinkLabel","Link Youtube")("model",i.model)},dependencies:[Xe,Po]})}}return n})();function Sq(n,e){if(n&1&&(E(0,"span"),k(1),_()),n&2){let t=e.$implicit;R(),Be(t)}}function Mq(n,e){if(n&1){let t=Ge();E(0,"div",6),J("click",function(){let i=ue(t).$implicit,o=ee();return le(o.selectDay(i.date))}),k(1),_()}if(n&2){let t=e.$implicit,r=ee();Ji("other-month",t.isOtherMonth)("has-events",r.hasEventsForDay(t.date)),R(),rt(" ",t.date.getDate()," ")}}function Aq(n,e){if(n&1){let t=Ge();E(0,"div"),k(1),_(),E(2,"div",16)(3,"button",17),J("click",function(){let i=ue(t).$implicit,o=ee(2);return le(o.editTraining(i))}),k(4," Edytuj "),_(),E(5,"button",18),J("click",function(){let i=ue(t).$implicit,o=ee(2);return le(o.deleteTraining(i.id))}),k(6," Usu\u0144 "),_(),E(7,"label",19)(8,"input",20),J("change",function(){let i=ue(t).$implicit,o=ee(2);return le(o.toggleTrainingDone(i))}),_(),k(9," Zrobiony "),_()()}if(n&2){let t=e.$implicit;R(),vf(" ",t.name," - ",t.burnedKcal," kcal ",t.time,"min"),R(7),ye("checked",t.isDone)}}function xq(n,e){if(n&1){let t=Ge();E(0,"div"),k(1),_(),E(2,"div",16)(3,"button",21),J("click",function(){let i=ue(t).$implicit,o=ee(2);return le(o.editMeal(i))}),k(4," Edytuj "),_(),E(5,"button",18),J("click",function(){let i=ue(t).$implicit,o=ee(2);return le(o.deleteMeal(i.id))}),k(6," Usu\u0144 "),_()()}if(n&2){let t=e.$implicit;R(),vf(" ",t.name," - ",t.calories," kcal (",t.weight," g)")}}function Pq(n,e){if(n&1&&(E(0,"div",13)(1,"h4"),k(2),An(3,"date"),_(),E(4,"div")(5,"h4"),k(6,"Treningi"),_(),Lt(7,Aq,10,4,null,null,Jt),_(),E(9,"div")(10,"h4"),k(11,"Posi\u0142ki"),_(),Lt(12,xq,7,3,null,null,Jt),_()()),n&2){let t=e.$implicit,r=ee();R(2),Be(es(3,1,t.date,"EEEE, d MMMM")),R(5),jt(r.getTrainingsForDay(t.date)),R(5),jt(r.getMealsForDay(t.date))}}$M(mN);var qN=(()=>{class n{constructor(){this.TrainingAndMealService=x(Qn),this.meals=Zt([]),this.trainings=Zt([]),this.calendarDays=[],this.currentWeek=[],this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedMeal=null,this.selectedTraining=null,this.showModal=Zt(!1),this.selectedDay=null,this.dayNames=["Pn","Wt","\u015Ar","Czw","Pt","Sb","Nd"],this.months=["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],this.loadData(),this.generateCalendar(),this.generateWeek(new Date)}generateWeek(t){let r=new Date(t.setDate(t.getDate()-t.getDay()+1));this.currentWeek=[];for(let i=0;i<7;i++){let o=new Date(r);o.setDate(r.getDate()+i),this.currentWeek.push({date:o,isOtherMonth:!1})}}prevWeek(){let t=this.currentWeek[0].date,r=new Date(t.setDate(t.getDate()-7));this.generateWeek(r)}nextWeek(){let t=this.currentWeek[6].date,r=new Date(t.setDate(t.getDate()+1));this.generateWeek(r)}getWeekRange(){let t=this.currentWeek[0].date,r=this.currentWeek[6].date;return`${t.toLocaleDateString()} - ${r.toLocaleDateString()}`}selectDay(t){this.selectedDay=t,console.log("Wybrano dzie\u0144:",this.selectedDay),this.generateWeek(t)}loadData(){this.TrainingAndMealService.getTrainings().subscribe(t=>{let r=t.map((i,o)=>ae($({},i),{id:i.id||`training-${o}-${new Date().getTime()}`,date:new Date(i.date)}));this.trainings.set(r)}),this.TrainingAndMealService.getMeals().subscribe(t=>{let r=t.map((i,o)=>ae($({},i),{id:i.id||`meal-${o}-${new Date().getTime()}`,date:new Date(i.date)}));this.meals.set(r)})}getMealsForDay(t){return this.meals().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}getTrainingsForDay(t){return this.trainings().filter(r=>r.date.getDate()===t.getDate()&&r.date.getMonth()===t.getMonth()&&r.date.getFullYear()===t.getFullYear())}generateCalendar(){let t=new Date(this.currentYear,this.currentMonth,1),r=new Date(this.currentYear,this.currentMonth+1,0),i=r.getDate(),s=(t.getDay()||7)-1,c=7-(r.getDay()||7);this.calendarDays=[];for(let l=s;l>0;l--){let d=new Date(this.currentYear,this.currentMonth,-l+1);this.calendarDays.push({date:d,isOtherMonth:!0})}for(let l=1;l<=i;l++){let d=new Date(this.currentYear,this.currentMonth,l);this.calendarDays.push({date:d,isOtherMonth:!1})}for(let l=1;l<=c;l++){let d=new Date(this.currentYear,this.currentMonth+1,l);this.calendarDays.push({date:d,isOtherMonth:!0})}}prevMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.generateCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.generateCalendar()}saveEditedMeal(t){this.TrainingAndMealService.updateMeal(t).then(()=>{this.meals.set(this.meals().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited meal:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 posi\u0142ku. Spr\xF3buj ponownie.")})}editMeal(t){this.selectedMeal=$({},t)}closeModal(){this.showModal.set(!1)}saveEditedTraining(t){this.TrainingAndMealService.updateTraining(t).then(()=>{this.trainings.set(this.trainings().map(r=>r.id===t.id?t:r))}).catch(r=>{console.error("Error saving edited training:",r),alert("Nie uda\u0142o si\u0119 zapisa\u0107 treningu. Spr\xF3buj ponownie.")})}editTraining(t){this.selectedTraining=$({},t)}deleteMeal(t){this.TrainingAndMealService.deleteMeal(t).then(()=>{this.meals.set(this.meals().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting meal:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 posi\u0142ku. Spr\xF3buj ponownie.")})}deleteTraining(t){this.TrainingAndMealService.deleteTraining(t).then(()=>{this.trainings.set(this.trainings().filter(r=>r.id!==t))}).catch(r=>{console.error("Error deleting training:",r),alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 treningu. Spr\xF3buj ponownie.")})}toggleTrainingDone(t){let r=ae($({},t),{isDone:!t.isDone});this.saveEditedTraining(r)}hasEventsForDay(t){return this.getMealsForDay(t).length>0||this.getTrainingsForDay(t).length>0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-calendar"]],standalone:!0,features:[li([{provide:Ea,useValue:"pl"}]),pe],decls:35,vars:5,consts:[[1,"button-container"],["type","button","data-bs-toggle","modal","data-bs-target","#mealModal",1,"btn","btn-success"],["type","button","data-bs-toggle","modal","data-bs-target","#trainingModal",1,"btn","btn-success"],[1,"layout-container"],[1,"monthly-calendar"],[1,"calendar-navigation"],[3,"click"],[1,"day-names"],[1,"calendar-days"],[3,"other-month","has-events"],[1,"weekly-view"],[1,"week-header"],[1,"week-days"],[1,"day-details"],[3,"Save","close","meal"],[3,"Save","close","training"],[1,"buttons-container"],["data-bs-toggle","modal","data-bs-target","#meal3Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"change","checked"],["data-bs-toggle","modal","data-bs-target","#meal2Modal",1,"btn","btn-link","btn-sm",2,"font-size","0.8rem","text-decoration","none",3,"click"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"button",1),k(2," Dodaj Posi\u0142ek "),_(),E(3,"button",2),k(4," Dodaj Trening "),_()(),E(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),J("click",function(){return i.prevMonth()}),k(9,"Poprzedni"),_(),E(10,"span"),k(11),_(),E(12,"button",6),J("click",function(){return i.nextMonth()}),k(13,"Nast\u0119pny"),_()(),E(14,"div",7),Lt(15,Sq,2,1,"span",null,Jt),_(),E(17,"div",8),Lt(18,Mq,2,5,"div",9,Jt),_()(),E(20,"div",10)(21,"div",11)(22,"button",6),J("click",function(){return i.prevWeek()}),k(23,"Poprzedni tydzie\u0144"),_(),E(24,"span"),k(25),_(),E(26,"button",6),J("click",function(){return i.nextWeek()}),k(27,"Nast\u0119pny tydzie\u0144"),_()(),E(28,"div",12),Lt(29,Pq,14,4,"div",13,Jt),_()()(),ht(31,"app-meal-modal")(32,"app-training-modal"),E(33,"app-edit",14),J("Save",function(s){return i.saveEditedMeal(s)})("close",function(){return i.closeModal()}),_(),E(34,"app-edit-training",15),J("Save",function(s){return i.saveEditedTraining(s)})("close",function(){return i.closeModal()}),_()),r&2&&(R(11),a_("",i.months[i.currentMonth]," ",i.currentYear,""),R(4),jt(i.dayNames),R(3),jt(i.calendarDays),R(7),rt(" ",i.getWeekRange()," "),R(4),jt(i.currentWeek),R(4),ye("meal",i.selectedMeal),R(),ye("training",i.selectedTraining))},dependencies:[Pn,ro,BN,Va,UN,$N,zN,Xe],styles:[".calendar-container[_ngcontent-%COMP%], .layout-container[_ngcontent-%COMP%]{display:flex;gap:20px;background:linear-gradient(135deg,#e0f7fa,#254636);padding:20px;border-radius:10px;color:#333}.monthly-calendar[_ngcontent-%COMP%]{flex:0 1 350px;max-height:400px;overflow:hidden;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000001a;display:flex;flex-direction:column;justify-content:space-between}.calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;margin-bottom:10px}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.calendar-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}.day-names[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}.day-names[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;transition:background-color .3s}.calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.calendar-days[_ngcontent-%COMP%]   div.other-month[_ngcontent-%COMP%]{color:#aaa}.calendar-days[_ngcontent-%COMP%]   div.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;border:1px solid #0056b3}.weekly-view[_ngcontent-%COMP%]{flex:2;padding:20px;background:#f8f8f8;height:900px;overflow-y:auto;border-radius:10px;box-shadow:0 2px 10px #0000001a}.week-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:10px 15px;border-radius:5px;font-size:14px;cursor:pointer;transition:background .3s}.week-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}.week-days[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.day-details[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:8px;box-shadow:0 1px 5px #0000001a}.day-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.day-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:15px;font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:20px}.btn-success[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.btn-success[_ngcontent-%COMP%]:hover{background-color:#2f5957}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]{background-color:#d0e6e6}.calendar-days[_ngcontent-%COMP%]   div.has-events[_ngcontent-%COMP%]:hover{background-color:#b0d0d0}"]})}}return n})();var HN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-home"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,i){r&1&&ht(0,"app-calendar")},dependencies:[qN]})}}return n})();var Hr=(()=>{class n{isAuthenticated(){return this.currentUserSubject.value!==null}constructor(){this.afAuth=x(hr),this.currentUserSubject=new xt(null),this.afAuth.authState.subscribe(t=>{this.currentUserSubject.next(t)})}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}logout(){return this.afAuth.signOut()}getCurrentUser(){return this.currentUserSubject.asObservable()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rq(n,e){n&1&&(E(0,"p"),k(1,"Nazwa u\u017Cytkownika jest wymagana."),_())}function Nq(n,e){n&1&&(E(0,"p"),k(1,"Nazwa u\u017Cytkownika mo\u017Ce zawiera\u0107 tylko ma\u0142e litery i cyfry oraz musi zaczyna\u0107 si\u0119 od litery."),_())}function kq(n,e){if(n&1&&(E(0,"div",10),He(1,Rq,2,0,"p")(2,Nq,2,0,"p"),_()),n&2){ee();let t=Ar(4);R(),ke(t.errors!=null&&t.errors.required?1:-1),R(),ke(t.errors!=null&&t.errors.pattern?2:-1)}}function Oq(n,e){if(n&1){let t=Ge();E(0,"div",7)(1,"label",14),k(2,"Nazwa u\u017Cytkownika"),_(),E(3,"input",15,3),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.username,i)||(o.username=i),le(i)}),_(),He(5,kq,3,2,"div",10),_()}if(n&2){let t=Ar(4),r=ee();R(3),Se("ngModel",r.username),R(2),ke(t!=null&&t.touched&&(t!=null&&t.invalid)?5:-1)}}function Fq(n,e){n&1&&(E(0,"p"),k(1,"E-mail jest wymagany."),_())}function Vq(n,e){if(n&1&&(E(0,"div",10),He(1,Fq,2,0,"p"),_()),n&2){ee();let t=Ar(10);R(),ke(t.errors!=null&&t.errors.required?1:-1)}}function Lq(n,e){n&1&&(E(0,"p"),k(1,"Has\u0142o jest wymagane."),_())}function jq(n,e){n&1&&(E(0,"p"),k(1,"Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 ma\u0142\u0105 liter\u0119, jedn\u0105 wielk\u0105 liter\u0119, jedn\u0105 cyfr\u0119, jeden znak specjalny i musi mie\u0107 co najmniej 6 znak\xF3w d\u0142ugo\u015Bci."),_())}function Bq(n,e){if(n&1&&(E(0,"div",10),He(1,Lq,2,0,"p")(2,jq,2,0,"p"),_()),n&2){ee();let t=Ar(16);R(),ke(t.errors!=null&&t.errors.required?1:-1),R(),ke(t.errors!=null&&t.errors.pattern?2:-1)}}function Uq(n,e){n&1&&(E(0,"p"),k(1,"Potwierdzenie has\u0142a jest wymagane."),_())}function $q(n,e){if(n&1&&(E(0,"div",10),He(1,Uq,2,0,"p"),_()),n&2){ee();let t=Ar(4);R(),ke(t.errors!=null&&t.errors.required?1:-1)}}function zq(n,e){n&1&&(E(0,"div",10)(1,"p"),k(2,"Has\u0142a nie s\u0105 zgodne."),_()())}function qq(n,e){if(n&1){let t=Ge();E(0,"div",7)(1,"label",16),k(2,"Potwierd\u017A has\u0142o"),_(),E(3,"input",17,4),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.confirmPassword,i)||(o.confirmPassword=i),le(i)}),_(),He(5,$q,2,1,"div",10)(6,zq,3,0,"div",10),_()}if(n&2){let t=Ar(4),r=ee();R(3),Se("ngModel",r.confirmPassword),R(2),ke(t.touched&&t.invalid?5:-1),R(),ke(r.password!==r.confirmPassword&&t.touched?6:-1)}}var Wg=(()=>{class n{constructor(){this.isLogin=!0,this.buttonText="",this.email="",this.password="",this.confirmPassword="",this.username="",this.emailChange=new De,this.passwordChange=new De,this.confirmPasswordChange=new De,this.usernameChange=new De,this.googleLogin=new De,this.formSubmit=new De}onEmailChange(){this.emailChange.emit(this.email)}onPasswordChange(){this.passwordChange.emit(this.password)}onConfirmPasswordChange(){this.confirmPasswordChange.emit(this.confirmPassword)}onUsernameChange(){this.usernameChange.emit(this.username)}onSubmit(){this.isLogin?this.email&&this.password?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o."):this.email&&this.username&&this.password&&this.password===this.confirmPassword?this.formSubmit.emit({email:this.email,username:this.username,password:this.password,confirmPassword:this.confirmPassword}):console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017Cytkownika i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-auth-form"]],inputs:{isLogin:"isLogin",buttonText:"buttonText",email:"email",password:"password",confirmPassword:"confirmPassword",username:"username"},outputs:{emailChange:"emailChange",passwordChange:"passwordChange",confirmPasswordChange:"confirmPasswordChange",usernameChange:"usernameChange",googleLogin:"googleLogin",formSubmit:"formSubmit"},standalone:!0,features:[pe],decls:21,vars:9,consts:[["authForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],["usernameField","ngModel"],["confirmPasswordField","ngModel"],[1,"auth-form-container"],[3,"ngSubmit"],[1,"input-container"],["for","email"],["id","email","type","email","name","email","required","","placeholder","Wpisz e-mail",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],["for","password"],["id","password","type","password","name","password","required","","placeholder","Wpisz has\u0142o","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-]).{6,}$",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"disabled"],["for","username"],["id","username","type","text","name","username","required","","pattern","^[a-z][a-z0-9]*$","placeholder","Wpisz nazw\u0119 u\u017Cytkownika",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","","placeholder","Potwierd\u017A has\u0142o",3,"ngModelChange","ngModel"]],template:function(r,i){if(r&1){let o=Ge();E(0,"div",5)(1,"h2"),k(2),_(),E(3,"form",6,0),J("ngSubmit",function(){return ue(o),le(i.onSubmit())}),He(5,Oq,6,2,"div",7),E(6,"div",7)(7,"label",8),k(8,"E-mail"),_(),E(9,"input",9,1),Me("ngModelChange",function(a){return ue(o),ve(i.email,a)||(i.email=a),le(a)}),_(),He(11,Vq,2,1,"div",10),_(),E(12,"div",7)(13,"label",11),k(14,"Has\u0142o"),_(),E(15,"input",12,2),Me("ngModelChange",function(a){return ue(o),ve(i.password,a)||(i.password=a),le(a)}),_(),He(17,Bq,3,2,"div",10),_(),He(18,qq,7,3,"div",7),E(19,"button",13),k(20),_()()()}if(r&2){let o=Ar(4),s=Ar(10),a=Ar(16);R(2),Be(i.isLogin?"Logowanie":"Rejestracja"),R(3),ke(i.isLogin?-1:5),R(4),Se("ngModel",i.email),R(2),ke(s.touched&&s.invalid?11:-1),R(4),Se("ngModel",i.password),R(2),ke(a.touched&&a.invalid?17:-1),R(),ke(i.isLogin?-1:18),R(),ye("disabled",o.invalid),R(),Be(i.buttonText)}},dependencies:[Xe,Rc,En,Yn,Pc,Os,QE,Fn,ks],styles:[".auth-form-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:5px;color:#fff}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border-radius:8px;border:1px solid #ccc;background-color:#fffc;color:#333}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#00796b;background-color:#fff}.btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#00796b;color:#fff;font-size:16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;margin-top:10px}.btn[_ngcontent-%COMP%]:hover{background-color:#004d40}@media (max-width: 768px){.auth-form-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}.btn[_ngcontent-%COMP%]{font-size:14px;padding:10px}}"]})}}return n})();var GN=(()=>{class n{constructor(){this.router=x(it),this.authService=x(Hr),this.email="",this.password="",this.isLogin=!0}login({email:t,password:r}){t&&r?this.authService.login(t,r).then(()=>{this.router.navigate(["/home"])}).catch(i=>{console.error("B\u0142\u0105d logowania:",i.message)}):console.log("Prosz\u0119 poda\u0107 e-mail i has\u0142o.")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-login"]],standalone:!0,features:[pe],decls:1,vars:4,consts:[[3,"emailChange","passwordChange","formSubmit","isLogin","buttonText","email","password"]],template:function(r,i){r&1&&(E(0,"app-auth-form",0),Me("emailChange",function(s){return ve(i.email,s)||(i.email=s),s})("passwordChange",function(s){return ve(i.password,s)||(i.password=s),s}),J("formSubmit",function(s){return i.login(s)}),_()),r&2&&(ye("isLogin",!0)("buttonText","Zaloguj si\u0119"),Se("email",i.email)("password",i.password))},dependencies:[Xe,Wg]})}}return n})();var WN=(()=>{class n{constructor(){this.email="",this.password="",this.confirmPassword="",this.username="",this.authService=x(Hr),this.router=x(it)}register({email:t,password:r,confirmPassword:i,username:o}){if(!t||!r||!o){console.log("Prosz\u0119 poda\u0107 e-mail, nazw\u0119 u\u017Cytkownika i has\u0142o.");return}if(r!==i){console.error("Has\u0142a nie s\u0105 zgodne.");return}this.authService.register(t,r).then(()=>{this.router.navigate(["/home"]),console.log(`Zarejestrowano pomy\u015Blnie u\u017Cytkownika: ${o}`)}).catch(s=>{console.error("B\u0142\u0105d rejestracji:",s.message)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-register"]],standalone:!0,features:[pe],decls:1,vars:6,consts:[[3,"emailChange","passwordChange","confirmPasswordChange","usernameChange","formSubmit","isLogin","buttonText","email","password","confirmPassword","username"]],template:function(r,i){r&1&&(E(0,"app-auth-form",0),Me("emailChange",function(s){return ve(i.email,s)||(i.email=s),s})("passwordChange",function(s){return ve(i.password,s)||(i.password=s),s})("confirmPasswordChange",function(s){return ve(i.confirmPassword,s)||(i.confirmPassword=s),s})("usernameChange",function(s){return ve(i.username,s)||(i.username=s),s}),J("formSubmit",function(s){return i.register(s)}),_()),r&2&&(ye("isLogin",!1)("buttonText","Zarejestruj si\u0119"),Se("email",i.email)("password",i.password)("confirmPassword",i.confirmPassword)("username",i.username))},dependencies:[Xe,Wg]})}}return n})();var Pi=()=>{let n=x(Hr),e=x(it);return n.isAuthenticated()?!0:(e.navigate(["/login"]),!1)};var KN=(()=>{class n{transform(t,r){console.log("Meals:",t),console.log("Trainings:",r);let i=t.reduce((s,a)=>{let c=parseInt(a.calories,10);return console.log("Meal:",a,"Calories:",c),s+(isNaN(c)?0:c)},0),o=r.reduce((s,a)=>{let c=parseInt(a.burnedKcal,10);return console.log("Training:",a,"BurnedKcal:",c),s+(isNaN(c)?0:c)},0);return console.log("Total Calories:",i),console.log("Total Burned Calories:",o),i-o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Tu({name:"caloriesBalance",type:n,pure:!0,standalone:!0})}}return n})();var QN={production:!1,firebaseConfig:{apiKey:"AIzaSyA27S8WmqVrZFFO9epniU6KwbjmzmEAt44",authDomain:"fitness-7d0de.firebaseapp.com",projectId:"fitness-7d0de",storageBucket:"fitness-7d0de.firebasestorage.app",messagingSenderId:"868055861373",appId:"1:868055861373:web:681f1ad485b72ebc338914"}},YE={production:!1,youtubeApiKey:"AIzaSyB_QR7TQnwAvOBj-9lklIuxqgc0R8HQRLw"};var YN=(()=>{class n{constructor(){this.http=x(M_),this.apiUrl="https://www.googleapis.com/youtube/v3"}getVideoDetails(t){let r=`https://www.googleapis.com/youtube/v3/videos?id=${t}&part=snippet,contentDetails,statistics&key=${YE.youtubeApiKey}`;return this.http.get(r)}searchVideos(t,r=10){let i=`${this.apiUrl}/search?part=snippet&q=${t}&maxResults=${r}&key=${YE.youtubeApiKey}`;return this.http.get(i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hq=(n,e)=>e.id;function Gq(n,e){if(n&1&&(E(0,"li",8)(1,"span",9),k(2),_(),k(3," - "),E(4,"span",10),k(5),_(),k(6),_()),n&2){let t=e.$implicit;R(2),Be(t.name),R(3),rt("",t.calories," kcal"),R(),rt(" (",t.weight," g) ")}}function Wq(n,e){if(n&1&&(E(0,"div",4)(1,"h3"),k(2,"Meals:"),_(),E(3,"ul",7),Lt(4,Gq,7,3,"li",8,Jt),_()()),n&2){let t=ee();R(4),jt(t.meals())}}function Kq(n,e){if(n&1&&(E(0,"li",12)(1,"span",13),k(2),_(),k(3," - "),E(4,"span",14),k(5),_(),k(6),_()),n&2){let t=e.$implicit;R(2),Be(t.name),R(3),rt("",t.burnedKcal," kcal"),R(),rt(" (",t.time," min) ")}}function Qq(n,e){if(n&1&&(E(0,"div",5)(1,"h3"),k(2,"Trainings:"),_(),E(3,"ul",11),Lt(4,Kq,7,3,"li",12,Hq),_()()),n&2){let t=ee();R(4),jt(t.trainings())}}function Yq(n,e){if(n&1&&(E(0,"div",6)(1,"h3"),k(2,"Watch the video:"),_(),ht(3,"iframe",15),_()),n&2){let t=ee();R(3),ye("src",t.videoUrl,Ru)}}function Zq(n,e){n&1&&(E(0,"p"),k(1,"No video available for this training."),_())}var ZN=(()=>{class n{constructor(){this.day=Zt(null),this.meals=Zt([]),this.trainings=Zt([]),this.youtubeService=x(YN),this.route=x(Hn),this.trainingAndMealService=x(Qn),this.videoDetails=null,this.videoId=null,this.sanitizer=x(zu),this.videoUrl=null,this.route.paramMap.subscribe(t=>{let r=t.get("day");if(console.log("Dzie\u0144 z parametru URL:",r),r){let i=new Date(r);this.day.set(i),this.loadDetails(i)}})}loadDetails(t){this.trainingAndMealService.getMealsByDate(t).subscribe(r=>{console.log("Pobrane posi\u0142ki:",r),this.meals.set(r)}),this.trainingAndMealService.getTrainingsByDate(t).subscribe(r=>{console.log("Pobrane treningi:",r),this.trainings.set(r),this.checkForVideo(r)})}checkForVideo(t){let r=t.find(i=>i.videoLink);r?(console.log("Training with video link found:",r),this.videoId=this.extractVideoId(r.videoLink),this.videoId?this.loadVideoDetails(this.videoId):(console.error("Brak ID wideo w linku"),this.videoUrl=null)):(console.log("Brak linku do wideo"),this.videoId=null,this.videoDetails=null,this.videoUrl=null)}extractVideoId(t){let r=/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/,i=t.match(r);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}loadVideoDetails(t){t&&this.youtubeService.getVideoDetails(t).subscribe(r=>{console.log("Odpowied\u017A z YouTube:",r),r.items&&r.items.length>0?(this.videoDetails=r.items[0],this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${t}`)):(console.error("Brak wynik\xF3w dla wideo"),this.videoDetails=null,this.videoUrl=null)},r=>{console.error("B\u0142\u0105d \u0142adowania wideo:",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-day-details"]],standalone:!0,features:[pe],decls:14,vars:11,consts:[[1,"day-details"],[1,"day-title"],[1,"calories-balance"],[1,"balance-value"],[1,"meals"],[1,"trainings"],[1,"youtube-video"],[1,"meal-list"],[1,"meal-item"],[1,"meal-name"],[1,"meal-calories"],[1,"training-list"],[1,"training-item"],[1,"training-name"],[1,"training-burned"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"h2",1),k(2),An(3,"date"),_(),E(4,"div",2)(5,"h3"),k(6,"Calories balance:"),_(),E(7,"p",3),k(8),An(9,"caloriesBalance"),_()(),He(10,Wq,6,0,"div",4)(11,Qq,6,0,"div",5)(12,Yq,4,1,"div",6)(13,Zq,2,0,"p"),_()),r&2&&(R(2),rt("Details for ",es(3,5,i.day(),"fullDate"),""),R(6),rt(" ",es(9,8,i.meals(),i.trainings())," kcal "),R(2),ke(i.meals().length>0?10:-1),R(),ke(i.trainings().length>0?11:-1),R(),ke(i.videoUrl?12:13))},dependencies:[ro,KN],styles:[".day-details[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#254636);padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;max-width:800px;margin:30px auto;color:#fff}.day-title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;margin-bottom:20px}.calories-balance[_ngcontent-%COMP%]{background-color:#0006;padding:15px;border-radius:8px;margin-bottom:20px;color:#fff}.balance-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff}.meals[_ngcontent-%COMP%], .trainings[_ngcontent-%COMP%]{background-color:#fffc;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d}.meal-list[_ngcontent-%COMP%], .training-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1.1rem;margin:10px 0;color:#333}.meal-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.meal-name[_ngcontent-%COMP%], .training-name[_ngcontent-%COMP%]{color:#006400}.meal-calories[_ngcontent-%COMP%], .training-burned[_ngcontent-%COMP%]{color:#d32f2f}@media (max-width: 768px){.day-details[_ngcontent-%COMP%]{padding:15px}.day-title[_ngcontent-%COMP%]{font-size:1.8rem}.balance-value[_ngcontent-%COMP%]{font-size:1.3rem}.meal-item[_ngcontent-%COMP%], .training-item[_ngcontent-%COMP%]{font-size:1rem}.youtube-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;margin:0 auto}}"]})}}return n})();var JN=(()=>{class n{constructor(){this.client=x(Ai),this.afAuth=x(hr)}addMeasurement(t){return new Promise((r,i)=>{this.afAuth.currentUser.then(o=>{let s=o?.uid;s?this.client.collection("measurements").add(ae($({},t),{uid:s,date:t.date.toString()})).then(()=>{console.log("Measurement added successfully"),r()}).catch(a=>{console.error("Error adding measurement:",a),i(a)}):i(new Error("No user found"))}).catch(o=>{console.error("Error getting user:",o),i(o)})})}getMeasurements(){return new ce(t=>{this.afAuth.currentUser.then(r=>{let i=r?.uid;i?this.client.collection("measurements",o=>o.where("uid","==",i)).valueChanges().subscribe(o=>{t.next(o)}):t.next([])}).catch(()=>t.next([]))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Xq(n,e){if(n&1&&(E(0,"tr")(1,"td"),k(2),_(),E(3,"td"),k(4),_(),E(5,"td",8),k(6),_(),E(7,"td",8),k(8),_(),E(9,"td",8),k(10),_(),E(11,"td",8),k(12),_(),E(13,"td",8),k(14),_(),E(15,"td",8),k(16),_()()),n&2){let t=e.$implicit,r=e.$index,i=ee(2);R(2),Be(t.date),R(2),Be(t.weight),R(),ye("ngStyle",i.getStyle(t,r,"waist")),R(),Be(t.waist),R(),ye("ngStyle",i.getStyle(t,r,"hips")),R(),Be(t.hips),R(),ye("ngStyle",i.getStyle(t,r,"thigh")),R(),Be(t.thigh),R(),ye("ngStyle",i.getStyle(t,r,"buttocks")),R(),Be(t.buttocks),R(),ye("ngStyle",i.getStyle(t,r,"arms")),R(),Be(t.arms),R(),ye("ngStyle",i.getStyle(t,r,"chest")),R(),Be(t.chest)}}function eH(n,e){if(n&1&&(E(0,"div")(1,"table")(2,"thead")(3,"tr")(4,"th"),k(5,"Data"),_(),E(6,"th"),k(7,"Waga (kg)"),_(),E(8,"th"),k(9,"Talia (cm)"),_(),E(10,"th"),k(11,"Biodra (cm)"),_(),E(12,"th"),k(13,"Uda (cm)"),_(),E(14,"th"),k(15,"Po\u015Bladki (cm)"),_(),E(16,"th"),k(17,"Ramiona (cm)"),_(),E(18,"th"),k(19,"Klatka piersiowa (cm)"),_()()(),E(20,"tbody"),Lt(21,Xq,17,14,"tr",null,Jt),_()()()),n&2){let t=ee();R(21),jt(t.measurements)}}function tH(n,e){if(n&1){let t=Ge();E(0,"div",7)(1,"form",9),J("ngSubmit",function(){ue(t);let i=ee();return le(i.addMeasurement())}),E(2,"div",10)(3,"label",11),k(4,"Data:"),_(),E(5,"input",12),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.date,i)||(o.newMeasurement.date=i),le(i)}),_()(),E(6,"div",10)(7,"label",13),k(8,"Talia:"),_(),E(9,"input",14),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.waist,i)||(o.newMeasurement.waist=i),le(i)}),_()(),E(10,"div",10)(11,"label",15),k(12,"Biodra:"),_(),E(13,"input",16),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.hips,i)||(o.newMeasurement.hips=i),le(i)}),_()(),E(14,"div",10)(15,"label",17),k(16,"Po\u015Bladki:"),_(),E(17,"input",18),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.buttocks,i)||(o.newMeasurement.buttocks=i),le(i)}),_()(),E(18,"div",10)(19,"label",19),k(20,"Uda:"),_(),E(21,"input",20),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.thigh,i)||(o.newMeasurement.thigh=i),le(i)}),_()(),E(22,"div",10)(23,"label",21),k(24,"Ramiona:"),_(),E(25,"input",22),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.arms,i)||(o.newMeasurement.arms=i),le(i)}),_()(),E(26,"div",10)(27,"label",23),k(28,"Klatka piersiowa:"),_(),E(29,"input",24),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.chest,i)||(o.newMeasurement.chest=i),le(i)}),_()(),E(30,"div",10)(31,"label",25),k(32,"Waga:"),_(),E(33,"input",26),Me("ngModelChange",function(i){ue(t);let o=ee();return ve(o.newMeasurement.weight,i)||(o.newMeasurement.weight=i),le(i)}),_()(),E(34,"div",10)(35,"button",27),k(36,"Dodaj pomiar"),_()()()()}if(n&2){let t=ee();R(5),Se("ngModel",t.newMeasurement.date),R(4),Se("ngModel",t.newMeasurement.waist),R(4),Se("ngModel",t.newMeasurement.hips),R(4),Se("ngModel",t.newMeasurement.buttocks),R(4),Se("ngModel",t.newMeasurement.thigh),R(4),Se("ngModel",t.newMeasurement.arms),R(4),Se("ngModel",t.newMeasurement.chest),R(4),Se("ngModel",t.newMeasurement.weight)}}var Kg=(()=>{class n{constructor(t){this.measurementsService=t,this.measurements=[],this.isFormVisible=!1,this.newMeasurement={id:"",date:new Date().toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}ngOnInit(){this.loadMeasurements()}loadMeasurements(){this.measurementsService.getMeasurements().subscribe(t=>{this.measurements=t})}addMeasurement(){this.measurementsService.addMeasurement(this.newMeasurement).then(()=>{this.loadMeasurements()}),this.newMeasurement={id:"",date:new Date().toISOString().split("T")[0],waist:0,hips:0,buttocks:0,thigh:0,arms:0,chest:0,weight:0}}calculateChange(t,r){if(r===0)return"-";let i=this.measurements[r-1];return(t.weight-i.weight).toFixed(2)}getStyle(t,r,i){if(r===0)return{};let o=this.measurements[r-1],s=t[i],a=o[i];if(typeof s=="number"&&typeof a=="number"){let c=s-a;return c>0?{color:"red"}:c<0?{color:"green"}:{color:"black"}}return{}}toggleForm(){this.isFormVisible=!this.isFormVisible}static{this.\u0275fac=function(r){return new(r||n)(Te(JN))}}static{this.\u0275cmp=fe({type:n,selectors:[["app-weight-control"]],standalone:!0,features:[pe],decls:10,vars:2,consts:[[1,"measurements-summary"],[1,"justify-content-center"],[1,"measurements-content"],[1,"measurements-table"],[4,"ngIf"],[1,"btn-container"],[1,"btn-toggle",3,"click"],[1,"measurement-form-container"],[3,"ngStyle"],[1,"measurement-form",3,"ngSubmit"],[1,"form-group"],["for","date"],["type","date","id","date","name","date","required","",3,"ngModelChange","ngModel"],["for","waist"],["type","number","id","waist","name","waist","required","",3,"ngModelChange","ngModel"],["for","hips"],["type","number","id","hips","name","hips","required","",3,"ngModelChange","ngModel"],["for","buttocks"],["type","number","id","buttocks","name","buttocks","required","",3,"ngModelChange","ngModel"],["for","thigh"],["type","number","id","thigh","name","thigh","required","",3,"ngModelChange","ngModel"],["for","arms"],["type","number","id","arms","name","arms","required","",3,"ngModelChange","ngModel"],["for","chest"],["type","number","id","chest","name","chest","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"h3",1),k(2,"Zestawienie Pomiar\xF3w cia\u0142a:"),_(),E(3,"div",2)(4,"div",3),He(5,eH,23,0,"div",4),_(),E(6,"div",5)(7,"button",6),J("click",function(){return i.toggleForm()}),k(8,"Dodaj pomiar"),_()(),He(9,tH,37,8,"div",7),_()()),r&2&&(R(5),ye("ngIf",i.measurements.length>1),R(4),ke(i.isFormVisible?9:-1))},dependencies:[Xe,Rc,En,xi,Yn,Pc,Os,Fn,ks,Pn,zM,qM],styles:[".measurements-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.measurements-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.measurements-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.measurements-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.measurement-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .measurement-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}@media (max-width: 768px){.measurement-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.measurement-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.justify-content-center[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;color:#333}.measurement-form[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{text-align:center;width:100%}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .btn-toggle[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:auto;margin:0 auto}.measurement-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}"]})}}return n})();var XN=(()=>{class n{constructor(){this.meals=Zt([]),this.trainings=Zt([]),this.currentMonth=new Date,this.trainingAndMealService=x(Qn),this.cdr=x(Pr),this.loadMonthlyDetails()}changeMonth(t){let r=new Date(this.currentMonth);r.setMonth(this.currentMonth.getMonth()+t),this.currentMonth=r,this.loadMonthlyDetails(),this.cdr.markForCheck()}loadMonthlyDetails(){let t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),r=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.trainingAndMealService.getMealsByDateRange(t,r).subscribe(i=>{this.meals.set(i||[])}),this.trainingAndMealService.getTrainingsByDateRange(t,r).subscribe(i=>{this.trainings.set(i||[])})}totalCalories(){return this.meals().reduce((r,i)=>r+(i.calories?Number(i.calories):0),0)}totalBurnedCalories(){return this.trainings().filter(i=>i.isDone===!0).reduce((i,o)=>i+(o.burnedKcal?Number(o.burnedKcal):0),0)}totalTrainingTime(){let r=this.trainings().filter(i=>i.isDone===!0);return console.log("Completed Trainings:",r),r.reduce((i,o)=>{let s=o.time?Number(o.time):0;return console.log("Training Time:",s),i+(isNaN(s)?0:s)},0)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-monthly-summary"]],standalone:!0,features:[pe],decls:24,vars:7,consts:[[1,"monthly-summary"],[1,"summary"],[1,"month-navigation"],[1,"nav-button",3,"click"],[1,"summary-title"],[1,"calories-summary"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),J("click",function(){return i.changeMonth(-1)}),k(4," \u2190 Poprzedni miesi\u0105c "),_(),E(5,"h2",4),k(6),An(7,"date"),_(),E(8,"button",3),J("click",function(){return i.changeMonth(1)}),k(9," Nast\u0119pny miesi\u0105c \u2192 "),_()(),E(10,"div",5)(11,"p")(12,"strong"),k(13,"\u0141\u0105czna liczba kalorii:"),_(),k(14),_(),E(15,"p")(16,"strong"),k(17,"\u0141\u0105czna liczba spalonych kalorii:"),_(),k(18),_(),E(19,"p")(20,"strong"),k(21,"\u0141\u0105czny czas trening\xF3w:"),_(),k(22),_()()()(),ht(23,"app-weight-control")),r&2&&(R(6),rt(" Zestawienie miesi\u0119czne dla miesi\u0105ca: ",es(7,4,i.currentMonth,"MMMM yyyy")," "),R(8),rt(" ",i.totalCalories()," kcal"),R(4),rt(" ",i.totalBurnedCalories()," kcal "),R(4),rt(" ",i.totalTrainingTime()," min "))},dependencies:[ro,Kg],styles:[".monthly-summary[_ngcontent-%COMP%]{padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a;max-width:900px;margin:20px auto}.monthly-summary[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.monthly-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;text-align:center;color:#333;margin-bottom:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border:1px solid #ddd}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e0f7fa;font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f9f9f9}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ng-style-changes[_ngcontent-%COMP%]{font-weight:700}.monthly-summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.monthly-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.monthly-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .monthly-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;width:100%}.monthly-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#2f5957}@media (max-width: 768px){.monthly-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.monthly-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px}}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:8px 16px;border-radius:5px;font-size:14px;cursor:pointer;width:auto;margin:0 auto}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background-color:#2f5957;transform:scale(1.05)}.monthly-summary[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 6px;font-size:16px}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.monthly-summary[_ngcontent-%COMP%]   .month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;color:#333;margin:0 20px}"]})}}return n})();var kc=(()=>{class n{constructor(){this.client=x(Ai),this.afAuth=x(hr)}getAllFitnessPlans(){return this.client.collection("FitnessPlans").valueChanges()}createFitnessPlan(t){let r=$({},t);this.client.collection("FitnessPlans").add(r).then(()=>console.log("Plan fitness dodany")).catch(i=>console.error("B\u0142\u0105d przy dodawaniu planu fitness",i))}getFitnessPlanById(t){return this.client.collection("FitnessPlans",r=>r.where("id","==",t)).valueChanges().pipe(re(r=>r.length>0?r[0]:void 0),ct(r=>{console.log("Fetched Plan Data from Firestore:",r)}),re(r=>{if(r)return r;console.log("Brak planu dla podanego ID:",t)}))}updateFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t.id)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).update(t).then(()=>console.log("Plan fitness zaktualizowany")).catch(o=>console.error("B\u0142\u0105d przy aktualizacji planu fitness",o))})})}deleteFitnessPlan(t){this.client.collection("FitnessPlans",r=>r.where("id","==",t)).get().subscribe(r=>{r.forEach(i=>{this.client.doc(`FitnessPlans/${i.id}`).delete().then(()=>console.log("Plan fitness usuni\u0119ty")).catch(o=>console.error("B\u0142\u0105d przy usuwaniu planu fitness",o))})})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nH(n,e){if(n&1){let t=Ge();E(0,"div",5)(1,"div",7)(2,"input",8),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.videoLink,i)||(o.videoLink=i),le(i)}),_(),E(3,"input",9),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.time,i)||(o.time=i),le(i)}),_(),E(4,"input",10),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.burnedKcal,i)||(o.burnedKcal=i),le(i)}),_(),E(5,"button",11),J("click",function(){let i=ue(t).$index,o=ee();return le(o.removeDay(i))}),k(6,"Usu\u0144 dzie\u0144"),_()()()}if(n&2){let t=e.$implicit;R(2),Se("ngModel",t.videoLink),R(),Se("ngModel",t.time),R(),Se("ngModel",t.burnedKcal)}}var ek=(()=>{class n{constructor(){this.fitnessPlanService=x(kc),this.router=x(it),this.plans=[],this.planName="",this.days=[],this.planDescription="",this.loadAllPlans()}loadAllPlans(){this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Wszystkie plany:",t),this.plans=t})}addDay(){this.days.push({date:"",videoLink:"",time:"",burnedKcal:0})}removeDay(t){this.days.splice(t,1)}savePlan(){let t={id:this.fitnessPlanService.client.createId(),name:this.planName,description:this.planDescription,days:this.days,uid:""};this.fitnessPlanService.createFitnessPlan(t),this.router.navigate(["/home"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-training-plans"]],standalone:!0,features:[pe],decls:11,vars:2,consts:[[1,"plan-form"],[1,"image-container"],["src","assets/foto.jpg","alt","Fitness Plan Image",1,"plan-image"],["placeholder","Nazwa planu",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Opis planu",1,"form-control",3,"ngModelChange","ngModel"],[1,"day-card"],[1,"btn-primary",3,"click"],[1,"day-form"],["placeholder","Link do YouTube",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Czas trwania (min)","type","number",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","Spalone kcal","type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-danger",3,"click"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"div",1),ht(2,"img",2),_(),E(3,"input",3),Me("ngModelChange",function(s){return ve(i.planName,s)||(i.planName=s),s}),_(),E(4,"input",4),Me("ngModelChange",function(s){return ve(i.planDescription,s)||(i.planDescription=s),s}),_(),Lt(5,nH,7,3,"div",5,Jt),E(7,"button",6),J("click",function(){return i.addDay()}),k(8,"Dodaj dzie\u0144"),_(),E(9,"button",6),J("click",function(){return i.savePlan()}),k(10,"Zapisz plan"),_()()),r&2&&(R(3),Se("ngModel",i.planName),R(),Se("ngModel",i.planDescription),R(),jt(i.days))},dependencies:[Xe,En,xi,Yn,Fn],styles:[".plan-form[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px}input.form-control[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc;width:100%;margin-top:10px}input.form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 5px #28a74580}.day-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;padding:15px;margin-bottom:15px}.day-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}button.btn-primary[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2f5957}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none;color:#fff;padding:10px 20px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .3s;width:100%;margin-top:10px}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return n})();var rH=n=>["/plan",n];function iH(n,e){if(n&1){let t=Ge();E(0,"div",8),J("click",function(){let i=ue(t).$implicit,o=ee();return le(o.selectPlan(i))}),E(1,"h4",9),k(2),_(),E(3,"p"),k(4),_(),E(5,"div",10)(6,"button",11),k(7," Wi\u0119cej "),_(),E(8,"button",12),J("click",function(){let i=ue(t).$implicit,o=ee();return le(o.deletePlan(i))}),k(9," Usu\u0144 "),_()()()}if(n&2){let t=e.$implicit,r=ee();Ji("selected",t.id===(r.selectedPlan==null?null:r.selectedPlan.id)),R(2),Be(t.name),R(2),Be(t.description),R(2),ye("routerLink",wM(5,rH,t.id))}}var tk=(()=>{class n{constructor(){this.fitnessPlanService=x(kc),this.calendarService=x(Qn),this.fitnessPlans=[],this.selectedPlan=null,this.startDate=new Date,this.router=x(it),this.fitnessPlanService.getAllFitnessPlans().subscribe(t=>{console.log("Plany w komponencie:",t),this.fitnessPlans=t})}selectPlan(t){console.log("Wybrano plan:",t),this.selectedPlan=t}goToPlanDetails(t){this.router.navigate([`/plan/${t}`])}startPlan(){if(console.log("Rozpoczynanie planu:",this.selectedPlan),this.selectedPlan){let t=this.startDate;t instanceof Date||(t=new Date(t)),this.selectedPlan.days.forEach((r,i)=>{let o=new Date(t);o.setDate(t.getDate()+i);let s=r.name?`Trening: ${r.name}`:`Trening: Dzie\u0144 ${i+1}`,a=r.burnedKcal||0,c=r.time||0;this.calendarService.addTraining({name:s,date:o,burnedKcal:a,time:c,videoLink:r.videoLink}),this.router.navigate(["/home"]),console.log(`Dodano trening dnia ${o.toISOString()}: ${r.videoLink}`)})}}deletePlan(t){this.fitnessPlanService.deleteFitnessPlan(t.id),this.fitnessPlans=this.fitnessPlans.filter(r=>r.id!==t.id),console.log("Plan usuni\u0119ty",t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-training-plans-select"]],standalone:!0,features:[pe],decls:13,vars:1,consts:[["src","assets/foto2.jpg","alt","Fitness Plan Image",1,"plan-image"],[1,"fitness-plan-select"],[1,"plan-cards-container"],[1,"plan-card",3,"selected"],[1,"form-group"],["for","startDate"],["id","startDate","type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click"],[1,"plan-card",3,"click"],[1,"plan-title"],[1,"button-group"],[1,"btn","btn-link","btn-sm",3,"routerLink"],[1,"btn","btn-link","btn-sm",3,"click"]],template:function(r,i){r&1&&(ht(0,"img",0),E(1,"div",1)(2,"h3"),k(3,"Fitness Plans:"),_(),E(4,"div",2),Lt(5,iH,10,7,"div",3,Jt),_(),E(7,"div",4)(8,"label",5),k(9,"Wybierz dat\u0119 rozpocz\u0119cia "),_(),E(10,"input",6),Me("ngModelChange",function(s){return ve(i.startDate,s)||(i.startDate=s),s}),_()(),E(11,"button",7),J("click",function(){return i.startPlan()}),k(12,"Rozpocznij Plan"),_()()),r&2&&(R(5),jt(i.fitnessPlans),R(5),Se("ngModel",i.startDate))},dependencies:[Xe,En,Yn,Fn,Pn,Va,cp],styles:[".fitness-plan-select[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:10px;color:#333}h3[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;margin-bottom:20px}.plan-cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;justify-content:center;max-width:780px;margin:0 auto}.plan-card[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:8px;padding:20px;width:250px;display:flex;flex-direction:column;align-items:flex-start;box-shadow:0 4px 15px #0000001a;cursor:pointer;transition:all .3s ease}.plan-card.selected[_ngcontent-%COMP%]{background:#dcdcdc}.plan-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;margin-bottom:15px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;border-radius:5px;padding:8px 12px}.form-group[_ngcontent-%COMP%]{margin-top:20px}#startDate[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc}.btn-primary[_ngcontent-%COMP%]{margin-top:20px;background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}"]})}}return n})();function oH(n,e){if(n&1&&(E(0,"div"),ht(1,"iframe",10),_()),n&2){let t=ee().$implicit,r=ee();R(),ye("src",r.getVideoUrl(t.videoLink),Ru)}}function sH(n,e){if(n&1){let t=Ge();E(0,"div",2)(1,"div",4)(2,"h5",5),k(3),_(),E(4,"div",6)(5,"label",7),k(6,"Spalone kalorie"),_(),E(7,"input",8),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.burnedKcal,i)||(o.burnedKcal=i),le(i)}),_()(),E(8,"div",6)(9,"label",7),k(10,"Czas treningu (w minutach)"),_(),E(11,"input",8),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.time,i)||(o.time=i),le(i)}),_()(),E(12,"div",6)(13,"label",7),k(14,"Link wideo"),_(),E(15,"input",9),Me("ngModelChange",function(i){let o=ue(t).$implicit;return ve(o.videoLink,i)||(o.videoLink=i),le(i)}),_()(),E(16,"div",6)(17,"label"),k(18,"Filmik z YouTube"),_(),He(19,oH,2,1,"div"),_()()()}if(n&2){let t=e.$implicit,r=e.$index;R(3),rt("Dzie\u0144 ",r+1,""),R(2),Xi("for","burnedKcal",r,""),R(2),Xi("id","burnedKcal",r,""),Se("ngModel",t.burnedKcal),R(2),Xi("for","duration",r,""),R(2),Xi("id","duration",r,""),Se("ngModel",t.time),R(2),Xi("for","videoLink",r,""),R(2),Xi("id","videoLink",r,""),Se("ngModel",t.videoLink),R(4),ke(t.videoLink?19:-1)}}var nk=(()=>{class n{constructor(){this.fitnessPlanService=x(kc),this.route=x(Hn),this.planId=null,this.plan=void 0,this.sanitizer=x(zu)}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");console.log("Fetched Plan ID:",t),t&&this.fitnessPlanService.getFitnessPlanById(t).subscribe(r=>{r?this.plan=r:console.log("Brak planu dla ID:",t)})}savePlanEdits(){this.plan&&(this.fitnessPlanService.updateFitnessPlan(this.plan),console.log("Zmiany zapisane dla planu:",this.plan))}getVideoUrl(t){if(t){let i=`https://www.youtube.com/embed/${this.extractVideoId(t)}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}return""}extractVideoId(t){let r=/(?:youtube\.com\/(?:[^\/\n\s]+\/)+|(?:v\/|e\/|u\/\w\/|embed\/|shorts\/|watch\?v=)|youtu\.be\/)([^#&?]*).*/,i=t.match(r);return console.log("Extracted video ID:",i?i[1]:null),i?i[1]:null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-training-plan-detail"]],standalone:!0,features:[pe],decls:8,vars:1,consts:[[1,"plan-details"],[1,"card-container"],[1,"card","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"card-title"],[1,"form-group"],[3,"for"],["type","number",1,"form-control",3,"ngModelChange","ngModel","id"],["type","text",1,"form-control",3,"ngModelChange","ngModel","id"],["width","100%","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"h4"),k(2),_(),E(3,"div",1),Lt(4,sH,20,17,"div",2,Jt),_(),E(6,"button",3),J("click",function(){return i.savePlanEdits()}),k(7,"Zapisz zmiany"),_()()),r&2&&(R(2),rt("Szczeg\xF3\u0142y planu: ",i.plan==null?null:i.plan.name,""),R(2),jt(i.plan==null?null:i.plan.days))},dependencies:[Xe,En,xi,Yn,Fn],styles:[".plan-details[_ngcontent-%COMP%]{padding:20px;background:#f7f7f7;border-radius:10px;color:#333}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}.card[_ngcontent-%COMP%]{width:30%;background:linear-gradient(135deg,#e0f7fa,#254636);border-radius:8px;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;padding:20px;color:#333}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 12px #0003}.card-body[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}iframe[_ngcontent-%COMP%]{border-radius:10px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff)}"]})}}return n})();var rk=(()=>{class n{constructor(){this.router=x(it)}goToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-welcome"]],standalone:!0,features:[pe],decls:13,vars:0,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-images"],["src","assets/welcome.jpg","alt","Fitness Image 1",1,"welcome-image"],["src","assets/welcome2.jpeg","alt","Fitness Image 2",1,"welcome-image"],[1,"welcome-description"],[1,"btn-primary",3,"click"]],template:function(r,i){r&1&&(E(0,"div",0)(1,"h1",1),k(2,"Witaj w swoim kalendarzu fitness!"),_(),E(3,"p",2),k(4,"U nas mo\u017Cesz \u015Bledzi\u0107 swoje plany treningowe, spalone kalorie i wiele wi\u0119cej."),_(),E(5,"div",3),ht(6,"img",4)(7,"img",5),_(),E(8,"div",6)(9,"p"),k(10,"Wybierz jeden z naszych plan\xF3w treningowych, aby rozpocz\u0105\u0107 swoj\u0105 fitnessow\u0105 podr\xF3\u017C!"),_()(),E(11,"button",7),J("click",function(){return i.goToLogin()}),k(12,"Zaloguj si\u0119"),_()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-image:url(/assets/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;color:#fff;text-align:center;position:relative;z-index:1;padding:20px}.welcome-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out;margin-bottom:20px}.welcome-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin:20px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s 1s forwards}.welcome-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:15px 0;opacity:0;animation:_ngcontent-%COMP%_fadeIn 3s 1.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6e7dff,#3d4bff);border:none;color:#fff;padding:12px 20px;font-size:16px;border-radius:5px;cursor:pointer;transition:background .3s ease,transform .3s ease;text-transform:uppercase;letter-spacing:1px;margin-top:30px}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3d4bff,#6e7dff);transform:scale(1.05)}.welcome-images[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:30px;flex-wrap:wrap;justify-content:space-evenly}.welcome-image[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover;border-radius:10px;opacity:0;animation:_ngcontent-%COMP%_fadeInImage 2s 2s forwards}@keyframes _ngcontent-%COMP%_fadeInImage{0%{opacity:0}to{opacity:1}}.welcome-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out forwards}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}"]})}}return n})();function aH(n,e){if(n&1){let t=Ge();E(0,"p",1)(1,"strong"),k(2,"Email:"),_(),k(3),_(),E(4,"p",1)(5,"strong"),k(6,"UID:"),_(),k(7),_(),E(8,"button",2),J("click",function(){ue(t);let i=ee();return le(i.authService.logout())}),k(9,"Logout"),_()}if(n&2){let t=e;R(3),rt(" ",t.email,""),R(4),rt(" ",t.uid,"")}}function cH(n,e){n&1&&(E(0,"p",1),k(1,"No user is logged in."),_())}var ik=(()=>{class n{constructor(){this.authService=x(Hr),this.userSignal=this.authService.getCurrentUser()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-user"]],standalone:!0,features:[pe],decls:6,vars:3,consts:[[1,"user-details"],[1,"user-info"],[1,"btn-primary",3,"click"]],template:function(r,i){if(r&1&&(E(0,"div",0)(1,"h2"),k(2,"User Details"),_(),He(3,aH,10,2),An(4,"async"),He(5,cH,2,0,"p",1),_()),r&2){let o;R(3),ke((o=Ca(4,1,i.userSignal))?3:5,o)}},dependencies:[Pn,Of],styles:[".user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 6px #0000001a}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#254636;margin-bottom:15px}.user-info[_ngcontent-%COMP%]{font-size:16px;margin:10px 0;color:#333}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#254636}button.btn-primary[_ngcontent-%COMP%]{background-color:#254636;border:none;color:#fff;padding:12px 25px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s;width:100%;text-align:center;margin-top:20px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2f5957}p.user-info[_ngcontent-%COMP%]{margin-top:10px}"]})}}return n})();var ok=[{path:"",component:rk},{path:"home",component:HN,canActivate:[Pi]},{path:"login",component:GN},{path:"register",component:WN},{path:"day-details/:day",component:ZN,canActivate:[Pi]},{path:"summary",component:XN,canActivate:[Pi]},{path:"trainig-plans",component:ek,canActivate:[Pi]},{path:"select-plan",component:tk,canActivate:[Pi]},{path:"plan/:id",component:nk,canActivate:[Pi]},{path:"user",component:ik,canActivate:[Pi]},{path:"weight",component:Kg,canActivate:[Pi]}];var sk={providers:[dx(ok),EA(),dA(),wv([gN,Nx,Rx.initializeApp(QN.firebaseConfig)]),ro]};var uH=()=>["/summary"],lH=()=>["/home"],dH=()=>["/select-plan"],hH=()=>["/trainig-plans"];function fH(n,e){n&1&&(E(0,"div",1)(1,"button",4),k(2,"Osi\u0105gni\u0119cia"),_(),E(3,"button",4),k(4,"Kalnedarz"),_(),E(5,"button",4),k(6,"Fitness Plany"),_(),E(7,"button",4),k(8,"Stw\xF3rz Fitness Plan"),_()()),n&2&&(R(),ye("routerLink",Ou(4,uH)),R(2),ye("routerLink",Ou(5,lH)),R(2),ye("routerLink",Ou(6,dH)),R(2),ye("routerLink",Ou(7,hH)))}function pH(n,e){if(n&1){let t=Ge();E(0,"div",2)(1,"button",5),J("click",function(){ue(t);let i=ee();return le(i.navigateToLogin())}),k(2,"Zaloguj si\u0119"),_(),E(3,"button",5),J("click",function(){ue(t);let i=ee();return le(i.navigateToRegister())}),k(4,"Zarejestruj si\u0119"),_()()}}function gH(n,e){if(n&1){let t=Ge();E(0,"div",3)(1,"p"),k(2),_(),E(3,"button",6),k(4,"Moje konto"),_(),E(5,"button",7),J("click",function(){ue(t);let i=ee();return le(i.logout())}),k(6,"Wyloguj"),_()()}n&2&&(R(2),rt("Witaj, ",e.email,""),R(),ye("routerLink","/user"))}var ak=(()=>{class n{constructor(){this.authService=x(Hr),this.router=x(it),this.formChange=new De,this.currentForm="login",this.user$=this.authService.getCurrentUser()}logout(){this.authService.logout(),this.router.navigate(["/login"])}showForm(t){this.formChange.emit(t)}navigateToLogin(){this.formChange.emit("login"),this.router.navigate(["/login"])}navigateToRegister(){this.formChange.emit("register"),this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-navbar"]],outputs:{formChange:"formChange"},standalone:!0,features:[pe],decls:7,vars:9,consts:[[1,"navbar"],[1,"nav-links"],[1,"auth-buttons"],[1,"user-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){if(r&1&&(E(0,"div",0),He(1,fH,9,8,"div",1),An(2,"async"),He(3,pH,5,0,"div",2),An(4,"async"),He(5,gH,7,2,"div",3),An(6,"async"),_()),r&2){let o,s;R(),ke((o=Ca(2,3,i.user$))?1:-1,o),R(2),ke(Ca(4,5,i.user$)?-1:3),R(2),ke((s=Ca(6,7,i.user$))?5:-1,s)}},dependencies:[Pn,Of,Va,cp],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:linear-gradient(135deg,#e0f7fa,#254636);color:#fff;border-radius:10px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;font-size:16px;border:none;border-radius:20px;transition:background-color .3s ease,transform .3s ease}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#254636;color:#fff}.navbar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#254636}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid #254636}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.navbar[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]:hover{background-color:#e0f7fa}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;font-size:16px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.auth-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:10px}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:15px 10px}.user-info[_ngcontent-%COMP%], .auth-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-top:10px}.navbar[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-right:0}}"]})}}return n})();var ck=(()=>{class n{constructor(){this.client=x(Ai),this.products$=this.getProducts(),this.currentForm="login"}getProducts(){return this.client.collection("products").valueChanges()}showForm(t){this.currentForm=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fe({type:n,selectors:[["app-root"]],standalone:!0,features:[pe],decls:3,vars:0,consts:[[3,"formChange"],[1,"welcome-container"]],template:function(r,i){r&1&&(E(0,"app-navbar",0),J("formChange",function(s){return i.showForm(s)}),_(),E(1,"div",1),ht(2,"router-outlet"),_())},dependencies:[p0,Pn,ak],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:16px;cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{font-size:18px;margin:5px 0}"]})}}return n})();wA(ck,sk).catch(n=>console.error(n));
